{
  if (DEBUG) {
    Log.d(TAG,"createSessionInternalLocked(name=" + sessionState.name.getClassName() + ")");
  }
  ITvInputSessionCallback callback=new ITvInputSessionCallback.Stub(){
    @Override public void onSessionCreated(    ITvInputSession session){
      if (DEBUG) {
        Log.d(TAG,"onSessionCreated(name=" + sessionState.name.getClassName() + ")");
      }
synchronized (mLock) {
        sessionState.session=session;
        if (session == null) {
          removeSessionStateLocked(sessionToken,userId);
          sendSessionTokenToClientLocked(sessionState.client,sessionState.name,null,sessionState.seq,userId);
        }
 else {
          sendSessionTokenToClientLocked(sessionState.client,sessionState.name,sessionToken,sessionState.seq,userId);
        }
      }
    }
  }
;
  try {
    service.createSession(callback);
  }
 catch (  RemoteException e) {
    Log.e(TAG,"error in createSession",e);
    removeSessionStateLocked(sessionToken,userId);
    sendSessionTokenToClientLocked(sessionState.client,sessionState.name,null,sessionState.seq,userId);
  }
}
