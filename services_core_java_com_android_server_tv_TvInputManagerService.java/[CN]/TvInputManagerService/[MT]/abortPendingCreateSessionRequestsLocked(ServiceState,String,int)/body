{
  UserState userState=getUserStateLocked(userId);
  for (  IBinder sessionToken : serviceState.mSessionTokens) {
    SessionState sessionState=userState.sessionStateMap.get(sessionToken);
    if (sessionState.mSession == null && (inputId == null || sessionState.mInfo.getId().equals(inputId))) {
      removeSessionStateLocked(sessionToken,sessionState.mUserId);
      sendSessionTokenToClientLocked(sessionState.mClient,sessionState.mInfo.getId(),null,null,sessionState.mSeq);
    }
  }
  updateServiceConnectionLocked(serviceState.mComponent,userId);
}
