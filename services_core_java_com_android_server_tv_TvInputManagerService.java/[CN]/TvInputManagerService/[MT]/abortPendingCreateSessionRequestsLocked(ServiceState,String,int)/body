{
  UserState userState=getUserStateLocked(userId);
  List<SessionState> sessionsToAbort=new ArrayList<>();
  for (  IBinder sessionToken : serviceState.mSessionTokens) {
    SessionState sessionState=userState.sessionStateMap.get(sessionToken);
    if (sessionState.mSession == null && (inputId == null || sessionState.mInfo.getId().equals(inputId))) {
      sessionsToAbort.add(sessionState);
    }
  }
  for (  SessionState sessionState : sessionsToAbort) {
    removeSessionStateLocked(sessionState.mSessionToken,sessionState.mUserId);
    sendSessionTokenToClientLocked(sessionState.mClient,sessionState.mInfo.getId(),null,null,sessionState.mSeq);
  }
  updateServiceConnectionLocked(serviceState.mComponent,userId);
}
