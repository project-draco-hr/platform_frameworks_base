{
  UserState userState=mUserStates.get(userId);
  if (userState == null) {
    throw new IllegalStateException("User state not found for user ID " + userId);
  }
  return userState;
}
