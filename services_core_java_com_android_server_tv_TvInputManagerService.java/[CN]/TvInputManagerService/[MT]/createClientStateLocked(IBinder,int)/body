{
  UserState userState=getUserStateLocked(userId);
  ClientState clientState=new ClientState(clientToken,userId);
  try {
    clientToken.linkToDeath(clientState,0);
  }
 catch (  RemoteException e) {
    Slog.e(TAG,"client process has already died",e);
  }
  userState.clientStateMap.put(clientToken,clientState);
  return clientState;
}
