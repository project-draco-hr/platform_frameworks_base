{
  SessionState sessionState=getSessionStateLocked(sessionToken,callingUid,userId);
  if (sessionState.mSession != null) {
    UserState userState=getUserStateLocked(userId);
    if (sessionToken == userState.mainSessionToken) {
      setMainLocked(sessionToken,false,callingUid,userId);
    }
    try {
      sessionState.mSession.release();
    }
 catch (    RemoteException e) {
      Slog.e(TAG,"session process has already died",e);
    }
    sessionState.mSession=null;
  }
  removeSessionStateLocked(sessionToken,userId);
}
