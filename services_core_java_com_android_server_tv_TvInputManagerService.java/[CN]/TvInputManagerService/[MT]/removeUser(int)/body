{
synchronized (mLock) {
    UserState userState=mUserStates.get(userId);
    if (userState == null) {
      return;
    }
    for (    SessionState state : userState.sessionStateMap.values()) {
      if (state.session != null) {
        try {
          state.session.release();
        }
 catch (        RemoteException e) {
          Log.e(TAG,"error in release",e);
        }
      }
    }
    userState.sessionStateMap.clear();
    for (    ServiceState serviceState : userState.serviceStateMap.values()) {
      if (serviceState.callback != null) {
        try {
          serviceState.service.unregisterCallback(serviceState.callback);
        }
 catch (        RemoteException e) {
          Log.e(TAG,"error in unregisterCallback",e);
        }
      }
      serviceState.clients.clear();
      mContext.unbindService(serviceState.connection);
    }
    userState.serviceStateMap.clear();
    mUserStates.remove(userId);
  }
}
