{
  String[] projection={TvContract.Programs.TITLE,TvContract.Programs.START_TIME_UTC_MILLIS,TvContract.Programs.END_TIME_UTC_MILLIS,TvContract.Programs.DESCRIPTION};
  String selection=TvContract.Programs.CHANNEL_ID + "=? AND " + TvContract.Programs.START_TIME_UTC_MILLIS+ "<=? AND "+ TvContract.Programs.END_TIME_UTC_MILLIS+ ">?";
  String[] selectionArgs={String.valueOf(channelId),String.valueOf(watchStarttime),String.valueOf(watchStarttime)};
  String sortOrder=TvContract.Programs.START_TIME_UTC_MILLIS + " ASC";
  Cursor cursor=null;
  try {
    cursor=mContentResolver.query(TvContract.Programs.CONTENT_URI,projection,selection,selectionArgs,sortOrder);
    if (cursor != null && cursor.moveToNext()) {
      ContentValues values=new ContentValues();
      values.put(TvContract.WatchedPrograms.TITLE,cursor.getString(0));
      values.put(TvContract.WatchedPrograms.START_TIME_UTC_MILLIS,cursor.getLong(1));
      long endTime=cursor.getLong(2);
      values.put(TvContract.WatchedPrograms.END_TIME_UTC_MILLIS,endTime);
      values.put(TvContract.WatchedPrograms.DESCRIPTION,cursor.getString(3));
      mContentResolver.update(uri,values,null,null);
      SomeArgs args=SomeArgs.obtain();
      args.arg1=uri;
      args.arg2=channelId;
      args.arg3=endTime;
      Message msg=obtainMessage(LogHandler.MSG_UPDATE_ENTRY,args);
      sendMessageDelayed(msg,endTime - System.currentTimeMillis());
    }
  }
  finally {
    if (cursor != null) {
      cursor.close();
    }
  }
}
