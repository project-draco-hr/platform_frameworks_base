{
synchronized (mLock) {
    UserState userState=getUserStateLocked(mUserId);
    ClientState clientState=userState.clientStateMap.get(mClientToken);
    if (clientState != null) {
      while (clientState.mSessionTokens.size() > 0) {
        releaseSessionLocked(clientState.mSessionTokens.get(0),Process.SYSTEM_UID,mUserId);
      }
      while (clientState.mInputIds.size() > 0) {
        unregisterClientInternalLocked(mClientToken,clientState.mInputIds.get(0),mUserId);
      }
    }
    mClientToken=null;
  }
}
