{
synchronized (mLock) {
    session=null;
    if (client != null) {
      try {
        client.onSessionReleased(seq);
      }
 catch (      RemoteException e) {
        Slog.e(TAG,"error in onSessionReleased",e);
      }
    }
    UserState userState=getOrCreateUserStateLocked(userId);
    for (    SessionState sessionState : userState.sessionStateMap.values()) {
      if (sessionToken == sessionState.hardwareSessionToken) {
        releaseSessionLocked(sessionState.sessionToken,Process.SYSTEM_UID,userId);
        try {
          sessionState.client.onSessionReleased(sessionState.seq);
        }
 catch (        RemoteException e) {
          Slog.e(TAG,"error in onSessionReleased",e);
        }
      }
    }
    removeSessionStateLocked(sessionToken,userId);
  }
}
