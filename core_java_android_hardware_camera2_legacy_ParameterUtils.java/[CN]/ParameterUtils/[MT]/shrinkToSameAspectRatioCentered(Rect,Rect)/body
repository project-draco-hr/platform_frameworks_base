{
  float aspectRatioReference=reference.width() * 1.0f / reference.height();
  float aspectRatioShrinkTarget=shrinkTarget.width() * 1.0f / shrinkTarget.height();
  float cropH, cropW;
  if (aspectRatioShrinkTarget < aspectRatioReference) {
    cropH=reference.height();
    cropW=cropH * aspectRatioShrinkTarget;
  }
 else {
    cropW=reference.width();
    cropH=cropW / aspectRatioShrinkTarget;
  }
  Matrix translateMatrix=new Matrix();
  RectF shrunkRect=new RectF(shrinkTarget);
  translateMatrix.setScale(cropW / reference.width(),cropH / reference.height(),shrinkTarget.exactCenterX(),shrinkTarget.exactCenterY());
  translateMatrix.mapRect(shrunkRect);
  return ParamsUtils.createRect(shrunkRect);
}
