{
  final boolean locationEnabled=mController.isLocationEnabled();
  state.visible=true;
  if (state.value != locationEnabled) {
    state.value=locationEnabled;
    final AnimationDrawable d=(AnimationDrawable)mContext.getDrawable(locationEnabled ? R.drawable.ic_qs_location_on : R.drawable.ic_qs_location_off);
    state.icon=d;
    mUiHandler.post(new Runnable(){
      @Override public void run(){
        d.start();
      }
    }
);
  }
  if (locationEnabled) {
    if (state.icon == null)     state.iconId=R.drawable.ic_qs_location_01;
    state.label=mContext.getString(R.string.quick_settings_location_label);
    state.contentDescription=mContext.getString(R.string.accessibility_quick_settings_location,mContext.getString(R.string.accessibility_desc_on));
  }
 else {
    if (state.icon == null)     state.iconId=R.drawable.ic_qs_location_11;
    state.label=mContext.getString(R.string.quick_settings_location_off_label);
    state.contentDescription=mContext.getString(R.string.accessibility_quick_settings_location,mContext.getString(R.string.accessibility_desc_off));
  }
}
