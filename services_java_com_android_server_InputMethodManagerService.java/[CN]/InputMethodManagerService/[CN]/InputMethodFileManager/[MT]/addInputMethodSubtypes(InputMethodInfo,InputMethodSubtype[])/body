{
synchronized (mMethodMap) {
    final ArrayList<InputMethodSubtype> subtypes=new ArrayList<InputMethodSubtype>();
    final int N=additionalSubtypes.length;
    for (int i=0; i < N; ++i) {
      final InputMethodSubtype subtype=additionalSubtypes[i];
      if (!subtypes.contains(subtype)) {
        subtypes.add(subtype);
      }
    }
    mSubtypesMap.put(imi.getId(),subtypes);
    writeAdditionalInputMethodSubtypes(mSubtypesMap,mAdditionalInputMethodSubtypeFile,mMethodMap);
  }
}
