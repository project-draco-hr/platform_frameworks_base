{
  List<Pair<String,ArrayList<String>>> imsList=getEnabledInputMethodsAndSubtypeListLocked();
  ArrayList<InputMethodSubtype> enabledSubtypes=new ArrayList<InputMethodSubtype>();
  if (imi != null) {
    for (    Pair<String,ArrayList<String>> imsPair : imsList) {
      InputMethodInfo info=mMethodMap.get(imsPair.first);
      if (info != null && info.getId().equals(imi.getId())) {
        ArrayList<InputMethodSubtype> subtypes=info.getSubtypes();
        for (        InputMethodSubtype ims : subtypes) {
          for (          String s : imsPair.second) {
            if (String.valueOf(ims.hashCode()).equals(s)) {
              enabledSubtypes.add(ims);
            }
          }
        }
        break;
      }
    }
  }
  return enabledSubtypes;
}
