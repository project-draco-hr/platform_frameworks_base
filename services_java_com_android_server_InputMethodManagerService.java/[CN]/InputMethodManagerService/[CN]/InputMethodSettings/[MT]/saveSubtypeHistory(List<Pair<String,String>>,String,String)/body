{
  StringBuilder builder=new StringBuilder();
  boolean isImeAdded=false;
  if (!TextUtils.isEmpty(newImeId) && !TextUtils.isEmpty(newSubtypeId)) {
    builder.append(newImeId).append(INPUT_METHOD_SUBTYPE_SEPARATER).append(newSubtypeId);
    isImeAdded=true;
  }
  for (  Pair<String,String> ime : savedImes) {
    String imeId=ime.first;
    String subtypeId=ime.second;
    if (TextUtils.isEmpty(subtypeId)) {
      subtypeId=NOT_A_SUBTYPE_ID_STR;
    }
    if (isImeAdded) {
      builder.append(INPUT_METHOD_SEPARATER);
    }
 else {
      isImeAdded=true;
    }
    builder.append(imeId).append(INPUT_METHOD_SUBTYPE_SEPARATER).append(subtypeId);
  }
  putSubtypeHistoryStr(builder.toString());
}
