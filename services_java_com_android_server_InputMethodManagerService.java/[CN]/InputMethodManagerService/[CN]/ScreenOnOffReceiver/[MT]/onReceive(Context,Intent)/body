{
  if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
    mScreenOn=true;
    refreshImeWindowVisibilityLocked();
  }
 else   if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
    mScreenOn=false;
    setImeWindowVisibilityStatusHiddenLocked();
  }
 else   if (intent.getAction().equals(Intent.ACTION_CLOSE_SYSTEM_DIALOGS)) {
    hideInputMethodMenu();
    return;
  }
 else {
    Slog.w(TAG,"Unexpected intent " + intent);
  }
  if (mCurClient != null && mCurClient.client != null) {
    executeOrSendMessage(mCurClient.client,mCaller.obtainMessageIO(MSG_SET_ACTIVE,mScreenOn ? 1 : 0,mCurClient));
  }
}
