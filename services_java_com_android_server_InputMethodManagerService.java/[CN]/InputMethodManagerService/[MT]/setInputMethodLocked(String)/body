{
  InputMethodInfo info=mMethodMap.get(id);
  if (info == null) {
    throw new IllegalArgumentException("Unknown id: " + mCurMethodId);
  }
  if (id.equals(mCurMethodId)) {
    return;
  }
  final long ident=Binder.clearCallingIdentity();
  try {
    mCurMethodId=id;
    Settings.Secure.putString(mContext.getContentResolver(),Settings.Secure.DEFAULT_INPUT_METHOD,id);
    Intent intent=new Intent(Intent.ACTION_INPUT_METHOD_CHANGED);
    intent.putExtra("input_method_id",id);
    mContext.sendBroadcast(intent);
    unbindCurrentInputLocked();
  }
  finally {
    Binder.restoreCallingIdentity(ident);
  }
}
