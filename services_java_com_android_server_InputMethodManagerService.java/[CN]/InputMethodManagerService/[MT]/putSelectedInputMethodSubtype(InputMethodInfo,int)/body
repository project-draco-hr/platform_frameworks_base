{
  final ArrayList<InputMethodSubtype> subtypes=imi.getSubtypes();
  if (subtypeId >= 0 && subtypeId < subtypes.size()) {
    Settings.Secure.putInt(mContext.getContentResolver(),Settings.Secure.SELECTED_INPUT_METHOD_SUBTYPE,subtypes.get(subtypeId).hashCode());
    mCurrentSubtype=subtypes.get(subtypeId);
  }
 else {
    resetSelectedInputMethodSubtype();
    mCurrentSubtype=null;
  }
}
