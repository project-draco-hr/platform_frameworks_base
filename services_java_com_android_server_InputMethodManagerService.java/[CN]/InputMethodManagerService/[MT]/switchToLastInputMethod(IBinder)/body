{
synchronized (mMethodMap) {
    Pair<String,String> lastIme=mSettings.getLastInputMethodAndSubtypeLocked();
    if (lastIme != null) {
      InputMethodInfo imi=mMethodMap.get(lastIme.first);
      if (imi != null) {
        setInputMethodWithSubtypeId(token,lastIme.first,getSubtypeIdFromHashCode(imi,Integer.valueOf(lastIme.second)));
        return true;
      }
    }
    return false;
  }
}
