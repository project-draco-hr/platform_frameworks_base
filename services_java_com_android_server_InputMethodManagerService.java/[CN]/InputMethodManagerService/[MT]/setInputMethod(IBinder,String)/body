{
synchronized (mMethodMap) {
    if (mCurToken == null) {
      if (mContext.checkCallingOrSelfPermission(android.Manifest.permission.WRITE_SECURE_SETTINGS) != PackageManager.PERMISSION_GRANTED) {
        throw new SecurityException("Using null token requires permission " + android.Manifest.permission.WRITE_SECURE_SETTINGS);
      }
    }
 else     if (mCurToken != token) {
      Log.w(TAG,"Ignoring setInputMethod of token: " + token);
    }
    setInputMethodLocked(id);
  }
}
