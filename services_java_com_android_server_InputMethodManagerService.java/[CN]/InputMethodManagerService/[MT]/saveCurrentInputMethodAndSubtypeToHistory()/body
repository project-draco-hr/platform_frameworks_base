{
  String subtypeId=NOT_A_SUBTYPE_ID_STR;
  if (mCurrentSubtype != null) {
    subtypeId=String.valueOf(mCurrentSubtype.hashCode());
  }
  if (canAddToLastInputMethod(mCurrentSubtype)) {
    mSettings.addSubtypeToHistory(mCurMethodId,subtypeId);
  }
}
