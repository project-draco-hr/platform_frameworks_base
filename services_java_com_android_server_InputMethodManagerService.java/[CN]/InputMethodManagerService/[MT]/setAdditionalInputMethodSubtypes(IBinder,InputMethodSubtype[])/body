{
  if (token == null || mCurToken != token) {
    return false;
  }
  if (subtypes == null || subtypes.length == 0)   return false;
synchronized (mMethodMap) {
    final InputMethodInfo imi=mMethodMap.get(mCurMethodId);
    if (imi == null)     return false;
    final int N=subtypes.length;
    mFileManager.addInputMethodSubtypes(mCurMethodId,subtypes);
    buildInputMethodListLocked(mMethodList,mMethodMap);
    return true;
  }
}
