{
  InputMethodInfo imi=mMethodMap.get(newDefaultIme);
  int lastSubtypeId=NOT_A_SUBTYPE_ID;
  if (imi != null && !TextUtils.isEmpty(newDefaultIme)) {
    String subtypeHashCode=mSettings.getLastSubtypeForInputMethodLocked(newDefaultIme);
    if (subtypeHashCode != null) {
      try {
        lastSubtypeId=getSubtypeIdFromHashCode(imi,Integer.valueOf(subtypeHashCode));
      }
 catch (      NumberFormatException e) {
        Slog.w(TAG,"HashCode for subtype looks broken: " + subtypeHashCode,e);
      }
    }
  }
  setSelectSubtypeLocked(imi,lastSubtypeId);
  mSettings.putSelectedInputMethod(newDefaultIme);
}
