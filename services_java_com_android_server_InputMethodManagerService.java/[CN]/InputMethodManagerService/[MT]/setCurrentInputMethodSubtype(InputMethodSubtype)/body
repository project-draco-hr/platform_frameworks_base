{
  if (!calledFromValidUser()) {
    return false;
  }
synchronized (mMethodMap) {
    if (subtype != null && mCurMethodId != null) {
      InputMethodInfo imi=mMethodMap.get(mCurMethodId);
      int subtypeId=getSubtypeIdFromHashCode(imi,subtype.hashCode());
      if (subtypeId != NOT_A_SUBTYPE_ID) {
        setInputMethodLocked(mCurMethodId,subtypeId);
        return true;
      }
    }
    return false;
  }
}
