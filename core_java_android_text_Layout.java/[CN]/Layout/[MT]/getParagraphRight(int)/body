{
  int dir=getParagraphDirection(line);
  int right=mWidth;
  boolean par=false;
  int off=getLineStart(line);
  if (off == 0 || mText.charAt(off - 1) == '\n')   par=true;
  if (dir == DIR_RIGHT_TO_LEFT) {
    if (mSpannedText) {
      Spanned sp=(Spanned)mText;
      LeadingMarginSpan[] spans=sp.getSpans(getLineStart(line),getLineEnd(line),LeadingMarginSpan.class);
      for (int i=0; i < spans.length; i++) {
        right-=spans[i].getLeadingMargin(par);
      }
    }
  }
  return right;
}
