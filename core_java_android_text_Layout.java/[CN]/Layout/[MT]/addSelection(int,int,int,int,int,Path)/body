{
  int linestart=getLineStart(line);
  int lineend=getLineEnd(line);
  Directions dirs=getLineDirections(line);
  if (lineend > linestart && mText.charAt(lineend - 1) == '\n')   lineend--;
  int here=linestart;
  for (int i=0; i < dirs.mDirections.length; i++) {
    int there=here + dirs.mDirections[i];
    if (there > lineend)     there=lineend;
    if (start <= there && end >= here) {
      int st=Math.max(start,here);
      int en=Math.min(end,there);
      if (st != en) {
        float h1=getHorizontal(st,false,false,line);
        float h2=getHorizontal(en,true,false,line);
        dest.addRect(h1,top,h2,bottom,Path.Direction.CW);
      }
    }
    here=there;
  }
}
