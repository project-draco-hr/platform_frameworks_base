{
  DropBoxManager db=(DropBoxManager)context.getSystemService(Context.DROPBOX_SERVICE);
  StringBuilder props=new StringBuilder();
  props.append("Build: ").append(Build.FINGERPRINT).append("\n");
  props.append("Hardware: ").append(Build.BOARD).append("\n");
  props.append("Bootloader: ").append(Build.BOOTLOADER).append("\n");
  props.append("Radio: ").append(Build.RADIO).append("\n");
  props.append("Kernel: ");
  props.append(FileUtils.readTextFile(new File("/proc/version"),1024,"...\n"));
  if (SystemProperties.getLong("ro.runtime.firstboot",0) == 0) {
    String now=Long.toString(System.currentTimeMillis());
    SystemProperties.set("ro.runtime.firstboot",now);
    if (db != null)     db.addText("SYSTEM_BOOT",props.toString());
  }
 else {
    if (db != null)     db.addText("SYSTEM_RESTART",props.toString());
    return;
  }
  ContentResolver cr=context.getContentResolver();
  logBootFile(cr,db,props,"/cache/recovery/log","SYSTEM_RECOVERY_LOG");
  logBootFile(cr,db,props,"/proc/last_kmsg","SYSTEM_LAST_KMSG");
  logBootFile(cr,db,props,"/data/dontpanic/apanic_console","APANIC_CONSOLE");
  logBootFile(cr,db,props,"/data/dontpanic/apanic_threads","APANIC_THREADS");
}
