{
  if (cr == null || db == null || !db.isTagEnabled(tag))   return;
  File file=new File(filename);
  long fileTime=file.lastModified();
  if (fileTime <= 0)   return;
  String setting="logfile:" + filename;
  long lastTime=Settings.Secure.getLong(cr,setting,0);
  if (lastTime == fileTime)   return;
  Settings.Secure.putLong(cr,setting,fileTime);
  StringBuilder report=new StringBuilder();
  report.append("Build: ").append(Build.FINGERPRINT).append("\n");
  report.append("Kernel: ");
  report.append(FileUtils.readTextFile(new File("/proc/version"),1024,"...\n"));
  report.append(FileUtils.readTextFile(new File(filename),LOG_SIZE,"[[TRUNCATED]]\n"));
  db.addText(tag,report.toString());
}
