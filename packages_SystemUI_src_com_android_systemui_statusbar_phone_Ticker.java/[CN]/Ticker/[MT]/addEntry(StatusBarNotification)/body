{
  int initialCount=mSegments.size();
  if (initialCount > 0) {
    final Segment seg=mSegments.get(0);
    if (n.pkg.equals(seg.notification.pkg) && n.notification.icon == seg.notification.notification.icon && n.notification.iconLevel == seg.notification.notification.iconLevel && CharSequences.equals(seg.notification.notification.tickerText,n.notification.tickerText)) {
      return;
    }
  }
  final Drawable icon=StatusBarIconView.getIcon(mContext,new StatusBarIcon(n.pkg,n.user,n.notification.icon,n.notification.iconLevel,0,n.notification.tickerText));
  final Segment newSegment=new Segment(n,icon,n.notification.tickerText);
  for (int i=0; i < mSegments.size(); i++) {
    Segment seg=mSegments.get(i);
    if (n.id == seg.notification.id && n.pkg.equals(seg.notification.pkg)) {
      mSegments.remove(i--);
    }
  }
  mSegments.add(newSegment);
  if (initialCount == 0 && mSegments.size() > 0) {
    Segment seg=mSegments.get(0);
    seg.first=false;
    mIconSwitcher.setAnimateFirstView(false);
    mIconSwitcher.reset();
    mIconSwitcher.setImageDrawable(seg.icon);
    mTextSwitcher.setAnimateFirstView(false);
    mTextSwitcher.reset();
    mTextSwitcher.setText(seg.getText());
    tickerStarting();
    scheduleAdvance();
  }
}
