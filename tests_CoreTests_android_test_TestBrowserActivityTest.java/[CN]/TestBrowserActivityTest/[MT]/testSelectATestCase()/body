{
  List<String> testCaseNames=Lists.newArrayList("AllTests");
  TestSuite testSuite=createTestSuite(testCaseNames);
  StubTestBrowserActivity.setTopTestSuite(testSuite);
  mTestBrowserController.setTestCase(OneTestTestCase.class);
  mTestBrowserActivity=createActivity();
  Instrumentation.ActivityMonitor activityMonitor=getInstrumentation().addMonitor(TestBrowserControllerImpl.TEST_RUNNER_ACTIVITY_CLASS_NAME,null,false);
  try {
    assertEquals(0,activityMonitor.getHits());
    ListView listView=getListView();
    int invokedTestCaseIndex=0;
    listView.performItemClick(listView,invokedTestCaseIndex,0);
    Activity activity=activityMonitor.waitForActivityWithTimeout(2000);
    assertNotNull(activity);
    try {
      assertEquals(1,activityMonitor.getHits());
      assertEquals(invokedTestCaseIndex,mTestBrowserController.getLastPosition());
    }
  finally {
      activity.finish();
    }
  }
  finally {
    getInstrumentation().removeMonitor(activityMonitor);
  }
}
