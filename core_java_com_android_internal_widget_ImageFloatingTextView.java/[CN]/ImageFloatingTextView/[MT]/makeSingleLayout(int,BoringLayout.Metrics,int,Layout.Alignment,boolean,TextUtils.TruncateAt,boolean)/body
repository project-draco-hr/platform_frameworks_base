{
  CharSequence text=getText() == null ? "" : getText();
  StaticLayout.Builder builder=StaticLayout.Builder.obtain(text,0,text.length(),getPaint(),wantWidth).setAlignment(alignment).setTextDirection(getTextDirectionHeuristic()).setLineSpacing(getLineSpacingExtra(),getLineSpacingMultiplier()).setIncludePad(getIncludeFontPadding()).setEllipsize(shouldEllipsize ? effectiveEllipsize : null).setEllipsizedWidth(ellipsisWidth).setBreakStrategy(Layout.BREAK_STRATEGY_HIGH_QUALITY).setHyphenationFrequency(Layout.HYPHENATION_FREQUENCY_FULL);
  int endMargin=(int)(getResources().getDisplayMetrics().density * 52);
  int[] margins=mHasImage ? new int[]{endMargin,endMargin,0} : null;
  if (getLayoutDirection() == LAYOUT_DIRECTION_RTL) {
    builder.setIndents(margins,null);
  }
 else {
    builder.setIndents(null,margins);
  }
  return builder.build();
}
