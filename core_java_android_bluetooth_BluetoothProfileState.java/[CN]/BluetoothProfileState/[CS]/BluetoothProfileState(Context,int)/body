{
  super("BluetoothProfileState:" + profile);
  mProfile=profile;
  addState(mStableState);
  addState(mPendingCommandState);
  setInitialState(mStableState);
  IntentFilter filter=new IntentFilter();
  filter.addAction(BluetoothA2dp.ACTION_CONNECTION_STATE_CHANGED);
  filter.addAction(BluetoothHeadset.ACTION_CONNECTION_STATE_CHANGED);
  filter.addAction(BluetoothInputDevice.ACTION_INPUT_DEVICE_STATE_CHANGED);
  filter.addAction(BluetoothDevice.ACTION_ACL_DISCONNECTED);
  context.registerReceiver(mBroadcastReceiver,filter);
}
