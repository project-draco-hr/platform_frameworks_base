{
synchronized (mDevices) {
    for (    UsbDevice usbDevice : mUsbManager.getDeviceList().values()) {
      String deviceName=usbDevice.getDeviceName();
      MtpDevice mtpDevice=mDevices.get(deviceName);
      if (mtpDevice == null) {
        mtpDevice=openDeviceLocked(usbDevice);
      }
      if (mtpDevice != null) {
        mDevices.put(deviceName,mtpDevice);
      }
    }
    return new ArrayList<MtpDevice>(mDevices.values());
  }
}
