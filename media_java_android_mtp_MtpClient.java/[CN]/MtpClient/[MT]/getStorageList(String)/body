{
  MtpDevice device=getDevice(deviceName);
  if (device == null) {
    return null;
  }
  int[] storageIds=device.getStorageIds();
  if (storageIds == null) {
    return null;
  }
  int length=storageIds.length;
  ArrayList<MtpStorageInfo> storageList=new ArrayList<MtpStorageInfo>(length);
  for (int i=0; i < length; i++) {
    MtpStorageInfo info=device.getStorageInfo(storageIds[i]);
    if (info == null) {
      Log.w(TAG,"getStorageInfo failed");
    }
 else {
      storageList.add(info);
    }
  }
  return storageList;
}
