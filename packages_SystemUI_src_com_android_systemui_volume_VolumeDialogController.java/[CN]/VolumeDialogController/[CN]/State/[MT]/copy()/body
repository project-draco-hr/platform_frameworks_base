{
  final State rt=new State();
  for (int i=0; i < states.size(); i++) {
    rt.states.put(states.keyAt(i),states.valueAt(i).copy());
  }
  rt.ringerModeExternal=ringerModeExternal;
  rt.ringerModeInternal=ringerModeInternal;
  rt.zenMode=zenMode;
  if (effectsSuppressor != null)   rt.effectsSuppressor=effectsSuppressor.clone();
  rt.effectsSuppressorName=effectsSuppressorName;
  if (exitCondition != null)   rt.exitCondition=exitCondition.copy();
  rt.activeStream=activeStream;
  return rt;
}
