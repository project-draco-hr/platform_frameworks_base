{
  final String bestDateTimePattern=DateFormat.getBestDateTimePattern(mCurrentLocale,(mIs24HourView) ? "Hm" : "hm");
  final int lengthPattern=bestDateTimePattern.length();
  boolean hourWithTwoDigit=false;
  char hourFormat='\0';
  for (int i=0; i < lengthPattern; i++) {
    final char c=bestDateTimePattern.charAt(i);
    if (c == 'H' || c == 'h' || c == 'K' || c == 'k') {
      hourFormat=c;
      if (i + 1 < lengthPattern && c == bestDateTimePattern.charAt(i + 1)) {
        hourWithTwoDigit=true;
      }
      break;
    }
  }
  final String format;
  if (hourWithTwoDigit) {
    format="%02d";
  }
 else {
    format="%d";
  }
  if (mIs24HourView) {
    if (hourFormat == 'k' && value == 0) {
      value=24;
    }
  }
 else {
    value=modulo12(value,hourFormat == 'K');
  }
  CharSequence text=String.format(format,value);
  mHourView.setText(text);
  if (announce) {
    tryAnnounceForAccessibility(text,true);
  }
}
