{
  if (mAmKeyCode == -1 || mPmKeyCode == -1) {
    KeyCharacterMap kcm=KeyCharacterMap.load(KeyCharacterMap.VIRTUAL_KEYBOARD);
    char amChar;
    char pmChar;
    for (int i=0; i < Math.max(mAmText.length(),mPmText.length()); i++) {
      amChar=mAmText.toLowerCase(mCurrentLocale).charAt(i);
      pmChar=mPmText.toLowerCase(mCurrentLocale).charAt(i);
      if (amChar != pmChar) {
        KeyEvent[] events=kcm.getEvents(new char[]{amChar,pmChar});
        if (events != null && events.length == 4) {
          mAmKeyCode=events[0].getKeyCode();
          mPmKeyCode=events[2].getKeyCode();
        }
 else {
          Log.e(TAG,"Unable to find keycodes for AM and PM.");
        }
        break;
      }
    }
  }
  if (amOrPm == AM) {
    return mAmKeyCode;
  }
 else   if (amOrPm == PM) {
    return mPmKeyCode;
  }
  return -1;
}
