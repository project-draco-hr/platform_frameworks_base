{
synchronized (this) {
    if (mService != null) {
      try {
        if (!mService.isWallpaperSupported(context.getOpPackageName())) {
          return null;
        }
      }
 catch (      RemoteException e) {
        throw e.rethrowFromSystemServer();
      }
    }
    if (mWallpaper != null) {
      return mWallpaper;
    }
    if (mDefaultWallpaper != null) {
      return mDefaultWallpaper;
    }
    mWallpaper=null;
    try {
      mWallpaper=getCurrentWallpaperLocked(userId);
    }
 catch (    OutOfMemoryError e) {
      Log.w(TAG,"No memory load current wallpaper",e);
    }
    if (returnDefault) {
      if (mWallpaper == null) {
        mDefaultWallpaper=getDefaultWallpaperLocked(context);
        return mDefaultWallpaper;
      }
 else {
        mDefaultWallpaper=null;
      }
    }
    return mWallpaper;
  }
}
