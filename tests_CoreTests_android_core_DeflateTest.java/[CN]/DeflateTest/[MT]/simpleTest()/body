{
  String inputString="blahblahblah??";
  byte[] input=inputString.getBytes("UTF-8");
  byte[] output=new byte[100];
  Deflater compresser=new Deflater();
  compresser.setInput(input);
  compresser.finish();
  int compressedDataLength=compresser.deflate(output);
  Inflater decompresser=new Inflater();
  decompresser.setInput(output,0,compressedDataLength);
  byte[] result=new byte[100];
  int resultLength=decompresser.inflate(result);
  String outputString=new String(result,0,resultLength,"UTF-8");
  assertEquals(inputString,outputString);
  assertEquals(compresser.getAdler(),decompresser.getAdler());
  decompresser.end();
}
