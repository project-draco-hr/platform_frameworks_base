{
  boolean TRACKING=true;
  StatFs st=new StatFs("/data");
  long blks1=getFreeStorageBlks(st);
  if (localLOGV || TRACKING)   Log.i(TAG,"Available free blocks=" + blks1);
  long availableMem=getFreeStorageSize(st);
  File cacheDir=mContext.getCacheDir();
  assertNotNull(cacheDir);
  createTestFiles1(cacheDir,"testtmpdir",5);
  long blks2=getFreeStorageBlks(st);
  if (localLOGV || TRACKING)   Log.i(TAG,"Available blocks after writing test files in application cache=" + blks2);
  FreeStorageReceiver receiver=new FreeStorageReceiver();
  mContext.registerReceiver(receiver,new IntentFilter(FreeStorageReceiver.ACTION_FREE));
  PendingIntent pi=PendingIntent.getBroadcast(mContext,0,new Intent(FreeStorageReceiver.ACTION_FREE),0);
  if (!invokePMFreeStorage(availableMem,receiver,pi)) {
    fail("Could not invoke PackageManager free storage API");
  }
  long blks3=getFreeStorageBlks(st);
  if (localLOGV || TRACKING)   Log.i(TAG,"Available blocks after freeing cache" + blks3);
  assertEquals(receiver.getResultCode(),1);
  mContext.unregisterReceiver(receiver);
  verifyTestFiles1(cacheDir,"testtmpdir",5);
}
