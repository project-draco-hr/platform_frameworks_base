{
  if (s == null) {
    setTransformedClip(null);
    if (debugOutput) {
      System.err.println("CommonGraphics2D.setClip(null)");
    }
    return;
  }
  if (debugOutput) {
    System.err.println("CommonGraphics2D.setClip(" + s.getBounds() + ")");
  }
  if (s instanceof MultiRectArea) {
    MultiRectArea nclip=new MultiRectArea((MultiRectArea)s);
    nclip.translate(Math.round((float)transform.getTranslateX()),Math.round((float)transform.getTranslateY()));
    setTransformedClip(nclip);
  }
 else {
    int type=transform.getType();
    if (s instanceof Rectangle && (type & (AffineTransform.TYPE_IDENTITY | AffineTransform.TYPE_TRANSLATION)) != 0) {
      MultiRectArea nclip=new MultiRectArea((Rectangle)s);
      if (type == AffineTransform.TYPE_TRANSLATION) {
        nclip.translate((int)transform.getTranslateX(),(int)transform.getTranslateY());
      }
      setTransformedClip(nclip);
    }
 else {
      s=transform.createTransformedShape(s);
      setTransformedClip(jsr.rasterize(s,0.5));
    }
  }
}
