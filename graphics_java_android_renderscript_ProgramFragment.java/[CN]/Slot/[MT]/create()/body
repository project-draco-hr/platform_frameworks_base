{
  mRS.validate();
  int[] tmp=new int[MAX_TEXTURE * 2 + 2];
  if (mSlots[0] != null) {
    tmp[0]=mSlots[0].env.mID;
    tmp[1]=mSlots[0].format.mID;
  }
  if (mSlots[1] != null) {
    tmp[2]=mSlots[1].env.mID;
    tmp[3]=mSlots[1].format.mID;
  }
  tmp[4]=mPointSpriteEnable ? 1 : 0;
  tmp[5]=mVaryingColorEnable ? 1 : 0;
  int id=mRS.nProgramFragmentCreate(tmp);
  ProgramFragment pf=new ProgramFragment(id,mRS);
  pf.mTextureCount=MAX_TEXTURE;
  return pf;
}
