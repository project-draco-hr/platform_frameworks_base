{
  int comp=(pixel & componentMasks[idx]) >> offsets[idx];
  if (isAlphaPremultiplied) {
    int alpha=(pixel & componentMasks[3]) >>> offsets[3];
    comp=alpha == 0 ? 0 : (int)(scales[idx] * comp * 255.0f / (scales[3] * alpha) + 0.5f);
  }
 else   if (bits[idx] != 8) {
    comp=colorLUTs[idx][comp] & 0xff;
  }
  return comp;
}
