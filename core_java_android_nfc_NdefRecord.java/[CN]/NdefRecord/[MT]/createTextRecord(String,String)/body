{
  if (text == null)   throw new NullPointerException("text is null");
  byte[] textBytes=text.getBytes(StandardCharsets.UTF_8);
  byte[] languageCodeBytes=null;
  if (languageCode != null && !languageCode.isEmpty()) {
    languageCodeBytes=languageCode.getBytes(StandardCharsets.US_ASCII);
  }
 else {
    languageCodeBytes=Locale.getDefault().getLanguage().getBytes(StandardCharsets.US_ASCII);
  }
  if (languageCodeBytes.length >= 64) {
    throw new IllegalArgumentException("language code is too long, must be <64 bytes.");
  }
  ByteBuffer buffer=ByteBuffer.allocate(1 + languageCodeBytes.length + textBytes.length);
  byte status=(byte)(languageCodeBytes.length & 0xFF);
  buffer.put(status);
  buffer.put(languageCodeBytes);
  buffer.put(textBytes);
  return new NdefRecord(TNF_WELL_KNOWN,RTD_TEXT,null,buffer.array());
}
