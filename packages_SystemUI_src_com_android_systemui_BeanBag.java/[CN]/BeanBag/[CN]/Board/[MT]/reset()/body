{
  removeAllViews();
  final ViewGroup.LayoutParams wrap=new ViewGroup.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,ViewGroup.LayoutParams.WRAP_CONTENT);
  for (int i=0; i < NUM_BEANS; i++) {
    Bean nv=new Bean(getContext(),null);
    addView(nv,wrap);
    nv.z=((float)i / NUM_BEANS);
    nv.z*=nv.z;
    nv.reset();
    nv.x=(randfrange(0,boardWidth));
    nv.y=(randfrange(0,boardHeight));
  }
  if (mAnim != null) {
    mAnim.cancel();
  }
  mAnim=new TimeAnimator();
  mAnim.setTimeListener(new TimeAnimator.TimeListener(){
    private long lastPrint=0;
    public void onTimeUpdate(    TimeAnimator animation,    long totalTime,    long deltaTime){
      if (DEBUG && totalTime - lastPrint > 5000) {
        lastPrint=totalTime;
        for (int i=0; i < getChildCount(); i++) {
          android.util.Log.d("BeanBag","bean " + i + ": "+ getChildAt(i));
        }
      }
      for (int i=0; i < getChildCount(); i++) {
        View v=getChildAt(i);
        if (!(v instanceof Bean))         continue;
        Bean nv=(Bean)v;
        nv.update(deltaTime / 1000f);
        for (int j=i + 1; j < getChildCount(); j++) {
          View v2=getChildAt(j);
          if (!(v2 instanceof Bean))           continue;
          Bean nv2=(Bean)v2;
          final float overlap=nv.overlap(nv2);
        }
        nv.setRotation(nv.a);
        nv.setX(nv.x - nv.getPivotX());
        nv.setY(nv.y - nv.getPivotY());
        if (nv.x < -MAX_RADIUS || nv.x > boardWidth + MAX_RADIUS || nv.y < -MAX_RADIUS || nv.y > boardHeight + MAX_RADIUS) {
          nv.reset();
        }
      }
      if (DEBUG)       invalidate();
    }
  }
);
}
