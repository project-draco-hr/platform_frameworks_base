{
  if (WindowManagerService.DEBUG_DRAG)   Slog.d(WindowManagerService.TAG,"unregistering drag input channel");
  if (mClientChannel == null) {
    Slog.e(WindowManagerService.TAG,"Unregister of nonexistent drag input channel");
  }
 else {
    mService.mInputManager.unregisterInputChannel(mServerChannel);
    mInputEventReceiver.dispose();
    mInputEventReceiver=null;
    mClientChannel.dispose();
    mServerChannel.dispose();
    mClientChannel=null;
    mServerChannel=null;
    mDragWindowHandle=null;
    mDragApplicationHandle=null;
    if (WindowManagerService.DEBUG_ORIENTATION) {
      Slog.d(WindowManagerService.TAG,"Resuming rotation after drag");
    }
    mService.resumeRotationLocked();
  }
}
