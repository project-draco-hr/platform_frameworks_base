{
  InputStream is=getInputStream();
  ImageDecoder decoder;
  if (is == null) {
    decoder=null;
  }
 else {
    decoder=ImageDecoder.createDecoder(this,is);
  }
  if (decoder != null) {
synchronized (this) {
      decoders.add(decoder);
      this.decoder=decoder;
      loading=false;
      consumers=new ArrayList<ImageConsumer>(5);
    }
    return decoder;
  }
  List<ImageConsumer> cs;
synchronized (this) {
    cs=consumers;
    consumers=new ArrayList<ImageConsumer>(5);
    loading=false;
  }
  abortAllConsumers(cs);
  return null;
}
