{
  int result=gravity;
  if ((result & HORIZONTAL_GRAVITY_MASK) == 0) {
    result|=Gravity.LEFT;
  }
  if ((result & RELATIVE_HORIZONTAL_DIRECTION) > 0) {
    if ((result & Gravity.BEFORE) == Gravity.BEFORE) {
      result&=~BEFORE;
      if (isRtl) {
        result|=RIGHT;
      }
 else {
        result|=LEFT;
      }
    }
 else     if ((result & Gravity.AFTER) == Gravity.AFTER) {
      result&=~AFTER;
      if (isRtl) {
        result|=LEFT;
      }
 else {
        result|=RIGHT;
      }
    }
    result&=~RELATIVE_HORIZONTAL_DIRECTION;
  }
  return result;
}
