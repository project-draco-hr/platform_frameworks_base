{
  CallbackRegistry.NotifierCallback<Integer,CallbackRegistryTest,Integer> notifier=new CallbackRegistry.NotifierCallback<Integer,CallbackRegistryTest,Integer>(){
    @Override public void onNotifyCallback(    Integer callback,    CallbackRegistryTest sender,    int arg1,    Integer arg){
      addNotifyCount(callback);
      registry.remove(callback);
      registry.notifyCallbacks(CallbackRegistryTest.this,arg1,null);
    }
  }
;
  registry=new CallbackRegistry<Integer,CallbackRegistryTest,Integer>(notifier);
  registry.add(callback1);
  registry.add(callback2);
  registry.add(callback3);
  registry.notifyCallbacks(this,0,null);
  assertEquals(1,notify1);
  assertEquals(2,notify2);
  assertEquals(3,notify3);
  ArrayList<Integer> callbacks=registry.copyListeners();
  assertEquals(0,callbacks.size());
}
