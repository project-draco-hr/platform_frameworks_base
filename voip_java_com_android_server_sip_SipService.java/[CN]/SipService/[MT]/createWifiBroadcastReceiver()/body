{
  return new BroadcastReceiver(){
    @Override public void onReceive(    Context context,    Intent intent){
      String action=intent.getAction();
      if (WifiManager.WIFI_STATE_CHANGED_ACTION.equals(action)) {
        int state=intent.getIntExtra(WifiManager.EXTRA_WIFI_STATE,WifiManager.WIFI_STATE_UNKNOWN);
synchronized (SipService.this) {
switch (state) {
case WifiManager.WIFI_STATE_ENABLED:
            mWifiEnabled=true;
          if (anyOpenedToReceiveCalls())           grabWifiLock();
        break;
case WifiManager.WIFI_STATE_DISABLED:
      mWifiEnabled=false;
    releaseWifiLock();
  break;
}
}
}
}
}
;
}
