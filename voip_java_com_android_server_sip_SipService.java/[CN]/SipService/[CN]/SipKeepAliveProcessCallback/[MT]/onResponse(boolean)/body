{
synchronized (SipService.this) {
    if (!portChanged) {
      if (++mPassCount != PASS_THRESHOLD)       return;
      if (mKeepAliveInterval > 0) {
        mLastGoodKeepAliveInterval=mKeepAliveInterval;
      }
      mKeepAliveInterval=mMinInterval=mInterval;
      if (SKAI_DBG) {
        log("onResponse: portChanged=" + portChanged + " mKeepAliveInterval="+ mKeepAliveInterval);
      }
      onKeepAliveIntervalChanged();
    }
 else {
      mMaxInterval=mInterval;
    }
    if (checkTermination()) {
      stop();
      mKeepAliveInterval=mMinInterval;
      if (SKAI_DBG) {
        log("onResponse: checkTermination mKeepAliveInterval=" + mKeepAliveInterval);
      }
    }
 else {
      mInterval=(mMaxInterval + mMinInterval) / 2;
      if (SKAI_DBG) {
        log("onResponse: mKeepAliveInterval=" + mKeepAliveInterval + ", new mInterval="+ mInterval);
      }
      restart();
    }
  }
}
