{
  if (!mRunning)   return;
  mRunning=false;
  mSession.setListener(null);
  if (mConnected && mRegistered)   mSession.unregister();
  mTimer.cancel(this);
  if (mKeepAliveProcess != null) {
    mKeepAliveProcess.stop();
    mKeepAliveProcess=null;
  }
  mRegistered=false;
  setListener(mProxy.getListener());
}
