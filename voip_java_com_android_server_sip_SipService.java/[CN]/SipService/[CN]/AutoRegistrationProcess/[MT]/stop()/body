{
  if (!mRunning)   return;
  mRunning=false;
  mMyWakeLock.release(mSession);
  if (mSession != null) {
    mSession.setListener(null);
    if (mConnected && mRegistered)     mSession.unregister();
  }
  mTimer.cancel(this);
  if (mKeepAliveProcess != null) {
    mKeepAliveProcess.stop();
    mKeepAliveProcess=null;
  }
  mRegistered=false;
  setListener(mProxy.getListener());
}
