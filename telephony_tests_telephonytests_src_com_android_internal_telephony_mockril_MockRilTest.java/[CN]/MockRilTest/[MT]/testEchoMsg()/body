{
  log("testEchoMsg E");
  MsgHeader mh=new MsgHeader();
  mh.setCmd(0);
  mh.setToken(1);
  mh.setStatus(2);
  ByteBuffer data=ByteBuffer.allocate(3);
  data.put((byte)3);
  data.put((byte)4);
  data.put((byte)5);
  Msg.send(mMockRilChannel,mh,data);
  Msg respMsg=Msg.recv(mMockRilChannel);
  assertTrue(String.format("expected mhd.header.cmd == 0 was %d",respMsg.getCmd()),respMsg.getCmd() == 0);
  assertTrue(String.format("expected mhd.header.token == 1 was %d",respMsg.getToken()),respMsg.getToken() == 1);
  assertTrue(String.format("expected mhd.header.status == 2 was %d",respMsg.getStatus()),respMsg.getStatus() == 2);
  assertTrue(String.format("expected mhd.data[0] == 3 was %d",respMsg.getData(0)),respMsg.getData(0) == 3);
  assertTrue(String.format("expected mhd.data[1] == 4 was %d",respMsg.getData(1)),respMsg.getData(1) == 4);
  assertTrue(String.format("expected mhd.data[2] == 5 was %d",respMsg.getData(2)),respMsg.getData(2) == 5);
  log("testEchoMsg X");
}
