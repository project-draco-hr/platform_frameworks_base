{
  log("testSetCallTransitionFlag");
  RilCtrlCmds.CtrlSetCallTransitionFlag cmd=new RilCtrlCmds.CtrlSetCallTransitionFlag();
  cmd.setFlag(true);
  Msg.send(mMockRilChannel,RilCtrlCmds.CTRL_CMD_SET_CALL_TRANSITION_FLAG,0,0,cmd);
  Msg resp=Msg.recv(mMockRilChannel);
  log("Get response status: " + resp.getStatus());
  assertTrue("Set call transition flag failed",resp.getStatus() == RilCtrlCmds.CTRL_STATUS_OK);
  RilCtrlCmds.CtrlReqAddDialingCall cmdDialCall=new RilCtrlCmds.CtrlReqAddDialingCall();
  String phoneNumber="5102345678";
  cmdDialCall.setPhoneNumber(phoneNumber);
  Msg.send(mMockRilChannel,RilCtrlCmds.CTRL_CMD_ADD_DIALING_CALL,0,0,cmdDialCall);
  resp=Msg.recv(mMockRilChannel);
  log("Get response status for adding a dialing call: " + resp.getStatus());
  assertTrue("add dialing call failed",resp.getStatus() == RilCtrlCmds.CTRL_STATUS_OK);
  try {
    Thread.sleep(5000);
  }
 catch (  InterruptedException e) {
  }
  Msg.send(mMockRilChannel,RilCtrlCmds.CTRL_CMD_SET_CALL_ALERT,0,0,null);
  resp=Msg.recv(mMockRilChannel);
  log("Get response status: " + resp.getStatus());
  assertTrue("Set call alert failed",resp.getStatus() == RilCtrlCmds.CTRL_STATUS_OK);
  try {
    Thread.sleep(2000);
  }
 catch (  InterruptedException e) {
  }
  Msg.send(mMockRilChannel,RilCtrlCmds.CTRL_CMD_SET_CALL_ACTIVE,0,0,null);
  resp=Msg.recv(mMockRilChannel);
  log("Get response status: " + resp.getStatus());
  assertTrue("Set call active failed",resp.getStatus() == RilCtrlCmds.CTRL_STATUS_OK);
  RilCtrlCmds.CtrlHangupConnRemote hangupCmd=new RilCtrlCmds.CtrlHangupConnRemote();
  hangupCmd.setConnectionId(1);
  hangupCmd.setCallFailCause(16);
  Msg.send(mMockRilChannel,RilCtrlCmds.CTRL_CMD_HANGUP_CONN_REMOTE,0,0,hangupCmd);
  resp=Msg.recv(mMockRilChannel);
  log("Get response for hangup connection: " + resp.getStatus());
  assertTrue("CTRL_CMD_HANGUP_CONN_REMOTE failed",resp.getStatus() == RilCtrlCmds.CTRL_STATUS_OK);
  cmd.setFlag(false);
  Msg.send(mMockRilChannel,RilCtrlCmds.CTRL_CMD_SET_CALL_TRANSITION_FLAG,0,0,cmd);
  resp=Msg.recv(mMockRilChannel);
  assertTrue("Set call transition flag failed",resp.getStatus() == RilCtrlCmds.CTRL_STATUS_OK);
}
