{
  final ConditionVariable startDone=new ConditionVariable();
  if (mLooper != null || mHandler != null) {
    Log.w(TAG,"Looper thread already started");
    return mHandler;
  }
  new Thread(){
    @Override public void run(){
      if (VERBOSE)       Log.v(TAG,"start loopRun");
      Looper.prepare();
      mLooper=Looper.myLooper();
      mHandler=new Handler();
      startDone.open();
      Looper.loop();
      if (VERBOSE)       Log.v(TAG,"createLooperThread: finished");
    }
  }
.start();
  if (VERBOSE)   Log.v(TAG,"start waiting for looper");
  if (!startDone.block(WAIT_FOR_COMMAND_TO_COMPLETE)) {
    throw new TimeoutException("createLooperThread: start timeout");
  }
  return mHandler;
}
