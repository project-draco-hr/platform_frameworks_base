{
  int currentVideoLayerId=-1;
  boolean backFromFullScreenMode=false;
  if (mHTML5VideoView != null) {
    currentVideoLayerId=mHTML5VideoView.getVideoLayerId();
    backFromFullScreenMode=mHTML5VideoView.fullScreenExited();
    if (mHTML5VideoView.isFullScreenMode() && !backFromFullScreenMode && currentVideoLayerId != videoLayerId && mCurrentProxy != proxy) {
      mCurrentProxy=proxy;
      mHTML5VideoView.setStartWhenPrepared(true);
      mHTML5VideoView.setVideoURI(url,proxy);
      mHTML5VideoView.reprepareData(proxy);
      return;
    }
  }
  boolean skipPrepare=false;
  boolean createInlineView=false;
  if (backFromFullScreenMode && currentVideoLayerId == videoLayerId) {
    skipPrepare=true;
    createInlineView=true;
  }
 else   if (backFromFullScreenMode || currentVideoLayerId != videoLayerId || HTML5VideoInline.surfaceTextureDeleted()) {
    if (mHTML5VideoView != null) {
      if (!backFromFullScreenMode) {
        mHTML5VideoView.pauseAndDispatch(mCurrentProxy);
      }
      mHTML5VideoView.reset();
    }
    createInlineView=true;
  }
  if (createInlineView) {
    mCurrentProxy=proxy;
    mHTML5VideoView=new HTML5VideoInline(videoLayerId,time,skipPrepare);
    mHTML5VideoView.setVideoURI(url,mCurrentProxy);
    mHTML5VideoView.prepareDataAndDisplayMode(proxy);
    return;
  }
  if (mCurrentProxy == proxy) {
    if (!mHTML5VideoView.isPlaying()) {
      mHTML5VideoView.seekTo(time);
      mHTML5VideoView.start();
    }
  }
 else   if (mCurrentProxy != null) {
    proxy.dispatchOnEnded();
  }
}
