{
switch (msg.what) {
case AsyncChannel.CMD_CHANNEL_HALF_CONNECTED:
{
      if (msg.arg1 == AsyncChannel.STATUS_SUCCESSFUL) {
        Slog.d(TAG,"New client listening to asynchronous messages");
        mClients.add((AsyncChannel)msg.obj);
      }
 else {
        Slog.e(TAG,"Client connection failure, error=" + msg.arg1);
      }
      break;
    }
case AsyncChannel.CMD_CHANNEL_FULL_CONNECTION:
{
    AsyncChannel ac=new AsyncChannel();
    ac.connect(mContext,this,msg.replyTo);
    break;
  }
case WifiManager.CMD_ENABLE_TRAFFIC_STATS_POLL:
{
  mEnableTrafficStatsPoll=(msg.arg1 == 1);
  mTrafficStatsPollToken++;
  if (mEnableTrafficStatsPoll) {
    notifyOnDataActivity();
    sendMessageDelayed(Message.obtain(this,WifiManager.CMD_TRAFFIC_STATS_POLL,mTrafficStatsPollToken,0),POLL_TRAFFIC_STATS_INTERVAL_MSECS);
  }
  break;
}
case WifiManager.CMD_TRAFFIC_STATS_POLL:
{
if (msg.arg1 == mTrafficStatsPollToken) {
  notifyOnDataActivity();
  sendMessageDelayed(Message.obtain(this,WifiManager.CMD_TRAFFIC_STATS_POLL,mTrafficStatsPollToken,0),POLL_TRAFFIC_STATS_INTERVAL_MSECS);
}
break;
}
case WifiManager.CMD_CONNECT_NETWORK:
{
if (msg.obj != null) {
mWifiStateMachine.connectNetwork((WifiConfiguration)msg.obj);
}
 else {
mWifiStateMachine.connectNetwork(msg.arg1);
}
break;
}
case WifiManager.CMD_SAVE_NETWORK:
{
mWifiStateMachine.saveNetwork((WifiConfiguration)msg.obj);
break;
}
case WifiManager.CMD_FORGET_NETWORK:
{
mWifiStateMachine.forgetNetwork(msg.arg1);
break;
}
case WifiManager.CMD_START_WPS:
{
mWifiStateMachine.startWps(msg.replyTo,(WpsConfiguration)msg.obj);
break;
}
default :
{
Slog.d(TAG,"WifiServicehandler.handleMessage ignoring msg=" + msg);
break;
}
}
}
