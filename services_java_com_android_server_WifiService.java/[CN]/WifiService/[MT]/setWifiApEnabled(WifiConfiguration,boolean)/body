{
  enforceChangePermission();
  if (enabled) {
    if (wifiConfig == null && ((wifiConfig=getWifiApConfiguration()) == null)) {
      wifiConfig=new WifiConfiguration();
      wifiConfig.SSID=mContext.getString(R.string.wifi_tether_configure_ssid_default);
      wifiConfig.allowedKeyManagement.set(KeyMgmt.NONE);
    }
    long ident=Binder.clearCallingIdentity();
    setWifiApConfiguration(wifiConfig);
    Binder.restoreCallingIdentity(ident);
  }
  mWifiStateMachine.setWifiApEnabled(wifiConfig,enabled);
  return true;
}
