{
  enforceAccessPermission();
synchronized (mWifiApConfigLock) {
    WifiConfiguration config=new WifiConfiguration();
    config.SSID=mWifiApConfig.SSID;
    if (mWifiApConfig.allowedKeyManagement.get(KeyMgmt.WPA_PSK)) {
      config.allowedKeyManagement.set(KeyMgmt.WPA_PSK);
      config.preSharedKey=mWifiApConfig.preSharedKey;
    }
 else {
      config.allowedKeyManagement.set(KeyMgmt.NONE);
    }
    return config;
  }
}
