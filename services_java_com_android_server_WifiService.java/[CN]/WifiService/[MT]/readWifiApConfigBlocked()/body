{
  DataInputStream in=null;
  try {
    WifiConfiguration config=new WifiConfiguration();
    in=new DataInputStream(new BufferedInputStream(new FileInputStream(WIFIAP_CONFIG_FILE)));
    int version=in.readInt();
    if (version != 1) {
      Slog.e(TAG,"Bad version on hotspot configuration file, set defaults");
      setDefaultWifiApConfiguration();
      return;
    }
    config.SSID=in.readUTF();
    int authType=in.readInt();
    config.allowedKeyManagement.set(authType);
    if (authType != KeyMgmt.NONE) {
      config.preSharedKey=in.readUTF();
    }
synchronized (mWifiApConfigLock) {
      mWifiApConfig=config;
    }
  }
 catch (  IOException ignore) {
    setDefaultWifiApConfiguration();
  }
 finally {
    if (in != null) {
      try {
        in.close();
      }
 catch (      IOException e) {
      }
    }
  }
}
