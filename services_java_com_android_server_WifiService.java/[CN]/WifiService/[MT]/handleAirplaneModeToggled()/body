{
  if (mAirplaneModeOn.get()) {
    if (mWifiEnabled) {
      persistWifiState(WIFI_DISABLED_AIRPLANE_ON);
    }
  }
 else {
    if (testAndClearWifiSavedState() || mPersistWifiState.get() == WIFI_ENABLED_AIRPLANE_OVERRIDE) {
      persistWifiState(WIFI_ENABLED);
    }
  }
}
