{
  if (mContext.checkCallingPermission(android.Manifest.permission.DUMP) != PackageManager.PERMISSION_GRANTED) {
    pw.println("Permission Denial: can't dump WifiService from from pid=" + Binder.getCallingPid() + ", uid="+ Binder.getCallingUid());
    return;
  }
  pw.println("Wi-Fi is " + stateName(mWifiState));
  pw.println("stay-awake conditions: " + Settings.System.getInt(mContext.getContentResolver(),Settings.System.STAY_ON_WHILE_PLUGGED_IN,0));
  pw.println();
  pw.println("Latest scan results:");
  List<ScanResult> scanResults=mWifiStateTracker.getScanResultsList();
  if (scanResults != null && scanResults.size() != 0) {
    pw.println("  BSSID              Frequency   RSSI  Flags             SSID");
    for (    ScanResult r : scanResults) {
      pw.printf("  %17s  %9d  %5d  %-16s  %s%n",r.BSSID,r.frequency,r.level,r.capabilities,r.SSID == null ? "" : r.SSID);
    }
  }
}
