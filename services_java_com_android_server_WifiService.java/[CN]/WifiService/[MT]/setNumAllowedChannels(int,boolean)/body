{
  Slog.i(TAG,"WifiService trying to setNumAllowed to " + numChannels + " with persist set to "+ persist);
  enforceChangePermission();
  boolean found=false;
  for (  int validChan : sValidRegulatoryChannelCounts) {
    if (validChan == numChannels) {
      found=true;
      break;
    }
  }
  if (!found) {
    return false;
  }
  if (mWifiHandler == null)   return false;
  Message.obtain(mWifiHandler,MESSAGE_SET_CHANNELS,numChannels,(persist ? 1 : 0)).sendToTarget();
  return true;
}
