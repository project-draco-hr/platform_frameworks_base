{
  if (DEBUG)   Log.d(TAG,"handleUpdateState arg=" + arg);
  CallbackInfo cb=(CallbackInfo)arg;
  if (cb == null) {
    cb=mSignalCallback.mInfo;
  }
  boolean wifiConnected=cb.enabled && (cb.wifiSignalIconId > 0) && (cb.enabledDesc != null);
  boolean wifiNotConnected=(cb.wifiSignalIconId > 0) && (cb.enabledDesc == null);
  boolean enabledChanging=state.enabled != cb.enabled;
  if (enabledChanging) {
    mDetailAdapter.setItemsVisible(cb.enabled);
    fireToggleStateChanged(cb.enabled);
  }
  state.enabled=cb.enabled;
  state.connected=wifiConnected;
  state.activityIn=cb.enabled && cb.activityIn;
  state.activityOut=cb.enabled && cb.activityOut;
  state.filter=true;
  final String signalContentDescription;
  final Resources r=mContext.getResources();
  if (!state.enabled) {
    state.icon=ResourceIcon.get(R.drawable.ic_qs_wifi_disabled);
    state.label=r.getString(R.string.quick_settings_wifi_label);
    signalContentDescription=r.getString(R.string.accessibility_wifi_off);
  }
 else   if (wifiConnected) {
    state.icon=ResourceIcon.get(cb.wifiSignalIconId);
    state.label=removeDoubleQuotes(cb.enabledDesc);
    signalContentDescription=cb.wifiSignalContentDescription;
  }
 else   if (wifiNotConnected) {
    state.icon=ResourceIcon.get(R.drawable.ic_qs_wifi_disconnected);
    state.label=r.getString(R.string.quick_settings_wifi_label);
    signalContentDescription=r.getString(R.string.accessibility_no_wifi);
  }
 else {
    state.icon=ResourceIcon.get(R.drawable.ic_qs_wifi_no_network);
    state.label=r.getString(R.string.quick_settings_wifi_label);
    signalContentDescription=r.getString(R.string.accessibility_wifi_off);
  }
  state.contentDescription=mContext.getString(R.string.accessibility_quick_settings_wifi,signalContentDescription);
  CharSequence wifiName=state.label;
  if (state.connected) {
    wifiName=r.getString(R.string.accessibility_wifi_name,state.label);
  }
  state.dualLabelContentDescription=wifiName;
}
