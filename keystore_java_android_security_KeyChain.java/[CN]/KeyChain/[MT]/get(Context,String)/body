{
  if (alias == null) {
    throw new NullPointerException("alias == null");
  }
  KeyChainConnection keyChainConnection=bind(context);
  try {
    AccountManager accountManager=AccountManager.get(context);
    Account account=accountManager.getAccountsByType(ACCOUNT_TYPE)[0];
    AccountManagerFuture<Bundle> future=accountManager.getAuthToken(account,alias,false,null,null);
    Bundle bundle;
    try {
      bundle=future.getResult();
    }
 catch (    OperationCanceledException e) {
      throw new AssertionError(e);
    }
catch (    IOException e) {
      throw new AssertionError(e);
    }
catch (    AuthenticatorException e) {
      throw new AssertionError(e);
    }
    Intent intent=bundle.getParcelable(AccountManager.KEY_INTENT);
    if (intent != null) {
      Bundle result=new Bundle();
      intent.setFlags(intent.getFlags() & ~Intent.FLAG_ACTIVITY_NEW_TASK);
      return new KeyChainResult(intent);
    }
    String authToken=bundle.getString(AccountManager.KEY_AUTHTOKEN);
    if (authToken == null) {
      throw new AssertionError("Invalid authtoken");
    }
    IKeyChainService keyChainService=keyChainConnection.getService();
    byte[] privateKeyBytes=keyChainService.getPrivateKey(alias,authToken);
    byte[] certificateBytes=keyChainService.getCertificate(alias,authToken);
    return new KeyChainResult(toPrivateKey(privateKeyBytes),toCertificate(certificateBytes));
  }
  finally {
    keyChainConnection.close();
  }
}
