{
  if (cert == null) {
    throw new NullPointerException("cert == null");
  }
  ensureNotOnMainThread();
  IndexedPKIXParameters index=SSLParametersImpl.getDefaultIndexedPKIXParameters();
  try {
    TrustAnchor anchor=index.findTrustAnchor(cert);
    if (anchor != null && anchor.getTrustedCert() != null) {
      X509Certificate ca=anchor.getTrustedCert();
      return fromCertificate(ca);
    }
  }
 catch (  CertPathValidatorException ignored) {
  }
  String alias;
  try {
    alias=mService.findIssuer(fromCertificate(cert));
  }
 catch (  RemoteException e) {
    throw new AssertionError(e);
  }
  if (alias == null) {
    Log.w(TAG,"Lookup failed for issuer");
    return null;
  }
  Bundle bundle=get(alias,Credentials.CA_CERTIFICATE);
  Intent intent=bundle.getParcelable(KEY_INTENT);
  if (intent != null) {
    return bundle;
  }
  X509Certificate ca=toCertificate(bundle);
  index.index(new TrustAnchor(ca,null));
  return bundle;
}
