{
  float alpha=DEFAULT_LOWPASS_ALPHA;
  if (mAccelerationDistrust > 1) {
    alpha=ACCELERATING_LOWPASS_ALPHA;
  }
 else   if (absoluteTilt > PARTIAL_TILT || mAccelerationDistrust == 1) {
    alpha=TILTED_LOWPASS_ALPHA;
  }
  float deltaOrientation=orientationAngle - mOrientationAngle;
  if (deltaOrientation > 180) {
    orientationAngle-=360;
  }
 else   if (deltaOrientation < -180) {
    orientationAngle+=360;
  }
  mOrientationAngle=lowpassFilter(orientationAngle,mOrientationAngle,alpha);
  if (mOrientationAngle > 360) {
    mOrientationAngle-=360;
  }
 else   if (mOrientationAngle < 0) {
    mOrientationAngle+=360;
  }
}
