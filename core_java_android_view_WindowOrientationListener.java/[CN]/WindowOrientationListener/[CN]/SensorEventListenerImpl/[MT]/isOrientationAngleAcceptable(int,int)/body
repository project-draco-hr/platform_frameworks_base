{
  final int currentOrientation=mRotation;
  if (currentOrientation != ROTATION_UNKNOWN) {
    if (proposedOrientation == currentOrientation || proposedOrientation == (currentOrientation + 1) % 4) {
      int lowerBound=proposedOrientation * 90 - 45 + ADJACENT_ORIENTATION_ANGLE_GAP / 2;
      if (proposedOrientation == 0) {
        if (orientationAngle >= 315 && orientationAngle < lowerBound + 360) {
          return false;
        }
      }
 else {
        if (orientationAngle < lowerBound) {
          return false;
        }
      }
    }
    if (proposedOrientation == currentOrientation || proposedOrientation == (currentOrientation + 3) % 4) {
      int upperBound=proposedOrientation * 90 + 45 - ADJACENT_ORIENTATION_ANGLE_GAP / 2;
      if (proposedOrientation == 0) {
        if (orientationAngle <= 45 && orientationAngle > upperBound) {
          return false;
        }
      }
 else {
        if (orientationAngle > upperBound) {
          return false;
        }
      }
    }
  }
  return true;
}
