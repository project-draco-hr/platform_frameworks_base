{
  final int currentRotation=mOrientationListener.mCurrentRotation;
  if (currentRotation >= 0) {
    if (proposedRotation == currentRotation || proposedRotation == (currentRotation + 1) % 4) {
      int lowerBound=proposedRotation * 90 - 45 + ADJACENT_ORIENTATION_ANGLE_GAP / 2;
      if (proposedRotation == 0) {
        if (orientationAngle >= 315 && orientationAngle < lowerBound + 360) {
          return false;
        }
      }
 else {
        if (orientationAngle < lowerBound) {
          return false;
        }
      }
    }
    if (proposedRotation == currentRotation || proposedRotation == (currentRotation + 3) % 4) {
      int upperBound=proposedRotation * 90 + 45 - ADJACENT_ORIENTATION_ANGLE_GAP / 2;
      if (proposedRotation == 0) {
        if (orientationAngle <= 45 && orientationAngle > upperBound) {
          return false;
        }
      }
 else {
        if (orientationAngle > upperBound) {
          return false;
        }
      }
    }
  }
  return true;
}
