{
  if (mGuard) {
    throw new IllegalStateException("Enabling permissions without disabling.");
  }
  mGuard=true;
  PackageManager pm=mContext.getPackageManager();
  String pName=component.getPackageName();
  if (pm == null) {
    Slog.e(TAG,"Couldn't set implied permissions for " + pName + ", PackageManager isn't running");
    return;
  }
  ApplicationInfo info=null;
  try {
    info=pm.getApplicationInfo(pName,PackageManager.GET_META_DATA);
  }
 catch (  NameNotFoundException e) {
  }
  if (info == null || !(info.isSystemApp() || info.isUpdatedSystemApp())) {
    return;
  }
  mWasDefaultGranted=true;
  AppOpsManager mgr=mContext.getSystemService(AppOpsManager.class);
  if (mgr == null) {
    Slog.e(TAG,"No AppOpsManager, failed to set permissions for: " + pName);
    return;
  }
  grantCoarseLocationAccess(mgr,pName,info.uid);
  grantOverlayAccess(mgr,pName,info.uid);
}
