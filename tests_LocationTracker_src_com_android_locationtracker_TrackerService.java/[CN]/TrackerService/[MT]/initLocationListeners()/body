{
  mTrackerData=new TrackerDataHelper(this);
  mListener=new LocationTrackingListener();
  LocationManager lm=getLocationManager();
  long minUpdateTime=getLocationUpdateTime();
  int powerConsumption=getPowerConsumption();
  LocationRequest lr=LocationRequest.create();
  lr.setInterval(minUpdateTime);
  lr.setQuality(powerConsumption);
  if (doDebugLogging()) {
    mTrackerData.writeEntry("init",String.format("start listening to location update : %d ms; %d power consumption",minUpdateTime,powerConsumption));
  }
  Log.d(LOG_TAG,"Adding location listener");
  lm.requestLocationUpdates(lr,mListener,null);
  mTelephonyManager=(TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
  if (doDebugLogging()) {
    mTelephonyManager.listen(mPhoneStateListener,PhoneStateListener.LISTEN_CELL_LOCATION);
    mNetwork=new NetworkStateBroadcastReceiver();
    IntentFilter mIntentFilter;
    mIntentFilter=new IntentFilter();
    mIntentFilter.addAction(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION);
    mIntentFilter.addAction(WifiManager.WIFI_STATE_CHANGED_ACTION);
    mIntentFilter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);
    Log.d(LOG_TAG,"registering receiver");
    registerReceiver(mNetwork,mIntentFilter);
  }
  if (trackSignalStrength()) {
    mTelephonyManager.listen(mPhoneStateListener,PhoneStateListener.LISTEN_SIGNAL_STRENGTHS);
  }
  mPrefListener=new PreferenceListener();
  getPreferences().registerOnSharedPreferenceChangeListener(mPrefListener);
}
