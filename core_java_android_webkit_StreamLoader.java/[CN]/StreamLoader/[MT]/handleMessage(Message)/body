{
  if (mLoadListener.isSynchronous()) {
    throw new AssertionError();
  }
  if (mLoadListener.cancelled()) {
    closeStreamAndSendEndData();
    return true;
  }
switch (msg.what) {
case MSG_STATUS:
    if (setupStreamAndSendStatus()) {
      mData=new byte[8192];
      mHandler.sendEmptyMessage(MSG_HEADERS);
    }
  break;
case MSG_HEADERS:
sendHeaders();
mHandler.sendEmptyMessage(MSG_DATA);
break;
case MSG_DATA:
if (sendData()) {
mHandler.sendEmptyMessage(MSG_END);
}
 else {
mHandler.sendEmptyMessage(MSG_DATA);
}
break;
case MSG_END:
closeStreamAndSendEndData();
break;
default :
return false;
}
return true;
}
