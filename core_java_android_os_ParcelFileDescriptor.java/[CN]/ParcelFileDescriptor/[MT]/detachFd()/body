{
  if (mWrapped != null) {
    return mWrapped.detachFd();
  }
 else {
    if (mClosed) {
      throw new IllegalStateException("Already closed");
    }
    final int fd=getFd();
    Parcel.clearFileDescriptor(mFd);
    writeCommStatusAndClose(Status.DETACHED,null);
    mClosed=true;
    mGuard.close();
    releaseResources();
    return fd;
  }
}
