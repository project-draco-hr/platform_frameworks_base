{
  String path=file.getPath();
  SecurityManager security=System.getSecurityManager();
  if (security != null) {
    security.checkRead(path);
    if ((mode & MODE_WRITE_ONLY) != 0) {
      security.checkWrite(path);
    }
  }
  if ((mode & MODE_READ_WRITE) == 0) {
    throw new IllegalArgumentException("Must specify MODE_READ_ONLY, MODE_WRITE_ONLY, or MODE_READ_WRITE");
  }
  FileDescriptor fd=Parcel.openFileDescriptor(path,mode);
  return new ParcelFileDescriptor(fd);
}
