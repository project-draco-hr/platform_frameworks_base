{
  Console.log(Constants.DebugFlags.App.SystemUIHandshake,"[RecentsService|handleMessage]",msg);
  Context context=mContext.get();
  if (context == null)   return;
  if (msg.what == AlternateRecentsComponent.MSG_UPDATE_FOR_CONFIGURATION) {
    RecentsTaskLoader.initialize(context);
    RecentsConfiguration.reinitialize(context);
    try {
      Bundle data=msg.getData();
      Rect windowRect=data.getParcelable(AlternateRecentsComponent.KEY_WINDOW_RECT);
      Rect systemInsets=data.getParcelable(AlternateRecentsComponent.KEY_SYSTEM_INSETS);
      TaskStack stack=new TaskStack(context);
      TaskStackView tsv=new TaskStackView(context,stack);
      Bundle replyData=new Bundle();
      TaskViewTransform transform;
      Rect taskStackBounds=new Rect();
      RecentsConfiguration config=RecentsConfiguration.getInstance();
      config.getTaskStackBounds(windowRect.width(),windowRect.height(),taskStackBounds);
      stack.addTask(new Task());
      tsv.computeRects(taskStackBounds.width(),taskStackBounds.height() - systemInsets.top - systemInsets.bottom,0,0);
      tsv.boundScroll();
      transform=tsv.getStackTransform(0,tsv.getStackScroll());
      transform.rect.offset(taskStackBounds.left,taskStackBounds.top);
      replyData.putParcelable(AlternateRecentsComponent.KEY_SINGLE_TASK_STACK_RECT,new Rect(transform.rect));
      stack.addTask(new Task());
      tsv.computeRects(taskStackBounds.width(),taskStackBounds.height() - systemInsets.top - systemInsets.bottom,0,0);
      tsv.setStackScrollRaw(Integer.MAX_VALUE);
      tsv.boundScroll();
      transform=tsv.getStackTransform(1,tsv.getStackScroll());
      transform.rect.offset(taskStackBounds.left,taskStackBounds.top);
      replyData.putParcelable(AlternateRecentsComponent.KEY_MULTIPLE_TASK_STACK_RECT,new Rect(transform.rect));
      data.putParcelable(AlternateRecentsComponent.KEY_CONFIGURATION_DATA,replyData);
      Message reply=Message.obtain(null,AlternateRecentsComponent.MSG_UPDATE_FOR_CONFIGURATION,0,0);
      reply.setData(data);
      msg.replyTo.send(reply);
    }
 catch (    RemoteException re) {
      re.printStackTrace();
    }
  }
 else   if (msg.what == AlternateRecentsComponent.MSG_CLOSE_RECENTS) {
  }
 else   if (msg.what == AlternateRecentsComponent.MSG_TOGGLE_RECENTS) {
    Intent intent=new Intent(RecentsService.ACTION_TOGGLE_RECENTS_ACTIVITY);
    intent.setPackage(context.getPackageName());
    context.sendBroadcast(intent);
    Console.logTraceTime(Constants.DebugFlags.App.TimeRecentsStartup,Constants.DebugFlags.App.TimeRecentsStartupKey,"receivedToggleRecents");
    Console.logTraceTime(Constants.DebugFlags.App.TimeRecentsLaunchTask,Constants.DebugFlags.App.TimeRecentsLaunchKey,"receivedToggleRecents");
  }
}
