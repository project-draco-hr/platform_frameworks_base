{
  ApplicationInfo ai=null;
  try {
    ai=AppGlobals.getPackageManager().getApplicationInfo(packageName,0);
  }
 catch (  RemoteException e) {
  }
  if (ai == null) {
    return;
  }
  CompatibilityInfo ci=compatibilityInfoForPackageLocked(ai);
  final boolean mayCompat=!ci.alwaysSupportsScreen() && !ci.neverSupportsScreen();
  if (!updated) {
    if (mayCompat) {
      setPackageScreenCompatModeLocked(ai,ActivityManager.COMPAT_MODE_ENABLED);
    }
  }
 else {
    if (!mayCompat && mPackages.containsKey(packageName)) {
      mPackages.remove(packageName);
      mHandler.removeMessages(MSG_WRITE);
      Message msg=mHandler.obtainMessage(MSG_WRITE);
      mHandler.sendMessageDelayed(msg,10000);
    }
  }
}
