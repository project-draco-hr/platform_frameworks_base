{
  if (mInfo == null) {
    SurfaceControl.PhysicalDisplayInfo phys=mSupportedModes.get(mActiveModeId).mPhys;
    mInfo=new DisplayDeviceInfo();
    mInfo.width=phys.width;
    mInfo.height=phys.height;
    mInfo.modeId=mActiveModeId;
    mInfo.defaultModeId=mDefaultModeId;
    mInfo.supportedModes=new Display.Mode[mSupportedModes.size()];
    for (int i=0; i < mSupportedModes.size(); i++) {
      DisplayModeRecord record=mSupportedModes.valueAt(i);
      mInfo.supportedModes[i]=record.mMode;
    }
    mInfo.appVsyncOffsetNanos=phys.appVsyncOffsetNanos;
    mInfo.presentationDeadlineNanos=phys.presentationDeadlineNanos;
    mInfo.state=mState;
    mInfo.uniqueId=getUniqueId();
    if (phys.secure) {
      mInfo.flags=DisplayDeviceInfo.FLAG_SECURE | DisplayDeviceInfo.FLAG_SUPPORTS_PROTECTED_BUFFERS;
    }
    if (mBuiltInDisplayId == SurfaceControl.BUILT_IN_DISPLAY_ID_MAIN) {
      final Resources res=getContext().getResources();
      mInfo.name=res.getString(com.android.internal.R.string.display_manager_built_in_display_name);
      mInfo.flags|=DisplayDeviceInfo.FLAG_DEFAULT_DISPLAY | DisplayDeviceInfo.FLAG_ROTATES_WITH_CONTENT;
      if (res.getBoolean(com.android.internal.R.bool.config_mainBuiltInDisplayIsRound)) {
        mInfo.flags|=DisplayDeviceInfo.FLAG_ROUND;
      }
      mInfo.type=Display.TYPE_BUILT_IN;
      mInfo.densityDpi=(int)(phys.density * 160 + 0.5f);
      mInfo.xDpi=phys.xDpi;
      mInfo.yDpi=phys.yDpi;
      mInfo.touch=DisplayDeviceInfo.TOUCH_INTERNAL;
    }
 else {
      mInfo.type=Display.TYPE_HDMI;
      mInfo.flags|=DisplayDeviceInfo.FLAG_PRESENTATION;
      mInfo.name=getContext().getResources().getString(com.android.internal.R.string.display_manager_hdmi_display_name);
      mInfo.touch=DisplayDeviceInfo.TOUCH_EXTERNAL;
      mInfo.setAssumedDensityForExternalDisplay(phys.width,phys.height);
      if ("portrait".equals(SystemProperties.get("persist.demo.hdmirotation"))) {
        mInfo.rotation=Surface.ROTATION_270;
      }
      if (SystemProperties.getBoolean("persist.demo.hdmirotates",false)) {
        mInfo.flags|=DisplayDeviceInfo.FLAG_ROTATES_WITH_CONTENT;
      }
    }
  }
  return mInfo;
}
