{
  if (url != null && url.length() > 0) {
    int query=url.lastIndexOf('?');
    if (query > 0) {
      url=url.substring(0,query);
    }
    int filenamePos=url.lastIndexOf('/');
    String filename=0 <= filenamePos ? url.substring(filenamePos + 1) : url;
    if (filename.length() > 0 && Pattern.matches("[a-zA-Z_0-9\\.\\-]+",filename)) {
      int dotPos=filename.lastIndexOf('.');
      if (0 <= dotPos) {
        return filename.substring(dotPos + 1);
      }
    }
  }
  return "";
}
