{
synchronized (mTrackedTasks) {
    boolean changed=false;
    for (    TaskStatus ts : mTrackedTasks) {
      if (ts.getUserId() != userId) {
        continue;
      }
      boolean prevIsConnected=ts.connectivityConstraintSatisfied.getAndSet(mNetworkConnected);
      boolean prevIsMetered=ts.unmeteredConstraintSatisfied.getAndSet(mNetworkUnmetered);
      if (prevIsConnected != mNetworkConnected || prevIsMetered != mNetworkUnmetered) {
        changed=true;
      }
    }
    if (changed) {
      mStateChangedListener.onControllerStateChanged();
    }
  }
}
