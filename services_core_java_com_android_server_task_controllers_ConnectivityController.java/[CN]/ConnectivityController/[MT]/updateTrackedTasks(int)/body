{
  boolean changed=false;
  for (  TaskStatus ts : mTrackedTasks) {
    if (ts.getUserId() != userId) {
      continue;
    }
    boolean prevIsConnected=ts.connectivityConstraintSatisfied.getAndSet(mConnectivity);
    boolean prevIsMetered=ts.meteredConstraintSatisfied.getAndSet(mMetered);
    if (prevIsConnected != mConnectivity || prevIsMetered != mMetered) {
      changed=true;
    }
  }
  if (changed) {
    mStateChangedListener.onControllerStateChanged();
  }
}
