{
  final boolean isConnected;
synchronized (getSyncRoot()) {
    if (!mPendingNotificationUpdate) {
      return;
    }
    mPendingNotificationUpdate=false;
    isConnected=(mDisplayDevice != null);
  }
  mNotificationManager.cancelAsUser(null,R.string.wifi_display_notification_title,UserHandle.ALL);
  if (isConnected) {
    Context context=getContext();
    Resources r=context.getResources();
    Notification notification=new Notification.Builder(context).setContentTitle(r.getString(R.string.wifi_display_notification_title)).setContentText(r.getString(R.string.wifi_display_notification_message)).setContentIntent(mSettingsPendingIntent).setSmallIcon(R.drawable.ic_notify_wifidisplay).setOngoing(true).addAction(android.R.drawable.ic_menu_close_clear_cancel,r.getString(R.string.wifi_display_notification_disconnect),mDisconnectPendingIntent).build();
    mNotificationManager.notifyAsUser(null,R.string.wifi_display_notification_title,notification,UserHandle.ALL);
  }
}
