{
  super.setUp();
  mAct=getActivity();
  mRunner=((ConnectivityManagerTestRunner)getInstrumentation());
  cr=mRunner.getContext().getContentResolver();
  networks=mAct.loadNetworkConfigurations();
  hm=mAct.getDhcpInfo();
  if (DEBUG) {
    printNetworkConfigurations();
    printDhcpInfo();
  }
  assertTrue("enable Wifi failed",mAct.enableWifi());
  try {
    Thread.sleep(2 * ConnectivityManagerTestActivity.SHORT_TIMEOUT);
  }
 catch (  Exception e) {
    fail("interrupted while waiting for WPA_SUPPLICANT to start");
  }
  WifiInfo mConnection=mAct.mWifiManager.getConnectionInfo();
  assertNotNull(mConnection);
  assertTrue("wpa_supplicant is not started ",mAct.mWifiManager.pingSupplicant());
}
