{
  mListener=listener;
  if ((listener == null) || !callbackImmediately)   return;
  try {
    SipSessionState state=getState();
switch (state) {
case READY_TO_CALL:
      listener.onReadyToCall(this);
    break;
case INCOMING_CALL:
  listener.onRinging(this,getPeerProfile(mSipSession));
startRinging();
break;
case OUTGOING_CALL:
listener.onCalling(this);
break;
default :
listener.onError(this,"wrong state to attach call: " + state);
}
}
 catch (Throwable t) {
Log.e(TAG,"setListener()",t);
}
}
