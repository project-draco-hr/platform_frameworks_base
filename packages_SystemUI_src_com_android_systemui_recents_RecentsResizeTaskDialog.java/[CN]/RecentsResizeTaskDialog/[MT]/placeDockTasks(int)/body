{
  int createMode=ActivityManager.DOCKED_STACK_CREATE_MODE_TOP_OR_LEFT;
switch (arrangement) {
case PLACE_DOCK_LEFT:
    createMode=ActivityManager.DOCKED_STACK_CREATE_MODE_TOP_OR_LEFT;
  break;
case PLACE_DOCK_TOP:
createMode=ActivityManager.DOCKED_STACK_CREATE_MODE_TOP_OR_LEFT;
break;
case PLACE_DOCK_RIGHT:
createMode=ActivityManager.DOCKED_STACK_CREATE_MODE_BOTTOM_OR_RIGHT;
break;
case PLACE_DOCK_BOTTOM:
createMode=ActivityManager.DOCKED_STACK_CREATE_MODE_BOTTOM_OR_RIGHT;
break;
}
dismissAllowingStateLoss();
if (mTasks[0].key.stackId != DOCKED_STACK_ID) {
int taskId=mTasks[0].key.id;
SystemServicesProxy ssp=Recents.getSystemServices();
ssp.setTaskResizeable(taskId);
ssp.dockTask(taskId,createMode);
mRecentsView.launchTask(mTasks[0],null,DOCKED_STACK_ID);
}
 else {
Toast.makeText(getContext(),"Already docked",Toast.LENGTH_SHORT);
}
}
