{
  LinkProperties lp=new LinkProperties();
  assertFalse(lp.hasIPv4Address());
  assertFalse(lp.hasIPv6Address());
  LinkProperties stacked=new LinkProperties();
  stacked.setInterfaceName("stacked");
  lp.addStackedLink(stacked);
  stacked.addLinkAddress(LINKADDRV4);
  stacked.addLinkAddress(LINKADDRV6);
  assertTrue(stacked.hasIPv4Address());
  assertTrue(stacked.hasIPv6Address());
  assertFalse(lp.hasIPv4Address());
  assertFalse(lp.hasIPv6Address());
  lp.removeStackedLink(stacked);
  assertFalse(lp.hasIPv4Address());
  assertFalse(lp.hasIPv6Address());
  assertTrue(lp.addLinkAddress(LINKADDRV6));
  assertFalse(lp.hasIPv4Address());
  assertTrue(lp.hasIPv6Address());
  assertTrue(lp.removeLinkAddress(LINKADDRV6));
  assertTrue(lp.addLinkAddress(LINKADDRV4));
  assertTrue(lp.hasIPv4Address());
  assertFalse(lp.hasIPv6Address());
  assertTrue(lp.addLinkAddress(LINKADDRV6));
  assertTrue(lp.hasIPv4Address());
  assertTrue(lp.hasIPv6Address());
  assertFalse(lp.addLinkAddress(LINKADDRV4));
  assertTrue(lp.hasIPv4Address());
  assertTrue(lp.removeLinkAddress(LINKADDRV4));
  assertFalse(lp.hasIPv4Address());
  assertFalse(lp.removeLinkAddress(LINKADDRV4));
}
