{
  final LinkProperties v4lp=new LinkProperties();
  assertFalse(v4lp.isReachable(DNS1));
  assertFalse(v4lp.isReachable(DNS2));
  assertTrue(v4lp.addRoute(new RouteInfo(new IpPrefix(NetworkUtils.numericToInetAddress("75.208.0.0"),16))));
  assertFalse(v4lp.isReachable(DNS1));
  assertFalse(v4lp.isReachable(DNS2));
  assertTrue(v4lp.addLinkAddress(new LinkAddress(ADDRV4,16)));
  assertTrue(v4lp.isReachable(DNS1));
  assertFalse(v4lp.isReachable(DNS2));
  assertTrue(v4lp.addRoute(new RouteInfo(GATEWAY1)));
  assertTrue(v4lp.isReachable(DNS1));
  assertTrue(v4lp.isReachable(DNS2));
  final LinkProperties v6lp=new LinkProperties();
  final InetAddress kLinkLocalDns=NetworkUtils.numericToInetAddress("fe80::6:1");
  final InetAddress kLinkLocalDnsWithScope=NetworkUtils.numericToInetAddress("fe80::6:2%43");
  final InetAddress kOnLinkDns=NetworkUtils.numericToInetAddress("2001:db8:85a3::53");
  assertFalse(v6lp.isReachable(kLinkLocalDns));
  assertFalse(v6lp.isReachable(kLinkLocalDnsWithScope));
  assertFalse(v6lp.isReachable(kOnLinkDns));
  assertFalse(v6lp.isReachable(DNS6));
  assertTrue(v6lp.addRoute(new RouteInfo(new IpPrefix(NetworkUtils.numericToInetAddress("fe80::"),64))));
  assertFalse(v6lp.isReachable(kLinkLocalDns));
  assertTrue(v6lp.isReachable(kLinkLocalDnsWithScope));
  assertFalse(v6lp.isReachable(kOnLinkDns));
  assertFalse(v6lp.isReachable(DNS6));
  assertTrue(v6lp.addLinkAddress(LINKADDRV6LINKLOCAL));
  assertFalse(v6lp.isReachable(kLinkLocalDns));
  assertTrue(v6lp.isReachable(kLinkLocalDnsWithScope));
  assertFalse(v6lp.isReachable(kOnLinkDns));
  assertFalse(v6lp.isReachable(DNS6));
  assertTrue(v6lp.addRoute(new RouteInfo(new IpPrefix(NetworkUtils.numericToInetAddress("2001:db8:85a3::"),64))));
  assertFalse(v6lp.isReachable(kLinkLocalDns));
  assertTrue(v6lp.isReachable(kLinkLocalDnsWithScope));
  assertTrue(v6lp.isReachable(kOnLinkDns));
  assertFalse(v6lp.isReachable(DNS6));
  assertTrue(v6lp.addLinkAddress(new LinkAddress(ADDRV6,64)));
  assertFalse(v6lp.isReachable(kLinkLocalDns));
  assertTrue(v6lp.isReachable(kLinkLocalDnsWithScope));
  assertTrue(v6lp.isReachable(kOnLinkDns));
  assertFalse(v6lp.isReachable(DNS6));
  assertTrue(v6lp.addRoute(new RouteInfo(GATEWAY62)));
  assertFalse(v6lp.isReachable(kLinkLocalDns));
  assertTrue(v6lp.isReachable(kLinkLocalDnsWithScope));
  assertTrue(v6lp.isReachable(kOnLinkDns));
  assertTrue(v6lp.isReachable(DNS6));
  LinkProperties stacked=new LinkProperties();
  stacked.setInterfaceName("v4-test0");
  v6lp.addStackedLink(stacked);
  InetAddress stackedAddress=Address("192.0.0.4");
  LinkAddress stackedLinkAddress=new LinkAddress(stackedAddress,32);
  assertFalse(v6lp.isReachable(stackedAddress));
  stacked.addLinkAddress(stackedLinkAddress);
  assertFalse(v6lp.isReachable(stackedAddress));
  stacked.addRoute(new RouteInfo(stackedLinkAddress));
  assertTrue(stacked.isReachable(stackedAddress));
  assertTrue(v6lp.isReachable(stackedAddress));
  assertFalse(v6lp.isReachable(DNS1));
  stacked.addRoute(new RouteInfo((IpPrefix)null,stackedAddress));
  assertTrue(v6lp.isReachable(DNS1));
}
