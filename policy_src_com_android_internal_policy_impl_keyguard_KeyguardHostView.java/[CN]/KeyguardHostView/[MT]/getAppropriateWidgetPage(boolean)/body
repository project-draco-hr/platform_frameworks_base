{
  if (mAppWidgetToShow != AppWidgetManager.INVALID_APPWIDGET_ID) {
    final int childCount=mAppWidgetContainer.getChildCount();
    for (int i=0; i < childCount; i++) {
      if (mAppWidgetContainer.getWidgetPageAt(i).getContentAppWidgetId() == mAppWidgetToShow) {
        return i;
      }
    }
    mAppWidgetToShow=AppWidgetManager.INVALID_APPWIDGET_ID;
  }
  if (mPreviousWidgetPage > -1) {
    return mPreviousWidgetPage;
  }
  if (isMusicPlaying) {
    if (DEBUG)     Log.d(TAG,"Music playing, show transport");
    return mAppWidgetContainer.getWidgetPageIndex(mTransportControl);
  }
  int rightMost=mAppWidgetContainer.getChildCount() - 1;
  if (mAppWidgetContainer.isCameraPage(rightMost)) {
    rightMost--;
  }
  if (DEBUG)   Log.d(TAG,"Show right-most page " + rightMost);
  return rightMost;
}
