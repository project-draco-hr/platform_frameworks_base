{
  View deleteDropTarget=findViewById(R.id.keyguard_widget_pager_delete_target);
  mAppWidgetContainer=(KeyguardWidgetPager)findViewById(R.id.app_widget_container);
  mAppWidgetContainer.setVisibility(VISIBLE);
  mAppWidgetContainer.setCallbacks(mWidgetCallbacks);
  mAppWidgetContainer.setDeleteDropTarget(deleteDropTarget);
  mAppWidgetContainer.setMinScale(0.5f);
  mSlidingChallengeLayout=(SlidingChallengeLayout)findViewById(R.id.sliding_layout);
  if (mSlidingChallengeLayout != null) {
    mSlidingChallengeLayout.setOnChallengeScrolledListener(mViewStateManager);
  }
  mAppWidgetContainer.setViewStateManager(mViewStateManager);
  mAppWidgetContainer.setLockPatternUtils(mLockPatternUtils);
  ChallengeLayout challenge=mSlidingChallengeLayout != null ? mSlidingChallengeLayout : (ChallengeLayout)findViewById(R.id.multi_pane_challenge);
  challenge.setOnBouncerStateChangedListener(mViewStateManager);
  mAppWidgetContainer.setBouncerAnimationDuration(challenge.getBouncerAnimationDuration());
  mViewStateManager.setPagedView(mAppWidgetContainer);
  mViewStateManager.setChallengeLayout(challenge);
  mSecurityViewContainer=(KeyguardSecurityViewFlipper)findViewById(R.id.view_flipper);
  mKeyguardSelectorView=(KeyguardSelectorView)findViewById(R.id.keyguard_selector_view);
  mViewStateManager.setSecurityViewContainer(mSecurityViewContainer);
  if (!(mContext instanceof Activity)) {
    setSystemUiVisibility(getSystemUiVisibility() | View.STATUS_BAR_DISABLE_BACK);
  }
  addDefaultWidgets();
  addWidgetsFromSettings();
  if (numWidgets() >= MAX_WIDGETS) {
    mAppWidgetContainer.setAddWidgetEnabled(false);
  }
  checkAppWidgetConsistency();
  mSwitchPageRunnable.run();
  mViewStateManager.showUsabilityHints();
  showPrimarySecurityScreen(false);
  updateSecurityViews();
}
