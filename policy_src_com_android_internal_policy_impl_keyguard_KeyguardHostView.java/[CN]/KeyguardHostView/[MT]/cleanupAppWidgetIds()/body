{
  if (!KeyguardUpdateMonitor.getInstance(mContext).hasBootCompleted()) {
    mCleanupAppWidgetsOnBootCompleted=true;
    return;
  }
  if (!mSafeModeEnabled && !widgetsDisabledByDpm()) {
    int[] appWidgetIdsInKeyguardSettings=mLockPatternUtils.getAppWidgets();
    int[] appWidgetIdsBoundToHost=mAppWidgetHost.getAppWidgetIds();
    for (int i=0; i < appWidgetIdsBoundToHost.length; i++) {
      int appWidgetId=appWidgetIdsBoundToHost[i];
      if (!contains(appWidgetIdsInKeyguardSettings,appWidgetId)) {
        Log.d(TAG,"Found a appWidgetId that's not being used by keyguard, deleting id " + appWidgetId);
        mAppWidgetHost.deleteAppWidgetId(appWidgetId);
      }
    }
  }
}
