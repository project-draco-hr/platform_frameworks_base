{
  boolean music=mTransportControl.isMusicPlaying() || mTransportState == TRANSPORT_VISIBLE;
  if (music) {
    if (DEBUG)     Log.d(TAG,"Music playing, show transport");
    return mAppWidgetContainer.indexOfChild(mTransportControl);
  }
  UserManager userManager=(UserManager)mContext.getSystemService(Context.USER_SERVICE);
  View multiUserView=findViewById(R.id.keyguard_multi_user_selector);
  int multiUserPosition=mAppWidgetContainer.indexOfChild(multiUserView);
  if (multiUserPosition != -1 && userManager.getUsers(true).size() > 1) {
    if (DEBUG)     Log.d(TAG,"Multi-user applicable, show it");
    return multiUserPosition;
  }
  int stickyWidgetIndex=mLockPatternUtils.getStickyWidgetIndex();
  if (stickyWidgetIndex > -1 && stickyWidgetIndex < mAppWidgetContainer.getChildCount() && !isCameraOrAdd(stickyWidgetIndex)) {
    if (DEBUG)     Log.d(TAG,"Sticky widget found, show it");
    return stickyWidgetIndex;
  }
  View statusView=findViewById(R.id.keyguard_status_view);
  int statusViewIndex=mAppWidgetContainer.indexOfChild(statusView);
  if (statusViewIndex > -1) {
    if (DEBUG)     Log.d(TAG,"Status widget found, show it");
    return mAppWidgetContainer.indexOfChild(statusView);
  }
  int rightMost=mAppWidgetContainer.getChildCount() - 1;
  if (mAppWidgetContainer.getChildAt(rightMost) instanceof CameraWidgetFrame) {
    rightMost--;
  }
  if (DEBUG)   Log.d(TAG,"Show right-most");
  return rightMost;
}
