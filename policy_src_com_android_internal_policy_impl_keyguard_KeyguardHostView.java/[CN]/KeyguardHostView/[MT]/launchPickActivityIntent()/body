{
  Intent pickIntent=new Intent(AppWidgetManager.ACTION_KEYGUARD_APPWIDGET_PICK);
  int appWidgetId=mAppWidgetHost.allocateAppWidgetId();
  if (appWidgetId != -1) {
    pickIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,appWidgetId);
    pickIntent.putExtra(AppWidgetManager.EXTRA_CUSTOM_SORT,false);
    pickIntent.putExtra(AppWidgetManager.EXTRA_CATEGORY_FILTER,AppWidgetProviderInfo.WIDGET_CATEGORY_KEYGUARD);
    pickIntent.putExtra(Intent.EXTRA_INTENT,getBaseIntent());
    pickIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_CLEAR_TOP| Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);
    mContext.startActivityAsUser(pickIntent,new UserHandle(UserHandle.USER_CURRENT));
  }
 else {
    Log.e(TAG,"Unable to allocate an AppWidget id in lock screen");
  }
}
