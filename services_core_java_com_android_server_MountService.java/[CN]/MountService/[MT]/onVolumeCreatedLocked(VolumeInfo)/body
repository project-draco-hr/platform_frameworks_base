{
  final boolean primaryPhysical=SystemProperties.getBoolean(StorageManager.PROP_PRIMARY_PHYSICAL,false);
  if (VolumeInfo.ID_EMULATED_INTERNAL.equals(vol.id) && !primaryPhysical) {
    vol.mountFlags|=VolumeInfo.MOUNT_FLAG_PRIMARY;
    vol.mountFlags|=VolumeInfo.MOUNT_FLAG_VISIBLE;
    mHandler.obtainMessage(H_VOLUME_MOUNT,vol).sendToTarget();
  }
 else   if (vol.type == VolumeInfo.TYPE_PUBLIC) {
    if (primaryPhysical) {
      vol.mountFlags|=VolumeInfo.MOUNT_FLAG_PRIMARY;
      vol.mountFlags|=VolumeInfo.MOUNT_FLAG_VISIBLE;
    }
    final DiskInfo disk=mDisks.get(vol.getDiskId());
    if (disk != null && disk.isAdoptable()) {
      vol.mountFlags|=VolumeInfo.MOUNT_FLAG_VISIBLE;
    }
    vol.mountUserId=UserHandle.USER_OWNER;
    mHandler.obtainMessage(H_VOLUME_MOUNT,vol).sendToTarget();
  }
 else   if (vol.type == VolumeInfo.TYPE_PRIVATE) {
    mHandler.obtainMessage(H_VOLUME_MOUNT,vol).sendToTarget();
  }
 else {
    Slog.d(TAG,"Skipping automatic mounting of " + vol);
  }
}
