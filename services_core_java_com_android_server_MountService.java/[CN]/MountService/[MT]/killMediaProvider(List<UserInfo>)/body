{
  if (users == null)   return;
  final long token=Binder.clearCallingIdentity();
  try {
    for (    UserInfo user : users) {
      if (user.isSystemOnly())       continue;
      final ProviderInfo provider=mPms.resolveContentProvider(MediaStore.AUTHORITY,0,user.id);
      if (provider != null) {
        final IActivityManager am=ActivityManagerNative.getDefault();
        try {
          am.killApplicationWithAppId(provider.applicationInfo.packageName,UserHandle.getAppId(provider.applicationInfo.uid),"vold reset");
          break;
        }
 catch (        RemoteException e) {
        }
      }
    }
  }
  finally {
    Binder.restoreCallingIdentity(token);
  }
}
