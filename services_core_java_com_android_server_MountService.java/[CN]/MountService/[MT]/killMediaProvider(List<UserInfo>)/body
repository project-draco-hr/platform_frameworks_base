{
  if (users == null)   return;
  final long token=Binder.clearCallingIdentity();
  try {
    for (    UserInfo user : users) {
      if (user.isSystemOnly())       continue;
      final ProviderInfo provider=mPms.resolveContentProvider(MediaStore.AUTHORITY,PackageManager.MATCH_DIRECT_BOOT_AWARE | PackageManager.MATCH_DIRECT_BOOT_UNAWARE,user.id);
      if (provider != null) {
        final IActivityManager am=ActivityManagerNative.getDefault();
        try {
          am.killApplication(provider.applicationInfo.packageName,UserHandle.getAppId(provider.applicationInfo.uid),UserHandle.USER_ALL,"vold reset");
          break;
        }
 catch (        RemoteException e) {
        }
      }
    }
  }
  finally {
    Binder.restoreCallingIdentity(token);
  }
}
