{
  Slog.d(TAG,"Thinking about reset, mSystemReady=" + mSystemReady + ", mDaemonConnected="+ mDaemonConnected);
  if (mSystemReady && mDaemonConnected) {
    final UserManager um=UserManager.get(mContext);
    final List<UserInfo> users=um.getUsers();
    killMediaProvider(users);
    mDisks.clear();
    mVolumes.clear();
    addInternalVolume();
    try {
      mConnector.execute("volume","reset");
      for (      UserInfo user : users) {
        mConnector.execute("volume","user_added",user.id,user.serialNumber);
      }
      for (      int userId : mStartedUsers) {
        mConnector.execute("volume","user_started",userId);
      }
    }
 catch (    NativeDaemonConnectorException e) {
      Slog.w(TAG,"Failed to reset vold",e);
    }
  }
}
