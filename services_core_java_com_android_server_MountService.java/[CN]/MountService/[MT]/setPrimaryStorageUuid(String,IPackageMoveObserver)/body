{
  enforcePermission(android.Manifest.permission.MOUNT_UNMOUNT_FILESYSTEMS);
  waitForReady();
synchronized (mLock) {
    if (Objects.equals(mPrimaryStorageUuid,volumeUuid)) {
      throw new IllegalArgumentException("Primary storage already at " + volumeUuid);
    }
    if (mMoveCallback != null) {
      throw new IllegalStateException("Move already in progress");
    }
    mMoveCallback=callback;
    mMoveTargetUuid=volumeUuid;
    if (Objects.equals(StorageManager.UUID_PRIMARY_PHYSICAL,mPrimaryStorageUuid) || Objects.equals(StorageManager.UUID_PRIMARY_PHYSICAL,volumeUuid)) {
      Slog.d(TAG,"Skipping move to/from primary physical");
      onMoveStatusLocked(MOVE_STATUS_COPY_FINISHED);
      onMoveStatusLocked(PackageManager.MOVE_SUCCEEDED);
      resetIfReadyAndConnectedLocked();
    }
 else {
      final VolumeInfo from=Preconditions.checkNotNull(findStorageForUuid(mPrimaryStorageUuid));
      final VolumeInfo to=Preconditions.checkNotNull(findStorageForUuid(volumeUuid));
      try {
        mConnector.execute("volume","move_storage",from.id,to.id);
      }
 catch (      NativeDaemonConnectorException e) {
        throw e.rethrowAsParcelableException();
      }
    }
  }
}
