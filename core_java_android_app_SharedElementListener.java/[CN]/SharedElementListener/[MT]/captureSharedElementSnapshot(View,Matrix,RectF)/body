{
  int bitmapWidth=Math.round(screenBounds.width());
  int bitmapHeight=Math.round(screenBounds.height());
  Bitmap bitmap=null;
  if (bitmapWidth > 0 && bitmapHeight > 0) {
    if (mTempMatrix == null) {
      mTempMatrix=new Matrix();
    }
    mTempMatrix.set(viewToGlobalMatrix);
    mTempMatrix.postTranslate(-screenBounds.left,-screenBounds.top);
    bitmap=Bitmap.createBitmap(bitmapWidth,bitmapHeight,Bitmap.Config.ARGB_8888);
    Canvas canvas=new Canvas(bitmap);
    canvas.concat(mTempMatrix);
    sharedElement.draw(canvas);
  }
  return bitmap;
}
