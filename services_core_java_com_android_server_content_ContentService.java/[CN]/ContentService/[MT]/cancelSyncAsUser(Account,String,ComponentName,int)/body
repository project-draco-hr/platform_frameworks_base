{
  if (authority != null && authority.length() == 0) {
    throw new IllegalArgumentException("Authority must be non-empty");
  }
  enforceCrossUserPermission(userId,"no permission to modify the sync settings for user " + userId);
  long identityToken=clearCallingIdentity();
  try {
    SyncManager syncManager=getSyncManager();
    if (syncManager != null) {
      SyncStorageEngine.EndPoint info;
      if (cname == null) {
        info=new SyncStorageEngine.EndPoint(account,authority,userId);
      }
 else {
        info=new SyncStorageEngine.EndPoint(cname,userId,-1);
      }
      syncManager.clearScheduledSyncOperations(info);
      syncManager.cancelActiveSync(info,null);
    }
  }
  finally {
    restoreCallingIdentity(identityToken);
  }
}
