{
synchronized (sIsStartedGuard) {
    if (sIsStarted) {
      Log.d(TAG,"Shutdown sequence already running, returning.");
      return;
    }
    sIsStarted=true;
  }
  ProgressDialog pd=new ProgressDialog(context);
  pd.setTitle(context.getText(com.android.internal.R.string.power_off));
  pd.setMessage(context.getText(com.android.internal.R.string.shutdown_progress));
  pd.setIndeterminate(true);
  pd.setCancelable(false);
  pd.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD_DIALOG);
  if (!context.getResources().getBoolean(com.android.internal.R.bool.config_sf_slowBlur)) {
    pd.getWindow().addFlags(WindowManager.LayoutParams.FLAG_BLUR_BEHIND);
  }
  pd.show();
  sInstance.mContext=context;
  sInstance.mPowerManager=(PowerManager)context.getSystemService(Context.POWER_SERVICE);
  sInstance.mWakeLock=null;
  if (sInstance.mPowerManager.isScreenOn()) {
    try {
      sInstance.mWakeLock=sInstance.mPowerManager.newWakeLock(PowerManager.FULL_WAKE_LOCK,"Shutdown");
      sInstance.mWakeLock.acquire();
    }
 catch (    SecurityException e) {
      Log.w(TAG,"No permission to acquire wake lock",e);
      sInstance.mWakeLock=null;
    }
  }
  sInstance.mHandler=new Handler(){
  }
;
  sInstance.start();
}
