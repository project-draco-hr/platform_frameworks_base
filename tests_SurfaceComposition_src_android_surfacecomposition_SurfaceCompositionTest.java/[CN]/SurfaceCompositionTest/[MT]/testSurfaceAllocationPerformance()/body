{
  Bundle status=new Bundle();
  for (int i=0; i < TEST_PIXEL_FORMATS.length; ++i) {
    int pixelFormat=TEST_PIXEL_FORMATS[i];
    String formatName=SurfaceCompositionMeasuringActivity.getPixelFormatInfo(pixelFormat);
    AllocationScore score=getActivity().measureAllocationScore(pixelFormat);
    Log.i(TAG,"testSurfaceAllocationPerformance(" + formatName + ") = "+ score);
    assertTrue("Device does not support surface(" + formatName + ") allocation "+ "performance score. "+ score.mMedian+ " < "+ MIN_ACCEPTED_ALLOCATION_SCORE[i]+ ". Build: "+ Build.FINGERPRINT+ ".",score.mMedian >= MIN_ACCEPTED_ALLOCATION_SCORE[i]);
    if (pixelFormat == PixelFormat.TRANSLUCENT) {
      status.putDouble(KEY_SURFACE_ALLOCATION_PERFORMANCE_MEDIAN,score.mMedian);
      status.putDouble(KEY_SURFACE_ALLOCATION_PERFORMANCE_MIN,score.mMin);
      status.putDouble(KEY_SURFACE_ALLOCATION_PERFORMANCE_MAX,score.mMax);
    }
  }
  getInstrumentation().sendStatus(Activity.RESULT_OK,status);
}
