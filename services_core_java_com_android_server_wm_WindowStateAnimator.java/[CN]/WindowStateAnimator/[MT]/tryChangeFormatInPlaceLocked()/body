{
  if (mSurfaceControl == null) {
    return false;
  }
  final LayoutParams attrs=mWin.getAttrs();
  final boolean isHwAccelerated=(attrs.flags & FLAG_HARDWARE_ACCELERATED) != 0;
  final int format=isHwAccelerated ? PixelFormat.TRANSLUCENT : attrs.format;
  if (format == mSurfaceFormat) {
    setOpaqueLocked(!PixelFormat.formatHasAlpha(attrs.format));
    return true;
  }
  return false;
}
