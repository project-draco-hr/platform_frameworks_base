{
  if (mWin.isHiddenFromUserLocked()) {
    if (DEBUG_VISIBILITY)     Slog.w(TAG,"hiding " + mWin + ", belonging to "+ mWin.mOwnerUid);
    mWin.hideLw(false);
    return false;
  }
  if (DEBUG_VISIBILITY || (DEBUG_STARTING_WINDOW && mWin.mAttrs.type == WindowManager.LayoutParams.TYPE_APPLICATION_STARTING)) {
    Slog.v(TAG,"performShow on " + this + ": mDrawState="+ drawStateToString()+ " readyForDisplay="+ mWin.isReadyForDisplayIgnoringKeyguard()+ " starting="+ (mWin.mAttrs.type == TYPE_APPLICATION_STARTING)+ " during animation: policyVis="+ mWin.mPolicyVisibility+ " attHidden="+ mWin.mAttachedHidden+ " tok.hiddenRequested="+ (mWin.mAppToken != null ? mWin.mAppToken.hiddenRequested : false)+ " tok.hidden="+ (mWin.mAppToken != null ? mWin.mAppToken.hidden : false)+ " animating="+ mAnimating+ " tok animating="+ (mAppAnimator != null ? mAppAnimator.animating : false)+ " Callers="+ Debug.getCallers(3));
  }
  if (mDrawState == READY_TO_SHOW && mWin.isReadyForDisplayIgnoringKeyguard()) {
    if (DEBUG_VISIBILITY || (DEBUG_STARTING_WINDOW && mWin.mAttrs.type == WindowManager.LayoutParams.TYPE_APPLICATION_STARTING)) {
      Slog.v(TAG,"Showing " + this + " during animation: policyVis="+ mWin.mPolicyVisibility+ " attHidden="+ mWin.mAttachedHidden+ " tok.hiddenRequested="+ (mWin.mAppToken != null ? mWin.mAppToken.hiddenRequested : false)+ " tok.hidden="+ (mWin.mAppToken != null ? mWin.mAppToken.hidden : false)+ " animating="+ mAnimating+ " tok animating="+ (mAppAnimator != null ? mAppAnimator.animating : false));
    }
    mService.enableScreenIfNeededLocked();
    applyEnterAnimationLocked();
    mLastAlpha=-1;
    if (DEBUG_SURFACE_TRACE || DEBUG_ANIM)     Slog.v(TAG,"performShowLocked: mDrawState=HAS_DRAWN in " + mWin);
    mDrawState=HAS_DRAWN;
    mService.scheduleAnimationLocked();
    int i=mWin.mChildWindows.size();
    while (i > 0) {
      i--;
      WindowState c=mWin.mChildWindows.get(i);
      if (c.mAttachedHidden) {
        c.mAttachedHidden=false;
        if (c.mWinAnimator.mSurfaceController != null) {
          c.mWinAnimator.performShowLocked();
          final DisplayContent displayContent=c.getDisplayContent();
          if (displayContent != null) {
            displayContent.layoutNeeded=true;
          }
        }
      }
    }
    if (mWin.mAttrs.type != TYPE_APPLICATION_STARTING && mWin.mAppToken != null) {
      mWin.mAppToken.onFirstWindowDrawn(mWin,this);
    }
    if (mWin.mAttrs.type == TYPE_INPUT_METHOD) {
      mWin.mDisplayContent.mDividerControllerLocked.resetImeHideRequested();
    }
    return true;
  }
  return false;
}
