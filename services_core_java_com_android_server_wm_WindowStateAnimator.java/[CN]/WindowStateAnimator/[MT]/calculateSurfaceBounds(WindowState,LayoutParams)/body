{
  if ((attrs.flags & FLAG_SCALED) != 0) {
    mTmpSize.right=mTmpSize.left + w.mRequestedWidth;
    mTmpSize.bottom=mTmpSize.top + w.mRequestedHeight;
  }
 else {
    if (w.isDragResizing()) {
      if (w.getResizeMode() == DRAG_RESIZE_MODE_FREEFORM) {
        mTmpSize.left=0;
        mTmpSize.top=0;
      }
      final DisplayInfo displayInfo=w.getDisplayInfo();
      mTmpSize.right=mTmpSize.left + displayInfo.logicalWidth;
      mTmpSize.bottom=mTmpSize.top + displayInfo.logicalHeight;
    }
 else {
      mTmpSize.right=mTmpSize.left + w.mCompatFrame.width();
      mTmpSize.bottom=mTmpSize.top + w.mCompatFrame.height();
    }
  }
  if (mTmpSize.width() < 1) {
    mTmpSize.right=mTmpSize.left + 1;
  }
  if (mTmpSize.height() < 1) {
    mTmpSize.bottom=mTmpSize.top + 1;
  }
  mTmpSize.left-=attrs.surfaceInsets.left;
  mTmpSize.top-=attrs.surfaceInsets.top;
  mTmpSize.right+=attrs.surfaceInsets.right;
  mTmpSize.bottom+=attrs.surfaceInsets.bottom;
}
