{
  super.onMeasure(widthMeasureSpec,heightMeasureSpec);
  if (DEBUG)   LOG("onMeasure(%d, %d) -> (%d, %d)",widthMeasureSpec,heightMeasureSpec,getMeasuredWidth(),getMeasuredHeight());
  int newHeight=getMeasuredHeight();
  if (newHeight != mFullHeight) {
    mFullHeight=newHeight;
    if (!mTracking && !mRubberbanding && !mTimeAnimator.isStarted()&& mExpandedHeight > 0 && mExpandedHeight != mFullHeight) {
      mExpandedHeight=mFullHeight;
    }
  }
  heightMeasureSpec=MeasureSpec.makeMeasureSpec((int)mExpandedHeight,MeasureSpec.AT_MOST);
  setMeasuredDimension(widthMeasureSpec,heightMeasureSpec);
}
