{
  mKeyguardFingerHeight=newHeight;
  if (newHeight < getMaxPanelHeight() && !mKeyguardMovingUp) {
    mKeyguardMovingUp=true;
    ValueAnimator anim=createHeightAnimator(getMaxPanelHeight() - mKeyguardMoveUpDistance);
    anim.setDuration(KEYGUARD_MOVE_UP_LENGTH);
    anim.setInterpolator(mKeyguardMoveUpInterpolator);
    anim.addListener(new AnimatorListenerAdapter(){
      @Override public void onAnimationEnd(      Animator animation){
        mHeightAnimator=null;
      }
    }
);
    mHeightAnimator=anim;
    anim.start();
    postOnAnimationDelayed(new Runnable(){
      @Override public void run(){
        if (mKeyguardFingerHeight < mExpandedHeight && mHeightAnimator != null && mKeyguardMovingUp) {
          mHeightAnimator.cancel();
          float target=getMaxPanelHeight() - 1.75f * mKeyguardMoveUpDistance;
          float diff=mExpandedHeight - target;
          ValueAnimator anim=createHeightAnimator(target);
          float velocity=2.5f * mKeyguardMoveUpDistance / (KEYGUARD_MOVE_UP_LENGTH / 1000f);
          anim.setInterpolator(mLinearInterpolator);
          anim.setDuration(Math.max(0,(long)(diff / velocity * 1000f)));
          anim.addListener(new AnimatorListenerAdapter(){
            @Override public void onAnimationEnd(            Animator animation){
              mHeightAnimator=null;
            }
          }
);
          mHeightAnimator=anim;
          anim.start();
        }
      }
    }
,KEYGUARD_MOVE_UP_LENGTH / 2);
  }
}
