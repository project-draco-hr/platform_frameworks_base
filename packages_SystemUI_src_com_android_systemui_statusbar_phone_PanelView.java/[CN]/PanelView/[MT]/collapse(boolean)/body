{
  if (DEBUG)   logf("collapse: " + this);
  if (mPeekPending || mPeekAnimator != null) {
    mCollapseAfterPeek=true;
    if (mPeekPending) {
      removeCallbacks(mPeekRunnable);
      mPeekRunnable.run();
    }
  }
 else   if (!isFullyCollapsed() && !mTracking && !mClosing) {
    if (mHeightAnimator != null) {
      mHeightAnimator.cancel();
    }
    mClosing=true;
    notifyExpandingStarted();
    if (delayed) {
      if (PhoneStatusBar.DEBUG_EMPTY_KEYGUARD) {
        Log.i(TAG,"Posting collapse runnable, will be run in 120ms");
      }
      postDelayed(mFlingCollapseRunnable,120);
    }
 else {
      if (PhoneStatusBar.DEBUG_EMPTY_KEYGUARD) {
        Log.i(TAG,"Animating collapsing now");
      }
      fling(0,false);
    }
  }
}
