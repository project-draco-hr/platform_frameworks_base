{
  cancelPeek();
  float target=expand ? getMaxPanelHeight() : 0.0f;
  if (target == mExpandedHeight || mOverExpansion > 0) {
    onExpandingFinished();
    mExpandedHeight=target;
    mOverExpansion=0.0f;
    mBar.panelExpansionChanged(this,mExpandedFraction);
    return;
  }
  ValueAnimator animator=createHeightAnimator(target);
  if (expand) {
    mFlingAnimationUtils.apply(animator,mExpandedHeight,target,vel,getHeight());
  }
 else {
    mFlingAnimationUtils.applyDismissing(animator,mExpandedHeight,target,vel,getHeight());
    if (vel == 0) {
      animator.setDuration((long)(animator.getDuration() / 1.75f));
    }
  }
  animator.addListener(new AnimatorListenerAdapter(){
    @Override public void onAnimationEnd(    Animator animation){
      mHeightAnimator=null;
      onExpandingFinished();
    }
  }
);
  animator.start();
  mHeightAnimator=animator;
}
