{
  super.onAttachedToWindow();
  ExpandHelper.ScrollAdapter scrollAdapter;
  if (BaseStatusBar.ENABLE_NOTIFICATION_STACK) {
    NotificationStackScrollLayout stackScrollLayout=(NotificationStackScrollLayout)findViewById(R.id.notification_stack_scroller);
    latestItems=stackScrollLayout;
    scrollAdapter=stackScrollLayout;
    mNotificationScroller=stackScrollLayout;
  }
 else {
    latestItems=(ViewGroup)findViewById(R.id.latestItems);
    mNotificationScroller=findViewById(R.id.scroll);
    scrollAdapter=new ExpandHelper.ScrollAdapter(){
      @Override public boolean isScrolledToTop(){
        return mNotificationScroller.getScrollY() == 0;
      }
      @Override public View getHostView(){
        return mNotificationScroller;
      }
    }
;
  }
  mNotificationPanel=(NotificationPanelView)findViewById(R.id.notification_panel);
  int minHeight=getResources().getDimensionPixelSize(R.dimen.notification_row_min_height);
  int maxHeight=getResources().getDimensionPixelSize(R.dimen.notification_row_max_height);
  mExpandHelper=new ExpandHelper(getContext(),(ExpandHelper.Callback)latestItems,minHeight,maxHeight);
  mExpandHelper.setEventSource(this);
  mExpandHelper.setScrollAdapter(scrollAdapter);
  final ViewRootImpl root=getViewRootImpl();
  if (root != null) {
    root.setDrawDuringWindowsAnimating(true);
  }
}
