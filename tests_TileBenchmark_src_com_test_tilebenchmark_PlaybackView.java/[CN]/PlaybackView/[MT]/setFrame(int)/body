{
  if (mProfData == null || mProfData.length == 0) {
    return 0;
  }
  int readyTiles=0, unreadyTiles=0, unplacedTiles=0, numInvals=0;
  mTempShapes.clear();
  for (  TileData t : mProfData[frame]) {
    if (t.level != INVAL_FLAG && t != mProfData[frame][0]) {
      int colorId;
      if (t.isReady) {
        readyTiles++;
        colorId=R.color.ready_tile;
      }
 else {
        unreadyTiles++;
        colorId=R.color.unready_tile;
      }
      if (t.left < 0 || t.top < 0) {
        unplacedTiles++;
      }
      mTempShapes.add(new TileDrawable(t,colorId));
    }
 else {
      numInvals++;
    }
  }
  int invalId=0;
  for (  TileData t : mProfData[frame]) {
    if (t.level == INVAL_FLAG && t != mProfData[frame][0]) {
      TileDrawable invalShape=new TileDrawable(t,R.color.inval_region_start);
      ValueAnimator tileAnimator=ObjectAnimator.ofInt(invalShape,"color",getResources().getColor(R.color.inval_region_start),getResources().getColor(R.color.inval_region_stop));
      tileAnimator.setDuration(numInvals * INVAL_CYCLE);
      tileAnimator.setEvaluator(new ArgbEvaluator());
      tileAnimator.setRepeatCount(ValueAnimator.INFINITE);
      tileAnimator.setRepeatMode(ValueAnimator.RESTART);
      float delay=(float)(invalId) * INVAL_CYCLE;
      tileAnimator.setStartDelay((int)delay);
      invalId++;
      tileAnimator.start();
      mTempShapes.add(invalShape);
    }
  }
  mRenderStrings[0]=getResources().getString(R.string.format_stat_name,getResources().getString(R.string.ready_tiles),readyTiles);
  mRenderStrings[1]=getResources().getString(R.string.format_stat_name,getResources().getString(R.string.unready_tiles),unreadyTiles);
  mRenderStrings[2]=getResources().getString(R.string.format_stat_name,getResources().getString(R.string.unplaced_tiles),unplacedTiles);
  mRenderStrings[3]=getResources().getString(R.string.format_stat_name,getResources().getString(R.string.number_invalidates),numInvals);
  TileDrawable viewShape=new TileDrawable(mProfData[frame][0],R.color.view);
  mTempShapes.add(viewShape);
  this.invalidate();
  return frame;
}
