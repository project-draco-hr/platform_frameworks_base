{
  super.onCreate(savedInstanceState);
  setContentView(com.android.internal.R.layout.preference_list_content);
  Intent intent=getIntent();
  if (intent.getBooleanExtra(EXTRA_PREFS_SHOW_BUTTON_BAR,false)) {
    findViewById(com.android.internal.R.id.button_bar).setVisibility(View.VISIBLE);
    Button backButton=(Button)findViewById(com.android.internal.R.id.back_button);
    backButton.setOnClickListener(new OnClickListener(){
      public void onClick(      View v){
        setResult(RESULT_CANCELED);
        finish();
      }
    }
);
    mNextButton=(Button)findViewById(com.android.internal.R.id.next_button);
    mNextButton.setOnClickListener(new OnClickListener(){
      public void onClick(      View v){
        setResult(RESULT_OK);
        finish();
      }
    }
);
    if (intent.hasExtra(EXTRA_PREFS_SET_NEXT_TEXT)) {
      String buttonText=intent.getStringExtra(EXTRA_PREFS_SET_NEXT_TEXT);
      if (TextUtils.isEmpty(buttonText)) {
        mNextButton.setVisibility(View.GONE);
      }
 else {
        mNextButton.setText(buttonText);
      }
    }
    if (intent.hasExtra(EXTRA_PREFS_SET_BACK_TEXT)) {
      String buttonText=intent.getStringExtra(EXTRA_PREFS_SET_BACK_TEXT);
      if (TextUtils.isEmpty(buttonText)) {
        backButton.setVisibility(View.GONE);
      }
 else {
        backButton.setText(buttonText);
      }
    }
  }
  mPreferenceManager=onCreatePreferenceManager();
  getListView().setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
}
