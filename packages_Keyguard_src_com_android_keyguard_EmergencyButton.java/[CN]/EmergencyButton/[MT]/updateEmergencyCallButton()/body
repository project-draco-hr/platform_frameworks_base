{
  boolean enabled=false;
  if (mLockPatternUtils.isInCall()) {
    enabled=true;
  }
 else   if (mLockPatternUtils.isEmergencyCallCapable()) {
    final boolean simLocked=KeyguardUpdateMonitor.getInstance(mContext).isSimPinVoiceSecure();
    if (simLocked) {
      enabled=mLockPatternUtils.isEmergencyCallEnabledWhileSimLocked();
    }
 else {
      enabled=mLockPatternUtils.isSecure();
    }
  }
  mLockPatternUtils.updateEmergencyCallButtonState(this,enabled,false);
}
