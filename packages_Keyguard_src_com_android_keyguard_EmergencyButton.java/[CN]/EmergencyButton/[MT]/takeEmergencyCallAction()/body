{
  MetricsLogger.action(mContext,MetricsLogger.ACTION_EMERGENCY_CALL);
  mPowerManager.userActivity(SystemClock.uptimeMillis(),true);
  try {
    ActivityManagerNative.getDefault().stopLockTaskMode();
  }
 catch (  RemoteException e) {
    Slog.w(LOG_TAG,"Failed to stop app pinning");
  }
  if (isInCall()) {
    resumeCall();
    if (mEmergencyButtonCallback != null) {
      mEmergencyButtonCallback.onEmergencyButtonClickedWhenInCall();
    }
  }
 else {
    KeyguardUpdateMonitor.getInstance(mContext).reportEmergencyCallAction(true);
    getContext().startActivityAsUser(INTENT_EMERGENCY_DIAL,ActivityOptions.makeCustomAnimation(getContext(),0,0).toBundle(),new UserHandle(KeyguardUpdateMonitor.getCurrentUser()));
  }
}
