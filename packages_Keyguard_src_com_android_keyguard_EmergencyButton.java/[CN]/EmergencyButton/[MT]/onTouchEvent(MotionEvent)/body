{
  final int x=(int)event.getX();
  final int y=(int)event.getY();
  if (event.getActionMasked() == MotionEvent.ACTION_DOWN) {
    mDownX=x;
    mDownY=y;
    mLongPressWasDragged=false;
  }
 else {
    final int xDiff=Math.abs(x - mDownX);
    final int yDiff=Math.abs(y - mDownY);
    int touchSlop=ViewConfiguration.get(mContext).getScaledTouchSlop();
    if (Math.abs(yDiff) > touchSlop || Math.abs(xDiff) > touchSlop) {
      mLongPressWasDragged=true;
    }
  }
  return super.onTouchEvent(event);
}
