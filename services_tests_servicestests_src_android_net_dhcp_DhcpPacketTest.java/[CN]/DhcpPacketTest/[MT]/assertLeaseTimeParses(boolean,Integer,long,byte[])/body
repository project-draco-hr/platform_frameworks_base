{
  TestDhcpPacket testPacket=new TestDhcpPacket(DHCP_MESSAGE_TYPE_OFFER);
  if (leaseTimeBytes != null) {
    testPacket.setLeaseTimeBytes(leaseTimeBytes);
  }
  ByteBuffer packet=testPacket.build();
  DhcpPacket offerPacket=DhcpPacket.decodeFullPacket(packet,ENCAP_BOOTP);
  if (!expectValid) {
    assertNull(offerPacket);
    return;
  }
  assertEquals(rawLeaseTime,offerPacket.mLeaseTime);
  DhcpResults dhcpResults=offerPacket.toDhcpResults();
  assertEquals(leaseTimeMillis,offerPacket.getLeaseTimeMillis());
}
