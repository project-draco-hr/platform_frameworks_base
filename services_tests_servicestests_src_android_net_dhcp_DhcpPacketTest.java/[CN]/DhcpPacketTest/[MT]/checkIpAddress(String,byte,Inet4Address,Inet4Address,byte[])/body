{
  ByteBuffer packet=new TestDhcpPacket(type,clientIp,yourIp).setNetmaskBytes(netmaskBytes).build();
  DhcpPacket offerPacket=DhcpPacket.decodeFullPacket(packet,ENCAP_BOOTP);
  DhcpResults results=offerPacket.toDhcpResults();
  if (expected != null) {
    LinkAddress expectedAddress=new LinkAddress(expected);
    assertEquals(expectedAddress,results.ipAddress);
  }
 else {
    assertNull(results);
  }
}
