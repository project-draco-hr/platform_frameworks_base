{
  ArrayList<ServiceRecord> services=new ArrayList<>();
  ArrayMap<ComponentName,ServiceRecord> alls=getServices(tr.userId);
  for (int i=alls.size() - 1; i >= 0; i--) {
    ServiceRecord sr=alls.valueAt(i);
    if (sr.packageName.equals(component.getPackageName())) {
      services.add(sr);
    }
  }
  for (int i=services.size() - 1; i >= 0; i--) {
    ServiceRecord sr=services.get(i);
    if (sr.startRequested) {
      if ((sr.serviceInfo.flags & ServiceInfo.FLAG_STOP_WITH_TASK) != 0) {
        Slog.i(TAG,"Stopping service " + sr.shortName + ": remove task");
        stopServiceLocked(sr);
      }
 else {
        sr.pendingStarts.add(new ServiceRecord.StartItem(sr,true,sr.makeNextStartId(),baseIntent,null));
        if (sr.app != null && sr.app.thread != null) {
          try {
            sendServiceArgsLocked(sr,true,false);
          }
 catch (          TransactionTooLargeException e) {
          }
        }
      }
    }
  }
}
