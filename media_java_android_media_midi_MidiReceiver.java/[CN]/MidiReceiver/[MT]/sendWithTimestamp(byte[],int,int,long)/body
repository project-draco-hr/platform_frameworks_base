{
  int messageSize=getMaxMessageSize();
  while (count > 0) {
    int length=(count > messageSize ? messageSize : count);
    onReceive(msg,offset,length,timestamp);
    offset+=length;
    count-=length;
  }
}
