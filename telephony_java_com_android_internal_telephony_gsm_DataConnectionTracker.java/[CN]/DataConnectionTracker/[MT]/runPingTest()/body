{
  int status=-1;
  try {
    String address=Settings.Gservices.getString(mResolver,Settings.Gservices.PDP_WATCHDOG_PING_ADDRESS);
    int deadline=Settings.Gservices.getInt(mResolver,Settings.Gservices.PDP_WATCHDOG_PING_DEADLINE,DEFAULT_PING_DEADLINE);
    if (DBG)     log("pinging " + address + " for "+ deadline+ "s");
    if (address != null && !NULL_IP.equals(address)) {
      Process p=Runtime.getRuntime().exec("ping -c 1 -i 1 -w " + deadline + " "+ address);
      status=p.waitFor();
    }
  }
 catch (  IOException e) {
    Log.w(LOG_TAG,"ping failed: IOException");
  }
catch (  Exception e) {
    Log.w(LOG_TAG,"exception trying to ping");
  }
  if (status == 0) {
    EventLog.writeEvent(TelephonyEventLog.EVENT_LOG_PDP_RESET,-1);
    mPdpResetCount=0;
    sendMessage(obtainMessage(EVENT_START_NETSTAT_POLL));
  }
 else {
    sendMessage(obtainMessage(EVENT_START_RECOVERY));
  }
}
