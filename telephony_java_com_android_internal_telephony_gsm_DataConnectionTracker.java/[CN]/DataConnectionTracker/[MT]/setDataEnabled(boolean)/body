{
  boolean isEnabled=isEnabled(Phone.APN_TYPE_DEFAULT);
  Log.d(LOG_TAG,"setDataEnabled(" + enable + ") isEnabled="+ isEnabled);
  if (!isEnabled && enable) {
    setEnabled(Phone.APN_TYPE_DEFAULT,true);
    return trySetupData(Phone.REASON_DATA_ENABLED);
  }
 else   if (!enable) {
    setEnabled(Phone.APN_TYPE_DEFAULT,false);
    if (!isApnTypeActive(Phone.APN_TYPE_MMS) || !isEnabled(Phone.APN_TYPE_MMS)) {
      cleanUpConnection(true,Phone.REASON_DATA_DISABLED);
      return true;
    }
    return false;
  }
 else   return true;
}
