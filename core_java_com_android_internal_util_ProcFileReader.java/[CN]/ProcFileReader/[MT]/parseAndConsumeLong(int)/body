{
  final boolean negative=mBuffer[0] == '-';
  long result=0;
  for (int i=negative ? 1 : 0; i < tokenIndex; i++) {
    final int digit=mBuffer[i] - '0';
    if (digit < 0 || digit > 9) {
      throw invalidLong(tokenIndex);
    }
    final long next=result * 10 - digit;
    if (next > result) {
      throw invalidLong(tokenIndex);
    }
    result=next;
  }
  consumeBuf(tokenIndex + 1);
  return negative ? result : -result;
}
