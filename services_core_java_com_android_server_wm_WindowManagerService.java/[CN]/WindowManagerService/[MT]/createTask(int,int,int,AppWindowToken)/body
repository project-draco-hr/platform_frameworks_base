{
  if (DEBUG_STACK)   Slog.i(TAG,"createTask: taskId=" + taskId + " stackId="+ stackId+ " atoken="+ atoken);
  final TaskStack stack=mStackIdToStack.get(stackId);
  if (stack == null) {
    throw new IllegalArgumentException("addAppToken: invalid stackId=" + stackId);
  }
  EventLog.writeEvent(EventLogTags.WM_TASK_CREATED,taskId,stackId);
  Task task=new Task(atoken,stack,userId);
  mTaskIdToTask.put(taskId,task);
  stack.addTask(task,!atoken.mLaunchTaskBehind);
  return task;
}
