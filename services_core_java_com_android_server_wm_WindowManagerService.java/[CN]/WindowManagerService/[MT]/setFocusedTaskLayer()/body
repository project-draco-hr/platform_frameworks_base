{
  mFocusedTaskLayer=0;
  if (mFocusedApp != null) {
    final WindowList windows=mFocusedApp.allAppWindows;
    for (int i=windows.size() - 1; i >= 0; --i) {
      final WindowState win=windows.get(i);
      final int animLayer=win.mWinAnimator.mAnimLayer;
      if (win.mAttachedWindow == null && win.isVisibleLw() && animLayer > mFocusedTaskLayer) {
        mFocusedTaskLayer=animLayer + LAYER_OFFSET_FOCUSED_TASK;
      }
    }
  }
  if (DEBUG_LAYERS)   Slog.v(TAG,"Setting FocusedTaskFrame to layer=" + mFocusedTaskLayer);
  mFocusedTaskFrame.setLayer(mFocusedTaskLayer);
}
