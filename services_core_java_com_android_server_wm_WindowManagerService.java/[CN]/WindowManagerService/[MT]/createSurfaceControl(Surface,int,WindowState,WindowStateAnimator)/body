{
  if (!win.mHasSurface) {
    result|=RELAYOUT_RES_SURFACE_CHANGED;
  }
  WindowSurfaceController surfaceController=winAnimator.createSurfaceLocked();
  if (surfaceController != null) {
    surfaceController.getSurface(outSurface);
    if (SHOW_TRANSACTIONS)     Slog.i(TAG_WM,"  OUT SURFACE " + outSurface + ": copied");
  }
 else {
    outSurface.release();
  }
  return result;
}
