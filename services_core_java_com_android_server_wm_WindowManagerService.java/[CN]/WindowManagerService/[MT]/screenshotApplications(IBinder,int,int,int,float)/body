{
  if (!checkCallingPermission(Manifest.permission.READ_FRAME_BUFFER,"screenshotApplications()")) {
    throw new SecurityException("Requires READ_FRAME_BUFFER permission");
  }
  try {
    Trace.traceBegin(Trace.TRACE_TAG_WINDOW_MANAGER,"screenshotApplications");
    return screenshotApplicationsInner(appToken,displayId,width,height,false,frameScale);
  }
  finally {
    Trace.traceEnd(Trace.TRACE_TAG_WINDOW_MANAGER);
  }
}
