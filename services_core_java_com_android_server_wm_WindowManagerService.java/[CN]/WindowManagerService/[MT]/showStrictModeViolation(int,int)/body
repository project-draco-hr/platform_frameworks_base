{
  final boolean on=arg != 0;
synchronized (mWindowMap) {
    if (on) {
      boolean isVisible=false;
      final int numDisplays=mDisplayContents.size();
      for (int displayNdx=0; displayNdx < numDisplays; ++displayNdx) {
        final WindowList windows=mDisplayContents.valueAt(displayNdx).getWindowList();
        final int numWindows=windows.size();
        for (int winNdx=0; winNdx < numWindows; ++winNdx) {
          final WindowState ws=windows.get(winNdx);
          if (ws.mSession.mPid == pid && ws.isVisibleLw()) {
            isVisible=true;
            break;
          }
        }
      }
      if (!isVisible) {
        return;
      }
    }
    if (SHOW_VERBOSE_TRANSACTIONS)     Slog.i(TAG_WM,">>> OPEN TRANSACTION showStrictModeViolation");
    SurfaceControl.openTransaction();
    try {
      if (mStrictModeFlash == null) {
        mStrictModeFlash=new StrictModeFlash(getDefaultDisplayContentLocked().getDisplay(),mFxSession);
      }
      mStrictModeFlash.setVisibility(on);
    }
  finally {
      SurfaceControl.closeTransaction();
      if (SHOW_VERBOSE_TRANSACTIONS)       Slog.i(TAG_WM,"<<< CLOSE TRANSACTION showStrictModeViolation");
    }
  }
}
