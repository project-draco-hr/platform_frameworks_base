{
  final int taskId=task.taskId;
  final TaskStack stack=task.mStack;
  if (stack.isAnimating()) {
    if (DEBUG_STACK)     Slog.i(TAG,"removeTask: deferring removing taskId=" + taskId);
    task.mDeferRemoval=true;
    return;
  }
  if (DEBUG_STACK)   Slog.i(TAG,"removeTask: removing taskId=" + taskId);
  EventLog.writeEvent(EventLogTags.WM_TASK_REMOVED,taskId,"removeTask");
  task.mDeferRemoval=false;
  task.mStack.removeTask(task);
  mTaskIdToTask.delete(task.taskId);
}
