{
  Trace.traceBegin(Trace.TRACE_TAG_WINDOW_MANAGER,"repositionChild");
  long origId=Binder.clearCallingIdentity();
  try {
synchronized (mWindowMap) {
      WindowState win=windowForClientLocked(session,client,false);
      if (win == null) {
        return;
      }
      if (win.mAttachedWindow == null) {
        throw new IllegalArgumentException("repositionChild called but window is not" + "attached to a parent win=" + win);
      }
      win.mAttrs.x=left;
      win.mAttrs.y=top;
      win.mAttrs.width=right - left;
      win.mAttrs.height=bottom - top;
      win.setWindowScale(win.mRequestedWidth,win.mRequestedHeight);
      win.mWinAnimator.computeShownFrameLocked();
      if (SHOW_TRANSACTIONS) {
        Slog.i(TAG,">>> OPEN TRANSACTION repositionChild");
      }
      SurfaceControl.openTransaction();
      if (deferTransactionUntilFrame > 0) {
        win.mWinAnimator.mSurfaceController.deferTransactionUntil(win.mAttachedWindow.mWinAnimator.mSurfaceController.getHandle(),deferTransactionUntilFrame);
      }
      win.mWinAnimator.setSurfaceBoundariesLocked(false);
      SurfaceControl.closeTransaction();
      if (SHOW_TRANSACTIONS) {
        Slog.i(TAG,"<<< CLOSE TRANSACTION repositionChild");
      }
      outFrame=win.mCompatFrame;
    }
  }
  finally {
    Binder.restoreCallingIdentity(origId);
    Trace.traceEnd(Trace.TRACE_TAG_WINDOW_MANAGER);
  }
}
