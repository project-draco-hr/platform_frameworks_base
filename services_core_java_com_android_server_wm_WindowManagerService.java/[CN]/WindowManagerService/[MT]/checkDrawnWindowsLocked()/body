{
  if (mWaitingForDrawn.isEmpty() || mWaitingForDrawnCallback == null) {
    return;
  }
  for (int j=mWaitingForDrawn.size() - 1; j >= 0; j--) {
    WindowState win=mWaitingForDrawn.get(j);
    if (DEBUG_SCREEN_ON)     Slog.i(TAG_WM,"Waiting for drawn " + win + ": removed="+ win.mRemoved+ " visible="+ win.isVisibleLw()+ " mHasSurface="+ win.mHasSurface+ " drawState="+ win.mWinAnimator.mDrawState);
    if (win.mRemoved || !win.mHasSurface || !win.mPolicyVisibility) {
      if (DEBUG_SCREEN_ON)       Slog.w(TAG_WM,"Aborted waiting for drawn: " + win);
      mWaitingForDrawn.remove(win);
    }
 else     if (win.hasDrawnLw()) {
      if (DEBUG_SCREEN_ON)       Slog.d(TAG_WM,"Window drawn win=" + win);
      mWaitingForDrawn.remove(win);
    }
  }
  if (mWaitingForDrawn.isEmpty()) {
    if (DEBUG_SCREEN_ON)     Slog.d(TAG_WM,"All windows drawn!");
    mH.removeMessages(H.WAITING_FOR_DRAWN_TIMEOUT);
    mH.sendEmptyMessage(H.ALL_WINDOWS_DRAWN);
  }
}
