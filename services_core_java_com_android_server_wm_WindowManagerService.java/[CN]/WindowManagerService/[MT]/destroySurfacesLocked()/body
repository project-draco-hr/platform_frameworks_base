{
  boolean wallpaperDestroyed=false;
  for (int i=mDestroySurface.size() - 1; i >= 0; i--) {
    WindowState win=mDestroySurface.get(i);
    win.mDestroying=false;
    if (mInputMethodWindow == win) {
      mInputMethodWindow=null;
    }
    if (mWallpaperControllerLocked.isWallpaperTarget(win)) {
      wallpaperDestroyed=true;
    }
    if (!win.shouldSaveSurface()) {
      win.mWinAnimator.destroySurfaceLocked();
    }
  }
  mDestroySurface.clear();
  return wallpaperDestroyed;
}
