{
  if (DEBUG_LAYERS)   Slog.v(TAG,"Setting im layer adj to " + adj);
  mInputMethodAnimLayerAdjustment=adj;
  WindowState imw=mInputMethodWindow;
  if (imw != null) {
    imw.mWinAnimator.mAnimLayer=imw.mLayer + adj;
    if (DEBUG_LAYERS)     Slog.v(TAG,"IM win " + imw + " anim layer: "+ imw.mWinAnimator.mAnimLayer);
    int wi=imw.mChildWindows.size();
    while (wi > 0) {
      wi--;
      WindowState cw=imw.mChildWindows.get(wi);
      cw.mWinAnimator.mAnimLayer=cw.mLayer + adj;
      if (DEBUG_LAYERS)       Slog.v(TAG,"IM win " + cw + " anim layer: "+ cw.mWinAnimator.mAnimLayer);
    }
  }
  int di=mInputMethodDialogs.size();
  while (di > 0) {
    di--;
    imw=mInputMethodDialogs.get(di);
    imw.mWinAnimator.mAnimLayer=imw.mLayer + adj;
    if (DEBUG_LAYERS)     Slog.v(TAG,"IM win " + imw + " anim layer: "+ imw.mWinAnimator.mAnimLayer);
  }
}
