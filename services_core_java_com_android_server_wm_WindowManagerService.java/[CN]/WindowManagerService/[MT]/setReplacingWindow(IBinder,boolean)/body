{
synchronized (mWindowMap) {
    AppWindowToken appWindowToken=findAppWindowToken(token);
    if (appWindowToken == null || !appWindowToken.isVisible()) {
      Slog.w(TAG_WM,"Attempted to set replacing window on non-existing app token " + token);
      return;
    }
    if (DEBUG_ADD_REMOVE)     Slog.d(TAG_WM,"Marking app token " + appWindowToken + " as replacing window.");
    appWindowToken.mWillReplaceWindow=true;
    appWindowToken.mHasReplacedWindow=false;
    appWindowToken.mAnimateReplacingWindow=animate;
    if (animate) {
      if (DEBUG_APP_TRANSITIONS)       Slog.v(TAG_WM,"setReplacingWindow() Setting dummy animation on: " + appWindowToken);
      appWindowToken.mAppAnimator.setDummyAnimation();
    }
  }
}
