{
synchronized (mWindowMap) {
    if (!mDisplayReady) {
      return null;
    }
    Configuration config=computeNewConfigurationLocked();
    if (mWaitingForConfig) {
      mWaitingForConfig=false;
      mLastFinishedFreezeSource="new-config";
      performLayoutAndPlaceSurfacesLocked();
    }
    return config;
  }
}
