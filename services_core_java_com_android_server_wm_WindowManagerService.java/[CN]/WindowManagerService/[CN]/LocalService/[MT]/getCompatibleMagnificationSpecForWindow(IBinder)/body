{
synchronized (mWindowMap) {
    WindowState windowState=mWindowMap.get(windowToken);
    if (windowState == null) {
      return null;
    }
    MagnificationSpec spec=null;
    if (mAccessibilityController != null) {
      spec=mAccessibilityController.getMagnificationSpecForWindowLocked(windowState);
    }
    if ((spec == null || spec.isNop()) && windowState.mGlobalScale == 1.0f) {
      return null;
    }
    spec=(spec == null) ? MagnificationSpec.obtain() : MagnificationSpec.obtain(spec);
    spec.scale*=windowState.mGlobalScale;
    return spec;
  }
}
