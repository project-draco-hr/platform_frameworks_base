{
  try {
    IUsageStats usageStatsService=IUsageStats.Stub.asInterface(ServiceManager.getService("usagestats"));
    if (usageStatsService == null) {
      return new HashMap<String,Integer>();
    }
    UsageStats.PackageStats[] allPkgUsageStats=usageStatsService.getAllPkgUsageStats(ActivityThread.currentPackageName());
    if (allPkgUsageStats == null) {
      return new HashMap<String,Integer>();
    }
    Map<String,Integer> launchCounts=new HashMap<String,Integer>();
    for (    UsageStats.PackageStats pkgUsageStats : allPkgUsageStats) {
      launchCounts.put(pkgUsageStats.getPackageName(),pkgUsageStats.getLaunchCount());
    }
    return launchCounts;
  }
 catch (  RemoteException e) {
    Log.w(TAG,"Could not query launch counts",e);
    return new HashMap<String,Integer>();
  }
}
