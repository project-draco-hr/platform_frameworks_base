{
  if (uid == 0 || uid == Process.SYSTEM_UID) {
    return PackageManager.PERMISSION_GRANTED;
  }
  if (UserId.isIsolated(uid)) {
    return PackageManager.PERMISSION_DENIED;
  }
  if (owningUid >= 0 && UserId.isSameApp(uid,owningUid)) {
    return PackageManager.PERMISSION_GRANTED;
  }
  if (!exported) {
    Slog.w(TAG,"Permission denied: checkComponentPermission() owningUid=" + owningUid);
    return PackageManager.PERMISSION_DENIED;
  }
  if (permission == null) {
    return PackageManager.PERMISSION_GRANTED;
  }
  try {
    return AppGlobals.getPackageManager().checkUidPermission(permission,uid);
  }
 catch (  RemoteException e) {
    Slog.e(TAG,"PackageManager is dead?!?",e);
  }
  return PackageManager.PERMISSION_DENIED;
}
