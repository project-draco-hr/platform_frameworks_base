{
  Object srcPixel, dstPixel;
  int xorRGB=xorcolor.getRGB();
  int srcRGB, dstRGB;
  for (int sy=srcY, dy=dstY, srcYMax=srcY + height; sy < srcYMax; sy++, dy++) {
    for (int sx=srcX, dx=dstX, srcXMax=srcX + width; sx < srcXMax; sx++, dx++) {
      srcPixel=srcRast.getDataElements(sx,sy,null);
      dstPixel=dstRast.getDataElements(dx,dy,null);
      srcRGB=srcCM.getRGB(srcPixel);
      dstRGB=dstCM.getRGB(dstPixel);
      dstRGB=srcRGB ^ xorRGB ^ dstRGB;
      dstRGB=0xff000000 | dstRGB;
      dstPixel=dstCM.getDataElements(dstRGB,dstPixel);
      dstRast.setDataElements(dx,dy,dstPixel);
    }
  }
}
