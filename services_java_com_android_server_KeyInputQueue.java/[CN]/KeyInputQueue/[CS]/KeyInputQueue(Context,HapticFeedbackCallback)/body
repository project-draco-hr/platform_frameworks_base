{
  if (MEASURE_LATENCY) {
    lt=new LatencyTimer(100,1000);
  }
  BAD_TOUCH_HACK=context.getResources().getBoolean(com.android.internal.R.bool.config_filterTouchEvents);
  mHapticFeedbackCallback=hapticFeedbackCallback;
  readExcludedDevices();
  PowerManager pm=(PowerManager)context.getSystemService(Context.POWER_SERVICE);
  mWakeLock=pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,"KeyInputQueue");
  mWakeLock.setReferenceCounted(false);
  mFirst=new QueuedEvent();
  mLast=new QueuedEvent();
  mFirst.next=mLast;
  mLast.prev=mFirst;
  mThread.start();
}
