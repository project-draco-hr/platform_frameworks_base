{
  if (MEASURE_LATENCY) {
    lt=new LatencyTimer(100,1000);
  }
  Resources r=context.getResources();
  BAD_TOUCH_HACK=r.getBoolean(com.android.internal.R.bool.config_filterTouchEvents);
  JUMPY_TOUCH_HACK=r.getBoolean(com.android.internal.R.bool.config_filterJumpyTouchEvents);
  mHapticFeedbackCallback=hapticFeedbackCallback;
  if (!WindowManagerService.ENABLE_NATIVE_INPUT_DISPATCH) {
    readExcludedDevices();
  }
  PowerManager pm=(PowerManager)context.getSystemService(Context.POWER_SERVICE);
  mWakeLock=pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,"KeyInputQueue");
  mWakeLock.setReferenceCounted(false);
  mFirst=new QueuedEvent();
  mLast=new QueuedEvent();
  mFirst.next=mLast;
  mLast.prev=mFirst;
  if (!WindowManagerService.ENABLE_NATIVE_INPUT_DISPATCH) {
    mThread.start();
  }
}
