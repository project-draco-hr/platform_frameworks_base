{
synchronized (mFirst) {
    config.touchscreen=Configuration.TOUCHSCREEN_NOTOUCH;
    config.keyboard=Configuration.KEYBOARD_NOKEYS;
    config.navigation=Configuration.NAVIGATION_NONAV;
    final int N=mDevices.size();
    for (int i=0; i < N; i++) {
      InputDevice d=mDevices.valueAt(i);
      if (d != null) {
        if ((d.classes & RawInputEvent.CLASS_TOUCHSCREEN) != 0) {
          config.touchscreen=Configuration.TOUCHSCREEN_FINGER;
        }
        if ((d.classes & RawInputEvent.CLASS_ALPHAKEY) != 0) {
          config.keyboard=Configuration.KEYBOARD_QWERTY;
        }
        if ((d.classes & RawInputEvent.CLASS_TRACKBALL) != 0) {
          config.navigation=Configuration.NAVIGATION_TRACKBALL;
        }
 else         if ((d.classes & RawInputEvent.CLASS_DPAD) != 0) {
          config.navigation=Configuration.NAVIGATION_DPAD;
        }
      }
    }
  }
}
