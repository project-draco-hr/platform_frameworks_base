{
  if (node.isLeaf()) {
    throw new ParsingException("Leaf node not expected for HomeSP");
  }
  Credential credential=new Credential();
  for (  PPSNode child : node.getChildren()) {
switch (child.getName()) {
case NODE_USERNAME_PASSWORD:
      credential.userCredential=parseUserCredential(child);
    break;
case NODE_DIGITAL_CERTIFICATE:
  credential.certCredential=parseCertificateCredential(child);
break;
case NODE_REALM:
credential.realm=getPpsNodeValue(child);
break;
case NODE_SIM:
credential.simCredential=parseSimCredential(child);
break;
default :
throw new ParsingException("Unknown node under Credential: " + child.getName());
}
}
return credential;
}
