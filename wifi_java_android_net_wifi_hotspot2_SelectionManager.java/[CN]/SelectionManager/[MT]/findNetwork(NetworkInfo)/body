{
  NetworkKey networkKey=new NetworkKey(networkInfo.getSSID(),networkInfo.getBSSID(),networkInfo.getAnqpDomainID());
  ANQPData anqpData=mANQPCache.get(networkKey);
  List<ANQPElement> anqpElements=anqpData != null ? anqpData.getANQPElements() : null;
  for (  HomeSP homeSP : mHomeSPs) {
    PasspointMatch match=homeSP.match(networkInfo,anqpElements);
    if (match == PasspointMatch.HomeProvider || match == PasspointMatch.RoamingProvider) {
      mScoredNetworks.add(new ScoredNetwork(match,networkInfo));
    }
 else     if (match == PasspointMatch.Incomplete && networkInfo.getAnt() != null) {
      mPendingANQP.put(networkKey,networkInfo);
    }
  }
  Collections.sort(mScoredNetworks);
  if (!mScoredNetworks.isEmpty() && mScoredNetworks.get(0).getMatch() == PasspointMatch.HomeProvider) {
    return mScoredNetworks.get(0).getNetworkInfo();
  }
 else {
    return null;
  }
}
