{
  SmsMessageBase wrappedMessage;
  int activePhone=TelephonyManager.getDefault().getPhoneType();
  if (PHONE_TYPE_CDMA == activePhone) {
    wrappedMessage=com.android.internal.telephony.cdma.SmsMessage.newFromCDS(line);
  }
 else {
    wrappedMessage=com.android.internal.telephony.gsm.SmsMessage.newFromCDS(line);
  }
  return new SmsMessage(wrappedMessage);
}
