{
  SmsMessageBase wrappedMessage;
  if (FORMAT_3GPP2.equals(format)) {
    wrappedMessage=com.android.internal.telephony.cdma.SmsMessage.createFromPdu(pdu);
  }
 else   if (FORMAT_3GPP.equals(format)) {
    wrappedMessage=com.android.internal.telephony.gsm.SmsMessage.createFromPdu(pdu);
  }
 else {
    Log.e(LOG_TAG,"createFromPdu(): unsupported message format " + format);
    return null;
  }
  return new SmsMessage(wrappedMessage);
}
