{
  PositionTesterContextMenuListener menuListener=new PositionTesterContextMenuListener();
  mExpandableListView.setOnCreateContextMenuListener(menuListener);
  int index=0;
  for (int i=0; i < mExpandableListView.getHeaderViewsCount(); i++) {
    menuListener.expectAdapterContextMenu(i);
    mListUtil.arrowScrollToSelectedPosition(index);
    View headerChild=mExpandableListView.getChildAt(index - mExpandableListView.getFirstVisiblePosition());
    mExpandableListView.showContextMenuForChild(headerChild);
    index++;
  }
  int groupCount=mAdapter.getGroupCount();
  for (int groupIndex=0; groupIndex < groupCount; groupIndex++) {
    expandGroup(groupIndex,index);
    menuListener.expectGroupContextMenu(groupIndex);
    mListUtil.arrowScrollToSelectedPosition(index);
    View groupChild=mExpandableListView.getChildAt(index - mExpandableListView.getFirstVisiblePosition());
    mExpandableListView.showContextMenuForChild(groupChild);
    index++;
    final int childrenCount=mAdapter.getChildrenCount(groupIndex);
    for (int childIndex=0; childIndex < childrenCount; childIndex++) {
      mListUtil.arrowScrollToSelectedPosition(index);
      menuListener.expectChildContextMenu(groupIndex,childIndex);
      View child=mExpandableListView.getChildAt(index - mExpandableListView.getFirstVisiblePosition());
      mExpandableListView.showContextMenuForChild(child);
      index++;
    }
  }
  for (int i=0; i < mExpandableListView.getFooterViewsCount(); i++) {
    menuListener.expectAdapterContextMenu(index);
    mListUtil.arrowScrollToSelectedPosition(index);
    View footerChild=mExpandableListView.getChildAt(index - mExpandableListView.getFirstVisiblePosition());
    mExpandableListView.showContextMenuForChild(footerChild);
    index++;
  }
  mExpandableListView.setOnCreateContextMenuListener(null);
}
