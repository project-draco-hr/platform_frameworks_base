{
  final String init="(650) 123";
  final String expected1="(650) 123 4";
  TextWatcher textWatcher=getTextWatcher();
  SpannableStringBuilder number=new SpannableStringBuilder(init);
  textWatcher.beforeTextChanged(number,9,0,2);
  number.insert(9," 4");
  Selection.setSelection(number,number.length());
  textWatcher.onTextChanged(number,9,0,2);
  textWatcher.afterTextChanged(number);
  assertEquals(expected1,number.toString());
  assertEquals(expected1.length(),Selection.getSelectionEnd(number));
  int len=number.length();
  textWatcher.beforeTextChanged(number,0,len,0);
  number.delete(0,len);
  textWatcher.onTextChanged(number,0,len,0);
  textWatcher.afterTextChanged(number);
  final String expected2="650-1234";
  number=new SpannableStringBuilder(init);
  textWatcher.beforeTextChanged(number,9,0,1);
  number.insert(9,"4");
  Selection.setSelection(number,number.length());
  textWatcher.onTextChanged(number,9,0,1);
  textWatcher.afterTextChanged(number);
  assertEquals(expected2,number.toString());
  assertEquals(expected2.length(),Selection.getSelectionEnd(number));
}
