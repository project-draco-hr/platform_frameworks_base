{
  TextWatcher textWatcher=getTextWatcher();
  SpannableStringBuilder number=new SpannableStringBuilder(init);
  textWatcher.beforeTextChanged(number,0,init.length(),replacement.length());
  number.replace(0,init.length(),replacement,0,replacement.length());
  Selection.setSelection(number,replacement.length());
  textWatcher.onTextChanged(number,0,init.length(),replacement.length());
  textWatcher.afterTextChanged(number);
  assertEquals(expected,number.toString());
  assertEquals(expected.length(),Selection.getSelectionEnd(number));
}
