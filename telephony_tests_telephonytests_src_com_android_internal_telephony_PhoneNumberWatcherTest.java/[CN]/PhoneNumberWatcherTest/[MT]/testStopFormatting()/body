{
  final String init="(650) 123";
  final String expected1="(650) 123 4";
  TextWatcher textWatcher=getTextWatcher();
  SpannableStringBuilder number=new SpannableStringBuilder(init);
  textWatcher.beforeTextChanged(number,9,0,2);
  number.insert(9," 4");
  Selection.setSelection(number,number.length());
  textWatcher.onTextChanged(number,9,0,2);
  textWatcher.afterTextChanged(number);
  assertEquals(expected1,number.toString());
  assertEquals(expected1.length(),Selection.getSelectionEnd(number));
  final String expected2="(650 123";
  textWatcher=getTextWatcher();
  number=new SpannableStringBuilder(init);
  textWatcher.beforeTextChanged(number,4,1,0);
  number.delete(4,5);
  Selection.setSelection(number,5);
  textWatcher.onTextChanged(number,4,1,0);
  textWatcher.afterTextChanged(number);
  assertEquals(expected2,number.toString());
  assertEquals(5,Selection.getSelectionEnd(number));
  final String expected3="(650) 12-3";
  textWatcher=getTextWatcher();
  number=new SpannableStringBuilder(init);
  textWatcher.beforeTextChanged(number,8,0,1);
  number.insert(8,"-");
  Selection.setSelection(number,9);
  textWatcher.onTextChanged(number,8,0,1);
  textWatcher.afterTextChanged(number);
  assertEquals(expected3,number.toString());
  assertEquals(9,Selection.getSelectionEnd(number));
}
