{
  if (mGravityVector == null || mMagneticFieldVector == null) {
    return;
  }
  float[] deviceRotationMatrix=new float[9];
  if (!SensorManager.getRotationMatrix(deviceRotationMatrix,null,mGravityVector,mMagneticFieldVector)) {
    return;
  }
  float[] rotationAngles=new float[3];
  SensorManager.getOrientation(deviceRotationMatrix,rotationAngles);
  double alpha=Math.toDegrees(-rotationAngles[0]);
  while (alpha < 0.0) {
    alpha+=360.0;
  }
  double beta=Math.toDegrees(-rotationAngles[1]);
  while (beta < -180.0) {
    beta+=360.0;
  }
  double gamma=Math.toDegrees(rotationAngles[2]);
  while (gamma < -90.0) {
    gamma+=360.0;
  }
  maybeSendChange(alpha,beta,gamma);
}
