{
  if (SPEW)   Slog.d(TAG,"performCollapse: mExpanded=" + mExpanded + " mExpandedVisible="+ mExpandedVisible+ " mTicking="+ mTicking);
  if (!mExpandedVisible) {
    return;
  }
  mExpandedVisible=false;
  visibilityChanged(false);
  mExpandedParams.flags|=WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE;
  mExpandedParams.flags&=~WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM;
  mExpandedDialog.getWindow().setAttributes(mExpandedParams);
  mTrackingView.setVisibility(View.GONE);
  mExpandedView.setVisibility(View.GONE);
  if ((mDisabled & StatusBarManager.DISABLE_NOTIFICATION_ICONS) == 0) {
    setNotificationIconVisibility(true,com.android.internal.R.anim.fade_in);
  }
  if (mDateView.getVisibility() == View.VISIBLE) {
    setDateViewVisibility(false,com.android.internal.R.anim.fade_out);
  }
  if (!mExpanded) {
    return;
  }
  mExpanded=false;
}
