{
  ArrayList<ModuleProperties> modules=new ArrayList<>();
  int status=SoundTrigger.listModules(modules);
  mTelephonyManager=telephonyManager;
  mPhoneStateListener=new MyCallStateListener();
  if (status != SoundTrigger.STATUS_OK || modules.size() == 0) {
    Slog.w(TAG,"listModules status=" + status + ", # of modules="+ modules.size());
    moduleProperties=null;
    mModule=null;
  }
 else {
    moduleProperties=modules.get(0);
    mModule=SoundTrigger.attachModule(moduleProperties.id,this,null);
  }
}
