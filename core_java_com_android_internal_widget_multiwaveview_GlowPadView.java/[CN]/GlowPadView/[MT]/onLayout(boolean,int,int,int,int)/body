{
  super.onLayout(changed,left,top,right,bottom);
  final int width=right - left;
  final int height=bottom - top;
  final float placementWidth=Math.max(mOuterRing.getWidth(),2 * mOuterRadius);
  final float placementHeight=Math.max(mOuterRing.getHeight(),2 * mOuterRadius);
  float newWaveCenterX=mHorizontalInset + Math.max(width,mMaxTargetWidth + placementWidth) / 2;
  float newWaveCenterY=mVerticalInset + Math.max(height,+mMaxTargetHeight + placementHeight) / 2;
  if (mInitialLayout) {
    stopAndHideWaveAnimation();
    hideTargets(false,false);
    mInitialLayout=false;
  }
  mOuterRing.setPositionX(newWaveCenterX);
  mOuterRing.setPositionY(newWaveCenterY);
  mHandleDrawable.setPositionX(newWaveCenterX);
  mHandleDrawable.setPositionY(newWaveCenterY);
  updateTargetPositions(newWaveCenterX,newWaveCenterY);
  updatePointCloudPosition(newWaveCenterX,newWaveCenterY);
  updateGlowPosition(newWaveCenterX,newWaveCenterY);
  mWaveCenterX=newWaveCenterX;
  mWaveCenterY=newWaveCenterY;
  if (DEBUG)   dump();
}
