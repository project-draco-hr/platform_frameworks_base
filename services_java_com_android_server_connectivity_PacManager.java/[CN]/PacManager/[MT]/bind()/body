{
  if (mContext == null) {
    Log.e(TAG,"No context for binding");
    return;
  }
  Intent intent=new Intent();
  intent.setClassName(PAC_PACKAGE,PAC_SERVICE);
  if ((mProxyConnection != null) && (mConnection != null)) {
    if (mLastPort != -1) {
      sendPacBroadcast(new ProxyProperties(mPacUrl,mLastPort));
    }
 else {
      Log.e(TAG,"Received invalid port from Local Proxy," + " PAC will not be operational");
    }
    return;
  }
  mConnection=new ServiceConnection(){
    @Override public void onServiceDisconnected(    ComponentName component){
synchronized (mProxyLock) {
        mProxyService=null;
      }
    }
    @Override public void onServiceConnected(    ComponentName component,    IBinder binder){
synchronized (mProxyLock) {
        try {
          Log.d(TAG,"Adding service " + PAC_SERVICE_NAME + " "+ binder.getInterfaceDescriptor());
        }
 catch (        RemoteException e1) {
          Log.e(TAG,"Remote Exception",e1);
        }
        ServiceManager.addService(PAC_SERVICE_NAME,binder);
        mProxyService=IProxyService.Stub.asInterface(binder);
        if (mProxyService == null) {
          Log.e(TAG,"No proxy service");
        }
 else {
          try {
            mProxyService.startPacSystem();
          }
 catch (          RemoteException e) {
            Log.e(TAG,"Unable to reach ProxyService - PAC will not be started",e);
          }
          IoThread.getHandler().post(mPacDownloader);
        }
      }
    }
  }
;
  mContext.bindService(intent,mConnection,Context.BIND_AUTO_CREATE | Context.BIND_NOT_FOREGROUND | Context.BIND_NOT_VISIBLE);
  intent=new Intent();
  intent.setClassName(PROXY_PACKAGE,PROXY_SERVICE);
  mProxyConnection=new ServiceConnection(){
    @Override public void onServiceDisconnected(    ComponentName component){
    }
    @Override public void onServiceConnected(    ComponentName component,    IBinder binder){
      IProxyCallback callbackService=IProxyCallback.Stub.asInterface(binder);
      if (callbackService != null) {
        try {
          callbackService.getProxyPort(new IProxyPortListener.Stub(){
            @Override public void setProxyPort(            int port) throws RemoteException {
              if (mLastPort != -1) {
                mHasSentBroadcast=false;
              }
              mLastPort=port;
              if (port != -1) {
                Log.d(TAG,"Local proxy is bound on " + port);
                sendProxyIfNeeded();
              }
 else {
                Log.e(TAG,"Received invalid port from Local Proxy," + " PAC will not be operational");
              }
            }
          }
);
        }
 catch (        RemoteException e) {
          e.printStackTrace();
        }
      }
    }
  }
;
  mContext.bindService(intent,mProxyConnection,Context.BIND_AUTO_CREATE | Context.BIND_NOT_FOREGROUND | Context.BIND_NOT_VISIBLE);
}
