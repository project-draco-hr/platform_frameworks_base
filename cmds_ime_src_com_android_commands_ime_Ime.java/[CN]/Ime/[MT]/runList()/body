{
  String opt;
  boolean all=false;
  boolean brief=false;
  while ((opt=nextOption()) != null) {
    if (opt.equals("-a")) {
      all=true;
    }
 else     if (opt.equals("-s")) {
      brief=true;
    }
 else {
      System.err.println("Error: Unknown option: " + opt);
      showUsage();
      return;
    }
  }
  List<InputMethodInfo> methods;
  if (!all) {
    try {
      methods=mImm.getEnabledInputMethodList();
    }
 catch (    RemoteException e) {
      System.err.println(e.toString());
      System.err.println(IMM_NOT_RUNNING_ERR);
      return;
    }
  }
 else {
    try {
      methods=mImm.getInputMethodList();
    }
 catch (    RemoteException e) {
      System.err.println(e.toString());
      System.err.println(IMM_NOT_RUNNING_ERR);
      return;
    }
  }
  if (methods != null) {
    Printer pr=new PrintStreamPrinter(System.out);
    for (int i=0; i < methods.size(); i++) {
      InputMethodInfo imi=methods.get(i);
      if (brief) {
        System.out.println(imi.getId());
      }
 else {
        System.out.println(imi.getId() + ":");
        imi.dump(pr,"  ");
      }
    }
  }
}
