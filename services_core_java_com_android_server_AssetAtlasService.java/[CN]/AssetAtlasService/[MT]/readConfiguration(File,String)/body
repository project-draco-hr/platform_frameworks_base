{
  BufferedReader reader=null;
  Configuration config=null;
  try {
    reader=new BufferedReader(new InputStreamReader(new FileInputStream(file)));
    if (checkBuildIdentifier(reader,versionName)) {
      Atlas.Type type=Atlas.Type.valueOf(reader.readLine());
      int width=readInt(reader,MIN_SIZE,MAX_SIZE);
      int height=readInt(reader,MIN_SIZE,MAX_SIZE);
      int count=readInt(reader,0,Integer.MAX_VALUE);
      int flags=readInt(reader,Integer.MIN_VALUE,Integer.MAX_VALUE);
      config=new Configuration(type,width,height,count,flags);
    }
  }
 catch (  IllegalArgumentException e) {
    Log.w(LOG_TAG,"Invalid parameter value in " + file,e);
  }
catch (  FileNotFoundException e) {
    Log.w(LOG_TAG,"Could not read " + file,e);
  }
catch (  IOException e) {
    Log.w(LOG_TAG,"Could not read " + file,e);
  }
 finally {
    if (reader != null) {
      try {
        reader.close();
      }
 catch (      IOException e) {
      }
    }
  }
  return config;
}
