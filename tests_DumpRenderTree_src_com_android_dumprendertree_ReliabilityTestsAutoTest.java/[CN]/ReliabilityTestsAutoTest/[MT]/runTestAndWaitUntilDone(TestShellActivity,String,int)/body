{
  activity.setCallback(new TestShellCallback(){
    public void finished(){
synchronized (ReliabilityTestsAutoTest.this) {
        finished=true;
        ReliabilityTestsAutoTest.this.notifyAll();
      }
    }
    public void timedOut(    String url){
      writeTimeoutFile(url);
    }
  }
);
  finished=false;
  Intent intent=new Intent(Intent.ACTION_VIEW);
  intent.setClass(activity,TestShellActivity.class);
  intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
  intent.putExtra(TestShellActivity.TEST_URL,url);
  intent.putExtra(TestShellActivity.TIMEOUT_IN_MILLIS,timeout);
  activity.startActivity(intent);
synchronized (this) {
    while (!finished) {
      try {
        this.wait();
      }
 catch (      InterruptedException e) {
      }
    }
  }
}
