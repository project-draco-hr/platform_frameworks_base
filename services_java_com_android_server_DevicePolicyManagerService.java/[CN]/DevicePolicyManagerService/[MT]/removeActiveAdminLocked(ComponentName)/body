{
  final ActiveAdmin admin=getActiveAdminUncheckedLocked(adminReceiver);
  if (admin != null) {
    sendAdminCommandLocked(admin,DeviceAdminReceiver.ACTION_DEVICE_ADMIN_DISABLED,new BroadcastReceiver(){
      @Override public void onReceive(      Context context,      Intent intent){
synchronized (DevicePolicyManagerService.this) {
          boolean doProxyCleanup=admin.info.usesPolicy(DeviceAdminInfo.USES_POLICY_SETS_GLOBAL_PROXY);
          mAdminList.remove(admin);
          mAdminMap.remove(adminReceiver);
          validatePasswordOwnerLocked();
          syncDeviceCapabilitiesLocked();
          if (doProxyCleanup) {
            resetGlobalProxyLocked();
          }
          saveSettingsLocked();
          updateMaximumTimeToLockLocked();
        }
      }
    }
);
  }
}
