{
  mContext.enforceCallingOrSelfPermission(android.Manifest.permission.BIND_DEVICE_ADMIN,null);
  validateQualityConstant(quality);
synchronized (this) {
    if (mActivePasswordQuality != quality || mActivePasswordLength != length || mFailedPasswordAttempts != 0 || mActivePasswordLetters != letters || mActivePasswordUpperCase != uppercase || mActivePasswordLowerCase != lowercase || mActivePasswordNumeric != numbers || mActivePasswordSymbols != symbols || mActivePasswordNonLetter != nonletter) {
      long ident=Binder.clearCallingIdentity();
      try {
        mActivePasswordQuality=quality;
        mActivePasswordLength=length;
        mActivePasswordLetters=letters;
        mActivePasswordLowerCase=lowercase;
        mActivePasswordUpperCase=uppercase;
        mActivePasswordNumeric=numbers;
        mActivePasswordSymbols=symbols;
        mActivePasswordNonLetter=nonletter;
        mFailedPasswordAttempts=0;
        saveSettingsLocked();
        updatePasswordExpirationsLocked();
        sendAdminCommandLocked(DeviceAdminReceiver.ACTION_PASSWORD_CHANGED,DeviceAdminInfo.USES_POLICY_LIMIT_PASSWORD);
      }
  finally {
        Binder.restoreCallingIdentity(ident);
      }
    }
  }
}
