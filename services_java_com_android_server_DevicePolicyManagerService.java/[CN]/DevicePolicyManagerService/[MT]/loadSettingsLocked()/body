{
  JournaledFile journal=makeJournaledFile();
  FileInputStream stream=null;
  File file=journal.chooseForRead();
  boolean success=false;
  try {
    stream=new FileInputStream(file);
    XmlPullParser parser=Xml.newPullParser();
    parser.setInput(stream,null);
    int type=parser.next();
    while (type != XmlPullParser.START_TAG) {
      type=parser.next();
    }
    String tag=parser.getName();
    if ("policies".equals(tag)) {
      ActiveAdmin ap=null;
      do {
        type=parser.next();
        if (type == XmlPullParser.START_TAG) {
          tag=parser.getName();
          if (ap == null) {
            if ("admin".equals(tag)) {
              DeviceAdminInfo dai=findAdmin(ComponentName.unflattenFromString(parser.getAttributeValue(null,"name")));
              if (dai != null) {
                ap=new ActiveAdmin(dai);
              }
            }
          }
 else           if ("password-mode".equals(tag)) {
            ap.passwordMode=Integer.parseInt(parser.getAttributeValue(null,"value"));
          }
 else           if ("min-password-length".equals(tag)) {
            ap.minimumPasswordLength=Integer.parseInt(parser.getAttributeValue(null,"value"));
          }
 else           if ("max-time-to-unlock".equals(tag)) {
            ap.maximumTimeToUnlock=Long.parseLong(parser.getAttributeValue(null,"value"));
          }
        }
 else         if (type == XmlPullParser.END_TAG) {
          tag=parser.getName();
          if (ap != null && "admin".equals(tag)) {
            mActiveAdmin=ap;
            ap=null;
          }
        }
      }
 while (type != XmlPullParser.END_DOCUMENT);
      success=true;
    }
  }
 catch (  NullPointerException e) {
    Log.w(TAG,"failed parsing " + file + " "+ e);
  }
catch (  NumberFormatException e) {
    Log.w(TAG,"failed parsing " + file + " "+ e);
  }
catch (  XmlPullParserException e) {
    Log.w(TAG,"failed parsing " + file + " "+ e);
  }
catch (  IOException e) {
    Log.w(TAG,"failed parsing " + file + " "+ e);
  }
catch (  IndexOutOfBoundsException e) {
    Log.w(TAG,"failed parsing " + file + " "+ e);
  }
  try {
    if (stream != null) {
      stream.close();
    }
  }
 catch (  IOException e) {
  }
  if (!success) {
    Log.w(TAG,"No valid start tag found in policies file");
  }
  long timeMs=getMaximumTimeToLock();
  if (timeMs <= 0) {
    timeMs=Integer.MAX_VALUE;
  }
  try {
    getIPowerManager().setMaximumScreenOffTimeount((int)timeMs);
  }
 catch (  RemoteException e) {
    Log.w(TAG,"Failure talking with power manager",e);
  }
}
