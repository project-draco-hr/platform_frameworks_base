{
  enforceCrossUserPermission(userHandle);
synchronized (this) {
    getActiveAdminForCallerLocked(null,DeviceAdminInfo.USES_POLICY_WIPE_DATA);
    long ident=Binder.clearCallingIdentity();
    try {
      if (userHandle == UserHandle.USER_OWNER) {
        wipeDataLocked(flags);
      }
 else {
        lockNowUnchecked();
        mHandler.post(new Runnable(){
          public void run(){
            try {
              ActivityManagerNative.getDefault().switchUser(0);
              ((UserManager)mContext.getSystemService(Context.USER_SERVICE)).removeUser(userHandle);
            }
 catch (            RemoteException re) {
            }
          }
        }
);
      }
    }
  finally {
      Binder.restoreCallingIdentity(ident);
    }
  }
}
