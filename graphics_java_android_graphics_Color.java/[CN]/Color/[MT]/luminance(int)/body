{
  double red=Color.red(color) / 255.0;
  red=red < 0.03928 ? red / 12.92 : Math.pow((red + 0.055) / 1.055,2.4);
  double green=Color.green(color) / 255.0;
  green=green < 0.03928 ? green / 12.92 : Math.pow((green + 0.055) / 1.055,2.4);
  double blue=Color.blue(color) / 255.0;
  blue=blue < 0.03928 ? blue / 12.92 : Math.pow((blue + 0.055) / 1.055,2.4);
  return (float)((0.2126 * red) + (0.7152 * green) + (0.0722 * blue));
}
