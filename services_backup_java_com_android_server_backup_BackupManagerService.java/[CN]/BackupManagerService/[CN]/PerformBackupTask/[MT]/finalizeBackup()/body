{
  addBackupTrace("finishing");
  if (mJournal != null && !mJournal.delete()) {
    Slog.e(TAG,"Unable to remove backup journal file " + mJournal);
  }
  if ((mCurrentToken == 0) && (mStatus == BackupTransport.TRANSPORT_OK)) {
    addBackupTrace("success; recording token");
    try {
      mCurrentToken=mTransport.getCurrentRestoreSet();
      writeRestoreTokens();
    }
 catch (    RemoteException e) {
      addBackupTrace("transport threw returning token");
    }
  }
synchronized (mQueueLock) {
    mBackupRunning=false;
    if (mStatus == BackupTransport.TRANSPORT_NOT_INITIALIZED) {
      clearMetadata();
      if (MORE_DEBUG)       Slog.d(TAG,"Server requires init; rerunning");
      addBackupTrace("init required; rerunning");
      backupNow();
    }
  }
  clearBackupTrace();
  Slog.i(BackupManagerService.TAG,"Backup pass finished.");
  mWakelock.release();
}
