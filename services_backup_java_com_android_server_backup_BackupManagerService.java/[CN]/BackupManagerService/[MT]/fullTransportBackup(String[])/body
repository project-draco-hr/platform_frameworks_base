{
  mContext.enforceCallingPermission(android.Manifest.permission.BACKUP,"fullTransportBackup");
  final int callingUserHandle=UserHandle.getCallingUserId();
  if (callingUserHandle != UserHandle.USER_OWNER) {
    throw new IllegalStateException("Restore supported only for the device owner");
  }
  if (DEBUG) {
    Slog.d(TAG,"fullTransportBackup()");
  }
  AtomicBoolean latch=new AtomicBoolean(false);
  PerformFullTransportBackupTask task=new PerformFullTransportBackupTask(null,pkgNames,false,null,latch);
  (new Thread(task,"full-transport-master")).start();
synchronized (latch) {
    try {
      while (latch.get() == false) {
        latch.wait();
      }
    }
 catch (    InterruptedException e) {
    }
  }
  if (DEBUG) {
    Slog.d(TAG,"Done with full transport backup.");
  }
}
