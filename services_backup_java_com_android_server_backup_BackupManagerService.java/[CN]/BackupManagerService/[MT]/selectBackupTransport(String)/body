{
  mContext.enforceCallingOrSelfPermission(android.Manifest.permission.BACKUP,"selectBackupTransport");
synchronized (mTransports) {
    String prevTransport=null;
    if (mTransports.get(transport) != null) {
      final long oldId=Binder.clearCallingIdentity();
      try {
        prevTransport=mCurrentTransport;
        mCurrentTransport=transport;
        Settings.Secure.putString(mContext.getContentResolver(),Settings.Secure.BACKUP_TRANSPORT,transport);
      }
  finally {
        Binder.restoreCallingIdentity(oldId);
      }
      Slog.v(TAG,"selectBackupTransport() set " + mCurrentTransport + " returning "+ prevTransport);
    }
 else {
      Slog.w(TAG,"Attempt to select unavailable transport " + transport);
    }
    return prevTransport;
  }
}
