{
  if (MORE_DEBUG) {
    Slog.v(TAG,"opComplete: " + Integer.toHexString(token) + " result="+ result);
  }
  Operation op=null;
synchronized (mCurrentOpLock) {
    op=mCurrentOperations.get(token);
    if (op != null) {
      op.state=OP_ACKNOWLEDGED;
    }
    mCurrentOpLock.notifyAll();
  }
  if (op != null && op.callback != null) {
    Message msg=mBackupHandler.obtainMessage(MSG_OP_COMPLETE,op.callback);
    msg.arg1=(result > Integer.MAX_VALUE) ? Integer.MAX_VALUE : (int)result;
    mBackupHandler.sendMessage(msg);
  }
}
