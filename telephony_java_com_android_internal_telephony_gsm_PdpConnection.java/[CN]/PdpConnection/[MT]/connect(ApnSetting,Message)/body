{
  if (DBG)   log("Connecting to carrier: '" + apn.carrier + "' APN: '"+ apn.apn+ "' proxy: '"+ apn.proxy+ "' port: '"+ apn.port);
  setHttpProxy(apn.proxy,apn.port);
  state=State.ACTIVATING;
  this.apn=apn;
  onConnectCompleted=onCompleted;
  createTime=-1;
  lastFailTime=-1;
  lastFailCause=FailCause.NONE;
  receivedDisconnectReq=false;
  int authType=apn.authType;
  if (authType == -1) {
    authType=(apn.user != null) ? RILConstants.SETUP_DATA_AUTH_PAP_CHAP : RILConstants.SETUP_DATA_AUTH_NONE;
  }
  phone.mCM.setupDataCall(Integer.toString(RILConstants.SETUP_DATA_TECH_GSM),Integer.toString(RILConstants.DATA_PROFILE_DEFAULT),apn.apn,apn.user,apn.password,Integer.toString(authType),obtainMessage(EVENT_SETUP_DATA_CONNECTION_DONE));
}
