{
  final int action=event.getAction();
  final boolean interceptHover=onInterceptHoverEvent(event);
  event.setAction(action);
  View newHoveredChild=null;
  if (!interceptHover && action != MotionEvent.ACTION_HOVER_EXIT) {
    final float x=event.getX();
    final float y=event.getY();
    final int childrenCount=mChildrenCount;
    if (childrenCount != 0) {
      final View[] children=mChildren;
      for (int i=childrenCount - 1; i >= 0; i--) {
        final View child=children[i];
        if (canViewReceivePointerEvents(child) && isTransformedTouchPointInView(x,y,child,null)) {
          newHoveredChild=child;
          break;
        }
      }
    }
  }
  MotionEvent eventNoHistory=event;
  boolean handled=false;
  if (mHoveredChild == newHoveredChild) {
    if (newHoveredChild != null) {
      handled|=dispatchTransformedGenericPointerEvent(event,newHoveredChild);
    }
  }
 else {
    if (mHoveredChild != null) {
      if (action == MotionEvent.ACTION_HOVER_EXIT) {
        handled|=dispatchTransformedGenericPointerEvent(event,mHoveredChild);
      }
 else {
        if (action == MotionEvent.ACTION_HOVER_MOVE) {
          dispatchTransformedGenericPointerEvent(event,mHoveredChild);
        }
        eventNoHistory=obtainMotionEventNoHistoryOrSelf(eventNoHistory);
        eventNoHistory.setAction(MotionEvent.ACTION_HOVER_EXIT);
        dispatchTransformedGenericPointerEvent(eventNoHistory,mHoveredChild);
        eventNoHistory.setAction(action);
      }
      mHoveredChild=null;
    }
    if (newHoveredChild != null) {
      if (action == MotionEvent.ACTION_HOVER_ENTER) {
        handled|=dispatchTransformedGenericPointerEvent(event,newHoveredChild);
        mHoveredChild=newHoveredChild;
      }
 else       if (action == MotionEvent.ACTION_HOVER_MOVE) {
        eventNoHistory=obtainMotionEventNoHistoryOrSelf(eventNoHistory);
        eventNoHistory.setAction(MotionEvent.ACTION_HOVER_ENTER);
        handled|=dispatchTransformedGenericPointerEvent(eventNoHistory,newHoveredChild);
        eventNoHistory.setAction(action);
        handled|=dispatchTransformedGenericPointerEvent(eventNoHistory,newHoveredChild);
        mHoveredChild=newHoveredChild;
      }
    }
  }
  boolean newHoveredSelf=!handled;
  if (newHoveredSelf == mHoveredSelf) {
    if (newHoveredSelf) {
      handled|=super.dispatchHoverEvent(event);
    }
  }
 else {
    if (mHoveredSelf) {
      if (action == MotionEvent.ACTION_HOVER_EXIT) {
        handled|=super.dispatchHoverEvent(event);
      }
 else {
        if (action == MotionEvent.ACTION_HOVER_MOVE) {
          super.dispatchHoverEvent(event);
        }
        eventNoHistory=obtainMotionEventNoHistoryOrSelf(eventNoHistory);
        eventNoHistory.setAction(MotionEvent.ACTION_HOVER_EXIT);
        super.dispatchHoverEvent(eventNoHistory);
        eventNoHistory.setAction(action);
      }
      mHoveredSelf=false;
    }
    if (newHoveredSelf) {
      if (action == MotionEvent.ACTION_HOVER_ENTER) {
        handled|=super.dispatchHoverEvent(event);
        mHoveredSelf=true;
      }
 else       if (action == MotionEvent.ACTION_HOVER_MOVE) {
        eventNoHistory=obtainMotionEventNoHistoryOrSelf(eventNoHistory);
        eventNoHistory.setAction(MotionEvent.ACTION_HOVER_ENTER);
        handled|=super.dispatchHoverEvent(eventNoHistory);
        eventNoHistory.setAction(action);
        handled|=super.dispatchHoverEvent(eventNoHistory);
        mHoveredSelf=true;
      }
    }
  }
  if (eventNoHistory != event) {
    eventNoHistory.recycle();
  }
  return handled;
}
