{
  if (enabled != mDrawLayers) {
    mDrawLayers=enabled;
    invalidate(true);
    boolean flushLayers=!enabled;
    AttachInfo info=mAttachInfo;
    if (info != null && info.mHardwareRenderer != null && info.mHardwareRenderer.isEnabled()) {
      if (!info.mHardwareRenderer.validate()) {
        flushLayers=false;
      }
    }
 else {
      flushLayers=false;
    }
    for (int i=0; i < mChildrenCount; i++) {
      View child=mChildren[i];
      if (child.mLayerType != LAYER_TYPE_NONE) {
        if (flushLayers)         child.flushLayer();
        child.invalidate(true);
      }
    }
  }
}
