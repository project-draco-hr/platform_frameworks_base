{
  if (enabled != mDrawLayers) {
    mDrawLayers=enabled;
    invalidate(true);
    AttachInfo info=mAttachInfo;
    if (info != null && info.mHardwareRenderer != null && info.mHardwareRenderer.isEnabled()) {
      if (!info.mHardwareRenderer.validate()) {
        enabled=false;
      }
    }
 else {
      enabled=false;
    }
    for (int i=0; i < mChildrenCount; i++) {
      View child=mChildren[i];
      if (child.mLayerType != LAYER_TYPE_NONE) {
        if (!enabled)         child.flushLayer();
        child.invalidate(true);
      }
    }
  }
}
