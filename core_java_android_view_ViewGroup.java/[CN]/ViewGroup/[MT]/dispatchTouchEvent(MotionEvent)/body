{
  final int action=ev.getAction();
  final float xf=ev.getX();
  final float yf=ev.getY();
  final float scrolledXFloat=xf + mScrollX;
  final float scrolledYFloat=yf + mScrollY;
  boolean disallowIntercept=(mGroupFlags & FLAG_DISALLOW_INTERCEPT) != 0;
  if (action == MotionEvent.ACTION_DOWN) {
    if (mMotionTarget != null) {
      mMotionTarget=null;
    }
    if (disallowIntercept || !onInterceptTouchEvent(ev)) {
      ev.setAction(MotionEvent.ACTION_DOWN);
      final View[] children=mChildren;
      final int count=mChildrenCount;
      for (int i=count - 1; i >= 0; i--) {
        final View child=children[i];
        if ((child.mViewFlags & VISIBILITY_MASK) == VISIBLE || child.getAnimation() != null) {
          if (child.dispatchTouchEvent(ev,scrolledXFloat,scrolledYFloat)) {
            mMotionTarget=child;
            return true;
          }
        }
      }
    }
  }
  boolean isUpOrCancel=(action == MotionEvent.ACTION_UP) || (action == MotionEvent.ACTION_CANCEL);
  if (isUpOrCancel) {
    mGroupFlags&=~FLAG_DISALLOW_INTERCEPT;
  }
  final View target=mMotionTarget;
  if (target == null) {
    ev.setLocation(xf,yf);
    if ((mPrivateFlags & CANCEL_NEXT_UP_EVENT) != 0) {
      ev.setAction(MotionEvent.ACTION_CANCEL);
      mPrivateFlags&=~CANCEL_NEXT_UP_EVENT;
    }
    return super.dispatchTouchEvent(ev);
  }
  if (!disallowIntercept && onInterceptTouchEvent(ev)) {
    final float xc=scrolledXFloat - (float)target.mLeft;
    final float yc=scrolledYFloat - (float)target.mTop;
    mPrivateFlags&=~CANCEL_NEXT_UP_EVENT;
    ev.setAction(MotionEvent.ACTION_CANCEL);
    ev.setLocation(xc,yc);
    if (!target.dispatchTouchEvent(ev)) {
    }
    mMotionTarget=null;
    return true;
  }
  if (isUpOrCancel) {
    mMotionTarget=null;
  }
  float xc;
  float yc;
  if (hasIdentityMatrix() || mAttachInfo == null) {
    xc=scrolledXFloat - (float)target.mLeft;
    yc=scrolledYFloat - (float)target.mTop;
  }
 else {
    final float[] localXY=mAttachInfo.mTmpTransformLocation;
    localXY[0]=scrolledXFloat;
    localXY[1]=scrolledYFloat;
    getInverseMatrix().mapPoints(localXY);
    xc=localXY[0] - (float)target.mLeft;
    yc=localXY[1] - (float)target.mTop;
  }
  ev.setLocation(xc,yc);
  if ((target.mPrivateFlags & CANCEL_NEXT_UP_EVENT) != 0) {
    ev.setAction(MotionEvent.ACTION_CANCEL);
    target.mPrivateFlags&=~CANCEL_NEXT_UP_EVENT;
    mMotionTarget=null;
  }
  return target.dispatchTouchEvent(ev);
}
