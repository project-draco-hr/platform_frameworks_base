{
  if (!onFilterTouchEventForSecurity(ev)) {
    return false;
  }
  if ((mGroupFlags & FLAG_SPLIT_MOTION_EVENTS) == FLAG_SPLIT_MOTION_EVENTS) {
    if (mSplitMotionTargets == null) {
      mSplitMotionTargets=new SplitMotionTargets();
    }
    return dispatchSplitTouchEvent(ev);
  }
  final int action=ev.getAction();
  final float xf=ev.getX();
  final float yf=ev.getY();
  final float scrolledXFloat=xf + mScrollX;
  final float scrolledYFloat=yf + mScrollY;
  boolean disallowIntercept=(mGroupFlags & FLAG_DISALLOW_INTERCEPT) != 0;
  if (action == MotionEvent.ACTION_DOWN) {
    if (mMotionTarget != null) {
      mMotionTarget=null;
    }
    if (disallowIntercept || !onInterceptTouchEvent(ev)) {
      ev.setAction(MotionEvent.ACTION_DOWN);
      final View[] children=mChildren;
      final int count=mChildrenCount;
      for (int i=count - 1; i >= 0; i--) {
        final View child=children[i];
        if ((child.mViewFlags & VISIBILITY_MASK) == VISIBLE || child.getAnimation() != null) {
          if (dispatchTouchEventIfInView(child,ev,0)) {
            mMotionTarget=child;
            return true;
          }
        }
      }
    }
  }
  boolean isUpOrCancel=(action == MotionEvent.ACTION_UP) || (action == MotionEvent.ACTION_CANCEL);
  if (isUpOrCancel) {
    mGroupFlags&=~FLAG_DISALLOW_INTERCEPT;
  }
  final View target=mMotionTarget;
  if (target == null) {
    ev.setLocation(xf,yf);
    if ((mPrivateFlags & CANCEL_NEXT_UP_EVENT) != 0) {
      ev.setAction(MotionEvent.ACTION_CANCEL);
      mPrivateFlags&=~CANCEL_NEXT_UP_EVENT;
    }
    return super.dispatchTouchEvent(ev);
  }
  float xc=scrolledXFloat - (float)target.mLeft;
  float yc=scrolledYFloat - (float)target.mTop;
  if (!target.hasIdentityMatrix() && mAttachInfo != null) {
    final float[] localXY=mAttachInfo.mTmpTransformLocation;
    localXY[0]=xc;
    localXY[1]=yc;
    target.getInverseMatrix().mapPoints(localXY);
    xc=localXY[0];
    yc=localXY[1];
  }
  if (!disallowIntercept && onInterceptTouchEvent(ev)) {
    mPrivateFlags&=~CANCEL_NEXT_UP_EVENT;
    ev.setAction(MotionEvent.ACTION_CANCEL);
    ev.setLocation(xc,yc);
    if (!target.dispatchTouchEvent(ev)) {
    }
    mMotionTarget=null;
    return true;
  }
  if (isUpOrCancel) {
    mMotionTarget=null;
  }
  ev.setLocation(xc,yc);
  if ((target.mPrivateFlags & CANCEL_NEXT_UP_EVENT) != 0) {
    ev.setAction(MotionEvent.ACTION_CANCEL);
    target.mPrivateFlags&=~CANCEL_NEXT_UP_EVENT;
    mMotionTarget=null;
  }
  if (target.dispatchTouchEvent(ev)) {
    return true;
  }
 else {
    ev.setLocation(xf,yf);
  }
  return false;
}
