{
  ViewParent parent=this;
  final AttachInfo attachInfo=mAttachInfo;
  if (attachInfo != null) {
    if (child.mLayerType != LAYER_TYPE_NONE) {
      child.mLocalDirtyRect.union(dirty);
    }
    int left=child.mLeft;
    int top=child.mTop;
    if (!child.getMatrix().isIdentity()) {
      child.transformRect(dirty);
    }
    do {
      if (parent instanceof ViewGroup) {
        ViewGroup parentVG=(ViewGroup)parent;
        if (parentVG.mLayerType != LAYER_TYPE_NONE) {
          parentVG.invalidate();
          parent=null;
        }
 else {
          parent=parentVG.damageChildInParent(left,top,dirty);
          left=parentVG.mLeft;
          top=parentVG.mTop;
        }
      }
 else {
        final int[] location=attachInfo.mInvalidateChildLocation;
        location[0]=left;
        location[1]=top;
        parent=parent.invalidateChildInParent(location,dirty);
      }
    }
 while (parent != null);
  }
}
