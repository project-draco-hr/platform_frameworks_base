{
  if (mLayoutMode == UNDEFINED_LAYOUT_MODE) {
    ViewParent parent=getParent();
    if (parent instanceof ViewGroup) {
      ViewGroup viewGroup=(ViewGroup)parent;
      return viewGroup.getLayoutMode();
    }
 else {
      int targetSdkVersion=mContext.getApplicationInfo().targetSdkVersion;
      boolean preJellyBean=targetSdkVersion < Build.VERSION_CODES.JELLY_BEAN;
      return preJellyBean ? COMPONENT_BOUNDS : LAYOUT_BOUNDS;
    }
  }
  return mLayoutMode;
}
