{
  if (!attachEglContext()) {
    return false;
  }
  try {
    if (!mTexNamesGenerated) {
      GLES10.glGenTextures(1,mTexNames,0);
      if (checkGlErrors("glGenTextures")) {
        return false;
      }
      mTexNamesGenerated=true;
    }
    final SurfaceTexture st=new SurfaceTexture(mTexNames[0]);
    final Surface s=new Surface(st);
    try {
      SurfaceControl.screenshot(SurfaceControl.getBuiltInDisplay(SurfaceControl.BUILT_IN_DISPLAY_ID_MAIN),s);
    }
  finally {
      s.release();
    }
    st.updateTexImage();
    st.getTransformMatrix(mTexMatrix);
    mTexCoordBuffer.put(0,0f);
    mTexCoordBuffer.put(1,0f);
    mTexCoordBuffer.put(2,0f);
    mTexCoordBuffer.put(3,1f);
    mTexCoordBuffer.put(4,1f);
    mTexCoordBuffer.put(5,1f);
    mTexCoordBuffer.put(6,1f);
    mTexCoordBuffer.put(7,0f);
    GLES10.glViewport(0,0,mDisplayWidth,mDisplayHeight);
    GLES10.glMatrixMode(GLES10.GL_PROJECTION);
    GLES10.glLoadIdentity();
    GLES10.glOrthof(0,mDisplayWidth,0,mDisplayHeight,0,1);
    GLES10.glMatrixMode(GLES10.GL_MODELVIEW);
    GLES10.glLoadIdentity();
    GLES10.glMatrixMode(GLES10.GL_TEXTURE);
    GLES10.glLoadIdentity();
    GLES10.glLoadMatrixf(mTexMatrix,0);
  }
  finally {
    detachEglContext();
  }
  return true;
}
