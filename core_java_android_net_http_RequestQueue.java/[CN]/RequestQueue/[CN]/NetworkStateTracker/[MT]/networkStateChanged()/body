{
  if (mConnectivityListener == null)   return;
  NetworkConnectivityListener.State connectivityState=mConnectivityListener.getState();
  NetworkInfo info=mConnectivityListener.getNetworkInfo();
  if (info == null) {
    HttpLog.v("NetworkStateTracker: connectivity broadcast" + " has null network info - ignoring");
    return;
  }
  NetworkInfo.State state=info.getState();
  if (HttpLog.LOGV) {
    HttpLog.v("NetworkStateTracker " + info.getTypeName() + " state= "+ state+ " last= "+ mLastNetworkState+ " connectivityState= "+ connectivityState.toString());
  }
  boolean newConnection=state != mLastNetworkState && state == NetworkInfo.State.CONNECTED;
  if (state == NetworkInfo.State.CONNECTED) {
    mCurrentNetworkType=info.getType();
    setProxyConfig();
  }
  mLastNetworkState=state;
  if (connectivityState == NetworkConnectivityListener.State.NOT_CONNECTED) {
    setNetworkState(false);
    broadcastState(false);
  }
 else   if (newConnection) {
    setNetworkState(true);
    broadcastState(true);
  }
}
