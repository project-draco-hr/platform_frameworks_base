{
  boolean oldFullscreen=mFullscreen;
  int rotation=Surface.ROTATION_0;
  final DisplayContent displayContent=mStack.getDisplayContent();
  if (displayContent != null) {
    displayContent.getLogicalDisplayRect(mTmpRect);
    rotation=displayContent.getDisplayInfo().rotation;
    if (bounds == null) {
      bounds=mTmpRect;
      mFullscreen=true;
    }
 else {
      if (!bounds.intersect(mTmpRect)) {
        return false;
      }
      mFullscreen=mTmpRect.equals(bounds);
    }
  }
  if (bounds == null) {
    return false;
  }
  if (mBounds.equals(bounds) && oldFullscreen == mFullscreen && mRotation == rotation) {
    return false;
  }
  mBounds.set(bounds);
  mRotation=rotation;
  updateDimLayer();
  updateOverrideConfiguration();
  return true;
}
