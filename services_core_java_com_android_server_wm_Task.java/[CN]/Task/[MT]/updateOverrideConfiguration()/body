{
  final Configuration serviceConfig=mService.mCurConfiguration;
  if (mFullscreen) {
    mOverrideConfig=Configuration.EMPTY;
    return;
  }
  if (mOverrideConfig == Configuration.EMPTY) {
    mOverrideConfig=new Configuration();
  }
  final float density=serviceConfig.densityDpi * DisplayMetrics.DENSITY_DEFAULT_SCALE;
  mOverrideConfig.screenWidthDp=Math.min((int)(mBounds.width() / density),serviceConfig.screenWidthDp);
  mOverrideConfig.screenHeightDp=Math.min((int)(mBounds.height() / density),serviceConfig.screenHeightDp);
  mOverrideConfig.smallestScreenWidthDp=Math.min(mOverrideConfig.screenWidthDp,mOverrideConfig.screenHeightDp);
  mOverrideConfig.orientation=(mOverrideConfig.screenWidthDp <= mOverrideConfig.screenHeightDp) ? Configuration.ORIENTATION_PORTRAIT : Configuration.ORIENTATION_LANDSCAPE;
}
