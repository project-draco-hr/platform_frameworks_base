{
  if (config == null) {
    config=Configuration.EMPTY;
  }
  if (bounds == null && !Configuration.EMPTY.equals(config)) {
    throw new IllegalArgumentException("null bounds but non empty configuration: " + config);
  }
  if (bounds != null && Configuration.EMPTY.equals(config)) {
    throw new IllegalArgumentException("non null bounds, but empty configuration");
  }
  boolean oldFullscreen=mFullscreen;
  int rotation=Surface.ROTATION_0;
  final DisplayContent displayContent=mStack.getDisplayContent();
  if (displayContent != null) {
    displayContent.getLogicalDisplayRect(mTmpRect);
    rotation=displayContent.getDisplayInfo().rotation;
    mFullscreen=bounds == null;
    if (mFullscreen) {
      bounds=mTmpRect;
    }
  }
  if (bounds == null) {
    return BOUNDS_CHANGE_NONE;
  }
  if (mPreScrollBounds.equals(bounds) && oldFullscreen == mFullscreen && mRotation == rotation) {
    return BOUNDS_CHANGE_NONE;
  }
  int boundsChange=BOUNDS_CHANGE_NONE;
  if (mPreScrollBounds.left != bounds.left || mPreScrollBounds.top != bounds.top) {
    boundsChange|=BOUNDS_CHANGE_POSITION;
  }
  if (mPreScrollBounds.width() != bounds.width() || mPreScrollBounds.height() != bounds.height()) {
    boundsChange|=BOUNDS_CHANGE_SIZE;
  }
  mPreScrollBounds.set(bounds);
  resetScrollLocked();
  mRotation=rotation;
  if (displayContent != null) {
    displayContent.mDimLayerController.updateDimLayer(this);
  }
  mOverrideConfig=mFullscreen ? Configuration.EMPTY : config;
  return boundsChange;
}
