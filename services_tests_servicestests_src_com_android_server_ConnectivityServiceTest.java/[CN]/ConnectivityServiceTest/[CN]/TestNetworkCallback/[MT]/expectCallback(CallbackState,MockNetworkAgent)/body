{
  waitFor(mConditionVariable);
  assertEquals(state,mLastCallback);
  if (mockAgent != null) {
    assertEquals(mockAgent.getNetwork(),mLastNetwork);
  }
  mLastCallback=CallbackState.NONE;
  mLastNetwork=null;
  mConditionVariable.close();
}
