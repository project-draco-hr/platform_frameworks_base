{
  super.setUp();
  NetworkMonitor.SetDefaultLingerTime(120);
  if (Looper.myLooper() == null) {
    Looper.prepare();
  }
  mServiceContext=new MockContext(getContext());
  mService=new WrappedConnectivityService(mServiceContext,mock(INetworkManagementService.class),mock(INetworkStatsService.class),mock(INetworkPolicyManager.class));
  mService.systemReady();
  mCm=new WrappedConnectivityManager(getContext(),mService);
  mCm.bindProcessToNetwork(null);
}
