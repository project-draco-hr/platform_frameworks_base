{
synchronized (mLock) {
    boolean magnificationChanged=false;
    boolean boundsChanged=false;
    if (!mMagnifiedRegion.equals(magnified)) {
      mMagnifiedRegion.set(magnified);
      mMagnifiedRegion.getBounds(mMagnifiedBounds);
      boundsChanged=true;
    }
    mAvailableRegion.set(available);
    if (updateSpec) {
      final MagnificationSpec sentSpec=mSpecAnimationBridge.mSentMagnificationSpec;
      final float scale=sentSpec.scale;
      final float offsetX=sentSpec.offsetX;
      final float offsetY=sentSpec.offsetY;
      final float centerX=(mMagnifiedBounds.width() / 2.0f + mMagnifiedBounds.left - offsetX) / scale;
      final float centerY=(mMagnifiedBounds.height() / 2.0f + mMagnifiedBounds.top - offsetY) / scale;
      magnificationChanged=setScaleAndCenterLocked(scale,centerX,centerY,false);
    }
    if (boundsChanged && updateSpec && !magnificationChanged) {
      onMagnificationChangedLocked();
    }
  }
}
