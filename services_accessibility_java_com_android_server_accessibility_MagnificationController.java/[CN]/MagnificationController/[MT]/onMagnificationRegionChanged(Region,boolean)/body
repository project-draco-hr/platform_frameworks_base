{
synchronized (mLock) {
    boolean magnificationChanged=false;
    boolean boundsChanged=false;
    if (!mMagnificationRegion.equals(magnified)) {
      mMagnificationRegion.set(magnified);
      mMagnificationRegion.getBounds(mMagnificationBounds);
      boundsChanged=true;
    }
    if (updateSpec) {
      final MagnificationSpec sentSpec=mSpecAnimationBridge.mSentMagnificationSpec;
      final float scale=sentSpec.scale;
      final float offsetX=sentSpec.offsetX;
      final float offsetY=sentSpec.offsetY;
      final float centerX=(mMagnificationBounds.width() / 2.0f + mMagnificationBounds.left - offsetX) / scale;
      final float centerY=(mMagnificationBounds.height() / 2.0f + mMagnificationBounds.top - offsetY) / scale;
      magnificationChanged=setScaleAndCenterLocked(scale,centerX,centerY,false,INVALID_ID);
    }
    if (boundsChanged && updateSpec && !magnificationChanged) {
      onMagnificationChangedLocked();
    }
  }
}
