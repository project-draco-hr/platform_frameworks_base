{
  mStartFlags=0;
  mWaitOption=false;
  mStopOption=false;
  mRepeat=0;
  mProfileFile=null;
  mSamplingInterval=0;
  mAutoStop=false;
  mUserId=defUser;
  mStackId=INVALID_STACK_ID;
  return Intent.parseCommandArgs(mArgs,new Intent.CommandOptionHandler(){
    @Override public boolean handleOption(    String opt,    ShellCommand cmd){
      if (opt.equals("-D")) {
        mStartFlags|=ActivityManager.START_FLAG_DEBUG;
      }
 else       if (opt.equals("-N")) {
        mStartFlags|=ActivityManager.START_FLAG_NATIVE_DEBUGGING;
      }
 else       if (opt.equals("-W")) {
        mWaitOption=true;
      }
 else       if (opt.equals("-P")) {
        mProfileFile=nextArgRequired();
        mAutoStop=true;
      }
 else       if (opt.equals("--start-profiler")) {
        mProfileFile=nextArgRequired();
        mAutoStop=false;
      }
 else       if (opt.equals("--sampling")) {
        mSamplingInterval=Integer.parseInt(nextArgRequired());
      }
 else       if (opt.equals("-R")) {
        mRepeat=Integer.parseInt(nextArgRequired());
      }
 else       if (opt.equals("-S")) {
        mStopOption=true;
      }
 else       if (opt.equals("--track-allocation")) {
        mStartFlags|=ActivityManager.START_FLAG_TRACK_ALLOCATION;
      }
 else       if (opt.equals("--user")) {
        mUserId=parseUserArg(nextArgRequired());
      }
 else       if (opt.equals("--receiver-permission")) {
        mReceiverPermission=nextArgRequired();
      }
 else       if (opt.equals("--stack")) {
        mStackId=Integer.parseInt(nextArgRequired());
      }
 else {
        return false;
      }
      return true;
    }
  }
);
}
