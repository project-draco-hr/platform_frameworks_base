{
  String profileFile=null;
  boolean start=false;
  String process=nextArgRequired();
  ParcelFileDescriptor fd=null;
  String cmd=nextArgRequired();
  if ("start".equals(cmd)) {
    start=true;
    profileFile=nextArgRequired();
    try {
      fd=ParcelFileDescriptor.open(new File(profileFile),ParcelFileDescriptor.MODE_CREATE | ParcelFileDescriptor.MODE_TRUNCATE | ParcelFileDescriptor.MODE_READ_WRITE);
    }
 catch (    FileNotFoundException e) {
      System.err.println("Error: Unable to open file: " + profileFile);
      return;
    }
  }
 else   if (!"stop".equals(cmd)) {
    throw new IllegalArgumentException("Profile command " + cmd + " not valid");
  }
  if (!mAm.profileControl(process,start,profileFile,fd)) {
    throw new AndroidException("PROFILE FAILED on process " + process);
  }
}
