{
  String profileFile=null;
  boolean start=false;
  String process=nextArg();
  if (process == null) {
    System.err.println("Error: No profile process supplied");
    showUsage();
    return;
  }
  ParcelFileDescriptor fd=null;
  String cmd=nextArg();
  if ("start".equals(cmd)) {
    start=true;
    profileFile=nextArg();
    if (profileFile == null) {
      System.err.println("Error: No profile file path supplied");
      showUsage();
      return;
    }
    try {
      fd=ParcelFileDescriptor.open(new File(profileFile),ParcelFileDescriptor.MODE_CREATE | ParcelFileDescriptor.MODE_TRUNCATE | ParcelFileDescriptor.MODE_READ_WRITE);
    }
 catch (    FileNotFoundException e) {
      System.err.println("Error: Unable to open file: " + profileFile);
      return;
    }
  }
 else   if (!"stop".equals(cmd)) {
    System.err.println("Error: Profile command " + cmd + " not valid");
    showUsage();
    return;
  }
  try {
    if (!mAm.profileControl(process,start,profileFile,fd)) {
      System.err.println("PROFILE FAILED on process " + process);
      return;
    }
  }
 catch (  IllegalArgumentException e) {
    System.out.println("PROFILE FAILED: " + e.getMessage());
    return;
  }
catch (  IllegalStateException e) {
    System.out.println("PROFILE FAILED: " + e.getMessage());
    return;
  }
catch (  RemoteException e) {
    System.out.println("PROFILE FAILED: activity manager gone");
    return;
  }
}
