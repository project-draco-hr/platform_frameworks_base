{
  Intent intent=new Intent();
  boolean hasIntentInfo=false;
  mDebugOption=false;
  Uri data=null;
  String type=null;
  String opt;
  while ((opt=nextOption()) != null) {
    if (opt.equals("-a")) {
      intent.setAction(nextArgRequired());
      hasIntentInfo=true;
    }
 else     if (opt.equals("-d")) {
      data=Uri.parse(nextArgRequired());
      hasIntentInfo=true;
    }
 else     if (opt.equals("-t")) {
      type=nextArgRequired();
      hasIntentInfo=true;
    }
 else     if (opt.equals("-c")) {
      intent.addCategory(nextArgRequired());
      hasIntentInfo=true;
    }
 else     if (opt.equals("-e") || opt.equals("--es")) {
      String key=nextArgRequired();
      String value=nextArgRequired();
      intent.putExtra(key,value);
      hasIntentInfo=true;
    }
 else     if (opt.equals("--ei")) {
      String key=nextArgRequired();
      String value=nextArgRequired();
      intent.putExtra(key,Integer.valueOf(value));
      hasIntentInfo=true;
    }
 else     if (opt.equals("--ez")) {
      String key=nextArgRequired();
      String value=nextArgRequired();
      intent.putExtra(key,Boolean.valueOf(value));
      hasIntentInfo=true;
    }
 else     if (opt.equals("-n")) {
      String str=nextArgRequired();
      ComponentName cn=ComponentName.unflattenFromString(str);
      if (cn == null)       throw new IllegalArgumentException("Bad component name: " + str);
      intent.setComponent(cn);
      hasIntentInfo=true;
    }
 else     if (opt.equals("-f")) {
      String str=nextArgRequired();
      intent.setFlags(Integer.decode(str).intValue());
    }
 else     if (opt.equals("-D")) {
      mDebugOption=true;
    }
 else {
      System.err.println("Error: Unknown option: " + opt);
      showUsage();
      return null;
    }
  }
  intent.setDataAndType(data,type);
  String uri=nextArg();
  if (uri != null) {
    Intent oldIntent=intent;
    intent=Intent.getIntent(uri);
    if (oldIntent.getAction() != null) {
      intent.setAction(oldIntent.getAction());
    }
    if (oldIntent.getData() != null || oldIntent.getType() != null) {
      intent.setDataAndType(oldIntent.getData(),oldIntent.getType());
    }
    Set cats=oldIntent.getCategories();
    if (cats != null) {
      Iterator it=cats.iterator();
      while (it.hasNext()) {
        intent.addCategory((String)it.next());
      }
    }
    hasIntentInfo=true;
  }
  if (!hasIntentInfo)   throw new IllegalArgumentException("No intent supplied");
  return intent;
}
