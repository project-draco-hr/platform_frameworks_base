{
  int userId=UserHandle.USER_CURRENT;
  String opt;
  while ((opt=nextOption()) != null) {
    if (opt.equals("--user")) {
      userId=parseUserArg(nextArgRequired());
      if (userId == UserHandle.USER_ALL) {
        System.err.println("Error: Can't use user 'all'");
        return;
      }
    }
 else {
      System.err.println("Error: Unknown option: " + opt);
      return;
    }
  }
  String proc=nextArgRequired();
  String levelArg=nextArgRequired();
  int level;
switch (levelArg) {
case "HIDDEN":
    level=ComponentCallbacks2.TRIM_MEMORY_UI_HIDDEN;
  break;
case "RUNNING_MODERATE":
level=ComponentCallbacks2.TRIM_MEMORY_RUNNING_MODERATE;
break;
case "BACKGROUND":
level=ComponentCallbacks2.TRIM_MEMORY_BACKGROUND;
break;
case "RUNNING_LOW":
level=ComponentCallbacks2.TRIM_MEMORY_RUNNING_LOW;
break;
case "MODERATE":
level=ComponentCallbacks2.TRIM_MEMORY_MODERATE;
break;
case "RUNNING_CRITICAL":
level=ComponentCallbacks2.TRIM_MEMORY_RUNNING_CRITICAL;
break;
case "COMPLETE":
level=ComponentCallbacks2.TRIM_MEMORY_COMPLETE;
break;
default :
System.err.println("Error: Unknown level option: " + levelArg);
return;
}
if (!mAm.setProcessMemoryTrimLevel(proc,userId,level)) {
System.err.println("Error: Failure to set the level - probably Unknown Process: " + proc);
}
}
