{
  boolean wait=false;
  boolean force=false;
  String opt;
  while ((opt=nextOption()) != null) {
    if ("-w".equals(opt)) {
      wait=true;
    }
 else     if ("-f".equals(opt)) {
      force=true;
    }
 else {
      System.err.println("Error: unknown option: " + opt);
      return;
    }
  }
  int user=Integer.parseInt(nextArgRequired());
  StopUserCallback callback=wait ? new StopUserCallback() : null;
  int res=mAm.stopUser(user,force,callback);
  if (res != ActivityManager.USER_OP_SUCCESS) {
    String txt="";
switch (res) {
case ActivityManager.USER_OP_IS_CURRENT:
      txt=" (Can't stop current user)";
    break;
case ActivityManager.USER_OP_UNKNOWN_USER:
  txt=" (Unknown user " + user + ")";
break;
case ActivityManager.USER_OP_ERROR_IS_SYSTEM:
txt=" (System user cannot be stopped)";
break;
case ActivityManager.USER_OP_ERROR_RELATED_USERS_CANNOT_STOP:
txt=" (Can't stop user " + user + " - one of its related users can't be stopped)";
break;
}
System.err.println("Switch failed: " + res + txt);
}
 else if (callback != null) {
callback.waitForFinish();
}
}
