{
  if (entry == null) {
    throw new KeyStoreException("entry == null");
  }
  Credentials.deleteAllTypesForAlias(mKeyStore,alias);
  if (entry instanceof KeyStore.TrustedCertificateEntry) {
    KeyStore.TrustedCertificateEntry trE=(KeyStore.TrustedCertificateEntry)entry;
    engineSetCertificateEntry(alias,trE.getTrustedCertificate());
    return;
  }
  if (entry instanceof PrivateKeyEntry) {
    PrivateKeyEntry prE=(PrivateKeyEntry)entry;
    setPrivateKeyEntry(alias,prE.getPrivateKey(),prE.getCertificateChain(),param);
  }
 else   if (entry instanceof SecretKeyEntry) {
    SecretKeyEntry secE=(SecretKeyEntry)entry;
    setSecretKeyEntry(alias,secE.getSecretKey(),param);
  }
 else {
    throw new KeyStoreException("Entry must be a PrivateKeyEntry, SecretKeyEntry or TrustedCertificateEntry" + "; was " + entry);
  }
}
