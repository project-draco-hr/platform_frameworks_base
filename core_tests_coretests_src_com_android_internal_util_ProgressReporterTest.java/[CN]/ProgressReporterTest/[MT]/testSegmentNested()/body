{
  r.setProgress(20);
  assertProgress(20);
  assertRange(0,100);
  final int[] lastRange=r.startSegment(40);
  assertRange(20,40);
{
    r.setProgress(50);
    assertProgress(40);
    final int[] lastRange2=r.startSegment(25);
    assertRange(40,10);
{
      r.setProgress(0);
      assertProgress(40);
      r.setProgress(50);
      assertProgress(45);
      r.setProgress(100);
      assertProgress(50);
    }
    r.endSegment(lastRange2);
    assertProgress(50);
  }
  r.endSegment(lastRange);
  assertProgress(60);
}
