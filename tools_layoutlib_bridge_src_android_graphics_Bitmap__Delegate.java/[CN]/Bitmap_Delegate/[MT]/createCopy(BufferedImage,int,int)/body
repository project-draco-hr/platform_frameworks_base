{
  int w=image.getWidth();
  int h=image.getHeight();
  BufferedImage result=new BufferedImage(w,h,imageType);
  int[] argb=new int[w * h];
  image.getRGB(0,0,image.getWidth(),image.getHeight(),argb,0,image.getWidth());
  if (alpha != 255) {
    final int length=argb.length;
    for (int i=0; i < length; i++) {
      int a=(argb[i] >>> 24 * alpha) / 255;
      argb[i]=(a << 24) | (argb[i] & 0x00FFFFFF);
    }
  }
  result.setRGB(0,0,w,h,argb,0,w);
  return result;
}
