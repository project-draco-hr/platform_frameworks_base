{
  super(context);
  mIcon=params.getAppIcon();
  mTitle=params.getAppLabel();
  mContext=context;
  mMenuIds=new ArrayList<Integer>();
  ActionBarCallback callback=params.getProjectCallback().getActionBarCallback();
  mSplit=callback.getSplitActionBarWhenNarrow() & context.getResources().getBoolean(com.android.internal.R.bool.split_action_bar_is_narrow);
  mNavMode=callback.getNavigationMode();
  mShowHomeAsUp=callback.getHomeButtonStyle() == HomeButtonStyle.SHOW_HOME_AS_UP;
  mSubTitle=callback.getSubTitle();
  fillMenuIds(callback.getMenuIdNames());
  mMenuBuilder=new MenuBuilder(mContext);
  setOrientation(LinearLayout.HORIZONTAL);
  setGravity(Gravity.CENTER_VERTICAL);
  LayoutInflater inflater=(LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
  XmlPullParser parser=ParserFactory.create(getClass().getResourceAsStream("/bars/action_bar.xml"),"action_bar.xml");
  BridgeXmlBlockParser bridgeParser=new BridgeXmlBlockParser(parser,context,false);
  try {
    inflater.inflate(bridgeParser,this,true);
  }
  finally {
    bridgeParser.ensurePopped();
  }
  mActionBar=new ActionBarImpl(this);
  setUpActionBar();
}
