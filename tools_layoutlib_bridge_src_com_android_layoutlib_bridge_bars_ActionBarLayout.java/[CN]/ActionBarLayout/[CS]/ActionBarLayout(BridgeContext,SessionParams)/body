{
  super(context);
  setOrientation(LinearLayout.HORIZONTAL);
  setGravity(Gravity.CENTER_VERTICAL);
  LayoutInflater.from(context).inflate(R.layout.screen_action_bar,this,true);
  mActionBar=new WindowDecorActionBar(this);
  mBridgeContext=context;
  mThemedContext=mActionBar.getThemedContext();
  mCallback=params.getProjectCallback().getActionBarCallback();
  mIcon=params.getAppIcon();
  mTitle=params.getAppLabel();
  mSplit=context.getResources().getBoolean(R.bool.split_action_bar_is_narrow) && mCallback.getSplitActionBarWhenNarrow();
  mNavMode=mCallback.getNavigationMode();
  mShowHomeAsUp=mCallback.getHomeButtonStyle() == HomeButtonStyle.SHOW_HOME_AS_UP;
  mSubTitle=mCallback.getSubTitle();
  mMenuBuilder=new MenuBuilder(mThemedContext);
  res=mBridgeContext.getRenderResources();
  mPopupMaxWidth=Math.max(mBridgeContext.getMetrics().widthPixels / 2,mThemedContext.getResources().getDimensionPixelSize(R.dimen.config_prefDialogWidth));
  mActionBarView=(ActionBarView)findViewById(R.id.action_bar);
  mContentRoot=(FrameLayout)findViewById(android.R.id.content);
  setupActionBar();
}
