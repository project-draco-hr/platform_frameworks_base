{
  DisplayMetrics metrics=mBridgeContext.getMetrics();
  MenuBuilder menu=mActionBar.getMenuBuilder();
  OverflowMenuAdapter adapter=new OverflowMenuAdapter(menu,mActionBar.getPopupContext());
  LinearLayout layout=new LinearLayout(mActionBar.getPopupContext());
  RelativeLayout.LayoutParams layoutParams=new RelativeLayout.LayoutParams(measureContentWidth(adapter),LayoutParams.WRAP_CONTENT);
  layoutParams.addRule(RelativeLayout.ALIGN_PARENT_END);
  if (mActionBar.isSplit()) {
    layoutParams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
    layoutParams.bottomMargin=getPixelValue("-10dp",metrics);
  }
 else {
    layoutParams.topMargin=getPixelValue("-10dp",metrics);
  }
  layout.setLayoutParams(layoutParams);
  final TypedArray a=mActionBar.getPopupContext().obtainStyledAttributes(null,R.styleable.PopupWindow,R.attr.popupMenuStyle,0);
  layout.setBackground(a.getDrawable(R.styleable.PopupWindow_popupBackground));
  layout.setDividerDrawable(a.getDrawable(R.attr.actionBarDivider));
  a.recycle();
  layout.setOrientation(LinearLayout.VERTICAL);
  layout.setDividerPadding(getPixelValue("12dp",metrics));
  layout.setShowDividers(LinearLayout.SHOW_DIVIDER_MIDDLE);
  ListView listView=new ListView(mActionBar.getPopupContext(),null,R.attr.dropDownListViewStyle);
  listView.setAdapter(adapter);
  layout.addView(listView);
  return layout;
}
