{
  if (mProfileShapes == null) {
    final int elementCount=provider.getElementCount();
    final int frameCount=provider.getFrameCount();
    mProfileShapes=new float[elementCount][];
    for (int i=0; i < elementCount; i++) {
      mProfileShapes[i]=new float[frameCount * 4];
    }
    mProfilePaint=new Paint();
  }
  mProfilePaint.reset();
  if (provider.getGraphType() == GraphDataProvider.GRAPH_TYPE_LINES) {
    mProfilePaint.setAntiAlias(true);
  }
  if (mDisplayMetrics == null) {
    mDisplayMetrics=new DisplayMetrics();
  }
  attachInfo.mDisplay.getMetrics(mDisplayMetrics);
  provider.prepare(mDisplayMetrics);
}
