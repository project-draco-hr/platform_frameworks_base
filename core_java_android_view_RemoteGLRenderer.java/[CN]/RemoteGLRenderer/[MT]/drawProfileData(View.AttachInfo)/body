{
  if (mDebugDataProvider != null) {
    final GraphDataProvider provider=mDebugDataProvider;
    initProfileDrawData(attachInfo,provider);
    final int height=provider.getVerticalUnitSize();
    final int margin=provider.getHorizontaUnitMargin();
    final int width=provider.getHorizontalUnitSize();
    int x=0;
    int count=0;
    int current=0;
    final float[] data=provider.getData();
    final int elementCount=provider.getElementCount();
    final int graphType=provider.getGraphType();
    int totalCount=provider.getFrameCount() * elementCount;
    if (graphType == GraphDataProvider.GRAPH_TYPE_LINES) {
      totalCount-=elementCount;
    }
    for (int i=0; i < totalCount; i+=elementCount) {
      if (data[i] < 0.0f)       break;
      int index=count * 4;
      if (i == provider.getCurrentFrame() * elementCount)       current=index;
      x+=margin;
      int x2=x + width;
      int y2=mHeight;
      int y1=(int)(y2 - data[i] * height);
switch (graphType) {
case GraphDataProvider.GRAPH_TYPE_BARS:
{
          for (int j=0; j < elementCount; j++) {
            final float[] r=mProfileShapes[j];
            r[index]=x;
            r[index + 1]=y1;
            r[index + 2]=x2;
            r[index + 3]=y2;
            y2=y1;
            if (j < elementCount - 1) {
              y1=(int)(y2 - data[i + j + 1] * height);
            }
          }
        }
      break;
case GraphDataProvider.GRAPH_TYPE_LINES:
{
      for (int j=0; j < elementCount; j++) {
        final float[] r=mProfileShapes[j];
        r[index]=(x + x2) * 0.5f;
        r[index + 1]=index == 0 ? y1 : r[index - 1];
        r[index + 2]=r[index] + width;
        r[index + 3]=y1;
        y2=y1;
        if (j < elementCount - 1) {
          y1=(int)(y2 - data[i + j + 1] * height);
        }
      }
    }
  break;
}
x+=width;
count++;
}
x+=margin;
drawGraph(graphType,count);
drawCurrentFrame(graphType,current);
drawThreshold(x,height);
}
}
