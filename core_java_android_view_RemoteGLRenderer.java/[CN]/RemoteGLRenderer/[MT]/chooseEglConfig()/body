{
  EGLConfig[] configs=new EGLConfig[1];
  int[] configsCount=new int[1];
  int[] configSpec=getConfig(sDirtyRegions);
  final String debug=SystemProperties.get(PRINT_CONFIG_PROPERTY,"");
  if ("all".equalsIgnoreCase(debug)) {
    sEgl.eglChooseConfig(sEglDisplay,configSpec,null,0,configsCount);
    EGLConfig[] debugConfigs=new EGLConfig[configsCount[0]];
    sEgl.eglChooseConfig(sEglDisplay,configSpec,debugConfigs,configsCount[0],configsCount);
    for (    EGLConfig config : debugConfigs) {
      printConfig(config);
    }
  }
  if (!sEgl.eglChooseConfig(sEglDisplay,configSpec,configs,1,configsCount)) {
    throw new IllegalArgumentException("eglChooseConfig failed " + GLUtils.getEGLErrorString(sEgl.eglGetError()));
  }
 else   if (configsCount[0] > 0) {
    if ("choice".equalsIgnoreCase(debug)) {
      printConfig(configs[0]);
    }
    return configs[0];
  }
  return null;
}
