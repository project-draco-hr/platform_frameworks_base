{
  final VMRuntime runtime=VMRuntime.getRuntime();
  Debug.startAllocCounting();
  try {
    runtime.gcSoftReferences();
    runtime.runFinalizationSync();
    mResources=Resources.getSystem();
    mResources.startPreloading();
    if (PRELOAD_RESOURCES) {
      Log.i(TAG,"Preloading resources...");
      long startTime=SystemClock.uptimeMillis();
      TypedArray ar=mResources.obtainTypedArray(com.android.internal.R.array.preloaded_drawables);
      int N=preloadDrawables(runtime,ar);
      Log.i(TAG,"...preloaded " + N + " resources in "+ (SystemClock.uptimeMillis() - startTime)+ "ms.");
      startTime=SystemClock.uptimeMillis();
      ar=mResources.obtainTypedArray(com.android.internal.R.array.preloaded_color_state_lists);
      N=preloadColorStateLists(runtime,ar);
      Log.i(TAG,"...preloaded " + N + " resources in "+ (SystemClock.uptimeMillis() - startTime)+ "ms.");
    }
    mResources.finishPreloading();
  }
 catch (  RuntimeException e) {
    Log.w(TAG,"Failure preloading resources",e);
  }
 finally {
    Debug.stopAllocCounting();
  }
}
