{
  try {
    SamplingProfilerIntegration.start();
    registerZygoteSocket();
    EventLog.writeEvent(LOG_BOOT_PROGRESS_PRELOAD_START,SystemClock.uptimeMillis());
    preloadClasses();
    preloadResources();
    EventLog.writeEvent(LOG_BOOT_PROGRESS_PRELOAD_END,SystemClock.uptimeMillis());
    if (SamplingProfilerIntegration.isEnabled()) {
      SamplingProfiler sp=SamplingProfiler.getInstance();
      sp.pause();
      SamplingProfilerIntegration.writeZygoteSnapshot();
      sp.shutDown();
    }
    gc();
    if (argv.length != 2) {
      throw new RuntimeException("ZygoteInit.main expects two arguments");
    }
    if (argv[1].equals("true")) {
      startSystemServer();
    }
    Log.i(TAG,"Accepting command socket connections");
    if (ZYGOTE_FORK_MODE) {
      runForkMode();
    }
 else {
      runSelectLoopMode();
    }
    closeServerSocket();
  }
 catch (  MethodAndArgsCaller caller) {
    caller.run();
  }
catch (  RuntimeException ex) {
    Log.e(TAG,"Zygote died with exception",ex);
    closeServerSocket();
    throw ex;
  }
}
