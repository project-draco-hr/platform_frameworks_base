{
  BridgeXmlBlockParser parser=null;
  if (set instanceof BridgeXmlBlockParser) {
    parser=(BridgeXmlBlockParser)set;
  }
 else   if (set != null) {
    mLogger.error("Parser is not a BridgeXmlBlockParser!");
    return null;
  }
  boolean[] frameworkAttributes=new boolean[1];
  TreeMap<Integer,String> styleNameMap=searchAttrs(attrs,frameworkAttributes);
  BridgeTypedArray ta=((BridgeResources)mResources).newTypeArray(attrs.length,parser != null ? parser.isPlatformFile() : true);
  IStyleResourceValue defStyleValues=null;
  String customStyle=null;
  if (parser != null) {
    customStyle=parser.getAttributeValue(null,"style");
  }
  if (customStyle != null) {
    IResourceValue item=findResValue(customStyle,false);
    if (item instanceof IStyleResourceValue) {
      defStyleValues=(IStyleResourceValue)item;
    }
  }
  if (defStyleValues == null && defStyleAttr != 0) {
    String defStyleName=searchAttr(defStyleAttr);
    if (mThemeValues != null) {
      IResourceValue item=findItemInStyle(mThemeValues,defStyleName);
      if (item != null) {
        item=findResValue(item.getValue(),false);
        if (item instanceof IStyleResourceValue) {
          defStyleValues=(IStyleResourceValue)item;
        }
      }
 else {
        System.out.println("Failed to find defStyle: " + defStyleName);
      }
    }
  }
  if (defStyleRes != 0) {
    throw new UnsupportedOperationException();
  }
  String namespace=BridgeConstants.NS_RESOURCES;
  if (frameworkAttributes[0] == false) {
    namespace=mProjectCallback.getNamespace();
  }
  if (styleNameMap != null) {
    for (    Entry<Integer,String> styleAttribute : styleNameMap.entrySet()) {
      int index=styleAttribute.getKey().intValue();
      String name=styleAttribute.getValue();
      String value=null;
      if (parser != null) {
        value=parser.getAttributeValue(namespace,name);
      }
      if (value == null) {
        IResourceValue resValue=null;
        if (defStyleValues != null) {
          resValue=findItemInStyle(defStyleValues,name);
        }
        if (resValue == null && mThemeValues != null) {
          resValue=findItemInStyle(mThemeValues,name);
        }
        if (resValue != null) {
          resValue=resolveResValue(resValue);
        }
        ta.bridgeSetValue(index,name,resValue);
      }
 else {
        ta.bridgeSetValue(index,name,resolveValue(null,name,value));
      }
    }
  }
  ta.sealArray();
  return ta;
}
