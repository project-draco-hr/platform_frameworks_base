{
  mMinHorizontalBurnInOffset=minHorizontalOffset;
  mMaxHorizontalBurnInOffset=maxHorizontalOffset;
  mMinVerticalBurnInOffset=minVerticalOffset;
  mMaxVerticalBurnInOffset=maxVerticalOffset;
  if (maxOffsetRadius != BURN_IN_MAX_RADIUS_DEFAULT) {
    mBurnInRadiusMaxSquared=maxOffsetRadius * maxOffsetRadius;
  }
 else {
    mBurnInRadiusMaxSquared=BURN_IN_MAX_RADIUS_DEFAULT;
  }
  mDisplayManagerInternal=LocalServices.getService(DisplayManagerInternal.class);
  mAlarmManager=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
  context.registerReceiver(mBurnInProtectionReceiver,new IntentFilter(ACTION_BURN_IN_PROTECTION));
  Intent intent=new Intent(ACTION_BURN_IN_PROTECTION);
  intent.setPackage(context.getPackageName());
  intent.setFlags(Intent.FLAG_RECEIVER_REGISTERED_ONLY);
  mBurnInProtectionIntent=PendingIntent.getBroadcast(context,0,intent,PendingIntent.FLAG_UPDATE_CURRENT);
  DisplayManager displayManager=(DisplayManager)context.getSystemService(Context.DISPLAY_SERVICE);
  mDisplay=displayManager.getDisplay(Display.DEFAULT_DISPLAY);
  displayManager.registerDisplayListener(this,null);
  mCenteringAnimator=ValueAnimator.ofFloat(1f,0f);
  mCenteringAnimator.setDuration(CENTERING_ANIMATION_DURATION_MS);
  mCenteringAnimator.setInterpolator(new LinearInterpolator());
  mCenteringAnimator.addListener(this);
  mCenteringAnimator.addUpdateListener(this);
}
