{
  mRestoredIntentFilterVerifications.clear();
  int outerDepth=parser.getDepth();
  int type;
  while ((type=parser.next()) != XmlPullParser.END_DOCUMENT && (type != XmlPullParser.END_TAG || parser.getDepth() > outerDepth)) {
    if (type == XmlPullParser.END_TAG || type == XmlPullParser.TEXT) {
      continue;
    }
    String tagName=parser.getName();
    if (tagName.equals(TAG_DOMAIN_VERIFICATION)) {
      IntentFilterVerificationInfo ivi=new IntentFilterVerificationInfo(parser);
      final String pkgName=ivi.getPackageName();
      final PackageSetting ps=mPackages.get(pkgName);
      if (ps != null) {
        ps.setIntentFilterVerificationInfo(ivi);
        if (DEBUG_DOMAIN_VERIFICATION) {
          Slog.d(TAG,"Restored IVI for existing app " + pkgName + " status="+ ivi.getStatusString());
        }
      }
 else {
        mRestoredIntentFilterVerifications.put(pkgName,ivi);
        if (DEBUG_DOMAIN_VERIFICATION) {
          Slog.d(TAG,"Restored IVI for pending app " + pkgName + " status="+ ivi.getStatusString());
        }
      }
    }
 else {
      PackageManagerService.reportSettingsProblem(Log.WARN,"Unknown element under <all-intent-filter-verification>: " + parser.getName());
      XmlUtils.skipCurrentTag(parser);
    }
  }
}
