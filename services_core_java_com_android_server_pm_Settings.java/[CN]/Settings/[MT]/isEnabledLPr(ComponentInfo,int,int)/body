{
  if ((flags & MATCH_DISABLED_COMPONENTS) != 0) {
    return true;
  }
  final PackageSetting packageSettings=mPackages.get(componentInfo.packageName);
  if (PackageManagerService.DEBUG_SETTINGS) {
    Log.v(PackageManagerService.TAG,"isEnabledLock - packageName = " + componentInfo.packageName + " componentName = "+ componentInfo.name);
    Log.v(PackageManagerService.TAG,"enabledComponents: " + compToString(packageSettings.getEnabledComponents(userId)));
    Log.v(PackageManagerService.TAG,"disabledComponents: " + compToString(packageSettings.getDisabledComponents(userId)));
  }
  if (packageSettings == null) {
    return false;
  }
  PackageUserState ustate=packageSettings.readUserState(userId);
  if ((flags & MATCH_DISABLED_UNTIL_USED_COMPONENTS) != 0) {
    if (ustate.enabled == COMPONENT_ENABLED_STATE_DISABLED_UNTIL_USED) {
      return true;
    }
  }
  if (ustate.enabled == COMPONENT_ENABLED_STATE_DISABLED || ustate.enabled == COMPONENT_ENABLED_STATE_DISABLED_USER || ustate.enabled == COMPONENT_ENABLED_STATE_DISABLED_UNTIL_USED || (packageSettings.pkg != null && !packageSettings.pkg.applicationInfo.enabled && ustate.enabled == COMPONENT_ENABLED_STATE_DEFAULT)) {
    return false;
  }
  if (ustate.enabledComponents != null && ustate.enabledComponents.contains(componentInfo.name)) {
    return true;
  }
  if (ustate.disabledComponents != null && ustate.disabledComponents.contains(componentInfo.name)) {
    return false;
  }
  return componentInfo.enabled;
}
