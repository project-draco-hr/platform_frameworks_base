{
  PackageSetting p=mDisabledSysPackages.get(name);
  if (p == null) {
    Log.w(PackageManagerService.TAG,"Package " + name + " is not disabled");
    return null;
  }
  if ((p.pkg != null) && (p.pkg.applicationInfo != null)) {
    p.pkg.applicationInfo.flags&=~ApplicationInfo.FLAG_UPDATED_SYSTEM_APP;
  }
  PackageSetting ret=addPackageLPw(name,p.realName,p.codePath,p.resourcePath,p.legacyNativeLibraryPathString,p.primaryCpuAbiString,p.secondaryCpuAbiString,p.cpuAbiOverrideString,p.appId,p.versionCode,p.pkgFlags,p.pkgPrivateFlags,p.parentPackageName,p.childPackageNames);
  mDisabledSysPackages.remove(name);
  return ret;
}
