{
  if ((flags & PackageManager.MATCH_SYSTEM_ONLY) != 0) {
    final PackageSetting ps=mPackages.get(componentInfo.packageName);
    if ((ps.pkgFlags & ApplicationInfo.FLAG_SYSTEM) == 0) {
      return false;
    }
  }
  final boolean matchesUnaware=((flags & PackageManager.MATCH_ENCRYPTION_UNAWARE_ONLY) != 0) && !componentInfo.encryptionAware;
  final boolean matchesAware=((flags & PackageManager.MATCH_ENCRYPTION_AWARE_ONLY) != 0) && componentInfo.encryptionAware;
  return matchesUnaware || matchesAware;
}
