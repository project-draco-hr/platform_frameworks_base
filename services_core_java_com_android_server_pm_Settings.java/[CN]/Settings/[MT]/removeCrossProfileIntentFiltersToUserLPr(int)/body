{
  for (int i=0; i < mCrossProfileIntentResolvers.size(); i++) {
    int sourceUserId=mCrossProfileIntentResolvers.keyAt(i);
    CrossProfileIntentResolver cpir=mCrossProfileIntentResolvers.get(sourceUserId);
    boolean needsWriting=false;
    HashSet<CrossProfileIntentFilter> cpifs=new HashSet<CrossProfileIntentFilter>(cpir.filterSet());
    for (    CrossProfileIntentFilter cpif : cpifs) {
      if (cpif.getTargetUserId() == targetUserId) {
        needsWriting=true;
        cpir.removeFilter(cpif);
      }
    }
    if (needsWriting) {
      writePackageRestrictionsLPr(sourceUserId);
    }
  }
}
