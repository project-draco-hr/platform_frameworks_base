{
  Slog.i(TAG,"AudioManager.listDevices(" + Integer.toHexString(flags) + ")");
  ArrayList<AudioDevicePort> ports=new ArrayList<AudioDevicePort>();
  int status=mAudioManager.listAudioDevicePorts(ports);
  Slog.i(TAG,"  status:" + status + " numPorts:"+ ports.size());
  ArrayList<AudioDeviceInfo> deviceList=new ArrayList<AudioDeviceInfo>();
  if (status == AudioManager.SUCCESS) {
    deviceList=new ArrayList<AudioDeviceInfo>();
    for (    AudioDevicePort port : ports) {
      if (checkFlags(port,flags)) {
        deviceList.add(new AudioDeviceInfo(port));
      }
    }
  }
  return deviceList;
}
