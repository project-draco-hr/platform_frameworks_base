{
  Slog.i(TAG,"AudioManager.listDevices(" + Integer.toHexString(flags) + ")");
  ArrayList<AudioPort> ports=new ArrayList<AudioPort>();
  int status=mAudioManager.listAudioDevicePorts(ports);
  Slog.i(TAG,"  status:" + status + " numPorts:"+ ports.size());
  ArrayList<AudioDeviceInfo> deviceList=new ArrayList<AudioDeviceInfo>();
  if (status == AudioManager.SUCCESS) {
    deviceList=new ArrayList<AudioDeviceInfo>();
    for (    AudioPort port : ports) {
      if (checkFlags((AudioDevicePort)port,flags)) {
        deviceList.add(new AudioDeviceInfo((AudioDevicePort)port));
      }
    }
  }
  return deviceList;
}
