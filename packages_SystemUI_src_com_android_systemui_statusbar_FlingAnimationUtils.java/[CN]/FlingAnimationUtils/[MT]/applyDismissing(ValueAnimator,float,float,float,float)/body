{
  float maxLengthSeconds=(float)(mMaxLengthSeconds * Math.pow(Math.abs(endValue - currValue) / maxDistance,0.5f));
  float diff=Math.abs(endValue - currValue);
  float velAbs=Math.abs(velocity);
  float durationSeconds=LINEAR_OUT_FASTER_IN_START_GRADIENT * diff / velAbs;
  if (durationSeconds <= maxLengthSeconds) {
    animator.setInterpolator(mLinearOutFasterIn);
  }
 else   if (velAbs >= mMinVelocityPxPerSecond) {
    durationSeconds=maxLengthSeconds;
    VelocityInterpolator velocityInterpolator=new VelocityInterpolator(durationSeconds,velAbs,diff);
    InterpolatorInterpolator superInterpolator=new InterpolatorInterpolator(velocityInterpolator,mLinearOutFasterIn,mLinearOutSlowIn);
    animator.setInterpolator(superInterpolator);
  }
 else {
    durationSeconds=maxLengthSeconds;
    animator.setInterpolator(mFastOutLinearIn);
  }
  animator.setDuration((long)(durationSeconds * 1000));
}
