{
  mContext=context;
  IntentFilter filter=new IntentFilter();
  filter.addAction(LocationManager.HIGH_POWER_REQUEST_CHANGE_ACTION);
  context.registerReceiver(this,filter);
  mAppOpsManager=(AppOpsManager)context.getSystemService(Context.APP_OPS_SERVICE);
  mStatusBarManager=(StatusBarManager)context.getSystemService(Context.STATUS_BAR_SERVICE);
  IntentFilter intentFilter=new IntentFilter();
  intentFilter.addAction(LocationManager.MODE_CHANGED_ACTION);
  context.registerReceiverAsUser(new BroadcastReceiver(){
    @Override public void onReceive(    Context context,    Intent intent){
      String action=intent.getAction();
      if (LocationManager.MODE_CHANGED_ACTION.equals(action)) {
        locationSettingsChanged();
      }
    }
  }
,UserHandle.ALL,intentFilter,null,new Handler());
  updateActiveLocationRequests();
  refreshViews();
}
