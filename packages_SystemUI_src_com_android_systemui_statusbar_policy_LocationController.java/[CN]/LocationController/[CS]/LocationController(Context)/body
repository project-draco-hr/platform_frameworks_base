{
  mContext=context;
  IntentFilter filter=new IntentFilter();
  filter.addAction(LocationManager.HIGH_POWER_REQUEST_CHANGE_ACTION);
  context.registerReceiver(this,filter);
  mAppOpsManager=(AppOpsManager)context.getSystemService(Context.APP_OPS_SERVICE);
  mStatusBarManager=(StatusBarManager)context.getSystemService(Context.STATUS_BAR_SERVICE);
  context.getContentResolver().registerContentObserver(Settings.Secure.getUriFor(Settings.Secure.LOCATION_PROVIDERS_ALLOWED),true,new ContentObserver(new Handler()){
    @Override public void onChange(    boolean selfChange){
      boolean isEnabled=isLocationEnabled();
      for (      LocationSettingsChangeCallback cb : mSettingsChangeCallbacks) {
        cb.onLocationSettingsChanged(isEnabled);
      }
    }
  }
);
  updateActiveLocationRequests();
  refreshViews();
}
