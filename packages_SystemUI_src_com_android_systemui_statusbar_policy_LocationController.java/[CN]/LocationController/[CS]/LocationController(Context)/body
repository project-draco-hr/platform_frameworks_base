{
  mContext=context;
  IntentFilter filter=new IntentFilter();
  filter.addAction(LocationManager.GPS_ENABLED_CHANGE_ACTION);
  filter.addAction(LocationManager.GPS_FIX_CHANGE_ACTION);
  context.registerReceiver(this,filter);
  NotificationManager nm=(NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
  mNotificationService=nm.getService();
  context.getContentResolver().registerContentObserver(Settings.Secure.getUriFor(Settings.Secure.LOCATION_PROVIDERS_ALLOWED),true,new ContentObserver(new Handler()){
    @Override public void onChange(    boolean selfChange){
      boolean isEnabled=isLocationEnabled();
      for (      LocationSettingsChangeCallback cb : mSettingsChangeCallbacks) {
        cb.onLocationSettingsChanged(isEnabled);
      }
    }
  }
);
}
