{
  GadgetInfo gi=null;
  XmlResourceParser parser=null;
  try {
    parser=packageItemInfo.loadXmlMetaData(mPackageManager,GadgetManager.GADGET_PROVIDER_META_DATA);
    if (parser == null) {
      Log.w(TAG,"No " + GadgetManager.GADGET_PROVIDER_META_DATA + " meta-data for "+ "gadget provider '"+ component+ '\'');
      return null;
    }
    AttributeSet attrs=Xml.asAttributeSet(parser);
    int type;
    while ((type=parser.next()) != XmlPullParser.END_DOCUMENT && type != XmlPullParser.START_TAG) {
    }
    String nodeName=parser.getName();
    if (!"gadget-provider".equals(nodeName)) {
      Log.w(TAG,"Meta-data does not start with gadget-provider tag for" + " gadget provider '" + component + '\'');
      return null;
    }
    gi=new GadgetInfo();
    gi.provider=component;
    TypedArray sa=mContext.getResources().obtainAttributes(attrs,com.android.internal.R.styleable.GadgetProviderInfo);
    gi.minWidth=sa.getDimensionPixelSize(com.android.internal.R.styleable.GadgetProviderInfo_minWidth,0);
    gi.minHeight=sa.getDimensionPixelSize(com.android.internal.R.styleable.GadgetProviderInfo_minHeight,0);
    gi.updatePeriodMillis=sa.getInt(com.android.internal.R.styleable.GadgetProviderInfo_updatePeriodMillis,0);
    gi.initialLayout=sa.getResourceId(com.android.internal.R.styleable.GadgetProviderInfo_initialLayout,0);
    sa.recycle();
  }
 catch (  Exception e) {
    Log.w(TAG,"XML parsing failed for gadget provider '" + component + '\'',e);
  }
 finally {
    if (parser != null)     parser.close();
  }
  return gi;
}
