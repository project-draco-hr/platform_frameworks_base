{
  Host host=id.host;
  host.instances.remove(id);
  pruneHostLocked(host);
  mGadgetIds.remove(id);
  Provider p=id.provider;
  if (p != null) {
    p.instances.remove(id);
    Intent intent=new Intent(GadgetManager.GADGET_DELETED_ACTION);
    intent.setComponent(p.info.provider);
    intent.putExtra(GadgetManager.EXTRA_GADGET_ID,id.gadgetId);
    mContext.sendBroadcast(intent);
    if (p.instances.size() == 0) {
      cancelBroadcasts(p);
      intent=new Intent(GadgetManager.GADGET_DISABLED_ACTION);
      intent.setComponent(p.info.provider);
      mContext.sendBroadcast(intent);
    }
  }
}
