{
  Host host=id.host;
  host.instances.remove(id);
  pruneHostLocked(host);
  mGadgetIds.remove(id);
  Provider p=id.provider;
  if (p != null) {
    p.instances.remove(id);
    if (!p.zombie) {
      Intent intent=new Intent(GadgetManager.ACTION_GADGET_DELETED);
      intent.setComponent(p.info.provider);
      intent.putExtra(GadgetManager.EXTRA_GADGET_ID,id.gadgetId);
      mContext.sendBroadcast(intent);
      if (p.instances.size() == 0) {
        cancelBroadcasts(p);
        intent=new Intent(GadgetManager.ACTION_GADGET_DISABLED);
        intent.setComponent(p.info.provider);
        mContext.sendBroadcast(intent);
      }
    }
  }
}
