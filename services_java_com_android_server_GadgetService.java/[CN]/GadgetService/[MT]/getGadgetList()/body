{
  PackageManager pm=mPackageManager;
  Intent intent=new Intent(GadgetManager.GADGET_UPDATE_ACTION);
  List<ResolveInfo> broadcastReceivers=pm.queryBroadcastReceivers(intent,PackageManager.GET_META_DATA);
  ArrayList<GadgetInfo> result=new ArrayList<GadgetInfo>();
  final int N=broadcastReceivers.size();
  for (int i=0; i < N; i++) {
    ResolveInfo ri=broadcastReceivers.get(i);
    ActivityInfo ai=ri.activityInfo;
    GadgetInfo gi=parseGadgetInfoXml(new ComponentName(ai.packageName,ai.name),ri.activityInfo);
    if (gi != null) {
      result.add(gi);
    }
  }
  return result;
}
