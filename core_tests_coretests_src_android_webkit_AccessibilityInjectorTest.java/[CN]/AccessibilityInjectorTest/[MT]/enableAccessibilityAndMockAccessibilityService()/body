{
  AccessibilityManager.getInstance(getContext());
  Settings.Secure.putInt(getContext().getContentResolver(),Settings.Secure.ACCESSIBILITY_ENABLED,1);
  String enabledServices=new ComponentName(getContext().getPackageName(),MockAccessibilityService.class.getName()).flattenToShortString();
  Settings.Secure.putString(getContext().getContentResolver(),Settings.Secure.ENABLED_ACCESSIBILITY_SERVICES,enabledServices);
  long incrementStep=TIMEOUT_ENABLE_ACCESSIBILITY_AND_MOCK_SERVICE / 5;
  long start=SystemClock.uptimeMillis();
  while (SystemClock.uptimeMillis() - start < TIMEOUT_ENABLE_ACCESSIBILITY_AND_MOCK_SERVICE && !sIsAccessibilityServiceReady) {
synchronized (sTestLock) {
      try {
        sTestLock.wait(incrementStep);
      }
 catch (      InterruptedException ie) {
      }
    }
  }
  if (!sIsAccessibilityServiceReady) {
    throw new IllegalStateException("MockAccessibilityService not ready. Did you add " + "tests and forgot to update AccessibilityInjectorTest#TEST_CASE_COUNT?");
  }
}
