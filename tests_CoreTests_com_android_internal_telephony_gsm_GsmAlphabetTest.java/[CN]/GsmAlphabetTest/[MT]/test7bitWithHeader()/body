{
  byte[] data=new byte[3];
  data[0]=(byte)1;
  data[1]=(byte)2;
  data[2]=(byte)2;
  SmsHeader header=new SmsHeader();
  header.add(new SmsHeader.Element(SmsHeader.CONCATENATED_8_BIT_REFERENCE,data));
  String message="aaaaaaaaaabbbbbbbbbbcccccccccc";
  byte[] userData=GsmAlphabet.stringToGsm7BitPackedWithHeader(message,header.toByteArray());
  int septetCount=GsmAlphabet.countGsmSeptets(message,false);
  String parsedMessage=GsmAlphabet.gsm7BitPackedToString(userData,header.toByteArray().length + 1,septetCount,1);
  assertEquals(message,parsedMessage);
}
