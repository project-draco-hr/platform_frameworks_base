{
  long fileSize=apk.length();
  if (fileSize > Integer.MAX_VALUE) {
    throw new IOException("File too large: " + apk.length() + " bytes");
  }
  MappedByteBuffer apkContents;
  try {
    apkContents=apk.getChannel().map(FileChannel.MapMode.READ_ONLY,0,fileSize);
    apkContents.load();
  }
 catch (  IOException e) {
    if (e.getCause() instanceof OutOfMemoryError) {
      throw new SignatureNotFoundException("Failed to memory-map APK",e);
    }
 else {
      throw new IOException("Failed to memory-map APK",e);
    }
  }
  return verify(apkContents);
}
