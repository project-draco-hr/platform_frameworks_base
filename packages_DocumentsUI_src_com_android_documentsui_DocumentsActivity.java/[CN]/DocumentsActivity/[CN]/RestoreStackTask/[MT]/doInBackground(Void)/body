{
  final String packageName=getCallingPackage();
  final Cursor cursor=getContentResolver().query(RecentsProvider.buildResume(packageName),null,null,null,null);
  try {
    if (cursor.moveToFirst()) {
      final byte[] rawStack=cursor.getBlob(cursor.getColumnIndex(ResumeColumns.STACK));
      DurableUtils.readFromArray(rawStack,mState.stack);
      mRestoredStack=true;
    }
  }
 catch (  IOException e) {
    Log.w(TAG,"Failed to resume",e);
  }
 finally {
    IoUtils.closeQuietly(cursor);
  }
  final RootInfo root=getCurrentRoot();
  final Collection<RootInfo> matchingRoots=mRoots.getMatchingRootsBlocking(mState);
  if (!matchingRoots.contains(root)) {
    mState.stack.reset();
    mRestoredStack=false;
  }
  return null;
}
