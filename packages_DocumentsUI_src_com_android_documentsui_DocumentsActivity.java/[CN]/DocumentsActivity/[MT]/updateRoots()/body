{
  sProviders.clear();
  sRoots.clear();
  final PackageManager pm=getPackageManager();
  final List<ProviderInfo> providers=pm.queryContentProviders(null,-1,PackageManager.GET_META_DATA);
  for (  ProviderInfo providerInfo : providers) {
    if (providerInfo.metaData != null && providerInfo.metaData.containsKey(DocumentsContract.META_DATA_DOCUMENT_PROVIDER)) {
      final DocumentsProviderInfo info=parseInfo(this,providerInfo);
      if (info == null) {
        Log.w(TAG,"Missing info for " + providerInfo);
        continue;
      }
      sProviders.put(info.providerInfo.authority,info);
      if (info.customRoots) {
        final Uri uri=DocumentsContract.buildRootsUri(providerInfo.authority);
        final Cursor cursor=getContentResolver().query(uri,null,null,null,null);
        try {
          while (cursor.moveToNext()) {
            sRoots.add(Root.fromCursor(this,info,cursor));
          }
        }
  finally {
          cursor.close();
        }
      }
 else       if (info != null) {
        sRoots.add(Root.fromInfo(this,info));
      }
    }
  }
}
