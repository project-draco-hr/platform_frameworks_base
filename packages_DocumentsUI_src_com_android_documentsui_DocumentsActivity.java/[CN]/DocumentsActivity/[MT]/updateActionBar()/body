{
  final FragmentManager fm=getFragmentManager();
  final ActionBar actionBar=getActionBar();
  actionBar.setDisplayShowHomeEnabled(true);
  actionBar.setDisplayHomeAsUpEnabled(true);
  if (mDrawerLayout.isDrawerOpen(mRootsList)) {
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD);
    actionBar.setIcon(new ColorDrawable());
    if (mAction == ACTION_OPEN) {
      actionBar.setTitle(R.string.title_open);
    }
 else     if (mAction == ACTION_CREATE) {
      actionBar.setTitle(R.string.title_save);
    }
  }
 else {
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    if (mCurrentRoot != null) {
      actionBar.setIcon(mCurrentRoot.icon);
    }
    actionBar.setTitle(null);
    actionBar.setListNavigationCallbacks(mSortAdapter,mSortListener);
    if (fm.getBackStackEntryCount() > 0) {
      mDrawerToggle.setDrawerIndicatorEnabled(false);
    }
 else {
      mDrawerToggle.setDrawerIndicatorEnabled(true);
    }
  }
}
