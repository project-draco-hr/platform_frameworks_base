{
  final DocumentsProviderInfo info=sProviders.get(authority);
  if (info != null) {
    for (    Icon icon : info.customIcons) {
      if (MimePredicate.mimeMatches(icon.mimeType,mimeType)) {
        return icon.icon;
      }
    }
  }
  if (DocumentsContract.MIME_TYPE_DIRECTORY.equals(mimeType)) {
    return context.getResources().getDrawable(R.drawable.ic_dir);
  }
 else {
    final PackageManager pm=context.getPackageManager();
    final Intent intent=new Intent(Intent.ACTION_VIEW);
    intent.setType(mimeType);
    final ResolveInfo activityInfo=pm.resolveActivity(intent,PackageManager.MATCH_DEFAULT_ONLY);
    if (activityInfo != null) {
      return activityInfo.loadIcon(pm);
    }
 else {
      return null;
    }
  }
}
