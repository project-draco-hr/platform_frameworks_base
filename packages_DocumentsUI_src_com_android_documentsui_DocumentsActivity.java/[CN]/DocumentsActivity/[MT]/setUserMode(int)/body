{
  final RootInfo root=getCurrentRoot();
  final DocumentInfo cwd=getCurrentDirectory();
  final Uri stateUri=RecentsProvider.buildState(root.authority,root.rootId,cwd.documentId);
  final ContentValues values=new ContentValues();
  values.put(StateColumns.MODE,mode);
  getContentResolver().insert(stateUri,values);
  mState.mode=mode;
  DirectoryFragment.get(getFragmentManager()).onUserModeChanged();
  onStateChanged();
}
