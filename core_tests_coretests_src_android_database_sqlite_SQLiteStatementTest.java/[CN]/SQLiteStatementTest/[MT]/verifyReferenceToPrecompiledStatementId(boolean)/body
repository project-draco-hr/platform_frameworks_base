{
  if (wal) {
    mDatabase.enableWriteAheadLogging();
  }
 else {
    mDatabase.disableWriteAheadLogging();
  }
  SQLiteStatement stmt=mDatabase.compileStatement("insert into t values(?,?);");
  assertEquals(mDatabase.mNativeHandle,stmt.nHandle);
  assertEquals(mDatabase,stmt.mDatabase);
  assertEquals(0,stmt.nStatement);
  assertEquals(0,stmt.getSqlStatementId());
  int colValue=new Random().nextInt();
  stmt.bindLong(1,colValue);
  int n=stmt.nStatement;
  assertTrue(n > 0);
  assertEquals(n,stmt.getSqlStatementId());
  assertEquals(mDatabase.mNativeHandle,stmt.nHandle);
  stmt.bindString(2,"blah" + colValue);
  assertEquals(n,stmt.nStatement);
  stmt.executeInsert();
  assertEquals(0,stmt.nStatement);
  assertEquals(0,stmt.getSqlStatementId());
  assertEquals(mDatabase.mNativeHandle,stmt.nHandle);
  assertEquals(mDatabase,stmt.mDatabase);
  stmt.close();
  assertEquals(0,stmt.nStatement);
  assertEquals(0,stmt.getSqlStatementId());
  assertEquals(mDatabase,stmt.mDatabase);
  stmt=mDatabase.compileStatement("select i from t where j=?;");
  assertEquals(0,stmt.nStatement);
  assertEquals(0,stmt.getSqlStatementId());
  assertEquals(mDatabase.mNativeHandle,stmt.nHandle);
  assertEquals(mDatabase,stmt.mDatabase);
  stmt.bindString(1,"blah" + colValue);
  n=stmt.nStatement;
  assertTrue(n > 0);
  assertEquals(n,stmt.getSqlStatementId());
  SQLiteDatabase dbUsed=mDatabase;
  if (wal) {
    dbUsed=mDatabase.mConnectionPool.getConnectionList().get(0);
    assertTrue(mDatabase.mNativeHandle != dbUsed.mNativeHandle);
  }
  assertEquals(dbUsed.mNativeHandle,stmt.nHandle);
  assertEquals(dbUsed,stmt.mDatabase);
  Long l=stmt.simpleQueryForLong();
  assertEquals(colValue,l.intValue());
  assertEquals(0,stmt.nStatement);
  assertEquals(0,stmt.getSqlStatementId());
  assertEquals(dbUsed.mNativeHandle,stmt.nHandle);
  assertEquals(dbUsed,stmt.mDatabase);
  stmt.close();
  assertEquals(0,stmt.nStatement);
  assertEquals(0,stmt.getSqlStatementId());
  assertEquals(dbUsed,stmt.mDatabase);
}
