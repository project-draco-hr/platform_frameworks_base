{
  final Uri uri=DocumentsContract.buildChildDocumentsUri(MtpDocumentsProvider.AUTHORITY,mParentIdentifier.toDocumentId());
  setUpDocument(mManager,40);
  mManager.blockDocument(0,15);
  mManager.blockDocument(0,35);
{
    final Cursor cursor=mLoader.queryChildDocuments(MtpDocumentsProvider.DEFAULT_DOCUMENT_PROJECTION,mParentIdentifier);
    assertEquals(DocumentLoader.NUM_INITIAL_ENTRIES,cursor.getCount());
  }
  Thread.sleep(DocumentLoader.NOTIFY_PERIOD_MS);
  mManager.unblockDocument(0,15);
  mResolver.waitForNotification(uri,1);
{
    final Cursor cursor=mLoader.queryChildDocuments(MtpDocumentsProvider.DEFAULT_DOCUMENT_PROJECTION,mParentIdentifier);
    assertEquals(DocumentLoader.NUM_INITIAL_ENTRIES + DocumentLoader.NUM_LOADING_ENTRIES,cursor.getCount());
  }
  mManager.unblockDocument(0,35);
  mResolver.waitForNotification(uri,2);
{
    final Cursor cursor=mLoader.queryChildDocuments(MtpDocumentsProvider.DEFAULT_DOCUMENT_PROJECTION,mParentIdentifier);
    assertEquals(40,cursor.getCount());
  }
  assertEquals(2,mResolver.getChangeCount(uri));
}
