{
  final int childCount=mUserSwitcher.getChildCount();
  final int adapterCount=mAdapter.getCount();
  final int N=Math.max(childCount,adapterCount);
  for (int i=0; i < N; i++) {
    if (i < adapterCount) {
      View oldView=null;
      if (i < childCount) {
        oldView=mUserSwitcher.getChildAt(i);
      }
      View newView=mAdapter.getView(i,oldView,mUserSwitcher);
      if (oldView == null) {
        mUserSwitcher.addView(newView);
      }
 else       if (oldView != newView) {
        mUserSwitcher.removeViewAt(i);
        mUserSwitcher.addView(newView,i);
      }
    }
 else {
      int lastIndex=mUserSwitcher.getChildCount() - 1;
      mUserSwitcher.removeViewAt(lastIndex);
    }
  }
}
