{
  if (context.getResources().getBoolean(R.bool.config_keyguardUserSwitcher) || ALWAYS_ON) {
    mUserSwitcher=(ViewGroup)userSwitcher.inflate();
    mBackground=new KeyguardUserSwitcherScrim(mUserSwitcher);
    mUserSwitcher.setBackground(mBackground);
    mStatusBarView=statusBarView;
    mStatusBarView.setKeyguardUserSwitcher(this);
    panelView.setKeyguardUserSwitcher(this);
    mAdapter=new Adapter(context,userSwitcherController);
    mAdapter.registerDataSetObserver(mDataSetObserver);
    mSimpleUserSwitcher=userSwitcherController.isSimpleUserSwitcher();
    mAppearAnimationUtils=new AppearAnimationUtils(context,400,-0.5f,0.5f,AnimationUtils.loadInterpolator(context,android.R.interpolator.fast_out_slow_in));
  }
 else {
    mUserSwitcher=null;
    mStatusBarView=null;
    mAdapter=null;
    mSimpleUserSwitcher=false;
    mAppearAnimationUtils=null;
    mBackground=null;
  }
}
