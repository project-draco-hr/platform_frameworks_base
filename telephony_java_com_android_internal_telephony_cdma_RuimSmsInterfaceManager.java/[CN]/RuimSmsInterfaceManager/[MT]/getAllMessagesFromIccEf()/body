{
  if (DBG)   log("getAllMessagesFromEF");
  Context context=mPhone.getContext();
  context.enforceCallingPermission("android.permission.RECEIVE_SMS","Reading messages from RUIM");
synchronized (mLock) {
    Message response=mHandler.obtainMessage(EVENT_LOAD_DONE);
    mPhone.getIccFileHandler().loadEFLinearFixedAll(IccConstants.EF_SMS,response);
    try {
      mLock.wait();
    }
 catch (    InterruptedException e) {
      log("interrupted while trying to load from the RUIM");
    }
  }
  return mSms;
}
