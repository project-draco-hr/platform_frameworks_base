{
  int sysui=View.SYSTEM_UI_FLAG_LAYOUT_STABLE | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION;
  if (WM_SUPPORTED && mTarget.getContext() instanceof Activity) {
    Window w=((Activity)mTarget.getContext()).getWindow();
    int wmFlags=FLAG_TRANSLUCENT_STATUS | FLAG_TRANSLUCENT_NAVIGATION;
    if (translucent) {
      w.addFlags(wmFlags);
    }
 else {
      w.clearFlags(wmFlags);
    }
  }
 else   if (SYSUI_SUPPORTED) {
    if (translucent) {
      sysui|=SYSTEM_UI_FLAG_TRANSPARENT_STATUS | SYSTEM_UI_FLAG_TRANSPARENT_NAVIGATION;
    }
  }
  mTarget.setSystemUiVisibility(sysui);
}
