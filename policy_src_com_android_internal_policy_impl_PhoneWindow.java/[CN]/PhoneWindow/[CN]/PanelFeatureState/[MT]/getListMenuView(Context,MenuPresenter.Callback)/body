{
  if (menu == null)   return null;
  if (!isCompact) {
    getIconMenuView(context,cb);
  }
  if (listMenuPresenter == null) {
    listMenuPresenter=new ListMenuPresenter(com.android.internal.R.layout.list_menu_item_layout,listPresenterTheme);
    listMenuPresenter.setCallback(cb);
    listMenuPresenter.setId(com.android.internal.R.id.list_menu_presenter);
    menu.addMenuPresenter(listMenuPresenter);
  }
  if (iconMenuPresenter != null) {
    listMenuPresenter.setItemIndexOffset(iconMenuPresenter.getNumActualItemsShown());
  }
  MenuView result=listMenuPresenter.getMenuView(decorView);
  return result;
}
