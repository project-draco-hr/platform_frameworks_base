{
  if (menu == null)   return null;
  getIconMenuView(cb);
  boolean init=false;
  if (expandedMenuPresenter == null) {
    expandedMenuPresenter=new ListMenuPresenter(com.android.internal.R.layout.list_menu_item_layout,com.android.internal.R.style.Theme_ExpandedMenu);
    expandedMenuPresenter.setCallback(cb);
    menu.addMenuPresenter(expandedMenuPresenter);
    init=true;
  }
  expandedMenuPresenter.setItemIndexOffset(iconMenuPresenter.getNumActualItemsShown());
  MenuView result=expandedMenuPresenter.getMenuView(decorView);
  if (init && frozenMenuState != null) {
    expandedMenuPresenter.restoreHierarchyState(frozenMenuState);
    frozenMenuState=null;
  }
  return result;
}
