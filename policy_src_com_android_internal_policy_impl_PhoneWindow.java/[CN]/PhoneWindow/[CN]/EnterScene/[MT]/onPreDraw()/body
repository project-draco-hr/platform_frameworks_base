{
  ViewTreeObserver observer=mDecor.getViewTreeObserver();
  observer.removeOnPreDrawListener(this);
  if (!mEnterTransitionStarted && mSceneTransitionListener != null) {
    mEnterTransitionStarted=true;
    mDecor.captureTransitioningViews(mEnteringViews);
    mapSharedElements(mSharedElementTargets);
    mEnteringViews.removeAll(mSharedElementTargets.values());
    Rect epicenter=calcEpicenter(mSharedElementTargets,mActivityOptions.getSharedElementNames());
    mEpicenterCallback=new FixedEpicenterCallback(epicenter);
    setViewVisibility(mEnteringViews,View.INVISIBLE);
    setViewVisibility(mSharedElementTargets.values(),View.INVISIBLE);
    if (mAllowEnterOverlap) {
      beginEnterScene();
    }
    observer.addOnPreDrawListener(this);
    return false;
  }
 else {
    mHandler.postDelayed(this,MAX_TRANSITION_START_WAIT);
    mActivityOptions.dispatchSceneTransitionStarted(this,new ArrayList<String>(mSharedElementTargets.keySet()));
    return !mSharedElementReadyReceived;
  }
}
