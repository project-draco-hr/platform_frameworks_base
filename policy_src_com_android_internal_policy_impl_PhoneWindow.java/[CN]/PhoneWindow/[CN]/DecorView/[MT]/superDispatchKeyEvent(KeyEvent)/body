{
  if (super.dispatchKeyEvent(event)) {
    return true;
  }
  if (event.getKeyCode() == KeyEvent.KEYCODE_BACK) {
    final int action=event.getAction();
    if (mActionMode != null) {
      if (action == KeyEvent.ACTION_UP) {
        mActionMode.finish();
      }
      return true;
    }
    if (mActionBar != null && mActionBar.hasExpandedActionView()) {
      if (action == KeyEvent.ACTION_UP) {
        mActionBar.collapseActionView();
      }
      return true;
    }
  }
  return false;
}
