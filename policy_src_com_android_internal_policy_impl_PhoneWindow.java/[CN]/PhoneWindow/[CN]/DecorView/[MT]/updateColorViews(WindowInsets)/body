{
  WindowManager.LayoutParams attrs=getAttributes();
  int sysUiVisibility=attrs.systemUiVisibility | getWindowSystemUiVisibility();
  if (!mIsFloating && ActivityManager.isHighEndGfx()) {
    if (insets != null) {
      mLastTopInset=Math.min(insets.getStableInsetTop(),insets.getSystemWindowInsetTop());
      mLastBottomInset=Math.min(insets.getStableInsetBottom(),insets.getSystemWindowInsetBottom());
      mLastRightInset=Math.min(insets.getStableInsetRight(),insets.getSystemWindowInsetRight());
    }
    mStatusColorView=updateColorViewInt(mStatusColorView,sysUiVisibility,SYSTEM_UI_FLAG_FULLSCREEN,FLAG_TRANSLUCENT_STATUS,mStatusBarColor,mLastTopInset,Gravity.TOP,STATUS_BAR_BACKGROUND_TRANSITION_NAME,com.android.internal.R.id.statusBarBackground,(getAttributes().flags & FLAG_FULLSCREEN) != 0);
    mNavigationColorView=updateColorViewInt(mNavigationColorView,sysUiVisibility,SYSTEM_UI_FLAG_HIDE_NAVIGATION,FLAG_TRANSLUCENT_NAVIGATION,mNavigationBarColor,mLastBottomInset,Gravity.BOTTOM,NAVIGATION_BAR_BACKGROUND_TRANSITION_NAME,com.android.internal.R.id.navigationBarBackground,false);
  }
  boolean consumingNavBar=(attrs.flags & FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS) != 0 && (sysUiVisibility & SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION) == 0 && (sysUiVisibility & SYSTEM_UI_FLAG_HIDE_NAVIGATION) == 0;
  int consumedRight=consumingNavBar ? mLastRightInset : 0;
  int consumedBottom=consumingNavBar ? mLastBottomInset : 0;
  if (mContentRoot != null && mContentRoot.getLayoutParams() instanceof MarginLayoutParams) {
    MarginLayoutParams lp=(MarginLayoutParams)mContentRoot.getLayoutParams();
    if (lp.rightMargin != consumedRight || lp.bottomMargin != consumedBottom) {
      lp.rightMargin=consumedRight;
      lp.bottomMargin=consumedBottom;
      mContentRoot.setLayoutParams(lp);
      if (insets == null) {
        requestApplyInsets();
      }
    }
    if (insets != null) {
      insets=insets.replaceSystemWindowInsets(insets.getSystemWindowInsetLeft(),insets.getSystemWindowInsetTop(),insets.getSystemWindowInsetRight() - consumedRight,insets.getSystemWindowInsetBottom() - consumedBottom);
    }
  }
  if (insets != null) {
    insets=insets.consumeStableInsets();
  }
  return insets;
}
