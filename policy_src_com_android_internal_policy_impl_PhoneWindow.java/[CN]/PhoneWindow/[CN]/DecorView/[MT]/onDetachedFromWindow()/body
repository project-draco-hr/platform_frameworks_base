{
  super.onDetachedFromWindow();
  final Callback cb=getCallback();
  if (cb != null && mFeatureId < 0) {
    cb.onDetachedFromWindow();
  }
  if (mActionBar != null) {
    mActionBar.dismissPopupMenus();
  }
  if (mActionModePopup != null) {
    removeCallbacks(mShowActionModePopup);
    if (mActionModePopup.isShowing()) {
      mActionModePopup.dismiss();
    }
    mActionModePopup=null;
  }
  PanelFeatureState st=getPanelState(FEATURE_OPTIONS_PANEL,false);
  if (st != null && st.menu != null) {
    st.menu.close();
  }
}
