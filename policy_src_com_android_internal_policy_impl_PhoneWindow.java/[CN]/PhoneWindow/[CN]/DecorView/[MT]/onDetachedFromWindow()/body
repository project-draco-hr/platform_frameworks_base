{
  super.onDetachedFromWindow();
  final Callback cb=getCallback();
  if (cb != null && !isDestroyed() && mFeatureId < 0) {
    cb.onDetachedFromWindow();
  }
  if (mActionButtonPopup != null) {
    if (mActionButtonPopup.isShowing()) {
      mActionButtonPopup.dismiss();
    }
    mActionButtonPopup=null;
  }
  if (mActionModePopup != null) {
    removeCallbacks(mShowActionModePopup);
    if (mActionModePopup.isShowing()) {
      mActionModePopup.dismiss();
    }
    mActionModePopup=null;
  }
}
