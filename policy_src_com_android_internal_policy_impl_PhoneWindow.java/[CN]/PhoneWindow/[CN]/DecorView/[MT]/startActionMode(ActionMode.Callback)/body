{
  if (mActionMode != null) {
    mActionMode.finish();
  }
  ActionMode mode=getCallback().onStartActionMode(callback);
  if (mode != null) {
    mActionMode=mode;
  }
 else {
    if (mActionModeView == null) {
      mActionModeView=(ActionBarContextView)findViewById(com.android.internal.R.id.action_mode_bar);
    }
    if (mActionModeView != null) {
      mode=new StandaloneActionMode(getContext(),mActionModeView,new ActionModeCallbackWrapper(callback));
      if (callback.onCreateActionMode(mode,mode.getMenu())) {
        mode.invalidate();
        mActionModeView.initForMode(mode);
        mActionModeView.setVisibility(View.VISIBLE);
        mActionMode=mode;
      }
 else {
        mActionMode=null;
      }
    }
  }
  return mActionMode;
}
