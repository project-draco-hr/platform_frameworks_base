{
  boolean handled;
  if (mPreparedPanel != null) {
    handled=performPanelShortcut(mPreparedPanel,ev.getKeyCode(),ev,Menu.FLAG_PERFORM_NO_CLOSE);
    if (handled) {
      if (mPreparedPanel != null) {
        mPreparedPanel.isHandled=true;
      }
      return true;
    }
  }
  final Callback cb=getCallback();
  handled=cb != null && !isDestroyed() && mFeatureId < 0 ? cb.dispatchKeyShortcutEvent(ev) : super.dispatchKeyShortcutEvent(ev);
  if (handled) {
    return true;
  }
  if (mPreparedPanel == null) {
    PanelFeatureState st=getPanelState(FEATURE_OPTIONS_PANEL,true);
    preparePanel(st,ev);
    handled=performPanelShortcut(st,ev.getKeyCode(),ev,Menu.FLAG_PERFORM_NO_CLOSE);
    st.isPrepared=false;
    if (handled) {
      return true;
    }
  }
  return false;
}
