{
  if (mDecor == null) {
    mDecor=generateDecor();
    mDecor.setDescendantFocusability(ViewGroup.FOCUS_AFTER_DESCENDANTS);
    mDecor.setIsRootNamespace(true);
  }
  if (mContentParent == null) {
    mContentParent=generateLayout(mDecor);
    mTitleView=(TextView)findViewById(com.android.internal.R.id.title);
    if (mTitleView != null) {
      if ((getLocalFeatures() & (1 << FEATURE_NO_TITLE)) != 0) {
        View titleContainer=findViewById(com.android.internal.R.id.title_container);
        if (titleContainer != null) {
          titleContainer.setVisibility(View.GONE);
        }
 else {
          mTitleView.setVisibility(View.GONE);
        }
        if (mContentParent instanceof FrameLayout) {
          ((FrameLayout)mContentParent).setForeground(null);
        }
      }
 else {
        mTitleView.setText(mTitle);
      }
    }
 else {
      mActionBar=(ActionBarView)findViewById(com.android.internal.R.id.action_bar);
      if (mActionBar != null) {
        if (mActionBar.getTitle() == null) {
          mActionBar.setWindowTitle(mTitle);
        }
        final int localFeatures=getLocalFeatures();
        if ((localFeatures & (1 << FEATURE_PROGRESS)) != 0) {
          mActionBar.initProgress();
        }
        if ((localFeatures & (1 << FEATURE_INDETERMINATE_PROGRESS)) != 0) {
          mActionBar.initIndeterminateProgress();
        }
        final boolean splitActionBar=getWindowStyle().getBoolean(com.android.internal.R.styleable.Window_windowSplitActionBar,false);
        if (splitActionBar) {
          final ActionBarContainer splitView=(ActionBarContainer)findViewById(com.android.internal.R.id.split_action_bar);
          if (splitView != null) {
            splitView.setVisibility(View.VISIBLE);
            mActionBar.setSplitActionBar(splitActionBar);
            mActionBar.setSplitView(splitView);
            final ActionBarContextView cab=(ActionBarContextView)findViewById(com.android.internal.R.id.action_context_bar);
            cab.setSplitView(splitView);
          }
 else {
            Log.e(TAG,"Window style requested split action bar with " + "incompatible window decor! Ignoring request.");
          }
        }
        mDecor.post(new Runnable(){
          public void run(){
            PanelFeatureState st=getPanelState(FEATURE_OPTIONS_PANEL,false);
            if (!isDestroyed() && (st == null || st.menu == null)) {
              invalidatePanelMenu(FEATURE_ACTION_BAR);
            }
          }
        }
);
      }
    }
  }
}
