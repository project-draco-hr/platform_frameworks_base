{
  int numChildren=viewGroup.getChildCount();
  for (int i=0; i < numChildren; i++) {
    View child=viewGroup.getChildAt(i);
    if (child.getVisibility() != View.VISIBLE) {
      continue;
    }
    if (child.getSharedElementName() != null) {
      sharedElements.add(child);
      child.setVisibility(View.INVISIBLE);
    }
 else     if (child instanceof ViewGroup && !((ViewGroup)child).isTransitionGroup()) {
      recurseHideViews((ViewGroup)child,nonSharedElements,sharedElements);
    }
 else {
      nonSharedElements.add(child);
      child.setVisibility(View.INVISIBLE);
    }
  }
}
