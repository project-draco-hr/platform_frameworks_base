{
  mDecor.getViewTreeObserver().addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener(){
    @Override public boolean onPreDraw(){
      mDecor.getViewTreeObserver().removeOnPreDrawListener(this);
      int[] tempLoc=new int[2];
      for (      String name : sharedElements.keySet()) {
        View sharedElement=sharedElements.get(name);
        captureSharedElementState(sharedElement,name,sharedElementArgs,tempLoc);
      }
      return true;
    }
  }
);
}
