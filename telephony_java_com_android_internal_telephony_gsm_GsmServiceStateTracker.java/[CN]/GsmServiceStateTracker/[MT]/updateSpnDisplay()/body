{
  int rule=phone.mSIMRecords.getDisplayRule(ss.getOperatorNumeric());
  String spn=phone.mSIMRecords.getServiceProviderName();
  String plmn=ss.getOperatorAlphaLong();
  if (mEmergencyOnly && cm.getRadioState().isOn()) {
    plmn=Resources.getSystem().getText(com.android.internal.R.string.emergency_calls_only).toString();
  }
  if (rule != curSpnRule || !TextUtils.equals(spn,curSpn) || !TextUtils.equals(plmn,curPlmn)) {
    boolean showSpn=!mEmergencyOnly && (rule & SIMRecords.SPN_RULE_SHOW_SPN) == SIMRecords.SPN_RULE_SHOW_SPN;
    boolean showPlmn=(rule & SIMRecords.SPN_RULE_SHOW_PLMN) == SIMRecords.SPN_RULE_SHOW_PLMN;
    Intent intent=new Intent(Intents.SPN_STRINGS_UPDATED_ACTION);
    intent.addFlags(Intent.FLAG_RECEIVER_REPLACE_PENDING);
    intent.putExtra(Intents.EXTRA_SHOW_SPN,showSpn);
    intent.putExtra(Intents.EXTRA_SPN,spn);
    intent.putExtra(Intents.EXTRA_SHOW_PLMN,showPlmn);
    intent.putExtra(Intents.EXTRA_PLMN,plmn);
    phone.getContext().sendStickyBroadcast(intent);
  }
  curSpnRule=rule;
  curSpn=spn;
  curPlmn=plmn;
}
