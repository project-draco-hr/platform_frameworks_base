{
synchronized (mCallbacks) {
    final int N=mCallbacks.size();
    if (N <= 0) {
      return 0;
    }
    Object[] active=mActiveBroadcast;
    if (active == null || active.length < N) {
      mActiveBroadcast=active=new Object[N];
    }
    int i=0;
    for (    Callback cb : mCallbacks.values()) {
      active[i++]=cb;
    }
    return i;
  }
}
