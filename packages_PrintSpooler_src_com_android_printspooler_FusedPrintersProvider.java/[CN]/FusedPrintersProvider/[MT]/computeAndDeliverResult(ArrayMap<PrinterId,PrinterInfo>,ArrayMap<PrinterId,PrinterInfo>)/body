{
  List<PrinterInfo> printers=new ArrayList<PrinterInfo>();
  final int favoritePrinterCount=favoritePrinters.size();
  for (int i=0; i < favoritePrinterCount; i++) {
    PrinterInfo favoritePrinter=favoritePrinters.valueAt(i);
    PrinterInfo updatedPrinter=discoveredPrinters.remove(favoritePrinter.getId());
    if (updatedPrinter != null) {
      printers.add(updatedPrinter);
    }
 else {
      printers.add(favoritePrinter);
    }
  }
  final int printerCount=mPrinters.size();
  for (int i=0; i < printerCount; i++) {
    PrinterInfo printer=mPrinters.get(i);
    PrinterInfo updatedPrinter=discoveredPrinters.remove(printer.getId());
    if (updatedPrinter != null) {
      printers.add(updatedPrinter);
    }
  }
  printers.addAll(discoveredPrinters.values());
  mPrinters.clear();
  mPrinters.addAll(printers);
  if (isStarted()) {
    deliverResult(printers);
  }
 else {
    onContentChanged();
  }
}
