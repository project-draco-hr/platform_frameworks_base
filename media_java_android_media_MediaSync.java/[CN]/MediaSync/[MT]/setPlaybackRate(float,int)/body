{
  PlaybackSettings rateSettings=new PlaybackSettings();
  rateSettings.allowDefaults();
switch (audioMode) {
case PLAYBACK_RATE_AUDIO_MODE_DEFAULT:
    rateSettings.setSpeed(rate).setPitch(1.0f);
  break;
case PLAYBACK_RATE_AUDIO_MODE_STRETCH:
rateSettings.setSpeed(rate).setPitch(1.0f).setAudioFallbackMode(rateSettings.AUDIO_FALLBACK_MODE_FAIL);
break;
case PLAYBACK_RATE_AUDIO_MODE_RESAMPLE:
rateSettings.setSpeed(rate).setPitch(rate);
break;
default :
{
final String msg="Audio playback mode " + audioMode + " is not supported";
throw new IllegalArgumentException(msg);
}
}
setPlaybackSettings(rateSettings);
}
