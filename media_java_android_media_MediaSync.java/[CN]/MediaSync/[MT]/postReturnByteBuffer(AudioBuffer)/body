{
synchronized (mCallbackLock) {
    if (mCallbackHandler != null) {
      final MediaSync sync=this;
      mCallbackHandler.post(new Runnable(){
        public void run(){
synchronized (mCallbackLock) {
            if (mCallbackHandler == null || mCallbackHandler.getLooper().getThread() != Thread.currentThread()) {
              return;
            }
            if (mCallback != null) {
              mCallback.onAudioBufferConsumed(sync,audioBuffer.mByteBuffer,audioBuffer.mBufferIndex);
            }
          }
        }
      }
);
    }
  }
}
