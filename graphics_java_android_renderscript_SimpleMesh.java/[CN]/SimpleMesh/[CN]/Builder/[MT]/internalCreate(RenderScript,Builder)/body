{
  Type[] toDestroy=new Type[18];
  int toDestroyCount=0;
  int indexID=0;
  if (b.mIndexType.t != null) {
    indexID=b.mIndexType.t.mID;
  }
 else   if (b.mIndexType.size != 0) {
    b.mIndexType.t=b.newType(b.mIndexType.e,b.mIndexType.size);
    indexID=b.mIndexType.t.mID;
    toDestroy[toDestroyCount++]=b.mIndexType.t;
  }
  int[] IDs=new int[b.mVertexTypeCount];
  for (int ct=0; ct < b.mVertexTypeCount; ct++) {
    if (b.mVertexTypes[ct].t != null) {
      IDs[ct]=b.mVertexTypes[ct].t.mID;
    }
 else {
      b.mVertexTypes[ct].t=b.newType(b.mVertexTypes[ct].e,b.mVertexTypes[ct].size);
      IDs[ct]=b.mVertexTypes[ct].t.mID;
      toDestroy[toDestroyCount++]=b.mVertexTypes[ct].t;
    }
  }
  int id=rs.nSimpleMeshCreate(0,indexID,IDs,b.mPrimitive.mID);
  for (int ct=0; ct < toDestroyCount; ct++) {
    toDestroy[ct].destroy();
  }
  return new SimpleMesh(id,rs);
}
