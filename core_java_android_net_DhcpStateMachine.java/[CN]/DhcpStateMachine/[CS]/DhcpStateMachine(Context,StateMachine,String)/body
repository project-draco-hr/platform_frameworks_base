{
  super(TAG);
  mContext=context;
  mController=controller;
  mInterfaceName=intf;
  mAlarmManager=(AlarmManager)mContext.getSystemService(Context.ALARM_SERVICE);
  Intent dhcpRenewalIntent=new Intent(ACTION_DHCP_RENEW,null);
  mDhcpRenewalIntent=PendingIntent.getBroadcast(mContext,DHCP_RENEW,dhcpRenewalIntent,0);
  PowerManager powerManager=(PowerManager)mContext.getSystemService(Context.POWER_SERVICE);
  mDhcpRenewWakeLock=powerManager.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,WAKELOCK_TAG);
  mDhcpRenewWakeLock.setReferenceCounted(false);
  mBroadcastReceiver=new BroadcastReceiver(){
    @Override public void onReceive(    Context context,    Intent intent){
      if (DBG)       Log.d(TAG,"Sending a DHCP renewal " + this);
      mDhcpRenewWakeLock.acquire(40000);
      sendMessage(CMD_RENEW_DHCP);
    }
  }
;
  mContext.registerReceiver(mBroadcastReceiver,new IntentFilter(ACTION_DHCP_RENEW));
  addState(mDefaultState);
  addState(mStoppedState,mDefaultState);
  addState(mWaitBeforeStartState,mDefaultState);
  addState(mPollingState,mDefaultState);
  addState(mRunningState,mDefaultState);
  addState(mWaitBeforeRenewalState,mDefaultState);
  setInitialState(mStoppedState);
}
