{
  super(context,attrs,defStyle);
  LayoutInflater inflater=(LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
  inflater.inflate(R.layout.time_picker,this,true);
  mHourPicker=(NumberPicker)findViewById(R.id.hour);
  mHourPicker.setOnChangeListener(new NumberPicker.OnChangedListener(){
    public void onChanged(    NumberPicker spinner,    int oldVal,    int newVal){
      mCurrentHour=newVal;
      if (!mIs24HourView) {
        if (mCurrentHour == 12) {
          mCurrentHour=0;
        }
        if (!mIsAm) {
          mCurrentHour+=12;
        }
      }
      onTimeChanged();
    }
  }
);
  mDivider=(TextView)findViewById(R.id.divider);
  mDivider.setText(R.string.time_picker_separator);
  mMinutePicker=(NumberPicker)findViewById(R.id.minute);
  mMinutePicker.setRange(0,59);
  mMinutePicker.setSpeed(100);
  mMinutePicker.setFormatter(NumberPicker.TWO_DIGIT_FORMATTER);
  mMinutePicker.setOnChangeListener(new NumberPicker.OnChangedListener(){
    public void onChanged(    NumberPicker spinner,    int oldVal,    int newVal){
      mCurrentMinute=newVal;
      onTimeChanged();
    }
  }
);
  mAmPmPicker=(NumberPicker)findViewById(R.id.amPm);
  mAmPmPicker.setOnChangeListener(new OnChangedListener(){
    public void onChanged(    NumberPicker picker,    int oldVal,    int newVal){
      picker.requestFocus();
      if (mIsAm) {
        if (mCurrentHour < 12) {
          mCurrentHour+=12;
        }
      }
 else {
        if (mCurrentHour >= 12) {
          mCurrentHour-=12;
        }
      }
      mIsAm=!mIsAm;
      onTimeChanged();
    }
  }
);
  mAmPmStrings=new DateFormatSymbols().getAmPmStrings();
  configurePickerRanges();
  Calendar cal=Calendar.getInstance();
  setOnTimeChangedListener(NO_OP_CHANGE_LISTENER);
  setCurrentHour(cal.get(Calendar.HOUR_OF_DAY));
  setCurrentMinute(cal.get(Calendar.MINUTE));
  if (!isEnabled()) {
    setEnabled(false);
  }
}
