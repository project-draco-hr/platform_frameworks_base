{
  double samples[];
  int idx=0;
  if (dArray == null) {
    samples=new double[w * h];
  }
 else {
    samples=dArray;
  }
  for (int i=y; i < y + h; i++) {
    for (int j=x; j < x + w; j++) {
      samples[idx++]=getSampleDouble(j,i,b,data);
    }
  }
  return samples;
}
