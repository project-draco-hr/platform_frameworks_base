{
  super(ctx,view);
  mTransformationHelper.setCustomTransformation(new ViewTransformationHelper.CustomTransformation(){
    @Override public boolean transformTo(    TransformState ownState,    TransformableView notification,    final Runnable endRunnable){
      if (!(notification instanceof HybridNotificationView)) {
        return false;
      }
      TransformState otherState=notification.getCurrentState(TRANSFORMING_VIEW_TITLE);
      final View text=ownState.getTransformedView();
      CrossFadeHelper.fadeOut(text,endRunnable);
      if (otherState != null) {
        int[] otherStablePosition=otherState.getLaidOutLocationOnScreen();
        int[] ownPosition=ownState.getLaidOutLocationOnScreen();
        text.animate().translationY((otherStablePosition[1] + otherState.getTransformedView().getHeight() - ownPosition[1]) * 0.33f).setDuration(StackStateAnimator.ANIMATION_DURATION_STANDARD).setInterpolator(Interpolators.FAST_OUT_SLOW_IN).withEndAction(new Runnable(){
          @Override public void run(){
            if (endRunnable != null) {
              endRunnable.run();
            }
            TransformState.setClippingDeactivated(text,false);
          }
        }
);
        TransformState.setClippingDeactivated(text,true);
        otherState.recycle();
      }
      return true;
    }
    @Override public boolean transformFrom(    TransformState ownState,    TransformableView notification){
      if (!(notification instanceof HybridNotificationView)) {
        return false;
      }
      TransformState otherState=notification.getCurrentState(TRANSFORMING_VIEW_TITLE);
      final View text=ownState.getTransformedView();
      boolean isVisible=text.getVisibility() == View.VISIBLE;
      CrossFadeHelper.fadeIn(text);
      if (otherState != null) {
        int[] otherStablePosition=otherState.getLaidOutLocationOnScreen();
        int[] ownStablePosition=ownState.getLaidOutLocationOnScreen();
        if (!isVisible) {
          text.setTranslationY((otherStablePosition[1] + otherState.getTransformedView().getHeight() - ownStablePosition[1]) * 0.33f);
        }
        text.animate().translationY(0).setDuration(StackStateAnimator.ANIMATION_DURATION_STANDARD).setInterpolator(Interpolators.FAST_OUT_SLOW_IN).withEndAction(new Runnable(){
          @Override public void run(){
            TransformState.setClippingDeactivated(text,false);
          }
        }
);
        TransformState.setClippingDeactivated(text,true);
        otherState.recycle();
      }
      return true;
    }
  }
,TRANSFORMING_VIEW_TEXT);
}
