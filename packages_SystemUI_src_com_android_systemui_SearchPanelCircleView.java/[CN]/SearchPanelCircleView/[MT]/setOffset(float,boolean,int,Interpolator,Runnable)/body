{
  if (!animate) {
    mOffset=offset;
    updateLayout();
    if (endRunnable != null) {
      endRunnable.run();
    }
  }
 else {
    if (mOffsetAnimator != null) {
      mOffsetAnimator.removeAllListeners();
      mOffsetAnimator.cancel();
    }
    mOffsetAnimator=ValueAnimator.ofFloat(mOffset,offset);
    mOffsetAnimator.addUpdateListener(mOffsetUpdateListener);
    mOffsetAnimator.addListener(new AnimatorListenerAdapter(){
      @Override public void onAnimationEnd(      Animator animation){
        mOffsetAnimator=null;
        if (endRunnable != null) {
          endRunnable.run();
        }
      }
    }
);
    Interpolator desiredInterpolator=interpolator != null ? interpolator : offset == 0 ? mDisappearInterpolator : mAppearInterpolator;
    mOffsetAnimator.setInterpolator(desiredInterpolator);
    mOffsetAnimator.setStartDelay(startDelay);
    mOffsetAnimator.setDuration(300);
    mOffsetAnimator.start();
    mOffsetAnimatingIn=offset != 0;
  }
}
