{
  int key;
  final SparseMappingTable data=new SparseMappingTable();
  final SparseMappingTable.Table table=new SparseMappingTable.Table(data);
  key=table.getOrAddKey(ID1,1);
  table.setValue(key,VALUE1);
  data.reset();
  table.resetTable();
  key=table.getOrAddKey(ID2,1);
  table.setValue(key,VALUE2);
  Log.d(TAG,"before: " + data.dumpInternalState(true));
  Log.d(TAG,"before: " + table.dumpInternalState());
  final Parcel dataParcel=Parcel.obtain();
  data.writeToParcel(dataParcel);
  final Parcel tableParcel=Parcel.obtain();
  table.writeToParcel(tableParcel);
  dataParcel.setDataPosition(0);
  final SparseMappingTable data1=new SparseMappingTable();
  data1.readFromParcel(dataParcel);
  Assert.assertEquals(0,dataParcel.dataAvail());
  dataParcel.recycle();
  tableParcel.setDataPosition(0);
  final SparseMappingTable.Table table1=new SparseMappingTable.Table(data1);
  table1.readFromParcel(tableParcel);
  Assert.assertEquals(0,tableParcel.dataAvail());
  tableParcel.recycle();
  key=table1.getKey(ID1);
  Assert.assertEquals(SparseMappingTable.INVALID_KEY,key);
  key=table1.getKey(ID2);
  Assert.assertEquals(VALUE2,table1.getValue(key));
  Log.d(TAG," after: " + data1.dumpInternalState(true));
  Log.d(TAG," after: " + table1.dumpInternalState());
}
