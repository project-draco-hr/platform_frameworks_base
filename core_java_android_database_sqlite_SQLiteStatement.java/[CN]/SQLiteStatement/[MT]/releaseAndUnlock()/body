{
  releaseReference();
  if (mState == TRANS_STARTED) {
    try {
      mDatabase.setTransactionSuccessful();
    }
  finally {
      mDatabase.endTransaction();
    }
  }
 else   if (mState == LOCK_ACQUIRED) {
    mDatabase.unlock();
  }
  if (mStatementType == DatabaseUtils.STATEMENT_COMMIT || mStatementType == DatabaseUtils.STATEMENT_ABORT) {
    mDatabase.resetTransactionUsingExecSqlFlag();
  }
  clearBindings();
  release();
  mDatabase=mOrigDb;
  nHandle=mDatabase.mNativeHandle;
}
