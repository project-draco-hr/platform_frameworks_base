{
switch (imageType) {
case TYPE_BYTE_BINARY:
    if (cm.hasAlpha()) {
      throw new IllegalArgumentException(Messages.getString("awt.227"));
    }
  int pixel_bits=0;
int mapSize=cm.getMapSize();
if (mapSize <= 2) {
pixel_bits=1;
}
 else if (mapSize <= 4) {
pixel_bits=2;
}
 else if (mapSize <= 16) {
pixel_bits=4;
}
 else {
throw new IllegalArgumentException(Messages.getString("awt.221"));
}
raster=Raster.createPackedRaster(DataBuffer.TYPE_BYTE,width,height,1,pixel_bits,null);
break;
case TYPE_BYTE_INDEXED:
raster=Raster.createInterleavedRaster(DataBuffer.TYPE_BYTE,width,height,1,null);
break;
default :
throw new IllegalArgumentException(Messages.getString("awt.222"));
}
if (!cm.isCompatibleRaster(raster)) {
throw new IllegalArgumentException(Messages.getString("awt.223"));
}
this.cm=cm;
this.imageType=imageType;
imageSurf=createImageSurface(imageType);
}
