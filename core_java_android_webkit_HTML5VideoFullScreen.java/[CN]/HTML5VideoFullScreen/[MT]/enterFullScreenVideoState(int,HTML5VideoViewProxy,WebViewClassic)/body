{
  mFullScreenMode=FULLSCREEN_SURFACECREATING;
  mCurrentBufferPercentage=0;
  mPlayer.setOnBufferingUpdateListener(mBufferingUpdateListener);
  mProxy=proxy;
  mVideoSurfaceView.getHolder().addCallback(mSHCallback);
  mVideoSurfaceView.getHolder().setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
  mVideoSurfaceView.setFocusable(true);
  mVideoSurfaceView.setFocusableInTouchMode(true);
  mVideoSurfaceView.requestFocus();
  mVideoSurfaceView.setOnKeyListener(mProxy);
  mLayout=new FrameLayout(mProxy.getContext());
  FrameLayout.LayoutParams layoutParams=new FrameLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,ViewGroup.LayoutParams.WRAP_CONTENT,Gravity.CENTER);
  mLayout.addView(getSurfaceView(),layoutParams);
  mLayout.setVisibility(View.VISIBLE);
  WebChromeClient client=webView.getWebChromeClient();
  if (client != null) {
    if (DebugFlags.TRACE_CALLBACK)     Log.d(CallbackProxy.LOGTAG,"onShowCustomView");
    client.onShowCustomView(mLayout,mCallback);
    if (webView.getViewManager() != null)     webView.getViewManager().hideAll();
    if (DebugFlags.TRACE_CALLBACK) {
      Log.d(CallbackProxy.LOGTAG,"getVideoLoadingProgressView");
    }
    mProgressView=client.getVideoLoadingProgressView();
    if (mProgressView != null) {
      mLayout.addView(mProgressView,layoutParams);
      mProgressView.setVisibility(View.VISIBLE);
    }
  }
}
