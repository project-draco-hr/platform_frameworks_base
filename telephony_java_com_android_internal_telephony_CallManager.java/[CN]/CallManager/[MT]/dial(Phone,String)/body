{
  if (hasActiveFgCall()) {
    Phone activePhone=getActiveFgCall().getPhone();
    boolean hasBgCall=!(activePhone.getBackgroundCall().isIdle());
    if (LOCAL_DEBUG) {
      Log.d(LOG_TAG,"hasBgCall: " + hasBgCall + "sameChannel:"+ (activePhone != phone));
    }
    if (activePhone != phone) {
      if (hasBgCall) {
        Log.d(LOG_TAG,"Hangup");
        getActiveFgCall().hangup();
      }
 else {
        Log.d(LOG_TAG,"Switch");
        activePhone.switchHoldingAndActive();
      }
    }
  }
  return phone.dial(dialString);
}
