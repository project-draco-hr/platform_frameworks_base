{
  Call call;
  StringBuilder b=new StringBuilder();
  b.append("########### Dump CallManager ############");
  b.append("\nCM state = " + getState());
  call=getActiveFgCall();
  b.append("\n   - FG call: " + getActiveFgCallState());
  b.append(" from " + call.getPhone());
  b.append("\n     Conn: ").append(getFgCallConnections());
  call=getFirstActiveBgCall();
  b.append("\n   - BG call: " + call.getState());
  b.append(" from " + call.getPhone());
  b.append("\n     Conn: ").append(getBgCallConnections());
  call=getFirstActiveRingingCall();
  b.append("\n   - RINGING call: " + call.getState());
  b.append(" from " + call.getPhone());
  b.append("\n");
  for (  Phone phone : getAllPhones()) {
    if (phone != null) {
      b.append("\n Phone: " + phone + ", name = "+ phone.getPhoneName()+ ", state = "+ phone.getState());
      call=phone.getForegroundCall();
      b.append("\n   - FG call: ").append(call);
      b.append("  State: ").append(call.getState());
      b.append("\n     Conn: ").append(call.getConnections());
      call=phone.getBackgroundCall();
      b.append("\n   - BG call: ").append(call);
      b.append("  State: ").append(call.getState());
      b.append("\n     Conn: ").append(call.getConnections());
      call=phone.getRingingCall();
      b.append("\n   - RINGING call: ").append(call);
      b.append("  State: ").append(call.getState());
      b.append("\n     Conn: ").append(call.getConnections());
    }
  }
  b.append("\n########## End Dump CallManager ##########");
  return b.toString();
}
