{
  super.onCreate(savedInstanceState);
  FrameLayout content=new FrameLayout(this);
  mTextureView=new TextureView(this);
  mTextureView.setSurfaceTextureListener(this);
  Button button=new Button(this);
  button.setText("Copy bitmap to /sdcard/textureview.png");
  button.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Bitmap b=mTextureView.getBitmap();
      try {
        FileOutputStream out=new FileOutputStream(Environment.getExternalStorageDirectory() + "/textureview.png");
        try {
          b.compress(Bitmap.CompressFormat.PNG,100,out);
        }
  finally {
          try {
            out.close();
          }
 catch (          IOException e) {
          }
        }
      }
 catch (      FileNotFoundException e) {
      }
    }
  }
);
  content.addView(mTextureView,new FrameLayout.LayoutParams(500,400,Gravity.CENTER));
  content.addView(button,new FrameLayout.LayoutParams(FrameLayout.LayoutParams.WRAP_CONTENT,FrameLayout.LayoutParams.WRAP_CONTENT,Gravity.CENTER_HORIZONTAL | Gravity.BOTTOM));
  setContentView(content);
}
