{
  boolean enabled=mLockPatternUtils.isEmergencyCallCapable() || (phoneState == TelephonyManager.CALL_STATE_OFFHOOK);
  if (enabled && KeyguardUpdateMonitor.isSimLocked(simState)) {
    enabled=mLockPatternUtils.isEmergencyCallEnabledWhileSimLocked();
  }
  mLockPatternUtils.updateEmergencyCallButtonState(this,phoneState,enabled,KeyguardViewManager.USE_UPPER_CASE,false);
}
