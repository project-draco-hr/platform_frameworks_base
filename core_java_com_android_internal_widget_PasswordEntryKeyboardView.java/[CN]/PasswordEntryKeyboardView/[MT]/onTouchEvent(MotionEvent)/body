{
  if (((PasswordEntryKeyboard)getKeyboard()).getExtension() == 0) {
    return super.onTouchEvent(me);
  }
  if (me.getY() < 0) {
    if (mExtensionVisible) {
      int action=me.getAction();
      if (mFirstEvent)       action=MotionEvent.ACTION_DOWN;
      mFirstEvent=false;
      MotionEvent translated=MotionEvent.obtain(me.getEventTime(),me.getEventTime(),action,me.getX(),me.getY() + mExtension.getHeight(),me.getMetaState());
      boolean result=mExtension.onTouchEvent(translated);
      translated.recycle();
      if (me.getAction() == MotionEvent.ACTION_UP || me.getAction() == MotionEvent.ACTION_CANCEL) {
        closeExtension();
      }
      return result;
    }
 else {
      if (openExtension()) {
        MotionEvent cancel=MotionEvent.obtain(me.getDownTime(),me.getEventTime(),MotionEvent.ACTION_CANCEL,me.getX() - 100,me.getY() - 100,0);
        super.onTouchEvent(cancel);
        cancel.recycle();
        if (mExtension.getHeight() > 0) {
          MotionEvent translated=MotionEvent.obtain(me.getEventTime(),me.getEventTime(),MotionEvent.ACTION_DOWN,me.getX(),me.getY() + mExtension.getHeight(),me.getMetaState());
          mExtension.onTouchEvent(translated);
          translated.recycle();
        }
 else {
          mFirstEvent=true;
        }
      }
      return true;
    }
  }
 else   if (mExtensionVisible) {
    closeExtension();
    MotionEvent down=MotionEvent.obtain(me.getEventTime(),me.getEventTime(),MotionEvent.ACTION_DOWN,me.getX(),me.getY(),me.getMetaState());
    super.onTouchEvent(down);
    down.recycle();
    return super.onTouchEvent(me);
  }
 else {
    return super.onTouchEvent(me);
  }
}
