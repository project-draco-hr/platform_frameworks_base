{
  if (mExtensionPopup == null) {
    int[] windowLocation=new int[2];
    mExtensionPopup=new PopupWindow(getContext());
    mExtensionPopup.setBackgroundDrawable(null);
    LayoutInflater li=(LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    mExtension=(PasswordEntryKeyboardView)li.inflate(R.layout.password_keyboard_input,null);
    mExtension.setOnKeyboardActionListener(getOnKeyboardActionListener());
    mExtension.setPopupParent(this);
    mExtension.setPopupOffset(0,-windowLocation[1]);
    Keyboard keyboard;
    mExtension.setKeyboard(keyboard=new PasswordEntryKeyboard(getContext(),((PasswordEntryKeyboard)getKeyboard()).getExtension()));
    mExtensionPopup.setContentView(mExtension);
    mExtensionPopup.setWidth(getWidth());
    mExtensionPopup.setHeight(keyboard.getHeight());
    getLocationInWindow(windowLocation);
    mExtension.setPopupOffset(0,-windowLocation[1] - 30);
    mExtensionPopup.showAtLocation(this,0,0,-keyboard.getHeight() + windowLocation[1]);
  }
 else {
    mExtension.setVisibility(VISIBLE);
  }
}
