{
  mRS.samplerBegin();
  mRS.samplerSet(RenderScript.SamplerParam.FILTER_MIN,RenderScript.SamplerValue.LINEAR_MIP_LINEAR);
  mRS.samplerSet(RenderScript.SamplerParam.WRAP_MODE_S,RenderScript.SamplerValue.CLAMP);
  mRS.samplerSet(RenderScript.SamplerParam.WRAP_MODE_T,RenderScript.SamplerValue.CLAMP);
  mSampler=mRS.samplerCreate();
  mRS.programFragmentBegin(null,null);
  mRS.programFragmentSetTexEnable(0,true);
  mPFImages=mRS.programFragmentCreate();
  mPFImages.setName("PF");
  mPFImages.bindSampler(mSampler,0);
  mRS.programFragmentStoreBegin(null,null);
  mRS.programFragmentStoreDepthFunc(RenderScript.DepthFunc.ALWAYS);
  mRS.programFragmentStoreDitherEnable(false);
  mRS.programFragmentStoreDepthMask(false);
  mRS.programFragmentStoreBlendFunc(RenderScript.BlendSrcFunc.ONE,RenderScript.BlendDstFunc.ONE);
  mPFSBackground=mRS.programFragmentStoreCreate();
  mPFSBackground.setName("PFS");
  mPVAlloc=new ProgramVertexAlloc(mRS);
  mRS.programVertexBegin(null,null);
  mRS.programVertexSetTextureMatrixEnable(true);
  mPV=mRS.programVertexCreate();
  mPV.setName("PV");
  mPV.bindAllocation(0,mPVAlloc.mAlloc);
  mPVAlloc.setupProjectionNormalized(320,480);
  mRS.contextBindProgramVertex(mPV);
  Log.e("rs","Done loading named");
{
    mIcons=new RenderScript.Allocation[4];
    mAllocIconIDBuf=new int[mIcons.length];
    mAllocIconID=mRS.allocationCreatePredefSized(RenderScript.ElementPredefined.USER_I32,mAllocIconIDBuf.length);
    BitmapDrawable bd;
    Bitmap b;
    bd=(BitmapDrawable)mRes.getDrawable(R.drawable.browser);
    mIcons[0]=mRS.allocationCreateFromBitmap(bd.getBitmap(),RenderScript.ElementPredefined.RGB_565,true);
    bd=(BitmapDrawable)mRes.getDrawable(R.drawable.market);
    mIcons[1]=mRS.allocationCreateFromBitmap(bd.getBitmap(),RenderScript.ElementPredefined.RGB_565,true);
    bd=(BitmapDrawable)mRes.getDrawable(R.drawable.photos);
    mIcons[2]=mRS.allocationCreateFromBitmap(bd.getBitmap(),RenderScript.ElementPredefined.RGB_565,true);
    bd=(BitmapDrawable)mRes.getDrawable(R.drawable.settings);
    mIcons[3]=mRS.allocationCreateFromBitmap(bd.getBitmap(),RenderScript.ElementPredefined.RGB_565,true);
    for (int ct=0; ct < mIcons.length; ct++) {
      mIcons[ct].uploadToTexture(0);
      mAllocIconIDBuf[ct]=mIcons[ct].getID();
    }
    mAllocIconID.data(mAllocIconIDBuf);
  }
}
