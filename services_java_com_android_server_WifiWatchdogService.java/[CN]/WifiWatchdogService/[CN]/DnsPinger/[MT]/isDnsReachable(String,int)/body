{
  try {
    DatagramSocket socket=new DatagramSocket();
    socket.setSoTimeout(timeout);
    byte[] buf=new byte[DNS_QUERY_BASE_SIZE];
    fillQuery(buf);
    InetAddress dnsAddress=InetAddress.getByName(dns);
    DatagramPacket packet=new DatagramPacket(buf,buf.length,dnsAddress,DNS_PORT);
    socket.send(packet);
    DatagramPacket replyPacket=new DatagramPacket(buf,buf.length);
    socket.receive(replyPacket);
    return true;
  }
 catch (  SocketException e) {
    if (V) {
      Log.v(TAG,"DnsPinger.isReachable received SocketException",e);
    }
    return false;
  }
catch (  UnknownHostException e) {
    if (V) {
      Log.v(TAG,"DnsPinger.isReachable is unable to resolve the DNS host",e);
    }
    return false;
  }
catch (  SocketTimeoutException e) {
    return false;
  }
catch (  IOException e) {
    if (V) {
      Log.v(TAG,"DnsPinger.isReachable got an IOException",e);
    }
    return false;
  }
catch (  Exception e) {
    if (V || Config.LOGD) {
      Log.d(TAG,"DnsPinger.isReachable got an unknown exception",e);
    }
    return false;
  }
}
