{
  mShouldCancel=false;
  if (V) {
    myLogV("handleCheckAp: AccessPoint: " + ap);
  }
  if (mState == WatchdogState.SLEEP) {
    if (V) {
      Slog.v(TAG,"  Sleeping (in " + mSsid + "), so returning");
    }
    return;
  }
  mState=WatchdogState.CHECKING_AP;
  incrementBssidCheckCount();
  if (getBssidCheckCount() > getMaxApChecks()) {
    if (V) {
      Slog.v(TAG,"  Passed the max attempts (" + getMaxApChecks() + "), going to sleep for "+ mSsid);
    }
    mHandler.sleep(mSsid);
    return;
  }
  boolean isApAlive=checkDnsConnectivity();
  if (V) {
    Slog.v(TAG,"  Is it alive: " + isApAlive);
  }
  if (isApAlive) {
    handleApAlive(ap);
  }
 else {
    handleApUnresponsive(ap);
  }
}
