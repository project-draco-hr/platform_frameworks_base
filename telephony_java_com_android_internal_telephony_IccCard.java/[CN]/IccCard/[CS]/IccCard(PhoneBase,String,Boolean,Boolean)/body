{
  mLogTag=logTag;
  mDbg=dbg;
  if (mDbg)   log("[IccCard] Creating card type " + (is3gpp ? "3gpp" : "3gpp2"));
  mPhone=phone;
  this.is3gpp=is3gpp;
  mCdmaSSM=CdmaSubscriptionSourceManager.getInstance(mPhone.getContext(),mPhone.mCM,mHandler,EVENT_CDMA_SUBSCRIPTION_SOURCE_CHANGED,null);
  if (phone.mCM.getLteOnCdmaMode() == Phone.LTE_ON_CDMA_TRUE && phone instanceof CDMALTEPhone) {
    mIccFileHandler=new CdmaLteUiccFileHandler(this,"",mPhone.mCM);
    mIccRecords=new CdmaLteUiccRecords(this,mPhone.mContext,mPhone.mCM);
  }
 else {
    mIccFileHandler=is3gpp ? new SIMFileHandler(this,"",mPhone.mCM) : new RuimFileHandler(this,"",mPhone.mCM);
    mIccRecords=is3gpp ? new SIMRecords(this,mPhone.mContext,mPhone.mCM) : new RuimRecords(this,mPhone.mContext,mPhone.mCM);
  }
  mCatService=CatService.getInstance(mPhone.mCM,mIccRecords,mPhone.mContext,mIccFileHandler,this);
  mPhone.mCM.registerForOffOrNotAvailable(mHandler,EVENT_RADIO_OFF_OR_NOT_AVAILABLE,null);
  mPhone.mCM.registerForOn(mHandler,EVENT_RADIO_ON,null);
  mPhone.mCM.registerForIccStatusChanged(mHandler,EVENT_ICC_STATUS_CHANGED,null);
}
