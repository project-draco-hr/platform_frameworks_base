{
  IccCardApplication app;
  if (appIndex >= 0 && appIndex < IccCardStatus.CARD_MAX_APPS) {
    app=mIccCardStatus.getApplication(appIndex);
  }
 else {
    Log.e(mLogTag,"[IccCard] Invalid Subscription Application index:" + appIndex);
    return IccCard.State.ABSENT;
  }
  if (app == null) {
    Log.e(mLogTag,"[IccCard] Subscription Application in not present");
    return IccCard.State.ABSENT;
  }
  if (app.pin1.isPermBlocked()) {
    return IccCard.State.PERM_DISABLED;
  }
  if (app.app_state.isPinRequired()) {
    return IccCard.State.PIN_REQUIRED;
  }
  if (app.app_state.isPukRequired()) {
    return IccCard.State.PUK_REQUIRED;
  }
  if (app.app_state.isSubscriptionPersoEnabled()) {
    return IccCard.State.NETWORK_LOCKED;
  }
  if (app.app_state.isAppReady()) {
    return IccCard.State.READY;
  }
  if (app.app_state.isAppNotReady()) {
    return IccCard.State.NOT_READY;
  }
  return IccCard.State.NOT_READY;
}
