{
  if (mIccCardStatus == null) {
    Log.e(mLogTag,"[IccCard] IccCardStatus is null");
    return IccCard.State.ABSENT;
  }
  if (!mIccCardStatus.getCardState().isCardPresent()) {
    return IccCard.State.ABSENT;
  }
  RadioState currentRadioState=mPhone.mCM.getRadioState();
  if (currentRadioState == RadioState.RADIO_OFF || currentRadioState == RadioState.RADIO_UNAVAILABLE || currentRadioState == RadioState.SIM_NOT_READY || currentRadioState == RadioState.RUIM_NOT_READY || currentRadioState == RadioState.NV_NOT_READY || (currentRadioState == RadioState.NV_READY && (mPhone.getLteOnCdmaMode() != Phone.LTE_ON_CDMA_TRUE))) {
    return IccCard.State.NOT_READY;
  }
  if (currentRadioState == RadioState.SIM_LOCKED_OR_ABSENT || currentRadioState == RadioState.SIM_READY || currentRadioState == RadioState.RUIM_LOCKED_OR_ABSENT || currentRadioState == RadioState.RUIM_READY || (currentRadioState == RadioState.NV_READY && (mPhone.getLteOnCdmaMode() == Phone.LTE_ON_CDMA_TRUE))) {
    State csimState=getAppState(mIccCardStatus.getCdmaSubscriptionAppIndex());
    State usimState=getAppState(mIccCardStatus.getGsmUmtsSubscriptionAppIndex());
    if (mDbg)     log("USIM=" + usimState + " CSIM="+ csimState);
    if (mPhone.getLteOnCdmaMode() == Phone.LTE_ON_CDMA_TRUE) {
      return getConsolidatedState(csimState,usimState,csimState);
    }
    if (currentRadioState == RadioState.RUIM_LOCKED_OR_ABSENT || currentRadioState == RadioState.RUIM_READY) {
      return csimState;
    }
    return usimState;
  }
  return IccCard.State.ABSENT;
}
