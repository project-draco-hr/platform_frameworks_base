{
  FileOutputStream out=null;
  File tmp=null;
  try {
    tmp=File.createTempFile("journal","",dir);
    tmp.setReadable(true,false);
    out=new FileOutputStream(tmp);
    out.write(content.getBytes());
    FileUtils.sync(out);
    tmp.renameTo(file);
  }
 catch (  IOException e) {
    Slog.e(TAG,"Failed to write update",e);
  }
 finally {
    if (tmp != null) {
      tmp.delete();
    }
    IoUtils.closeQuietly(out);
  }
}
