{
  StringBuilder summary=new StringBuilder();
  if (isActive() && mConfig != null && mConfig.isPasspoint()) {
    summary.append(getSummary(mContext,getDetailedState(),false,mConfig.providerFriendlyName));
  }
 else   if (isActive()) {
    summary.append(getSummary(mContext,getDetailedState(),mInfo != null && mInfo.isEphemeral()));
  }
 else   if (mConfig != null && mConfig.isPasspoint()) {
    String format=mContext.getString(R.string.available_via_passpoint);
    summary.append(String.format(format,mConfig.providerFriendlyName));
  }
 else   if (mConfig != null && mConfig.hasNoInternetAccess()) {
    summary.append(mContext.getString(R.string.wifi_no_internet));
  }
 else   if (mConfig != null && !mConfig.getNetworkSelectionStatus().isNetworkEnabled()) {
    WifiConfiguration.NetworkSelectionStatus networkStatus=mConfig.getNetworkSelectionStatus();
switch (networkStatus.getNetworkSelectionDisableReason()) {
case WifiConfiguration.NetworkSelectionStatus.DISABLED_AUTHENTICATION_FAILURE:
      summary.append(mContext.getString(R.string.wifi_disabled_password_failure));
    break;
case WifiConfiguration.NetworkSelectionStatus.DISABLED_DHCP_FAILURE:
case WifiConfiguration.NetworkSelectionStatus.DISABLED_DNS_FAILURE:
  summary.append(mContext.getString(R.string.wifi_disabled_network_failure));
break;
case WifiConfiguration.NetworkSelectionStatus.DISABLED_ASSOCIATION_REJECTION:
summary.append(mContext.getString(R.string.wifi_disabled_generic));
break;
}
}
 else if (mRssi == Integer.MAX_VALUE) {
summary.append(mContext.getString(R.string.wifi_not_in_range));
}
 else {
if (mConfig != null) {
summary.append(mContext.getString(R.string.wifi_remembered));
}
}
if (WifiTracker.sVerboseLogging > 0) {
if (mInfo != null && mNetworkInfo != null) {
summary.append(" f=" + Integer.toString(mInfo.getFrequency()));
}
summary.append(" " + getVisibilityStatus());
if (mConfig != null && !mConfig.getNetworkSelectionStatus().isNetworkEnabled()) {
summary.append(" (" + mConfig.getNetworkSelectionStatus().getNetworkStatusString());
if (mConfig.getNetworkSelectionStatus().getDisableTime() > 0) {
long now=System.currentTimeMillis();
long diff=(now - mConfig.getNetworkSelectionStatus().getDisableTime()) / 1000;
long sec=diff % 60;
long min=(diff / 60) % 60;
long hour=(min / 60) % 60;
summary.append(", ");
if (hour > 0) summary.append(Long.toString(hour) + "h ");
summary.append(Long.toString(min) + "m ");
summary.append(Long.toString(sec) + "s ");
}
summary.append(")");
}
if (mConfig != null) {
WifiConfiguration.NetworkSelectionStatus networkStatus=mConfig.getNetworkSelectionStatus();
for (int index=WifiConfiguration.NetworkSelectionStatus.NETWORK_SELECTION_ENABLE; index < WifiConfiguration.NetworkSelectionStatus.NETWORK_SELECTION_DISABLED_MAX; index++) {
if (networkStatus.getDisableReasonCounter(index) != 0) {
summary.append(" " + WifiConfiguration.NetworkSelectionStatus.getNetworkDisableReasonString(index) + "="+ networkStatus.getDisableReasonCounter(index));
}
}
}
}
return summary.toString();
}
