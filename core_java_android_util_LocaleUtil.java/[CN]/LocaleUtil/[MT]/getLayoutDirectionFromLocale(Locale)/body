{
  if (locale == null || locale.equals(Locale.ROOT)) {
    return TEXT_LAYOUT_DIRECTION_UNDEFINED_DO_NOT_USE;
  }
  final String localeWithSubtags=ICU.addLikelySubtags(locale.toString());
  if (localeWithSubtags == null)   return getLayoutDirectionFromFirstChar(locale);
  if (localeWithSubtags.length() <= 7 || localeWithSubtags.charAt(2) != UNDERSCORE_CHAR || localeWithSubtags.charAt(7) != UNDERSCORE_CHAR) {
    return getLayoutDirectionFromFirstChar(locale);
  }
  final String scriptSubtag=localeWithSubtags.substring(3,7);
  if (scriptSubtag.equalsIgnoreCase(ARAB_SCRIPT_SUBTAG) || scriptSubtag.equalsIgnoreCase(HEBR_SCRIPT_SUBTAG)) {
    return TEXT_LAYOUT_DIRECTION_RTL_DO_NOT_USE;
  }
  return TEXT_LAYOUT_DIRECTION_LTR_DO_NOT_USE;
}
