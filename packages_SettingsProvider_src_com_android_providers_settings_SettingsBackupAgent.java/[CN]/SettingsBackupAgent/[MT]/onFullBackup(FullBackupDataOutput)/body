{
  byte[] systemSettingsData=getSystemSettings();
  byte[] secureSettingsData=getSecureSettings();
  byte[] locale=mSettingsHelper.getLocaleData();
  byte[] wifiSupplicantData=getWifiSupplicant(FILE_WIFI_SUPPLICANT);
  byte[] wifiConfigData=getFileData(mWifiConfigFile);
  String root=getFilesDir().getAbsolutePath();
  File stage=new File(root,STAGE_FILE);
  try {
    FileOutputStream filestream=new FileOutputStream(stage);
    BufferedOutputStream bufstream=new BufferedOutputStream(filestream);
    DataOutputStream out=new DataOutputStream(bufstream);
    out.writeInt(FULL_BACKUP_VERSION);
    out.writeInt(systemSettingsData.length);
    out.write(systemSettingsData);
    out.writeInt(secureSettingsData.length);
    out.write(secureSettingsData);
    out.writeInt(locale.length);
    out.write(locale);
    out.writeInt(wifiSupplicantData.length);
    out.write(wifiSupplicantData);
    out.writeInt(wifiConfigData.length);
    out.write(wifiConfigData);
    out.flush();
    fullBackupFile(stage,data);
  }
  finally {
    stage.delete();
  }
}
