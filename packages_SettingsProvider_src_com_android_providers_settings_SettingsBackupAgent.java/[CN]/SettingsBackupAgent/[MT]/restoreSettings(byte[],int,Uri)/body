{
  if (DEBUG)   Log.i(TAG,"restoreSettings: " + contentUri);
  String[] whitelist=null;
  if (contentUri.equals(Settings.Secure.CONTENT_URI)) {
    whitelist=Settings.Secure.SETTINGS_TO_BACKUP;
  }
 else   if (contentUri.equals(Settings.System.CONTENT_URI)) {
    whitelist=Settings.System.SETTINGS_TO_BACKUP;
  }
  ContentValues cv=new ContentValues(2);
  int pos=0;
  while (pos < bytes) {
    int length=readInt(settings,pos);
    pos+=4;
    String settingName=length > 0 ? new String(settings,pos,length) : null;
    pos+=length;
    length=readInt(settings,pos);
    pos+=4;
    String settingValue=length > 0 ? new String(settings,pos,length) : null;
    pos+=length;
    if (!TextUtils.isEmpty(settingName) && !TextUtils.isEmpty(settingValue)) {
      if (invalidSavedSetting(whitelist,settingName)) {
        continue;
      }
      if (mSettingsHelper.restoreValue(settingName,settingValue)) {
        cv.clear();
        cv.put(Settings.NameValueTable.NAME,settingName);
        cv.put(Settings.NameValueTable.VALUE,settingValue);
        getContentResolver().insert(contentUri,cv);
      }
    }
  }
}
