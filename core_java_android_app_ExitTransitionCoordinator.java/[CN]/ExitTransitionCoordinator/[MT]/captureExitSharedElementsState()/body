{
  Bundle bundle=new Bundle();
  Rect bounds=new Rect();
  for (int i=0; i < mSharedElementNames.size(); i++) {
    String name=mSharedElementNames.get(i);
    Bundle sharedElementState=mExitSharedElementBundle.getBundle(name);
    if (sharedElementState != null) {
      bundle.putBundle(name,sharedElementState);
    }
 else {
      View view=mSharedElements.get(i);
      captureSharedElementState(view,name,bundle,bounds);
    }
  }
  return bundle;
}
