{
  Transition sharedElementTransition=getSharedElementExitTransition();
  Transition viewsTransition=getExitTransition();
  Transition transition=mergeTransitions(sharedElementTransition,viewsTransition);
  ViewGroup decorView=getDecor();
  if (transition != null && decorView != null) {
    setGhostVisibility(View.INVISIBLE);
    scheduleGhostVisibilityChange(View.INVISIBLE);
    if (viewsTransition != null) {
      setTransitioningViewsVisiblity(View.VISIBLE,false);
    }
    TransitionManager.beginDelayedTransition(decorView,transition);
    scheduleGhostVisibilityChange(View.VISIBLE);
    setGhostVisibility(View.VISIBLE);
    if (viewsTransition != null) {
      setTransitioningViewsVisiblity(View.INVISIBLE,false);
    }
    decorView.invalidate();
  }
 else {
    transitionStarted();
  }
}
