{
  if (!mIsExitStarted) {
    mIsExitStarted=true;
    pauseInput();
    ViewGroup decorView=getDecor();
    if (decorView != null) {
      decorView.suppressLayout(true);
    }
    mHandler=new Handler(){
      @Override public void handleMessage(      Message msg){
        mIsCanceled=true;
        finish();
      }
    }
;
    delayCancel();
    moveSharedElementsToOverlay();
    if (decorView != null && decorView.getBackground() == null) {
      getWindow().setBackgroundDrawable(new ColorDrawable(Color.BLACK));
    }
    ActivityOptions options=ActivityOptions.makeSceneTransitionAnimation(mActivity,this,mSharedElementNames,resultCode,data);
    mActivity.convertToTranslucent(new Activity.TranslucentConversionListener(){
      @Override public void onTranslucentConversionComplete(      boolean drawComplete){
        if (!mIsCanceled) {
          fadeOutBackground();
        }
      }
    }
,options);
    startTransition(new Runnable(){
      @Override public void run(){
        startExitTransition();
      }
    }
);
  }
}
