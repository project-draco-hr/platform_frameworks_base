{
  if (mIsReturning && mExitNotified && mActivity != null && (mSharedElements.isEmpty() || mSharedElements.get(0).getVisibility() == View.INVISIBLE)) {
    finish();
  }
  if (!mIsReturning && mExitNotified) {
    mActivity=null;
    clearState();
  }
}
