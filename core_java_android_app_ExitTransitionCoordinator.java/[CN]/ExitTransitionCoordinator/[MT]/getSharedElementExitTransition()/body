{
  Transition sharedElementTransition=null;
  if (!mSharedElements.isEmpty()) {
    sharedElementTransition=configureTransition(getSharedElementTransition());
  }
  if (sharedElementTransition == null) {
    sharedElementTransitionComplete();
  }
 else {
    sharedElementTransition.addListener(new Transition.TransitionListenerAdapter(){
      @Override public void onTransitionEnd(      Transition transition){
        sharedElementTransitionComplete();
        if (mIsHidden) {
          setViewVisibility(mSharedElements,View.VISIBLE);
        }
      }
    }
);
    mSharedElements.get(0).invalidate();
  }
  return sharedElementTransition;
}
