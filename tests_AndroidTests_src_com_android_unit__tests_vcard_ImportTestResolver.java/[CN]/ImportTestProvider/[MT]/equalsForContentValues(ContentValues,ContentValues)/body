{
  if (expected == actual) {
    return true;
  }
 else   if (expected == null || actual == null || expected.size() != actual.size()) {
    return false;
  }
  for (  Entry<String,Object> entry : expected.valueSet()) {
    final String key=entry.getKey();
    final Object value=entry.getValue();
    if (!actual.containsKey(key)) {
      return false;
    }
    if (value instanceof byte[]) {
      Object actualValue=actual.get(key);
      if (!Arrays.equals((byte[])value,(byte[])actualValue)) {
        return false;
      }
    }
 else     if (!value.equals(actual.get(key))) {
      return false;
    }
  }
  return true;
}
