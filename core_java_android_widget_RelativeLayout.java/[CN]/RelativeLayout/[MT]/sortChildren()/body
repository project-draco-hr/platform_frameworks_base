{
  int count=getChildCount();
  if (mSortedVerticalChildren.length != count)   mSortedVerticalChildren=new View[count];
  if (mSortedHorizontalChildren.length != count)   mSortedHorizontalChildren=new View[count];
  final DependencyGraph graph=mGraph;
  graph.clear();
  for (int i=0; i < count; i++) {
    final View child=getChildAt(i);
    graph.add(child);
  }
  if (DEBUG_GRAPH) {
    d(LOG_TAG,"=== Sorted vertical children");
    graph.log(getResources(),RULES_VERTICAL);
    d(LOG_TAG,"=== Sorted horizontal children");
    graph.log(getResources(),RULES_HORIZONTAL);
  }
  graph.getSortedViews(mSortedVerticalChildren,RULES_VERTICAL);
  graph.getSortedViews(mSortedHorizontalChildren,RULES_HORIZONTAL);
  if (DEBUG_GRAPH) {
    d(LOG_TAG,"=== Ordered list of vertical children");
    for (    View view : mSortedVerticalChildren) {
      DependencyGraph.printViewId(getResources(),view);
    }
    d(LOG_TAG,"=== Ordered list of horizontal children");
    for (    View view : mSortedHorizontalChildren) {
      DependencyGraph.printViewId(getResources(),view);
    }
  }
}
