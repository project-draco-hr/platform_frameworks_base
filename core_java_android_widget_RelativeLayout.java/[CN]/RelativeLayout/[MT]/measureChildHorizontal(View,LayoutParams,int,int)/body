{
  int childWidthMeasureSpec=getChildMeasureSpec(params.mLeft,params.mRight,params.width,params.leftMargin,params.rightMargin,mPaddingLeft,mPaddingRight,myWidth);
  int maxHeight=myHeight;
  if (mMeasureVerticalWithPaddingMargin) {
    maxHeight=Math.max(0,myHeight - mPaddingTop - mPaddingBottom- params.topMargin- params.bottomMargin);
  }
  int childHeightMeasureSpec;
  if (myHeight < 0 && !mAllowBrokenMeasureSpecs) {
    if (params.height >= 0) {
      childHeightMeasureSpec=MeasureSpec.makeMeasureSpec(params.height,MeasureSpec.EXACTLY);
    }
 else {
      childHeightMeasureSpec=MeasureSpec.makeMeasureSpec(0,MeasureSpec.UNSPECIFIED);
    }
  }
 else   if (params.width == LayoutParams.MATCH_PARENT) {
    childHeightMeasureSpec=MeasureSpec.makeMeasureSpec(maxHeight,MeasureSpec.EXACTLY);
  }
 else {
    childHeightMeasureSpec=MeasureSpec.makeMeasureSpec(maxHeight,MeasureSpec.AT_MOST);
  }
  child.measure(childWidthMeasureSpec,childHeightMeasureSpec);
}
