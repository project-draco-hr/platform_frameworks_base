{
  final int childWidthMeasureSpec=getChildMeasureSpec(params.mLeft,params.mRight,params.width,params.leftMargin,params.rightMargin,mPaddingLeft,mPaddingRight,myWidth);
  final int childHeightMeasureSpec;
  if (myHeight < 0 && !mAllowBrokenMeasureSpecs) {
    if (params.height >= 0) {
      childHeightMeasureSpec=MeasureSpec.makeMeasureSpec(params.height,MeasureSpec.EXACTLY);
    }
 else {
      childHeightMeasureSpec=MeasureSpec.makeMeasureSpec(0,MeasureSpec.UNSPECIFIED);
    }
  }
 else {
    final int maxHeight;
    if (mMeasureVerticalWithPaddingMargin) {
      maxHeight=Math.max(0,myHeight - mPaddingTop - mPaddingBottom- params.topMargin- params.bottomMargin);
    }
 else {
      maxHeight=Math.max(0,myHeight);
    }
    final int heightMode;
    if (params.width == LayoutParams.MATCH_PARENT) {
      heightMode=MeasureSpec.EXACTLY;
    }
 else {
      heightMode=MeasureSpec.AT_MOST;
    }
    childHeightMeasureSpec=MeasureSpec.makeMeasureSpec(maxHeight,heightMode);
  }
  child.measure(childWidthMeasureSpec,childHeightMeasureSpec);
}
