{
  final Object[] sections=mSections;
  String text=null;
  if (sections != null && sectionIndex >= 0 && sectionIndex < sections.length) {
    final Object section=sections[sectionIndex];
    if (section != null) {
      text=section.toString();
    }
  }
  final Rect bounds=mTempBounds;
  final ImageView preview=mPreviewImage;
  final TextView showing;
  final TextView target;
  if (mShowingPrimary) {
    showing=mPrimaryText;
    target=mSecondaryText;
  }
 else {
    showing=mSecondaryText;
    target=mPrimaryText;
  }
  target.setText(text);
  measurePreview(target,bounds);
  applyLayout(target,bounds);
  if (mPreviewAnimation != null) {
    mPreviewAnimation.cancel();
  }
  final Animator showTarget=animateAlpha(target,1f).setDuration(DURATION_CROSS_FADE);
  final Animator hideShowing=animateAlpha(showing,0f).setDuration(DURATION_CROSS_FADE);
  hideShowing.addListener(mSwitchPrimaryListener);
  bounds.left-=mPreviewImage.getPaddingLeft();
  bounds.top-=mPreviewImage.getPaddingTop();
  bounds.right+=mPreviewImage.getPaddingRight();
  bounds.bottom+=mPreviewImage.getPaddingBottom();
  final Animator resizePreview=animateBounds(preview,bounds);
  resizePreview.setDuration(DURATION_RESIZE);
  mPreviewAnimation=new AnimatorSet();
  final AnimatorSet.Builder builder=mPreviewAnimation.play(hideShowing).with(showTarget);
  builder.with(resizePreview);
  final int previewWidth=preview.getWidth() - preview.getPaddingLeft() - preview.getPaddingRight();
  final int targetWidth=target.getWidth();
  if (targetWidth > previewWidth) {
    target.setScaleX((float)previewWidth / targetWidth);
    final Animator scaleAnim=animateScaleX(target,1f).setDuration(DURATION_RESIZE);
    builder.with(scaleAnim);
  }
 else {
    target.setScaleX(1f);
  }
  final int showingWidth=showing.getWidth();
  if (showingWidth > targetWidth) {
    final float scale=(float)targetWidth / showingWidth;
    final Animator scaleAnim=animateScaleX(showing,scale).setDuration(DURATION_RESIZE);
    builder.with(scaleAnim);
  }
  mPreviewAnimation.start();
  return !TextUtils.isEmpty(text);
}
