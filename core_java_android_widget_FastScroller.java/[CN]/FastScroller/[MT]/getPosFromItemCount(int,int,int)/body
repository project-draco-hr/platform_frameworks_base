{
  if (mSectionIndexer == null || mListAdapter == null) {
    getSectionsFromIndexer();
  }
  final boolean hasSections=mSectionIndexer != null && mSections != null && mSections.length > 0;
  if (!hasSections || !mMatchDragPosition) {
    return firstVisibleItem / (totalItemCount - visibleItemCount);
  }
  firstVisibleItem-=mHeaderCount;
  if (firstVisibleItem < 0) {
    return 0;
  }
  totalItemCount-=mHeaderCount;
  final int section=mSectionIndexer.getSectionForPosition(firstVisibleItem);
  final int sectionPos=mSectionIndexer.getPositionForSection(section);
  final int nextSectionPos=mSectionIndexer.getPositionForSection(section + 1);
  final int sectionCount=mSections.length;
  final int positionsInSection=Math.max(1,nextSectionPos - sectionPos);
  final View child=mList.getChildAt(0);
  final float incrementalPos=child == null ? 0 : firstVisibleItem + (float)(mList.getPaddingTop() - child.getTop()) / Math.max(1,child.getHeight());
  final float posWithinSection=(incrementalPos - sectionPos) / positionsInSection;
  return (section + posWithinSection) / sectionCount;
}
