{
  if (mItemCount != totalItemCount && visibleItemCount > 0) {
    mItemCount=totalItemCount;
    mLongList=mAlwaysShow || mItemCount / visibleItemCount >= MIN_PAGES;
  }
  if (!mLongList) {
    if (mState != STATE_NONE) {
      setState(STATE_NONE);
    }
    return;
  }
  if (totalItemCount - visibleItemCount > 0 && mState != STATE_DRAGGING) {
    mThumbY=((mList.getHeight() - mThumbH) * firstVisibleItem) / (totalItemCount - visibleItemCount);
    if (mChangedBounds) {
      resetThumbPos();
      mChangedBounds=false;
    }
  }
  mScrollCompleted=true;
  if (firstVisibleItem == mVisibleItem) {
    return;
  }
  mVisibleItem=firstVisibleItem;
  if (mState != STATE_DRAGGING) {
    setState(STATE_VISIBLE);
    if (!mAlwaysShow) {
      mHandler.postDelayed(mScrollFade,FADE_TIMEOUT);
    }
  }
}
