{
  if (paste.length() > 0 && Character.isSpaceChar(paste.charAt(0))) {
    if (min > 0 && Character.isSpaceChar(mTransformed.charAt(min - 1))) {
      final int originalLength=mText.length();
      ((Editable)mText).delete(min - 1,min);
      final int delta=mText.length() - originalLength;
      min+=delta;
      max+=delta;
    }
  }
 else {
    if (min > 0 && !Character.isSpaceChar(mTransformed.charAt(min - 1))) {
      final int originalLength=mText.length();
      ((Editable)mText).replace(min,min," ");
      final int delta=mText.length() - originalLength;
      min+=delta;
      max+=delta;
    }
  }
  if (paste.length() > 0 && Character.isSpaceChar(paste.charAt(paste.length() - 1))) {
    if (max < mText.length() && Character.isSpaceChar(mTransformed.charAt(max))) {
      ((Editable)mText).delete(max,max + 1);
    }
  }
 else {
    if (max < mText.length() && !Character.isSpaceChar(mTransformed.charAt(max))) {
      ((Editable)mText).replace(max,max," ");
    }
  }
  return packRangeInLong(min,max);
}
