{
  final TypedArray ta=context.obtainStyledAttributes(resId,R.styleable.TextAppearance);
  final int textColorHighlight=ta.getColor(R.styleable.TextAppearance_textColorHighlight,0);
  if (textColorHighlight != 0) {
    setHighlightColor(textColorHighlight);
  }
  final ColorStateList textColor=ta.getColorStateList(R.styleable.TextAppearance_textColor);
  if (textColor != null) {
    setTextColor(textColor);
  }
  final int textSize=ta.getDimensionPixelSize(R.styleable.TextAppearance_textSize,0);
  if (textSize != 0) {
    setRawTextSize(textSize);
  }
  final ColorStateList textColorHint=ta.getColorStateList(R.styleable.TextAppearance_textColorHint);
  if (textColorHint != null) {
    setHintTextColor(textColorHint);
  }
  final ColorStateList textColorLink=ta.getColorStateList(R.styleable.TextAppearance_textColorLink);
  if (textColorLink != null) {
    setLinkTextColor(textColorLink);
  }
  final String fontFamily=ta.getString(R.styleable.TextAppearance_fontFamily);
  final int typefaceIndex=ta.getInt(R.styleable.TextAppearance_typeface,-1);
  final int styleIndex=ta.getInt(R.styleable.TextAppearance_textStyle,-1);
  setTypefaceFromAttrs(fontFamily,typefaceIndex,styleIndex);
  final int shadowColor=ta.getInt(R.styleable.TextAppearance_shadowColor,0);
  if (shadowColor != 0) {
    final float dx=ta.getFloat(R.styleable.TextAppearance_shadowDx,0);
    final float dy=ta.getFloat(R.styleable.TextAppearance_shadowDy,0);
    final float r=ta.getFloat(R.styleable.TextAppearance_shadowRadius,0);
    setShadowLayer(r,dx,dy,shadowColor);
  }
  if (ta.getBoolean(R.styleable.TextAppearance_textAllCaps,false)) {
    setTransformationMethod(new AllCapsTransformationMethod(getContext()));
  }
  if (ta.hasValue(R.styleable.TextAppearance_elegantTextHeight)) {
    setElegantTextHeight(ta.getBoolean(R.styleable.TextAppearance_elegantTextHeight,false));
  }
  if (ta.hasValue(R.styleable.TextAppearance_letterSpacing)) {
    setLetterSpacing(ta.getFloat(R.styleable.TextAppearance_letterSpacing,0));
  }
  if (ta.hasValue(R.styleable.TextAppearance_fontFeatureSettings)) {
    setFontFeatureSettings(ta.getString(R.styleable.TextAppearance_fontFeatureSettings));
  }
  ta.recycle();
}
