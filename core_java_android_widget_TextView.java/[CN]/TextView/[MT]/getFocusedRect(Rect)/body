{
  if (mLayout == null) {
    super.getFocusedRect(r);
    return;
  }
  int sel=getSelectionEnd();
  if (sel < 0) {
    super.getFocusedRect(r);
    return;
  }
  int line=mLayout.getLineForOffset(sel);
  r.top=mLayout.getLineTop(line);
  r.bottom=mLayout.getLineBottom(line);
  r.left=(int)mLayout.getPrimaryHorizontal(sel);
  r.right=r.left + 1;
  int paddingLeft=getCompoundPaddingLeft();
  int paddingTop=getExtendedPaddingTop();
  if ((mGravity & Gravity.VERTICAL_GRAVITY_MASK) != Gravity.TOP) {
    paddingTop+=getVerticalOffset(false);
  }
  r.offset(paddingLeft,paddingTop);
}
