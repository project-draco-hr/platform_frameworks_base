{
  if (what == Selection.SELECTION_END) {
    mHighlightPathBogus=true;
    if (!isFocused()) {
      mSelectionMoved=true;
    }
    if (o >= 0 || n >= 0) {
      invalidateCursor(Selection.getSelectionStart(buf),o,n);
      registerForPreDraw();
      if (isFocused()) {
        mShowCursor=SystemClock.uptimeMillis();
        makeBlink();
      }
    }
  }
  if (what == Selection.SELECTION_START) {
    mHighlightPathBogus=true;
    if (!isFocused()) {
      mSelectionMoved=true;
    }
    if (o >= 0 || n >= 0) {
      invalidateCursor(Selection.getSelectionEnd(buf),o,n);
    }
  }
  if (what instanceof UpdateAppearance || what instanceof ParagraphStyle) {
    invalidate();
    mHighlightPathBogus=true;
    checkForResize();
  }
  if (MetaKeyKeyListener.isMetaTracker(buf,what)) {
    mHighlightPathBogus=true;
    if (Selection.getSelectionStart(buf) >= 0) {
      invalidateCursor();
    }
  }
}
