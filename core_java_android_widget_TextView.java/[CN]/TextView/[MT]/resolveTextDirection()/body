{
  int resolvedTextDirection=TEXT_DIRECTION_UNDEFINED;
switch (mTextDirection) {
default :
case TEXT_DIRECTION_INHERIT:
    if (mParent != null && mParent instanceof ViewGroup) {
      resolvedTextDirection=((ViewGroup)mParent).getResolvedTextDirection();
    }
  break;
case TEXT_DIRECTION_FIRST_STRONG:
resolvedTextDirection=getTextDirectionFromFirstStrong(mText);
break;
case TEXT_DIRECTION_ANY_RTL:
resolvedTextDirection=getTextDirectionFromAnyRtl(mText);
break;
case TEXT_DIRECTION_LTR:
resolvedTextDirection=TEXT_DIRECTION_LTR;
break;
case TEXT_DIRECTION_RTL:
resolvedTextDirection=TEXT_DIRECTION_RTL;
break;
}
if (resolvedTextDirection == TEXT_DIRECTION_UNDEFINED) {
switch (getResolvedLayoutDirection()) {
default :
case LAYOUT_DIRECTION_LTR:
resolvedTextDirection=TEXT_DIRECTION_LTR;
break;
case LAYOUT_DIRECTION_RTL:
resolvedTextDirection=TEXT_DIRECTION_RTL;
break;
}
}
mResolvedTextDirection=resolvedTextDirection;
}
