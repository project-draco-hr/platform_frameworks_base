{
  if (mInputType != EditorInfo.TYPE_NULL) {
    if (mInputMethodState == null) {
      mInputMethodState=new InputMethodState();
    }
    outAttrs.inputType=mInputType;
    outAttrs.hintText=mHint;
    if (mInputContentType != null) {
      outAttrs.privateContentType=mInputContentType.privateContentType;
      outAttrs.extras=mInputContentType.extras;
    }
    if (mText instanceof Editable) {
      InputConnection ic=new EditableInputConnection(this);
      outAttrs.initialSelStart=Selection.getSelectionStart(mText);
      outAttrs.initialSelEnd=Selection.getSelectionEnd(mText);
      outAttrs.initialCapsMode=ic.getCursorCapsMode(mInputType);
      return ic;
    }
  }
  return null;
}
