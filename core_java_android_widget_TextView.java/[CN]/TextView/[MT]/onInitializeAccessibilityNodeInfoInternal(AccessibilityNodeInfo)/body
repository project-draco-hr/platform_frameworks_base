{
  super.onInitializeAccessibilityNodeInfoInternal(info);
  final boolean isPassword=hasPasswordTransformationMethod();
  info.setPassword(isPassword);
  info.setText(getTextForAccessibility());
  if (mBufferType == BufferType.EDITABLE) {
    info.setEditable(true);
    if (isEnabled()) {
      info.addAction(AccessibilityNodeInfo.AccessibilityAction.ACTION_SET_TEXT);
    }
  }
  if (mEditor != null) {
    info.setInputType(mEditor.mInputType);
    if (mEditor.mError != null) {
      info.setContentInvalid(true);
      info.setError(mEditor.mError);
    }
  }
  if (!TextUtils.isEmpty(mText)) {
    info.addAction(AccessibilityNodeInfo.ACTION_NEXT_AT_MOVEMENT_GRANULARITY);
    info.addAction(AccessibilityNodeInfo.ACTION_PREVIOUS_AT_MOVEMENT_GRANULARITY);
    info.setMovementGranularities(AccessibilityNodeInfo.MOVEMENT_GRANULARITY_CHARACTER | AccessibilityNodeInfo.MOVEMENT_GRANULARITY_WORD | AccessibilityNodeInfo.MOVEMENT_GRANULARITY_LINE| AccessibilityNodeInfo.MOVEMENT_GRANULARITY_PARAGRAPH| AccessibilityNodeInfo.MOVEMENT_GRANULARITY_PAGE);
    info.addAction(AccessibilityNodeInfo.ACTION_SET_SELECTION);
  }
  if (isFocused()) {
    if (canCopy()) {
      info.addAction(AccessibilityNodeInfo.ACTION_COPY);
    }
    if (canPaste()) {
      info.addAction(AccessibilityNodeInfo.ACTION_PASTE);
    }
    if (canCut()) {
      info.addAction(AccessibilityNodeInfo.ACTION_CUT);
    }
    if (canShare()) {
      info.addAction(new AccessibilityNodeInfo.AccessibilityAction(ACCESSIBILITY_ACTION_SHARE,getResources().getString(com.android.internal.R.string.share)));
    }
    if (canProcessText()) {
      mEditor.mProcessTextIntentActionsHandler.onInitializeAccessibilityNodeInfo(info);
    }
  }
  final int numFilters=mFilters.length;
  for (int i=0; i < numFilters; i++) {
    final InputFilter filter=mFilters[i];
    if (filter instanceof InputFilter.LengthFilter) {
      info.setMaxTextLength(((InputFilter.LengthFilter)filter).getMax());
    }
  }
  if (!isSingleLine()) {
    info.setMultiLine(true);
  }
}
