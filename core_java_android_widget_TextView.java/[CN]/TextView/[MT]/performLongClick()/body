{
  if (super.performLongClick()) {
    mEatTouchRelease=true;
    return true;
  }
  if (!isPositionOnText(mLastDownPositionX,mLastDownPositionY) && mInsertionControllerEnabled) {
    final int offset=getOffset(mLastDownPositionX,mLastDownPositionY);
    Selection.setSelection((Spannable)mText,offset);
    if (canPaste()) {
      getInsertionController().showWithPaste();
      performHapticFeedback(HapticFeedbackConstants.LONG_PRESS);
    }
 else {
      getInsertionController().show();
    }
    mEatTouchRelease=true;
    return true;
  }
  if (mSelectionActionMode != null && touchPositionIsInSelection()) {
    final int start=getSelectionStart();
    final int end=getSelectionEnd();
    CharSequence selectedText=mTransformed.subSequence(start,end);
    ClipData data=ClipData.newPlainText(null,null,selectedText);
    startDrag(data,getTextThumbnailBuilder(selectedText),false);
    stopSelectionActionMode();
    performHapticFeedback(HapticFeedbackConstants.LONG_PRESS);
    mEatTouchRelease=true;
    return true;
  }
  if (startSelectionActionMode()) {
    performHapticFeedback(HapticFeedbackConstants.LONG_PRESS);
    mEatTouchRelease=true;
    return true;
  }
  return false;
}
