{
  ClipboardManager clipboard=(ClipboardManager)getContext().getSystemService(Context.CLIPBOARD_SERVICE);
  ClipData clip=clipboard.getPrimaryClip();
  if (clip != null) {
    boolean didFirst=false;
    for (int i=0; i < clip.getItemCount(); i++) {
      CharSequence paste=clip.getItemAt(i).coerceToText(getContext());
      if (paste != null) {
        if (!didFirst) {
          long minMax=prepareSpacesAroundPaste(min,max,paste);
          min=extractRangeStartFromLong(minMax);
          max=extractRangeEndFromLong(minMax);
          Selection.setSelection((Spannable)mText,max);
          ((Editable)mText).replace(min,max,paste);
          didFirst=true;
        }
 else {
          ((Editable)mText).insert(getSelectionEnd(),"\n");
          ((Editable)mText).insert(getSelectionEnd(),paste);
        }
      }
    }
    stopSelectionActionMode();
    sLastCutOrCopyTime=0;
  }
}
