{
  if (getWindowToken() != token || !(mText instanceof Spannable))   return false;
  Spannable spannable=(Spannable)mText;
  CorrectionSpan[] spans=spannable.getSpans(start,end,CorrectionSpan.class);
  final int N=spans.length;
  for (int i=0; i < N; ++i) {
    spannable.removeSpan(spans[i]);
  }
  spannable.setSpan(span,start,end,flags);
  return true;
}
