{
  super.onDetachedFromWindow();
  final ViewTreeObserver observer=getViewTreeObserver();
  if (mPreDrawState != PREDRAW_NOT_REGISTERED) {
    observer.removeOnPreDrawListener(this);
    mPreDrawState=PREDRAW_NOT_REGISTERED;
  }
  if (mInsertionPointCursorController != null) {
    observer.removeOnTouchModeChangeListener(mInsertionPointCursorController);
  }
  if (mSelectionModifierCursorController != null) {
    observer.removeOnTouchModeChangeListener(mSelectionModifierCursorController);
  }
  if (mError != null) {
    hideError();
  }
  if (mBlink != null) {
    mBlink.removeCallbacks(mBlink);
  }
  if (mInsertionPointCursorController != null) {
    mInsertionPointCursorController.onDetached();
  }
  if (mSelectionModifierCursorController != null) {
    mSelectionModifierCursorController.onDetached();
  }
  hideControllers();
}
