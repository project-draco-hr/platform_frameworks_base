{
  super.onDetachedFromWindow();
  if (mPreDrawRegistered) {
    getViewTreeObserver().removeOnPreDrawListener(this);
    mPreDrawRegistered=false;
  }
  if (mError != null) {
    hideError();
  }
  if (mBlink != null) {
    mBlink.removeCallbacks(mBlink);
  }
  if (mInsertionPointCursorController != null) {
    mInsertionPointCursorController.onDetached();
  }
  if (mSelectionModifierCursorController != null) {
    mSelectionModifierCursorController.onDetached();
  }
  if (mShowSuggestionRunnable != null) {
    removeCallbacks(mShowSuggestionRunnable);
  }
  hideControllers();
  resetResolvedDrawables();
  if (mTextDisplayList != null) {
    mTextDisplayList.invalidate();
  }
  if (mSpellChecker != null) {
    mSpellChecker.closeSession();
    mSpellChecker=null;
  }
}
