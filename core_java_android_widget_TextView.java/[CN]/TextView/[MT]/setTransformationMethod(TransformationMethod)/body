{
  if (method == mTransformation) {
    return;
  }
  if (mTransformation != null) {
    if (mText instanceof Spannable) {
      ((Spannable)mText).removeSpan(mTransformation);
    }
  }
  mTransformation=method;
  if (method instanceof TransformationMethod2) {
    TransformationMethod2 method2=(TransformationMethod2)method;
    mAllowTransformationLengthChange=!mTextIsSelectable && !(mText instanceof Editable);
    method2.setLengthChangesAllowed(mAllowTransformationLengthChange);
  }
 else {
    mAllowTransformationLengthChange=false;
  }
  setText(mText);
}
