{
  setInputType(type,false);
  final boolean isPassword=(type & (EditorInfo.TYPE_MASK_CLASS | EditorInfo.TYPE_MASK_VARIATION)) == (EditorInfo.TYPE_CLASS_TEXT | EditorInfo.TYPE_TEXT_VARIATION_PASSWORD);
  boolean forceUpdate=false;
  if (isPassword) {
    setTransformationMethod(PasswordTransformationMethod.getInstance());
    setTypefaceByIndex(MONOSPACE,0);
  }
 else   if (mTransformation == PasswordTransformationMethod.getInstance()) {
    setTypefaceByIndex(-1,-1);
    forceUpdate=true;
  }
  boolean multiLine=(type & (EditorInfo.TYPE_MASK_CLASS | EditorInfo.TYPE_TEXT_FLAG_MULTI_LINE)) == (EditorInfo.TYPE_CLASS_TEXT | EditorInfo.TYPE_TEXT_FLAG_MULTI_LINE);
  if (mSingleLine == multiLine || forceUpdate) {
    applySingleLine(!multiLine,!isPassword);
  }
  InputMethodManager imm=InputMethodManager.peekInstance();
  if (imm != null)   imm.restartInput(this);
}
