{
  if (getWindowToken() == null) {
    mShowErrorAfterAttach=true;
    return;
  }
  if (mPopup == null) {
    LayoutInflater inflater=LayoutInflater.from(getContext());
    final TextView err=(TextView)inflater.inflate(com.android.internal.R.layout.textview_hint,null);
    mPopup=new PopupWindow(err,200,50){
      private boolean mAbove=false;
      @Override public void update(      int x,      int y,      int w,      int h,      boolean force){
        super.update(x,y,w,h,force);
        boolean above=isAboveAnchor();
        if (above != mAbove) {
          mAbove=above;
          if (above) {
            err.setBackgroundResource(com.android.internal.R.drawable.popup_inline_error_above);
          }
 else {
            err.setBackgroundResource(com.android.internal.R.drawable.popup_inline_error);
          }
        }
      }
    }
;
    mPopup.setFocusable(false);
    mPopup.setInputMethodMode(PopupWindow.INPUT_METHOD_NEEDED);
  }
  TextView tv=(TextView)mPopup.getContentView();
  chooseSize(mPopup,mError,tv);
  tv.setText(mError);
  mPopup.showAsDropDown(this,getErrorX(),getErrorY());
}
