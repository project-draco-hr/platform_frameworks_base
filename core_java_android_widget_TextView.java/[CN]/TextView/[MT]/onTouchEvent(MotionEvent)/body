{
  final int action=event.getActionMasked();
  if (action == MotionEvent.ACTION_DOWN) {
    boolean handled=false;
    final float x=event.getX();
    final float y=event.getY();
    if (x < 0 || x >= mRight - mLeft || y < 0 || y >= mBottom - mTop) {
      if (mInsertionPointCursorController != null) {
        handled|=mInsertionPointCursorController.onTouchEvent(event);
      }
      if (mSelectionModifierCursorController != null) {
        handled|=mSelectionModifierCursorController.onTouchEvent(event);
      }
      if (!handled) {
        return false;
      }
    }
    mTouchFocusSelected=false;
    mScrolled=false;
    if (handled) {
      return true;
    }
  }
  final boolean superResult=super.onTouchEvent(event);
  if (mEatTouchRelease && action == MotionEvent.ACTION_UP) {
    mEatTouchRelease=false;
    return superResult;
  }
  if ((mMovement != null || onCheckIsTextEditor()) && mText instanceof Spannable && mLayout != null) {
    if (mInsertionPointCursorController != null) {
      mInsertionPointCursorController.onTouchEvent(event);
    }
    if (mSelectionModifierCursorController != null) {
      mSelectionModifierCursorController.onTouchEvent(event);
    }
    boolean handled=false;
    int oldSelStart=getSelectionStart();
    int oldSelEnd=getSelectionEnd();
    if (mMovement != null) {
      handled|=mMovement.onTouchEvent(this,(Spannable)mText,event);
    }
    if (isTextEditable()) {
      if (action == MotionEvent.ACTION_UP && isFocused() && !mScrolled) {
        InputMethodManager imm=(InputMethodManager)getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
        CommitSelectionReceiver csr=null;
        if (getSelectionStart() != oldSelStart || getSelectionEnd() != oldSelEnd || didTouchFocusSelect()) {
          csr=new CommitSelectionReceiver(oldSelStart,oldSelEnd);
        }
        handled|=imm.showSoftInput(this,0,csr) && (csr != null);
        onTapUpEvent(oldSelStart,oldSelEnd);
      }
    }
    if (handled) {
      return true;
    }
  }
  return superResult;
}
