{
  int n=layout.getLineCount();
  CharSequence text=layout.getText();
  float max=0;
  if (maxLines != -1 && text.length() > layout.getLineEnd(n - 1)) {
    return -1;
  }
  for (int i=0; i < n - 1; i++) {
    if (text.charAt(layout.getLineEnd(i) - 1) != '\n')     return -1;
  }
  for (int i=0; i < n; i++) {
    max=Math.max(max,layout.getLineWidth(i));
  }
  return (int)Math.ceil(max);
}
