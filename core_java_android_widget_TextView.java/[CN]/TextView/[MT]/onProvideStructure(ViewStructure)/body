{
  super.onProvideStructure(structure);
  final boolean isPassword=hasPasswordTransformationMethod() || isPasswordInputType(getInputType());
  if (!isPassword) {
    structure.setText(getText(),getSelectionStart(),getSelectionEnd());
    int style=0;
    int typefaceStyle=getTypefaceStyle();
    if ((typefaceStyle & Typeface.BOLD) != 0) {
      style|=AssistStructure.ViewNode.TEXT_STYLE_BOLD;
    }
    if ((typefaceStyle & Typeface.ITALIC) != 0) {
      style|=AssistStructure.ViewNode.TEXT_STYLE_ITALIC;
    }
    int paintFlags=mTextPaint.getFlags();
    if ((paintFlags & Paint.FAKE_BOLD_TEXT_FLAG) != 0) {
      style|=AssistStructure.ViewNode.TEXT_STYLE_BOLD;
    }
    if ((paintFlags & Paint.UNDERLINE_TEXT_FLAG) != 0) {
      style|=AssistStructure.ViewNode.TEXT_STYLE_UNDERLINE;
    }
    if ((paintFlags & Paint.STRIKE_THRU_TEXT_FLAG) != 0) {
      style|=AssistStructure.ViewNode.TEXT_STYLE_STRIKE_THRU;
    }
    structure.setTextStyle(getTextSize(),getCurrentTextColor(),AssistStructure.ViewNode.TEXT_COLOR_UNDEFINED,style);
  }
  structure.setHint(getHint());
}
