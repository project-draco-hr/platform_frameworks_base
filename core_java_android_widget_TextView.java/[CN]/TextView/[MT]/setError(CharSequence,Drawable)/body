{
  error=TextUtils.stringOrSpannedString(error);
  mError=error;
  mErrorWasChanged=true;
  final Drawables dr=mDrawables;
  if (dr != null) {
switch (getResolvedLayoutDirection()) {
default :
case LAYOUT_DIRECTION_LTR:
      setCompoundDrawables(dr.mDrawableLeft,dr.mDrawableTop,icon,dr.mDrawableBottom);
    break;
case LAYOUT_DIRECTION_RTL:
  setCompoundDrawables(icon,dr.mDrawableTop,dr.mDrawableRight,dr.mDrawableBottom);
break;
}
}
 else {
setCompoundDrawables(null,null,icon,null);
}
if (error == null) {
if (mPopup != null) {
if (mPopup.isShowing()) {
mPopup.dismiss();
}
mPopup=null;
}
}
 else {
if (isFocused()) {
showError();
}
}
}
