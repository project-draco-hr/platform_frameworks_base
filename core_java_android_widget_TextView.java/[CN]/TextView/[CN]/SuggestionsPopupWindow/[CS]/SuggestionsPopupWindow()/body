{
  mPopupWindow=new PopupWindow(TextView.this.mContext,null,com.android.internal.R.attr.textSuggestionsWindowStyle);
  mPopupWindow.setWindowLayoutType(WindowManager.LayoutParams.TYPE_APPLICATION_SUB_PANEL);
  mPopupWindow.setInputMethodMode(PopupWindow.INPUT_METHOD_NOT_NEEDED);
  mPopupWindow.setOutsideTouchable(true);
  mPopupWindow.setClippingEnabled(true);
  mPopupWindow.setWidth(ViewGroup.LayoutParams.WRAP_CONTENT);
  mPopupWindow.setHeight(ViewGroup.LayoutParams.WRAP_CONTENT);
  mSuggestionsContainer=new LinearLayout(TextView.this.mContext);
  mSuggestionsContainer.setOrientation(LinearLayout.VERTICAL);
  LayoutInflater inflater=(LayoutInflater)TextView.this.mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
  if (inflater == null) {
    throw new IllegalArgumentException("Unable to create inflater for TextEdit suggestions");
  }
  for (int i=0; i < MAX_NUMBER_SUGGESTIONS; i++) {
    View childView=inflater.inflate(mTextEditSuggestionItemLayout,mSuggestionsContainer,false);
    if (!(childView instanceof TextView)) {
      throw new IllegalArgumentException("Inflated TextEdit suggestion item is not a TextView: " + childView);
    }
    childView.setTag(new SuggestionInfo());
    mSuggestionsContainer.addView(childView);
    childView.setOnClickListener(this);
  }
  mPopupWindow.setContentView(mSuggestionsContainer);
}
