{
  mPositionX=x - TextView.this.mScrollX;
  mPositionY=y - TextView.this.mScrollY;
  if (isPositionVisible()) {
    int[] coords=null;
    if (mContainer.isShowing()) {
      final int containerPositionX=mPositionX;
      final int containerPositionY=mPositionY - TextView.this.getHeight();
      if (containerPositionX != mContainerPositionX || containerPositionY != mContainerPositionY) {
        mContainerPositionX=containerPositionX;
        mContainerPositionY=containerPositionY;
        mContainer.update(TextView.this,mContainerPositionX,mContainerPositionY,mRight - mLeft,mBottom - mTop);
        hidePastePopupWindow();
      }
    }
 else {
      show();
    }
    if (mIsDragging) {
      if (coords == null) {
        coords=mTempCoords;
        TextView.this.getLocationInWindow(coords);
      }
      if (coords[0] != mLastParentX || coords[1] != mLastParentY) {
        mTouchToWindowOffsetX+=coords[0] - mLastParentX;
        mTouchToWindowOffsetY+=coords[1] - mLastParentY;
        mLastParentX=coords[0];
        mLastParentY=coords[1];
      }
      hidePastePopupWindow();
    }
  }
 else {
    hide();
  }
}
