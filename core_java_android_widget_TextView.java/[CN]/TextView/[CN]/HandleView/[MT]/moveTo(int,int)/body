{
  mPositionX=x - TextView.this.mScrollX;
  mPositionY=y - TextView.this.mScrollY;
  if (isPositionVisible()) {
    int[] coords=null;
    if (mContainer.isShowing()) {
      coords=mTempCoords;
      TextView.this.getLocationInWindow(coords);
      final int containerPositionX=coords[0] + mPositionX;
      final int containerPositionY=coords[1] + mPositionY;
      if (containerPositionX != mContainerPositionX || containerPositionY != mContainerPositionY) {
        mContainerPositionX=containerPositionX;
        mContainerPositionY=containerPositionY;
        mContainer.update(mContainerPositionX,mContainerPositionY,mRight - mLeft,mBottom - mTop);
        if (mPastePopupWindow != null) {
          mPastePopupWindow.hide();
        }
      }
    }
 else {
      show();
    }
    if (mIsDragging) {
      if (coords == null) {
        coords=mTempCoords;
        TextView.this.getLocationInWindow(coords);
      }
      if (coords[0] != mLastParentX || coords[1] != mLastParentY) {
        mTouchToWindowOffsetX+=coords[0] - mLastParentX;
        mTouchToWindowOffsetY+=coords[1] - mLastParentY;
        mLastParentX=coords[0];
        mLastParentY=coords[1];
      }
      if (mPastePopupWindow != null) {
        mPastePopupWindow.hide();
      }
    }
  }
 else {
    hide();
  }
}
