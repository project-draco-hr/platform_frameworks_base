{
  final int drawableWidth=mDrawable.getIntrinsicWidth();
  final int drawableHeight=mDrawable.getIntrinsicHeight();
  final int line=mLayout.getLineForOffset(offset);
  final int lineTop=mLayout.getLineTop(line);
  final int lineBottom=mLayout.getLineBottom(line);
  mHotSpotVerticalPosition=lineTop;
  final Rect bounds=sCursorControllerTempRect;
  bounds.left=(int)(mLayout.getPrimaryHorizontal(offset) - drawableWidth / 2.0);
  bounds.top=(bottom ? lineBottom : lineTop) - drawableHeight / 2;
  mTopExtension=bottom ? 0 : drawableHeight / 2;
  mBottomExtension=drawableHeight;
  if (line == mLayout.getLineCount() - 1) {
    mTopExtension=(lineBottom - lineTop) - drawableHeight / 2;
  }
  bounds.right=bounds.left + drawableWidth;
  bounds.bottom=bounds.top + drawableHeight;
  int boundTopBefore=bounds.top;
  convertFromViewportToContentCoordinates(bounds);
  mHotSpotVerticalPosition+=bounds.top - boundTopBefore;
  mDrawable.setBounds(bounds);
  postInvalidate();
}
