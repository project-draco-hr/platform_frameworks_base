{
  if (isTextEditable() || mTextIsSelectable) {
switch (event.getActionMasked()) {
case MotionEvent.ACTION_DOWN:
      final int x=(int)event.getX();
    final int y=(int)event.getY();
  mMinTouchOffset=mMaxTouchOffset=getOffset(x,y);
long duration=SystemClock.uptimeMillis() - mPreviousTapUpTime;
if (duration <= ViewConfiguration.getDoubleTapTimeout()) {
final int deltaX=x - mPreviousTapPositionX;
final int deltaY=y - mPreviousTapPositionY;
final int distanceSquared=deltaX * deltaX + deltaY * deltaY;
final int doubleTapSlop=ViewConfiguration.get(getContext()).getScaledDoubleTapSlop();
final int slopSquared=doubleTapSlop * doubleTapSlop;
if (distanceSquared < slopSquared) {
  startSelectionActionMode();
  hide();
}
}
mPreviousTapPositionX=x;
mPreviousTapPositionY=y;
break;
case MotionEvent.ACTION_POINTER_DOWN:
case MotionEvent.ACTION_POINTER_UP:
if (mContext.getPackageManager().hasSystemFeature(PackageManager.FEATURE_TOUCHSCREEN_MULTITOUCH_DISTINCT)) {
updateMinAndMaxOffsets(event);
}
break;
case MotionEvent.ACTION_UP:
mPreviousTapUpTime=SystemClock.uptimeMillis();
break;
}
}
return false;
}
