{
  if (isFocused() && isTextEditable() && (event.getActionMasked() == MotionEvent.ACTION_DOWN)) {
    final int x=(int)event.getX();
    final int y=(int)event.getY();
    mTouchOffset=getOffset(x,y);
    if (mIsVisible) {
      if (mMovement instanceof ArrowKeyMovementMethod) {
        boolean isOnStart=fingerIsOnDrawable(x,y,mStartDrawable);
        boolean isOnEnd=fingerIsOnDrawable(x,y,mEndDrawable);
        if (isOnStart || isOnEnd) {
          if (mParent != null) {
            mParent.requestDisallowInterceptTouchEvent(true);
          }
          mStartIsDragged=isOnStart;
          final Rect bounds=(mStartIsDragged ? mStartDrawable : mEndDrawable).getBounds();
          mOffsetX=(bounds.left + bounds.right) / 2.0f - x;
          mOffsetY=bounds.top - mCursorControllerVerticalOffset - y;
          ((ArrowKeyMovementMethod)mMovement).setCursorController(this);
        }
      }
    }
  }
}
