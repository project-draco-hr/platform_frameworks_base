{
  final int offset=TextView.this.getSelectionStart();
  View contentView=mContainer.getContentView();
  final int width=contentView.getMeasuredWidth();
  final int height=contentView.getMeasuredHeight();
  final int line=mLayout.getLineForOffset(offset);
  final int lineTop=mLayout.getLineTop(line);
  final Rect bounds=sCursorControllerTempRect;
  bounds.left=(int)(mLayout.getPrimaryHorizontal(offset) - width / 2.0f);
  bounds.top=lineTop - height;
  bounds.right=bounds.left + width;
  bounds.bottom=bounds.top + height;
  convertFromViewportToContentCoordinates(bounds);
  mPositionX=bounds.left;
  mPositionY=bounds.top;
}
