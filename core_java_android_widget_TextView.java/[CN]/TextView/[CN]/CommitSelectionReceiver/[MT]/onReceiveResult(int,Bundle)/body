{
  int start=mNewStart;
  int end=mNewEnd;
  if (resultCode == InputMethodManager.RESULT_SHOWN) {
    start=mPrevStart;
    end=mPrevEnd;
  }
 else {
    if ((mPrevStart != mPrevEnd) && (start == end)) {
      if ((start >= mPrevStart) && (start <= mPrevEnd)) {
        Selection.setSelection((Spannable)mText,mPrevStart,mPrevEnd);
        return;
      }
 else {
        stopSelectionActionMode();
      }
    }
    if (mInsertionPointCursorController != null) {
      mInsertionPointCursorController.show();
    }
  }
  final int len=mText.length();
  if (start > len) {
    start=len;
  }
  if (end > len) {
    end=len;
  }
  Selection.setSelection((Spannable)mText,start,end);
}
