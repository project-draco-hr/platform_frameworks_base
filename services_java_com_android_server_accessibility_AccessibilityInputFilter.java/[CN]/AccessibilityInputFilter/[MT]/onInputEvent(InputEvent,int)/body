{
  if (DEBUG) {
    Slog.d(TAG,"Received event: " + event + ", policyFlags=0x"+ Integer.toHexString(policyFlags));
  }
  if (mEventHandler == null) {
    super.onInputEvent(event,policyFlags);
    return;
  }
  if (event.getSource() != InputDevice.SOURCE_TOUCHSCREEN) {
    super.onInputEvent(event,policyFlags);
    return;
  }
  if ((policyFlags & WindowManagerPolicy.FLAG_PASS_TO_USER) == 0) {
    mEventHandler.clear();
    super.onInputEvent(event,policyFlags);
    return;
  }
  final int deviceId=event.getDeviceId();
  if (mCurrentDeviceId != deviceId) {
    if (mCurrentDeviceId != UNDEFINED_DEVICE_ID) {
      mEventHandler.clear();
    }
    mCurrentDeviceId=deviceId;
  }
  mPm.userActivity(event.getEventTime(),false);
  MotionEvent motionEvent=(MotionEvent)event;
  mEventHandler.onMotionEvent(motionEvent,policyFlags);
}
