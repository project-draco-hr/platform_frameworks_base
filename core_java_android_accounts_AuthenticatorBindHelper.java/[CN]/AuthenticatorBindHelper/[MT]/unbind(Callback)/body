{
  if (Log.isLoggable(TAG,Log.VERBOSE)) {
    Log.v(TAG,"unbinding callback " + callbackToUnbind);
  }
synchronized (mServiceConnections) {
    for (    Map.Entry<String,ArrayList<Callback>> entry : mServiceUsers.entrySet()) {
      final String authenticatorType=entry.getKey();
      final ArrayList<Callback> serviceUsers=entry.getValue();
      for (      Callback callback : serviceUsers) {
        if (callback == callbackToUnbind) {
          if (Log.isLoggable(TAG,Log.VERBOSE)) {
            Log.v(TAG,"found callback in service" + authenticatorType);
          }
          serviceUsers.remove(callbackToUnbind);
          if (serviceUsers.isEmpty()) {
            if (Log.isLoggable(TAG,Log.VERBOSE)) {
              Log.v(TAG,"there are no more callbacks for service " + authenticatorType + ", unbinding service");
            }
            unbindFromService(authenticatorType);
          }
 else {
            if (Log.isLoggable(TAG,Log.VERBOSE)) {
              Log.v(TAG,"leaving service " + authenticatorType + " around since there are still callbacks using it");
            }
          }
          return;
        }
      }
    }
    Log.e(TAG,"did not find callback " + callbackToUnbind + " in any of the services");
  }
}
