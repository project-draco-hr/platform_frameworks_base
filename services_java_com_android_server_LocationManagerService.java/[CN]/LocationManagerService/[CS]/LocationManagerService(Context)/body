{
  super();
  mContext=context;
  mLocationHandler=new LocationWorkerHandler();
  if (Config.LOGD) {
    Log.d(TAG,"Constructed LocationManager Service");
  }
  mAlarmManager=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
  PowerManager powerManager=(PowerManager)mContext.getSystemService(Context.POWER_SERVICE);
  mWakeLock=powerManager.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,WAKELOCK_KEY);
  mBatteryStats=BatteryStatsService.getService();
  loadProviders();
  mTelephonyManager=(TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
  mTelephonyManager.listen(mPhoneStateListener,PhoneStateListener.LISTEN_CELL_LOCATION | PhoneStateListener.LISTEN_SIGNAL_STRENGTH | PhoneStateListener.LISTEN_DATA_CONNECTION_STATE);
  NetworkStateBroadcastReceiver networkReceiver=new NetworkStateBroadcastReceiver();
  IntentFilter networkIntentFilter=new IntentFilter();
  networkIntentFilter.addAction(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION);
  networkIntentFilter.addAction(WifiManager.WIFI_STATE_CHANGED_ACTION);
  networkIntentFilter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);
  networkIntentFilter.addAction(GpsLocationProvider.GPS_ENABLED_CHANGE_ACTION);
  context.registerReceiver(networkReceiver,networkIntentFilter);
  PowerStateBroadcastReceiver powerStateReceiver=new PowerStateBroadcastReceiver();
  IntentFilter intentFilter=new IntentFilter();
  intentFilter.addAction(ALARM_INTENT);
  intentFilter.addAction(Intent.ACTION_SCREEN_OFF);
  intentFilter.addAction(Intent.ACTION_SCREEN_ON);
  intentFilter.addAction(Intent.ACTION_BATTERY_CHANGED);
  intentFilter.addAction(Intent.ACTION_PACKAGE_REMOVED);
  intentFilter.addAction(Intent.ACTION_PACKAGE_RESTARTED);
  context.registerReceiver(powerStateReceiver,intentFilter);
  mWifiManager=(WifiManager)context.getSystemService(Context.WIFI_SERVICE);
  mWifiLock=getWifiWakelockLocked();
  if (mWifiManager != null) {
    List<ScanResult> wifiScanResults=mWifiManager.getScanResults();
    if (wifiScanResults != null && wifiScanResults.size() != 0) {
      if (mNetworkLocationInterface != null) {
        mNetworkLocationInterface.updateWifiScanResults(wifiScanResults);
      }
    }
  }
}
