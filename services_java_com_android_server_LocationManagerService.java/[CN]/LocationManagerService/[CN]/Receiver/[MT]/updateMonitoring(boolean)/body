{
  if (mHideFromAppOps) {
    return;
  }
  mOpMonitoring=updateMonitoring(allow,mOpMonitoring,AppOpsManager.OP_MONITOR_LOCATION);
  boolean allowHighPower=allow;
  if (allowHighPower) {
    UpdateRecord gpsRecord=mUpdateRecords.get(LocationManager.GPS_PROVIDER);
    if (gpsRecord == null || gpsRecord.mRequest.getInterval() > HIGH_POWER_INTERVAL_MS) {
      allowHighPower=false;
    }
  }
  boolean wasHighPowerMonitoring=mOpHighPowerMonitoring;
  mOpHighPowerMonitoring=updateMonitoring(allowHighPower,mOpHighPowerMonitoring,AppOpsManager.OP_MONITOR_HIGH_POWER_LOCATION);
  if (mOpHighPowerMonitoring != wasHighPowerMonitoring) {
    Intent intent=new Intent(LocationManager.HIGH_POWER_REQUEST_CHANGE_ACTION);
    mContext.sendBroadcastAsUser(intent,UserHandle.ALL);
  }
}
