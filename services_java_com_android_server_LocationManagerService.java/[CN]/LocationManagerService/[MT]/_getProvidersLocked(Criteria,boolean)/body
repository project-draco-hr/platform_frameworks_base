{
  if (LOCAL_LOGV) {
    Slog.v(TAG,"getProviders");
  }
  ArrayList<String> out=new ArrayList<String>(mProviders.size());
  for (int i=mProviders.size() - 1; i >= 0; i--) {
    LocationProviderInterface p=mProviders.get(i);
    String name=p.getName();
    if (isAllowedProviderSafe(name)) {
      if (enabledOnly && !isAllowedBySettingsLocked(name)) {
        continue;
      }
      if (criteria != null && !p.meetsCriteria(criteria)) {
        continue;
      }
      out.add(name);
    }
  }
  return out;
}
