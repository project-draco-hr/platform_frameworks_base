{
  int listeners=0;
  LocationProviderImpl p=LocationProviderImpl.getProvider(provider);
  if (p == null) {
    return;
  }
synchronized (mRecordsByProvider) {
    HashSet<UpdateRecord> records=mRecordsByProvider.get(provider);
    if (records != null) {
      for (      UpdateRecord record : records) {
        try {
          Receiver receiver=record.mReceiver;
          if (receiver.isListener()) {
            if (enabled) {
              receiver.getListener().onProviderEnabled(provider);
            }
 else {
              receiver.getListener().onProviderDisabled(provider);
            }
          }
 else {
            PendingIntent intent=receiver.getPendingIntent();
            Intent providerIntent=new Intent();
            providerIntent.putExtra(LocationManager.KEY_PROVIDER_ENABLED,enabled);
            try {
              receiver.getPendingIntent().send(mContext,0,providerIntent,null,null);
            }
 catch (            PendingIntent.CanceledException e) {
              _removeUpdates(receiver);
            }
          }
        }
 catch (        RemoteException e) {
        }
        listeners++;
      }
    }
  }
  if (enabled) {
    p.enable();
    if (listeners > 0) {
      p.setMinTime(getMinTime(provider));
      p.enableLocationTracking(true);
      updateWakelockStatus(mScreenOn);
    }
  }
 else {
    p.enableLocationTracking(false);
    p.disable();
    updateWakelockStatus(mScreenOn);
  }
  if (enabled && listeners > 0) {
    mLocationHandler.removeMessages(MESSAGE_HEARTBEAT,provider);
    Message m=Message.obtain(mLocationHandler,MESSAGE_HEARTBEAT,provider);
    mLocationHandler.sendMessageAtTime(m,SystemClock.uptimeMillis() + 1000);
  }
 else {
    mLocationHandler.removeMessages(MESSAGE_HEARTBEAT,provider);
  }
}
