{
  boolean allowMocks=false;
  try {
    allowMocks=Settings.Secure.getInt(mContext.getContentResolver(),Settings.Secure.ALLOW_MOCK_LOCATION) == 1;
  }
 catch (  SettingNotFoundException e) {
  }
  if (!allowMocks) {
    throw new SecurityException("Requires ACCESS_MOCK_LOCATION secure setting");
  }
  if (mContext.checkCallingPermission(ACCESS_MOCK_LOCATION) != PackageManager.PERMISSION_GRANTED) {
    throw new SecurityException("Requires ACCESS_MOCK_LOCATION permission");
  }
}
