{
  ArrayList<LocationProviderInterface> providers;
synchronized (mLock) {
    providers=new ArrayList<LocationProviderInterface>(providerNames.size());
    for (    String name : providerNames) {
      providers.add(mProvidersByName.get(name));
    }
  }
  if (providers.size() < 2) {
    return providers.get(0);
  }
  Collections.sort(providers,new LpPowerComparator());
  int power=providers.get(0).getPowerRequirement();
  if (power < providers.get(1).getPowerRequirement()) {
    return providers.get(0);
  }
  int idx, size;
  ArrayList<LocationProviderInterface> tmp=new ArrayList<LocationProviderInterface>();
  idx=0;
  size=providers.size();
  while ((idx < size) && (providers.get(idx).getPowerRequirement() == power)) {
    tmp.add(providers.get(idx));
    idx++;
  }
  Collections.sort(tmp,new LpAccuracyComparator());
  int acc=tmp.get(0).getAccuracy();
  if (acc < tmp.get(1).getAccuracy()) {
    return tmp.get(0);
  }
  ArrayList<LocationProviderInterface> tmp2=new ArrayList<LocationProviderInterface>();
  idx=0;
  size=tmp.size();
  while ((idx < size) && (tmp.get(idx).getAccuracy() == acc)) {
    tmp2.add(tmp.get(idx));
    idx++;
  }
  Collections.sort(tmp2,new LpCapabilityComparator());
  return tmp2.get(0);
}
