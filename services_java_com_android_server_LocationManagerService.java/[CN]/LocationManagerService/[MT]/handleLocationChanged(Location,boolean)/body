{
  Location myLocation=new Location(location);
  String provider=myLocation.getProvider();
  if (!myLocation.isFromMockProvider() && isMockProvider(provider)) {
    myLocation.setIsFromMockProvider(true);
  }
  if (!passive) {
    mPassiveProvider.updateLocation(myLocation);
  }
synchronized (mLock) {
    if (isAllowedBySettingsLocked(provider,UserHandle.getUid(mCurrentUserId,0))) {
      handleLocationChangedLocked(myLocation,passive);
    }
  }
}
