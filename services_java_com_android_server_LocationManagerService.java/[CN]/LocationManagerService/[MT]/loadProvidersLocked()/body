{
  PassiveProvider passiveProvider=new PassiveProvider(this);
  addProviderLocked(passiveProvider);
  mEnabledProviders.add(passiveProvider.getName());
  mPassiveProvider=passiveProvider;
  if (GpsLocationProvider.isSupported()) {
    GpsLocationProvider gpsProvider=new GpsLocationProvider(mContext,this);
    mGpsStatusProvider=gpsProvider.getGpsStatusProvider();
    mNetInitiatedListener=gpsProvider.getNetInitiatedListener();
    addProviderLocked(gpsProvider);
    mRealProviders.put(LocationManager.GPS_PROVIDER,gpsProvider);
  }
  Resources resources=mContext.getResources();
  ArrayList<String> providerPackageNames=new ArrayList<String>();
  String[] pkgs1=resources.getStringArray(com.android.internal.R.array.config_locationProviderPackageNames);
  String[] pkgs2=resources.getStringArray(com.android.internal.R.array.config_overlay_locationProviderPackageNames);
  if (D)   Log.d(TAG,"built-in location providers: " + Arrays.toString(pkgs1));
  if (D)   Log.d(TAG,"overlay location providers: " + Arrays.toString(pkgs2));
  if (pkgs1 != null)   providerPackageNames.addAll(Arrays.asList(pkgs1));
  if (pkgs2 != null)   providerPackageNames.addAll(Arrays.asList(pkgs2));
  LocationProviderProxy networkProvider=LocationProviderProxy.createAndBind(mContext,LocationManager.NETWORK_PROVIDER,NETWORK_LOCATION_SERVICE_ACTION,providerPackageNames,mLocationHandler);
  if (networkProvider != null) {
    mRealProviders.put(LocationManager.NETWORK_PROVIDER,networkProvider);
    mProxyProviders.add(networkProvider);
    addProviderLocked(networkProvider);
  }
 else {
    Slog.w(TAG,"no network location provider found");
  }
  LocationProviderProxy fusedLocationProvider=LocationProviderProxy.createAndBind(mContext,LocationManager.FUSED_PROVIDER,FUSED_LOCATION_SERVICE_ACTION,providerPackageNames,mLocationHandler);
  if (fusedLocationProvider != null) {
    addProviderLocked(fusedLocationProvider);
    mProxyProviders.add(fusedLocationProvider);
    mEnabledProviders.add(fusedLocationProvider.getName());
  }
 else {
    Slog.e(TAG,"no fused location provider found",new IllegalStateException("Location service needs a fused location provider"));
  }
  mGeocodeProvider=GeocoderProxy.createAndBind(mContext,providerPackageNames);
  if (mGeocodeProvider == null) {
    Slog.e(TAG,"no geocoder provider found");
  }
}
