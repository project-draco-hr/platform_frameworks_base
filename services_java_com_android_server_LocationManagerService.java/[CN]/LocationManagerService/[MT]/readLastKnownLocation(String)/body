{
  Location location=null;
  String s=null;
  try {
    File f=new File(LocationManager.SYSTEM_DIR + "/location." + provider);
    if (!f.exists()) {
      return null;
    }
    BufferedReader reader=new BufferedReader(new FileReader(f),256);
    s=reader.readLine();
  }
 catch (  IOException e) {
    Log.w(TAG,"Unable to read last known location",e);
  }
  if (s == null) {
    return null;
  }
  try {
    String[] tokens=PATTERN_COMMA.split(s);
    int idx=0;
    long time=Long.parseLong(tokens[idx++]);
    double latitude=Double.parseDouble(tokens[idx++]);
    double longitude=Double.parseDouble(tokens[idx++]);
    double altitude=Double.parseDouble(tokens[idx++]);
    float bearing=Float.parseFloat(tokens[idx++]);
    float speed=Float.parseFloat(tokens[idx++]);
    location=new Location(provider);
    location.setTime(time);
    location.setLatitude(latitude);
    location.setLongitude(longitude);
    location.setAltitude(altitude);
    location.setBearing(bearing);
    location.setSpeed(speed);
  }
 catch (  NumberFormatException nfe) {
    Log.e(TAG,"NumberFormatException reading last known location",nfe);
    return null;
  }
  return location;
}
