{
  boolean allowMocks=Settings.Secure.getInt(mContext.getContentResolver(),Settings.Secure.ALLOW_MOCK_LOCATION,0) == 1;
  if (!allowMocks) {
    throw new SecurityException("Requires ACCESS_MOCK_LOCATION secure setting");
  }
  if (mContext.checkCallingPermission(ACCESS_MOCK_LOCATION) != PackageManager.PERMISSION_GRANTED) {
    throw new SecurityException("Requires ACCESS_MOCK_LOCATION permission");
  }
}
