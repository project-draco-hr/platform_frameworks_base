{
  String perm=checkPermission();
  if (ACCESS_COARSE_LOCATION.equals(perm)) {
    if (!isProviderAllowedByCoarsePermission(request.getProvider())) {
      throw new SecurityException("Requires ACCESS_FINE_LOCATION permission");
    }
switch (request.getQuality()) {
case LocationRequest.ACCURACY_FINE:
      request.setQuality(LocationRequest.ACCURACY_BLOCK);
    break;
case LocationRequest.POWER_HIGH:
  request.setQuality(LocationRequest.POWER_LOW);
break;
}
if (request.getInterval() < LocationFudger.FASTEST_INTERVAL_MS) {
request.setInterval(LocationFudger.FASTEST_INTERVAL_MS);
}
if (request.getFastestInterval() < LocationFudger.FASTEST_INTERVAL_MS) {
request.setFastestInterval(LocationFudger.FASTEST_INTERVAL_MS);
}
}
if (request.getFastestInterval() > request.getInterval()) {
request.setFastestInterval(request.getInterval());
}
return perm;
}
