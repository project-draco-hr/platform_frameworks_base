{
  mPostLastWebKitXOffset=d.mWebKitXOffset;
  mPostLastWebKitYOffset=d.mWebKitYOffset;
  mPostLastWebKitScale=d.mWebKitScale;
  int action=event != null ? event.getAction() : MotionEvent.ACTION_CANCEL;
  if (d.mEventType != EVENT_TYPE_TOUCH) {
    return;
  }
  if (action == MotionEvent.ACTION_CANCEL || event.getPointerCount() > 1) {
    unscheduleLongPressLocked();
    unscheduleClickLocked();
    hideTapCandidateLocked();
    mIsDoubleTapCandidate=false;
    mIsTapCandidate=false;
    hideTapCandidateLocked();
  }
 else   if (action == MotionEvent.ACTION_DOWN) {
    checkForDoubleTapOnDownLocked(event);
    scheduleLongPressLocked();
    mIsTapCandidate=true;
    mInitialDownX=event.getX();
    mInitialDownY=event.getY();
    scheduleShowTapHighlightLocked();
  }
 else   if (action == MotionEvent.ACTION_UP) {
    unscheduleLongPressLocked();
    if (isClickCandidateLocked(event)) {
      if (mIsDoubleTapCandidate) {
        enqueueDoubleTapLocked(event);
      }
 else {
        scheduleClickLocked();
      }
    }
 else {
      hideTapCandidateLocked();
    }
  }
 else   if (action == MotionEvent.ACTION_MOVE) {
    checkForSlopLocked(event);
  }
}
