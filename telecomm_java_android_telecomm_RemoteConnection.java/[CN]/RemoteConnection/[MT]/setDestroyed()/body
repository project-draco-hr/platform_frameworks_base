{
  if (!mListeners.isEmpty()) {
    if (mState != Connection.State.DISCONNECTED) {
      setDisconnected(DisconnectCause.ERROR_UNSPECIFIED,"Connection destroyed.");
    }
    Set<Listener> listeners=new HashSet<Listener>(mListeners);
    mListeners.clear();
    for (    Listener l : listeners) {
      l.onDestroyed(this);
    }
    mConnected=false;
  }
}
