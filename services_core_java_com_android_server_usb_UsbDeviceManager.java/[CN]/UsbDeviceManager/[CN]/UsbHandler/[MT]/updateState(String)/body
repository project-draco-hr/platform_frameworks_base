{
  int connected, configured;
  if ("DISCONNECTED".equals(state)) {
    connected=0;
    configured=0;
  }
 else   if ("CONNECTED".equals(state)) {
    connected=1;
    configured=0;
  }
 else   if ("CONFIGURED".equals(state)) {
    connected=1;
    configured=1;
  }
 else {
    Slog.e(TAG,"unknown state " + state);
    return;
  }
  removeMessages(MSG_UPDATE_STATE);
  Message msg=Message.obtain(this,MSG_UPDATE_STATE);
  msg.arg1=connected;
  msg.arg2=configured;
  sendMessageDelayed(msg,(connected == 0) ? UPDATE_DELAY : 0);
}
