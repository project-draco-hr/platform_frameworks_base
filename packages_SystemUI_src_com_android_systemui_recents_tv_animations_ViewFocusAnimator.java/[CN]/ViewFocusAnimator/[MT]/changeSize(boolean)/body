{
  ViewGroup.LayoutParams lp=mTargetView.getLayoutParams();
  int width=lp.width;
  int height=lp.height;
  if (width < 0 && height < 0) {
    mTargetView.measure(View.MeasureSpec.UNSPECIFIED,View.MeasureSpec.UNSPECIFIED);
    height=mTargetView.getMeasuredHeight();
  }
  if (mTargetView.isAttachedToWindow() && mTargetView.hasWindowFocus() && mTargetView.getVisibility() == View.VISIBLE) {
    animateFocus(hasFocus);
  }
 else {
    setFocusImmediate(hasFocus);
  }
}
