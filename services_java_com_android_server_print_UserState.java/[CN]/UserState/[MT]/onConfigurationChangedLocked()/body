{
  final int installedCount=mInstalledServices.size();
  for (int i=0; i < installedCount; i++) {
    ResolveInfo resolveInfo=mInstalledServices.get(i).getResolveInfo();
    ComponentName serviceName=new ComponentName(resolveInfo.serviceInfo.packageName,resolveInfo.serviceInfo.name);
    if (mEnabledServices.contains(serviceName)) {
      if (!mActiveServices.containsKey(serviceName)) {
        RemotePrintService service=new RemotePrintService(mContext,serviceName,mUserId,mSpooler,this);
        mActiveServices.put(serviceName,service);
        if (mPrinterDiscoverySession != null) {
          mPrinterDiscoverySession.onServiceAddedLocked(service);
        }
      }
    }
 else {
      RemotePrintService service=mActiveServices.remove(serviceName);
      if (service != null) {
        service.destroy();
        if (mPrinterDiscoverySession != null) {
          mPrinterDiscoverySession.onServiceRemovedLocked(serviceName);
        }
      }
    }
  }
}
