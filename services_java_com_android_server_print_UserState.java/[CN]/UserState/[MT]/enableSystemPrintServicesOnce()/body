{
  SharedPreferences preferences=mContext.getSharedPreferences(SHARED_PREFERENCES_FILE,Context.MODE_PRIVATE);
  if (preferences.getInt(KEY_SYSTEM_PRINT_SERVICES_ENABLED,0) == 0) {
    Editor editor=preferences.edit();
    editor.putInt(KEY_SYSTEM_PRINT_SERVICES_ENABLED,1);
    editor.commit();
    readInstalledPrintServicesLocked();
    StringBuilder builder=new StringBuilder();
    final int serviceCount=mInstalledServices.size();
    for (int i=0; i < serviceCount; i++) {
      ServiceInfo serviceInfo=mInstalledServices.get(i).getResolveInfo().serviceInfo;
      if ((serviceInfo.applicationInfo.flags & ApplicationInfo.FLAG_SYSTEM) != 0) {
        ComponentName serviceName=new ComponentName(serviceInfo.packageName,serviceInfo.name);
        if (builder.length() > 0) {
          builder.append(":");
        }
        builder.append(serviceName.flattenToString());
      }
    }
    Settings.Secure.putStringForUser(mContext.getContentResolver(),Settings.Secure.ENABLED_PRINT_SERVICES,builder.toString(),mUserId);
  }
}
