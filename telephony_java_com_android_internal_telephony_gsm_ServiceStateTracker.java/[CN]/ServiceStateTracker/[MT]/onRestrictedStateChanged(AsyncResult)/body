{
  Log.d(LOG_TAG,"[DSAC DEB] " + "onRestrictedStateChanged");
  RestrictedState newRs=new RestrictedState();
  Log.d(LOG_TAG,"[DSAC DEB] " + "current rs at enter " + rs);
  if (ar.exception == null) {
    int[] ints=(int[])ar.result;
    int state=ints[0];
    newRs.setCsEmergencyRestricted(((state & RILConstants.RIL_RESTRICTED_STATE_CS_EMERGENCY) != 0) || ((state & RILConstants.RIL_RESTRICTED_STATE_CS_ALL) != 0));
    newRs.setCsNormalRestricted(((state & RILConstants.RIL_RESTRICTED_STATE_CS_NORMAL) != 0) || ((state & RILConstants.RIL_RESTRICTED_STATE_CS_ALL) != 0));
    newRs.setPsRestricted((state & RILConstants.RIL_RESTRICTED_STATE_PS_ALL) != 0);
    Log.d(LOG_TAG,"[DSAC DEB] " + "new rs " + newRs);
    if (!rs.isPsRestricted() && newRs.isPsRestricted()) {
      psRestrictEnabledRegistrants.notifyRegistrants();
      setNotification(PS_ENABLED,false);
    }
 else     if (rs.isPsRestricted() && !newRs.isPsRestricted()) {
      psRestrictDisabledRegistrants.notifyRegistrants();
      setNotification(PS_DISABLED,false);
    }
    if (!rs.isCsRestricted() && newRs.isCsRestricted()) {
      setNotification(CS_ENABLED,false);
    }
 else     if (rs.isCsRestricted() && !newRs.isCsRestricted()) {
      setNotification(CS_DISABLED,false);
    }
 else {
      if (!rs.isCsEmergencyRestricted() && newRs.isCsEmergencyRestricted()) {
        setNotification(CS_EMERGENCY_ENABLED,false);
      }
 else       if (rs.isCsEmergencyRestricted() && !newRs.isCsEmergencyRestricted()) {
        setNotification(CS_EMERGENCY_DISABLED,false);
      }
      if (!rs.isCsNormalRestricted() && newRs.isCsNormalRestricted()) {
        setNotification(CS_NORMAL_ENABLED,false);
      }
 else       if (rs.isCsEmergencyRestricted() && !newRs.isCsEmergencyRestricted()) {
        setNotification(CS_NORMAL_DISABLED,false);
      }
    }
    rs=newRs;
  }
  Log.d(LOG_TAG,"[DSAC DEB] " + "current rs at return " + rs);
}
