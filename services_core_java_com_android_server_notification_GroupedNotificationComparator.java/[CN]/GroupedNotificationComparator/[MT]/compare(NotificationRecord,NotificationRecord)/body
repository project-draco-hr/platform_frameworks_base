{
  if (left.isRecentlyIntrusive() != right.isRecentlyIntrusive()) {
    return left.isRecentlyIntrusive() ? -1 : 1;
  }
  final NotificationRecord leftProxy=left.getRankingProxy();
  if (leftProxy == null) {
    throw new RuntimeException("left proxy cannot be null: " + left.getKey());
  }
  final NotificationRecord rightProxy=right.getRankingProxy();
  if (rightProxy == null) {
    throw new RuntimeException("right proxy cannot be null: " + right.getKey());
  }
  final String leftSortKey=left.getNotification().getSortKey();
  final String rightSortKey=right.getNotification().getSortKey();
  if (leftProxy != rightProxy) {
    return Integer.compare(leftProxy.getAuthoritativeRank(),rightProxy.getAuthoritativeRank());
  }
 else   if (TextUtils.isEmpty(leftSortKey) || TextUtils.isEmpty(rightSortKey)) {
    return Integer.compare(left.getAuthoritativeRank(),right.getAuthoritativeRank());
  }
 else {
    return leftSortKey.compareTo(rightSortKey);
  }
}
