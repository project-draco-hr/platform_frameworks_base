{
  Allocation pvParams=null, pfParams=null;
  Allocation vertexConstants=null, fragmentConstants=null;
  VertexShader pv=mRenderState.mVertex;
  if (pv != null && pv.getObjectConstants() != null) {
    vertexConstants=Allocation.createTyped(rs,pv.getObjectConstants());
    Element vertexConst=vertexConstants.getType().getElement();
    pvParams=ShaderParam.fillInParams(vertexConst,mSourceParams,mTransform).getAllocation();
  }
  FragmentShader pf=mRenderState.mFragment;
  if (pf != null && pf.getObjectConstants() != null) {
    fragmentConstants=Allocation.createTyped(rs,pf.getObjectConstants());
    Element fragmentConst=fragmentConstants.getType().getElement();
    pfParams=ShaderParam.fillInParams(fragmentConst,mSourceParams,mTransform).getAllocation();
  }
  mData.pv_const=vertexConstants;
  mData.pv_constParams=pvParams;
  mData.pf_const=fragmentConstants;
  mData.pf_constParams=pfParams;
  if (mTransform != null) {
    mData.transformMatrix=mTransform.getRSData().getAllocation();
  }
  mData.name=SceneManager.getStringAsAllocation(rs,getName());
  mData.render_state=mRenderState.getRSData().getAllocation();
  mData.bVolInitialized=0;
}
