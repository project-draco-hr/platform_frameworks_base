{
  Iterator<ShaderParam> allParamsIter=mSourceParams.values().iterator();
  int paramIndex=0;
  while (allParamsIter.hasNext()) {
    ShaderParam sp=allParamsIter.next();
    if (sp instanceof TextureParam) {
      TextureParam p=(TextureParam)sp;
      TextureBase tex=p.getTexture();
      if (tex != null) {
        mData.pf_textures[paramIndex++]=tex.getRsData(false).getAllocation();
      }
    }
  }
  ProgramFragment pf=mRenderState.mFragment.mProgram;
  mData.pf_num_textures=pf != null ? Math.min(pf.getTextureCount(),paramIndex) : 0;
  if (mField != null) {
    mField.set_pf_textures(0,mData.pf_textures,true);
    mField.set_pf_num_textures(0,mData.pf_num_textures,true);
  }
}
