{
  super.onAttachedToWindow();
  if (mAttached)   return;
  mAttached=true;
  if (mLive) {
    IntentFilter filter=new IntentFilter();
    filter.addAction(Intent.ACTION_TIME_TICK);
    filter.addAction(Intent.ACTION_TIME_CHANGED);
    filter.addAction(Intent.ACTION_TIMEZONE_CHANGED);
    mContext.registerReceiver(mIntentReceiver,filter);
  }
  mFormatChangeObserver=new FormatChangeObserver();
  mContext.getContentResolver().registerContentObserver(Settings.System.CONTENT_URI,true,mFormatChangeObserver);
  updateTime();
}
