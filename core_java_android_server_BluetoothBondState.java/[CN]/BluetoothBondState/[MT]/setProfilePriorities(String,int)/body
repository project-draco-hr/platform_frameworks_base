{
  BluetoothDevice remoteDevice=mService.getRemoteDevice(address);
  mBluetoothInputProfileHandler.setInitialInputDevicePriority(remoteDevice,state);
  if (state == BluetoothDevice.BOND_BONDED) {
    if (mA2dpProxy != null && mA2dpProxy.getPriority(remoteDevice) == BluetoothProfile.PRIORITY_UNDEFINED) {
      mA2dpProxy.setPriority(remoteDevice,BluetoothProfile.PRIORITY_ON);
    }
    if (mHeadsetProxy != null && mHeadsetProxy.getPriority(remoteDevice) == BluetoothProfile.PRIORITY_UNDEFINED) {
      mHeadsetProxy.setPriority(remoteDevice,BluetoothProfile.PRIORITY_ON);
    }
  }
 else   if (state == BluetoothDevice.BOND_NONE) {
    if (mA2dpProxy != null) {
      mA2dpProxy.setPriority(remoteDevice,BluetoothProfile.PRIORITY_UNDEFINED);
    }
    if (mHeadsetProxy != null) {
      mHeadsetProxy.setPriority(remoteDevice,BluetoothProfile.PRIORITY_UNDEFINED);
    }
  }
  if (mA2dpProxy == null || mHeadsetProxy == null) {
    Log.e(TAG,"Proxy is null:" + mA2dpProxy + ":"+ mHeadsetProxy);
  }
}
