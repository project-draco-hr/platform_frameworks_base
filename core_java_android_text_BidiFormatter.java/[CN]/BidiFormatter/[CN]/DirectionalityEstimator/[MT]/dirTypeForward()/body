{
  lastChar=text.charAt(charIndex);
  if (Character.isHighSurrogate(lastChar)) {
    int codePoint=Character.codePointAt(text,charIndex);
    charIndex+=Character.charCount(codePoint);
    return Character.getDirectionality(codePoint);
  }
  charIndex++;
  byte dirType=getCachedDirectionality(lastChar);
  if (isHtml) {
    if (lastChar == '<') {
      dirType=skipTagForward();
    }
 else     if (lastChar == '&') {
      dirType=skipEntityForward();
    }
  }
  return dirType;
}
