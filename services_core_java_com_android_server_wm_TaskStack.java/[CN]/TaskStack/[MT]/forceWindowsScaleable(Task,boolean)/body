{
  SurfaceControl.openTransaction();
  try {
    final ArrayList<AppWindowToken> activities=task.mAppTokens;
    for (int activityNdx=activities.size() - 1; activityNdx >= 0; --activityNdx) {
      final ArrayList<WindowState> windows=activities.get(activityNdx).allAppWindows;
      for (int winNdx=windows.size() - 1; winNdx >= 0; --winNdx) {
        final WindowStateAnimator winAnimator=windows.get(winNdx).mWinAnimator;
        if (winAnimator == null || !winAnimator.hasSurface()) {
          continue;
        }
        winAnimator.mSurfaceController.forceScaleableInTransaction(force);
      }
    }
  }
  finally {
    SurfaceControl.closeTransaction();
  }
}
