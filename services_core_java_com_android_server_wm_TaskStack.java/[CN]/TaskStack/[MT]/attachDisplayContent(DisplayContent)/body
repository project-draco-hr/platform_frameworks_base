{
  if (mDisplayContent != null) {
    throw new IllegalStateException("attachDisplayContent: Already attached");
  }
  mDisplayContent=displayContent;
  mAnimationBackgroundSurface=new DimLayer(mService,this,mDisplayContent.getDisplayId());
  Rect bounds=null;
  final boolean dockedStackExists=mService.mStackIdToStack.get(DOCKED_STACK_ID) != null;
  if (mStackId == DOCKED_STACK_ID || (dockedStackExists && mStackId >= FIRST_STATIC_STACK_ID && mStackId <= LAST_STATIC_STACK_ID)) {
    bounds=new Rect();
    displayContent.getLogicalDisplayRect(mTmpRect);
    getInitialDockedStackBounds(mTmpRect,bounds,mStackId);
  }
  updateDisplayInfo(bounds);
  if (mStackId == DOCKED_STACK_ID) {
    resizeNonDockedStacks(!FULLSCREEN);
  }
}
