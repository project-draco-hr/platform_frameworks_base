{
  if (mDisplayContent != null) {
    throw new IllegalStateException("attachDisplayContent: Already attached");
  }
  mDisplayContent=displayContent;
  mAnimationBackgroundSurface=new DimLayer(mService,this,mDisplayContent.getDisplayId());
  Rect bounds=null;
  final TaskStack dockedStack=mService.mStackIdToStack.get(DOCKED_STACK_ID);
  if (mStackId == DOCKED_STACK_ID || (dockedStack != null && mStackId != PINNED_STACK_ID && mStackId >= FIRST_STATIC_STACK_ID && mStackId <= LAST_STATIC_STACK_ID)) {
    bounds=new Rect();
    displayContent.getLogicalDisplayRect(mTmpRect);
    mTmpRect2.setEmpty();
    if (dockedStack != null) {
      dockedStack.getRawBounds(mTmpRect2);
    }
    final boolean dockedOnTopOrLeft=WindowManagerService.sDockedStackCreateMode == DOCKED_STACK_CREATE_MODE_TOP_OR_LEFT;
    getStackDockedModeBounds(mTmpRect,bounds,mStackId,mTmpRect2,mDisplayContent.mDividerControllerLocked.getWidth(),dockedOnTopOrLeft);
  }
  updateDisplayInfo(bounds);
  if (mStackId == DOCKED_STACK_ID) {
    resizeNonDockedStacks(!FULLSCREEN,mBounds);
  }
}
