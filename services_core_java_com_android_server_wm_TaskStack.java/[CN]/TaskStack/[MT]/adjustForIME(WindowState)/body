{
  final int dockedSide=getDockSide();
  final boolean dockedTopOrBottom=dockedSide == DOCKED_TOP || dockedSide == DOCKED_BOTTOM;
  final Rect adjustedBounds=mTmpAdjustedBounds;
  if (imeWin == null || !dockedTopOrBottom) {
    return false;
  }
  final Rect displayContentRect=mTmpRect;
  final Rect contentBounds=mTmpRect2;
  getDisplayContent().getContentRect(displayContentRect);
  contentBounds.set(displayContentRect);
  int imeTop=Math.max(imeWin.getDisplayFrameLw().top,contentBounds.top);
  imeTop+=imeWin.getGivenContentInsetsLw().top;
  if (contentBounds.bottom > imeTop) {
    contentBounds.bottom=imeTop;
  }
  if (mLastContentBounds.equals(contentBounds)) {
    return true;
  }
  mLastContentBounds.set(contentBounds);
  adjustedBounds.set(mBounds);
  final int yOffset=displayContentRect.bottom - contentBounds.bottom;
  if (dockedSide == DOCKED_TOP) {
    adjustedBounds.bottom=Math.max(adjustedBounds.bottom - yOffset,displayContentRect.top);
  }
 else {
    final int dividerWidth=getDisplayContent().mDividerControllerLocked.getContentWidth();
    adjustedBounds.top=Math.max(adjustedBounds.top - yOffset,displayContentRect.top + dividerWidth);
    adjustedBounds.bottom=adjustedBounds.top + mBounds.height();
  }
  return true;
}
