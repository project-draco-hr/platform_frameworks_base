{
  final int dockedSide=getDockSide();
  final boolean dockedTopOrBottom=dockedSide == DOCKED_TOP || dockedSide == DOCKED_BOTTOM;
  final Rect adjustedBounds=mAdjustedBounds;
  if (imeWin == null || !dockedTopOrBottom) {
    if (!mContentBounds.isEmpty()) {
      mContentBounds.setEmpty();
      adjustedBounds.set(mBounds);
      alignTasksToAdjustedBounds(adjustedBounds);
    }
    return;
  }
  final Rect displayContentRect=mTmpRect;
  final Rect contentBounds=mTmpRect2;
  mDisplayContent.getContentRect(displayContentRect);
  contentBounds.set(displayContentRect);
  int imeTop=Math.max(imeWin.getDisplayFrameLw().top,contentBounds.top);
  imeTop+=imeWin.getGivenContentInsetsLw().top;
  if (contentBounds.bottom > imeTop) {
    contentBounds.bottom=imeTop;
  }
  if (mContentBounds.equals(contentBounds)) {
    return;
  }
  mContentBounds.set(contentBounds);
  adjustedBounds.set(mBounds);
  final int yOffset=displayContentRect.bottom - contentBounds.bottom;
  if (dockedSide == DOCKED_TOP) {
    adjustedBounds.bottom=Math.max(adjustedBounds.bottom - yOffset,displayContentRect.top);
  }
 else {
    final int dividerWidth=mDisplayContent.mDividerControllerLocked.getContentWidth();
    adjustedBounds.top=Math.max(adjustedBounds.top - yOffset,displayContentRect.top + dividerWidth);
    adjustedBounds.bottom=adjustedBounds.top + mBounds.height();
    alignTasksToAdjustedBounds(adjustedBounds);
  }
}
