{
  int stackNdx;
  if (!toTop) {
    stackNdx=0;
  }
 else {
    stackNdx=mTasks.size();
    final int currentUserId=mService.mCurrentUserId;
    if (task.mUserId != currentUserId) {
      while (--stackNdx >= 0) {
        if (currentUserId != mTasks.get(stackNdx).mUserId) {
          break;
        }
      }
      ++stackNdx;
    }
  }
  if (DEBUG_TASK_MOVEMENT)   Slog.d(TAG,"addTask: task=" + task + " toTop="+ toTop+ " pos="+ stackNdx);
  mTasks.add(stackNdx,task);
  task.mStack=this;
  mDisplayContent.moveStack(this,true);
  EventLog.writeEvent(EventLogTags.WM_TASK_MOVED,task.taskId,toTop ? 1 : 0,stackNdx);
}
