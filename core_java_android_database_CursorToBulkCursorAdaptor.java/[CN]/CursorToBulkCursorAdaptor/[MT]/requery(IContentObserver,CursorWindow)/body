{
synchronized (mLock) {
    throwIfCursorIsClosed();
    if (mCursor instanceof AbstractWindowedCursor) {
      ((AbstractWindowedCursor)mCursor).setWindow(window);
    }
 else {
      if (mWindowForNonWindowedCursor != null) {
        mWindowForNonWindowedCursor.close();
      }
      mWindowForNonWindowedCursor=window;
    }
    try {
      if (!mCursor.requery()) {
        return -1;
      }
    }
 catch (    IllegalStateException e) {
      IllegalStateException leakProgram=new IllegalStateException(mProviderName + " Requery misuse db, mCursor isClosed:" + mCursor.isClosed(),e);
      throw leakProgram;
    }
    if (!(mCursor instanceof AbstractWindowedCursor)) {
      if (window != null) {
        mCursor.fillWindow(0,window);
      }
    }
    unregisterObserverProxyLocked();
    createAndRegisterObserverProxyLocked(observer);
    return mCursor.getCount();
  }
}
