{
  final ShortcutInfo si1=makeShortcut("shortcut1");
  assertTrue(mManager.setDynamicShortcuts(list(si1)));
  assertEquals(2,mManager.getRemainingCallCount());
  mInjectedCurrentTimeLillis++;
  assertTrue(mManager.setDynamicShortcuts(list(si1)));
  assertEquals(1,mManager.getRemainingCallCount());
  mInjectedCurrentTimeLillis++;
  assertTrue(mManager.setDynamicShortcuts(list(si1)));
  assertEquals(0,mManager.getRemainingCallCount());
  mInjectedCurrentTimeLillis++;
  assertFalse(mManager.setDynamicShortcuts(list(si1)));
  mInjectedClientPackage=CALLING_PACKAGE_2;
  mInjectedCallingUid=CALLING_UID_2;
  final ShortcutInfo si2=makeShortcut("shortcut1");
  assertEquals(3,mManager.getRemainingCallCount());
  assertTrue(mManager.setDynamicShortcuts(list(si2)));
  assertEquals(2,mManager.getRemainingCallCount());
  mInjectedCurrentTimeLillis++;
  assertTrue(mManager.setDynamicShortcuts(list(si2)));
  assertEquals(1,mManager.getRemainingCallCount());
  mInjectedClientPackage=CALLING_PACKAGE_1;
  mInjectedCallingUid=CALLING_UID_1;
  mInjectedCurrentTimeLillis=START_TIME + INTERVAL - 1;
  assertEquals(0,mManager.getRemainingCallCount());
  assertFalse(mManager.setDynamicShortcuts(list(si1)));
  assertEquals(0,mManager.getRemainingCallCount());
  mInjectedCurrentTimeLillis++;
  assertTrue(mManager.setDynamicShortcuts(list(si1)));
  mInjectedCurrentTimeLillis++;
  assertTrue(mManager.setDynamicShortcuts(list(si1)));
  mInjectedCurrentTimeLillis++;
  assertTrue(mManager.setDynamicShortcuts(list(si1)));
  mInjectedCurrentTimeLillis++;
  assertFalse(mManager.setDynamicShortcuts(list(si1)));
  mInjectedCurrentTimeLillis=START_TIME + 4 * INTERVAL;
  assertTrue(mManager.setDynamicShortcuts(list(si1)));
  assertTrue(mManager.setDynamicShortcuts(list(si1)));
  assertTrue(mManager.setDynamicShortcuts(list(si1)));
  assertFalse(mManager.setDynamicShortcuts(list(si1)));
  mInjectedClientPackage=CALLING_PACKAGE_2;
  mInjectedCallingUid=CALLING_UID_2;
  assertEquals(3,mManager.getRemainingCallCount());
  assertTrue(mManager.setDynamicShortcuts(list(si2)));
  assertTrue(mManager.setDynamicShortcuts(list(si2)));
  assertTrue(mManager.setDynamicShortcuts(list(si2)));
  assertFalse(mManager.setDynamicShortcuts(list(si2)));
}
