{
  setCaller(CALLING_PACKAGE_1);
  final ShortcutInfo s1_1=makeShortcut("s1","Title 1",makeComponent(ShortcutActivity.class),null,makeIntent(Intent.ACTION_ASSIST,ShortcutActivity2.class,"key1","val1","nest",makeBundle("key",123)),10);
  final ShortcutInfo s1_2=makeShortcut("s2","Title 2",null,null,makeIntent(Intent.ACTION_ASSIST,ShortcutActivity3.class),12);
  assertTrue(mManager.setDynamicShortcuts(list(s1_1,s1_2)));
  setCaller(CALLING_PACKAGE_2);
  final ShortcutInfo s2_1=makeShortcut("s1","ABC",makeComponent(ShortcutActivity.class),null,makeIntent(Intent.ACTION_ANSWER,ShortcutActivity.class,"key1","val1","nest",makeBundle("key",123)),10);
  assertTrue(mManager.setDynamicShortcuts(list(s2_1)));
  setCaller(LAUNCHER_1);
  mLauncherApps.pinShortcuts(CALLING_PACKAGE_1,list("s1","s2"),getCallingUser());
  mLauncherApps.pinShortcuts(CALLING_PACKAGE_2,list("s1"),getCallingUser());
  setCaller(CALLING_PACKAGE_1);
  mManager.removeDynamicShortcuts(list("s2"));
  setCaller(LAUNCHER_1);
  Intent intent;
  intent=launchShortcutAndGetIntent(CALLING_PACKAGE_1,"s1",USER_0);
  assertEquals(ShortcutActivity2.class.getName(),intent.getComponent().getClassName());
  intent=launchShortcutAndGetIntent(CALLING_PACKAGE_1,"s2",USER_0);
  assertEquals(ShortcutActivity3.class.getName(),intent.getComponent().getClassName());
  intent=launchShortcutAndGetIntent(CALLING_PACKAGE_2,"s1",USER_0);
  assertEquals(ShortcutActivity.class.getName(),intent.getComponent().getClassName());
}
