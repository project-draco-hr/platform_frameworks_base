{
  setCaller(CALLING_PACKAGE_1,USER_11);
  PersistableBundle pb=new PersistableBundle();
  pb.putInt("k",1);
  ShortcutInfo sorig=new ShortcutInfo.Builder(mClientContext).setId("id").setActivityComponent(new ComponentName("a","b")).setIcon(Icon.createWithResource(mClientContext,123)).setTitle("title").setText("text").setCategories(set(ShortcutInfo.SHORTCUT_CATEGORY_CONVERSATION,"xyz")).setIntent(makeIntent("action",ShortcutActivity.class,"key","val")).setWeight(123).setExtras(pb).build();
  sorig.addFlags(ShortcutInfo.FLAG_PINNED);
  sorig.setBitmapPath("abc");
  sorig.setIconResourceId(456);
  ShortcutInfo si=sorig.clone(0);
  assertEquals(USER_11,si.getUserId());
  assertEquals(HANDLE_USER_11,si.getUserHandle());
  assertEquals(mClientContext.getPackageName(),si.getPackageName());
  assertEquals("id",si.getId());
  assertEquals(new ComponentName("a","b"),si.getActivityComponent());
  assertEquals(123,si.getIcon().getResId());
  assertEquals("title",si.getTitle());
  assertEquals("text",si.getText());
  assertEquals(set(ShortcutInfo.SHORTCUT_CATEGORY_CONVERSATION,"xyz"),si.getCategories());
  assertEquals("action",si.getIntent().getAction());
  assertEquals("val",si.getIntent().getStringExtra("key"));
  assertEquals(123,si.getWeight());
  assertEquals(1,si.getExtras().getInt("k"));
  assertEquals(ShortcutInfo.FLAG_PINNED,si.getFlags());
  assertEquals("abc",si.getBitmapPath());
  assertEquals(456,si.getIconResourceId());
  si=sorig.clone(ShortcutInfo.CLONE_REMOVE_FOR_CREATOR);
  assertEquals(mClientContext.getPackageName(),si.getPackageName());
  assertEquals("id",si.getId());
  assertEquals(new ComponentName("a","b"),si.getActivityComponent());
  assertEquals(null,si.getIcon());
  assertEquals("title",si.getTitle());
  assertEquals("text",si.getText());
  assertEquals(set(ShortcutInfo.SHORTCUT_CATEGORY_CONVERSATION,"xyz"),si.getCategories());
  assertEquals("action",si.getIntent().getAction());
  assertEquals("val",si.getIntent().getStringExtra("key"));
  assertEquals(123,si.getWeight());
  assertEquals(1,si.getExtras().getInt("k"));
  assertEquals(ShortcutInfo.FLAG_PINNED,si.getFlags());
  assertEquals(null,si.getBitmapPath());
  assertEquals(456,si.getIconResourceId());
  si=sorig.clone(ShortcutInfo.CLONE_REMOVE_FOR_LAUNCHER);
  assertEquals(mClientContext.getPackageName(),si.getPackageName());
  assertEquals("id",si.getId());
  assertEquals(new ComponentName("a","b"),si.getActivityComponent());
  assertEquals(null,si.getIcon());
  assertEquals("title",si.getTitle());
  assertEquals("text",si.getText());
  assertEquals(set(ShortcutInfo.SHORTCUT_CATEGORY_CONVERSATION,"xyz"),si.getCategories());
  assertEquals(null,si.getIntent());
  assertEquals(123,si.getWeight());
  assertEquals(1,si.getExtras().getInt("k"));
  assertEquals(ShortcutInfo.FLAG_PINNED,si.getFlags());
  assertEquals(null,si.getBitmapPath());
  assertEquals(456,si.getIconResourceId());
  si=sorig.clone(ShortcutInfo.CLONE_REMOVE_NON_KEY_INFO);
  assertEquals(mClientContext.getPackageName(),si.getPackageName());
  assertEquals("id",si.getId());
  assertEquals(null,si.getActivityComponent());
  assertEquals(null,si.getIcon());
  assertEquals(null,si.getTitle());
  assertEquals(null,si.getText());
  assertEquals(null,si.getCategories());
  assertEquals(null,si.getIntent());
  assertEquals(0,si.getWeight());
  assertEquals(null,si.getExtras());
  assertEquals(ShortcutInfo.FLAG_PINNED | ShortcutInfo.FLAG_KEY_FIELDS_ONLY,si.getFlags());
  assertEquals(null,si.getBitmapPath());
  assertEquals(456,si.getIconResourceId());
}
