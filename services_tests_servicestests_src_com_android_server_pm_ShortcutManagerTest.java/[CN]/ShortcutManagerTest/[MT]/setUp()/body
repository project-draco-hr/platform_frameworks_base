{
  super.setUp();
  mServiceContext=spy(new ServiceContext());
  mClientContext=new ClientContext();
  mMockPackageManager=mock(PackageManager.class);
  mMockPackageManagerInternal=mock(PackageManagerInternal.class);
  mMockUserManager=mock(UserManager.class);
  mInjectedCurrentTimeLillis=START_TIME;
  mInjectedPackages=new HashMap<>();
  ;
  addPackage(CALLING_PACKAGE_1,CALLING_UID_1,1);
  addPackage(CALLING_PACKAGE_2,CALLING_UID_2,2);
  addPackage(CALLING_PACKAGE_3,CALLING_UID_3,3);
  addPackage(LAUNCHER_1,LAUNCHER_UID_1,4);
  addPackage(LAUNCHER_2,LAUNCHER_UID_2,5);
  mUninstalledPackages=new ArrayList<>();
  mInjectedFilePathRoot=new File(getTestContext().getCacheDir(),"test-files");
  if (mInjectedFilePathRoot.exists()) {
    Assert.assertTrue("failed to delete dir",FileUtils.deleteContents(mInjectedFilePathRoot));
  }
  mInjectedFilePathRoot.mkdirs();
  initService();
  setCaller(CALLING_PACKAGE_1);
}
