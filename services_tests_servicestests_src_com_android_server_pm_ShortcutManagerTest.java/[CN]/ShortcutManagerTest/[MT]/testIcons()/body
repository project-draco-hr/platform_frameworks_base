{
  final Icon res32x32=Icon.createWithResource(mContext,R.drawable.black_32x32);
  final Icon res64x64=Icon.createWithResource(mContext,R.drawable.black_64x64);
  final Icon res512x512=Icon.createWithResource(mContext,R.drawable.black_512x512);
  final Icon bmp32x32=Icon.createWithBitmap(BitmapFactory.decodeResource(mContext.getResources(),R.drawable.black_32x32));
  final Icon bmp64x64=Icon.createWithBitmap(BitmapFactory.decodeResource(mContext.getResources(),R.drawable.black_64x64));
  final Icon bmp512x512=Icon.createWithBitmap(BitmapFactory.decodeResource(mContext.getResources(),R.drawable.black_512x512));
  setCaller(CALLING_PACKAGE_1);
  assertTrue(mManager.setDynamicShortcuts(Arrays.asList(makeShortcutWithIcon("res32x32",res32x32),makeShortcutWithIcon("res64x64",res64x64),makeShortcutWithIcon("bmp32x32",bmp32x32),makeShortcutWithIcon("bmp64x64",bmp64x64),makeShortcutWithIcon("bmp512x512",bmp512x512),makeShortcut("none"))));
  assertShortcutIds(assertAllNotHaveIcon(mManager.getDynamicShortcuts()),"res32x32","res64x64","bmp32x32","bmp64x64","bmp512x512","none");
  setCaller(CALLING_PACKAGE_2);
  assertTrue(mManager.setDynamicShortcuts(Arrays.asList(makeShortcutWithIcon("res32x32",res512x512),makeShortcutWithIcon("res64x64",res512x512),makeShortcutWithIcon("none",res512x512))));
  assertShortcutIds(assertAllNotHaveIcon(mManager.getDynamicShortcuts()),"res32x32","res64x64","none");
  initService();
  Bitmap bmp;
  setCaller(LAUNCHER_1);
  assertShortcutIds(assertAllHaveIconResId(mInternal.getShortcutInfo(getCallingPackage(),CALLING_PACKAGE_1,Arrays.asList("res32x32"),getCallingUserId())),"res32x32");
  assertShortcutIds(assertAllHaveIconResId(mInternal.getShortcutInfo(getCallingPackage(),CALLING_PACKAGE_1,Arrays.asList("res64x64"),getCallingUserId())),"res64x64");
  assertShortcutIds(assertAllHaveIconFile(mInternal.getShortcutInfo(getCallingPackage(),CALLING_PACKAGE_1,Arrays.asList("bmp32x32"),getCallingUserId())),"bmp32x32");
  assertShortcutIds(assertAllHaveIconFile(mInternal.getShortcutInfo(getCallingPackage(),CALLING_PACKAGE_1,Arrays.asList("bmp64x64"),getCallingUserId())),"bmp64x64");
  assertShortcutIds(assertAllHaveIconFile(mInternal.getShortcutInfo(getCallingPackage(),CALLING_PACKAGE_1,Arrays.asList("bmp512x512"),getCallingUserId())),"bmp512x512");
  assertEquals(R.drawable.black_32x32,mInternal.getShortcutIconResId(getCallingPackage(),makePackageShortcut(CALLING_PACKAGE_1,"res32x32"),getCallingUserId()));
  assertEquals(R.drawable.black_64x64,mInternal.getShortcutIconResId(getCallingPackage(),makePackageShortcut(CALLING_PACKAGE_1,"res64x64"),getCallingUserId()));
  assertEquals(0,mInternal.getShortcutIconResId(getCallingPackage(),makePackageShortcut(CALLING_PACKAGE_1,"bmp32x32"),getCallingUserId()));
  assertEquals(0,mInternal.getShortcutIconResId(getCallingPackage(),makePackageShortcut(CALLING_PACKAGE_1,"bmp64x64"),getCallingUserId()));
  assertEquals(0,mInternal.getShortcutIconResId(getCallingPackage(),makePackageShortcut(CALLING_PACKAGE_1,"bmp512x512"),getCallingUserId()));
  bmp=pfdToBitmap(mInternal.getShortcutIconFd(getCallingPackage(),makePackageShortcut(CALLING_PACKAGE_1,"bmp32x32"),getCallingUserId()));
  assertBitmapSize(32,32,bmp);
  bmp=pfdToBitmap(mInternal.getShortcutIconFd(getCallingPackage(),makePackageShortcut(CALLING_PACKAGE_1,"bmp64x64"),getCallingUserId()));
  assertBitmapSize(64,64,bmp);
  bmp=pfdToBitmap(mInternal.getShortcutIconFd(getCallingPackage(),makePackageShortcut(CALLING_PACKAGE_1,"bmp512x512"),getCallingUserId()));
  assertBitmapSize(128,128,bmp);
}
