{
  if (mPendingWhileIdleAlarms.size() > 0) {
    ArrayList<Alarm> alarms=mPendingWhileIdleAlarms;
    mPendingWhileIdleAlarms=new ArrayList<>();
    final long nowElapsed=SystemClock.elapsedRealtime();
    for (int i=alarms.size() - 1; i >= 0; i--) {
      Alarm a=alarms.get(i);
      reAddAlarmLocked(a,nowElapsed,false);
    }
  }
  mAllowWhileIdleMinTime=ALLOW_WHILE_IDLE_SHORT_TIME;
  rescheduleKernelAlarmsLocked();
  updateNextAlarmClockLocked();
  try {
    mTimeTickSender.send();
  }
 catch (  PendingIntent.CanceledException e) {
  }
}
