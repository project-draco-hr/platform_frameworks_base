{
  if (operation == null && listener == null) {
    if (localLOGV) {
      Slog.w(TAG,"requested remove() of null operation",new RuntimeException("here"));
    }
    return false;
  }
  boolean didRemove=false;
  long newStart=0;
  long newEnd=Long.MAX_VALUE;
  int newFlags=0;
  for (int i=0; i < alarms.size(); ) {
    Alarm alarm=alarms.get(i);
    if (alarm.matches(operation,listener)) {
      alarms.remove(i);
      didRemove=true;
      if (alarm.alarmClock != null) {
        mNextAlarmClockMayChange=true;
      }
    }
 else {
      if (alarm.whenElapsed > newStart) {
        newStart=alarm.whenElapsed;
      }
      if (alarm.maxWhenElapsed < newEnd) {
        newEnd=alarm.maxWhenElapsed;
      }
      newFlags|=alarm.flags;
      i++;
    }
  }
  if (didRemove) {
    start=newStart;
    end=newEnd;
    flags=newFlags;
  }
  return didRemove;
}
