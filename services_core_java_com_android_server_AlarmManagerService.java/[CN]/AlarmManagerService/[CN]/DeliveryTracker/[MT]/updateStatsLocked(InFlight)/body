{
  final long nowELAPSED=SystemClock.elapsedRealtime();
  BroadcastStats bs=inflight.mBroadcastStats;
  bs.nesting--;
  if (bs.nesting <= 0) {
    bs.nesting=0;
    bs.aggregateTime+=nowELAPSED - bs.startTime;
  }
  FilterStats fs=inflight.mFilterStats;
  fs.nesting--;
  if (fs.nesting <= 0) {
    fs.nesting=0;
    fs.aggregateTime+=nowELAPSED - fs.startTime;
  }
  if (RECORD_ALARMS_IN_HISTORY) {
    if (inflight.mWorkSource != null && inflight.mWorkSource.size() > 0) {
      for (int wi=0; wi < inflight.mWorkSource.size(); wi++) {
        ActivityManagerNative.noteAlarmFinish(inflight.mPendingIntent,inflight.mWorkSource.get(wi),inflight.mTag);
      }
    }
 else {
      ActivityManagerNative.noteAlarmFinish(inflight.mPendingIntent,inflight.mUid,inflight.mTag);
    }
  }
}
