{
  super.onConfigurationChanged(newConfig);
  mService.updateDisplaySize();
  boolean nightMode=(newConfig.uiMode & Configuration.UI_MODE_NIGHT_MASK) == Configuration.UI_MODE_NIGHT_YES;
  if (mNightMode != nightMode) {
    mNightMode=nightMode;
    mStartAlpha=getCurAlpha();
    mEndAlpha=mNightMode ? 0x80 : 0x00;
    mEndTime=SystemClock.uptimeMillis() + DIM_ANIM_TIME;
    invalidate();
  }
}
