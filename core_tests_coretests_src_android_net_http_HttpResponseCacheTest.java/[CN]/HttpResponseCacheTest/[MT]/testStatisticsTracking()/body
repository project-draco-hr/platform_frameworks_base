{
  HttpResponseCache cache=HttpResponseCache.install(cacheDir,10 * 1024 * 1024);
  server.enqueue(new MockResponse().addHeader("Cache-Control: max-age=60").setBody("A"));
  server.play();
  URLConnection c1=server.getUrl("/").openConnection();
  InputStream inputStream1=c1.getInputStream();
  assertEquals('A',inputStream1.read());
  inputStream1.close();
  assertEquals(1,cache.getRequestCount());
  assertEquals(1,cache.getNetworkCount());
  assertEquals(0,cache.getHitCount());
  URLConnection c2=server.getUrl("/").openConnection();
  assertEquals('A',c2.getInputStream().read());
  URLConnection c3=server.getUrl("/").openConnection();
  assertEquals('A',c3.getInputStream().read());
  assertEquals(3,cache.getRequestCount());
  assertEquals(1,cache.getNetworkCount());
  assertEquals(2,cache.getHitCount());
}
