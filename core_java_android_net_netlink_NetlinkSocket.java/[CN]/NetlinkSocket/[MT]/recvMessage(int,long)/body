{
  checkTimeout(timeoutMs);
synchronized (mDescriptor) {
    if (mLastRecvTimeoutMs != timeoutMs) {
      Os.setsockoptTimeval(mDescriptor,OsConstants.SOL_SOCKET,OsConstants.SO_RCVTIMEO,StructTimeval.fromMillis(timeoutMs));
      mLastRecvTimeoutMs=timeoutMs;
    }
  }
  ByteBuffer byteBuffer=ByteBuffer.allocate(bufsize);
  int length=Os.read(mDescriptor,byteBuffer);
  if (length == bufsize) {
    Log.w(TAG,"maximum read");
  }
  byteBuffer.position(0);
  byteBuffer.limit(length);
  byteBuffer.order(ByteOrder.nativeOrder());
  return byteBuffer;
}
