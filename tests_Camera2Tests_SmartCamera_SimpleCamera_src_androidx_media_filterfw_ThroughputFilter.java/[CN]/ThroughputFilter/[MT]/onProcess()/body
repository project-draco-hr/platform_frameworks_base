{
  Frame inputFrame=getConnectedInputPort("frame").pullFrame();
  ++mTotalFrameCount;
  ++mPeriodFrameCount;
  if (mLastTime == 0) {
    mLastTime=SystemClock.elapsedRealtime();
  }
  long curTime=SystemClock.elapsedRealtime();
  if ((curTime - mLastTime) >= (mPeriod * 1000)) {
    Log.i("Thru","It is time!");
    OutputPort tpPort=getConnectedOutputPort("throughput");
    Throughput throughput=new Throughput(mTotalFrameCount,mPeriodFrameCount,curTime - mLastTime,inputFrame.getElementCount());
    FrameValue throughputFrame=tpPort.fetchAvailableFrame(null).asFrameValue();
    throughputFrame.setValue(throughput);
    tpPort.pushFrame(throughputFrame);
    mLastTime=curTime;
    mPeriodFrameCount=0;
  }
  getConnectedOutputPort("frame").pushFrame(inputFrame);
}
