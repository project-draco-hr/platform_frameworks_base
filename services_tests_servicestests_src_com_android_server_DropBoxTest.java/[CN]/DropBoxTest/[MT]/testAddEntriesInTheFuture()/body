{
  File dir=getEmptyDir("testAddEntriesInTheFuture");
  long before=System.currentTimeMillis();
  FileWriter w0=new FileWriter(new File(dir,"DropBoxTest@" + (before + 5000) + ".txt"));
  w0.write("FUTURE0");
  w0.close();
  FileWriter w1=new FileWriter(new File(dir,"DropBoxTest@" + (before + 100000) + ".txt"));
  w1.write("FUTURE1");
  w1.close();
  File f2=new File(dir,"DropBoxTest@" + (before + 100001) + ".txt.gz");
  GZIPOutputStream gz2=new GZIPOutputStream(new FileOutputStream(f2));
  gz2.write("FUTURE2".getBytes());
  gz2.close();
  new FileOutputStream(new File(dir,"DropBoxTest@" + (before + 100002) + ".lost")).close();
  DropBoxManagerService service=new DropBoxManagerService(getContext(),dir);
  DropBoxManager dropbox=new DropBoxManager(getContext(),service.getServiceStub());
  DropBoxManager.Entry e0=dropbox.getNextEntry(null,before);
  DropBoxManager.Entry e1=dropbox.getNextEntry(null,e0.getTimeMillis());
  DropBoxManager.Entry e2=dropbox.getNextEntry(null,e1.getTimeMillis());
  DropBoxManager.Entry e3=dropbox.getNextEntry(null,e2.getTimeMillis());
  assertTrue(null == dropbox.getNextEntry(null,e3.getTimeMillis()));
  assertEquals("FUTURE0",e0.getText(80));
  assertEquals("FUTURE1",e1.getText(80));
  assertEquals("FUTURE2",e2.getText(80));
  assertEquals(null,e3.getText(80));
  assertEquals(before + 5000,e0.getTimeMillis());
  assertEquals(before + 100000,e1.getTimeMillis());
  assertEquals(before + 100001,e2.getTimeMillis());
  assertEquals(before + 100002,e3.getTimeMillis());
  e0.close();
  e1.close();
  e2.close();
  e3.close();
  dropbox.addText("NotDropBoxTest","FUTURE");
  e0=dropbox.getNextEntry(null,before);
  e1=dropbox.getNextEntry(null,e0.getTimeMillis());
  e2=dropbox.getNextEntry(null,e1.getTimeMillis());
  e3=dropbox.getNextEntry(null,e2.getTimeMillis());
  assertTrue(null == dropbox.getNextEntry("DropBoxTest",e3.getTimeMillis()));
  assertEquals("FUTURE0",e0.getText(80));
  assertEquals("FUTURE1",e1.getText(80));
  assertEquals("FUTURE2",e2.getText(80));
  assertEquals(null,e3.getText(80));
  assertEquals(before + 5000,e0.getTimeMillis());
  assertEquals(before + 5001,e1.getTimeMillis());
  assertEquals(before + 5002,e2.getTimeMillis());
  assertEquals(before + 5003,e3.getTimeMillis());
  e0.close();
  e1.close();
  e2.close();
  e3.close();
}
