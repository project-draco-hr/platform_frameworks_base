{
  File dir=getEmptyDir("testAddText");
  DropBoxManagerService service=new DropBoxManagerService(getContext(),dir);
  DropBoxManager dropbox=new DropBoxManager(getContext(),service.getServiceStub());
  long before=System.currentTimeMillis();
  Thread.sleep(5);
  dropbox.addText("DropBoxTest","TEST0");
  Thread.sleep(5);
  long between=System.currentTimeMillis();
  Thread.sleep(5);
  dropbox.addText("DropBoxTest","TEST1");
  dropbox.addText("DropBoxTest","TEST2");
  Thread.sleep(5);
  long after=System.currentTimeMillis();
  DropBoxManager.Entry e0=dropbox.getNextEntry("DropBoxTest",before);
  DropBoxManager.Entry e1=dropbox.getNextEntry("DropBoxTest",e0.getTimeMillis());
  DropBoxManager.Entry e2=dropbox.getNextEntry("DropBoxTest",e1.getTimeMillis());
  assertTrue(null == dropbox.getNextEntry("DropBoxTest",e2.getTimeMillis()));
  assertTrue(e0.getTimeMillis() > before);
  assertTrue(e0.getTimeMillis() < between);
  assertTrue(e1.getTimeMillis() > between);
  assertTrue(e1.getTimeMillis() < e2.getTimeMillis());
  assertTrue(e2.getTimeMillis() < after);
  assertEquals("TEST0",e0.getText(80));
  assertEquals("TEST1",e1.getText(80));
  assertEquals("TES",e2.getText(3));
  e0.close();
  e1.close();
  e2.close();
}
