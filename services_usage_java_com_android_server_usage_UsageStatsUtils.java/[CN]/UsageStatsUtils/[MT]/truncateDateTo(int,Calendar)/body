{
  cal.set(Calendar.HOUR_OF_DAY,0);
  cal.set(Calendar.MINUTE,0);
  cal.set(Calendar.SECOND,0);
  cal.set(Calendar.MILLISECOND,0);
switch (bucket) {
case UsageStatsManager.INTERVAL_YEARLY:
    cal.set(Calendar.DAY_OF_YEAR,0);
  break;
case UsageStatsManager.INTERVAL_MONTHLY:
cal.set(Calendar.DAY_OF_MONTH,0);
break;
case UsageStatsManager.INTERVAL_WEEKLY:
cal.set(Calendar.DAY_OF_WEEK,0);
break;
case UsageStatsManager.INTERVAL_DAILY:
break;
default :
throw new UnsupportedOperationException("Can't truncate date to bucket " + bucket);
}
}
