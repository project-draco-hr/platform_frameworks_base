{
  try {
    UiDevice device=UiDevice.getInstance(instrumentation);
switch (device.getDisplayRotation()) {
case UiAutomation.ROTATION_FREEZE_90:
      return ROTATION_MODE_LEFT;
case UiAutomation.ROTATION_FREEZE_270:
    return ROTATION_MODE_RIGHT;
case UiAutomation.ROTATION_FREEZE_0:
case UiAutomation.ROTATION_FREEZE_180:
  return ROTATION_MODE_NATURAL;
}
}
 catch (Exception e) {
throw new RuntimeException();
}
throw new RuntimeException("Unsupported device rotation.");
}
