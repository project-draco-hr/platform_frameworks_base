{
  if (mMobileSignalControllers.size() == 0) {
    mEmergencySource=EMERGENCY_NO_CONTROLLERS;
    return mLastServiceState != null && mLastServiceState.isEmergencyOnly();
  }
  int voiceSubId=mSubDefaults.getDefaultVoiceSubId();
  if (!SubscriptionManager.isValidSubscriptionId(voiceSubId)) {
    for (    MobileSignalController mobileSignalController : mMobileSignalControllers.values()) {
      if (!mobileSignalController.getState().isEmergency) {
        mEmergencySource=EMERGENCY_FIRST_CONTROLLER + mobileSignalController.mSubscriptionInfo.getSubscriptionId();
        if (DEBUG)         Log.d(TAG,"Found emergency " + mobileSignalController.mTag);
        return false;
      }
    }
  }
  if (mMobileSignalControllers.containsKey(voiceSubId)) {
    mEmergencySource=EMERGENCY_VOICE_CONTROLLER + voiceSubId;
    if (DEBUG)     Log.d(TAG,"Getting emergency from " + voiceSubId);
    return mMobileSignalControllers.get(voiceSubId).getState().isEmergency;
  }
  if (DEBUG)   Log.e(TAG,"Cannot find controller for voice sub: " + voiceSubId);
  mEmergencySource=EMERGENCY_NO_SUB + voiceSubId;
  return true;
}
