{
  boolean retVal;
  if (mServiceState != null) {
switch (mServiceState.getVoiceRegState()) {
case ServiceState.STATE_POWER_OFF:
      retVal=false;
    break;
case ServiceState.STATE_OUT_OF_SERVICE:
case ServiceState.STATE_EMERGENCY_ONLY:
  retVal=mServiceState.getDataRegState() == ServiceState.STATE_IN_SERVICE;
break;
default :
retVal=true;
}
}
 else {
retVal=false;
}
if (DEBUG) Log.d(TAG,"hasService: mServiceState=" + mServiceState + " retVal="+ retVal);
return retVal;
}
