{
  if (DEBUG) {
    Log.d(TAG,"updateTelephonySignalStrength: hasService=" + hasService() + " ss="+ mSignalStrength);
  }
  mCurrentState.connected=hasService() && mSignalStrength != null;
  if (mCurrentState.connected) {
    if (!mSignalStrength.isGsm() && mConfig.alwaysShowCdmaRssi) {
      mCurrentState.level=mSignalStrength.getCdmaLevel();
    }
 else {
      mCurrentState.level=mSignalStrength.getLevel();
    }
  }
  if (mNetworkToIconLookup.containsKey(mDataNetType)) {
    mCurrentState.iconGroup=mNetworkToIconLookup.get(mDataNetType);
  }
 else {
    mCurrentState.iconGroup=mDefaultIcons;
  }
  mCurrentState.dataConnected=mCurrentState.connected && mDataState == TelephonyManager.DATA_CONNECTED;
  if (!isCdma()) {
    if (mSimState == IccCardConstants.State.READY || mSimState == IccCardConstants.State.UNKNOWN) {
      mCurrentState.noSim=false;
    }
 else {
      mCurrentState.noSim=true;
      mCurrentState.dataConnected=false;
    }
  }
  if (isRoaming()) {
    mCurrentState.iconGroup=TelephonyIcons.ROAMING;
  }
  if (isEmergencyOnly() != mCurrentState.isEmergency) {
    mCurrentState.isEmergency=isEmergencyOnly();
    mNetworkController.recalculateEmergency();
  }
  notifyListenersIfNecessary();
}
