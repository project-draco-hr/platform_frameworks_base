{
  final int oldMode=mNavigationMode;
  if (mode != oldMode) {
switch (oldMode) {
case ActionBar.NAVIGATION_MODE_NORMAL:
      if (mTitleView != null) {
        removeView(mTitleView);
        mTitleView=null;
      }
    break;
case ActionBar.NAVIGATION_MODE_CUSTOM:
  if (mNavigationView != null) {
    removeView(mNavigationView);
    mNavigationView=null;
  }
}
switch (mode) {
case ActionBar.NAVIGATION_MODE_NORMAL:
initTitle();
break;
case ActionBar.NAVIGATION_MODE_CUSTOM:
addView(mNavigationView);
break;
}
mNavigationMode=mode;
requestLayout();
}
}
