{
  Callback callback=mCallback;
  if (callback == null) {
    throw new IllegalStateException("Attempted to set ActionBar context mode with no callback");
  }
  ActionMenu menu=mContextMenus.get(mode);
  if (menu == null) {
    menu=new ActionMenu(getContext());
    if (!callback.onCreateContextMode(mode,menu)) {
      throw new IllegalArgumentException("ActionBar callback does not know how to create context mode " + mode);
    }
    mContextMenus.put(mode,menu);
  }
  if (callback.onPrepareContextMode(mode,menu)) {
  }
}
