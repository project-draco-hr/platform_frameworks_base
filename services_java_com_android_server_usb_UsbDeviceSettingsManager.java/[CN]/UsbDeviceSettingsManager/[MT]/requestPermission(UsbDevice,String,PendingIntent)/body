{
  Intent intent=new Intent();
  if (hasPermission(device)) {
    intent.putExtra(UsbManager.EXTRA_DEVICE,device);
    intent.putExtra(UsbManager.EXTRA_PERMISSION_GRANTED,true);
    try {
      pi.send(mContext,0,intent);
    }
 catch (    PendingIntent.CanceledException e) {
      Log.w(TAG,"requestPermission PendingIntent was cancelled");
    }
    return;
  }
  intent.putExtra(UsbManager.EXTRA_DEVICE,device);
  requestPermissionDialog(intent,packageName,pi);
}
