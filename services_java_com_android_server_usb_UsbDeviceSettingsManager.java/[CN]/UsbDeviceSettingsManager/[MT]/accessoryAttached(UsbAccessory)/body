{
  Intent accessoryIntent=new Intent(UsbManager.ACTION_USB_ACCESSORY_ATTACHED);
  accessoryIntent.putExtra(UsbManager.EXTRA_ACCESSORY,accessory);
  accessoryIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
  ArrayList<ResolveInfo> matches;
  String defaultPackage;
synchronized (mLock) {
    matches=getAccessoryMatchesLocked(accessory,accessoryIntent);
    defaultPackage=mAccessoryPreferenceMap.get(new AccessoryFilter(accessory));
  }
  if (defaultPackage != null) {
    int count=matches.size();
    for (int i=0; i < count; i++) {
      ResolveInfo rInfo=matches.get(i);
      if (rInfo.activityInfo != null && defaultPackage.equals(rInfo.activityInfo.packageName)) {
        try {
          accessoryIntent.setComponent(new ComponentName(defaultPackage,rInfo.activityInfo.name));
          mContext.startActivity(accessoryIntent);
        }
 catch (        ActivityNotFoundException e) {
          Log.e(TAG,"startActivity failed",e);
        }
        return;
      }
    }
  }
  Intent intent=new Intent(mContext,UsbResolverActivity.class);
  intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
  intent.putExtra(Intent.EXTRA_INTENT,accessoryIntent);
  intent.putParcelableArrayListExtra(UsbResolverActivity.EXTRA_RESOLVE_INFOS,matches);
  try {
    mContext.startActivity(intent);
  }
 catch (  ActivityNotFoundException e) {
    Log.w(TAG,"unable to start UsbResolverActivity");
  }
}
