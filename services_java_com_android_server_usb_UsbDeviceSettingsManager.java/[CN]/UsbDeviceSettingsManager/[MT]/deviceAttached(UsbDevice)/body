{
  Intent deviceIntent=new Intent(UsbManager.ACTION_USB_DEVICE_ATTACHED);
  deviceIntent.putExtra(UsbManager.EXTRA_DEVICE,device);
  deviceIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
  ArrayList<ResolveInfo> matches=getDeviceMatches(device,deviceIntent);
  String defaultPackage=mDevicePreferenceMap.get(new DeviceFilter(device));
  if (defaultPackage != null) {
    int count=matches.size();
    for (int i=0; i < count; i++) {
      ResolveInfo rInfo=matches.get(i);
      if (rInfo.activityInfo != null && defaultPackage.equals(rInfo.activityInfo.packageName)) {
        try {
          deviceIntent.setComponent(new ComponentName(defaultPackage,rInfo.activityInfo.name));
          mContext.startActivity(deviceIntent);
        }
 catch (        ActivityNotFoundException e) {
          Log.e(TAG,"startActivity failed",e);
        }
        return;
      }
    }
  }
  Intent intent=new Intent(mContext,UsbResolverActivity.class);
  intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
  intent.putExtra(Intent.EXTRA_INTENT,deviceIntent);
  intent.putParcelableArrayListExtra(UsbResolverActivity.EXTRA_RESOLVE_INFOS,matches);
  try {
    mContext.startActivity(intent);
  }
 catch (  ActivityNotFoundException e) {
    Log.w(TAG,"unable to start UsbResolverActivity");
  }
}
