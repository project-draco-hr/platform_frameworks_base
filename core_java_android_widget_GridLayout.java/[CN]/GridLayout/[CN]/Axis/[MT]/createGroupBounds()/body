{
  int N=getChildCount();
  Group[] groups=new Group[N];
  Arrays.fill(groups,Group.GONE);
  Bounds[] bounds=new Bounds[N];
  Arrays.fill(bounds,Bounds.GONE);
  for (int i=0; i < N; i++) {
    View c=getChildAt(i);
    if (isGone(c))     continue;
    LayoutParams lp=getLayoutParams(c);
    Group group=horizontal ? lp.columnGroup : lp.rowGroup;
    groups[i]=group;
    bounds[i]=group.alignment.getBounds();
  }
  return new PackedMap<Group,Bounds>(groups,bounds);
}
