{
  if (mHorizontalAxis.maxIndex1() == UNDEFINED || mVerticalAxis.maxIndex1() == UNDEFINED) {
    boolean horizontal=mOrientation == HORIZONTAL;
    int count=horizontal ? mHorizontalAxis.count : mVerticalAxis.count;
    if (count == UNDEFINED) {
      count=Integer.MAX_VALUE;
    }
    int x=0;
    int y=0;
    int maxSize=0;
    for (int i=0, size=getChildCount(); i < size; i++) {
      LayoutParams lp=getLayoutParams1(getChildAt(i));
      Interval hSpan=lp.columnGroup.span;
      int cellWidth=hSpan.size();
      Interval vSpan=lp.rowGroup.span;
      int cellHeight=vSpan.size();
      if (horizontal) {
        if (x + cellWidth > count) {
          x=0;
          y+=maxSize;
          maxSize=0;
        }
      }
 else {
        if (y + cellHeight > count) {
          y=0;
          x+=maxSize;
          maxSize=0;
        }
      }
      lp.setHorizontalGroupSpan(new Interval(x,x + cellWidth));
      lp.setVerticalGroupSpan(new Interval(y,y + cellHeight));
      if (horizontal) {
        x=x + cellWidth;
      }
 else {
        y=y + cellHeight;
      }
      maxSize=max(maxSize,horizontal ? cellHeight : cellWidth);
    }
  }
 else {
    for (int i=0, size=getChildCount(); i < size; i++) {
      LayoutParams lp=getLayoutParams1(getChildAt(i));
      if (isUndefined(lp.columnGroup.span)) {
        lp.setHorizontalGroupSpan(LayoutParams.DEFAULT_SPAN);
      }
      if (isUndefined(lp.rowGroup.span)) {
        lp.setVerticalGroupSpan(LayoutParams.DEFAULT_SPAN);
      }
    }
  }
}
