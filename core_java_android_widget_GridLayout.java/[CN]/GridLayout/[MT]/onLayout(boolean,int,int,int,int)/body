{
  checkForLayoutParamsModification();
  int targetWidth=right - left;
  int targetHeight=bottom - top;
  int paddingLeft=getPaddingLeft();
  int paddingTop=getPaddingTop();
  int paddingRight=getPaddingRight();
  int paddingBottom=getPaddingBottom();
  horizontalAxis.layout(targetWidth - paddingLeft - paddingRight);
  verticalAxis.layout(targetHeight - paddingTop - paddingBottom);
  int[] hLocations=horizontalAxis.getLocations();
  int[] vLocations=verticalAxis.getLocations();
  for (int i=0, N=getChildCount(); i < N; i++) {
    View c=getChildAt(i);
    if (c.getVisibility() == View.GONE)     continue;
    LayoutParams lp=getLayoutParams(c);
    Spec columnSpec=lp.columnSpec;
    Spec rowSpec=lp.rowSpec;
    Interval colSpan=columnSpec.span;
    Interval rowSpan=rowSpec.span;
    int x1=hLocations[colSpan.min];
    int y1=vLocations[rowSpan.min];
    int x2=hLocations[colSpan.max];
    int y2=vLocations[rowSpan.max];
    int cellWidth=x2 - x1;
    int cellHeight=y2 - y1;
    int pWidth=getMeasurement(c,true);
    int pHeight=getMeasurement(c,false);
    Alignment hAlign=getAlignment(columnSpec.alignment,true);
    Alignment vAlign=getAlignment(rowSpec.alignment,false);
    Bounds colBounds=horizontalAxis.getGroupBounds().getValue(i);
    Bounds rowBounds=verticalAxis.getGroupBounds().getValue(i);
    int gravityOffsetX=protect(hAlign.getAlignmentValue(null,cellWidth - colBounds.size(true)));
    int gravityOffsetY=protect(vAlign.getAlignmentValue(null,cellHeight - rowBounds.size(true)));
    boolean rtl=isLayoutRtl();
    int startMargin=getMargin(c,true,!rtl);
    int topMargin=getMargin(c,false,true);
    int endMargin=getMargin(c,true,rtl);
    int bottomMargin=getMargin(c,false,false);
    int mWidth=startMargin + pWidth + endMargin;
    int mHeight=topMargin + pHeight + bottomMargin;
    int alignmentOffsetX=colBounds.getOffset(c,hAlign,mWidth);
    int alignmentOffsetY=rowBounds.getOffset(c,vAlign,mHeight);
    int dx=gravityOffsetX + alignmentOffsetX + startMargin;
    int dy=gravityOffsetY + alignmentOffsetY + topMargin;
    cellWidth-=startMargin + endMargin;
    cellHeight-=topMargin + bottomMargin;
    int width=hAlign.getSizeInCell(c,pWidth,cellWidth,PRF);
    int height=vAlign.getSizeInCell(c,pHeight,cellHeight,PRF);
    int cx=rtl ? targetWidth - paddingRight - x1- dx- width : paddingLeft + x1 + dx;
    int cy=paddingTop + y1 + dy;
    if (width != c.getMeasuredWidth() || height != c.getMeasuredHeight()) {
      c.measure(makeMeasureSpec(width,EXACTLY),makeMeasureSpec(height,EXACTLY));
    }
    c.layout(cx,cy,cx + width,cy + height);
  }
}
