{
  int result=horizontal ? c.getMeasuredWidth() : c.getMeasuredHeight();
  if (getLayoutMode() == OPTICAL_BOUNDS) {
    Insets insets=c.getOpticalInsets();
    return result - (horizontal ? insets.left + insets.right : insets.top + insets.bottom);
  }
  return result;
}
