{
  super.onCreate(icicle);
  requestWindowFeature(Window.FEATURE_NO_TITLE);
  mScreenHeight=getWindowManager().getDefaultDisplay().getHeight();
  final Params params=createParams();
  init(params);
  readAndValidateParams(params);
  mListView=createListView();
  mListView.setLayoutParams(new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT,ViewGroup.LayoutParams.FILL_PARENT));
  mListView.setDrawSelectorOnTop(false);
  for (int i=0; i < mHeaderViewCount; i++) {
    TextView header=mHeadersFocusable ? new EditText(this) : new TextView(this);
    header.setText("Header: " + i);
    mListView.addHeaderView(header);
  }
  for (int i=0; i < mFooterViewCount; i++) {
    TextView header=new TextView(this);
    header.setText("Footer: " + i);
    mListView.addFooterView(header);
  }
  if (params.mConnectAdapter) {
    setAdapter(mListView);
  }
  mListView.setItemsCanFocus(mItemsFocusable);
  if (mStartingSelectionPosition >= 0) {
    mListView.setSelection(mStartingSelectionPosition);
  }
  mListView.setPadding(0,0,0,0);
  mListView.setStackFromBottom(mStackFromBottom);
  mListView.setDivider(null);
  mListView.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener(){
    public void onItemSelected(    AdapterView parent,    View v,    int position,    long id){
      positionSelected(position);
    }
    public void onNothingSelected(    AdapterView parent){
      nothingSelected();
    }
  }
);
  mListView.setOnItemClickListener(new AdapterView.OnItemClickListener(){
    public void onItemClick(    AdapterView parent,    View v,    int position,    long id){
      positionClicked(position);
    }
  }
);
  if (params.mFadingEdgeScreenSizeFactor != null) {
    mListView.setFadingEdgeLength((int)(params.mFadingEdgeScreenSizeFactor * mScreenHeight));
  }
 else {
    mListView.setFadingEdgeLength((int)((64.0 / 480) * mScreenHeight));
  }
  if (mIncludeHeader) {
    mLinearLayout=new LinearLayout(this);
    mHeaderTextView=new TextView(this);
    mHeaderTextView.setText("hi");
    mHeaderTextView.setLayoutParams(new LinearLayout.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT,ViewGroup.LayoutParams.WRAP_CONTENT));
    mLinearLayout.addView(mHeaderTextView);
    mLinearLayout.setOrientation(LinearLayout.VERTICAL);
    mLinearLayout.setLayoutParams(new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT,ViewGroup.LayoutParams.FILL_PARENT));
    mListView.setLayoutParams((new LinearLayout.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT,0,1f)));
    mLinearLayout.addView(mListView);
    setContentView(mLinearLayout);
  }
 else {
    mLinearLayout=new LinearLayout(this);
    mLinearLayout.setOrientation(LinearLayout.VERTICAL);
    mLinearLayout.setLayoutParams(new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT,ViewGroup.LayoutParams.FILL_PARENT));
    mListView.setLayoutParams((new LinearLayout.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT,0,1f)));
    mLinearLayout.addView(mListView);
    setContentView(mLinearLayout);
  }
}
