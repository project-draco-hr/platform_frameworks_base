{
  int rssiIconLevel=SIGNAL_STRENGTH_NONE_OR_UNKNOWN, rsrpIconLevel=-1, snrIconLevel=-1;
  int rsrpThreshType=Resources.getSystem().getInteger(com.android.internal.R.integer.config_LTE_RSRP_threshold_type);
  int[] threshRsrp;
  if (rsrpThreshType == RSRP_THRESH_TYPE_STRICT) {
    threshRsrp=RSRP_THRESH_STRICT;
  }
 else {
    threshRsrp=RSRP_THRESH_LENIENT;
  }
  if (mLteRsrp > threshRsrp[5])   rsrpIconLevel=-1;
 else   if (mLteRsrp >= threshRsrp[4])   rsrpIconLevel=SIGNAL_STRENGTH_GREAT;
 else   if (mLteRsrp >= threshRsrp[3])   rsrpIconLevel=SIGNAL_STRENGTH_GOOD;
 else   if (mLteRsrp >= threshRsrp[2])   rsrpIconLevel=SIGNAL_STRENGTH_MODERATE;
 else   if (mLteRsrp >= threshRsrp[1])   rsrpIconLevel=SIGNAL_STRENGTH_POOR;
 else   if (mLteRsrp >= threshRsrp[0])   rsrpIconLevel=SIGNAL_STRENGTH_NONE_OR_UNKNOWN;
  if (mLteRssnr > 300)   snrIconLevel=-1;
 else   if (mLteRssnr >= 130)   snrIconLevel=SIGNAL_STRENGTH_GREAT;
 else   if (mLteRssnr >= 45)   snrIconLevel=SIGNAL_STRENGTH_GOOD;
 else   if (mLteRssnr >= 10)   snrIconLevel=SIGNAL_STRENGTH_MODERATE;
 else   if (mLteRssnr >= -30)   snrIconLevel=SIGNAL_STRENGTH_POOR;
 else   if (mLteRssnr >= -200)   snrIconLevel=SIGNAL_STRENGTH_NONE_OR_UNKNOWN;
  if (DBG)   log("getLTELevel - rsrp:" + mLteRsrp + " snr:"+ mLteRssnr+ " rsrpIconLevel:"+ rsrpIconLevel+ " snrIconLevel:"+ snrIconLevel);
  if (snrIconLevel != -1 && rsrpIconLevel != -1) {
    return (rsrpIconLevel < snrIconLevel ? rsrpIconLevel : snrIconLevel);
  }
  if (snrIconLevel != -1)   return snrIconLevel;
  if (rsrpIconLevel != -1)   return rsrpIconLevel;
  if (mLteSignalStrength > 63)   rssiIconLevel=SIGNAL_STRENGTH_NONE_OR_UNKNOWN;
 else   if (mLteSignalStrength >= 12)   rssiIconLevel=SIGNAL_STRENGTH_GREAT;
 else   if (mLteSignalStrength >= 8)   rssiIconLevel=SIGNAL_STRENGTH_GOOD;
 else   if (mLteSignalStrength >= 5)   rssiIconLevel=SIGNAL_STRENGTH_MODERATE;
 else   if (mLteSignalStrength >= 0)   rssiIconLevel=SIGNAL_STRENGTH_POOR;
  if (DBG)   log("getLTELevel - rssi:" + mLteSignalStrength + " rssiIconLevel:"+ rssiIconLevel);
  return rssiIconLevel;
}
