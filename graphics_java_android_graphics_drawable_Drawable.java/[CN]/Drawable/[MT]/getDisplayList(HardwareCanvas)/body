{
  DisplayList displayList=mDisplayList;
  if (displayList != null && displayList.isValid()) {
    return displayList;
  }
  displayList=DisplayList.create(getClass().getName());
  mDisplayList=displayList;
  final Rect bounds=mBounds;
  final int width=bounds.width();
  final int height=bounds.height();
  final HardwareCanvas canvas=displayList.start(width,height);
  canvas.onPreDraw(null);
  final int restoreCount=canvas.save();
  try {
    canvas.translate(-bounds.left,-bounds.top);
    onDraw(canvas);
  }
  finally {
    canvas.restoreToCount(restoreCount);
    canvas.onPostDraw();
    displayList.end();
  }
  displayList.setLeftTopRightBottom(0,0,width,height);
  displayList.setClipToBounds(false);
  return displayList;
}
