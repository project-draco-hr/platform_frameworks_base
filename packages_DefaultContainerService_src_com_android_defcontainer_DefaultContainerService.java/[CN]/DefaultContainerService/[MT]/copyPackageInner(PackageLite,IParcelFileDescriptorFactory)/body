{
  if (!ArrayUtils.isEmpty(pkg.splitNames)) {
    throw new UnsupportedOperationException("Copying split APKs not yet supported");
  }
  InputStream in=null;
  OutputStream out=null;
  try {
    in=new FileInputStream(pkg.baseCodePath);
    out=new ParcelFileDescriptor.AutoCloseOutputStream(target.open(null,ParcelFileDescriptor.MODE_READ_WRITE));
    Streams.copy(in,out);
    return PackageManager.INSTALL_SUCCEEDED;
  }
  finally {
    IoUtils.closeQuietly(out);
    IoUtils.closeQuietly(in);
  }
}
