{
  if (Environment.isExternalStorageEmulated()) {
    return false;
  }
  final int sizeMb=calculateContainerSize(apkFile,null);
  final int availSdMb;
  if (Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())) {
    StatFs sdStats=new StatFs(Environment.getExternalStorageDirectory().getPath());
    long availSdSize=(long)(sdStats.getAvailableBlocks() * sdStats.getBlockSize());
    availSdMb=(int)(availSdSize >> 20);
  }
 else {
    availSdMb=-1;
  }
  return availSdMb > sizeMb;
}
