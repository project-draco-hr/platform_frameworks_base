{
  long size=apkFile.length();
  if (size == 0 && !apkFile.exists()) {
    throw new FileNotFoundException();
  }
  if (isForwardLocked) {
    size+=PackageHelper.extractPublicFiles(apkFile.getAbsolutePath(),null);
  }
  final StatFs internalStats=new StatFs(Environment.getDataDirectory().getPath());
  final long availInternalSize=(long)internalStats.getAvailableBlocks() * (long)internalStats.getBlockSize();
  return (availInternalSize - size) > threshold;
}
