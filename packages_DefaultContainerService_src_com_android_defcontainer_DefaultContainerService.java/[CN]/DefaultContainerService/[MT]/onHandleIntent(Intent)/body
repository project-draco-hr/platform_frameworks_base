{
  if (PackageManager.ACTION_CLEAN_EXTERNAL_STORAGE.equals(intent.getAction())) {
    final IPackageManager pm=IPackageManager.Stub.asInterface(ServiceManager.getService("package"));
    PackageCleanItem item=null;
    try {
      while ((item=pm.nextPackageToClean(item)) != null) {
        final UserEnvironment userEnv=new UserEnvironment(item.userId);
        eraseFiles(userEnv.getExternalStorageAppDataDirectory(item.packageName));
        eraseFiles(userEnv.getExternalStorageAppMediaDirectory(item.packageName));
        if (item.andCode) {
          eraseFiles(userEnv.getExternalStorageAppObbDirectory(item.packageName));
        }
      }
    }
 catch (    RemoteException e) {
    }
  }
}
