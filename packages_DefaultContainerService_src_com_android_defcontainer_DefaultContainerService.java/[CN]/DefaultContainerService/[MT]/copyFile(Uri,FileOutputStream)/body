{
  String scheme=pPackageURI.getScheme();
  if (scheme == null || scheme.equals("file")) {
    final File srcPackageFile=new File(pPackageURI.getPath());
    if (!copyToFile(srcPackageFile,outStream)) {
      Slog.e(TAG,"Couldn't copy file: " + srcPackageFile);
      return false;
    }
  }
 else   if (scheme.equals("content")) {
    ParcelFileDescriptor fd=null;
    try {
      fd=getContentResolver().openFileDescriptor(pPackageURI,"r");
    }
 catch (    FileNotFoundException e) {
      Slog.e(TAG,"Couldn't open file descriptor from download service. Failed with exception " + e);
      return false;
    }
    if (fd == null) {
      Slog.e(TAG,"Couldn't open file descriptor from download service (null).");
      return false;
    }
 else {
      if (localLOGV) {
        Slog.i(TAG,"Opened file descriptor from download service.");
      }
      ParcelFileDescriptor.AutoCloseInputStream dlStream=new ParcelFileDescriptor.AutoCloseInputStream(fd);
      if (!copyToFile(dlStream,outStream)) {
        Slog.e(TAG,"Couldn't copy " + pPackageURI + " to temp file.");
        return false;
      }
    }
  }
 else {
    Slog.e(TAG,"Package URI is not 'file:' or 'content:' - " + pPackageURI);
    return false;
  }
  return true;
}
