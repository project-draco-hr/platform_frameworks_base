{
  if (DEBUG)   Log.v(TAG,"reportStatus status: " + status);
synchronized (mListeners) {
    boolean wasNavigating=mNavigating;
switch (status) {
case GPS_STATUS_SESSION_BEGIN:
      mNavigating=true;
    mEngineOn=true;
  break;
case GPS_STATUS_SESSION_END:
mNavigating=false;
break;
case GPS_STATUS_ENGINE_ON:
mEngineOn=true;
break;
case GPS_STATUS_ENGINE_OFF:
mEngineOn=false;
mNavigating=false;
break;
}
if (wasNavigating != mNavigating) {
int size=mListeners.size();
for (int i=0; i < size; i++) {
Listener listener=mListeners.get(i);
try {
if (mNavigating) {
listener.mListener.onGpsStarted();
}
 else {
listener.mListener.onGpsStopped();
}
}
 catch (RemoteException e) {
Log.w(TAG,"RemoteException in reportStatus");
mListeners.remove(listener);
size--;
}
}
try {
for (int i=mClientUids.size() - 1; i >= 0; i--) {
int uid=mClientUids.keyAt(i);
if (mNavigating) {
mBatteryStats.noteStartGps(uid);
}
 else {
mBatteryStats.noteStopGps(uid);
}
}
}
 catch (RemoteException e) {
Log.w(TAG,"RemoteException in reportStatus");
}
Intent intent=new Intent(LocationManager.GPS_ENABLED_CHANGE_ACTION);
intent.putExtra(LocationManager.EXTRA_GPS_ENABLED,mNavigating);
mContext.sendBroadcast(intent);
}
}
}
