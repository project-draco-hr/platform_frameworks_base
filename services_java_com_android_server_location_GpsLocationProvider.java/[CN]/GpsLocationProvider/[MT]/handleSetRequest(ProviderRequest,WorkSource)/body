{
  boolean singleShot=false;
  if (request.locationRequests != null && request.locationRequests.size() > 0) {
    singleShot=true;
    for (    LocationRequest lr : request.locationRequests) {
      if (lr.getNumUpdates() != 1) {
        singleShot=false;
      }
    }
  }
  if (DEBUG)   Log.d(TAG,"setRequest " + request);
  if (request.reportLocation) {
    updateClientUids(source);
    mFixInterval=(int)request.interval;
    if (mFixInterval != request.interval) {
      Log.w(TAG,"interval overflow: " + request.interval);
      mFixInterval=Integer.MAX_VALUE;
    }
    if (mStarted && hasCapability(GPS_CAPABILITY_SCHEDULING)) {
      if (!native_set_position_mode(mPositionMode,GPS_POSITION_RECURRENCE_PERIODIC,mFixInterval,0,0)) {
        Log.e(TAG,"set_position_mode failed in setMinTime()");
      }
    }
 else     if (!mStarted) {
      startNavigating(singleShot);
    }
  }
 else {
    updateClientUids(new WorkSource());
    stopNavigating();
    mAlarmManager.cancel(mWakeupIntent);
    mAlarmManager.cancel(mTimeoutIntent);
  }
}
