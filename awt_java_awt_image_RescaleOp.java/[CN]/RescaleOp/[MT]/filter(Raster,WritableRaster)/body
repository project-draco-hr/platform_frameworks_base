{
  if (dst == null) {
    dst=createCompatibleDestRaster(src);
  }
 else {
    if (src.getNumBands() != dst.getNumBands()) {
      throw new IllegalArgumentException(Messages.getString("awt.21D",src.getNumBands(),dst.getNumBands()));
    }
  }
  if (this.scaleFactors.length != 1 && this.scaleFactors.length != src.getNumBands()) {
    throw new IllegalArgumentException(Messages.getString("awt.21E"));
  }
  if (slowFilter(src,dst,false) != 0) {
    throw new ImagingOpException(Messages.getString("awt.21F"));
  }
  return dst;
}
