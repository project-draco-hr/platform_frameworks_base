{
  if (info.getFormat() == MtpConstants.FORMAT_ASSOCIATION) {
    return DocumentsContract.Document.MIME_TYPE_DIR;
  }
  final String formatCodeMimeType=MediaFile.getMimeTypeForFormatCode(info.getFormat());
  final String mediaFileMimeType=MediaFile.getMimeTypeForFile(info.getName());
  if (mediaFileMimeType != null && MediaFile.getFormatCode("",mediaFileMimeType) == info.getFormat()) {
    return mediaFileMimeType;
  }
  if (formatCodeMimeType != null) {
    return formatCodeMimeType;
  }
  if (mediaFileMimeType != null) {
    return mediaFileMimeType;
  }
  return "application/octet-stream";
}
