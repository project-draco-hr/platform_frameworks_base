{
  database.beginTransaction();
  try {
    final ContentValues values=new ContentValues();
    values.put(COLUMN_DEVICE_ID,root.mDeviceId);
    values.put(COLUMN_STORAGE_ID,root.mStorageId);
    values.putNull(COLUMN_OBJECT_HANDLE);
    values.put(COLUMN_FULL_PATH,"/" + root.mDeviceId + "/"+ escape(root.mDescription));
    values.put(Document.COLUMN_MIME_TYPE,DocumentsContract.Document.MIME_TYPE_DIR);
    values.put(Document.COLUMN_DISPLAY_NAME,root.mDescription);
    values.putNull(Document.COLUMN_SUMMARY);
    values.putNull(Document.COLUMN_LAST_MODIFIED);
    values.putNull(Document.COLUMN_ICON);
    values.put(Document.COLUMN_FLAGS,0);
    values.put(Document.COLUMN_SIZE,(int)Math.min(root.mMaxCapacity - root.mFreeSpace,Integer.MAX_VALUE));
    if (database.insert(TABLE_MTP_DOCUMENTS,null,values) == -1) {
      throw new Exception("Failed to add root document.");
    }
    database.setTransactionSuccessful();
  }
  finally {
    database.endTransaction();
  }
}
