{
  final long BUCKET_SIZE=15 * MINUTE_IN_MILLIS;
  stats=new NetworkStatsHistory(BUCKET_SIZE);
  final long recordStart=(TEST_START + BUCKET_SIZE) - MINUTE_IN_MILLIS;
  final long recordEnd=(TEST_START + (BUCKET_SIZE * 2)) + (MINUTE_IN_MILLIS * 4);
  stats.recordData(recordStart,recordEnd,new NetworkStats.Entry(1000L,2000L,5000L,10000L,100L));
  assertEquals(3,stats.size());
  assertValues(stats,0,MINUTE_IN_MILLIS,50L,100L,250L,500L,5L);
  assertValues(stats,1,15 * MINUTE_IN_MILLIS,750L,1500L,3750L,7500L,75L);
  assertValues(stats,2,4 * MINUTE_IN_MILLIS,200L,400L,1000L,2000L,20L);
}
