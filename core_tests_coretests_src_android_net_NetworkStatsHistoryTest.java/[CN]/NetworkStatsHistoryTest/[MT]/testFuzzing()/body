{
  try {
    final NetworkStats.Entry entry=new NetworkStats.Entry();
    final Random r=new Random();
    for (int i=0; i < 500; i++) {
      stats=new NetworkStatsHistory(r.nextLong());
      for (int j=0; j < 10000; j++) {
        if (r.nextBoolean()) {
          final long start=r.nextLong();
          final long end=start + r.nextInt();
          entry.rxBytes=nextPositiveLong(r);
          entry.rxPackets=nextPositiveLong(r);
          entry.txBytes=nextPositiveLong(r);
          entry.txPackets=nextPositiveLong(r);
          entry.operations=nextPositiveLong(r);
          stats.recordData(start,end,entry);
        }
 else {
          stats.removeBucketsBefore(r.nextLong());
        }
      }
      assertConsistent(stats);
    }
  }
 catch (  Throwable e) {
    Log.e(TAG,String.valueOf(stats));
    throw new RuntimeException(e);
  }
}
