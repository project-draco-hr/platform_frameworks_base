{
  final long[] total=new long[2];
  final NetworkStatsHistory stats1=new NetworkStatsHistory(HOUR_IN_MILLIS);
  stats1.recordData(TEST_START,TEST_START + 2 * HOUR_IN_MILLIS,2000L,1000L);
  final long TEST_START_2=TEST_START + DAY_IN_MILLIS;
  final NetworkStatsHistory stats2=new NetworkStatsHistory(HOUR_IN_MILLIS);
  stats2.recordData(TEST_START_2,TEST_START_2 + 2 * HOUR_IN_MILLIS,1000L,500L);
  stats=new NetworkStatsHistory(HOUR_IN_MILLIS);
  stats.recordEntireHistory(stats1);
  stats.recordEntireHistory(stats2);
  stats.getTotalData(TEST_START - WEEK_IN_MILLIS,TEST_START + WEEK_IN_MILLIS,total);
  assertTotalEquals(total,3000L,1500L);
  assertBucket(stats,0,1000L,500L);
  assertBucket(stats,1,1000L,500L);
  assertBucket(stats,2,500L,250L);
  assertBucket(stats,3,500L,250L);
}
