{
  if (w <= 0 || h <= 0) {
    throw new RasterFormatException(Messages.getString("awt.244"));
  }
  if (parentX < this.minX || parentX + w > this.minX + this.width) {
    throw new RasterFormatException(Messages.getString("awt.245"));
  }
  if (parentY < this.minY || parentY + h > this.minY + this.height) {
    throw new RasterFormatException(Messages.getString("awt.246"));
  }
  if ((long)parentX + w > Integer.MAX_VALUE) {
    throw new RasterFormatException(Messages.getString("awt.247"));
  }
  if ((long)parentY + h > Integer.MAX_VALUE) {
    throw new RasterFormatException(Messages.getString("awt.248"));
  }
  if ((long)childMinX + w > Integer.MAX_VALUE) {
    throw new RasterFormatException(Messages.getString("awt.249"));
  }
  if ((long)childMinY + h > Integer.MAX_VALUE) {
    throw new RasterFormatException(Messages.getString("awt.24A"));
  }
  SampleModel childModel;
  if (bandList == null) {
    childModel=sampleModel;
  }
 else {
    childModel=sampleModel.createSubsetSampleModel(bandList);
  }
  int childTranslateX=childMinX - parentX;
  int childTranslateY=childMinY - parentY;
  return new WritableRaster(childModel,dataBuffer,new Rectangle(childMinX,childMinY,w,h),new Point(childTranslateX + sampleModelTranslateX,childTranslateY + sampleModelTranslateY),this);
}
