{
  mLockPatternView.disableInput();
  if (mPendingLockCheck != null) {
    mPendingLockCheck.cancel(false);
  }
  final int userId=KeyguardUpdateMonitor.getCurrentUser();
  if (pattern.size() < LockPatternUtils.MIN_PATTERN_REGISTER_FAIL) {
    mLockPatternView.enableInput();
    onPatternChecked(userId,false,0,false);
    return;
  }
  mPendingLockCheck=LockPatternChecker.checkPattern(mLockPatternUtils,pattern,userId,new LockPatternChecker.OnCheckCallback(){
    @Override public void onChecked(    boolean matched,    int timeoutMs){
      mLockPatternView.enableInput();
      mPendingLockCheck=null;
      onPatternChecked(userId,matched,timeoutMs,true);
    }
  }
);
  if (pattern.size() > MIN_PATTERN_BEFORE_POKE_WAKELOCK) {
    mCallback.userActivity();
  }
}
