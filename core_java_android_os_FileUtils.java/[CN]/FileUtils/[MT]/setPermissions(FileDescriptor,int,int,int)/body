{
  try {
    Libcore.os.fchmod(fd,mode);
  }
 catch (  ErrnoException e) {
    Slog.w(TAG,"Failed to fchmod(): " + e);
    return e.errno;
  }
  if (uid >= 0 || gid >= 0) {
    try {
      Libcore.os.fchown(fd,uid,gid);
    }
 catch (    ErrnoException e) {
      Slog.w(TAG,"Failed to fchown(): " + e);
      return e.errno;
    }
  }
  return 0;
}
