{
  if (!mTask.canLockToTask)   return;
  if (mMaxFooterHeight <= 0)   return;
  if (mFooterAnimator != null) {
    mFooterAnimator.removeAllListeners();
    mFooterAnimator.cancel();
  }
  int height=visible ? mMaxFooterHeight : 0;
  if (visible && mLockToAppButtonView.getVisibility() != View.VISIBLE) {
    if (duration > 0) {
      setFooterHeight(0);
    }
 else {
      setFooterHeight(mMaxFooterHeight);
    }
    mLockToAppButtonView.setVisibility(View.VISIBLE);
  }
  if (duration > 0) {
    mFooterAnimator=ObjectAnimator.ofInt(this,"footerHeight",height);
    mFooterAnimator.setDuration(duration);
    mFooterAnimator.setInterpolator(mConfig.fastOutSlowInInterpolator);
    if (!visible) {
      mFooterAnimator.addListener(new AnimatorListenerAdapter(){
        @Override public void onAnimationEnd(        Animator animation){
          mLockToAppButtonView.setVisibility(View.INVISIBLE);
        }
      }
);
    }
    mFooterAnimator.start();
  }
 else {
    if (!visible) {
      mLockToAppButtonView.setVisibility(View.INVISIBLE);
    }
  }
}
