{
  final TaskViewTransform transform=ctx.currentTaskTransform;
  int startDelay=0;
  if (mConfig.launchedFromAppWithScreenshot) {
    if (mTask.isLaunchTarget) {
      Rect taskRect=ctx.currentTaskRect;
      int duration=mConfig.taskViewEnterFromHomeDuration * 10;
      int windowInsetTop=mConfig.systemInsets.top;
      float taskScale=((float)taskRect.width() / getMeasuredWidth()) * transform.scale;
      float scaledYOffset=((1f - taskScale) * getMeasuredHeight()) / 2;
      float scaledWindowInsetTop=(int)(taskScale * windowInsetTop);
      float scaledTranslationY=taskRect.top + transform.translationY - (scaledWindowInsetTop + scaledYOffset);
      startDelay=mConfig.taskViewEnterFromHomeStaggerDelay;
      mViewBounds.animateClipTop(windowInsetTop,duration,new ValueAnimator.AnimatorUpdateListener(){
        @Override public void onAnimationUpdate(        ValueAnimator animation){
          int y=(Integer)animation.getAnimatedValue();
          mHeaderView.setTranslationY(y);
        }
      }
);
      int size=Math.round((taskRect.width() / taskScale));
      if (mConfig.hasHorizontalLayout()) {
        mViewBounds.animateClipRight(getMeasuredWidth() - size,duration);
      }
 else {
        mViewBounds.animateClipBottom(getMeasuredHeight() - (windowInsetTop + size),duration);
      }
      animate().scaleX(taskScale).scaleY(taskScale).translationY(scaledTranslationY).setDuration(duration).withEndAction(new Runnable(){
        @Override public void run(){
          setIsFullScreen(false);
          requestLayout();
          mViewBounds.setClipTop(0);
          mViewBounds.setClipBottom(0);
          mViewBounds.setClipRight(0);
          mHeaderView.setTranslationY(0);
          animateFooterVisibility(true,mConfig.taskBarEnterAnimDuration);
          RecentsTaskLoader.getInstance().loadTaskData(mTask);
          AlternateRecentsComponent.consumeLastScreenshot();
          mCb.onTaskViewFullScreenTransitionCompleted();
          ctx.postAnimationTrigger.decrement();
        }
      }
).start();
    }
 else {
      animateFooterVisibility(true,0);
    }
    ctx.postAnimationTrigger.increment();
  }
 else   if (mConfig.launchedFromAppWithThumbnail) {
    if (mTask.isLaunchTarget) {
      if (Constants.DebugFlags.App.EnableThumbnailAlphaOnFrontmost) {
        mThumbnailView.startEnterRecentsAnimation(mConfig.taskBarEnterAnimDelay,new Runnable(){
          @Override public void run(){
            animateDimToProgress(0,mConfig.taskBarEnterAnimDuration,ctx.postAnimationTrigger.decrementOnAnimationEnd());
          }
        }
);
      }
 else {
        animateDimToProgress(mConfig.taskBarEnterAnimDelay,mConfig.taskBarEnterAnimDuration,ctx.postAnimationTrigger.decrementOnAnimationEnd());
      }
      ctx.postAnimationTrigger.increment();
      animateFooterVisibility(true,mConfig.taskBarEnterAnimDuration);
      mActionButtonView.animate().alpha(1f).setStartDelay(mConfig.taskBarEnterAnimDelay).setDuration(mConfig.taskBarEnterAnimDuration).setInterpolator(mConfig.fastOutLinearInInterpolator).withLayer().start();
    }
 else {
      if (ctx.currentTaskOccludesLaunchTarget) {
        setTranslationY(transform.translationY + mConfig.taskViewAffiliateGroupEnterOffsetPx);
        setAlpha(0f);
        animate().alpha(1f).translationY(transform.translationY).setStartDelay(mConfig.taskBarEnterAnimDelay).setUpdateListener(null).setInterpolator(mConfig.fastOutSlowInInterpolator).setDuration(mConfig.taskViewEnterFromHomeDuration).withEndAction(new Runnable(){
          @Override public void run(){
            ctx.postAnimationTrigger.decrement();
          }
        }
).start();
        ctx.postAnimationTrigger.increment();
      }
    }
    startDelay=mConfig.taskBarEnterAnimDelay;
  }
 else   if (mConfig.launchedFromHome) {
    int frontIndex=(ctx.currentStackViewCount - ctx.currentStackViewIndex - 1);
    int delay=mConfig.taskViewEnterFromHomeDelay + frontIndex * mConfig.taskViewEnterFromHomeStaggerDelay;
    setScaleX(transform.scale);
    setScaleY(transform.scale);
    if (!mConfig.fakeShadows) {
      animate().translationZ(transform.translationZ);
    }
    animate().translationY(transform.translationY).setStartDelay(delay).setUpdateListener(ctx.updateListener).setInterpolator(mConfig.quintOutInterpolator).setDuration(mConfig.taskViewEnterFromHomeDuration + frontIndex * mConfig.taskViewEnterFromHomeStaggerDelay).withEndAction(new Runnable(){
      @Override public void run(){
        ctx.postAnimationTrigger.decrement();
      }
    }
).start();
    ctx.postAnimationTrigger.increment();
    animateFooterVisibility(true,mConfig.taskViewEnterFromHomeDuration);
    startDelay=delay;
  }
 else {
    animateFooterVisibility(true,0);
  }
  postDelayed(new Runnable(){
    @Override public void run(){
      enableFocusAnimations();
    }
  }
,(startDelay / 2));
}
