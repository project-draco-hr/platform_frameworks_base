{
  TaskViewTransform transform=ctx.currentTaskTransform;
  Rect taskRect=ctx.currentTaskRect;
  if (mConfig.launchedFromAppWithScreenshot) {
    if (mTask.isLaunchTarget) {
      int duration=mConfig.taskViewEnterFromHomeDuration * 5;
      int windowInsetTop=mConfig.systemInsets.top;
      float taskScale=((float)taskRect.width() / getMeasuredWidth()) * transform.scale;
      float taskTranslationY=taskRect.top + transform.translationY - windowInsetTop;
      mViewBounds.animateClipTop(windowInsetTop,duration,new ValueAnimator.AnimatorUpdateListener(){
        @Override public void onAnimationUpdate(        ValueAnimator animation){
          int y=(Integer)animation.getAnimatedValue();
          mBarView.setTranslationY(y);
        }
      }
);
      int size=Math.round((taskRect.width() / taskScale));
      if (mConfig.hasHorizontalLayout()) {
        mViewBounds.animateClipRight(getMeasuredWidth() - size,duration);
      }
 else {
        mViewBounds.animateClipBottom(getMeasuredHeight() - (windowInsetTop + size),duration);
      }
      animate().scaleX(taskScale).scaleY(taskScale).translationY(taskTranslationY).setDuration(duration).withEndAction(new Runnable(){
        @Override public void run(){
          mBarView.startEnterRecentsAnimation(0,mThumbnailView.enableTaskBarClipAsRunnable(mBarView));
          animateFooterVisibility(true,mConfig.taskBarEnterAnimDuration);
          ctx.postAnimationTrigger.decrement();
          setIsFullScreen(false);
          mThumbnailView.unbindFromScreenshot();
          AlternateRecentsComponent.consumeLastScreenshot();
        }
      }
).start();
    }
 else {
      mThumbnailView.enableTaskBarClip(mBarView);
      animateFooterVisibility(true,0);
    }
    ctx.postAnimationTrigger.increment();
  }
 else   if (mConfig.launchedFromAppWithThumbnail) {
    if (mTask.isLaunchTarget) {
      mBarView.startEnterRecentsAnimation(mConfig.taskBarEnterAnimDelay,mThumbnailView.enableTaskBarClipAsRunnable(mBarView));
      ObjectAnimator anim=ObjectAnimator.ofInt(this,"dim",getDimOverlayFromScale());
      anim.setStartDelay(mConfig.taskBarEnterAnimDelay);
      anim.setDuration(mConfig.taskBarEnterAnimDuration);
      anim.setInterpolator(mConfig.fastOutLinearInInterpolator);
      anim.addListener(new AnimatorListenerAdapter(){
        @Override public void onAnimationEnd(        Animator animation){
          ctx.postAnimationTrigger.decrement();
        }
      }
);
      anim.start();
      ctx.postAnimationTrigger.increment();
      animateFooterVisibility(true,mConfig.taskBarEnterAnimDuration);
    }
 else {
      mThumbnailView.enableTaskBarClip(mBarView);
    }
  }
 else   if (mConfig.launchedFromHome) {
    int frontIndex=(ctx.currentStackViewCount - ctx.currentStackViewIndex - 1);
    int delay=mConfig.taskBarEnterAnimDelay + frontIndex * mConfig.taskViewEnterFromHomeDelay;
    if (Constants.DebugFlags.App.EnableShadows) {
      animate().translationZ(transform.translationZ);
    }
    animate().scaleX(transform.scale).scaleY(transform.scale).translationY(transform.translationY).setStartDelay(delay).setUpdateListener(null).setInterpolator(mConfig.quintOutInterpolator).setDuration(mConfig.taskViewEnterFromHomeDuration).withEndAction(new Runnable(){
      @Override public void run(){
        mThumbnailView.enableTaskBarClip(mBarView);
        ctx.postAnimationTrigger.decrement();
      }
    }
).start();
    ctx.postAnimationTrigger.increment();
    animateFooterVisibility(true,mConfig.taskViewEnterFromHomeDuration);
  }
 else {
    mThumbnailView.enableTaskBarClip(mBarView);
    animateFooterVisibility(true,0);
  }
}
