{
  TaskViewTransform transform=ctx.currentTaskTransform;
  Rect taskRect=ctx.currentTaskRect;
  if (mConfig.launchedFromAppWithScreenshot) {
    if (mTask.isLaunchTarget) {
      mViewBounds.animateClipTop(taskRect.top,mConfig.taskViewEnterFromHomeDuration * 5);
      mViewBounds.animateClipBottom(getMeasuredHeight() - taskRect.bottom,mConfig.taskViewEnterFromHomeDuration * 5);
      animate().scaleX(((float)taskRect.width() / getMeasuredWidth()) * transform.scale).scaleY(((float)taskRect.width() / getMeasuredWidth()) * transform.scale).translationY(taskRect.top + transform.translationY).setDuration(mConfig.taskViewEnterFromHomeDuration * 5).withEndAction(new Runnable(){
        @Override public void run(){
          mBarView.startEnterRecentsAnimation(0,mThumbnailView.enableTaskBarClipAsRunnable(mBarView));
          animateFooterVisibility(true,mConfig.taskBarEnterAnimDuration);
          ctx.postAnimationTrigger.decrement();
          setIsFullScreen(false);
          mThumbnailView.unbindFromScreenshot();
          AlternateRecentsComponent.consumeLastScreenshot();
        }
      }
).withLayer().start();
    }
 else {
      mThumbnailView.enableTaskBarClip(mBarView);
      animateFooterVisibility(true,0);
    }
    ctx.postAnimationTrigger.increment();
  }
 else   if (mConfig.launchedFromAppWithThumbnail) {
    if (mTask.isLaunchTarget) {
      mBarView.startEnterRecentsAnimation(mConfig.taskBarEnterAnimDelay,mThumbnailView.enableTaskBarClipAsRunnable(mBarView));
      ObjectAnimator anim=ObjectAnimator.ofInt(this,"dim",getDimOverlayFromScale());
      anim.setStartDelay(mConfig.taskBarEnterAnimDelay);
      anim.setDuration(mConfig.taskBarEnterAnimDuration);
      anim.setInterpolator(mConfig.fastOutLinearInInterpolator);
      anim.addListener(new AnimatorListenerAdapter(){
        @Override public void onAnimationEnd(        Animator animation){
          ctx.postAnimationTrigger.decrement();
        }
      }
);
      anim.start();
      ctx.postAnimationTrigger.increment();
      animateFooterVisibility(true,mConfig.taskBarEnterAnimDuration);
    }
 else {
      mThumbnailView.enableTaskBarClip(mBarView);
    }
  }
 else   if (mConfig.launchedFromHome) {
    int frontIndex=(ctx.currentStackViewCount - ctx.currentStackViewIndex - 1);
    int delay=mConfig.taskBarEnterAnimDelay + frontIndex * mConfig.taskViewEnterFromHomeDelay;
    if (Constants.DebugFlags.App.EnableShadows) {
      animate().translationZ(transform.translationZ);
    }
    animate().scaleX(transform.scale).scaleY(transform.scale).translationY(transform.translationY).setStartDelay(delay).setUpdateListener(null).setInterpolator(mConfig.quintOutInterpolator).setDuration(mConfig.taskViewEnterFromHomeDuration).withLayer().withEndAction(new Runnable(){
      @Override public void run(){
        mThumbnailView.enableTaskBarClip(mBarView);
        ctx.postAnimationTrigger.decrement();
      }
    }
).start();
    ctx.postAnimationTrigger.increment();
    animateFooterVisibility(true,mConfig.taskViewEnterFromHomeDuration);
  }
 else {
    mThumbnailView.enableTaskBarClip(mBarView);
    animateFooterVisibility(true,0);
  }
}
