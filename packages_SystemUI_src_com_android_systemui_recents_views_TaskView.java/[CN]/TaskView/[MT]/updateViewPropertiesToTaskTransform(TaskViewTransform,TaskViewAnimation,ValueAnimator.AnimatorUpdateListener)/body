{
  RecentsConfiguration config=Recents.getConfiguration();
  Utilities.cancelAnimation(mTransformAnimation);
  mTmpAnimators.clear();
  boolean requiresHwLayers=toTransform.applyToTaskView(this,mTmpAnimators,toAnimation,!config.fakeShadows);
  if (toAnimation.isImmediate()) {
    setTaskProgress(toTransform.p);
    if (toAnimation.listener != null) {
      toAnimation.listener.onAnimationEnd(null);
    }
  }
 else {
    if (Float.compare(getTaskProgress(),toTransform.p) != 0) {
      mTmpAnimators.add(ObjectAnimator.ofFloat(this,TASK_PROGRESS,getTaskProgress(),toTransform.p));
    }
    ValueAnimator updateCallbackAnim=ValueAnimator.ofInt(0,1);
    updateCallbackAnim.addUpdateListener(updateCallback);
    mTmpAnimators.add(updateCallbackAnim);
    mTransformAnimation=toAnimation.createAnimator(mTmpAnimators);
    if (requiresHwLayers) {
      setLayerType(View.LAYER_TYPE_HARDWARE,null);
      mTransformAnimation.addListener(new AnimatorListenerAdapter(){
        @Override public void onAnimationEnd(        Animator animation){
          setLayerType(View.LAYER_TYPE_NONE,null);
        }
      }
);
    }
    mTransformAnimation.start();
  }
}
