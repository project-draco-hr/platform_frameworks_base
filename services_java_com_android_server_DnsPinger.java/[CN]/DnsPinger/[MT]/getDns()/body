{
  if (mConnectivityManager == null) {
    mConnectivityManager=(ConnectivityManager)mContext.getSystemService(Context.CONNECTIVITY_SERVICE);
  }
  LinkProperties curLinkProps=mConnectivityManager.getLinkProperties(mConnectionType);
  if (curLinkProps == null) {
    Slog.e(TAG,"getCurLinkProperties:: LP for type" + mConnectionType + " is null!");
    return mDefaultDns;
  }
  Collection<InetAddress> dnses=curLinkProps.getDnses();
  if (dnses == null || dnses.size() == 0) {
    Slog.v(TAG,"getDns::LinkProps has null dns - returning default");
    return mDefaultDns;
  }
  return dnses.iterator().next();
}
