{
  if (mInputEventConsistencyVerifier != null) {
    mInputEventConsistencyVerifier.onGenericMotionEvent(ev,0);
  }
switch (ev.getActionMasked()) {
case MotionEvent.ACTION_BUTTON_PRESS:
    if (mStylusButtonListener != null && !mInStylusButtonPress && !mInLongPress && ev.getActionButton() == MotionEvent.BUTTON_STYLUS_PRIMARY) {
      if (mStylusButtonListener.onStylusButtonPress(ev)) {
        mInStylusButtonPress=true;
        mHandler.removeMessages(LONG_PRESS);
        mHandler.removeMessages(TAP);
        return true;
      }
    }
  break;
case MotionEvent.ACTION_BUTTON_RELEASE:
if (mInStylusButtonPress && ev.getActionButton() == MotionEvent.BUTTON_STYLUS_PRIMARY) {
  mInStylusButtonPress=false;
  mIgnoreNextUpEvent=true;
}
break;
}
return false;
}
