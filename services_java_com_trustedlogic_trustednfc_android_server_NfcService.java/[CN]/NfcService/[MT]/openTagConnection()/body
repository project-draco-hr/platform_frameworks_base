{
  NativeNfcTag tag;
  if (!mIsNfcEnabled) {
    return ErrorCodes.ERROR_NOT_INITIALIZED;
  }
  mContext.enforceCallingPermission(android.Manifest.permission.NFC_RAW,"NFC_RAW permission required to open NFC Tag connection");
  if (!mOpenPending) {
    mOpenPending=true;
    tag=mManager.doOpenTagConnection(mTimeout);
    if (tag != null) {
      mObjectMap.put(tag.getHandle(),tag);
      return tag.getHandle();
    }
 else {
      mOpenPending=false;
      mManager.enableDiscovery(DISCOVERY_MODE_READER);
      return ErrorCodes.ERROR_IO;
    }
  }
 else {
    return ErrorCodes.ERROR_BUSY;
  }
}
