{
synchronized (this) {
    WeakReference<Package> ref=mPackages.get(packageName);
    Package pkg=(ref != null) ? ref.get() : null;
    ArrayMap<int[],Entry> map=null;
    Entry ent=null;
    if (pkg != null) {
      map=pkg.mMap.get(resId);
      if (map != null) {
        ent=map.get(styleable);
        if (ent != null) {
          return ent;
        }
      }
    }
 else {
      Context context;
      try {
        context=mContext.createPackageContextAsUser(packageName,0,new UserHandle(userId));
        if (context == null) {
          return null;
        }
      }
 catch (      PackageManager.NameNotFoundException e) {
        return null;
      }
      pkg=new Package(context);
      mPackages.put(packageName,new WeakReference<>(pkg));
    }
    if (map == null) {
      map=new ArrayMap<>();
      pkg.mMap.put(resId,map);
    }
    try {
      ent=new Entry(pkg.context,pkg.context.obtainStyledAttributes(resId,styleable));
      map.put(styleable,ent);
    }
 catch (    Resources.NotFoundException e) {
      return null;
    }
    return ent;
  }
}
