{
  int N=getChildCount();
  int x=getPaddingLeft();
  int y=getPaddingTop();
  int cursor=0;
  for (int i=0; i < N; ++i) {
    QuickSettingsTileView v=(QuickSettingsTileView)getChildAt(i);
    ViewGroup.LayoutParams lp=(ViewGroup.LayoutParams)v.getLayoutParams();
    if (v.getVisibility() != GONE) {
      int col=cursor % mNumColumns;
      int colSpan=v.getColumnSpan();
      int row=(int)(cursor / mNumColumns);
      if ((col + colSpan) > mNumColumns) {
        x=getPaddingLeft();
        y+=lp.height + mCellGap;
        row++;
      }
      v.layout(x,y,x + lp.width,y + lp.height);
      cursor+=v.getColumnSpan();
      if (cursor < (((row + 1) * mNumColumns))) {
        x+=lp.width + mCellGap;
      }
 else {
        x=getPaddingLeft();
        y+=lp.height + mCellGap;
      }
    }
  }
}
