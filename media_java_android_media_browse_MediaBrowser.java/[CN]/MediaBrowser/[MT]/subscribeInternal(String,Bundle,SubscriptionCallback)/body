{
  if (TextUtils.isEmpty(parentId)) {
    throw new IllegalArgumentException("parentId is empty.");
  }
  if (callback == null) {
    throw new IllegalArgumentException("callback is null");
  }
  Subscription sub=mSubscriptions.get(parentId);
  if (sub == null) {
    sub=new Subscription();
    mSubscriptions.put(parentId,sub);
  }
  sub.putCallback(options,callback);
  if (mState == CONNECT_STATE_CONNECTED) {
    try {
      if (options == null) {
        mServiceBinder.addSubscriptionDeprecated(parentId,mServiceCallbacks);
      }
      mServiceBinder.addSubscription(parentId,callback.mToken,options,mServiceCallbacks);
    }
 catch (    RemoteException ex) {
      Log.d(TAG,"addSubscription failed with RemoteException parentId=" + parentId);
    }
  }
}
