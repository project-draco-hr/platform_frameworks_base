{
  if (key == null || value == null) {
    throw new NullPointerException("key == null || value == null");
  }
  putCount++;
  size+=safeSizeOf(key,value);
  V previous=map.put(key,value);
  if (previous != null) {
    size-=safeSizeOf(key,previous);
  }
  trimToSize(maxSize);
  return previous;
}
