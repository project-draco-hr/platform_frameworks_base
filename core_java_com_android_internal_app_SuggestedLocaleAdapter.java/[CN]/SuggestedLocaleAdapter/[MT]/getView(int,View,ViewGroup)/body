{
  if (convertView == null && mInflater == null) {
    mInflater=LayoutInflater.from(parent.getContext());
  }
  int itemType=getItemViewType(position);
switch (itemType) {
case TYPE_HEADER_SUGGESTED:
case TYPE_HEADER_ALL_OTHERS:
    if (!(convertView instanceof TextView)) {
      convertView=mInflater.inflate(R.layout.language_picker_section_header,parent,false);
    }
  TextView textView=(TextView)convertView;
if (itemType == TYPE_HEADER_SUGGESTED) {
  textView.setText(R.string.language_picker_section_suggested);
}
 else {
  textView.setText(R.string.language_picker_section_all);
}
textView.setTextLocale(Locale.getDefault());
break;
default :
if (!(convertView instanceof ViewGroup)) {
convertView=mInflater.inflate(R.layout.language_picker_item,parent,false);
}
TextView text=(TextView)convertView.findViewById(R.id.locale);
ImageView localized=(ImageView)convertView.findViewById(R.id.l10nWarn);
LocaleStore.LocaleInfo item=(LocaleStore.LocaleInfo)getItem(position);
text.setText(item.getLabel());
if (item.isTranslated() || mCountryMode) {
localized.setVisibility(View.GONE);
text.setTextLocale(item.getLocale());
}
 else {
localized.setVisibility(View.VISIBLE);
text.setTextLocale(Locale.getDefault());
}
}
return convertView;
}
