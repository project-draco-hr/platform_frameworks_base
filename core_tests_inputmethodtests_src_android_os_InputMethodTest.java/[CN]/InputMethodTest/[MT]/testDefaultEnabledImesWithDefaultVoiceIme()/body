{
  final Context context=getInstrumentation().getTargetContext();
  final ArrayList<InputMethodInfo> imis=new ArrayList<InputMethodInfo>();
  imis.add(createDefaultAutoDummyVoiceIme());
  imis.add(createNonDefaultAutoDummyVoiceIme0());
  imis.add(createNonDefaultAutoDummyVoiceIme1());
  imis.add(createNonDefaultDummyVoiceIme2());
  imis.add(createDefaultDummyLatinKeyboardIme());
  imis.add(createNonDefaultDummyJaJPKeyboardIme());
  imis.add(createNonDefaultDummyJaJPKeyboardImeWithoutSubtypes());
  final ArrayList<InputMethodInfo> enabledImisForSystemNotReady=callGetDefaultEnabledImesUnderWithLocale(context,!IS_SYSTEM_READY,imis,LOCALE_EN_US);
  assertEquals(toSet("DummyDefaultAutoVoiceIme","DummyDefaultEnKeyboardIme","DummyNonDefaultAutoVoiceIme0","DummyNonDefaultAutoVoiceIme1"),getPackageNames(enabledImisForSystemNotReady));
  final ArrayList<InputMethodInfo> enabledImisForSystemReady=callGetDefaultEnabledImesUnderWithLocale(context,IS_SYSTEM_READY,imis,LOCALE_EN_US);
  assertEquals(toSet("DummyDefaultAutoVoiceIme","DummyDefaultEnKeyboardIme"),getPackageNames(enabledImisForSystemReady));
}
