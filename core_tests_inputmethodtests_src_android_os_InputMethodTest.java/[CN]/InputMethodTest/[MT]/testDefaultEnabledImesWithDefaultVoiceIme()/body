{
  final Context context=getInstrumentation().getTargetContext();
  final ArrayList<InputMethodInfo> imis=new ArrayList<InputMethodInfo>();
  imis.add(createDefaultAutoDummyVoiceIme());
  imis.add(createNonDefaultAutoDummyVoiceIme0());
  imis.add(createNonDefaultAutoDummyVoiceIme1());
  imis.add(createNonDefaultDummyVoiceIme2());
  imis.add(createDefaultDummyLatinKeyboardIme());
  imis.add(createNonDefaultDummyJaJPKeyboardIme());
  imis.add(createNonDefaultDummyJaJPKeyboardImeWithoutSubtypes());
  imis.add(createDefaultDummyHinglishKeyboardIme());
  final ArrayList<InputMethodInfo> enabledImisForSystemNotReadyLocaleEnUs=callGetDefaultEnabledImesUnderWithLocale(context,!IS_SYSTEM_READY,imis,LOCALE_EN_US);
  assertEquals(toSet("DummyDefaultAutoVoiceIme","DummyDefaultEnKeyboardIme","DummyNonDefaultAutoVoiceIme0","DummyNonDefaultAutoVoiceIme1","DummyDefaultHinglishKeyboardIme"),getPackageNames(enabledImisForSystemNotReadyLocaleEnUs));
  final ArrayList<InputMethodInfo> enabledImisForSystemReadyLocaleEnUs=callGetDefaultEnabledImesUnderWithLocale(context,IS_SYSTEM_READY,imis,LOCALE_EN_US);
  assertEquals(toSet("DummyDefaultAutoVoiceIme","DummyDefaultEnKeyboardIme","DummyDefaultHinglishKeyboardIme"),getPackageNames(enabledImisForSystemReadyLocaleEnUs));
  final ArrayList<InputMethodInfo> enabledImisForSystemNotReadyLocaleEnGB=callGetDefaultEnabledImesUnderWithLocale(context,!IS_SYSTEM_READY,imis,LOCALE_EN_GB);
  assertEquals(toSet("DummyDefaultAutoVoiceIme","DummyDefaultEnKeyboardIme","DummyNonDefaultAutoVoiceIme0","DummyNonDefaultAutoVoiceIme1","DummyDefaultHinglishKeyboardIme"),getPackageNames(enabledImisForSystemNotReadyLocaleEnGB));
  final ArrayList<InputMethodInfo> enabledImisForSystemReadyLocaleEnGB=callGetDefaultEnabledImesUnderWithLocale(context,IS_SYSTEM_READY,imis,LOCALE_EN_GB);
  assertEquals(toSet("DummyDefaultAutoVoiceIme","DummyDefaultEnKeyboardIme","DummyDefaultHinglishKeyboardIme"),getPackageNames(enabledImisForSystemReadyLocaleEnGB));
  final ArrayList<InputMethodInfo> enabledImisForSystemNotReadyLocaleEnIN=callGetDefaultEnabledImesUnderWithLocale(context,!IS_SYSTEM_READY,imis,LOCALE_EN_IN);
  assertEquals(toSet("DummyDefaultAutoVoiceIme","DummyDefaultEnKeyboardIme","DummyNonDefaultAutoVoiceIme0","DummyNonDefaultAutoVoiceIme1","DummyDefaultHinglishKeyboardIme"),getPackageNames(enabledImisForSystemNotReadyLocaleEnIN));
  final ArrayList<InputMethodInfo> enabledImisForSystemReadyLocaleEnIN=callGetDefaultEnabledImesUnderWithLocale(context,IS_SYSTEM_READY,imis,LOCALE_EN_IN);
  assertEquals(toSet("DummyDefaultAutoVoiceIme","DummyDefaultEnKeyboardIme","DummyDefaultHinglishKeyboardIme"),getPackageNames(enabledImisForSystemReadyLocaleEnIN));
  final ArrayList<InputMethodInfo> enabledImisForSystemNotReadyLocaleHi=callGetDefaultEnabledImesUnderWithLocale(context,!IS_SYSTEM_READY,imis,LOCALE_HI);
  assertEquals(toSet("DummyDefaultAutoVoiceIme","DummyDefaultEnKeyboardIme","DummyNonDefaultAutoVoiceIme0","DummyNonDefaultAutoVoiceIme1","DummyDefaultHinglishKeyboardIme"),getPackageNames(enabledImisForSystemNotReadyLocaleHi));
  final ArrayList<InputMethodInfo> enabledImisForSystemReadyLocaleHi=callGetDefaultEnabledImesUnderWithLocale(context,IS_SYSTEM_READY,imis,LOCALE_HI);
  assertEquals(toSet("DummyDefaultAutoVoiceIme","DummyDefaultEnKeyboardIme","DummyNonDefaultAutoVoiceIme0","DummyNonDefaultAutoVoiceIme1","DummyDefaultHinglishKeyboardIme"),getPackageNames(enabledImisForSystemReadyLocaleHi));
}
