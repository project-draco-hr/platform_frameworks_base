{
  Frame imageFrame=pullInput("image");
  Frame boxFrame=pullInput("box");
  createProgram(env,imageFrame.getFormat());
  Quad box=(Quad)boxFrame.getObjectValue();
  MutableFrameFormat outputFormat=imageFrame.getFormat().mutableCopy();
  outputFormat.setDimensions(mOutputWidth == -1 ? outputFormat.getWidth() : mOutputWidth,mOutputHeight == -1 ? outputFormat.getHeight() : mOutputHeight);
  Frame output=env.getFrameManager().newFrame(outputFormat);
  if (mProgram instanceof ShaderProgram) {
    ShaderProgram shaderProgram=(ShaderProgram)mProgram;
    shaderProgram.setSourceRegion(box);
  }
  mProgram.process(imageFrame,output);
  pushOutput("image",output);
  output.release();
}
