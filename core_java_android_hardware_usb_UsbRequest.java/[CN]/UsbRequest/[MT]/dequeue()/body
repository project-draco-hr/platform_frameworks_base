{
  boolean out=(mEndpoint.getDirection() == UsbConstants.USB_DIR_OUT);
  int bytesRead;
  if (mBuffer.isDirect()) {
    bytesRead=native_dequeue_direct();
  }
 else {
    bytesRead=native_dequeue_array(mBuffer.array(),mLength,out);
  }
  if (bytesRead >= 0) {
    mBuffer.position(Math.min(bytesRead,mLength));
  }
  mBuffer=null;
  mLength=0;
}
