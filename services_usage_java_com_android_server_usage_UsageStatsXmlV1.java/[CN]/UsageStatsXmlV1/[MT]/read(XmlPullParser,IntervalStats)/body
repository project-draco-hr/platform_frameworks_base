{
  statsOut.stats.clear();
  if (statsOut.events != null) {
    statsOut.events.clear();
  }
  statsOut.beginTime=XmlUtils.readLongAttribute(parser,BEGIN_TIME_ATTR);
  statsOut.endTime=XmlUtils.readLongAttribute(parser,END_TIME_ATTR);
  XmlUtils.nextElement(parser);
  UsageStats pkgStats;
  while ((pkgStats=readNextUsageStats(parser)) != null) {
    pkgStats.mBeginTimeStamp=statsOut.beginTime;
    pkgStats.mEndTimeStamp=statsOut.endTime;
    statsOut.stats.put(pkgStats.mPackageName,pkgStats);
  }
  UsageEvents.Event event;
  while ((event=readNextEvent(parser,statsOut)) != null) {
    if (statsOut.events == null) {
      statsOut.events=new TimeSparseArray<>();
    }
    statsOut.events.put(event.getTimeStamp(),event);
  }
}
