{
  if (parser.getEventType() != XmlPullParser.START_TAG) {
    XmlUtils.nextElement(parser);
  }
  if (parser.getEventType() != XmlPullParser.START_TAG || !parser.getName().equals(EVENT_LOG_TAG)) {
    return null;
  }
  final String componentName=XmlUtils.readStringAttribute(parser,NAME_ATTR);
  if (componentName == null) {
    throw new ProtocolException("no " + NAME_ATTR + " attribute present");
  }
  ComponentName component=statsOut.getCachedComponentName(componentName);
  if (component == null) {
    throw new ProtocolException("ComponentName " + componentName + " is invalid");
  }
  UsageEvents.Event event=new UsageEvents.Event();
  event.mComponent=component;
  event.mEventType=XmlUtils.readIntAttribute(parser,TYPE_ATTR);
  event.mTimeStamp=XmlUtils.readLongAttribute(parser,TIME_ATTR);
  XmlUtils.skipCurrentTag(parser);
  return event;
}
