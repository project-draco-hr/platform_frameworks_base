{
  if (parser.getEventType() != XmlPullParser.START_TAG) {
    XmlUtils.nextElement(parser);
  }
  if (parser.getEventType() != XmlPullParser.START_TAG || !parser.getName().equals(PACKAGE_TAG)) {
    return null;
  }
  final String name=parser.getAttributeValue(null,NAME_ATTR);
  if (name == null) {
    throw new ProtocolException("no " + NAME_ATTR + " attribute present");
  }
  UsageStats stats=new UsageStats();
  stats.mPackageName=name;
  stats.mTotalTimeInForeground=XmlUtils.readLongAttribute(parser,TOTAL_TIME_ACTIVE_ATTR);
  stats.mLastTimeUsed=XmlUtils.readLongAttribute(parser,LAST_TIME_ACTIVE_ATTR);
  stats.mLastEvent=XmlUtils.readIntAttribute(parser,LAST_EVENT_ATTR);
  XmlUtils.skipCurrentTag(parser);
  return stats;
}
