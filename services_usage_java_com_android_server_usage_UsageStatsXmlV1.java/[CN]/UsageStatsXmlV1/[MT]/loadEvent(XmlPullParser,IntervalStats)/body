{
  final String packageName=XmlUtils.readStringAttribute(parser,PACKAGE_ATTR);
  if (packageName == null) {
    throw new ProtocolException("no " + PACKAGE_ATTR + " attribute present");
  }
  final String className=XmlUtils.readStringAttribute(parser,CLASS_ATTR);
  final UsageEvents.Event event=statsOut.buildEvent(packageName,className);
  event.mTimeStamp=statsOut.beginTime + XmlUtils.readLongAttribute(parser,TIME_ATTR);
  event.mEventType=XmlUtils.readIntAttribute(parser,TYPE_ATTR);
  if (event.mEventType == UsageEvents.Event.CONFIGURATION_CHANGE) {
    event.mConfiguration=new Configuration();
    Configuration.readXmlAttrs(parser,event.mConfiguration);
  }
  if (statsOut.events == null) {
    statsOut.events=new TimeSparseArray<>();
  }
  statsOut.events.put(event.mTimeStamp,event);
}
