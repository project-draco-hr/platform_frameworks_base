{
  if (expected == actual) {
    return true;
  }
 else   if (expected == null || actual == null || expected.size() != actual.size()) {
    return false;
  }
  for (  Entry<String,Object> entry : expected.valueSet()) {
    final String key=entry.getKey();
    final Object value=entry.getValue();
    if (!actual.containsKey(key)) {
      return false;
    }
    if (value instanceof byte[]) {
      Object actualValue=actual.get(key);
      if (!Arrays.equals((byte[])value,(byte[])actualValue)) {
        byte[] e=(byte[])value;
        byte[] a=(byte[])actualValue;
        Log.d("@@@","expected (len: " + e.length + "): "+ Arrays.toString(e));
        Log.d("@@@","actual (len: " + a.length + "): "+ Arrays.toString(a));
        return false;
      }
    }
 else     if (!value.equals(actual.get(key))) {
      Log.d("@@@","different.");
      return false;
    }
  }
  return true;
}
