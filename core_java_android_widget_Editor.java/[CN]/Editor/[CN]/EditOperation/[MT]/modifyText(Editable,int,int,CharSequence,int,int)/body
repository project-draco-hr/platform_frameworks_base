{
  if (isValidRange(text,deleteFrom,deleteTo) && newTextInsertAt <= text.length() - (deleteTo - deleteFrom)) {
    if (deleteFrom != deleteTo) {
      text.delete(deleteFrom,deleteTo);
    }
    if (newText.length() != 0) {
      text.insert(newTextInsertAt,newText);
    }
  }
  if (0 <= newCursorPos && newCursorPos <= text.length()) {
    Selection.setSelection(text,newCursorPos);
  }
}
