{
  final int line=layout.getLineForOffset(offset);
  final int offsetToCheck=startHandle ? offset : Math.max(offset - 1,0);
  final boolean isRtlChar=layout.isRtlCharAt(offsetToCheck);
  final boolean isRtlParagraph=layout.getParagraphDirection(line) == -1;
  return (isRtlChar == isRtlParagraph) ? layout.getPrimaryHorizontal(offset) : layout.getSecondaryHorizontal(offset);
}
