{
  final int trueOffset=mTextView.getOffsetForPosition(x,y);
  final int currLine=mTextView.getLineAtCoordinate(y);
  if (isWhitespaceLine(mPrevLine,currLine,trueOffset))   return;
  boolean positionCursor=false;
  int offset=trueOffset;
  int end=getWordEnd(offset,true);
  int start=getWordStart(offset);
  if (offset < mPrevOffset) {
    if (!mInWord || currLine < mPrevLine) {
      int offsetToWord=Math.min((end - start) / 2,2);
      if (offset <= end - offsetToWord || currLine < mPrevLine) {
        offset=start;
      }
 else {
        offset=mPrevOffset;
      }
    }
    mPrevOffset=offset;
    mTouchWordOffset=Math.max(trueOffset - offset,0);
    mInWord=!isStartBoundary(offset);
    positionCursor=true;
  }
 else   if (offset - mTouchWordOffset > mPrevOffset) {
    if (currLine > mPrevLine) {
      offset=end;
    }
    offset-=mTouchWordOffset;
    mPrevOffset=offset;
    mInWord=!isEndBoundary(offset);
    positionCursor=true;
  }
  if (positionCursor) {
    final int selectionEnd=mTextView.getSelectionEnd();
    if (offset >= selectionEnd) {
      int alteredOffset=mTextView.getOffsetAtCoordinate(mPrevLine,x);
      if (alteredOffset >= selectionEnd) {
        offset=Math.max(0,selectionEnd - 1);
      }
 else {
        offset=alteredOffset;
      }
    }
    positionAtCursorOffset(offset,false);
  }
}
