{
  TextView tv=getOwnerData();
  Editable editable=(Editable)tv.getText();
  CharSequence curText;
  if (mRangeStart >= mRangeEnd) {
    curText=null;
  }
 else {
    curText=editable.subSequence(mRangeStart,mRangeEnd);
  }
  if (DEBUG_UNDO) {
    Log.d(TAG,"Swap: range=(" + mRangeStart + "-"+ mRangeEnd+ "), oldText="+ mOldText);
    Log.d(TAG,"Swap: curText=" + curText);
  }
  if (mOldText == null) {
    editable.delete(mRangeStart,mRangeEnd);
    mRangeEnd=mRangeStart;
  }
 else {
    editable.replace(mRangeStart,mRangeEnd,mOldText);
    mRangeEnd=mRangeStart + mOldText.length();
  }
  mOldText=curText;
}
