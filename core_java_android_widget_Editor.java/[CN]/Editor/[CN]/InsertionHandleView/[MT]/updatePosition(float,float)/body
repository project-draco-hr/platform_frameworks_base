{
  Layout layout=mTextView.getLayout();
  int offset;
  if (layout != null) {
    if (mPreviousLineTouched == UNSET_LINE) {
      mPreviousLineTouched=mTextView.getLineAtCoordinate(y);
    }
    int currLine=getCurrentLineAdjustedForSlop(layout,mPreviousLineTouched,y);
    offset=mTextView.getOffsetAtCoordinate(currLine,x);
    mPreviousLineTouched=currLine;
  }
 else {
    offset=mTextView.getOffsetForPosition(x,y);
  }
  positionAtCursorOffset(offset,false);
  if (mTextActionMode != null) {
    mTextActionMode.invalidate();
  }
}
