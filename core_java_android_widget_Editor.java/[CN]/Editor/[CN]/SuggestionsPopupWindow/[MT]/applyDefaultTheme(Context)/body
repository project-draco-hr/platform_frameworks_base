{
  TypedArray a=originalContext.obtainStyledAttributes(new int[]{com.android.internal.R.attr.isLightTheme});
  boolean isLightTheme=a.getBoolean(0,true);
  int themeId=isLightTheme ? R.style.ThemeOverlay_Material_Light : R.style.ThemeOverlay_Material_Dark;
  a.recycle();
  return new ContextThemeWrapper(originalContext,themeId);
}
