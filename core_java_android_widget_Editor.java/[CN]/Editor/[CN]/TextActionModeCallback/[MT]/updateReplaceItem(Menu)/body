{
  boolean canReplace=mTextView.isSuggestionsEnabled() && shouldOfferToShowSuggestions() && !(mTextView.isInExtractedMode() && mTextView.hasSelection());
  boolean replaceItemExists=menu.findItem(TextView.ID_REPLACE) != null;
  if (canReplace && !replaceItemExists) {
    menu.add(Menu.NONE,TextView.ID_REPLACE,MENU_ITEM_ORDER_REPLACE,com.android.internal.R.string.replace).setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
  }
 else   if (!canReplace && replaceItemExists) {
    menu.removeItem(TextView.ID_REPLACE);
  }
}
