{
  mError=TextUtils.stringOrSpannedString(error);
  mErrorWasChanged=true;
  final Drawables dr=mTextView.mDrawables;
  if (dr != null) {
switch (mTextView.getLayoutDirection()) {
default :
case View.LAYOUT_DIRECTION_LTR:
      mTextView.setCompoundDrawables(dr.mDrawableLeft,dr.mDrawableTop,icon,dr.mDrawableBottom);
    break;
case View.LAYOUT_DIRECTION_RTL:
  mTextView.setCompoundDrawables(icon,dr.mDrawableTop,dr.mDrawableRight,dr.mDrawableBottom);
break;
}
}
 else {
mTextView.setCompoundDrawables(null,null,icon,null);
}
if (mError == null) {
if (mErrorPopup != null) {
if (mErrorPopup.isShowing()) {
mErrorPopup.dismiss();
}
mErrorPopup=null;
}
}
 else {
if (mTextView.isFocused()) {
showError();
}
}
}
