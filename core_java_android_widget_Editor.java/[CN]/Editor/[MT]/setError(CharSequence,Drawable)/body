{
  mError=TextUtils.stringOrSpannedString(error);
  mErrorWasChanged=true;
  final int layoutDirection=mTextView.getLayoutDirection();
  if (mLastLayoutDirection != layoutDirection) {
    final Drawables dr=mTextView.mDrawables;
switch (layoutDirection) {
default :
case View.LAYOUT_DIRECTION_LTR:
      if (dr != null) {
        mTextView.setCompoundDrawables(dr.mDrawableLeft,dr.mDrawableTop,icon,dr.mDrawableBottom);
      }
 else {
        mTextView.setCompoundDrawables(null,null,icon,null);
      }
    break;
case View.LAYOUT_DIRECTION_RTL:
  if (dr != null) {
    mTextView.setCompoundDrawables(icon,dr.mDrawableTop,dr.mDrawableRight,dr.mDrawableBottom);
  }
 else {
    mTextView.setCompoundDrawables(icon,null,null,null);
  }
break;
}
mLastLayoutDirection=layoutDirection;
}
if (mError == null) {
if (mErrorPopup != null) {
if (mErrorPopup.isShowing()) {
mErrorPopup.dismiss();
}
mErrorPopup=null;
}
}
 else {
if (mTextView.isFocused()) {
showError();
}
}
}
