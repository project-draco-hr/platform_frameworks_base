{
  horizontal=Math.max(0.5f,horizontal - 0.5f);
  if (mTempRect == null)   mTempRect=new Rect();
  drawable.getPadding(mTempRect);
  int scrollX=mTextView.getScrollX();
  float horizontalDiff=horizontal - scrollX;
  int viewClippedWidth=mTextView.getWidth() - mTextView.getCompoundPaddingLeft() - mTextView.getCompoundPaddingRight();
  final int left;
  if (horizontalDiff >= (viewClippedWidth - 1f)) {
    final int cursorWidth=drawable.getIntrinsicWidth();
    left=viewClippedWidth + scrollX - (cursorWidth - mTempRect.right);
  }
 else   if (Math.abs(horizontalDiff) <= 1f) {
    left=scrollX - mTempRect.left;
  }
 else {
    left=(int)horizontal - mTempRect.left;
  }
  return left;
}
