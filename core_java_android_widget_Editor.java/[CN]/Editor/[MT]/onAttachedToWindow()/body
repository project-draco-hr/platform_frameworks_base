{
  if (mShowErrorAfterAttach) {
    showError();
    mShowErrorAfterAttach=false;
  }
  mTemporaryDetach=false;
  final ViewTreeObserver observer=mTextView.getViewTreeObserver();
  if (mInsertionPointCursorController != null) {
    observer.addOnTouchModeChangeListener(mInsertionPointCursorController);
  }
  if (mSelectionModifierCursorController != null) {
    mSelectionModifierCursorController.resetTouchOffsets();
    observer.addOnTouchModeChangeListener(mSelectionModifierCursorController);
  }
  updateSpellCheckSpans(0,mTextView.getText().length(),true);
  if (mTextView.hasTransientState() && mTextView.getSelectionStart() != mTextView.getSelectionEnd()) {
    mTextView.setHasTransientState(false);
    startSelectionActionMode();
  }
  getPositionListener().addSubscriber(mCursorAnchorInfoNotifier,true);
}
