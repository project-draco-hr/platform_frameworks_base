{
  if (mTextView.mCursorDrawableRes == 0) {
    mCursorCount=0;
    return;
  }
  Layout layout=mTextView.getLayout();
  Layout hintLayout=mTextView.getHintLayout();
  final int offset=mTextView.getSelectionStart();
  final int line=layout.getLineForOffset(offset);
  final int top=layout.getLineTop(line);
  final int bottom=layout.getLineTop(line + 1);
  mCursorCount=layout.isLevelBoundary(offset) ? 2 : 1;
  int middle=bottom;
  if (mCursorCount == 2) {
    middle=(top + bottom) >> 1;
  }
  boolean clamped=layout.shouldClampCursor(line);
  updateCursorPosition(0,top,middle,getPrimaryHorizontal(layout,hintLayout,offset,clamped));
  if (mCursorCount == 2) {
    updateCursorPosition(1,middle,bottom,layout.getSecondaryHorizontal(offset,clamped));
  }
}
