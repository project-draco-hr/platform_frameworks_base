{
  NetworkUtils.stopDhcp(mIface);
  mLinkProperties.clear();
  mNetworkInfo.setIsAvailable(false);
  mNetworkInfo.setDetailedState(DetailedState.DISCONNECTED,null,mHwAddr);
  Message msg=mCsHandler.obtainMessage(EVENT_CONFIGURATION_CHANGED,mNetworkInfo);
  msg.sendToTarget();
  msg=mCsHandler.obtainMessage(EVENT_STATE_CHANGED,mNetworkInfo);
  msg.sendToTarget();
  IBinder b=ServiceManager.getService(Context.NETWORKMANAGEMENT_SERVICE);
  INetworkManagementService service=INetworkManagementService.Stub.asInterface(b);
  try {
    service.clearInterfaceAddresses(mIface);
  }
 catch (  Exception e) {
    Log.e(TAG,"Failed to clear addresses or disable ipv6" + e);
  }
}
