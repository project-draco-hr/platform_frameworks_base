{
  mContext=context;
  mCsHandler=target;
  IBinder b=ServiceManager.getService(Context.NETWORKMANAGEMENT_SERVICE);
  mNMService=INetworkManagementService.Stub.asInterface(b);
  mInterfaceObserver=new InterfaceObserver(this);
  sIfaceMatch=context.getResources().getString(com.android.internal.R.string.config_ethernet_iface_regex);
  try {
    final String[] ifaces=mNMService.listInterfaces();
    for (    String iface : ifaces) {
      if (iface.matches(sIfaceMatch)) {
        mIface=iface;
        mNMService.setInterfaceUp(iface);
        InterfaceConfiguration config=mNMService.getInterfaceConfig(iface);
        mLinkUp=config.hasFlag("up");
        if (config != null && mHwAddr == null) {
          mHwAddr=config.getHardwareAddress();
          if (mHwAddr != null) {
            mNetworkInfo.setExtraInfo(mHwAddr);
          }
        }
        NetworkUtils.stopDhcp(mIface);
        reconnect();
        break;
      }
    }
  }
 catch (  RemoteException e) {
    Log.e(TAG,"Could not get list of interfaces " + e);
  }
  try {
    mNMService.registerObserver(mInterfaceObserver);
  }
 catch (  RemoteException e) {
    Log.e(TAG,"Could not register InterfaceObserver " + e);
  }
}
