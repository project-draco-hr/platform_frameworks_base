{
  if (mContext.checkCallingOrSelfPermission(android.Manifest.permission.VIBRATE) != PackageManager.PERMISSION_GRANTED) {
    throw new SecurityException("Requires VIBRATE permission");
  }
  verifyIncomingUid(uid);
  if (milliseconds <= 0 || (mCurrentVibration != null && mCurrentVibration.hasLongerTimeout(milliseconds))) {
    return;
  }
  Vibration vib=new Vibration(token,milliseconds,uid,packageName);
  final long ident=Binder.clearCallingIdentity();
  try {
synchronized (mVibrations) {
      removeVibrationLocked(token);
      doCancelVibrateLocked();
      mCurrentVibration=vib;
      startVibrationLocked(vib);
    }
  }
  finally {
    Binder.restoreCallingIdentity(ident);
  }
}
