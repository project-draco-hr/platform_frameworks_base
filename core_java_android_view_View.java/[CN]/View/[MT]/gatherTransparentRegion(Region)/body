{
  final AttachInfo attachInfo=mAttachInfo;
  if (region != null && attachInfo != null) {
    final int pflags=mPrivateFlags;
    if ((pflags & PFLAG_SKIP_DRAW) == 0) {
      final int[] location=attachInfo.mTransparentLocation;
      getLocationInWindow(location);
      region.op(location[0],location[1],location[0] + mRight - mLeft,location[1] + mBottom - mTop,Region.Op.DIFFERENCE);
    }
 else     if ((pflags & PFLAG_ONLY_DRAWS_BACKGROUND) != 0 && mBackground != null && mBackground.getOpacity() != PixelFormat.TRANSPARENT) {
      applyDrawableToTransparentRegion(mBackground,region);
    }
    final Drawable foreground=mForegroundInfo != null ? mForegroundInfo.mDrawable : null;
    if (foreground != null) {
      applyDrawableToTransparentRegion(mForegroundInfo.mDrawable,region);
    }
  }
  return true;
}
