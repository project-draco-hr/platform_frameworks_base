{
  if (DEBUG_DRAG) {
    Log.d(VIEW_LOG_TAG,"startDrag: touch=(" + touchX + ","+ touchY+ ") thumb=("+ thumbnailTouchX+ ","+ thumbnailTouchY+ ") data="+ data+ " local="+ myWindowOnly);
  }
  boolean okay=false;
  measureThumbnail();
  Surface surface=new Surface();
  try {
    IBinder token=mAttachInfo.mSession.prepareDrag(mAttachInfo.mWindow,myWindowOnly,mThumbnailWidth,mThumbnailHeight,surface);
    if (DEBUG_DRAG)     Log.d(VIEW_LOG_TAG,"prepareDrag returned token=" + token + " surface="+ surface);
    if (token != null) {
      Canvas canvas=surface.lockCanvas(null);
      onDrawDragThumbnail(canvas);
      surface.unlockCanvasAndPost(canvas);
      okay=mAttachInfo.mSession.performDrag(mAttachInfo.mWindow,token,touchX,touchY,thumbnailTouchX,thumbnailTouchX,data);
      if (DEBUG_DRAG)       Log.d(VIEW_LOG_TAG,"performDrag returned " + okay);
    }
  }
 catch (  Exception e) {
    Log.e(VIEW_LOG_TAG,"Unable to initiate drag",e);
    surface.destroy();
  }
  return okay;
}
