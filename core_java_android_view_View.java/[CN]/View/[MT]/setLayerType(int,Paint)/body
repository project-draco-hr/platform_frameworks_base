{
  if (layerType < LAYER_TYPE_NONE || layerType > LAYER_TYPE_HARDWARE) {
    throw new IllegalArgumentException("Layer type can only be one of: LAYER_TYPE_NONE, " + "LAYER_TYPE_SOFTWARE or LAYER_TYPE_HARDWARE");
  }
  if (mLayerType == LAYER_TYPE_SOFTWARE && layerType != LAYER_TYPE_SOFTWARE) {
    if (mDrawingCache != null) {
      mDrawingCache.recycle();
      mDrawingCache=null;
    }
    if (mUnscaledDrawingCache != null) {
      mUnscaledDrawingCache.recycle();
      mUnscaledDrawingCache=null;
    }
  }
  mLayerType=layerType;
  mLayerPaint=mLayerType == LAYER_TYPE_NONE ? null : paint;
  invalidate();
}
