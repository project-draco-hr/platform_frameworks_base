{
  if (mLayerType == LAYER_TYPE_NONE)   return;
  if (mAttachInfo == null) {
    throw new IllegalStateException("This view must be attached to a window first");
  }
switch (mLayerType) {
case LAYER_TYPE_HARDWARE:
    if (mAttachInfo.mHardwareRenderer != null && mAttachInfo.mHardwareRenderer.isEnabled() && mAttachInfo.mHardwareRenderer.validate()) {
      getHardwareLayer();
    }
  break;
case LAYER_TYPE_SOFTWARE:
buildDrawingCache(true);
break;
}
}
