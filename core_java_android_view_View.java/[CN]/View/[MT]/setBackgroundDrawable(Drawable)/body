{
  computeOpaqueFlags();
  if (background == mBackground) {
    return;
  }
  boolean requestLayout=false;
  mBackgroundResource=0;
  if (mBackground != null) {
    mBackground.setCallback(null);
    unscheduleDrawable(mBackground);
  }
  if (background != null) {
    Rect padding=sThreadLocal.get();
    if (padding == null) {
      padding=new Rect();
      sThreadLocal.set(padding);
    }
    background.setLayoutDirection(getResolvedLayoutDirection());
    if (background.getPadding(padding)) {
switch (background.getLayoutDirection()) {
case LAYOUT_DIRECTION_RTL:
        setPadding(padding.right,padding.top,padding.left,padding.bottom);
      break;
case LAYOUT_DIRECTION_LTR:
default :
    setPadding(padding.left,padding.top,padding.right,padding.bottom);
}
}
if (mBackground == null || mBackground.getMinimumHeight() != background.getMinimumHeight() || mBackground.getMinimumWidth() != background.getMinimumWidth()) {
requestLayout=true;
}
background.setCallback(this);
if (background.isStateful()) {
background.setState(getDrawableState());
}
background.setVisible(getVisibility() == VISIBLE,false);
mBackground=background;
if ((mPrivateFlags & SKIP_DRAW) != 0) {
mPrivateFlags&=~SKIP_DRAW;
mPrivateFlags|=ONLY_DRAWS_BACKGROUND;
requestLayout=true;
}
}
 else {
mBackground=null;
if ((mPrivateFlags & ONLY_DRAWS_BACKGROUND) != 0) {
mPrivateFlags&=~ONLY_DRAWS_BACKGROUND;
mPrivateFlags|=SKIP_DRAW;
}
requestLayout=true;
}
computeOpaqueFlags();
if (requestLayout) {
requestLayout();
}
mBackgroundSizeChanged=true;
invalidate(true);
}
