{
  if (mAttachInfo != null) {
    if (mAttachInfo.mHardwareRenderer != null) {
      if (mFrameMetricsObservers == null) {
        mFrameMetricsObservers=new ArrayList<>();
      }
      FrameMetricsObserver fmo=new FrameMetricsObserver(window,handler.getLooper(),listener);
      mFrameMetricsObservers.add(fmo);
      mAttachInfo.mHardwareRenderer.addFrameMetricsObserver(fmo);
    }
 else {
      Log.w(VIEW_LOG_TAG,"View not hardware-accelerated. Unable to observe frame stats");
    }
  }
 else {
    if (mFrameMetricsObservers == null) {
      mFrameMetricsObservers=new ArrayList<>();
    }
    FrameMetricsObserver fmo=new FrameMetricsObserver(window,handler.getLooper(),listener);
    mFrameMetricsObservers.add(fmo);
  }
}
