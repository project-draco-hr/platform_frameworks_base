{
  CharSequence text=getIterableTextForAccessibility();
  if (text == null || text.length() == 0) {
    return false;
  }
  TextSegmentIterator iterator=getIteratorForGranularity(granularity);
  if (iterator == null) {
    return false;
  }
  int current=getAccessibilityCursorPosition();
  if (current == ACCESSIBILITY_CURSOR_POSITION_UNDEFINED) {
    current=text.length();
    setAccessibilityCursorPosition(current);
  }
 else   if (granularity == AccessibilityNodeInfo.MOVEMENT_GRANULARITY_CHARACTER) {
    current--;
    setAccessibilityCursorPosition(current);
  }
  final int[] range=iterator.preceding(current);
  if (range == null) {
    return false;
  }
  final int start=range[0];
  final int end=range[1];
  if (granularity == AccessibilityNodeInfo.MOVEMENT_GRANULARITY_CHARACTER) {
    setAccessibilityCursorPosition(end);
  }
 else {
    setAccessibilityCursorPosition(start);
  }
  sendViewTextTraversedAtGranularityEvent(AccessibilityNodeInfo.ACTION_PREVIOUS_AT_MOVEMENT_GRANULARITY,granularity,start,end);
  return true;
}
