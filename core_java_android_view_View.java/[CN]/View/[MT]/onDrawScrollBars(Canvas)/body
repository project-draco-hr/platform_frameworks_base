{
  final ScrollabilityCache cache=mScrollCache;
  if (cache != null) {
    int state=cache.state;
    if (state == ScrollabilityCache.OFF) {
      return;
    }
    boolean invalidate=false;
    if (state == ScrollabilityCache.FADING) {
      if (cache.interpolatorValues == null) {
        cache.interpolatorValues=new float[1];
      }
      float[] values=cache.interpolatorValues;
      if (cache.scrollBarInterpolator.timeToValues(values) == Interpolator.Result.FREEZE_END) {
        cache.state=ScrollabilityCache.OFF;
      }
 else {
        cache.scrollBar.setAlpha(Math.round(values[0]));
      }
      invalidate=true;
    }
 else {
      cache.scrollBar.setAlpha(255);
    }
    final int viewFlags=mViewFlags;
    final boolean drawHorizontalScrollBar=(viewFlags & SCROLLBARS_HORIZONTAL) == SCROLLBARS_HORIZONTAL;
    final boolean drawVerticalScrollBar=(viewFlags & SCROLLBARS_VERTICAL) == SCROLLBARS_VERTICAL && !isVerticalScrollBarHidden();
    if (drawVerticalScrollBar || drawHorizontalScrollBar) {
      final int width=mRight - mLeft;
      final int height=mBottom - mTop;
      final ScrollBarDrawable scrollBar=cache.scrollBar;
      int size=scrollBar.getSize(false);
      if (size <= 0) {
        size=cache.scrollBarSize;
      }
      final int scrollX=mScrollX;
      final int scrollY=mScrollY;
      final int inside=(viewFlags & SCROLLBARS_OUTSIDE_MASK) == 0 ? ~0 : 0;
      int left, top, right, bottom;
      if (drawHorizontalScrollBar) {
        scrollBar.setParameters(computeHorizontalScrollRange(),computeHorizontalScrollOffset(),computeHorizontalScrollExtent(),false);
        final int verticalScrollBarGap=drawVerticalScrollBar ? getVerticalScrollbarWidth() : 0;
        top=scrollY + height - size - (mUserPaddingBottom & inside);
        left=scrollX + (mPaddingLeft & inside);
        right=scrollX + width - (mUserPaddingRight & inside) - verticalScrollBarGap;
        bottom=top + size;
        onDrawHorizontalScrollBar(canvas,scrollBar,left,top,right,bottom);
        if (invalidate) {
          invalidate(left,top,right,bottom);
        }
      }
      if (drawVerticalScrollBar) {
        scrollBar.setParameters(computeVerticalScrollRange(),computeVerticalScrollOffset(),computeVerticalScrollExtent(),true);
switch (mVerticalScrollbarPosition) {
default :
case SCROLLBAR_POSITION_DEFAULT:
case SCROLLBAR_POSITION_RIGHT:
          left=scrollX + width - size - (mUserPaddingRight & inside);
        break;
case SCROLLBAR_POSITION_LEFT:
      left=scrollX + (mUserPaddingLeft & inside);
    break;
}
top=scrollY + (mPaddingTop & inside);
right=left + size;
bottom=scrollY + height - (mUserPaddingBottom & inside);
onDrawVerticalScrollBar(canvas,scrollBar,left,top,right,bottom);
if (invalidate) {
  invalidate(left,top,right,bottom);
}
}
}
}
}
