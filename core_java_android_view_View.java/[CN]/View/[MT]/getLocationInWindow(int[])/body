{
  if (mAttachInfo == null)   return;
  if (location == null || location.length < 2) {
    throw new IllegalArgumentException("location must be an array of two integers");
  }
  float[] position=mAttachInfo.mTmpTransformLocation;
  position[0]=position[1]=0.0f;
  if (!hasIdentityMatrix()) {
    getMatrix().mapPoints(position);
  }
  position[0]+=mLeft;
  position[1]+=mTop;
  ViewParent viewParent=mParent;
  while (viewParent instanceof View) {
    final View view=(View)viewParent;
    position[0]-=view.mScrollX;
    position[1]-=view.mScrollY;
    if (!view.hasIdentityMatrix()) {
      view.getMatrix().mapPoints(position);
    }
    position[0]+=view.mLeft;
    position[1]+=view.mTop;
    viewParent=view.mParent;
  }
  if (viewParent instanceof ViewRootImpl) {
    final ViewRootImpl vr=(ViewRootImpl)viewParent;
    position[1]-=vr.mCurScrollY;
  }
  location[0]=(int)(position[0] + 0.5f);
  location[1]=(int)(position[1] + 0.5f);
}
