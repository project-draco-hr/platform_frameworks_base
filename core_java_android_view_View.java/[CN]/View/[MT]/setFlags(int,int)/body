{
  int old=mViewFlags;
  mViewFlags=(mViewFlags & ~mask) | (flags & mask);
  int changed=mViewFlags ^ old;
  if (changed == 0) {
    return;
  }
  int privateFlags=mPrivateFlags;
  if (((changed & FOCUSABLE_MASK) != 0) && ((privateFlags & HAS_BOUNDS) != 0)) {
    if (((old & FOCUSABLE_MASK) == FOCUSABLE) && ((privateFlags & FOCUSED) != 0)) {
      clearFocus();
    }
 else     if (((old & FOCUSABLE_MASK) == NOT_FOCUSABLE) && ((privateFlags & FOCUSED) == 0)) {
      if (mParent != null)       mParent.focusableViewAvailable(this);
    }
  }
  if ((flags & VISIBILITY_MASK) == VISIBLE) {
    if ((changed & VISIBILITY_MASK) != 0) {
      mPrivateFlags|=DRAWN;
      needGlobalAttributesUpdate(true);
      if ((mParent != null) && (mBottom > mTop) && (mRight > mLeft)) {
        mParent.focusableViewAvailable(this);
      }
    }
  }
  if ((changed & GONE) != 0) {
    needGlobalAttributesUpdate(false);
    requestLayout();
    invalidate();
    if (((mViewFlags & VISIBILITY_MASK) == GONE) && hasFocus()) {
      clearFocus();
    }
    if (mAttachInfo != null) {
      mAttachInfo.mViewVisibilityChanged=true;
    }
  }
  if ((changed & INVISIBLE) != 0) {
    needGlobalAttributesUpdate(false);
    invalidate();
    if (((mViewFlags & VISIBILITY_MASK) == INVISIBLE) && hasFocus()) {
      if (getRootView() != this) {
        clearFocus();
      }
    }
    if (mAttachInfo != null) {
      mAttachInfo.mViewVisibilityChanged=true;
    }
  }
  if ((changed & WILL_NOT_CACHE_DRAWING) != 0) {
    if (mDrawingCache != null) {
      mDrawingCache.recycle();
    }
    mDrawingCache=null;
  }
  if ((changed & DRAWING_CACHE_ENABLED) != 0) {
    if (mDrawingCache != null) {
      mDrawingCache.recycle();
    }
    mDrawingCache=null;
    mPrivateFlags&=~DRAWING_CACHE_VALID;
  }
  if ((changed & DRAWING_CACHE_QUALITY_MASK) != 0) {
    if (mDrawingCache != null) {
      mDrawingCache.recycle();
    }
    mDrawingCache=null;
    mPrivateFlags&=~DRAWING_CACHE_VALID;
  }
  if ((changed & DRAW_MASK) != 0) {
    if ((mViewFlags & WILL_NOT_DRAW) != 0) {
      if (mBGDrawable != null) {
        mPrivateFlags&=~SKIP_DRAW;
        mPrivateFlags|=ONLY_DRAWS_BACKGROUND;
      }
 else {
        mPrivateFlags|=SKIP_DRAW;
      }
    }
 else {
      mPrivateFlags&=~SKIP_DRAW;
    }
    requestLayout();
    invalidate();
  }
  if ((changed & KEEP_SCREEN_ON) != 0) {
    if (mParent != null) {
      mParent.recomputeViewAttributes(this);
    }
  }
}
