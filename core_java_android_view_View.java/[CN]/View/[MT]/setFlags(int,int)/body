{
  int old=mViewFlags;
  mViewFlags=(mViewFlags & ~mask) | (flags & mask);
  int changed=mViewFlags ^ old;
  if (changed == 0) {
    return;
  }
  int privateFlags=mPrivateFlags;
  if (((changed & FOCUSABLE_MASK) != 0) && ((privateFlags & HAS_BOUNDS) != 0)) {
    if (((old & FOCUSABLE_MASK) == FOCUSABLE) && ((privateFlags & FOCUSED) != 0)) {
      clearFocus();
    }
 else     if (((old & FOCUSABLE_MASK) == NOT_FOCUSABLE) && ((privateFlags & FOCUSED) == 0)) {
      if (mParent != null)       mParent.focusableViewAvailable(this);
    }
  }
  if ((flags & VISIBILITY_MASK) == VISIBLE) {
    if ((changed & VISIBILITY_MASK) != 0) {
      mPrivateFlags|=DRAWN;
      invalidate(true);
      needGlobalAttributesUpdate(true);
      if ((mParent != null) && (mBottom > mTop) && (mRight > mLeft)) {
        mParent.focusableViewAvailable(this);
      }
    }
  }
  if ((changed & GONE) != 0) {
    needGlobalAttributesUpdate(false);
    requestLayout();
    if (((mViewFlags & VISIBILITY_MASK) == GONE)) {
      if (hasFocus())       clearFocus();
      destroyDrawingCache();
      if (mParent instanceof View) {
        ((View)mParent).invalidate(true);
      }
      mPrivateFlags|=DRAWN;
    }
    if (mAttachInfo != null) {
      mAttachInfo.mViewVisibilityChanged=true;
    }
  }
  if ((changed & INVISIBLE) != 0) {
    needGlobalAttributesUpdate(false);
    mPrivateFlags|=DRAWN;
    if (((mViewFlags & VISIBILITY_MASK) == INVISIBLE) && hasFocus()) {
      if (getRootView() != this) {
        clearFocus();
      }
    }
    if (mAttachInfo != null) {
      mAttachInfo.mViewVisibilityChanged=true;
    }
  }
  if ((changed & VISIBILITY_MASK) != 0) {
    if (mParent instanceof ViewGroup) {
      ((ViewGroup)mParent).onChildVisibilityChanged(this,(changed & VISIBILITY_MASK),(flags & VISIBILITY_MASK));
      ((View)mParent).invalidate(true);
    }
 else     if (mParent != null) {
      mParent.invalidateChild(this,null);
    }
    dispatchVisibilityChanged(this,(flags & VISIBILITY_MASK));
  }
  if ((changed & WILL_NOT_CACHE_DRAWING) != 0) {
    destroyDrawingCache();
  }
  if ((changed & DRAWING_CACHE_ENABLED) != 0) {
    destroyDrawingCache();
    mPrivateFlags&=~DRAWING_CACHE_VALID;
    invalidateParentCaches();
  }
  if ((changed & DRAWING_CACHE_QUALITY_MASK) != 0) {
    destroyDrawingCache();
    mPrivateFlags&=~DRAWING_CACHE_VALID;
  }
  if ((changed & DRAW_MASK) != 0) {
    if ((mViewFlags & WILL_NOT_DRAW) != 0) {
      if (mBGDrawable != null) {
        mPrivateFlags&=~SKIP_DRAW;
        mPrivateFlags|=ONLY_DRAWS_BACKGROUND;
      }
 else {
        mPrivateFlags|=SKIP_DRAW;
      }
    }
 else {
      mPrivateFlags&=~SKIP_DRAW;
    }
    requestLayout();
    invalidate(true);
  }
  if ((changed & KEEP_SCREEN_ON) != 0) {
    if (mParent != null && mAttachInfo != null && !mAttachInfo.mRecomputeGlobalAttributes) {
      mParent.recomputeViewAttributes(this);
    }
  }
}
