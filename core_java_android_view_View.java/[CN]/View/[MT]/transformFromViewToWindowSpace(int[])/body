{
  if (inOutLocation == null || inOutLocation.length < 2) {
    throw new IllegalArgumentException("inOutLocation must be an array of two integers");
  }
  if (mAttachInfo == null) {
    inOutLocation[0]=inOutLocation[1]=0;
    return;
  }
  float position[]=mAttachInfo.mTmpTransformLocation;
  position[0]=inOutLocation[0];
  position[1]=inOutLocation[1];
  if (!hasIdentityMatrix()) {
    getMatrix().mapPoints(position);
  }
  position[0]+=mLeft;
  position[1]+=mTop;
  ViewParent viewParent=mParent;
  while (viewParent instanceof View) {
    final View view=(View)viewParent;
    position[0]-=view.mScrollX;
    position[1]-=view.mScrollY;
    if (!view.hasIdentityMatrix()) {
      view.getMatrix().mapPoints(position);
    }
    position[0]+=view.mLeft;
    position[1]+=view.mTop;
    viewParent=view.mParent;
  }
  if (viewParent instanceof ViewRootImpl) {
    final ViewRootImpl vr=(ViewRootImpl)viewParent;
    position[1]-=vr.mCurScrollY;
  }
  inOutLocation[0]=Math.round(position[0]);
  inOutLocation[1]=Math.round(position[1]);
}
