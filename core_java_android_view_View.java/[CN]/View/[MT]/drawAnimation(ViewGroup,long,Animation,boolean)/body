{
  Transformation invalidationTransform;
  final int flags=parent.mGroupFlags;
  final boolean initialized=a.isInitialized();
  if (!initialized) {
    a.initialize(mRight - mLeft,mBottom - mTop,parent.getWidth(),parent.getHeight());
    a.initializeInvalidateRegion(0,0,mRight - mLeft,mBottom - mTop);
    if (mAttachInfo != null)     a.setListenerHandler(mAttachInfo.mHandler);
    onAnimationStart();
  }
  final Transformation t=parent.getChildTransformation();
  boolean more=a.getTransformation(drawingTime,t,1f);
  if (scalingRequired && mAttachInfo.mApplicationScale != 1f) {
    if (parent.mInvalidationTransformation == null) {
      parent.mInvalidationTransformation=new Transformation();
    }
    invalidationTransform=parent.mInvalidationTransformation;
    a.getTransformation(drawingTime,invalidationTransform,1f);
  }
 else {
    invalidationTransform=t;
  }
  if (more) {
    if (!a.willChangeBounds()) {
      if ((flags & (ViewGroup.FLAG_OPTIMIZE_INVALIDATE | ViewGroup.FLAG_ANIMATION_DONE)) == ViewGroup.FLAG_OPTIMIZE_INVALIDATE) {
        parent.mGroupFlags|=ViewGroup.FLAG_INVALIDATE_REQUIRED;
      }
 else       if ((flags & ViewGroup.FLAG_INVALIDATE_REQUIRED) == 0) {
        parent.mPrivateFlags|=PFLAG_DRAW_ANIMATION;
        parent.invalidate(mLeft,mTop,mRight,mBottom);
      }
    }
 else {
      if (parent.mInvalidateRegion == null) {
        parent.mInvalidateRegion=new RectF();
      }
      final RectF region=parent.mInvalidateRegion;
      a.getInvalidateRegion(0,0,mRight - mLeft,mBottom - mTop,region,invalidationTransform);
      parent.mPrivateFlags|=PFLAG_DRAW_ANIMATION;
      final int left=mLeft + (int)region.left;
      final int top=mTop + (int)region.top;
      parent.invalidate(left,top,left + (int)(region.width() + .5f),top + (int)(region.height() + .5f));
    }
  }
  return more;
}
