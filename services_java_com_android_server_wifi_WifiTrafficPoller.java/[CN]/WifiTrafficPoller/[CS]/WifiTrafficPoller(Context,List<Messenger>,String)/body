{
  mClients=clients;
  mInterface=iface;
  mTrafficHandler=new TrafficHandler();
  IntentFilter filter=new IntentFilter();
  filter.addAction(WifiManager.NETWORK_STATE_CHANGED_ACTION);
  filter.addAction(Intent.ACTION_SCREEN_OFF);
  filter.addAction(Intent.ACTION_SCREEN_ON);
  context.registerReceiver(new BroadcastReceiver(){
    @Override public void onReceive(    Context context,    Intent intent){
      if (intent.getAction().equals(WifiManager.NETWORK_STATE_CHANGED_ACTION)) {
        mNetworkInfo=(NetworkInfo)intent.getParcelableExtra(WifiManager.EXTRA_NETWORK_INFO);
      }
 else       if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
        mScreenOn.set(false);
      }
 else       if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
        mScreenOn.set(true);
      }
      evaluateTrafficStatsPolling();
    }
  }
,filter);
}
