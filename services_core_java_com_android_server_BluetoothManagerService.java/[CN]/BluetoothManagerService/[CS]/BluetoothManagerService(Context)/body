{
  mHandler=new BluetoothHandler(IoThread.get().getLooper());
  mContext=context;
  mBluetooth=null;
  mBinding=false;
  mUnbinding=false;
  mEnable=false;
  mState=BluetoothAdapter.STATE_OFF;
  mQuietEnableExternal=false;
  mEnableExternal=false;
  mAddress=null;
  mName=null;
  mErrorRecoveryRetryCounter=0;
  mContentResolver=context.getContentResolver();
  mCallbacks=new RemoteCallbackList<IBluetoothManagerCallback>();
  mStateChangeCallbacks=new RemoteCallbackList<IBluetoothStateChangeCallback>();
  IntentFilter filter=new IntentFilter(Intent.ACTION_BOOT_COMPLETED);
  filter.addAction(BluetoothAdapter.ACTION_LOCAL_NAME_CHANGED);
  filter.addAction(Intent.ACTION_USER_SWITCHED);
  registerForAirplaneMode(filter);
  filter.setPriority(IntentFilter.SYSTEM_HIGH_PRIORITY);
  mContext.registerReceiver(mReceiver,filter);
  loadStoredNameAndAddress();
  if (isBluetoothPersistedStateOn()) {
    mEnableExternal=true;
  }
}
