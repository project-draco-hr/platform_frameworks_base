{
  if (enable) {
    ClientDeathRecipient r=mBleApps.get(token);
    if (r == null) {
      ClientDeathRecipient deathRec=new ClientDeathRecipient();
      try {
        token.linkToDeath(deathRec,0);
      }
 catch (      RemoteException ex) {
        throw new IllegalArgumentException("Wake lock is already dead.");
      }
      mBleApps.put(token,deathRec);
synchronized (this) {
        ++mBleAppCount;
      }
      if (DBG)       Slog.d(TAG,"Registered for death Notification");
    }
  }
 else {
    ClientDeathRecipient r=mBleApps.get(token);
    if (r != null) {
      token.unlinkToDeath(r,0);
      mBleApps.remove(token);
synchronized (this) {
        if (mBleAppCount > 0)         --mBleAppCount;
      }
      if (DBG)       Slog.d(TAG,"Unregistered for death Notification");
    }
  }
  if (DBG)   Slog.d(TAG,"Updated BleAppCount" + mBleAppCount);
  if (mBleAppCount == 0 && mEnable) {
    disableBleScanMode();
  }
  return mBleAppCount;
}
