{
  mContext.enforceCallingOrSelfPermission(android.Manifest.permission.DUMP,TAG);
  writer.println("Bluetooth Status");
  writer.println("  enabled: " + mEnable);
  writer.println("  state: " + mState);
  writer.println("  address: " + mAddress);
  writer.println("  name: " + mName + "\n");
  writer.flush();
  if (mBluetooth == null) {
    writer.println("Bluetooth Service not connected");
  }
 else {
    ParcelFileDescriptor pfd=null;
    try {
      writer.println("Bonded devices:");
      for (      BluetoothDevice device : mBluetooth.getBondedDevices()) {
        writer.println("  " + device.getAddress() + " ["+ DEVICE_TYPE_NAMES[device.getType()]+ "] "+ device.getName());
      }
      writer.flush();
      pfd=ParcelFileDescriptor.dup(fd);
      mBluetooth.dump(pfd);
    }
 catch (    RemoteException re) {
      writer.println("RemoteException while calling Bluetooth Service");
    }
catch (    IOException ioe) {
      writer.println("IOException attempting to dup() fd");
    }
 finally {
      if (pfd != null) {
        try {
          pfd.close();
        }
 catch (        IOException ioe) {
          writer.println("IOException attempting to close() fd");
        }
      }
    }
  }
}
