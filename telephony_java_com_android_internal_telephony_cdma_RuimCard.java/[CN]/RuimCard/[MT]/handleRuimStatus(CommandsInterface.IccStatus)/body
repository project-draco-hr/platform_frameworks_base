{
  boolean transitionedIntoPinLocked;
  boolean transitionedIntoAbsent;
  boolean transitionedIntoNetworkLocked;
  RuimCard.State oldState, newState;
  oldState=getState();
  status=newStatus;
  newState=getState();
  updateStateProperty();
  transitionedIntoPinLocked=((oldState != State.PIN_REQUIRED && newState == State.PIN_REQUIRED) || (oldState != State.PUK_REQUIRED && newState == State.PUK_REQUIRED));
  transitionedIntoAbsent=(oldState != State.ABSENT && newState == State.ABSENT);
  transitionedIntoNetworkLocked=(oldState != State.NETWORK_LOCKED && newState == State.NETWORK_LOCKED);
  if (transitionedIntoPinLocked) {
    if (DBG)     log("Notify RUIM pin or puk locked.");
    pinLockedRegistrants.notifyRegistrants();
    broadcastRuimStateChangedIntent(RuimCard.INTENT_VALUE_ICC_LOCKED,(newState == State.PIN_REQUIRED) ? INTENT_VALUE_LOCKED_ON_PIN : INTENT_VALUE_LOCKED_ON_PUK);
  }
 else   if (transitionedIntoAbsent) {
    if (DBG)     log("Notify RUIM missing.");
    absentRegistrants.notifyRegistrants();
    broadcastRuimStateChangedIntent(RuimCard.INTENT_VALUE_ICC_ABSENT,null);
  }
 else   if (transitionedIntoNetworkLocked) {
    if (DBG)     log("Notify RUIM network locked.");
    networkLockedRegistrants.notifyRegistrants();
    broadcastRuimStateChangedIntent(RuimCard.INTENT_VALUE_ICC_LOCKED,INTENT_VALUE_LOCKED_NETWORK);
  }
}
