{
  DimLayerState state=getOrCreateDimLayerState(dimLayerUser);
  state.dimAbove=aboveApp;
  if (DEBUG_DIM_LAYER)   Slog.v(TAG,"startDimmingIfNeeded," + " dimLayerUser=" + dimLayerUser.toShortString() + " newWinAnimator="+ newWinAnimator+ " state.animator="+ state.animator);
  if (newWinAnimator.getShown() && (state.animator == null || !state.animator.getShown() || state.animator.mAnimLayer <= newWinAnimator.mAnimLayer)) {
    state.animator=newWinAnimator;
    if (state.animator.mWin.mAppToken == null && !dimLayerUser.dimFullscreen()) {
      mDisplayContent.getLogicalDisplayRect(mTmpBounds);
    }
 else {
      dimLayerUser.getDimBounds(mTmpBounds);
    }
    state.dimLayer.setBounds(mTmpBounds);
  }
}
