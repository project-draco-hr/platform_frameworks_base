{
  mVisualProgress=progress;
  Drawable d=mCurrentDrawable;
  if (d instanceof LayerDrawable) {
    d=((LayerDrawable)d).findDrawableByLayerId(id);
    if (d == null) {
      d=mCurrentDrawable;
    }
  }
  if (d != null) {
    final int level=(int)(progress * MAX_LEVEL);
    d.setLevel(level);
  }
 else {
    invalidate();
  }
  onVisualProgressChanged(id,progress);
}
