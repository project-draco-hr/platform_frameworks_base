{
synchronized (mProfiles) {
    boolean hadProfile=mProfiles.size() > 0;
    int user=ActivityManager.getCurrentUser();
    mProfiles.clear();
    for (    UserInfo ui : mUserManager.getEnabledProfiles(user)) {
      if (ui.isManagedProfile()) {
        mProfiles.add(ui);
      }
    }
    if (mProfiles.size() == 0 && hadProfile && (user == mCurrentUser)) {
      for (      Callback callback : mCallbacks) {
        callback.onManagedProfileRemoved();
      }
    }
    mCurrentUser=user;
  }
}
