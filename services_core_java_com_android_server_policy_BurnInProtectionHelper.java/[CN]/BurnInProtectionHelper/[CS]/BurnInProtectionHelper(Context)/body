{
  final Resources resources=context.getResources();
  mMinHorizontalBurnInOffset=resources.getInteger(com.android.internal.R.integer.config_burnInProtectionMinHorizontalOffset);
  mMaxHorizontalBurnInOffset=resources.getInteger(com.android.internal.R.integer.config_burnInProtectionMaxHorizontalOffset);
  mMinVerticalBurnInOffset=resources.getInteger(com.android.internal.R.integer.config_burnInProtectionMinVerticalOffset);
  mMaxVerticalBurnInOffset=resources.getInteger(com.android.internal.R.integer.config_burnInProtectionMaxVerticalOffset);
  int burnInRadiusMax=resources.getInteger(com.android.internal.R.integer.config_burnInProtectionMaxRadius);
  if (burnInRadiusMax != BURN_IN_RADIUS_MAX_DEFAULT) {
    mBurnInRadiusMaxSquared=burnInRadiusMax * burnInRadiusMax;
  }
 else {
    mBurnInRadiusMaxSquared=BURN_IN_RADIUS_MAX_DEFAULT;
  }
  mDisplayManagerInternal=LocalServices.getService(DisplayManagerInternal.class);
  mAlarmManager=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
  context.registerReceiver(mBurnInProtectionReceiver,new IntentFilter(ACTION_BURN_IN_PROTECTION));
  Intent intent=new Intent(ACTION_BURN_IN_PROTECTION);
  intent.setPackage(context.getPackageName());
  intent.setFlags(Intent.FLAG_RECEIVER_REGISTERED_ONLY);
  mBurnInProtectionIntent=PendingIntent.getBroadcast(context,0,intent,PendingIntent.FLAG_UPDATE_CURRENT);
  DisplayManager displayManager=(DisplayManager)context.getSystemService(Context.DISPLAY_SERVICE);
  mDisplay=displayManager.getDisplay(Display.DEFAULT_DISPLAY);
  displayManager.registerDisplayListener(this,null);
}
