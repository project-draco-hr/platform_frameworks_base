{
  final int N=allAppWindows.size();
  final int adj=animLayerAdjustment;
  thumbnailLayer=-1;
  for (int i=0; i < N; i++) {
    WindowState w=allAppWindows.get(i);
    w.mAnimLayer=w.mLayer + adj;
    if (w.mAnimLayer > thumbnailLayer) {
      thumbnailLayer=w.mAnimLayer;
    }
    if (WindowManagerService.DEBUG_LAYERS)     Slog.v(WindowManagerService.TAG,"Updating layer " + w + ": "+ w.mAnimLayer);
    if (w == service.mInputMethodTarget && !service.mInputMethodTargetWaitingAnim) {
      service.setInputMethodAnimLayerAdjustment(adj);
    }
    if (w == service.mWallpaperTarget && service.mLowerWallpaperTarget == null) {
      service.setWallpaperAnimLayerAdjustmentLocked(adj);
    }
  }
}
