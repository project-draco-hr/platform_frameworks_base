{
  if (files.length == 0) {
    return;
  }
  for (  String f : files) {
    if (f.charAt(0) != '/') {
      throw new RuntimeException("files must have all absolute paths: " + f);
    }
  }
  if (files.length != keys.length) {
    throw new RuntimeException("files.length=" + files.length + " keys.length="+ keys.length);
  }
  FileDescriptor oldStateFd=oldState != null ? oldState.getFileDescriptor() : null;
  FileDescriptor newStateFd=newState.getFileDescriptor();
  if (newStateFd == null) {
    throw new NullPointerException();
  }
  int err=performBackup_native(oldStateFd,data.mBackupWriter,newStateFd,files,keys);
  if (err != 0) {
    throw new RuntimeException("Backup failed 0x" + Integer.toHexString(err));
  }
}
