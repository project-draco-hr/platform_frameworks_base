{
  String selectedService=null;
  List<ResolveInfo> availableRecognitionServices=mContext.getPackageManager().queryIntentServices(new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH),0);
  int numAvailable=availableRecognitionServices.size();
  if (numAvailable == 0) {
    Log.w(TAG,"no available voice recognition services found");
  }
 else {
    if (numAvailable > 1) {
      Log.w(TAG,"more than one voice recognition service found, picking first");
    }
    ServiceInfo serviceInfo=availableRecognitionServices.get(0).serviceInfo;
    selectedService=new ComponentName(serviceInfo.packageName,serviceInfo.name).flattenToString();
  }
  loadSetting(stmt,Settings.Secure.VOICE_RECOGNITION_SERVICE,selectedService == null ? "" : selectedService);
}
