{
  RemoteViews big=applyStandardTemplate(layoutId,hasProgress,title,text);
  resetStandardTemplateWithActions(big);
  boolean validRemoteInput=false;
  int N=mActions.size();
  if (N > 0) {
    big.setViewVisibility(R.id.actions_container,View.VISIBLE);
    big.setViewVisibility(R.id.actions,View.VISIBLE);
    if (N > MAX_ACTION_BUTTONS)     N=MAX_ACTION_BUTTONS;
    for (int i=0; i < N; i++) {
      Action action=mActions.get(i);
      validRemoteInput|=hasValidRemoteInput(action);
      final RemoteViews button=generateActionButton(action);
      if (i == N - 1) {
        button.setViewLayoutWidth(com.android.internal.R.id.action0,ViewGroup.LayoutParams.MATCH_PARENT);
      }
      big.addView(R.id.actions,button);
    }
  }
  CharSequence[] replyText=mN.extras.getCharSequenceArray(EXTRA_REMOTE_INPUT_HISTORY);
  if (validRemoteInput && replyText != null && replyText.length > 0 && !TextUtils.isEmpty(replyText[0])) {
    big.setViewVisibility(R.id.notification_material_reply_container,View.VISIBLE);
    big.setTextViewText(R.id.notification_material_reply_text_1,replyText[0]);
    if (replyText.length > 1 && !TextUtils.isEmpty(replyText[1])) {
      big.setViewVisibility(R.id.notification_material_reply_text_2,View.VISIBLE);
      big.setTextViewText(R.id.notification_material_reply_text_2,replyText[1]);
      if (replyText.length > 2 && !TextUtils.isEmpty(replyText[2])) {
        big.setViewVisibility(R.id.notification_material_reply_text_3,View.VISIBLE);
        big.setTextViewText(R.id.notification_material_reply_text_3,replyText[2]);
      }
    }
  }
  return big;
}
