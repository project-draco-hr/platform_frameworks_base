{
  RemoteViews view=mBuilder.applyStandardTemplate(R.layout.notification_template_material_media,false);
  final int numActions=mBuilder.mActions.size();
  final int N=mActionsToShowInCompact == null ? 0 : Math.min(mActionsToShowInCompact.length,MAX_MEDIA_BUTTONS_IN_COMPACT);
  if (N > 0) {
    view.removeAllViews(com.android.internal.R.id.media_actions);
    for (int i=0; i < N; i++) {
      if (i >= numActions) {
        throw new IllegalArgumentException(String.format("setShowActionsInCompactView: action %d out of bounds (max %d)",i,numActions - 1));
      }
      final Action action=mBuilder.mActions.get(mActionsToShowInCompact[i]);
      final RemoteViews button=generateMediaActionButton(action,mBuilder.resolveColor());
      view.addView(com.android.internal.R.id.media_actions,button);
    }
  }
  handleImage(view);
  int endMargin;
  if (mBuilder.mN.mLargeIcon != null) {
    endMargin=mBuilder.mContext.getResources().getDimensionPixelSize(R.dimen.notification_content_picture_margin_media);
  }
 else {
    endMargin=mBuilder.mContext.getResources().getDimensionPixelSize(R.dimen.notification_content_margin_end);
  }
  view.setViewLayoutMarginEnd(R.id.notification_main_column,endMargin);
  return view;
}
