{
  BidiFormatter bidi=BidiFormatter.getInstance();
  SpannableStringBuilder sb=new SpannableStringBuilder();
  if (TextUtils.isEmpty(m.mSender)) {
    CharSequence replyName=mUserDisplayName == null ? "" : mUserDisplayName;
    sb.append(bidi.unicodeWrap(replyName),makeFontColorSpan(mBuilder.resolveContrastColor()),0);
  }
 else {
    sb.append(bidi.unicodeWrap(m.mSender),makeFontColorSpan(Color.BLACK),0);
  }
  CharSequence text=m.mText == null ? "" : m.mText;
  sb.append("  ").append(bidi.unicodeWrap(text));
  return sb;
}
