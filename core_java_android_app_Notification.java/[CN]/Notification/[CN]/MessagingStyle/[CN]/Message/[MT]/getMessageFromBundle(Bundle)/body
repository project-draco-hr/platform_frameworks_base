{
  try {
    if (!bundle.containsKey(KEY_TEXT) || !bundle.containsKey(KEY_TIMESTAMP)) {
      return null;
    }
 else {
      Message message=new Message(bundle.getCharSequence(KEY_TEXT),bundle.getLong(KEY_TIMESTAMP),bundle.getCharSequence(KEY_SENDER));
      if (bundle.containsKey(KEY_DATA_MIME_TYPE) && bundle.containsKey(KEY_DATA_URI)) {
        message.setData(bundle.getString(KEY_DATA_MIME_TYPE),(Uri)bundle.getParcelable(KEY_DATA_URI));
      }
      return message;
    }
  }
 catch (  ClassCastException e) {
    return null;
  }
}
