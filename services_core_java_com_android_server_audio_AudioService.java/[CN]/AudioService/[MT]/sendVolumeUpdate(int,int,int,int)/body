{
  if (!isPlatformVoice() && (streamType == AudioSystem.STREAM_RING)) {
    streamType=AudioSystem.STREAM_NOTIFICATION;
  }
  if (streamType == AudioSystem.STREAM_MUSIC) {
    flags=updateFlagsForSystemAudio(flags);
  }
  mVolumeController.postVolumeChanged(streamType,flags);
  if ((flags & AudioManager.FLAG_FIXED_VOLUME) == 0) {
    oldIndex=(oldIndex + 5) / 10;
    index=(index + 5) / 10;
    Intent intent=new Intent(AudioManager.VOLUME_CHANGED_ACTION);
    intent.putExtra(AudioManager.EXTRA_VOLUME_STREAM_TYPE,streamType);
    intent.putExtra(AudioManager.EXTRA_VOLUME_STREAM_VALUE,index);
    intent.putExtra(AudioManager.EXTRA_PREV_VOLUME_STREAM_VALUE,oldIndex);
    sendBroadcastToAll(intent);
  }
}
