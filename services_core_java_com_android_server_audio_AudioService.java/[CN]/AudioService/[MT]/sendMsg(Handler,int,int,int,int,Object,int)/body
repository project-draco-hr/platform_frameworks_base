{
  if (existingMsgPolicy == SENDMSG_REPLACE) {
    handler.removeMessages(msg);
  }
 else   if (existingMsgPolicy == SENDMSG_NOOP && handler.hasMessages(msg)) {
    return;
  }
synchronized (mLastDeviceConnectMsgTime) {
    long time=SystemClock.uptimeMillis() + delay;
    handler.sendMessageAtTime(handler.obtainMessage(msg,arg1,arg2,obj),time);
    if (msg == MSG_SET_WIRED_DEVICE_CONNECTION_STATE || msg == MSG_SET_A2DP_SRC_CONNECTION_STATE || msg == MSG_SET_A2DP_SINK_CONNECTION_STATE) {
      mLastDeviceConnectMsgTime=time;
    }
  }
}
