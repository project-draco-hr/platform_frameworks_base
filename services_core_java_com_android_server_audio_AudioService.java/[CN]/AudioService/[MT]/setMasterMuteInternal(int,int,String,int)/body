{
  if (mAppOps.noteOp(AppOpsManager.OP_AUDIO_MASTER_VOLUME,uid,callingPackage) != AppOpsManager.MODE_ALLOWED) {
    return;
  }
  boolean state;
  if (adjust == AudioManager.ADJUST_TOGGLE_MUTE) {
    state=!AudioSystem.getMasterMute();
  }
 else {
    state=adjust == AudioManager.ADJUST_MUTE;
  }
  if (state != AudioSystem.getMasterMute()) {
    setSystemAudioMute(state);
    AudioSystem.setMasterMute(state);
    sendMsg(mAudioHandler,MSG_PERSIST_MASTER_VOLUME_MUTE,SENDMSG_REPLACE,state ? 1 : 0,UserHandle.getCallingUserId(),null,PERSIST_DELAY);
    sendMasterMuteUpdate(state,flags);
    Intent intent=new Intent(AudioManager.MASTER_MUTE_CHANGED_ACTION);
    intent.putExtra(AudioManager.EXTRA_MASTER_VOLUME_MUTED,state);
    sendBroadcastToAll(intent);
  }
}
