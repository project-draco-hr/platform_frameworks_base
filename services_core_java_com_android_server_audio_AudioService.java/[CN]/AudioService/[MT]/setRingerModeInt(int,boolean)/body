{
  final boolean change;
synchronized (mSettingsLock) {
    change=mRingerMode != ringerMode;
    mRingerMode=ringerMode;
  }
  muteRingerModeStreams();
  if (persist) {
    sendMsg(mAudioHandler,MSG_PERSIST_RINGER_MODE,SENDMSG_REPLACE,0,0,null,PERSIST_DELAY);
  }
  if (change) {
    broadcastRingerMode(AudioManager.INTERNAL_RINGER_MODE_CHANGED_ACTION,ringerMode);
  }
}
