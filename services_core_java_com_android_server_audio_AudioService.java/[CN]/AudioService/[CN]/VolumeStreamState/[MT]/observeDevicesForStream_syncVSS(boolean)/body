{
  final int devices=AudioSystem.getDevicesForStream(mStreamType);
  if (devices == mObservedDevices) {
    return devices;
  }
  final int prevDevices=mObservedDevices;
  mObservedDevices=devices;
  if (checkOthers) {
    observeDevicesForStreams(mStreamType);
  }
  if (mStreamVolumeAlias[mStreamType] == mStreamType) {
    EventLogTags.writeStreamDevicesChanged(mStreamType,prevDevices,devices);
  }
  sendBroadcastToAll(mStreamDevicesChanged.putExtra(AudioManager.EXTRA_PREV_VOLUME_STREAM_DEVICES,prevDevices).putExtra(AudioManager.EXTRA_VOLUME_STREAM_DEVICES,devices));
  return devices;
}
