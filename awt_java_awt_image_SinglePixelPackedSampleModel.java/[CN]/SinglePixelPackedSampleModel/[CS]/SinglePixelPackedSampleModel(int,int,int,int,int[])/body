{
  super(dataType,w,h,bitMasks.length);
  if (dataType != DataBuffer.TYPE_BYTE && dataType != DataBuffer.TYPE_USHORT && dataType != DataBuffer.TYPE_INT) {
    throw new IllegalArgumentException(Messages.getString("awt.61",dataType));
  }
  this.scanlineStride=scanlineStride;
  this.bitMasks=bitMasks.clone();
  this.bitOffsets=new int[this.numBands];
  this.bitSizes=new int[this.numBands];
  this.maxBitSize=0;
  for (int i=0; i < this.numBands; i++) {
    int offset=0;
    int size=0;
    int mask=bitMasks[i];
    if (mask != 0) {
      while ((mask & 1) == 0) {
        mask>>>=1;
        offset++;
      }
      while ((mask & 1) == 1) {
        mask>>>=1;
        size++;
      }
      if (mask != 0) {
        throw new IllegalArgumentException(Messages.getString("awt.62",bitMasks[i]));
      }
    }
    this.bitOffsets[i]=offset;
    this.bitSizes[i]=size;
    if (this.maxBitSize < size) {
      this.maxBitSize=size;
    }
  }
}
