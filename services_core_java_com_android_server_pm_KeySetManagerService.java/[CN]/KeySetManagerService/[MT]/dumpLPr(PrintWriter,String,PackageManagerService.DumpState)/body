{
  boolean printedHeader=false;
  for (  Map.Entry<String,PackageSetting> e : mPackages.entrySet()) {
    String keySetPackage=e.getKey();
    if (packageName != null && !packageName.equals(keySetPackage)) {
      continue;
    }
    if (!printedHeader) {
      if (dumpState.onTitlePrinted())       pw.println();
      pw.println("Key Set Manager:");
      printedHeader=true;
    }
    PackageSetting pkg=e.getValue();
    pw.print("  [");
    pw.print(keySetPackage);
    pw.println("]");
    if (pkg.keySetData != null) {
      boolean printedLabel=false;
      for (      Map.Entry<String,Long> entry : pkg.keySetData.getAliases().entrySet()) {
        if (!printedLabel) {
          pw.print("      KeySets Aliases: ");
          printedLabel=true;
        }
 else {
          pw.print(", ");
        }
        pw.print(entry.getKey());
        pw.print('=');
        pw.print(Long.toString(entry.getValue()));
      }
      if (printedLabel) {
        pw.println("");
      }
      printedLabel=false;
      if (pkg.keySetData.isUsingDefinedKeySets()) {
        for (        long keySetId : pkg.keySetData.getDefinedKeySets()) {
          if (!printedLabel) {
            pw.print("      Defined KeySets: ");
            printedLabel=true;
          }
 else {
            pw.print(", ");
          }
          pw.print(Long.toString(keySetId));
        }
      }
      if (printedLabel) {
        pw.println("");
      }
      printedLabel=false;
      final long[] signingKeySets=pkg.keySetData.getSigningKeySets();
      if (signingKeySets != null) {
        for (        long keySetId : signingKeySets) {
          if (!printedLabel) {
            pw.print("      Signing KeySets: ");
            printedLabel=true;
          }
 else {
            pw.print(", ");
          }
          pw.print(Long.toString(keySetId));
        }
      }
      if (printedLabel) {
        pw.println("");
      }
      printedLabel=false;
      if (pkg.keySetData.isUsingUpgradeKeySets()) {
        for (        long keySetId : pkg.keySetData.getUpgradeKeySets()) {
          if (!printedLabel) {
            pw.print("      Upgrade KeySets: ");
            printedLabel=true;
          }
 else {
            pw.print(", ");
          }
          pw.print(Long.toString(keySetId));
        }
      }
      if (printedLabel) {
        pw.println("");
      }
    }
  }
}
