{
  mode.getMenuInflater().inflate(com.android.internal.R.menu.webview_copy,menu);
  final Context context=mWebView.getContext();
  boolean allowText=context.getResources().getBoolean(com.android.internal.R.bool.config_allowActionMenuItemTextWithIcon);
  mode.setTitle(allowText ? context.getString(com.android.internal.R.string.textSelectionCABTitle) : null);
  ClipboardManager cm=(ClipboardManager)(context.getSystemService(Context.CLIPBOARD_SERVICE));
  boolean isFocusable=mode.isUiFocusable();
  boolean isEditable=mWebView.focusCandidateIsEditableText();
  boolean canPaste=isEditable && cm.hasPrimaryClip() && isFocusable;
  boolean canFind=!isEditable && isFocusable;
  boolean canCut=isEditable && mIsTextSelected && isFocusable;
  boolean canCopy=mIsTextSelected;
  boolean canWebSearch=mIsTextSelected;
  setMenuVisibility(menu,canFind,com.android.internal.R.id.find);
  setMenuVisibility(menu,canPaste,com.android.internal.R.id.paste);
  setMenuVisibility(menu,canCut,com.android.internal.R.id.cut);
  setMenuVisibility(menu,canCopy,com.android.internal.R.id.copy);
  setMenuVisibility(menu,canWebSearch,com.android.internal.R.id.websearch);
  mActionMode=mode;
  return true;
}
