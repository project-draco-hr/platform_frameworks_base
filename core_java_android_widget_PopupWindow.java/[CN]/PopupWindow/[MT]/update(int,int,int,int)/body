{
  if (width != -1) {
    setWidth(width);
  }
  if (height != -1) {
    setHeight(height);
  }
  if (!isShowing() || mContentView == null) {
    return;
  }
  WindowManager.LayoutParams p=(WindowManager.LayoutParams)mPopupView.getLayoutParams();
  boolean update=false;
  if (width != -1 && p.width != width) {
    p.width=width;
    update=true;
  }
  if (height != -1 && p.height != height) {
    p.height=height;
    update=true;
  }
  if (p.x != x) {
    p.x=x;
    update=true;
  }
  if (p.y != y) {
    p.y=y;
    update=true;
  }
  if (update) {
    if (mPopupView != mContentView) {
      final View popupViewContainer=mPopupView;
      if (p.height >= 0) {
        p.height+=popupViewContainer.getPaddingTop() + popupViewContainer.getPaddingBottom();
      }
      if (p.width >= 0) {
        p.width+=popupViewContainer.getPaddingLeft() + popupViewContainer.getPaddingRight();
      }
    }
    WindowManagerImpl wm=WindowManagerImpl.getDefault();
    wm.updateViewLayout(mPopupView,p);
  }
}
