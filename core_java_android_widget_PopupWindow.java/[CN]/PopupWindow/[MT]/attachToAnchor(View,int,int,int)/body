{
  detachFromAnchor();
  final ViewTreeObserver vto=anchor.getViewTreeObserver();
  if (vto != null) {
    vto.addOnScrollChangedListener(mOnScrollChangedListener);
  }
  final View anchorRoot=anchor.getRootView();
  anchorRoot.addOnAttachStateChangeListener(mOnAnchorRootDetachedListener);
  mAnchor=new WeakReference<>(anchor);
  mAnchorRoot=new WeakReference<>(anchorRoot);
  mIsAnchorRootAttached=anchorRoot.isAttachedToWindow();
  mAnchorXoff=xoff;
  mAnchorYoff=yoff;
  mAnchoredGravity=gravity;
}
