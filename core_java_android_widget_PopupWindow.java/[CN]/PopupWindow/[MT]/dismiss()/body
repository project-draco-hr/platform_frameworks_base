{
  if (isShowing() && mDecorView != null) {
    mIsShowing=false;
    unregisterForScrollChanged();
    if (mExitTransition != null) {
      mExitTransition.addTarget(mBackgroundView);
      mExitTransition.addListener(new Transition.TransitionListenerAdapter(){
        @Override public void onTransitionEnd(        Transition transition){
          transition.removeListener(this);
          transition.removeTarget(mBackgroundView);
          dismissImmediate();
        }
      }
);
      TransitionManager.beginDelayedTransition(mDecorView,mExitTransition);
      mBackgroundView.setVisibility(View.INVISIBLE);
    }
 else {
      dismissImmediate();
    }
  }
}
