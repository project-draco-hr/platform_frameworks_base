{
  if (!isShowing()) {
    return;
  }
  unregisterForScrollChanged();
  mIsShowing=false;
  if (mExitTransition != null) {
    final View contentView=mContentView;
    mExitTransition.addTarget(mBackgroundView);
    mExitTransition.addListener(new Transition.TransitionListenerAdapter(){
      @Override public void onTransitionEnd(      Transition transition){
        transition.removeListener(this);
        transition.removeTarget(mBackgroundView);
        dismissImmediate(contentView);
      }
    }
);
    TransitionManager.beginDelayedTransition(mDecorView,mExitTransition);
    mBackgroundView.setVisibility(View.INVISIBLE);
  }
 else {
    dismissImmediate(mContentView);
  }
  if (mOnDismissListener != null) {
    mOnDismissListener.onDismiss();
  }
}
