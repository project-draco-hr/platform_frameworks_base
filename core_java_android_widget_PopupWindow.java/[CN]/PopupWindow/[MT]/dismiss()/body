{
  if (!isShowing() || mIsTransitioningToDismiss) {
    return;
  }
  final PopupDecorView decorView=mDecorView;
  final View contentView=mContentView;
  final ViewGroup contentHolder;
  final ViewParent contentParent=contentView.getParent();
  if (contentParent instanceof ViewGroup) {
    contentHolder=((ViewGroup)contentParent);
  }
 else {
    contentHolder=null;
  }
  decorView.cancelTransitions();
  unregisterForScrollChanged();
  mIsShowing=false;
  mIsTransitioningToDismiss=true;
  if (mExitTransition != null && decorView.isLaidOut()) {
    decorView.startExitTransition(mExitTransition,new TransitionListenerAdapter(){
      @Override public void onTransitionEnd(      Transition transition){
        dismissImmediate(decorView,contentHolder,contentView);
      }
    }
);
  }
 else {
    dismissImmediate(decorView,contentHolder,contentView);
  }
  if (mOnDismissListener != null) {
    mOnDismissListener.onDismiss();
  }
}
