{
  if (isShowing() && mPopupView != null) {
    unregisterForScrollChanged();
    try {
      mWindowManager.removeView(mPopupView);
    }
  finally {
      if (mPopupView != mContentView && mPopupView instanceof ViewGroup) {
        ((ViewGroup)mPopupView).removeView(mContentView);
      }
      mPopupView=null;
      mIsShowing=false;
      if (mOnDismissListener != null) {
        mOnDismissListener.onDismiss();
      }
    }
  }
}
