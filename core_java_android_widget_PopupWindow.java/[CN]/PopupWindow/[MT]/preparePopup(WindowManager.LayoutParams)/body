{
  if (mContentView == null || mContext == null || mWindowManager == null) {
    throw new IllegalStateException("You must specify a valid content view by " + "calling setContentView() before attempting to show the popup.");
  }
  if (mBackground != null) {
    final ViewGroup.LayoutParams layoutParams=mContentView.getLayoutParams();
    int height=ViewGroup.LayoutParams.FILL_PARENT;
    if (layoutParams != null && layoutParams.height == ViewGroup.LayoutParams.WRAP_CONTENT) {
      height=ViewGroup.LayoutParams.WRAP_CONTENT;
    }
    PopupViewContainer popupViewContainer=new PopupViewContainer(mContext);
    PopupViewContainer.LayoutParams listParams=new PopupViewContainer.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT,height);
    popupViewContainer.setBackgroundDrawable(mBackground);
    popupViewContainer.addView(mContentView,listParams);
    mPopupView=popupViewContainer;
  }
 else {
    mPopupView=mContentView;
  }
  mPopupWidth=p.width;
  mPopupHeight=p.height;
}
