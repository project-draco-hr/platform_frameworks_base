{
  final Context context=getContext();
switch (mMatcher.match(uri)) {
case MATCH_DOCUMENT_VIA:
    enforceVia(uri);
  final Uri narrowUri=DocumentsContract.buildDocumentUri(uri.getAuthority(),DocumentsContract.getDocumentId(uri));
int modeFlags=Intent.FLAG_GRANT_READ_URI_PERMISSION;
if (context.checkCallingOrSelfUriPermission(uri,Intent.FLAG_GRANT_WRITE_URI_PERMISSION) == PackageManager.PERMISSION_GRANTED) {
modeFlags|=Intent.FLAG_GRANT_WRITE_URI_PERMISSION;
}
if (context.checkCallingOrSelfUriPermission(uri,Intent.FLAG_GRANT_READ_URI_PERMISSION | Intent.FLAG_GRANT_PERSISTABLE_URI_PERMISSION) == PackageManager.PERMISSION_GRANTED) {
modeFlags|=Intent.FLAG_GRANT_PERSISTABLE_URI_PERMISSION;
}
context.grantUriPermission(getCallingPackage(),narrowUri,modeFlags);
return narrowUri;
}
return null;
}
