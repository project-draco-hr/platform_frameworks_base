{
  if (mBackgroundWidth <= 0 || mBackgroundHeight <= 0) {
    mWallpaperManager.forgetLoadedWallpaper();
    updateWallpaperLocked();
    if (mBackgroundWidth <= 0 || mBackgroundHeight <= 0) {
      mBackgroundWidth=displayInfo.logicalWidth;
      mBackgroundHeight=displayInfo.logicalHeight;
    }
  }
  int surfaceWidth=Math.max(displayInfo.logicalWidth,mBackgroundWidth);
  int surfaceHeight=Math.max(displayInfo.logicalHeight,mBackgroundHeight);
  if (FIXED_SIZED_SURFACE) {
    surfaceHolder.setFixedSize(surfaceWidth,surfaceHeight);
    mLastRequestedWidth=surfaceWidth;
    mLastRequestedHeight=surfaceHeight;
  }
 else {
    surfaceHolder.setSizeFromLayout();
  }
}
