{
  if (DBG) {
    Log.d(TAG,"unbindAndFinish(): " + (mBluetooth == null ? "null" : mBluetooth) + " mBinding = "+ mBinding+ " isConnected = "+ isConnected());
  }
synchronized (mConnection) {
    if (mUnbinding)     return;
    mUnbinding=true;
    if (isConnected()) {
      if (!mConnection.isGetNameAddressOnly()) {
        try {
          mBluetooth.unregisterCallback(mBluetoothCallback);
        }
 catch (        RemoteException re) {
          Log.e(TAG,"Unable to register BluetoothCallback",re);
        }
      }
      if (DBG)       Log.d(TAG,"Sending unbind request.");
      mBluetooth=null;
      mContext.unbindService(mConnection);
      mUnbinding=false;
    }
 else {
      mUnbinding=false;
    }
  }
}
