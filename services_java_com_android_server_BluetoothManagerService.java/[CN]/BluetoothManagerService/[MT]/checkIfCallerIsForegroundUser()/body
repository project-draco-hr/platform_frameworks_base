{
  int foregroundUser;
  int callingUser=UserHandle.getCallingUserId();
  long callingIdentity=Binder.clearCallingIdentity();
  boolean valid=false;
  try {
    foregroundUser=ActivityManager.getCurrentUser();
    valid=(callingUser == foregroundUser);
    if (DBG) {
      Log.d(TAG,"checkIfCallerIsForegroundUser: valid=" + valid + " callingUser="+ callingUser+ " foregroundUser="+ foregroundUser);
    }
  }
  finally {
    Binder.restoreCallingIdentity(callingIdentity);
  }
  return valid;
}
