{
  mThread=new HandlerThread("BluetoothManager");
  mThread.start();
  mHandler=new BluetoothHandler(mThread.getLooper());
  mContext=context;
  mBluetooth=null;
  mBinding=false;
  mUnbinding=false;
  mEnable=false;
  mState=BluetoothAdapter.STATE_OFF;
  mAddress=null;
  mName=null;
  mContentResolver=context.getContentResolver();
  mCallbacks=new RemoteCallbackList<IBluetoothManagerCallback>();
  mStateChangeCallbacks=new RemoteCallbackList<IBluetoothStateChangeCallback>();
  IntentFilter filter=new IntentFilter(BluetoothAdapter.ACTION_STATE_CHANGED);
  filter.addAction(BluetoothAdapter.ACTION_LOCAL_NAME_CHANGED);
  filter.addAction(Intent.ACTION_USER_SWITCHED);
  registerForAirplaneMode(filter);
  mContext.registerReceiver(mReceiver,filter);
  boolean airplaneModeOn=isAirplaneModeOn();
  boolean bluetoothOn=isBluetoothPersistedStateOn();
  loadStoredNameAndAddress();
  if (DBG)   Log.d(TAG,"airplaneModeOn: " + airplaneModeOn + " bluetoothOn: "+ bluetoothOn);
  if (bluetoothOn) {
    if (DBG)     Log.d(TAG,"Auto-enabling Bluetooth.");
    enableHelper();
  }
 else   if (!isNameAndAddressSet()) {
    if (DBG)     Log.d(TAG,"Retrieving Bluetooth Adapter name and address...");
    getNameAndAddress();
  }
}
