{
synchronized (mLock) {
    mActive.remove(buffer);
    Log.d("GraphicsStats","Buffer count: " + mActive.size());
  }
  HistoricalData data=buffer.mPreviousData;
  buffer.mPreviousData=null;
  if (data == null) {
    data=mHistoricalLog[mNextHistoricalSlot];
    if (data == null) {
      data=new HistoricalData();
    }
  }
  data.update(buffer.mPackageName,buffer.mUid,buffer.mProcessBuffer);
  buffer.closeAllBuffers();
  mHistoricalLog[mNextHistoricalSlot]=data;
  mNextHistoricalSlot=(mNextHistoricalSlot + 1) % mHistoricalLog.length;
}
