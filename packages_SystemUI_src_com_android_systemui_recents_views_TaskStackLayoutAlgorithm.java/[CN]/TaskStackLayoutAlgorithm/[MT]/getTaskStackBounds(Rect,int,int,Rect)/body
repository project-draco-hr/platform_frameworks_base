{
  taskStackBounds.set(windowRect.left,windowRect.top + topInset,windowRect.right - rightInset,windowRect.bottom);
  SystemServicesProxy ssp=Recents.getSystemServices();
  Rect displayRect=ssp.getDisplayRect();
  int sideMargin=getScaleForExtent(windowRect,displayRect,mBaseSideMargin,mMinMargin,WIDTH);
  int targetStackWidth=taskStackBounds.width() - 2 * sideMargin;
  if (Utilities.getAppConfiguration(mContext).orientation == Configuration.ORIENTATION_LANDSCAPE) {
    Rect portraitDisplayRect=new Rect(0,0,Math.min(displayRect.width(),displayRect.height()),Math.max(displayRect.width(),displayRect.height()));
    int portraitSideMargin=getScaleForExtent(portraitDisplayRect,portraitDisplayRect,mBaseSideMargin,mMinMargin,WIDTH);
    targetStackWidth=Math.min(targetStackWidth,portraitDisplayRect.width() - 2 * portraitSideMargin);
  }
  taskStackBounds.inset((taskStackBounds.width() - targetStackWidth) / 2,0);
}
