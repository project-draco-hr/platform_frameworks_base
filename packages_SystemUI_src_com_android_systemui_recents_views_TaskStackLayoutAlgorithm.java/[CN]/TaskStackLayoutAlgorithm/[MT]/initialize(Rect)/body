{
  SystemServicesProxy ssp=Recents.getSystemServices();
  RecentsConfiguration config=Recents.getConfiguration();
  int widthPadding=(int)(config.taskStackWidthPaddingPct * taskStackBounds.width());
  int heightPadding=mContext.getResources().getDimensionPixelSize(R.dimen.recents_stack_top_padding);
  mStackBottomOffset=mSystemInsets.bottom + heightPadding;
  int ffHeight=(taskStackBounds.height() - 2 * heightPadding - mStackBottomOffset) / 2;
  mFreeformRect.set(taskStackBounds.left + widthPadding,taskStackBounds.top + heightPadding,taskStackBounds.right - widthPadding,taskStackBounds.top + heightPadding + ffHeight);
  mFreeformStackRect.set(taskStackBounds.left + widthPadding,taskStackBounds.top + heightPadding + ffHeight+ heightPadding,taskStackBounds.right - widthPadding,taskStackBounds.bottom);
  mStackRect.set(taskStackBounds.left + widthPadding,taskStackBounds.top + heightPadding,taskStackBounds.right - widthPadding,taskStackBounds.bottom);
  int size=mStackRect.width();
  mTaskRect.set(mStackRect.left,mStackRect.top,mStackRect.left + size,mStackRect.top + size);
  mCurrentStackRect=ssp.hasFreeformWorkspaceSupport() ? mFreeformStackRect : mStackRect;
  int withinAffiliationOffset=mContext.getResources().getDimensionPixelSize(R.dimen.recents_task_bar_height);
  int betweenAffiliationOffset=(int)(VISIBLE_TASK_HEIGHT_BETWEEN_TASKS * mTaskRect.height());
  mWithinAffiliationPOffset=sCurve.computePOffsetForScaledHeight(withinAffiliationOffset,mCurrentStackRect);
  mBetweenAffiliationPOffset=sCurve.computePOffsetForScaledHeight(betweenAffiliationOffset,mCurrentStackRect);
  mTaskHeightPOffset=sCurve.computePOffsetForScaledHeight(mTaskRect.height(),mCurrentStackRect);
  mTaskHalfHeightPOffset=sCurve.computePOffsetForScaledHeight(mTaskRect.height() / 2,mCurrentStackRect);
  mStackBottomPOffset=sCurve.computePOffsetForHeight(mStackBottomOffset,mCurrentStackRect);
  if (DEBUG) {
    Log.d(TAG,"initialize");
    Log.d(TAG,"\tarclength: " + sCurve.getArcLength());
    Log.d(TAG,"\tmFreeformRect: " + mFreeformRect);
    Log.d(TAG,"\tmFreeformStackRect: " + mFreeformStackRect);
    Log.d(TAG,"\tmStackRect: " + mStackRect);
    Log.d(TAG,"\tmTaskRect: " + mTaskRect);
    Log.d(TAG,"\tmSystemInsets: " + mSystemInsets);
    Log.d(TAG,"\tpWithinAffiliateOffset: " + mWithinAffiliationPOffset);
    Log.d(TAG,"\tpBetweenAffiliateOffset: " + mBetweenAffiliationPOffset);
    Log.d(TAG,"\tmTaskHeightPOffset: " + mTaskHeightPOffset);
    Log.d(TAG,"\tmTaskHalfHeightPOffset: " + mTaskHalfHeightPOffset);
    Log.d(TAG,"\tmStackBottomPOffset: " + mStackBottomPOffset);
    Log.d(TAG,"\ty at p=0: " + sCurve.pToX(0f,mCurrentStackRect));
    Log.d(TAG,"\ty at p=1: " + sCurve.pToX(1f,mCurrentStackRect));
  }
}
