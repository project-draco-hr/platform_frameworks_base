{
  SystemServicesProxy ssp=Recents.getSystemServices();
  RecentsConfiguration config=Recents.getConfiguration();
  int widthPadding=(int)(config.taskStackWidthPaddingPct * taskStackBounds.width());
  int heightPadding=mContext.getResources().getDimensionPixelSize(R.dimen.recents_stack_top_padding);
  Rect lastStackRect=new Rect(mCurrentStackRect);
  mStackBottomOffset=mSystemInsets.bottom + heightPadding;
  int ffHeight=(taskStackBounds.height() - 2 * heightPadding - mStackBottomOffset) / 2;
  mFreeformRect.set(taskStackBounds.left + widthPadding,taskStackBounds.top + heightPadding,taskStackBounds.right - widthPadding,taskStackBounds.top + heightPadding + ffHeight);
  mFreeformStackRect.set(taskStackBounds.left + widthPadding,taskStackBounds.top + heightPadding + ffHeight+ heightPadding,taskStackBounds.right - widthPadding,taskStackBounds.bottom);
  mStackRect.set(taskStackBounds.left + widthPadding,taskStackBounds.top + heightPadding,taskStackBounds.right - widthPadding,taskStackBounds.bottom);
  int size=mStackRect.width();
  mTaskRect.set(mStackRect.left,mStackRect.top,mStackRect.left + size,mStackRect.top + size);
  mCurrentStackRect=ssp.hasFreeformWorkspaceSupport() ? mFreeformStackRect : mStackRect;
  if (lastStackRect.equals(mCurrentStackRect)) {
    return;
  }
  mUnfocusedCurve=constructUnfocusedCurve();
  mUnfocusedCurveInterpolator=new FreePathInterpolator(mUnfocusedCurve);
  mFocusedCurve=constructFocusedCurve();
  mFocusedCurveInterpolator=new FreePathInterpolator(mFocusedCurve);
  if (DEBUG) {
    Log.d(TAG,"initialize");
    Log.d(TAG,"\tmFreeformRect: " + mFreeformRect);
    Log.d(TAG,"\tmFreeformStackRect: " + mFreeformStackRect);
    Log.d(TAG,"\tmStackRect: " + mStackRect);
    Log.d(TAG,"\tmTaskRect: " + mTaskRect);
    Log.d(TAG,"\tmSystemInsets: " + mSystemInsets);
  }
}
