{
  new Thread("BlacklistUpdater"){
    public void run(){
synchronized (mTmpDir) {
        String blacklist=getValue();
        if (blacklist != null) {
          Slog.i(TAG,"Certificate blacklist changed, updating...");
          FileOutputStream out=null;
          try {
            File tmp=File.createTempFile("journal","",mTmpDir);
            tmp.setReadable(true,false);
            out=new FileOutputStream(tmp);
            out.write(blacklist.getBytes());
            FileUtils.sync(out);
            tmp.renameTo(new File(mPath));
            Slog.i(TAG,"Certificate blacklist updated");
          }
 catch (          IOException e) {
            Slog.e(TAG,"Failed to write blacklist",e);
          }
 finally {
            IoUtils.closeQuietly(out);
          }
        }
      }
    }
  }
.start();
}
