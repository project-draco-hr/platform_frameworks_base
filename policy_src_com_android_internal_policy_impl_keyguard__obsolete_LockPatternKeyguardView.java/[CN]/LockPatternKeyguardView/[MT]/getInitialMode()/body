{
  final IccCardConstants.State simState=mUpdateMonitor.getSimState();
  if (stuckOnLockScreenBecauseSimMissing() || (simState == IccCardConstants.State.PUK_REQUIRED && !mLockPatternUtils.isPukUnlockScreenEnable())) {
    return Mode.LockScreen;
  }
 else {
    if (!isSecure() || mShowLockBeforeUnlock) {
      return Mode.LockScreen;
    }
 else {
      return Mode.UnlockScreen;
    }
  }
}
