{
  int id=com.android.internal.R.xml.power_profile;
  XmlResourceParser parser=context.getResources().getXml(id);
  boolean parsingArray=false;
  ArrayList<Double> array=new ArrayList<Double>();
  String arrayName=null;
  try {
    XmlUtils.beginDocument(parser,TAG_DEVICE);
    while (true) {
      XmlUtils.nextElement(parser);
      String element=parser.getName();
      if (element == null)       break;
      if (parsingArray && !element.equals(TAG_ARRAYITEM)) {
        sPowerMap.put(arrayName,array.toArray(new Double[array.size()]));
        parsingArray=false;
      }
      if (element.equals(TAG_ARRAY)) {
        parsingArray=true;
        array.clear();
        arrayName=parser.getAttributeValue(null,ATTR_NAME);
      }
 else       if (element.equals(TAG_ITEM) || element.equals(TAG_ARRAYITEM)) {
        String name=null;
        if (!parsingArray)         name=parser.getAttributeValue(null,ATTR_NAME);
        if (parser.next() == XmlPullParser.TEXT) {
          String power=parser.getText();
          double value=0;
          try {
            value=Double.valueOf(power);
          }
 catch (          NumberFormatException nfe) {
          }
          if (element.equals(TAG_ITEM)) {
            sPowerMap.put(name,value);
          }
 else           if (parsingArray) {
            array.add(value);
          }
        }
      }
    }
    if (parsingArray) {
      sPowerMap.put(arrayName,array.toArray(new Double[array.size()]));
    }
  }
 catch (  XmlPullParserException e) {
    throw new RuntimeException(e);
  }
catch (  IOException e) {
    throw new RuntimeException(e);
  }
 finally {
    parser.close();
  }
}
