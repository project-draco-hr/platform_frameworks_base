{
  SQLiteDatabase sqliteDatabase=new SQLiteDatabase(path,factory,flags);
  sqliteDatabase.errorHandler=errorHandler;
  try {
    sqliteDatabase.openDatabase(path,flags);
    if (SQLiteDebug.DEBUG_SQL_STATEMENTS) {
      sqliteDatabase.enableSqlTracing(path);
    }
    if (SQLiteDebug.DEBUG_SQL_TIME) {
      sqliteDatabase.enableSqlProfiling(path);
    }
  }
 catch (  SQLiteDatabaseCorruptException e) {
    errorHandler.onCorruption(sqliteDatabase);
    sqliteDatabase=new SQLiteDatabase(path,factory,flags);
  }
  ActiveDatabases.getInstance().mActiveDatabases.add(new WeakReference<SQLiteDatabase>(sqliteDatabase));
  return sqliteDatabase;
}
