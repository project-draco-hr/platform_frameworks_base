{
  SQLiteDatabase sqliteDatabase=null;
  try {
    sqliteDatabase=new SQLiteDatabase(path,factory,flags);
    if (SQLiteDebug.DEBUG_SQL_STATEMENTS) {
      sqliteDatabase.enableSqlTracing(path);
    }
    if (SQLiteDebug.DEBUG_SQL_TIME) {
      sqliteDatabase.enableSqlProfiling(path);
    }
  }
 catch (  SQLiteDatabaseCorruptException e) {
    Log.e(TAG,"Deleting and re-creating corrupt database " + path,e);
    EventLog.writeEvent(EVENT_DB_CORRUPT,path);
    new File(path).delete();
    sqliteDatabase=new SQLiteDatabase(path,factory,flags);
  }
  ActiveDatabases.getInstance().mActiveDatabases.add(new WeakReference<SQLiteDatabase>(sqliteDatabase));
  return sqliteDatabase;
}
