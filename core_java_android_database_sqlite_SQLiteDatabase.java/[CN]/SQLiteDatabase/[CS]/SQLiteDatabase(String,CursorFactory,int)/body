{
  if (path == null) {
    throw new IllegalArgumentException("path should not be null");
  }
  mFlags=flags;
  mPath=path;
  mSlowQueryThreshold=SystemProperties.getInt(LOG_SLOW_QUERIES_PROPERTY,-1);
  mLeakedException=new IllegalStateException(path + " SQLiteDatabase created and never closed");
  mFactory=factory;
  if (SQLiteDebug.DEBUG_CAPTURE_SQL) {
    Log.d(TAG,"captured_sql|" + mPath + "|ATTACH DATABASE '"+ mPath+ "' as "+ getDatabaseName(mPath)+ ";");
  }
  dbopen(mPath,mFlags);
  if (SQLiteDebug.DEBUG_SQL_CACHE) {
    mTimeOpened=getTime();
  }
  mPrograms=new WeakHashMap<SQLiteClosable,Object>();
  try {
    setLocale(Locale.getDefault());
  }
 catch (  RuntimeException e) {
    Log.e(TAG,"Failed to setLocale() when constructing, closing the database",e);
    if (SQLiteDebug.DEBUG_CAPTURE_SQL) {
      Log.d(TAG,"captured_sql|" + mPath + "|DETACH DATABASE "+ getDatabaseName(mPath)+ ";");
    }
    dbclose();
    if (SQLiteDebug.DEBUG_SQL_CACHE) {
      mTimeClosed=getTime();
    }
    throw e;
  }
}
