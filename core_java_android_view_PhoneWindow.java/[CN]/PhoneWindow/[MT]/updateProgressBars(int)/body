{
  ProgressBar circularProgressBar=getCircularProgressBar(true);
  ProgressBar horizontalProgressBar=getHorizontalProgressBar(true);
  final int features=getLocalFeatures();
  if (value == PROGRESS_VISIBILITY_ON) {
    if ((features & (1 << FEATURE_PROGRESS)) != 0) {
      if (horizontalProgressBar != null) {
        int level=horizontalProgressBar.getProgress();
        int visibility=(horizontalProgressBar.isIndeterminate() || level < 10000) ? View.VISIBLE : View.INVISIBLE;
        horizontalProgressBar.setVisibility(visibility);
      }
 else {
        Log.e(TAG,"Horizontal progress bar not located in current window decor");
      }
    }
    if ((features & (1 << FEATURE_INDETERMINATE_PROGRESS)) != 0) {
      if (circularProgressBar != null) {
        circularProgressBar.setVisibility(View.VISIBLE);
      }
 else {
        Log.e(TAG,"Circular progress bar not located in current window decor");
      }
    }
  }
 else   if (value == PROGRESS_VISIBILITY_OFF) {
    if ((features & (1 << FEATURE_PROGRESS)) != 0) {
      if (horizontalProgressBar != null) {
        horizontalProgressBar.setVisibility(View.GONE);
      }
 else {
        Log.e(TAG,"Horizontal progress bar not located in current window decor");
      }
    }
    if ((features & (1 << FEATURE_INDETERMINATE_PROGRESS)) != 0) {
      if (circularProgressBar != null) {
        circularProgressBar.setVisibility(View.GONE);
      }
 else {
        Log.e(TAG,"Circular progress bar not located in current window decor");
      }
    }
  }
 else   if (value == PROGRESS_INDETERMINATE_ON) {
    if (horizontalProgressBar != null) {
      horizontalProgressBar.setIndeterminate(true);
    }
 else {
      Log.e(TAG,"Horizontal progress bar not located in current window decor");
    }
  }
 else   if (value == PROGRESS_INDETERMINATE_OFF) {
    if (horizontalProgressBar != null) {
      horizontalProgressBar.setIndeterminate(false);
    }
 else {
      Log.e(TAG,"Horizontal progress bar not located in current window decor");
    }
  }
 else   if (PROGRESS_START <= value && value <= PROGRESS_END) {
    if (horizontalProgressBar != null) {
      horizontalProgressBar.setProgress(value - PROGRESS_START);
    }
 else {
      Log.e(TAG,"Horizontal progress bar not located in current window decor");
    }
    if (value < PROGRESS_END) {
      showProgressBars(horizontalProgressBar,circularProgressBar);
    }
 else {
      hideProgressBars(horizontalProgressBar,circularProgressBar);
    }
  }
 else   if (PROGRESS_SECONDARY_START <= value && value <= PROGRESS_SECONDARY_END) {
    if (horizontalProgressBar != null) {
      horizontalProgressBar.setSecondaryProgress(value - PROGRESS_SECONDARY_START);
    }
 else {
      Log.e(TAG,"Horizontal progress bar not located in current window decor");
    }
    showProgressBars(horizontalProgressBar,circularProgressBar);
  }
}
