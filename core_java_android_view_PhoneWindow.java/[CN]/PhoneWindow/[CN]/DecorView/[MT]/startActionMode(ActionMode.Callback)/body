{
  if (mActionMode != null) {
    mActionMode.finish();
    mActionMode=null;
  }
  ActionMode.Callback wrappedCallback=new ActionModeCallbackWrapper(callback);
  ActionModeWrapper mode=null;
  ActionMode callbackMode=null;
  if (getCallback() != null && !isDestroyed()) {
    try {
      callbackMode=getCallback().onWindowStartingActionMode(wrappedCallback);
      if (callbackMode != null && callbackMode instanceof ActionModeWrapper) {
        mode=(ActionModeWrapper)callbackMode;
        callbackMode=null;
      }
    }
 catch (    AbstractMethodError ame) {
    }
  }
  if (callbackMode != null) {
    mActionMode=callbackMode;
  }
 else {
    if (mode == null) {
      mode=new ActionModeWrapper(mContext,wrappedCallback,new StandaloneActionModeProvider());
    }
    if (mActionModeView != null) {
      mActionModeView.killMode();
    }
    if (callback.onCreateActionMode(mode,mode.getMenu())) {
      mode.lockType();
      mActionMode=mode.getWrappedActionMode();
      mActionMode.invalidate();
    }
 else {
      mActionMode=null;
    }
  }
  if (mActionMode != null && getCallback() != null && !isDestroyed()) {
    try {
      getCallback().onActionModeStarted(mActionMode);
    }
 catch (    AbstractMethodError ame) {
    }
  }
  return mActionMode;
}
