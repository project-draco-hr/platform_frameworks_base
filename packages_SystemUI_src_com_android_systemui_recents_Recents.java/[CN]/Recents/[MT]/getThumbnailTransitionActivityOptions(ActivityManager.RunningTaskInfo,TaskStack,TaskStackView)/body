{
  Task toTask=new Task();
  TaskViewTransform toTransform=getThumbnailTransitionTransform(stack,stackView,topTask.id,toTask);
  Rect toTaskRect=toTransform.rect;
  Bitmap thumbnail;
  if (mThumbnailTransitionBitmapCacheKey != null && mThumbnailTransitionBitmapCacheKey.key != null && mThumbnailTransitionBitmapCacheKey.key.equals(toTask.key)) {
    thumbnail=mThumbnailTransitionBitmapCache;
    mThumbnailTransitionBitmapCacheKey=null;
    mThumbnailTransitionBitmapCache=null;
  }
 else {
    preloadIcon(topTask);
    thumbnail=drawThumbnailTransitionBitmap(toTask,toTransform);
  }
  if (thumbnail != null) {
    mStartAnimationTriggered=false;
    return ActivityOptions.makeThumbnailAspectScaleDownAnimation(mDummyStackView,thumbnail,toTaskRect.left,toTaskRect.top,toTaskRect.width(),toTaskRect.height(),mHandler,this);
  }
  return getUnknownTransitionActivityOptions();
}
