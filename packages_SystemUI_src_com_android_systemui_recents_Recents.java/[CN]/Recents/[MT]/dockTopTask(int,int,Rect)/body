{
  if (!isUserSetup()) {
    return false;
  }
  int currentUser=sSystemServicesProxy.getCurrentUser();
  SystemServicesProxy ssp=Recents.getSystemServices();
  ActivityManager.RunningTaskInfo topTask=ssp.getTopMostTask();
  boolean screenPinningActive=ssp.isScreenPinningActive();
  boolean isTopTaskHome=topTask != null && SystemServicesProxy.isHomeStack(topTask.stackId);
  if (topTask != null && !isTopTaskHome && !screenPinningActive) {
    if (sSystemServicesProxy.isSystemUser(currentUser)) {
      mImpl.dockTopTask(topTask.id,dragMode,stackCreateMode,initialBounds);
    }
 else {
      if (mSystemToUserCallbacks != null) {
        IRecentsNonSystemUserCallbacks callbacks=mSystemToUserCallbacks.getNonSystemUserRecentsForUser(currentUser);
        if (callbacks != null) {
          try {
            callbacks.dockTopTask(topTask.id,dragMode,stackCreateMode,initialBounds);
          }
 catch (          RemoteException e) {
            Log.e(TAG,"Callback failed",e);
          }
        }
 else {
          Log.e(TAG,"No SystemUI callbacks found for user: " + currentUser);
        }
      }
    }
    mDraggingInRecentsCurrentUser=currentUser;
    return true;
  }
  return false;
}
