{
  Task task=null;
  ArrayList<Task> tasks=stack.getTasks();
  if (runningTaskId != -1) {
    int taskCount=tasks.size();
    for (int i=taskCount - 1; i >= 0; i--) {
      Task t=tasks.get(i);
      if (t.key.id == runningTaskId) {
        task=t;
        runningTaskOut.copyFrom(t);
        break;
      }
    }
  }
  if (task == null) {
    task=tasks.get(tasks.size() - 1);
    runningTaskOut.copyFrom(task);
  }
  stackView.getScroller().setStackScrollToInitialState();
  mTmpTransform=stackView.getStackAlgorithm().getStackTransform(task,stackView.getScroller().getStackScroll(),mTmpTransform,null);
  return mTmpTransform;
}
