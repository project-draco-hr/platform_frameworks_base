{
  Rect windowRect=mSystemServicesProxy.getWindowRect();
  mConfig.update(mContext,mSystemServicesProxy,mSystemServicesProxy.getWindowRect());
  if (tryAndBindSearchWidget) {
    if (mSystemServicesProxy.getOrBindSearchAppWidget(mContext,mAppWidgetHost) != null) {
      mConfig.getSearchBarBounds(windowRect,mStatusBarHeight,mSearchBarBounds);
    }
  }
  mConfig.getAvailableTaskStackBounds(windowRect,mStatusBarHeight,(mConfig.hasTransposedNavBar ? mNavBarWidth : 0),mSearchBarBounds,mTaskStackBounds);
  int systemBarBottomInset=mConfig.hasTransposedNavBar ? 0 : mNavBarHeight;
  TaskStackViewLayoutAlgorithm algo=mDummyStackView.getStackAlgorithm();
  Rect taskStackBounds=new Rect(mTaskStackBounds);
  taskStackBounds.bottom-=systemBarBottomInset;
  algo.computeRects(windowRect.width(),windowRect.height(),taskStackBounds);
  Rect taskViewBounds=algo.getUntransformedTaskViewBounds();
  if (!taskViewBounds.equals(mLastTaskViewBounds)) {
    mLastTaskViewBounds.set(taskViewBounds);
    int taskViewWidth=taskViewBounds.width();
synchronized (mHeaderBarLock) {
      mHeaderBar.measure(View.MeasureSpec.makeMeasureSpec(taskViewWidth,View.MeasureSpec.EXACTLY),View.MeasureSpec.makeMeasureSpec(mTaskBarHeight,View.MeasureSpec.EXACTLY));
      mHeaderBar.layout(0,0,taskViewWidth,mTaskBarHeight);
    }
  }
}
