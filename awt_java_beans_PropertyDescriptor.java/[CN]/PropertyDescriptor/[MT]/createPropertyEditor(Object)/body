{
  PropertyEditor editor;
  if (propertyEditorClass == null) {
    return null;
  }
  if (!PropertyEditor.class.isAssignableFrom(propertyEditorClass)) {
    throw new ClassCastException(Messages.getString("beans.48"));
  }
  try {
    Constructor<?> constr;
    try {
      constr=propertyEditorClass.getConstructor(Object.class);
      editor=(PropertyEditor)constr.newInstance(bean);
    }
 catch (    NoSuchMethodException e) {
      constr=propertyEditorClass.getConstructor();
      editor=(PropertyEditor)constr.newInstance();
    }
  }
 catch (  Exception e) {
    RuntimeException re=new RuntimeException(Messages.getString("beans.47"),e);
    throw re;
  }
  return editor;
}
