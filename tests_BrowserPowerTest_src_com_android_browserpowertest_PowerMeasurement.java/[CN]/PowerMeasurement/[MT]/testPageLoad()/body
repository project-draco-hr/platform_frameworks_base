{
  Instrumentation mInst=getInstrumentation();
  PowerTestActivity act=getActivity();
  Intent intent=new Intent(mInst.getContext(),PowerTestActivity.class);
  intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
  long start=System.currentTimeMillis();
  PowerTestActivity activity=(PowerTestActivity)mInst.startActivitySync(intent);
  activity.reset();
  Handler handler=activity.getHandler();
  Message msg=handler.obtainMessage(PowerTestActivity.MSG_NAVIGATE,TIME_OUT,DELAY);
  msg.getData().putString(PowerTestActivity.MSG_NAV_URL,TESTING_URL);
  msg.getData().putBoolean(PowerTestActivity.MSG_NAV_LOGTIME,true);
  handler.sendMessage(msg);
  boolean timeoutFlag=activity.waitUntilDone();
  long end=System.currentTimeMillis();
  assertFalse(TESTING_URL + " failed to load",timeoutFlag);
  boolean pageErrorFlag=activity.getPageError();
  assertFalse(TESTING_URL + " is not available, either network is down or the server is down",pageErrorFlag);
  Log.v(LOGTAG,"Page is loaded in " + activity.getPageLoadTime() + " ms.");
  activity.finish();
}
