{
  String scheme=uri.getScheme();
  if (SCHEME_ANDROID_RESOURCE.equals(scheme)) {
    if (!"r".equals(mode)) {
      throw new FileNotFoundException("Can't write resources: " + uri);
    }
    OpenResourceIdResult r=getResourceId(uri);
    try {
      return r.r.openRawResourceFd(r.id);
    }
 catch (    Resources.NotFoundException ex) {
      throw new FileNotFoundException("Resource does not exist: " + uri);
    }
  }
 else   if (SCHEME_FILE.equals(scheme)) {
    ParcelFileDescriptor pfd=ParcelFileDescriptor.open(new File(uri.getPath()),modeToMode(uri,mode));
    return new AssetFileDescriptor(pfd,0,-1);
  }
 else {
    IContentProvider provider=acquireProvider(uri);
    if (provider == null) {
      throw new FileNotFoundException("No content provider: " + uri);
    }
    try {
      AssetFileDescriptor fd=provider.openAssetFile(uri,mode);
      if (fd == null) {
        releaseProvider(provider);
        return null;
      }
      ParcelFileDescriptor pfd=new ParcelFileDescriptorInner(fd.getParcelFileDescriptor(),provider);
      return new AssetFileDescriptor(pfd,fd.getStartOffset(),fd.getDeclaredLength());
    }
 catch (    RemoteException e) {
      releaseProvider(provider);
      throw new FileNotFoundException("Dead content provider: " + uri);
    }
catch (    FileNotFoundException e) {
      releaseProvider(provider);
      throw e;
    }
catch (    RuntimeException e) {
      releaseProvider(provider);
      throw e;
    }
  }
}
