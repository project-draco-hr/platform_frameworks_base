{
  int noOfFailure=0;
  boolean recordSuccess=false;
  String deviceType=MediaProfileReader.getDeviceType();
  Log.v(TAG,"deviceType = " + deviceType);
  MediaProfileReader.createVideoProfileTable();
  MediaProfileReader.createAudioProfileTable();
  MediaProfileReader.createEncoderTable();
  String encoderType=MediaProfileReader.getVideoCodecProperty();
  String audioType=MediaProfileReader.getAudioCodecProperty();
  if ((encoderType.length() != 0) || (audioType.length() != 0)) {
    String audio[]=audioType.split(",");
    String encoder[]=encoderType.split(",");
    for (int k=0; k < 2; k++) {
      for (int i=0; i < encoder.length; i++) {
        for (int j=0; j < audio.length; j++) {
          if (k == 0) {
            recordSuccess=recordVideoWithPara(encoder[i],audio[j],"high");
          }
 else {
            recordSuccess=recordVideoWithPara(encoder[i],audio[j],"low");
          }
          if (!recordSuccess) {
            Log.v(TAG,"testDeviceSpecificCodec failed");
            Log.v(TAG,"Encoder = " + encoder[i] + "Audio Encoder = "+ audio[j]);
            noOfFailure++;
          }
        }
      }
    }
    if (noOfFailure != 0) {
      assertTrue("testDeviceSpecificCodec",false);
    }
  }
}
