{
  int button=event.getMouseButton();
  long time=event.getTime();
  int id=event.getEventId();
  int index=button - 1;
  boolean clickRequired=false;
  propagateEvent(info,AWTEvent.MOUSE_EVENT_MASK,MouseListener.class,false);
  if (id == MouseEvent.MOUSE_PRESSED) {
    int clickInterval=toolkit.dispatcher.clickInterval;
    mouseGrabManager.onMousePressed(info.src);
    buttonPressed[index]=true;
    clickCount[index]=(!deltaExceeded(index,info) && ((time - lastPressTime[index]) <= clickInterval)) ? clickCount[index] + 1 : 1;
    lastPressTime[index]=time;
    lastPressPos[index]=info.position;
  }
 else {
    mouseGrabManager.onMouseReleased(info.src);
    if (buttonPressed[index]) {
      buttonPressed[index]=false;
      clickRequired=!deltaExceeded(index,info);
    }
 else {
      clickCount[index]=0;
    }
  }
  if (info.src.isIndirectlyEnabled()) {
    final Point pos=info.position;
    final int mod=event.getInputModifiers();
    toolkit.getSystemEventQueueImpl().postEvent(new MouseEvent(info.src,id,time,mod,pos.x,pos.y,clickCount[index],event.getTrigger(),button));
    if (clickRequired) {
      toolkit.getSystemEventQueueImpl().postEvent(new MouseEvent(info.src,MouseEvent.MOUSE_CLICKED,time,mod,pos.x,pos.y,clickCount[index],false,button));
    }
  }
}
