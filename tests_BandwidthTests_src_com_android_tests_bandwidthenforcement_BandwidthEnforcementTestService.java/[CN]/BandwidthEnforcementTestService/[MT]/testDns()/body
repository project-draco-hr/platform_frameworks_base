{
  try {
    final DatagramSocket socket=new DatagramSocket();
    try {
      socket.setSoTimeout(10000);
      final byte[] query=buildDnsQuery("www","android","com");
      final DatagramPacket queryPacket=new DatagramPacket(query,query.length,InetAddress.parseNumericAddress("8.8.8.8"),53);
      socket.send(queryPacket);
      final byte[] reply=new byte[query.length];
      final DatagramPacket replyPacket=new DatagramPacket(reply,reply.length);
      socket.receive(replyPacket);
      return true;
    }
  finally {
      socket.close();
    }
  }
 catch (  IOException e) {
    Log.d(TAG,"error: " + e);
  }
  return false;
}
