{
  int roamInd=getServiceState().getCdmaRoamingIndicator();
  int defRoamInd=getServiceState().getCdmaDefaultRoamingIndicator();
  int ret=-1;
switch (roamInd) {
case EriInfo.ROAMING_INDICATOR_ON:
case EriInfo.ROAMING_INDICATOR_OFF:
case EriInfo.ROAMING_INDICATOR_FLASH:
    Log.d(LOG_TAG,"Using Standard Roaming Indicator (non-ERI): " + roamInd);
  ret=roamInd;
break;
default :
if (!mEriManager.isEriFileLoaded()) {
if (defRoamInd > 2) {
  Log.d(LOG_TAG,"ERI File not loaded, using: " + EriInfo.ROAMING_INDICATOR_FLASH);
  ret=EriInfo.ROAMING_INDICATOR_FLASH;
}
 else {
  Log.d(LOG_TAG,"ERI File not loaded, using: " + defRoamInd);
  ret=defRoamInd;
}
}
 else if (mEriManager.getEriInfo(roamInd) == null) {
if (mEriManager.getEriInfo(defRoamInd) == null) {
  Log.e(LOG_TAG,"Error: ERI entry: " + roamInd + " not present, defRoamInd: "+ defRoamInd+ " not defined in ERI file");
  ret=EriInfo.ROAMING_INDICATOR_ON;
}
 else {
  int iconIndex=mEriManager.getEriInfo(defRoamInd).mIconIndex;
  Log.d(LOG_TAG,"ERI entry " + roamInd + " not present, using icon: "+ iconIndex);
  ret=iconIndex;
}
}
 else {
int iconIndex=mEriManager.getEriInfo(roamInd).mIconIndex;
Log.d(LOG_TAG,"Using ERI icon: " + iconIndex);
ret=iconIndex;
}
break;
}
return ret;
}
