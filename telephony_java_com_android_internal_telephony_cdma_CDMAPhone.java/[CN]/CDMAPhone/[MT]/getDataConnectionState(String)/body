{
  DataState ret=DataState.DISCONNECTED;
  if (mSST == null) {
    ret=DataState.DISCONNECTED;
  }
 else   if (mSST.getCurrentDataConnectionState() != ServiceState.STATE_IN_SERVICE) {
    ret=DataState.DISCONNECTED;
  }
 else   if (mDataConnectionTracker.isApnTypeEnabled(apnType) == false || mDataConnectionTracker.isApnTypeActive(apnType) == false) {
    ret=DataState.DISCONNECTED;
  }
 else {
switch (mDataConnectionTracker.getState(apnType)) {
case FAILED:
case IDLE:
      ret=DataState.DISCONNECTED;
    break;
case CONNECTED:
case DISCONNECTING:
  if (mCT.state != Phone.State.IDLE && !mSST.isConcurrentVoiceAndDataAllowed()) {
    ret=DataState.SUSPENDED;
  }
 else {
    ret=DataState.CONNECTED;
  }
break;
case INITING:
case CONNECTING:
case SCANNING:
ret=DataState.CONNECTING;
break;
}
}
log("getDataConnectionState apnType=" + apnType + " ret="+ ret);
return ret;
}
