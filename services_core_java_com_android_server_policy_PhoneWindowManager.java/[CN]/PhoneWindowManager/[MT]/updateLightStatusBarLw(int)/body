{
  WindowState statusColorWin=isStatusBarKeyguard() && !mHideLockScreen ? mStatusBar : mTopFullscreenOpaqueOrDimmingWindowState;
  if (statusColorWin != null) {
    if (statusColorWin == mTopFullscreenOpaqueWindowState) {
      vis&=~View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR;
      vis|=PolicyControl.getSystemUiVisibility(statusColorWin,null) & View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR;
    }
 else     if (statusColorWin != null && statusColorWin.isDimming()) {
      vis&=~View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR;
    }
  }
  return vis;
}
