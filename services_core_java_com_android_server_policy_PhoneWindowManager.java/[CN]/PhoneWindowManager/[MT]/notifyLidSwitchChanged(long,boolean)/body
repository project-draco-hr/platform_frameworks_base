{
  final int newLidState=lidOpen ? LID_OPEN : LID_CLOSED;
  if (newLidState == mLidState) {
    return;
  }
  mLidState=newLidState;
  applyLidSwitchState();
  updateRotation(true);
  if (lidOpen) {
    wakeUp(SystemClock.uptimeMillis(),mAllowTheaterModeWakeFromLidSwitch,"android.policy:LID");
  }
 else   if (!mLidControlsSleep) {
    mPowerManager.userActivity(SystemClock.uptimeMillis(),false);
  }
}
