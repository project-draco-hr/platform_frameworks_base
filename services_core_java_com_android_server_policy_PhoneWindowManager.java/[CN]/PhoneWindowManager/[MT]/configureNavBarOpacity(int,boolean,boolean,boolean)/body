{
  if (mNavBarOpacityMode == NAV_BAR_OPAQUE_WHEN_FREEFORM_OR_DOCKED) {
    if (dockedStackVisible || freeformStackVisible || isDockedDividerResizing) {
      visibility=setNavBarOpaqueFlag(visibility);
    }
  }
 else   if (mNavBarOpacityMode == NAV_BAR_TRANSLUCENT_WHEN_FREEFORM_OPAQUE_OTHERWISE) {
    if (isDockedDividerResizing) {
      visibility=setNavBarOpaqueFlag(visibility);
    }
 else     if (freeformStackVisible) {
      visibility=setNavBarTranslucentFlag(visibility);
    }
 else {
      visibility=setNavBarOpaqueFlag(visibility);
    }
  }
  if (!areTranslucentBarsAllowed()) {
    visibility&=~View.NAVIGATION_BAR_TRANSLUCENT;
  }
  return visibility;
}
