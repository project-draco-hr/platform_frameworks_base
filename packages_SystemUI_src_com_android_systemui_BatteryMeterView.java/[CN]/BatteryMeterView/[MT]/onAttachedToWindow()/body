{
  super.onAttachedToWindow();
  IntentFilter filter=new IntentFilter();
  filter.addAction(Intent.ACTION_BATTERY_CHANGED);
  filter.addAction(ACTION_LEVEL_TEST);
  final Intent sticky=getContext().registerReceiver(mTracker,filter);
  if (sticky != null) {
    mTracker.onReceive(getContext(),sticky);
  }
  mBatteryController.addStateChangedCallback(this);
  getContext().getContentResolver().registerContentObserver(Settings.System.getUriFor(SHOW_PERCENT_SETTING),false,mSettingObserver);
}
