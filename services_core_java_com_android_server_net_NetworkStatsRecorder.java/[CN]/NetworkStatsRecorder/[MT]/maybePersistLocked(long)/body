{
  checkNotNull(mRotator,"missing FileRotator");
  final long pendingBytes=mPending.getTotalBytes();
  if (pendingBytes >= mPersistThresholdBytes) {
    forcePersistLocked(currentTimeMillis);
  }
 else {
    mRotator.maybeRotate(currentTimeMillis);
  }
}
