{
  mReason="states: " + printStates();
  if (mStateDepository.get(0) != State.DISCONNECTED) {
    mReason+=" initial state should be DISCONNECTED, but it is " + mStateDepository.get(0) + ".";
    return false;
  }
  State lastState=mStateDepository.get(mStateDepository.size() - 1);
  if (lastState != mTransitionTarget) {
    mReason+="The last state should be " + mTransitionTarget + ", but it is "+ lastState;
    return false;
  }
  for (int i=1; i < mStateDepository.size(); i++) {
    State preState=mStateDepository.get(i - 1);
    State curState=mStateDepository.get(i);
    if ((preState == State.DISCONNECTED) && ((curState == State.CONNECTING) || (curState == State.CONNECTED) || (curState == State.DISCONNECTED))) {
      continue;
    }
 else     if ((preState == State.CONNECTING) && (curState == State.CONNECTED)) {
      continue;
    }
 else     if ((preState == State.CONNECTED) && (curState == State.CONNECTED)) {
      continue;
    }
 else {
      mReason+=" Transition state from " + preState.toString() + " to "+ curState.toString()+ " is not valid.";
      return false;
    }
  }
  return true;
}
