{
  int size=text.length();
  int[] params=SmsMessage.calculateLength(text,false);
  int messageCount=params[0];
  int encodingType=params[3];
  ArrayList<String> result=new ArrayList<String>(messageCount);
  int start=0;
  int limit;
  if (messageCount > 1) {
    limit=(encodingType == SmsMessage.ENCODING_7BIT) ? SmsMessage.MAX_USER_DATA_SEPTETS_WITH_HEADER : SmsMessage.MAX_USER_DATA_BYTES_WITH_HEADER;
  }
 else {
    limit=(encodingType == SmsMessage.ENCODING_7BIT) ? SmsMessage.MAX_USER_DATA_SEPTETS : SmsMessage.MAX_USER_DATA_BYTES;
  }
  try {
    while (start < size) {
      int end=GsmAlphabet.findLimitIndex(text,start,limit,encodingType);
      result.add(text.substring(start,end));
      start=end;
    }
  }
 catch (  EncodeException e) {
  }
  return result;
}
