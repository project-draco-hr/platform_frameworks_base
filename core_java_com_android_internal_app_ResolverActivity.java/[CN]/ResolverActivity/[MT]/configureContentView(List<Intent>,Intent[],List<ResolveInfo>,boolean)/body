{
  mAdapter=createAdapter(this,payloadIntents,initialIntents,rList,mLaunchedFromUid,alwaysUseOption && !isVoiceInteraction());
  final int layoutId;
  if (mAdapter.hasFilteredItem()) {
    layoutId=R.layout.resolver_list_with_default;
    alwaysUseOption=false;
  }
 else {
    layoutId=getLayoutResource();
  }
  mAlwaysUseOption=alwaysUseOption;
  int count=mAdapter.getUnfilteredCount();
  if (count == 1 && mAdapter.getOtherProfile() == null) {
    final TargetInfo target=mAdapter.targetInfoForPosition(0,false);
    if (shouldAutoLaunchSingleChoice(target)) {
      safelyStartActivity(target);
      mPackageMonitor.unregister();
      mRegistered=false;
      finish();
      return true;
    }
  }
  if (count > 0) {
    setContentView(layoutId);
    mAdapterView=(AbsListView)findViewById(R.id.resolver_list);
    onPrepareAdapterView(mAdapterView,mAdapter,alwaysUseOption);
  }
 else {
    setContentView(R.layout.resolver_list);
    final TextView empty=(TextView)findViewById(R.id.empty);
    empty.setVisibility(View.VISIBLE);
    mAdapterView=(AbsListView)findViewById(R.id.resolver_list);
    mAdapterView.setVisibility(View.GONE);
  }
  return false;
}
