{
  setTheme(R.style.Theme_DeviceDefault_Light_Dialog_Alert);
  super.onCreate(savedInstanceState);
  mPm=getPackageManager();
  mAlwaysUseOption=alwaysUseOption;
  mMaxColumns=getResources().getInteger(R.integer.config_maxResolverActivityColumns);
  intent.setComponent(null);
  AlertController.AlertParams ap=mAlertParams;
  ap.mTitle=title;
  mPackageMonitor.register(this,getMainLooper(),false);
  mRegistered=true;
  final ActivityManager am=(ActivityManager)getSystemService(ACTIVITY_SERVICE);
  mIconDpi=am.getLauncherLargeIconDensity();
  mIconSize=am.getLauncherLargeIconSize();
  mAdapter=new ResolveListAdapter(this,intent,initialIntents,rList);
  int count=mAdapter.getCount();
  if (count > 1) {
    ap.mView=getLayoutInflater().inflate(R.layout.resolver_grid,null);
    mGrid=(GridView)ap.mView.findViewById(R.id.resolver_grid);
    mGrid.setAdapter(mAdapter);
    mGrid.setOnItemClickListener(this);
    mGrid.setOnItemLongClickListener(new ItemLongClickListener());
    if (alwaysUseOption) {
      mGrid.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    }
    resizeGrid();
  }
 else   if (count == 1) {
    startActivity(mAdapter.intentForPosition(0));
    mPackageMonitor.unregister();
    mRegistered=false;
    finish();
    return;
  }
 else {
    ap.mMessage=getResources().getText(R.string.noApplications);
  }
  setupAlert();
  if (alwaysUseOption) {
    final ViewGroup buttonLayout=(ViewGroup)findViewById(R.id.button_bar);
    buttonLayout.setVisibility(View.VISIBLE);
    mAlwaysButton=(Button)buttonLayout.findViewById(R.id.button_always);
    mOnceButton=(Button)buttonLayout.findViewById(R.id.button_once);
  }
}
