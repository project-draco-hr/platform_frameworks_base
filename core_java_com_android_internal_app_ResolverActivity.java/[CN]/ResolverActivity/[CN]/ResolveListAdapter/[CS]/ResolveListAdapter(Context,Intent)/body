{
  mIntent=new Intent(intent);
  mIntent.setComponent(null);
  mInflater=(LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
  PackageManager pm=context.getPackageManager();
  mList=pm.queryIntentActivities(intent,PackageManager.MATCH_DEFAULT_ONLY | (mAlwaysCheck != null ? PackageManager.GET_RESOLVED_FILTER : 0));
  if (mList != null) {
    int N=mList.size();
    if (N > 1) {
      ResolveInfo r0=mList.get(0);
      for (int i=1; i < N; i++) {
        ResolveInfo ri=mList.get(i);
        if (Config.LOGV)         Log.v("ResolveListActivity",r0.activityInfo.name + "=" + r0.priority+ "/"+ r0.isDefault+ " vs "+ ri.activityInfo.name+ "="+ ri.priority+ "/"+ ri.isDefault);
        if (r0.priority != ri.priority || r0.isDefault != ri.isDefault) {
          while (i < N) {
            mList.remove(i);
            N--;
          }
        }
      }
      Collections.sort(mList,new ResolveInfo.DisplayNameComparator(pm));
    }
  }
}
