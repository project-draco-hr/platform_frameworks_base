{
  int num=end - start + 1;
  if (num == 1) {
    if (mLastChosen != null && mLastChosen.activityInfo.packageName.equals(ro.activityInfo.packageName) && mLastChosen.activityInfo.name.equals(ro.activityInfo.name)) {
      mLastChosenPosition=mList.size();
    }
    addResolveInfo(new DisplayResolveInfo(ro,roLabel,null,null));
  }
 else {
    mShowExtended=true;
    boolean usePkg=false;
    CharSequence startApp=ro.activityInfo.applicationInfo.loadLabel(mPm);
    if (startApp == null) {
      usePkg=true;
    }
    if (!usePkg) {
      HashSet<CharSequence> duplicates=new HashSet<CharSequence>();
      duplicates.add(startApp);
      for (int j=start + 1; j <= end; j++) {
        ResolveInfo jRi=rList.get(j);
        CharSequence jApp=jRi.activityInfo.applicationInfo.loadLabel(mPm);
        if ((jApp == null) || (duplicates.contains(jApp))) {
          usePkg=true;
          break;
        }
 else {
          duplicates.add(jApp);
        }
      }
      duplicates.clear();
    }
    for (int k=start; k <= end; k++) {
      ResolveInfo add=rList.get(k);
      if (mLastChosen != null && mLastChosen.activityInfo.packageName.equals(add.activityInfo.packageName) && mLastChosen.activityInfo.name.equals(add.activityInfo.name)) {
        mLastChosenPosition=mList.size();
      }
      if (usePkg) {
        addResolveInfo(new DisplayResolveInfo(add,roLabel,add.activityInfo.packageName,null));
      }
 else {
        addResolveInfo(new DisplayResolveInfo(add,roLabel,add.activityInfo.applicationInfo.loadLabel(mPm),null));
      }
    }
  }
}
