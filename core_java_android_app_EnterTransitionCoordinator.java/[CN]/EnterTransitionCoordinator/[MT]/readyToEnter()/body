{
  if (!mMadeReady) {
    mMadeReady=true;
    mSupportsTransition=getWindow().hasFeature(Window.FEATURE_CONTENT_TRANSITIONS);
    if (mSupportsTransition) {
      Window window=getWindow();
      window.getDecorView().getViewTreeObserver().addOnPreDrawListener(this);
      mActivity.overridePendingTransition(0,0);
      mActivity.convertToTranslucent(new Activity.TranslucentConversionListener(){
        @Override public void onTranslucentConversionComplete(        boolean drawComplete){
          mWasOpaque=true;
          if (mMakeOpaque) {
            mActivity.convertFromTranslucent();
          }
        }
      }
);
      Drawable background=getDecor().getBackground();
      if (background != null) {
        window.setBackgroundDrawable(null);
        background.setAlpha(0);
        window.setBackgroundDrawable(background);
      }
    }
  }
}
