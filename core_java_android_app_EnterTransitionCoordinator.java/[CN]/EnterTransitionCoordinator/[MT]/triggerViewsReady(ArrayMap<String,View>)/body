{
  if (mAreViewsReady) {
    return;
  }
  mAreViewsReady=true;
  if (sharedElements.isEmpty() || !sharedElements.valueAt(0).isLayoutRequested()) {
    viewsReady(sharedElements);
  }
 else {
    final View sharedElement=sharedElements.valueAt(0);
    sharedElement.getViewTreeObserver().addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener(){
      @Override public boolean onPreDraw(){
        sharedElement.getViewTreeObserver().removeOnPreDrawListener(this);
        viewsReady(sharedElements);
        return true;
      }
    }
);
  }
}
