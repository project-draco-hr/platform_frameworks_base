{
  if (!mIsReturning) {
    Drawable background=getDecor().getBackground();
    if (background != null) {
      background=background.mutate();
      getWindow().setBackgroundDrawable(background);
      mBackgroundAnimator=ObjectAnimator.ofInt(background,"alpha",255);
      mBackgroundAnimator.setDuration(getFadeDuration());
      mBackgroundAnimator.addListener(new AnimatorListenerAdapter(){
        @Override public void onAnimationEnd(        Animator animation){
          makeOpaque();
        }
      }
);
      mBackgroundAnimator.start();
    }
 else     if (transition != null) {
      transition.addListener(new Transition.TransitionListenerAdapter(){
        @Override public void onTransitionEnd(        Transition transition){
          transition.removeListener(this);
          makeOpaque();
        }
      }
);
    }
 else {
      makeOpaque();
    }
  }
}
