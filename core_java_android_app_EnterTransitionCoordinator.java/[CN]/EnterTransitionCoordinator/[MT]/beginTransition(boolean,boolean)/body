{
  Transition sharedElementTransition=null;
  if (startSharedElementTransition && !mSharedElementNames.isEmpty()) {
    sharedElementTransition=configureTransition(getSharedElementTransition());
  }
  Transition viewsTransition=null;
  if (startEnterTransition && !mTransitioningViews.isEmpty()) {
    viewsTransition=configureTransition(getViewsTransition());
    viewsTransition=addTargets(viewsTransition,mTransitioningViews);
  }
  Transition transition=mergeTransitions(sharedElementTransition,viewsTransition);
  if (transition != null) {
    TransitionManager.beginDelayedTransition(getDecor(),transition);
    if (startSharedElementTransition && !mSharedElementNames.isEmpty()) {
      mSharedElements.get(0).invalidate();
    }
 else     if (startEnterTransition && !mTransitioningViews.isEmpty()) {
      mTransitioningViews.get(0).invalidate();
    }
  }
  return transition;
}
