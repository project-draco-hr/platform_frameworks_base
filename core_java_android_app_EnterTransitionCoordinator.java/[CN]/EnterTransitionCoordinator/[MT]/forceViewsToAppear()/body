{
  if (!mIsReturning) {
    return;
  }
  if (!mIsReadyForTransition) {
    mIsReadyForTransition=true;
    final ViewGroup decor=getDecor();
    if (decor != null && mViewsReadyListener != null) {
      decor.getViewTreeObserver().removeOnPreDrawListener(mViewsReadyListener);
      mViewsReadyListener=null;
    }
    showViews(mTransitioningViews,true);
    mSharedElements.clear();
    mAllSharedElementNames.clear();
    mTransitioningViews.clear();
    mIsReadyForTransition=true;
    viewsTransitionComplete();
    sharedElementTransitionComplete();
  }
 else {
    if (!mSharedElementTransitionStarted) {
      moveSharedElementsFromOverlay();
      mSharedElementTransitionStarted=true;
      showViews(mSharedElements,true);
      mSharedElements.clear();
      sharedElementTransitionComplete();
    }
    if (!mIsViewsTransitionStarted) {
      mIsViewsTransitionStarted=true;
      showViews(mTransitioningViews,true);
      mTransitioningViews.clear();
      viewsTransitionComplete();
    }
    cancelPendingTransitions();
  }
  mAreViewsReady=true;
}
