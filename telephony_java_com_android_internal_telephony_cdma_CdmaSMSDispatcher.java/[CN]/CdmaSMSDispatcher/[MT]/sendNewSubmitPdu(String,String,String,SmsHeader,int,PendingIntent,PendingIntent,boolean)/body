{
  UserData uData=new UserData();
  uData.payloadStr=message;
  uData.userDataHeader=smsHeader;
  if (encoding == android.telephony.SmsMessage.ENCODING_7BIT) {
    uData.msgEncoding=UserData.ENCODING_GSM_7BIT_ALPHABET;
  }
 else {
    uData.msgEncoding=UserData.ENCODING_UNICODE_16;
  }
  uData.msgEncodingSet=true;
  SmsMessage.SubmitPdu submitPdu=SmsMessage.getSubmitPdu(destinationAddress,uData,(deliveryIntent != null) && lastPart);
  sendSubmitPdu(submitPdu,sentIntent,deliveryIntent);
}
