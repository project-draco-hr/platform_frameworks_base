{
  final String action=intent.getAction();
  if (BluetoothA2dp.ACTION_CONNECTION_STATE_CHANGED.equals(action)) {
    final int state=intent.getIntExtra(BluetoothA2dp.EXTRA_STATE,-1);
    if (state == BluetoothA2dp.STATE_CONNECTED) {
      onA2dpDeviceConnected();
    }
 else     if (state == BluetoothA2dp.STATE_DISCONNECTING || state == BluetoothA2dp.STATE_DISCONNECTED) {
      onA2dpDeviceDisconnected();
    }
  }
}
