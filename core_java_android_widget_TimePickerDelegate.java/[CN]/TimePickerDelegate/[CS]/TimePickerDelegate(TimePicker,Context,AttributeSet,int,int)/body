{
  super(delegator,context);
  final TypedArray a=mContext.obtainStyledAttributes(attrs,R.styleable.TimePicker,defStyleAttr,defStyleRes);
  final Resources res=mContext.getResources();
  mHourPickerDescription=res.getString(R.string.hour_picker_description);
  mSelectHours=res.getString(R.string.select_hours);
  mMinutePickerDescription=res.getString(R.string.minute_picker_description);
  mSelectMinutes=res.getString(R.string.select_minutes);
  mHeaderSelectedColor=a.getColor(R.styleable.TimePicker_headerSelectedTextColor,res.getColor(R.color.timepicker_default_selector_color_material));
  final int headerTimeTextAppearance=a.getResourceId(R.styleable.TimePicker_headerTimeTextAppearance,0);
  final int headerAmPmTextAppearance=a.getResourceId(R.styleable.TimePicker_headerAmPmTextAppearance,0);
  final int headerBackgroundColor=a.getColor(R.styleable.TimePicker_headerBackgroundColor,Color.TRANSPARENT);
  final int layoutResourceId=a.getResourceId(R.styleable.TimePicker_internalLayout,R.layout.time_picker_holo);
  a.recycle();
  final LayoutInflater inflater=(LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
  mMainView=inflater.inflate(layoutResourceId,null);
  mDelegator.addView(mMainView);
  mHourView=(TextView)mMainView.findViewById(R.id.hours);
  mSeparatorView=(TextView)mMainView.findViewById(R.id.separator);
  mMinuteView=(TextView)mMainView.findViewById(R.id.minutes);
  mAmPmTextView=(TextView)mMainView.findViewById(R.id.ampm_label);
  mLayoutButtons=(ViewGroup)mMainView.findViewById(R.id.layout_buttons);
  if (headerTimeTextAppearance != 0) {
    mHourView.setTextAppearance(context,headerTimeTextAppearance);
    mSeparatorView.setTextAppearance(context,headerTimeTextAppearance);
    mMinuteView.setTextAppearance(context,headerTimeTextAppearance);
  }
  if (headerAmPmTextAppearance != 0) {
    mAmPmTextView.setTextAppearance(context,headerAmPmTextAppearance);
  }
  if (headerBackgroundColor != Color.TRANSPARENT) {
    mLayoutButtons.setBackgroundColor(headerBackgroundColor);
    mMainView.findViewById(R.id.time_header).setBackgroundColor(headerBackgroundColor);
  }
  mHeaderUnselectedColor=mHourView.getCurrentTextColor();
  mRadialTimePickerView=(RadialTimePickerView)mMainView.findViewById(R.id.radial_picker);
  mDoneButton=(Button)mMainView.findViewById(R.id.done_button);
  String[] amPmTexts=new DateFormatSymbols().getAmPmStrings();
  mAmText=amPmTexts[0];
  mPmText=amPmTexts[1];
  setupListeners();
  mAllowAutoAdvance=true;
  mDoublePlaceholderText=res.getString(R.string.time_placeholder);
  mDeletedKeyFormat=res.getString(R.string.deleted_key);
  mPlaceholderText=mDoublePlaceholderText.charAt(0);
  mAmKeyCode=mPmKeyCode=-1;
  generateLegalTimesTree();
  final Calendar calendar=Calendar.getInstance(mCurrentLocale);
  final int currentHour=calendar.get(Calendar.HOUR_OF_DAY);
  final int currentMinute=calendar.get(Calendar.MINUTE);
  initialize(currentHour,currentMinute,false,HOUR_INDEX,false);
}
