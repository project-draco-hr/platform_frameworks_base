{
  if (keyCode == KeyEvent.KEYCODE_ESCAPE || keyCode == KeyEvent.KEYCODE_BACK) {
    if (mDismissCallback != null) {
      mDismissCallback.dismiss(mDelegator,true,getCurrentHour(),getCurrentMinute());
    }
    return true;
  }
 else   if (keyCode == KeyEvent.KEYCODE_TAB) {
    if (mInKbMode) {
      if (isTypedTimeFullyLegal()) {
        finishKbMode(true);
      }
      return true;
    }
  }
 else   if (keyCode == KeyEvent.KEYCODE_ENTER) {
    if (mInKbMode) {
      if (!isTypedTimeFullyLegal()) {
        return true;
      }
      finishKbMode(false);
    }
    if (mOnTimeChangedListener != null) {
      mOnTimeChangedListener.onTimeChanged(mDelegator,mRadialTimePickerView.getCurrentHour(),mRadialTimePickerView.getCurrentMinute());
    }
    if (mDismissCallback != null) {
      mDismissCallback.dismiss(mDelegator,false,getCurrentHour(),getCurrentMinute());
    }
    return true;
  }
 else   if (keyCode == KeyEvent.KEYCODE_DEL) {
    if (mInKbMode) {
      if (!mTypedTimes.isEmpty()) {
        int deleted=deleteLastTypedKey();
        String deletedKeyStr;
        if (deleted == getAmOrPmKeyCode(AM)) {
          deletedKeyStr=mAmText;
        }
 else         if (deleted == getAmOrPmKeyCode(PM)) {
          deletedKeyStr=mPmText;
        }
 else {
          deletedKeyStr=String.format("%d",getValFromKeyCode(deleted));
        }
        mRadialTimePickerView.announceForAccessibility(String.format(mDeletedKeyFormat,deletedKeyStr));
        updateDisplay(true);
      }
    }
  }
 else   if (keyCode == KeyEvent.KEYCODE_0 || keyCode == KeyEvent.KEYCODE_1 || keyCode == KeyEvent.KEYCODE_2 || keyCode == KeyEvent.KEYCODE_3 || keyCode == KeyEvent.KEYCODE_4 || keyCode == KeyEvent.KEYCODE_5 || keyCode == KeyEvent.KEYCODE_6 || keyCode == KeyEvent.KEYCODE_7 || keyCode == KeyEvent.KEYCODE_8 || keyCode == KeyEvent.KEYCODE_9 || (!mIs24HourView && (keyCode == getAmOrPmKeyCode(AM) || keyCode == getAmOrPmKeyCode(PM)))) {
    if (!mInKbMode) {
      if (mRadialTimePickerView == null) {
        Log.e(TAG,"Unable to initiate keyboard mode, TimePicker was null.");
        return true;
      }
      mTypedTimes.clear();
      tryStartingKbMode(keyCode);
      return true;
    }
    if (addKeyIfLegal(keyCode)) {
      updateDisplay(false);
    }
    return true;
  }
  return false;
}
