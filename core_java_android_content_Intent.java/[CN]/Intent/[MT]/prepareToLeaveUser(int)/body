{
  Uri data=getData();
  if (data != null) {
    mData=maybeAddUserId(data,userId);
  }
  if (mSelector != null) {
    mSelector.prepareToLeaveUser(userId);
  }
  if (mClipData != null) {
    mClipData.prepareToLeaveUser(userId);
  }
  String action=getAction();
  if (ACTION_SEND.equals(action)) {
    final Uri stream=getParcelableExtra(EXTRA_STREAM);
    if (stream != null) {
      putExtra(EXTRA_STREAM,maybeAddUserId(stream,userId));
    }
  }
  if (ACTION_SEND_MULTIPLE.equals(action)) {
    final ArrayList<Uri> streams=getParcelableArrayListExtra(EXTRA_STREAM);
    if (streams != null) {
      ArrayList<Uri> newStreams=new ArrayList<Uri>();
      for (int i=0; i < streams.size(); i++) {
        newStreams.add(maybeAddUserId(streams.get(i),userId));
      }
      putParcelableArrayListExtra(EXTRA_STREAM,newStreams);
    }
  }
}
