{
  Intent intent=new Intent(ACTION_CHOOSER);
  intent.putExtra(EXTRA_INTENT,target);
  if (title != null) {
    intent.putExtra(EXTRA_TITLE,title);
  }
  final ClipData targetClipData=target.getClipData();
  if (targetClipData != null) {
    intent.setClipData(targetClipData);
    intent.addFlags(target.getFlags() & (FLAG_GRANT_READ_URI_PERMISSION | FLAG_GRANT_WRITE_URI_PERMISSION));
  }
  return intent;
}
