{
  if (specification.getBaseType() != TYPE_UNSPECIFIED && getBaseType() != specification.getBaseType()) {
    return false;
  }
  if (specification.getTarget() != TARGET_UNSPECIFIED && getTarget() != specification.getTarget()) {
    return false;
  }
  if (specification.getBytesPerSample() != BYTES_PER_SAMPLE_UNSPECIFIED && getBytesPerSample() != specification.getBytesPerSample()) {
    return false;
  }
  if (specification.getDimensionCount() > 0 && getDimensionCount() != specification.getDimensionCount()) {
    return false;
  }
  for (int i=0; i < specification.getDimensionCount(); ++i) {
    int specDim=specification.getDimension(i);
    if (specDim != SIZE_UNSPECIFIED && getDimension(i) != specDim) {
      return false;
    }
  }
  if (specification.getObjectClass() != null) {
    if (getObjectClass() == null || !specification.getObjectClass().isAssignableFrom(getObjectClass())) {
      return false;
    }
  }
  if (specification.mMetaData != null) {
    for (    String specKey : specification.mMetaData.keySet()) {
      if (mMetaData == null || !mMetaData.containsKey(specKey) || !mMetaData.get(specKey).equals(specification.mMetaData.get(specKey))) {
        return false;
      }
    }
  }
  return true;
}
