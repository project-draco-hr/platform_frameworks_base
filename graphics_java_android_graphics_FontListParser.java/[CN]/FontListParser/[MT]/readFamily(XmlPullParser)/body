{
  List<String> names=null;
  List<String> fontFiles=new ArrayList<String>();
  String lang=null;
  String variant=null;
  while (parser.next() != XmlPullParser.END_TAG) {
    if (parser.getEventType() != XmlPullParser.START_TAG)     continue;
    String tag=parser.getName();
    if (tag.equals("fileset")) {
      while (parser.next() != XmlPullParser.END_TAG) {
        if (parser.getEventType() != XmlPullParser.START_TAG)         continue;
        if (parser.getName().equals("file")) {
          if (lang == null) {
            lang=parser.getAttributeValue(null,"lang");
          }
          if (variant == null) {
            variant=parser.getAttributeValue(null,"variant");
          }
          String filename=parser.nextText();
          String fullFilename="/system/fonts/" + filename;
          fontFiles.add(fullFilename);
        }
      }
    }
 else     if (tag.equals("nameset")) {
      names=new ArrayList<String>();
      while (parser.next() != XmlPullParser.END_TAG) {
        if (parser.getEventType() != XmlPullParser.START_TAG)         continue;
        if (parser.getName().equals("name")) {
          String name=parser.nextText();
          names.add(name);
        }
      }
    }
  }
  return new Family(names,fontFiles,lang,variant);
}
