{
  if (DEBUG)   Log.d(TAG,"GetLocation: " + flags + ":"+ latitude);
  Location location=new Location(LocationManager.GPS_PROVIDER);
  if ((flags & LOCATION_HAS_LAT_LONG) == LOCATION_HAS_LAT_LONG) {
    location.setLatitude(latitude);
    location.setLongitude(longitude);
    location.setTime(timestamp);
    location.setElapsedRealtimeNanos(SystemClock.elapsedRealtimeNanos());
  }
  if ((flags & LOCATION_HAS_ALTITUDE) == LOCATION_HAS_ALTITUDE) {
    location.setAltitude(altitude);
  }
 else {
    location.removeAltitude();
  }
  if ((flags & LOCATION_HAS_SPEED) == LOCATION_HAS_SPEED) {
    location.setSpeed(speed);
  }
 else {
    location.removeSpeed();
  }
  if ((flags & LOCATION_HAS_BEARING) == LOCATION_HAS_BEARING) {
    location.setBearing(bearing);
  }
 else {
    location.removeBearing();
  }
  if ((flags & LOCATION_HAS_ACCURACY) == LOCATION_HAS_ACCURACY) {
    location.setAccuracy(accuracy);
  }
 else {
    location.removeAccuracy();
  }
  return location;
}
