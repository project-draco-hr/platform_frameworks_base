{
  appFlags=appInfo.flags;
  if ((appInfo.flags & ApplicationInfo.FLAG_SUPPORTS_LARGE_SCREENS) != 0) {
    mCompatibilityFlags=EXPANDABLE | CONFIGURED_EXPANDABLE;
  }
  float packageDensityScale=-1.0f;
  if (appInfo.supportsDensities != null) {
    int minDiff=Integer.MAX_VALUE;
    for (    int density : appInfo.supportsDensities) {
      if (density == ApplicationInfo.ANY_DENSITY) {
        packageDensityScale=1.0f;
        break;
      }
      int tmpDiff=Math.abs(DisplayMetrics.DEVICE_DENSITY - density);
      if (tmpDiff == 0) {
        packageDensityScale=1.0f;
        break;
      }
      if (tmpDiff < minDiff && packageDensityScale < 1.0f) {
        packageDensityScale=DisplayMetrics.DEVICE_DENSITY / (float)density;
        minDiff=tmpDiff;
      }
    }
  }
  if (packageDensityScale > 0.0f) {
    applicationScale=packageDensityScale;
  }
 else {
    applicationScale=DisplayMetrics.DEVICE_DENSITY / (float)DisplayMetrics.DEFAULT_DENSITY;
  }
  applicationInvertedScale=1.0f / applicationScale;
  if (applicationScale != 1.0f) {
    mCompatibilityFlags|=SCALING_REQUIRED;
  }
}
