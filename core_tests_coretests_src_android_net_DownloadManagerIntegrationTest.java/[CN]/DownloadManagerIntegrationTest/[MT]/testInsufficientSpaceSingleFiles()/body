{
  long fileSize1=50000000L;
  long fileSize2=60000000L;
  File largeFile1=createFileOnSD(null,fileSize1,DataType.TEXT,null);
  File largeFile2=createFileOnSD(null,fileSize2,DataType.TEXT,null);
  try {
    long dlRequest=doStandardEnqueue(largeFile1);
    waitForDownloadOrTimeout(dlRequest);
    ParcelFileDescriptor pfd=mDownloadManager.openDownloadedFile(dlRequest);
    verifyFileContents(pfd,largeFile1);
    verifyFileSize(pfd,largeFile1.length());
    dlRequest=doStandardEnqueue(largeFile2);
    waitForDownloadOrTimeout(dlRequest);
    Cursor cursor=getCursor(dlRequest);
    try {
      verifyInt(cursor,DownloadManager.COLUMN_ERROR_CODE,DownloadManager.ERROR_INSUFFICIENT_SPACE);
    }
  finally {
      cursor.close();
    }
  }
  finally {
    largeFile1.delete();
    largeFile2.delete();
  }
}
