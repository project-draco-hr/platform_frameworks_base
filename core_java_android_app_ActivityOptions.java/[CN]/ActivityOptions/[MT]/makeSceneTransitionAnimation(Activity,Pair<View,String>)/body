{
  if (!activity.getWindow().hasFeature(Window.FEATURE_CONTENT_TRANSITIONS)) {
    return null;
  }
  ActivityOptions opts=new ActivityOptions();
  opts.mAnimationType=ANIM_SCENE_TRANSITION;
  ArrayList<String> names=new ArrayList<String>();
  ArrayList<String> mappedNames=new ArrayList<String>();
  if (sharedElements != null) {
    for (int i=0; i < sharedElements.length; i++) {
      Pair<View,String> sharedElement=sharedElements[i];
      names.add(sharedElement.second);
      mappedNames.add(sharedElement.first.getViewName());
    }
  }
  ExitTransitionCoordinator exit=new ExitTransitionCoordinator(activity,names,names,mappedNames,false);
  opts.mTransitionReceiver=exit;
  opts.mSharedElementNames=names;
  opts.mLocalSharedElementNames=mappedNames;
  opts.mIsReturning=false;
  return opts;
}
