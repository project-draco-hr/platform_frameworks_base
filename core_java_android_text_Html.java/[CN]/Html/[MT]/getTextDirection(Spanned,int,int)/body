{
  final int len=end - start;
  final byte[] levels=ArrayUtils.newUnpaddedByteArray(len);
  final char[] buffer=TextUtils.obtain(len);
  TextUtils.getChars(text,start,end,buffer,0);
  int paraDir=AndroidBidi.bidi(Layout.DIR_REQUEST_DEFAULT_LTR,buffer,levels,len,false);
switch (paraDir) {
case Layout.DIR_RIGHT_TO_LEFT:
    return " dir=\"rtl\"";
case Layout.DIR_LEFT_TO_RIGHT:
default :
  return " dir=\"ltr\"";
}
}
