{
  if (result != BluetoothInputDevice.INPUT_OPERATION_SUCCESS) {
    String address=mBluetoothService.getAddressFromObjectPath(path);
    if (address == null)     return;
    boolean connected=false;
    BluetoothDevice device=mAdapter.getRemoteDevice(address);
    int state=mBluetoothService.getInputDeviceConnectionState(device);
    if (state == BluetoothInputDevice.STATE_CONNECTING) {
      if (result == BluetoothInputDevice.INPUT_CONNECT_FAILED_ALREADY_CONNECTED) {
        connected=true;
      }
 else {
        connected=false;
      }
    }
 else     if (state == BluetoothInputDevice.STATE_DISCONNECTING) {
      if (result == BluetoothInputDevice.INPUT_DISCONNECT_FAILED_NOT_CONNECTED) {
        connected=false;
      }
 else {
        connected=true;
      }
    }
 else {
      Log.e(TAG,"Error onInputDeviceConnectionResult. State is:" + state);
    }
    mBluetoothService.handleInputDevicePropertyChange(address,connected);
  }
}
