{
  final Rect r=mTmpRect;
  final boolean min=mState.mUseIntrinsicSizeAsMin;
  int level=getLevel();
  int w=bounds.width();
  if (mState.mScaleWidth > 0) {
    final int iw=min ? mState.mDrawable.getIntrinsicWidth() : 0;
    w-=(int)((w - iw) * (10000 - level) * mState.mScaleWidth / 10000);
  }
  int h=bounds.height();
  if (mState.mScaleHeight > 0) {
    final int ih=min ? mState.mDrawable.getIntrinsicHeight() : 0;
    h-=(int)((h - ih) * (10000 - level) * mState.mScaleHeight / 10000);
  }
  final int layoutDirection=getLayoutDirection();
  Gravity.apply(mState.mGravity,w,h,bounds,r,layoutDirection);
  if (w > 0 && h > 0) {
    mState.mDrawable.setBounds(r.left,r.top,r.right,r.bottom);
  }
}
