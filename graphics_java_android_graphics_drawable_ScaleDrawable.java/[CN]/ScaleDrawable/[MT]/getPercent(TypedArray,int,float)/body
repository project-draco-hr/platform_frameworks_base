{
  final int type=a.getType(index);
  if (type == TypedValue.TYPE_FRACTION || type == TypedValue.TYPE_NULL) {
    return a.getFraction(index,1,1,defaultValue);
  }
  final String s=a.getString(index);
  if (s != null) {
    if (s.endsWith("%")) {
      final String f=s.substring(0,s.length() - 1);
      return Float.parseFloat(f) / 100.0f;
    }
  }
  return defaultValue;
}
