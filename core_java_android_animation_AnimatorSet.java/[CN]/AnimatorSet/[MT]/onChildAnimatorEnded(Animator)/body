{
  Node animNode=mNodeMap.get(animation);
  animNode.mEnded=true;
  if (!mTerminated) {
    List<Node> children=animNode.mChildNodes;
    int childrenSize=children == null ? 0 : children.size();
    for (int i=0; i < childrenSize; i++) {
      if (children.get(i).mLatestParent == animNode) {
        start(children.get(i));
      }
    }
    boolean allDone=true;
    int size=mNodes.size();
    for (int i=0; i < size; i++) {
      if (!mNodes.get(i).mEnded) {
        allDone=false;
        break;
      }
    }
    if (allDone) {
      if (mListeners != null) {
        ArrayList<AnimatorListener> tmpListeners=(ArrayList<AnimatorListener>)mListeners.clone();
        int numListeners=tmpListeners.size();
        for (int i=0; i < numListeners; ++i) {
          tmpListeners.get(i).onAnimationEnd(this);
        }
      }
      mStarted=false;
      mPaused=false;
    }
  }
}
