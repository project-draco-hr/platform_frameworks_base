{
  if ((mode & Intent.FLAG_GRANT_READ_URI_PERMISSION) != 0 && readUriPermissions != null) {
    Iterator<UriPermission> it=readUriPermissions.iterator();
    while (it.hasNext()) {
      UriPermission perm=it.next();
      if (uri.equals(perm.uri)) {
        perm.readOwners.remove(this);
        if (perm.readOwners.size() == 0 && (perm.globalModeFlags & Intent.FLAG_GRANT_READ_URI_PERMISSION) == 0) {
          perm.modeFlags&=~Intent.FLAG_GRANT_READ_URI_PERMISSION;
          service.removeUriPermissionIfNeededLocked(perm);
        }
        it.remove();
      }
    }
    if (readUriPermissions.size() == 0) {
      readUriPermissions=null;
    }
  }
  if ((mode & Intent.FLAG_GRANT_WRITE_URI_PERMISSION) != 0 && writeUriPermissions != null) {
    Iterator<UriPermission> it=writeUriPermissions.iterator();
    while (it.hasNext()) {
      UriPermission perm=it.next();
      if (uri.equals(perm.uri)) {
        perm.writeOwners.remove(this);
        if (perm.writeOwners.size() == 0 && (perm.globalModeFlags & Intent.FLAG_GRANT_WRITE_URI_PERMISSION) == 0) {
          perm.modeFlags&=~Intent.FLAG_GRANT_WRITE_URI_PERMISSION;
          service.removeUriPermissionIfNeededLocked(perm);
        }
        it.remove();
      }
    }
    if (writeUriPermissions.size() == 0) {
      writeUriPermissions=null;
    }
  }
}
