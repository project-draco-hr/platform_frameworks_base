{
  if (image == null) {
    throw new IllegalArgumentException("image shouldn't be null");
  }
  if (!mDequeuedImages.contains(image)) {
    throw new IllegalStateException("It is illegal to abort some image that is not" + " dequeued yet");
  }
  WriterSurfaceImage wi=(WriterSurfaceImage)image;
  if (!wi.mIsImageValid) {
    return;
  }
  cancelImage(mNativeContext,image);
  mDequeuedImages.remove(image);
  wi.clearSurfacePlanes();
  wi.mIsImageValid=false;
}
