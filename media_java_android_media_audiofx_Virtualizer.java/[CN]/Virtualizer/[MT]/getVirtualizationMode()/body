{
  int[] value=new int[1];
  int status=getParameter(PARAM_VIRTUALIZATION_MODE,value);
  if (status >= 0) {
    return AudioDevice.convertInternalDeviceToDeviceType(value[0]);
  }
 else   if (status == AudioEffect.ERROR_BAD_VALUE) {
    return AudioDevice.TYPE_UNKNOWN;
  }
 else {
    checkStatus(status);
  }
  Log.e(TAG,"unexpected status code " + status + " after getParameter(PARAM_VIRTUALIZATION_MODE)");
  return AudioDevice.TYPE_UNKNOWN;
}
