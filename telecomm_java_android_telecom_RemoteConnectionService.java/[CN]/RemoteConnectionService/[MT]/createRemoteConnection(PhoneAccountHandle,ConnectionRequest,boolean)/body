{
  final String id=UUID.randomUUID().toString();
  final ConnectionRequest newRequest=new ConnectionRequest(request.getAccountHandle(),request.getAddress(),request.getExtras(),request.getVideoState());
  try {
    if (mConnectionById.isEmpty()) {
      mOutgoingConnectionServiceRpc.addConnectionServiceAdapter(mServant.getStub(),null);
    }
    RemoteConnection connection=new RemoteConnection(id,mOutgoingConnectionServiceRpc,newRequest);
    mPendingConnections.add(connection);
    mConnectionById.put(id,connection);
    mOutgoingConnectionServiceRpc.createConnection(connectionManagerPhoneAccount,id,newRequest,isIncoming,false,null);
    connection.registerCallback(new RemoteConnection.Callback(){
      @Override public void onDestroyed(      RemoteConnection connection){
        mConnectionById.remove(id);
        maybeDisconnectAdapter();
      }
    }
);
    return connection;
  }
 catch (  RemoteException e) {
    return RemoteConnection.failure(new DisconnectCause(DisconnectCause.ERROR,e.toString()));
  }
}
