{
  DisplayState displayState=mDisplayStates.get(windowState.getDisplayId());
  if (displayState == null) {
    return null;
  }
  MagnificationSpec spec=displayState.mMagnificationSpec;
  if (spec != null && !spec.isNop()) {
    if (windowState.mAttachedWindow != null) {
      if (!canMagnifyWindow(windowState.mAttachedWindow.mAttrs.type)) {
        return null;
      }
    }
    if (!canMagnifyWindow(windowState.mAttrs.type)) {
      return null;
    }
  }
  return spec;
}
