{
  byte[] output=mDelegate.doFinal(input,inputOffset,inputLength,signature,additionalEntropy);
  if (output != null) {
    try {
      mBufferedOutput.write(output);
    }
 catch (    IOException e) {
      throw new ProviderException("Failed to buffer output",e);
    }
  }
  byte[] result=mBufferedOutput.toByteArray();
  mBufferedOutput.reset();
  mProducedOutputSizeBytes+=result.length;
  return result;
}
