{
  idpw.println("Package idle stats:");
  idpw.increaseIndent();
  ArrayMap<String,PackageHistory> userHistory=mIdleHistory.get(userId);
  final long elapsedRealtime=SystemClock.elapsedRealtime();
  final long totalElapsedTime=getElapsedTimeLocked(elapsedRealtime);
  final long screenOnTime=getScreenOnTimeLocked(elapsedRealtime);
  if (userHistory == null)   return;
  final int P=userHistory.size();
  for (int p=0; p < P; p++) {
    final String packageName=userHistory.keyAt(p);
    final PackageHistory packageHistory=userHistory.valueAt(p);
    idpw.print("package=" + packageName);
    idpw.print(" lastUsedElapsed=");
    TimeUtils.formatDuration(totalElapsedTime - packageHistory.lastUsedElapsedTime,idpw);
    idpw.print(" lastUsedScreenOn=");
    TimeUtils.formatDuration(screenOnTime - packageHistory.lastUsedScreenTime,idpw);
    idpw.print(" idle=" + (isIdleLocked(packageName,userId,elapsedRealtime) ? "y" : "n"));
    idpw.println();
  }
  idpw.println();
  idpw.print("totalElapsedTime=");
  TimeUtils.formatDuration(getElapsedTimeLocked(elapsedRealtime),idpw);
  idpw.println();
  idpw.print("totalScreenOnTime=");
  TimeUtils.formatDuration(getScreenOnTimeLocked(elapsedRealtime),idpw);
  idpw.println();
  idpw.decreaseIndent();
}
