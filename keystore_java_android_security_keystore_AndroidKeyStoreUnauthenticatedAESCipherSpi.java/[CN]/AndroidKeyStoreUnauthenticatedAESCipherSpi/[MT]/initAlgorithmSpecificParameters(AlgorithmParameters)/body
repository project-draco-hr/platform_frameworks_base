{
  if (!mIvRequired) {
    if (params != null) {
      throw new InvalidAlgorithmParameterException("Unsupported parameters: " + params);
    }
    return;
  }
  if (params == null) {
    if (!isEncrypting()) {
      throw new InvalidAlgorithmParameterException("IV required when decrypting" + ". Use IvParameterSpec or AlgorithmParameters to provide it.");
    }
    return;
  }
  if (!"AES".equalsIgnoreCase(params.getAlgorithm())) {
    throw new InvalidAlgorithmParameterException("Unsupported AlgorithmParameters algorithm: " + params.getAlgorithm() + ". Supported: AES");
  }
  IvParameterSpec ivSpec;
  try {
    ivSpec=params.getParameterSpec(IvParameterSpec.class);
  }
 catch (  InvalidParameterSpecException e) {
    if (!isEncrypting()) {
      throw new InvalidAlgorithmParameterException("IV required when decrypting" + ", but not found in parameters: " + params,e);
    }
    mIv=null;
    return;
  }
  mIv=ivSpec.getIV();
  if (mIv == null) {
    throw new InvalidAlgorithmParameterException("Null IV in AlgorithmParameters");
  }
}
