{
  final int TOTAL_DOWNLOADS=15;
  HashSet<Long> downloadIds=new HashSet<Long>(TOTAL_DOWNLOADS);
  removeAllCurrentDownloads();
  try {
    for (int i=0; i < TOTAL_DOWNLOADS; ++i) {
      long dlRequest=-1;
      String filename=FILE_CONCURRENT_DOWNLOAD_FILE_PREFIX + i + FILE_CONCURRENT_DOWNLOAD_FILE_EXTENSION;
      Uri remoteUri=getExternalFileUri(filename);
      Request request=new Request(remoteUri);
      request.setTitle(filename);
      dlRequest=mDownloadManager.enqueue(request);
      assertTrue("request id is -1 from download manager",dlRequest != -1);
      downloadIds.add(dlRequest);
    }
    assertTrue("download not finished",waitForMultipleDownloads(downloadIds,15 * 60 * 2000));
  }
  finally {
    removeAllCurrentDownloads();
  }
}
