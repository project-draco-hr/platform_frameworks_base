{
  String filename=DOWNLOAD_FILENAME;
  mContext.deleteFile(DOWNLOAD_STARTED_FLAG);
  FileOutputStream fileOutput=mContext.openFileOutput(DOWNLOAD_STARTED_FLAG,0);
  DataOutputStream outputFile=null;
  doCommonDownloadSetup();
  try {
    long dlRequest=-1;
    removeAllCurrentDownloads();
    Uri remoteUri=getExternalFileUri(filename);
    Request request=new Request(remoteUri);
    dlRequest=mDownloadManager.enqueue(request);
    waitForDownloadToStart(dlRequest);
    assertTrue("request id is -1 from download manager",dlRequest != -1);
    outputFile=new DataOutputStream(fileOutput);
    outputFile.writeLong(dlRequest);
  }
  finally {
    if (outputFile != null) {
      outputFile.flush();
      outputFile.close();
    }
  }
}
