{
  if (callback == null) {
    throw new IllegalArgumentException("callback cannot be null");
  }
  if (totalBytes(advertiseData) > MAX_ADVERTISING_DATA_BYTES || totalBytes(scanResponse) > MAX_ADVERTISING_DATA_BYTES) {
    postCallbackFailure(callback,AdvertiseCallback.ADVERTISE_FAILED_DATA_TOO_LARGE);
    return;
  }
  if (mLeAdvertisers.containsKey(callback)) {
    postCallbackFailure(callback,AdvertiseCallback.ADVERTISE_FAILED_ALREADY_STARTED);
    return;
  }
  IBluetoothGatt gatt;
  try {
    gatt=mBluetoothManager.getBluetoothGatt();
  }
 catch (  RemoteException e) {
    Log.e(TAG,"Failed to get Bluetooth gatt - ",e);
    postCallbackFailure(callback,AdvertiseCallback.ADVERTISE_FAILED_INTERNAL_ERROR);
    return;
  }
  if (!mBluetoothAdapter.isMultipleAdvertisementSupported()) {
    postCallbackFailure(callback,AdvertiseCallback.ADVERTISE_FAILED_FEATURE_UNSUPPORTED);
    return;
  }
  AdvertiseCallbackWrapper wrapper=new AdvertiseCallbackWrapper(callback,advertiseData,scanResponse,settings,gatt);
  UUID uuid=UUID.randomUUID();
  try {
    gatt.registerClient(new ParcelUuid(uuid),wrapper);
    if (wrapper.advertiseStarted()) {
      mLeAdvertisers.put(callback,wrapper);
    }
  }
 catch (  RemoteException e) {
    Log.e(TAG,"Failed to stop advertising",e);
  }
}
