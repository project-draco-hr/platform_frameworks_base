{
synchronized (this) {
    if (mClientIf == -1)     return;
    try {
      UUID uuid=UUID.randomUUID();
      mBluetoothGatt.registerClient(new ParcelUuid(uuid),this);
      wait(LE_CALLBACK_TIMEOUT_MILLIS);
    }
 catch (    InterruptedException|RemoteException e) {
      Log.e(TAG,"Failed to start registeration",e);
    }
    if (mClientIf > 0 && mIsAdvertising) {
      mLeAdvertisers.put(mAdvertiseCallback,this);
    }
 else     if (mClientIf <= 0) {
      if (mClientIf == 0)       mClientIf=-1;
      postStartFailure(mAdvertiseCallback,AdvertiseCallback.ADVERTISE_FAILED_INTERNAL_ERROR);
    }
 else {
      try {
        mBluetoothGatt.unregisterClient(mClientIf);
        mClientIf=-1;
      }
 catch (      RemoteException e) {
        Log.e(TAG,"remote exception when unregistering",e);
      }
    }
  }
}
