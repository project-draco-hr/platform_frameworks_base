{
synchronized (this) {
    if (status == AdvertiseCallback.ADVERTISE_SUCCESS) {
      isAdvertising=!isAdvertising;
      if (!isAdvertising) {
        try {
          mBluetoothGatt.unregisterClient(mClientIf);
          mClientIf=-1;
        }
 catch (        RemoteException e) {
          Log.e(TAG,"remote exception when unregistering",e);
        }
      }
 else {
        mAdvertiseCallback.onStartSuccess(null);
      }
    }
 else {
      if (!isAdvertising)       mAdvertiseCallback.onStartFailure(status);
    }
    notifyAll();
  }
}
