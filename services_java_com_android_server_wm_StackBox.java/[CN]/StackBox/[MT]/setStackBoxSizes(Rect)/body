{
  boolean change;
  if (mStack != null) {
    change=!mBounds.equals(bounds);
    if (change) {
      mBounds.set(bounds);
      mStack.setBounds(bounds);
    }
  }
 else {
    mTmpRect.set(bounds);
    if (mVertical) {
      final int height=bounds.height();
      int firstHeight=(int)(height * mWeight);
      mTmpRect.bottom=bounds.top + firstHeight;
      change=mFirst.setStackBoxSizes(mTmpRect);
      mTmpRect.top=mTmpRect.bottom;
      mTmpRect.bottom=bounds.top + height;
      change|=mSecond.setStackBoxSizes(mTmpRect);
    }
 else {
      final int width=bounds.width();
      int firstWidth=(int)(width * mWeight);
      mTmpRect.right=bounds.left + firstWidth;
      change=mFirst.setStackBoxSizes(mTmpRect);
      mTmpRect.left=mTmpRect.right;
      mTmpRect.right=bounds.left + width;
      change|=mSecond.setStackBoxSizes(mTmpRect);
    }
  }
  return change;
}
