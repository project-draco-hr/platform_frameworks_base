{
  if (mStack == null) {
    TaskStack stack=mFirst.split(stackId,relativeStackId,position,weight);
    if (stack != null) {
      return stack;
    }
    return mSecond.split(stackId,relativeStackId,position,weight);
  }
  if (mStack.mStackId != relativeStackId) {
    return null;
  }
  TaskStack stack=new TaskStack(mService,stackId,mDisplayContent);
  TaskStack firstStack;
  TaskStack secondStack;
switch (position) {
default :
case TASK_STACK_GOES_AFTER:
case TASK_STACK_GOES_BEFORE:
    mVertical=false;
  if (position == TASK_STACK_GOES_BEFORE) {
    mWeight=weight;
    firstStack=stack;
    secondStack=mStack;
  }
 else {
    mWeight=1.0f - weight;
    firstStack=mStack;
    secondStack=stack;
  }
break;
case TASK_STACK_GOES_ABOVE:
case TASK_STACK_GOES_BELOW:
mVertical=true;
if (position == TASK_STACK_GOES_ABOVE) {
mWeight=weight;
firstStack=stack;
secondStack=mStack;
}
 else {
mWeight=1.0f - weight;
firstStack=mStack;
secondStack=stack;
}
break;
}
mFirst=new StackBox(mService,mDisplayContent,this);
firstStack.mStackBox=mFirst;
mFirst.mStack=firstStack;
mSecond=new StackBox(mService,mDisplayContent,this);
secondStack.mStackBox=mSecond;
mSecond.mStack=secondStack;
mStack=null;
return stack;
}
