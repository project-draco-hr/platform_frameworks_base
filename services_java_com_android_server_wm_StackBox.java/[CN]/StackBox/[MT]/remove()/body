{
  if (mStack != null) {
    if (DEBUG_STACK)     Slog.i(TAG,"StackBox.remove: removing stackId=" + mStack.mStackId);
    mDisplayContent.mStackHistory.remove(mStack);
  }
  mDisplayContent.layoutNeeded=true;
  if (mParent == null) {
    if (DEBUG_STACK)     Slog.i(TAG,"StackBox.remove: removing top plane.");
    mDisplayContent.removeStackBox(this);
    return HOME_STACK_ID;
  }
  StackBox sibling=isFirstChild() ? mParent.mSecond : mParent.mFirst;
  StackBox grandparent=mParent.mParent;
  sibling.mParent=grandparent;
  if (grandparent == null) {
    if (DEBUG_STACK)     Slog.i(TAG,"StackBox.remove: grandparent null");
    mDisplayContent.removeStackBox(mParent);
    mDisplayContent.addStackBox(sibling,true);
  }
 else {
    if (DEBUG_STACK)     Slog.i(TAG,"StackBox.remove: grandparent getting sibling");
    if (mParent.isFirstChild()) {
      grandparent.mFirst=sibling;
    }
 else {
      grandparent.mSecond=sibling;
    }
  }
  return sibling.getStackId();
}
