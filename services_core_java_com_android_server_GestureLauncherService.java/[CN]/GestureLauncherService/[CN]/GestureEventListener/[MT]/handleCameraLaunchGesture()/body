{
  if (DBG)   Slog.d(TAG,"Received a camera launch event.");
  boolean userSetupComplete=Settings.Secure.getInt(mContext.getContentResolver(),Settings.Secure.USER_SETUP_COMPLETE,0) != 0;
  if (!userSetupComplete) {
    if (DBG)     Slog.d(TAG,String.format("userSetupComplete = %s, ignoring camera launch gesture.",userSetupComplete));
    return;
  }
  if (DBG)   Slog.d(TAG,String.format("userSetupComplete = %s, performing camera launch gesture.",userSetupComplete));
  boolean locked=mKeyGuard != null && mKeyGuard.inKeyguardRestrictedInputMode();
  String action=locked ? MediaStore.INTENT_ACTION_STILL_IMAGE_CAMERA_SECURE : MediaStore.INTENT_ACTION_STILL_IMAGE_CAMERA;
  Intent intent=new Intent(action);
  PackageManager pm=mContext.getPackageManager();
  ResolveInfo componentInfo=pm.resolveActivity(intent,PackageManager.MATCH_DEFAULT_ONLY);
  if (componentInfo == null) {
    if (DBG)     Slog.d(TAG,"Couldn't find an app to process the camera intent.");
    return;
  }
  if (mVibrator != null && mVibrator.hasVibrator()) {
    mVibrator.vibrate(1000L);
  }
  mWakeLock.acquire(500L);
  intent.setComponent(new ComponentName(componentInfo.activityInfo.packageName,componentInfo.activityInfo.name));
  intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
  mContext.startActivity(intent);
  mWakeLock.release();
}
