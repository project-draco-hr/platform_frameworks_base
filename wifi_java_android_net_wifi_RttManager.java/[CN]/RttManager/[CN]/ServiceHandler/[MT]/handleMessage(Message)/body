{
switch (msg.what) {
case AsyncChannel.CMD_CHANNEL_HALF_CONNECTED:
    if (msg.arg1 == AsyncChannel.STATUS_SUCCESSFUL) {
      sAsyncChannel.sendMessage(AsyncChannel.CMD_CHANNEL_FULL_CONNECTION);
    }
 else {
      Log.e(TAG,"Failed to set up channel connection");
      sAsyncChannel=null;
    }
  sConnected.countDown();
return;
case AsyncChannel.CMD_CHANNEL_FULLY_CONNECTED:
return;
case AsyncChannel.CMD_CHANNEL_DISCONNECTED:
Log.e(TAG,"Channel connection lost");
sAsyncChannel=null;
getLooper().quit();
return;
}
Object listener=getListener(msg.arg2);
if (listener == null) {
if (DBG) Log.d(TAG,"invalid listener key = " + msg.arg2);
return;
}
 else {
if (DBG) Log.d(TAG,"listener key = " + msg.arg2);
}
switch (msg.what) {
case CMD_OP_SUCCEEDED:
reportSuccess(listener,msg);
removeListener(msg.arg2);
break;
case CMD_OP_FAILED:
reportFailure(listener,msg);
removeListener(msg.arg2);
break;
case CMD_OP_ABORTED:
((RttListener)listener).onAborted();
removeListener(msg.arg2);
break;
default :
if (DBG) Log.d(TAG,"Ignoring message " + msg.what);
return;
}
}
