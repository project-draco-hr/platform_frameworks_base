{
  final UtteranceProgressDispatcher dispatcher=getDispatcher();
  dispatcher.dispatchOnStart();
  if (!mAudioTrack.init()) {
    dispatcher.dispatchOnError();
    return;
  }
  try {
    byte[] buffer=null;
    while ((buffer=take()) != null) {
      mAudioTrack.write(buffer);
      mLogger.onAudioDataWritten();
    }
  }
 catch (  InterruptedException ie) {
    if (DBG)     Log.d(TAG,"Interrupted waiting for buffers, cleaning up.");
  }
  mAudioTrack.waitAndRelease();
  if (mIsError) {
    dispatcher.dispatchOnError();
  }
 else {
    dispatcher.dispatchOnDone();
  }
  mLogger.onWriteData();
}
