{
  String plmn=ss.getOperatorAlphaLong();
  boolean showSpn=false;
  String spn=null;
  if (cm.getSimState().isSIMReady()) {
    showSpn=((CdmaLteUiccRecords)phone.mIccRecords).getCsimSpnDisplayCondition();
    spn=phone.mIccRecords.getServiceProviderName();
    if (TextUtils.equals(plmn,spn))     showSpn=false;
  }
  if (!TextUtils.equals(plmn,mCurPlmn) || !TextUtils.equals(spn,mCurrentSpn)) {
    boolean showPlmn=plmn != null;
    if (DBG) {
      log(String.format("updateSpnDisplay: changed sending intent" + " showPlmn='%b' plmn='%s' showSpn='%b' spn='%s'",showPlmn,plmn,showSpn,spn));
    }
    Intent intent=new Intent(Intents.SPN_STRINGS_UPDATED_ACTION);
    intent.addFlags(Intent.FLAG_RECEIVER_REPLACE_PENDING);
    intent.putExtra(Intents.EXTRA_SHOW_SPN,showSpn);
    intent.putExtra(Intents.EXTRA_SPN,spn);
    intent.putExtra(Intents.EXTRA_SHOW_PLMN,showPlmn);
    intent.putExtra(Intents.EXTRA_PLMN,plmn);
    phone.getContext().sendStickyBroadcast(intent);
  }
  mCurPlmn=plmn;
  mCurrentSpn=spn;
}
