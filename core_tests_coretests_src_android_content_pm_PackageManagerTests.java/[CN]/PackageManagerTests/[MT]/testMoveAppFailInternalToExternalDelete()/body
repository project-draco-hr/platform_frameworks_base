{
  if (Environment.isExternalStorageEmulated()) {
    return;
  }
  int installFlags=0;
  int moveFlags=PackageManager.MOVE_EXTERNAL_MEDIA;
  boolean fail=true;
  final int result=PackageManager.MOVE_FAILED_DOESNT_EXIST;
  int rawResId=R.raw.install;
  int origDefaultLoc=getDefaultInstallLoc();
  InstallParams ip=null;
  try {
    PackageManager pm=getPm();
    setInstallLoc(PackageHelper.APP_INSTALL_AUTO);
    ip=installFromRawResource("install.apk",R.raw.install,installFlags,false,false,-1,PackageInfo.INSTALL_LOCATION_UNSPECIFIED);
    GenericReceiver receiver=new DeleteReceiver(ip.pkg.packageName);
    invokeDeletePackage(ip.pkg.packageName,PackageManager.DONT_DELETE_DATA,receiver);
    assertTrue(invokeMovePackageFail(ip.pkg.packageName,moveFlags,result));
  }
 catch (  Exception e) {
    failStr(e);
  }
 finally {
    if (ip != null) {
      cleanUpInstall(ip);
    }
    setInstallLoc(origDefaultLoc);
  }
}
