{
  int installFlags=0;
  int moveFlags=PackageManager.MOVE_EXTERNAL_MEDIA;
  boolean fail=true;
  final int result=PackageManager.MOVE_FAILED_DOESNT_EXIST;
  int rawResId=R.raw.install;
  int origDefaultLoc=getInstallLoc();
  InstallParams ip=null;
  try {
    PackageManager pm=getPm();
    setInstallLoc(PackageHelper.APP_INSTALL_AUTO);
    ip=installFromRawResource("install.apk",R.raw.install,installFlags,false,false,-1,PackageInfo.INSTALL_LOCATION_UNSPECIFIED);
    pm.deletePackage(ip.pkg.packageName,null,PackageManager.DONT_DELETE_DATA);
    assertTrue(invokeMovePackageFail(ip.pkg.packageName,moveFlags,result));
  }
 catch (  Exception e) {
    failStr(e);
  }
 finally {
    if (ip != null) {
      cleanUpInstall(ip);
    }
    setInstallLoc(origDefaultLoc);
  }
}
