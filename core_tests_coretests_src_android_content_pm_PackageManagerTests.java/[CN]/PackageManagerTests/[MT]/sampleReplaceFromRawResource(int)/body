{
  InstallParams ip=sampleInstallFromRawResource(flags,false);
  boolean replace=((flags & PackageManager.INSTALL_REPLACE_EXISTING) != 0);
  Log.i(TAG,"replace=" + replace);
  GenericReceiver receiver;
  if (replace) {
    receiver=new ReplaceReceiver(ip.pkg.packageName);
    Log.i(TAG,"Creating replaceReceiver");
  }
 else {
    receiver=new InstallReceiver(ip.pkg.packageName);
  }
  try {
    invokeInstallPackage(ip.packageURI,flags,receiver,replace);
    if (replace) {
      assertInstall(ip.pkg,flags,ip.pkg.installLocation);
    }
  }
  finally {
    cleanUpInstall(ip);
  }
}
