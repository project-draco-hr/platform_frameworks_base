{
  PackageInstallObserver observer=new PackageInstallObserver();
  try {
synchronized (observer) {
      getPm().installPackage(packageURI,observer,flags,null);
      long waitTime=0;
      while ((!observer.isDone()) && (waitTime < MAX_WAIT_TIME)) {
        try {
          observer.wait(WAIT_TIME_INCR);
          waitTime+=WAIT_TIME_INCR;
        }
 catch (        InterruptedException e) {
          Log.i(TAG,"Interrupted during sleep",e);
        }
      }
      if (!observer.isDone()) {
        fail("Timed out waiting for packageInstalled callback");
      }
      assertEquals(expectedResult,observer.returnCode);
    }
  }
  finally {
  }
}
