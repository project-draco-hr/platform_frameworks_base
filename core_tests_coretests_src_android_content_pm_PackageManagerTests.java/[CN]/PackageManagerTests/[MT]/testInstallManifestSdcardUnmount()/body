{
  if (Environment.isExternalStorageEmulated()) {
    return;
  }
  boolean origState=checkMediaState(Environment.MEDIA_MOUNTED);
  try {
    assertTrue(unmountMedia());
    InstallParams ip=new InstallParams("install.apk",R.raw.install_loc_sdcard);
    installFromRawResource(ip,0,true,false,-1,PackageInfo.INSTALL_LOCATION_INTERNAL_ONLY);
  }
  finally {
    if (origState) {
      mountMedia();
    }
 else {
      unmountMedia();
    }
  }
}
