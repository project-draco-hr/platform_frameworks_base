{
  PackageMoveObserver observer=new PackageMoveObserver(pkgName);
  try {
synchronized (observer) {
      getPm().movePackage(pkgName,observer,flags);
      long waitTime=0;
      while ((!observer.isDone()) && (waitTime < MAX_WAIT_TIME)) {
        observer.wait(WAIT_TIME_INCR);
        waitTime+=WAIT_TIME_INCR;
      }
      if (!observer.isDone()) {
        throw new Exception("Timed out waiting for pkgmove callback");
      }
      assertEquals(errCode,observer.returnCode);
    }
  }
  finally {
  }
  return true;
}
