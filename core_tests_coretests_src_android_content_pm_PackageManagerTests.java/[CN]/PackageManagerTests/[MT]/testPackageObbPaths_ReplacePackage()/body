{
  InstallParams ip=sampleInstallFromRawResource(PackageManager.INSTALL_INTERNAL,false);
  try {
    final PackageManager pm=getPm();
    final String[] paths=new String[]{"/example/test1","/example/test2"};
    pm.setPackageObbPaths(ip.pkg.packageName,paths.clone());
    Log.i(TAG,"Creating replaceReceiver");
    final GenericReceiver receiver=new ReplaceReceiver(ip.pkg.packageName);
    final int flags=PackageManager.INSTALL_REPLACE_EXISTING;
    invokeInstallPackage(ip.packageURI,flags,receiver);
    assertInstall(ip.pkg,flags,ip.pkg.installLocation);
    assertTrue("Previously set paths should be the same as the returned paths.",Arrays.equals(paths,pm.getPackageObbPaths(ip.pkg.packageName)));
  }
  finally {
    cleanUpInstall(ip);
  }
}
