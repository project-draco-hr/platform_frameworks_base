{
  if (!mDemoMode && command.equals(COMMAND_ENTER)) {
    mBatteryController.removeStateChangedCallback(this);
    mDemoMode=true;
    if (mListening) {
      mBatteryController.removeStateChangedCallback(this);
    }
  }
 else   if (mDemoMode && command.equals(COMMAND_EXIT)) {
    mDemoMode=false;
    postInvalidate();
    if (mListening) {
      mBatteryController.addStateChangedCallback(this);
    }
  }
 else   if (mDemoMode && command.equals(COMMAND_BATTERY)) {
    String level=args.getString("level");
    String plugged=args.getString("plugged");
    if (level != null) {
      mLevel=Math.min(Math.max(Integer.parseInt(level),0),100);
    }
    if (plugged != null) {
      mPluggedIn=Boolean.parseBoolean(plugged);
    }
    postInvalidate();
  }
}
