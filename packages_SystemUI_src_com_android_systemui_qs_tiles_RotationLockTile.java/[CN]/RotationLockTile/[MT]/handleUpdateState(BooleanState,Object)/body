{
  if (mController == null)   return;
  final boolean rotationLocked=mController.isRotationLocked();
  state.visible=mController.isRotationLockAffordanceVisible();
  final Resources res=mContext.getResources();
  state.value=rotationLocked;
  if (rotationLocked) {
    final boolean portrait=res.getConfiguration().orientation != Configuration.ORIENTATION_LANDSCAPE;
    final int label=portrait ? R.string.quick_settings_rotation_locked_portrait_label : R.string.quick_settings_rotation_locked_landscape_label;
    final int icon=portrait ? R.drawable.ic_qs_rotation_portrait : R.drawable.ic_qs_rotation_landscape;
    state.label=mContext.getString(label);
    state.icon=mContext.getDrawable(icon);
  }
 else {
    state.label=mContext.getString(R.string.quick_settings_rotation_unlocked_label);
    state.icon=res.getDrawable(R.drawable.ic_qs_rotation_unlocked);
  }
  state.contentDescription=getAccessibilityString(R.string.accessibility_rotation_lock_on_portrait,R.string.accessibility_rotation_lock_on_landscape,R.string.accessibility_rotation_lock_off);
}
