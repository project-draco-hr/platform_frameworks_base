{
  if (mController == null)   return;
  final boolean rotationLocked=arg != null ? ((UserBoolean)arg).value : mController.isRotationLocked();
  final boolean userInitiated=arg != null ? ((UserBoolean)arg).userInitiated : false;
  state.visible=mController.isRotationLockAffordanceVisible();
  if (state.value == rotationLocked && state.contentDescription != null) {
    return;
  }
  state.value=rotationLocked;
  final boolean portrait=mContext.getResources().getConfiguration().orientation != Configuration.ORIENTATION_LANDSCAPE;
  final AnimationIcon icon;
  if (rotationLocked) {
    final int label=portrait ? R.string.quick_settings_rotation_locked_portrait_label : R.string.quick_settings_rotation_locked_landscape_label;
    state.label=mContext.getString(label);
    icon=portrait ? mAutoToPortrait : mAutoToLandscape;
  }
 else {
    state.label=mContext.getString(R.string.quick_settings_rotation_unlocked_label);
    icon=portrait ? mPortraitToAuto : mLandscapeToAuto;
  }
  icon.setAllowAnimation(userInitiated);
  state.icon=icon;
  state.contentDescription=getAccessibilityString(rotationLocked,R.string.accessibility_rotation_lock_on_portrait,R.string.accessibility_rotation_lock_on_landscape,R.string.accessibility_rotation_lock_off);
}
