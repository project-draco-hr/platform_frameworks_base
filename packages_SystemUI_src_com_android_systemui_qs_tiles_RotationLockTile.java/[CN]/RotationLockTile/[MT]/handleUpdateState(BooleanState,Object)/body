{
  if (mController == null)   return;
  final boolean rotationLocked=mController.isRotationLocked();
  state.visible=mController.isRotationLockAffordanceVisible();
  state.value=!rotationLocked;
  if (rotationLocked) {
    final int lockOrientation=mController.getRotationLockOrientation();
    final int label=lockOrientation == Configuration.ORIENTATION_PORTRAIT ? R.string.quick_settings_rotation_locked_portrait_label : lockOrientation == Configuration.ORIENTATION_LANDSCAPE ? R.string.quick_settings_rotation_locked_landscape_label : R.string.quick_settings_rotation_locked_label;
    state.iconId=R.drawable.ic_qs_rotation_lock;
    state.label=mContext.getString(label);
  }
 else {
    state.iconId=R.drawable.ic_qs_rotation;
    state.label=mContext.getString(R.string.quick_settings_rotation_unlocked_label);
  }
}
