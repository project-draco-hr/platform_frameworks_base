{
  final int userId=uss.mHandle.getIdentifier();
synchronized (mService) {
    if (mStartedUsers.get(userId) != uss)     return;
    if (uss.state == UserState.STATE_BOOTING) {
      uss.setState(UserState.STATE_RUNNING_LOCKED);
      Intent intent=new Intent(Intent.ACTION_LOCKED_BOOT_COMPLETED,null);
      intent.putExtra(Intent.EXTRA_USER_HANDLE,userId);
      intent.addFlags(Intent.FLAG_RECEIVER_NO_ABORT);
      mService.broadcastIntentLocked(null,null,intent,null,resultTo,0,null,null,new String[]{android.Manifest.permission.RECEIVE_BOOT_COMPLETED},AppOpsManager.OP_NONE,null,true,false,MY_PID,SYSTEM_UID,userId);
    }
    maybeUnlockUser(userId);
  }
}
