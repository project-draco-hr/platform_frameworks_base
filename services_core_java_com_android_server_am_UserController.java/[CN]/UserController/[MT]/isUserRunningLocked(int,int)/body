{
  UserState state=getStartedUserStateLocked(userId);
  if (state == null) {
    return false;
  }
  if ((flags & ActivityManager.FLAG_OR_STOPPED) != 0) {
    return true;
  }
  final boolean unlocked;
switch (state.state) {
case UserState.STATE_STOPPING:
case UserState.STATE_SHUTDOWN:
default :
    return false;
case UserState.STATE_BOOTING:
case UserState.STATE_RUNNING_LOCKED:
  unlocked=false;
break;
case UserState.STATE_RUNNING_UNLOCKING:
case UserState.STATE_RUNNING_UNLOCKED:
unlocked=true;
break;
}
if ((flags & ActivityManager.FLAG_AND_LOCKED) != 0) {
return !unlocked;
}
if ((flags & ActivityManager.FLAG_AND_UNLOCKED) != 0) {
return unlocked;
}
return true;
}
