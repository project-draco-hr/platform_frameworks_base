{
synchronized (mService) {
    if (mStartedUsers.get(userId) == null) {
      return false;
    }
  }
  if (!mLockPatternUtils.isSeparateProfileChallengeEnabled(userId)) {
    return false;
  }
  final KeyguardManager km=(KeyguardManager)mService.mContext.getSystemService(KEYGUARD_SERVICE);
  return km.isDeviceLocked(userId) && km.isDeviceSecure(userId);
}
