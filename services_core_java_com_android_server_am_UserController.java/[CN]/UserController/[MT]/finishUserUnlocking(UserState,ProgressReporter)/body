{
  final int userId=uss.mHandle.getIdentifier();
synchronized (mService) {
    if (mStartedUsers.get(uss.mHandle.getIdentifier()) != uss)     return;
    if (!isUserKeyUnlocked(userId))     return;
    if (uss.setState(STATE_RUNNING_LOCKED,STATE_RUNNING_UNLOCKING)) {
      progress.setProgress(5,mService.mContext.getString(R.string.android_start_title));
      mUserManager.onBeforeUnlockUser(userId);
      progress.setProgress(20);
      final UserInfo info=getUserInfo(userId);
      if (!Objects.equals(info.lastLoggedInFingerprint,Build.FINGERPRINT)) {
        progress.startSegment(80);
        new PreBootBroadcaster(mService,userId,progress){
          @Override public void onFinished(){
            finishUserUnlocked(uss,progress);
          }
        }
.sendNext();
      }
 else {
        finishUserUnlocked(uss,progress);
      }
    }
  }
}
