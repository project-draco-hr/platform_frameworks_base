{
synchronized (mService) {
    final UserState uss=mStartedUsers.get(userId);
    if (uss.state == UserState.STATE_RUNNING)     return true;
  }
  if (!isUserKeyUnlocked(userId)) {
    final UserInfo userInfo=getUserInfo(userId);
    final IMountService mountService=getMountService();
    try {
      mountService.unlockUserKey(userId,userInfo.serialNumber,token);
    }
 catch (    RemoteException|RuntimeException e) {
      Slog.w(TAG,"Failed to unlock: " + e.getMessage());
      return false;
    }
  }
synchronized (mService) {
    final UserState uss=mStartedUsers.get(userId);
    finishUserUnlock(uss);
  }
  return true;
}
