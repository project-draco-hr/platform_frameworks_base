{
  if (DEBUG) {
    Log.d(LOG_TAG,"Selection string: " + selection);
  }
  if (token != mScheduledToken) {
    if (DEBUG) {
      Log.d(LOG_TAG,"Selection string has incorrect token: " + token);
    }
    return;
  }
  mIsLastSelectionStringNull=(selection == null);
  final AccessibilityEvent event=mScheduledEvent;
  mScheduledEvent=null;
  if ((event != null) && (selection != null)) {
    event.getText().add(selection);
    event.setFromIndex(0);
    event.setToIndex(selection.length());
    sendAccessibilityEvent(event);
    event.recycle();
  }
}
