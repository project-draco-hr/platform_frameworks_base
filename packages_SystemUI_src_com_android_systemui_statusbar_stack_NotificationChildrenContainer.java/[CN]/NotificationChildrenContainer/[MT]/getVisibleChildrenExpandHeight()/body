{
  int intrinsicHeight=mNotificationHeaderMargin + mNotificatonTopPadding + mDividerHeight;
  int visibleChildren=0;
  int childCount=mChildren.size();
  int maxAllowedVisibleChildren=getMaxAllowedVisibleChildren(true);
  for (int i=0; i < childCount; i++) {
    if (visibleChildren >= maxAllowedVisibleChildren) {
      break;
    }
    ExpandableNotificationRow child=mChildren.get(i);
    float childHeight=child.isExpanded(true) ? child.getMaxExpandHeight() : child.getShowingLayout().getMinHeight(true);
    intrinsicHeight+=childHeight;
    visibleChildren++;
  }
  return intrinsicHeight;
}
