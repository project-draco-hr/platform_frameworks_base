{
  int childCount=mChildren.size();
  boolean firstChild=true;
  StackViewState sourceState=new StackViewState();
  ViewState dividerState=new ViewState();
  for (int i=0; i < childCount; i++) {
    ExpandableNotificationRow child=mChildren.get(i);
    StackViewState viewState=state.getViewStateForView(child);
    if (child.getVisibility() == View.GONE) {
      continue;
    }
    if (!firstChild) {
      View divider=mDividers.get(i - 1);
      dividerState.initFrom(divider);
      dividerState.yTranslation=viewState.yTranslation - (mChildPadding + mDividerHeight) / 2.0f + mNotificationAppearDistance;
      dividerState.alpha=0;
      state.applyViewState(divider,dividerState);
    }
 else {
      firstChild=false;
    }
    sourceState.copyFrom(viewState);
    sourceState.alpha=0;
    sourceState.yTranslation+=mNotificationAppearDistance;
    state.applyState(child,sourceState);
  }
  mCollapseButton.setAlpha(0);
  mCollapseDivider.setAlpha(0);
  mCollapseDivider.setTranslationY(mNotificationAppearDistance / 4);
}
