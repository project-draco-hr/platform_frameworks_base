{
  int intrinsicHeight=mNotificationHeaderHeight;
  if (mChildrenExpanded) {
    intrinsicHeight+=mNotificatonTopPadding;
  }
  int visibleChildren=0;
  int childCount=mChildren.size();
  for (int i=0; i < childCount; i++) {
    if (visibleChildren >= maxAllowedVisibleChildren) {
      break;
    }
    ExpandableNotificationRow child=mChildren.get(i);
    intrinsicHeight+=child.getIntrinsicHeight();
    visibleChildren++;
  }
  if (visibleChildren > 0) {
    if (mChildrenExpanded) {
      intrinsicHeight+=visibleChildren * mDividerHeight;
    }
 else {
      intrinsicHeight+=(visibleChildren - 1) * mChildPadding;
    }
  }
  if (!mChildrenExpanded) {
    intrinsicHeight+=mCollapsedBottompadding;
  }
  return intrinsicHeight;
}
