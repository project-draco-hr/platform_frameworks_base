{
  int childCount=mChildren.size();
  boolean firstChild=true;
  for (int i=0; i < childCount; i++) {
    View child=mChildren.get(i);
    boolean viewGone=child.getVisibility() == View.GONE;
    if (i != 0) {
      View divider=mDividers.get(i - 1);
      int dividerVisibility=divider.getVisibility();
      int newVisibility=viewGone ? INVISIBLE : VISIBLE;
      if (dividerVisibility != newVisibility) {
        divider.setVisibility(newVisibility);
      }
    }
    if (viewGone) {
      continue;
    }
    child.layout(0,0,getWidth(),child.getMeasuredHeight());
    if (!firstChild) {
      mDividers.get(i - 1).layout(0,0,getWidth(),mDividerHeight);
    }
 else {
      firstChild=false;
    }
  }
  mCollapseButton.layout(0,0,getWidth(),mCollapseButtonHeight);
  mCollapseDivider.layout(0,mCollapseButtonHeight - mDividerHeight,getWidth(),mCollapseButtonHeight);
}
