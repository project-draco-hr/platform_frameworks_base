{
  long start;
  if (LOGD)   start=System.currentTimeMillis();
  updateRulesForDeviceIdleLocked();
  updateRulesForAppIdleLocked();
  updateRulesForRestrictPowerLocked();
  updateRulesForRestrictBackgroundLocked();
  setRestrictBackgroundLocked(mRestrictBackground);
  if (restrictedNetworksChanged) {
    normalizePoliciesLocked();
    updateNetworkRulesLocked();
  }
  if (LOGD) {
    final long delta=System.currentTimeMillis() - start;
    Slog.d(TAG,"updateRulesForGlobalChangeLocked(" + restrictedNetworksChanged + ") took "+ delta+ "ms");
  }
}
