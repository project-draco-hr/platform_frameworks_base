{
  final NetworkIdentity probeIdent=new NetworkIdentity(TYPE_MOBILE,TelephonyManager.NETWORK_TYPE_UNKNOWN,subscriberId,null,false);
  for (int i=mNetworkPolicy.size() - 1; i >= 0; i--) {
    final NetworkTemplate template=mNetworkPolicy.keyAt(i);
    if (template.matches(probeIdent)) {
      if (LOGD) {
        Slog.d(TAG,"Found template " + template + " which matches subscriber "+ NetworkIdentity.scrubSubscriberId(subscriberId));
      }
      return;
    }
  }
  Slog.i(TAG,"No policy for subscriber " + NetworkIdentity.scrubSubscriberId(subscriberId) + "; generating default policy");
  final long warningBytes=mContext.getResources().getInteger(com.android.internal.R.integer.config_networkPolicyDefaultWarning) * MB_IN_BYTES;
  final Time time=new Time();
  time.setToNow();
  final int cycleDay=time.monthDay;
  final String cycleTimezone=time.timezone;
  final NetworkTemplate template=buildTemplateMobileAll(subscriberId);
  final NetworkPolicy policy=new NetworkPolicy(template,cycleDay,cycleTimezone,warningBytes,LIMIT_DISABLED,SNOOZE_NEVER,SNOOZE_NEVER,true,true);
  addNetworkPolicyLocked(policy);
}
