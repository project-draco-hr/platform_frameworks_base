{
  if (LOGV)   Slog.v(TAG,"ensureActiveMobilePolicyLocked()");
  if (mSuppressDefaultPolicy)   return;
  final TelephonyManager tele=TelephonyManager.from(mContext);
  if (tele.getSimState() != SIM_STATE_READY)   return;
  final String subscriberId=tele.getSubscriberId();
  final NetworkIdentity probeIdent=new NetworkIdentity(TYPE_MOBILE,TelephonyManager.NETWORK_TYPE_UNKNOWN,subscriberId,null,false);
  boolean mobileDefined=false;
  for (  NetworkPolicy policy : mNetworkPolicy.values()) {
    if (policy.template.matches(probeIdent)) {
      mobileDefined=true;
    }
  }
  if (!mobileDefined) {
    Slog.i(TAG,"no policy for active mobile network; generating default policy");
    final long warningBytes=mContext.getResources().getInteger(com.android.internal.R.integer.config_networkPolicyDefaultWarning) * MB_IN_BYTES;
    final Time time=new Time();
    time.setToNow();
    final int cycleDay=time.monthDay;
    final String cycleTimezone=time.timezone;
    final NetworkTemplate template=buildTemplateMobileAll(subscriberId);
    final NetworkPolicy policy=new NetworkPolicy(template,cycleDay,cycleTimezone,warningBytes,LIMIT_DISABLED,SNOOZE_NEVER,SNOOZE_NEVER,true,true);
    addNetworkPolicyLocked(policy);
  }
}
