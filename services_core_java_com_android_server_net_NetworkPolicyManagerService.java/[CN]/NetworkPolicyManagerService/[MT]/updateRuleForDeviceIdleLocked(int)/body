{
  if (mDeviceIdleMode) {
    int appId=UserHandle.getAppId(uid);
    if (mPowerSaveTempWhitelistAppIds.get(appId) || mPowerSaveWhitelistAppIds.get(appId) || isProcStateAllowedWhileIdle(mUidState.get(uid))) {
      setUidFirewallRule(FIREWALL_CHAIN_DOZABLE,uid,FIREWALL_RULE_ALLOW);
    }
 else {
      setUidFirewallRule(FIREWALL_CHAIN_DOZABLE,uid,FIREWALL_RULE_DEFAULT);
    }
  }
  updateRulesForUidLocked(uid);
}
