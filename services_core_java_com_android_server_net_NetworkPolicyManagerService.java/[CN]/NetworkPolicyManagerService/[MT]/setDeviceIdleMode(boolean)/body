{
  mContext.enforceCallingOrSelfPermission(MANAGE_NETWORK_POLICY,TAG);
synchronized (mRulesLock) {
    if (mDeviceIdleMode != enabled) {
      mDeviceIdleMode=enabled;
      if (mSystemReady) {
        updateRulesForDeviceIdleLocked();
      }
      if (enabled) {
        EventLogTags.writeDeviceIdleOnPhase("net");
      }
 else {
        EventLogTags.writeDeviceIdleOffPhase("net");
      }
    }
  }
}
