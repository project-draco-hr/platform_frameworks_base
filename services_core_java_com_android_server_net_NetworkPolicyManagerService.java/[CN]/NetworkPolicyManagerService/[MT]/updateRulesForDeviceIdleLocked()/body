{
  if (mDeviceIdleMode) {
    SparseIntArray uidRules=new SparseIntArray();
    final List<UserInfo> users=mUserManager.getUsers();
    for (    UserInfo user : users) {
      for (int i=mPowerSaveTempWhitelistAppIds.size() - 1; i >= 0; i--) {
        int appId=mPowerSaveTempWhitelistAppIds.keyAt(i);
        int uid=UserHandle.getUid(user.id,appId);
        uidRules.put(uid,FIREWALL_RULE_ALLOW);
      }
      for (int i=mPowerSaveWhitelistAppIds.size() - 1; i >= 0; i--) {
        int appId=mPowerSaveWhitelistAppIds.keyAt(i);
        int uid=UserHandle.getUid(user.id,appId);
        uidRules.put(uid,FIREWALL_RULE_ALLOW);
      }
    }
    setUidFirewallRules(FIREWALL_CHAIN_DOZABLE,uidRules);
  }
  enableFirewallChain(FIREWALL_CHAIN_DOZABLE,mDeviceIdleMode);
}
