{
  final NetworkIdentity ident=NetworkIdentity.buildNetworkIdentity(mContext,state);
  final NetworkPolicy policy;
synchronized (mRulesLock) {
    policy=findPolicyForNetworkLocked(ident);
  }
  if (policy == null || !policy.hasCycle()) {
    return null;
  }
  final long currentTime=currentTimeMillis();
  final long start=computeLastCycleBoundary(currentTime,policy);
  final long end=currentTime;
  final long totalBytes=getTotalBytes(policy.template,start,end);
  final long softLimitBytes=policy.warningBytes != WARNING_DISABLED ? policy.warningBytes : NetworkQuotaInfo.NO_LIMIT;
  final long hardLimitBytes=policy.limitBytes != LIMIT_DISABLED ? policy.limitBytes : NetworkQuotaInfo.NO_LIMIT;
  return new NetworkQuotaInfo(totalBytes,softLimitBytes,hardLimitBytes);
}
