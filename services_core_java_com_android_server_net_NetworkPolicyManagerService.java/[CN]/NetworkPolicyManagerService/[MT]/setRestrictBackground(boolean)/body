{
  mContext.enforceCallingOrSelfPermission(MANAGE_NETWORK_POLICY,TAG);
  final long token=Binder.clearCallingIdentity();
  try {
    maybeRefreshTrustedTime();
synchronized (mRulesLock) {
      mRestrictBackground=restrictBackground;
      updateRulesForRestrictDataLocked();
      updateNotificationsLocked();
      writePolicyLocked();
    }
  }
  finally {
    Binder.restoreCallingIdentity(token);
  }
  mHandler.obtainMessage(MSG_RESTRICT_BACKGROUND_CHANGED,restrictBackground ? 1 : 0,0).sendToTarget();
}
