{
  mContext=checkNotNull(context,"missing context");
  mActivityManager=checkNotNull(activityManager,"missing activityManager");
  mPowerManager=checkNotNull(powerManager,"missing powerManager");
  mNetworkStats=checkNotNull(networkStats,"missing networkStats");
  mNetworkManager=checkNotNull(networkManagement,"missing networkManagement");
  mDeviceIdleController=IDeviceIdleController.Stub.asInterface(ServiceManager.getService(Context.DEVICE_IDLE_CONTROLLER));
  mTime=checkNotNull(time,"missing TrustedTime");
  mUserManager=(UserManager)mContext.getSystemService(Context.USER_SERVICE);
  HandlerThread thread=new HandlerThread(TAG);
  thread.start();
  mHandler=new Handler(thread.getLooper(),mHandlerCallback);
  mSuppressDefaultPolicy=suppressDefaultPolicy;
  mPolicyFile=new AtomicFile(new File(systemDir,"netpolicy.xml"));
  mAppOps=context.getSystemService(AppOpsManager.class);
  final String notificationComponent=context.getString(R.string.config_networkPolicyNotificationComponent);
  mNotificationComponent=notificationComponent != null ? ComponentName.unflattenFromString(notificationComponent) : null;
}
