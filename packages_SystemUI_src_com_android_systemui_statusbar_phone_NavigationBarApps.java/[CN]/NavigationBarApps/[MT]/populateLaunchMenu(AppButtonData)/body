{
  Menu menu=mPopupMenu.getMenu();
  int taskCount=appButtonData.getTaskCount();
  if (taskCount == 0) {
    menu.add("- TBD MENU ITEM -");
    return;
  }
  for (int i=0; i < taskCount; ++i) {
    final RecentTaskInfo taskInfo=appButtonData.tasks.get(i);
    MenuItem item=menu.add(getActivityForTask(taskInfo).flattenToShortString());
    item.setOnMenuItemClickListener(new MenuItem.OnMenuItemClickListener(){
      @Override public boolean onMenuItemClick(      MenuItem item){
        activateTask(taskInfo.persistentId);
        return true;
      }
    }
);
  }
}
