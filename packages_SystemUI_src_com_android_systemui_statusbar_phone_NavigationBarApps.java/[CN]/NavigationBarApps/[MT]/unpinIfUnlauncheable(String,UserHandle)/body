{
  boolean appsWereUnpinned=false;
  for (int i=getChildCount() - 1; i >= 0; --i) {
    View child=getChildAt(i);
    AppButtonData appButtonData=(AppButtonData)child.getTag();
    if (appButtonData == null)     continue;
    if (!appButtonData.pinned)     continue;
    AppInfo appInfo=appButtonData.appInfo;
    if (!appInfo.getUser().equals(user))     continue;
    ComponentName appComponentName=appInfo.getComponentName();
    if (!appComponentName.getPackageName().equals(packageName))     continue;
    if (sAppsModel.resolveApp(appInfo) != null) {
      continue;
    }
    appButtonData.pinned=false;
    appsWereUnpinned=true;
    if (appButtonData.isEmpty()) {
      removeViewAt(i);
    }
  }
  if (appsWereUnpinned) {
    savePinnedApps();
  }
}
