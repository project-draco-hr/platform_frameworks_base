{
  SparseIntArray formatsMap=getFormatsMap(output);
  int size=formatsMap.size();
  if (formatsMap.indexOfKey(HAL_PIXEL_FORMAT_RAW_OPAQUE) >= 0) {
    size-=1;
  }
  if (output) {
    size+=mDepthOutputFormats.size();
  }
  return size;
}
