{
  checkNotNull(surface,"surface must not be null");
  Size surfaceSize;
  int surfaceFormat=-1;
  try {
    surfaceSize=LegacyCameraDevice.getSurfaceSize(surface);
    surfaceFormat=LegacyCameraDevice.detectSurfaceType(surface);
  }
 catch (  BufferQueueAbandonedException e) {
    throw new IllegalArgumentException("Abandoned surface",e);
  }
  boolean isFlexible=LegacyCameraDevice.isFlexibleConsumer(surface);
  if ((surfaceFormat >= LegacyMetadataMapper.HAL_PIXEL_FORMAT_RGBA_8888 && surfaceFormat <= LegacyMetadataMapper.HAL_PIXEL_FORMAT_BGRA_8888)) {
    surfaceFormat=LegacyMetadataMapper.HAL_PIXEL_FORMAT_IMPLEMENTATION_DEFINED;
  }
  for (  StreamConfiguration config : mConfigurations) {
    if (config.getFormat() == surfaceFormat && config.isOutput()) {
      if (config.getSize().equals(surfaceSize)) {
        return true;
      }
 else       if (isFlexible && (config.getSize().getWidth() <= LegacyCameraDevice.MAX_DIMEN_FOR_ROUNDING)) {
        return true;
      }
    }
  }
  return false;
}
