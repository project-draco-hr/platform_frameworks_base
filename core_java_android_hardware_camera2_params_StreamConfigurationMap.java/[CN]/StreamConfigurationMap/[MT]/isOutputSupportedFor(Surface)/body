{
  checkNotNull(surface,"surface must not be null");
  Size surfaceSize=SurfaceUtils.getSurfaceSize(surface);
  int surfaceFormat=SurfaceUtils.getSurfaceFormat(surface);
  int surfaceDataspace=SurfaceUtils.getSurfaceDataspace(surface);
  boolean isFlexible=SurfaceUtils.isFlexibleConsumer(surface);
  if ((surfaceFormat >= LegacyMetadataMapper.HAL_PIXEL_FORMAT_RGBA_8888 && surfaceFormat <= LegacyMetadataMapper.HAL_PIXEL_FORMAT_BGRA_8888)) {
    surfaceFormat=HAL_PIXEL_FORMAT_IMPLEMENTATION_DEFINED;
  }
  StreamConfiguration[] configs=surfaceDataspace != HAL_DATASPACE_DEPTH ? mConfigurations : mDepthConfigurations;
  for (  StreamConfiguration config : configs) {
    if (config.getFormat() == surfaceFormat && config.isOutput()) {
      if (config.getSize().equals(surfaceSize)) {
        return true;
      }
 else       if (isFlexible && (config.getSize().getWidth() <= LegacyCameraDevice.MAX_DIMEN_FOR_ROUNDING)) {
        return true;
      }
    }
  }
  return false;
}
