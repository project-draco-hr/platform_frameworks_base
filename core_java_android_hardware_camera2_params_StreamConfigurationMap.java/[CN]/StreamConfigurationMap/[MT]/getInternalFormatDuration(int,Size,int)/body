{
  if (!arrayContains(getInternalFormatSizes(format,true),size)) {
    throw new IllegalArgumentException("size was not supported");
  }
  StreamConfigurationDuration[] durations=getDurations(duration);
  for (  StreamConfigurationDuration configurationDuration : durations) {
    if (configurationDuration.getFormat() == format && configurationDuration.getWidth() == size.getWidth() && configurationDuration.getHeight() == size.getHeight()) {
      return configurationDuration.getDuration();
    }
  }
  return getDurationDefault(duration);
}
