{
  if (format == HAL_PIXEL_FORMAT_RAW_OPAQUE) {
    Log.w(TAG,"RAW_OPAQUE is not yet a published format; allowing it anyway");
    return format;
  }
  if (!ImageFormat.isPublicFormat(format) && !PixelFormat.isPublicFormat(format)) {
    throw new IllegalArgumentException(String.format("format 0x%x was not defined in either ImageFormat or PixelFormat",format));
  }
  return format;
}
