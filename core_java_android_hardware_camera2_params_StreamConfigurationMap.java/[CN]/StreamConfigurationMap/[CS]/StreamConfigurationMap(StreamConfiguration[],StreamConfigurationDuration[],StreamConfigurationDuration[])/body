{
  mConfigurations=checkArrayElementsNotNull(configurations,"configurations");
  mMinFrameDurations=checkArrayElementsNotNull(minFrameDurations,"minFrameDurations");
  mStallDurations=checkArrayElementsNotNull(stallDurations,"stallDurations");
  for (  StreamConfiguration config : configurations) {
    HashMap<Integer,Integer> map=config.isOutput() ? mOutputFormats : mInputFormats;
    Integer count=map.get(config.getFormat());
    if (count == null) {
      count=0;
    }
    count=count + 1;
    map.put(config.getFormat(),count);
  }
  if (!mOutputFormats.containsKey(HAL_PIXEL_FORMAT_IMPLEMENTATION_DEFINED)) {
    throw new AssertionError("At least one stream configuration for IMPLEMENTATION_DEFINED must exist");
  }
}
