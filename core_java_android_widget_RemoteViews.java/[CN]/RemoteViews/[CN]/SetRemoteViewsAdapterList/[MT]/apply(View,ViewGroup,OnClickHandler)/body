{
  final View target=root.findViewById(viewId);
  if (target == null)   return;
  if (!(rootParent instanceof AppWidgetHostView)) {
    Log.e(LOG_TAG,"SetRemoteViewsAdapterIntent action can only be used for " + "AppWidgets (root id: " + viewId + ")");
    return;
  }
  if (!(target instanceof AbsListView) && !(target instanceof AdapterViewAnimator)) {
    Log.e(LOG_TAG,"Cannot setRemoteViewsAdapter on a view which is not " + "an AbsListView or AdapterViewAnimator (id: " + viewId + ")");
    return;
  }
  if (target instanceof AbsListView) {
    AbsListView v=(AbsListView)target;
    Adapter a=v.getAdapter();
    if (a instanceof RemoteViewsListAdapter && viewTypeCount <= a.getViewTypeCount()) {
      ((RemoteViewsListAdapter)a).setViewsList(list);
    }
 else {
      v.setAdapter(new RemoteViewsListAdapter(v.getContext(),list,viewTypeCount));
    }
  }
 else   if (target instanceof AdapterViewAnimator) {
    AdapterViewAnimator v=(AdapterViewAnimator)target;
    Adapter a=v.getAdapter();
    if (a instanceof RemoteViewsListAdapter && viewTypeCount <= a.getViewTypeCount()) {
      ((RemoteViewsListAdapter)a).setViewsList(list);
    }
 else {
      v.setAdapter(new RemoteViewsListAdapter(v.getContext(),list,viewTypeCount));
    }
  }
}
