{
  try (BufferedReader in=new BufferedReader(new FileReader(LAST_INSTALL_FILE))){
    String line=null;
    int bytesWritten=-1, bytesStashed=-1;
    int timeTotal=-1;
    while ((line=in.readLine()) != null) {
      int numIndex=line.indexOf(':');
      if (numIndex == -1 || numIndex + 1 >= line.length()) {
        continue;
      }
      String numString=line.substring(numIndex + 1).trim();
      int parsedNum;
      try {
        parsedNum=Integer.parseInt(numString);
      }
 catch (      NumberFormatException ignored) {
        Log.e(TAG,"Failed to parse numbers in " + line);
        continue;
      }
      if (line.startsWith("time")) {
        timeTotal=parsedNum;
      }
 else       if (line.startsWith("bytes_written")) {
        bytesWritten=(bytesWritten == -1) ? parsedNum : bytesWritten + parsedNum;
      }
 else       if (line.startsWith("bytes_stashed")) {
        bytesStashed=(bytesStashed == -1) ? parsedNum : bytesStashed + parsedNum;
      }
    }
    if (timeTotal != -1) {
      MetricsLogger.histogram(context,"ota_time_total",timeTotal);
    }
    if (bytesWritten != -1) {
      MetricsLogger.histogram(context,"ota_bytes_written",bytesWritten);
    }
    if (bytesStashed != -1) {
      MetricsLogger.histogram(context,"ota_bytes_stashed",bytesStashed);
    }
  }
 catch (  IOException ignored) {
    Log.e(TAG,"Failed to read lines in last_install",ignored);
  }
}
