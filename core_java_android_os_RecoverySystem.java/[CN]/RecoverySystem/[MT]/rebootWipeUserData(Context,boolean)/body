{
  final ConditionVariable condition=new ConditionVariable();
  Intent intent=new Intent("android.intent.action.MASTER_CLEAR_NOTIFICATION");
  intent.addFlags(Intent.FLAG_RECEIVER_FOREGROUND);
  context.sendOrderedBroadcastAsUser(intent,UserHandle.OWNER,android.Manifest.permission.MASTER_CLEAR,new BroadcastReceiver(){
    @Override public void onReceive(    Context context,    Intent intent){
      condition.open();
    }
  }
,null,0,null,null);
  condition.block();
  String shutdownArg="";
  if (shutdown) {
    shutdownArg="--shutdown_after\n";
  }
  bootCommand(context,shutdownArg + "--wipe_data\n--locale=" + Locale.getDefault().toString());
}
