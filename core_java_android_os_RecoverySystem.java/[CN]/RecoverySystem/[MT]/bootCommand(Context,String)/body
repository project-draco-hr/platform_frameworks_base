{
  RECOVERY_DIR.mkdirs();
  COMMAND_FILE.delete();
  LOG_FILE.delete();
  FileWriter command=new FileWriter(COMMAND_FILE);
  try {
    for (    String arg : args) {
      if (!TextUtils.isEmpty(arg)) {
        command.write(arg);
        command.write("\n");
      }
    }
  }
  finally {
    command.close();
  }
  PowerManager pm=(PowerManager)context.getSystemService(Context.POWER_SERVICE);
  pm.reboot(PowerManager.REBOOT_RECOVERY);
  throw new IOException("Reboot failed (no permissions?)");
}
