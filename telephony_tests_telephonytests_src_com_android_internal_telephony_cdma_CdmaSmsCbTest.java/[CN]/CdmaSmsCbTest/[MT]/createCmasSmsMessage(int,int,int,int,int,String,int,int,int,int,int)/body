{
  BitwiseOutputStream cmasBos=new BitwiseOutputStream(10);
  cmasBos.write(8,0);
  if (body != null) {
    cmasBos.write(8,0);
    encodeBody(encoding,body,true,cmasBos);
  }
  if (cmasCategory != SmsCbCmasInfo.CMAS_CATEGORY_UNKNOWN) {
    cmasBos.write(8,1);
    cmasBos.write(8,4);
    cmasBos.write(8,(cmasCategory & 0xff));
    cmasBos.write(8,(responseType & 0xff));
    cmasBos.write(4,(severity & 0x0f));
    cmasBos.write(4,(urgency & 0x0f));
    cmasBos.write(4,(certainty & 0x0f));
    cmasBos.write(4,0);
  }
  byte[] cmasUserData=cmasBos.toByteArray();
  Parcel p=createBroadcastParcel(serviceCategory);
  BitwiseOutputStream bos=createBearerDataStream(messageId,priority,language);
  bos.write(8,SUBPARAM_USER_DATA);
  bos.write(8,cmasUserData.length + 2);
  bos.write(5,UserData.ENCODING_OCTET);
  bos.write(8,cmasUserData.length);
  bos.writeByteArray(cmasUserData.length * 8,cmasUserData);
  bos.write(3,0);
  return createMessageFromParcel(p,bos.toByteArray());
}
