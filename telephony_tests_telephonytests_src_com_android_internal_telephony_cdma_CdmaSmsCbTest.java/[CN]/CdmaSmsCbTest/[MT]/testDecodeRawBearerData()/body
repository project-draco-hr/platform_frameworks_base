{
  Parcel p=createBroadcastParcel(SmsEnvelope.SERVICE_CATEGORY_CMAS_TEST_MESSAGE);
  SmsMessage msg=createMessageFromParcel(p,CMAS_TEST_BEARER_DATA);
  SmsCbMessage cbMessage=msg.parseBroadcastSms();
  assertNotNull("expected non-null for bearer data",cbMessage);
  assertEquals("geoScope",cbMessage.getGeographicalScope(),1);
  assertEquals("serialNumber",cbMessage.getSerialNumber(),51072);
  assertEquals("serviceCategory",cbMessage.getServiceCategory(),SmsEnvelope.SERVICE_CATEGORY_CMAS_TEST_MESSAGE);
  assertEquals("payload",cbMessage.getMessageBody(),"This is a test of the Commercial Mobile Alert System. This is only a test.");
  SmsCbCmasInfo cmasInfo=cbMessage.getCmasWarningInfo();
  assertNotNull("expected non-null for CMAS info",cmasInfo);
  assertEquals("category",cmasInfo.getCategory(),SmsCbCmasInfo.CMAS_CATEGORY_OTHER);
  assertEquals("responseType",cmasInfo.getResponseType(),SmsCbCmasInfo.CMAS_RESPONSE_TYPE_NONE);
  assertEquals("severity",cmasInfo.getSeverity(),SmsCbCmasInfo.CMAS_SEVERITY_SEVERE);
  assertEquals("urgency",cmasInfo.getUrgency(),SmsCbCmasInfo.CMAS_URGENCY_EXPECTED);
  assertEquals("certainty",cmasInfo.getCertainty(),SmsCbCmasInfo.CMAS_CERTAINTY_LIKELY);
}
