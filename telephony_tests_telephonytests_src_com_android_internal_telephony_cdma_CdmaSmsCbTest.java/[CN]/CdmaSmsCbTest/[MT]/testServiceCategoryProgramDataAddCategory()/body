{
  Parcel p=createServiceCategoryProgramDataParcel();
  BitwiseOutputStream bos=createBearerDataStream(123,-1,-1);
  int categoryNameLength=CAT_EXTREME_THREAT.length();
  int subparamLengthBits=(53 + (categoryNameLength * 7));
  int subparamLengthBytes=(subparamLengthBits + 7) / 8;
  int subparamPadBits=(subparamLengthBytes * 8) - subparamLengthBits;
  bos.write(8,SUBPARAM_SERVICE_CATEGORY_PROGRAM_DATA);
  bos.write(8,subparamLengthBytes);
  bos.write(5,UserData.ENCODING_7BIT_ASCII);
  bos.write(4,CdmaSmsCbProgramData.OPERATION_ADD_CATEGORY);
  bos.write(8,(SmsEnvelope.SERVICE_CATEGORY_CMAS_EXTREME_THREAT >>> 8));
  bos.write(8,(SmsEnvelope.SERVICE_CATEGORY_CMAS_EXTREME_THREAT & 0xff));
  bos.write(8,BearerData.LANGUAGE_ENGLISH);
  bos.write(8,100);
  bos.write(4,CdmaSmsCbProgramData.ALERT_OPTION_DEFAULT_ALERT);
  bos.write(8,categoryNameLength);
  for (int i=0; i < categoryNameLength; i++) {
    bos.write(7,CAT_EXTREME_THREAT.charAt(i));
  }
  bos.write(subparamPadBits,0);
  SmsMessage msg=createMessageFromParcel(p,bos.toByteArray());
  assertNotNull(msg);
  msg.parseSms();
  List<CdmaSmsCbProgramData> programDataList=msg.getSmsCbProgramData();
  assertNotNull(programDataList);
  assertEquals(1,programDataList.size());
  CdmaSmsCbProgramData programData=programDataList.get(0);
  assertEquals(CdmaSmsCbProgramData.OPERATION_ADD_CATEGORY,programData.getOperation());
  assertEquals(SmsEnvelope.SERVICE_CATEGORY_CMAS_EXTREME_THREAT,programData.getCategory());
  assertEquals(CAT_EXTREME_THREAT,programData.getCategoryName());
  assertEquals(BearerData.LANGUAGE_ENGLISH,programData.getLanguage());
  assertEquals(100,programData.getMaxMessages());
  assertEquals(CdmaSmsCbProgramData.ALERT_OPTION_DEFAULT_ALERT,programData.getAlertOption());
}
