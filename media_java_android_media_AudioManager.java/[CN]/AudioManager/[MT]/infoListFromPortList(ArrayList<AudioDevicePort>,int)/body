{
  int numRecs=0;
  for (  AudioDevicePort port : ports) {
    if (checkTypes(port) && checkFlags(port,flags)) {
      numRecs++;
    }
  }
  AudioDeviceInfo[] deviceList=new AudioDeviceInfo[numRecs];
  int slot=0;
  for (  AudioDevicePort port : ports) {
    if (checkTypes(port) && checkFlags(port,flags)) {
      deviceList[slot++]=new AudioDeviceInfo(port);
    }
  }
  return deviceList;
}
