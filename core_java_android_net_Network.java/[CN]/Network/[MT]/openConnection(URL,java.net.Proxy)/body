{
  if (proxy == null)   throw new IllegalArgumentException("proxy is null");
  maybeInitHttpClient();
  String protocol=url.getProtocol();
  OkHttpClient client;
  if (protocol.equals("http")) {
    client=HttpHandler.createHttpOkHttpClient(proxy);
  }
 else   if (protocol.equals("https")) {
    client=HttpsHandler.createHttpsOkHttpClient(proxy);
  }
 else {
    throw new MalformedURLException("Invalid URL or unrecognized protocol " + protocol);
  }
  return client.setSocketFactory(getSocketFactory()).setHostResolver(mHostResolver).setConnectionPool(mConnectionPool).open(url);
}
