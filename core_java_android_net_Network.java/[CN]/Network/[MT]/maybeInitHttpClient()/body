{
synchronized (mLock) {
    if (mDns == null) {
      mDns=new Dns(){
        @Override public List<InetAddress> lookup(        String hostname) throws UnknownHostException {
          return Arrays.asList(Network.this.getAllByName(hostname));
        }
      }
;
    }
    if (mConnectionPool == null) {
      mConnectionPool=new ConnectionPool(httpMaxConnections,httpKeepAliveDurationMs,TimeUnit.MILLISECONDS);
    }
  }
}
