{
  if (mEventHandler == null) {
    super.onInputEvent(event,policyFlags);
    return;
  }
  if ((policyFlags & WindowManagerPolicy.FLAG_PASS_TO_USER) == 0) {
    mMotionEventSequenceStarted=false;
    mHoverEventSequenceStarted=false;
    mEventHandler.clear();
    super.onInputEvent(event,policyFlags);
    return;
  }
  final int deviceId=event.getDeviceId();
  if (mCurrentTouchDeviceId != deviceId) {
    mCurrentTouchDeviceId=deviceId;
    mMotionEventSequenceStarted=false;
    mHoverEventSequenceStarted=false;
    mEventHandler.clear();
  }
  if (mCurrentTouchDeviceId < 0) {
    super.onInputEvent(event,policyFlags);
    return;
  }
  if (event.getActionMasked() == MotionEvent.ACTION_SCROLL) {
    super.onInputEvent(event,policyFlags);
    return;
  }
  if (event.isTouchEvent()) {
    if (!mMotionEventSequenceStarted) {
      if (event.getActionMasked() != MotionEvent.ACTION_DOWN) {
        return;
      }
      mMotionEventSequenceStarted=true;
    }
  }
 else {
    if (!mHoverEventSequenceStarted) {
      if (event.getActionMasked() != MotionEvent.ACTION_HOVER_ENTER) {
        return;
      }
      mHoverEventSequenceStarted=true;
    }
  }
  batchMotionEvent((MotionEvent)event,policyFlags);
}
