{
  if (settings == null) {
    return doStringCommand("DRIVER WLS_BATCHING STOP");
  }
  String cmd="DRIVER WLS_BATCHING SET SCANFREQ=" + settings.scanIntervalSec;
  cmd+=" MSCAN=" + settings.maxScansPerBatch;
  if (settings.maxApPerScan != BatchedScanSettings.UNSPECIFIED) {
    cmd+=" BESTN=" + settings.maxApPerScan;
  }
  if (settings.channelSet != null && !settings.channelSet.isEmpty()) {
    cmd+=" CHANNEL=<";
    int i=0;
    for (    String channel : settings.channelSet) {
      cmd+=(i > 0 ? "," : "") + channel;
      ++i;
    }
    cmd+=">";
  }
  if (settings.maxApForDistance != BatchedScanSettings.UNSPECIFIED) {
    cmd+=" RTT=" + settings.maxApForDistance;
  }
  return doStringCommand(cmd);
}
