{
  if (isSafeMode()) {
    return;
  }
  if (phase == SystemService.PHASE_SYSTEM_SERVICES_READY) {
    mPackageMonitor.register(mContext,mHandler.getLooper(),UserHandle.ALL,true);
    mReceiver.register(mContext);
    mLockPatternUtils.registerStrongAuthTracker(mStrongAuthTracker);
  }
 else   if (phase == SystemService.PHASE_THIRD_PARTY_APPS_CAN_START) {
    mTrustAgentsCanRun=true;
    refreshAgentList(UserHandle.USER_ALL);
  }
 else   if (phase == SystemService.PHASE_BOOT_COMPLETED) {
    maybeEnableFactoryTrustAgents(mLockPatternUtils,UserHandle.USER_SYSTEM);
  }
}
