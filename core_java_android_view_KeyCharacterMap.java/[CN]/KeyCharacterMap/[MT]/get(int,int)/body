{
  if ((metaState & MetaKeyKeyListener.META_CAP_LOCKED) != 0) {
    metaState|=KeyEvent.META_CAPS_LOCK_ON;
  }
  if ((metaState & MetaKeyKeyListener.META_ALT_LOCKED) != 0) {
    metaState|=KeyEvent.META_ALT_ON;
  }
  char ch=nativeGetCharacter(mPtr,keyCode,metaState);
  int map=COMBINING.get(ch);
  if (map != 0) {
    return map;
  }
 else {
    return ch;
  }
}
