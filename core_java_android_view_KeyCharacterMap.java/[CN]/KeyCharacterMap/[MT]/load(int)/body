{
synchronized (sLock) {
    KeyCharacterMap result;
    WeakReference<KeyCharacterMap> ref=sInstances.get(keyboard);
    if (ref != null) {
      result=ref.get();
      if (result != null) {
        return result;
      }
    }
    result=new KeyCharacterMap(keyboard);
    sInstances.put(keyboard,new WeakReference<KeyCharacterMap>(result));
    return result;
  }
}
