{
  mContext=context;
  mHandler=new Handler();
  mAppWidgetHost=new RecentsAppWidgetHost(mContext,RecentsAppWidgetHost.HOST_ID);
  ForegroundThread.get();
  mTaskStackListener=new TaskStackListenerImpl();
  SystemServicesProxy ssp=Recents.getSystemServices();
  ssp.registerTaskStackListener(mTaskStackListener);
  reloadHeaderBarLayout();
  updateHeaderBarLayout(true,null);
  RecentsTaskLoader loader=Recents.getTaskLoader();
  RecentsTaskLoadPlan plan=loader.createLoadPlan(mContext);
  loader.preloadTasks(plan,-1,true);
  RecentsTaskLoadPlan.Options launchOpts=new RecentsTaskLoadPlan.Options();
  launchOpts.numVisibleTasks=loader.getIconCacheSize();
  launchOpts.numVisibleTaskThumbnails=loader.getThumbnailCacheSize();
  launchOpts.onlyLoadForCache=true;
  loader.loadTasks(mContext,plan,launchOpts);
}
