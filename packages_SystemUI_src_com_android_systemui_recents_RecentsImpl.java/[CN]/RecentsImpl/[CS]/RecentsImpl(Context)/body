{
  mContext=context;
  mSystemServicesProxy=new SystemServicesProxy(mContext);
  mHandler=new Handler();
  mAppWidgetHost=new RecentsAppWidgetHost(mContext,Constants.Values.App.AppWidgetHostId);
  Resources res=mContext.getResources();
  RecentsTaskLoader.initialize(mContext);
  LayoutInflater inflater=LayoutInflater.from(mContext);
  mTaskStackListener=new TaskStackListenerImpl(mHandler);
  mSystemServicesProxy.registerTaskStackListener(mTaskStackListener);
  mConfig=RecentsConfiguration.initialize(mContext,mSystemServicesProxy);
  mStatusBarHeight=res.getDimensionPixelSize(com.android.internal.R.dimen.status_bar_height);
  mNavBarHeight=res.getDimensionPixelSize(com.android.internal.R.dimen.navigation_bar_height);
  mNavBarWidth=res.getDimensionPixelSize(com.android.internal.R.dimen.navigation_bar_width);
  mTaskBarHeight=res.getDimensionPixelSize(R.dimen.recents_task_bar_height);
  mDummyStackView=new TaskStackView(mContext,new TaskStack());
  mHeaderBar=(TaskViewHeader)inflater.inflate(R.layout.recents_task_view_header,null,false);
  reloadHeaderBarLayout(true);
  RecentsTaskLoader loader=RecentsTaskLoader.getInstance();
  RecentsTaskLoadPlan plan=loader.createLoadPlan(mContext);
  loader.preloadTasks(plan,true);
  RecentsTaskLoadPlan.Options launchOpts=new RecentsTaskLoadPlan.Options();
  launchOpts.numVisibleTasks=loader.getApplicationIconCacheSize();
  launchOpts.numVisibleTaskThumbnails=loader.getThumbnailCacheSize();
  launchOpts.onlyLoadForCache=true;
  loader.loadTasks(mContext,plan,launchOpts);
}
