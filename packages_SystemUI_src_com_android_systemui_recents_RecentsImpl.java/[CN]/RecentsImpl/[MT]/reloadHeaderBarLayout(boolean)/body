{
  Rect windowRect=mSystemServicesProxy.getWindowRect();
  mConfig.update(mContext,mSystemServicesProxy,mSystemServicesProxy.getWindowRect());
  if (tryAndBindSearchWidget) {
    if (mSystemServicesProxy.getOrBindSearchAppWidget(mContext,mAppWidgetHost) != null) {
      mConfig.getSearchBarBounds(windowRect,mStatusBarHeight,mSearchBarBounds);
    }
  }
  Rect systemInsets=new Rect(0,mStatusBarHeight,(mConfig.hasTransposedNavBar ? mNavBarWidth : 0),(mConfig.hasTransposedNavBar ? 0 : mNavBarHeight));
  mConfig.getTaskStackBounds(windowRect,systemInsets.top,systemInsets.right,mSearchBarBounds,mTaskStackBounds);
  TaskStackViewLayoutAlgorithm algo=mDummyStackView.getStackAlgorithm();
  Rect taskStackBounds=new Rect(mTaskStackBounds);
  algo.setSystemInsets(systemInsets);
  algo.computeRects(windowRect.width(),windowRect.height(),taskStackBounds);
  Rect taskViewBounds=algo.getUntransformedTaskViewBounds();
  if (!taskViewBounds.equals(mLastTaskViewBounds)) {
    mLastTaskViewBounds.set(taskViewBounds);
    int taskViewWidth=taskViewBounds.width();
synchronized (mHeaderBarLock) {
      mHeaderBar.measure(View.MeasureSpec.makeMeasureSpec(taskViewWidth,View.MeasureSpec.EXACTLY),View.MeasureSpec.makeMeasureSpec(mTaskBarHeight,View.MeasureSpec.EXACTLY));
      mHeaderBar.layout(0,0,taskViewWidth,mTaskBarHeight);
    }
  }
}
