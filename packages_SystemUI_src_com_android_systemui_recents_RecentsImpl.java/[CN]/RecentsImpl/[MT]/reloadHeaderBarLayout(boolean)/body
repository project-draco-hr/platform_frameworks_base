{
  RecentsConfiguration config=Recents.getConfiguration();
  SystemServicesProxy ssp=Recents.getSystemServices();
  Rect windowRect=ssp.getWindowRect();
  config.update(mContext,ssp,ssp.getWindowRect());
  if (!Constants.DebugFlags.App.DisableSearchBar && tryAndBindSearchWidget) {
    if (ssp.getOrBindSearchAppWidget(mContext,mAppWidgetHost) != null) {
      config.getSearchBarBounds(windowRect,mStatusBarHeight,mSearchBarBounds);
    }
  }
  Rect systemInsets=new Rect(0,mStatusBarHeight,(config.hasTransposedNavBar ? mNavBarWidth : 0),(config.hasTransposedNavBar ? 0 : mNavBarHeight));
  config.getTaskStackBounds(windowRect,systemInsets.top,systemInsets.right,mSearchBarBounds,mTaskStackBounds);
  TaskStackViewLayoutAlgorithm algo=mDummyStackView.getStackAlgorithm();
  Rect taskStackBounds=new Rect(mTaskStackBounds);
  algo.setSystemInsets(systemInsets);
  algo.computeRects(taskStackBounds);
  Rect taskViewBounds=algo.getUntransformedTaskViewBounds();
  if (!taskViewBounds.equals(mLastTaskViewBounds)) {
    mLastTaskViewBounds.set(taskViewBounds);
    int taskViewWidth=taskViewBounds.width();
synchronized (mHeaderBarLock) {
      mHeaderBar.measure(View.MeasureSpec.makeMeasureSpec(taskViewWidth,View.MeasureSpec.EXACTLY),View.MeasureSpec.makeMeasureSpec(mTaskBarHeight,View.MeasureSpec.EXACTLY));
      mHeaderBar.layout(0,0,taskViewWidth,mTaskBarHeight);
    }
  }
}
