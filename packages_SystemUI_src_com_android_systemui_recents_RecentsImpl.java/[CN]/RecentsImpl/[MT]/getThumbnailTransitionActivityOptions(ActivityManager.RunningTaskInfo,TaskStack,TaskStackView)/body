{
  Task toTask=new Task();
  TaskViewTransform toTransform=getThumbnailTransitionTransform(stack,stackView,topTask.id,toTask);
  RectF toTaskRect=toTransform.rect;
  Bitmap thumbnail;
  if (mThumbnailTransitionBitmapCacheKey != null && mThumbnailTransitionBitmapCacheKey.key != null && mThumbnailTransitionBitmapCacheKey.key.equals(toTask.key)) {
    thumbnail=mThumbnailTransitionBitmapCache;
    mThumbnailTransitionBitmapCacheKey=null;
    mThumbnailTransitionBitmapCache=null;
  }
 else {
    preloadIcon(topTask);
    thumbnail=drawThumbnailTransitionBitmap(toTask,toTransform);
  }
  if (thumbnail != null) {
    return ActivityOptions.makeThumbnailAspectScaleDownAnimation(mDummyStackView,thumbnail,(int)toTaskRect.left,(int)toTaskRect.top,(int)toTaskRect.width(),(int)toTaskRect.height(),mHandler,this);
  }
  return getUnknownTransitionActivityOptions();
}
