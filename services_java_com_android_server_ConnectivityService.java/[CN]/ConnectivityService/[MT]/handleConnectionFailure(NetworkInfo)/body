{
  mNetTrackers[info.getType()].setTeardownRequested(false);
  String reason=info.getReason();
  String extraInfo=info.getExtraInfo();
  if (DBG) {
    String reasonText;
    if (reason == null) {
      reasonText=".";
    }
 else {
      reasonText=" (" + reason + ").";
    }
    Slog.v(TAG,"Attempt to connect to " + info.getTypeName() + " failed"+ reasonText);
  }
  Intent intent=new Intent(ConnectivityManager.CONNECTIVITY_ACTION);
  intent.putExtra(ConnectivityManager.EXTRA_NETWORK_INFO,info);
  if (getActiveNetworkInfo() == null) {
    intent.putExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY,true);
  }
  if (reason != null) {
    intent.putExtra(ConnectivityManager.EXTRA_REASON,reason);
  }
  if (extraInfo != null) {
    intent.putExtra(ConnectivityManager.EXTRA_EXTRA_INFO,extraInfo);
  }
  if (info.isFailover()) {
    intent.putExtra(ConnectivityManager.EXTRA_IS_FAILOVER,true);
    info.setFailover(false);
  }
  NetworkStateTracker newNet=null;
  if (mNetAttributes[info.getType()].isDefault()) {
    newNet=tryFailover(info.getType());
    if (newNet != null) {
      NetworkInfo switchTo=newNet.getNetworkInfo();
      intent.putExtra(ConnectivityManager.EXTRA_OTHER_NETWORK_INFO,switchTo);
    }
 else {
      intent.putExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY,true);
    }
  }
  sendStickyBroadcast(intent);
  if (newNet != null && newNet.getNetworkInfo().isConnected()) {
    sendConnectedBroadcast(newNet.getNetworkInfo());
  }
}
