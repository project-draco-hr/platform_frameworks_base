{
  if (proxy != null && TextUtils.isEmpty(proxy.getHost())) {
    proxy=null;
  }
synchronized (mProxyLock) {
    if (mDefaultProxy != null && mDefaultProxy.equals(proxy))     return;
    if (mDefaultProxy == proxy)     return;
    if (!proxy.isValid()) {
      if (DBG)       log("Invalid proxy properties, ignoring: " + proxy.toString());
      return;
    }
    mDefaultProxy=proxy;
    if (mGlobalProxy != null)     return;
    if (!mDefaultProxyDisabled) {
      sendProxyBroadcast(proxy);
    }
  }
}
