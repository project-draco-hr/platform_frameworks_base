{
  NetworkStateTracker nt=mNetTrackers[netType];
  if (nt != null && nt.getNetworkInfo().isConnected() && !nt.isTeardownRequested()) {
    LinkProperties p=nt.getLinkProperties();
    if (p == null)     return;
    Collection<InetAddress> dnses=p.getDnses();
    boolean changed=false;
    String proto=determineProto(p);
    if (mNetConfigs[netType].isDefault()) {
      String network=nt.getNetworkInfo().getTypeName();
synchronized (mDnsLock) {
        if (!mDnsOverridden) {
          changed=updateDns(network,p.getInterfaceName(),dnses,"",proto);
        }
      }
    }
 else {
      try {
        mNetd.setDnsServersForInterface(p.getInterfaceName(),NetworkUtils.makeStrings(dnses));
      }
 catch (      Exception e) {
        if (VDBG)         loge("exception setting dns servers: " + e);
      }
      List pids=mNetRequestersPids[netType];
      for (int y=0; y < pids.size(); y++) {
        Integer pid=(Integer)pids.get(y);
        changed=writePidDns(dnses,pid.intValue(),proto);
      }
    }
    if (changed)     bumpDns();
  }
}
