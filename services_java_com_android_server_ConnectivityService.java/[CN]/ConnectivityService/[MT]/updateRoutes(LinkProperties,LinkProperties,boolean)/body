{
  Collection<RouteInfo> routesToAdd=null;
  CompareResult<InetAddress> dnsDiff=new CompareResult<InetAddress>();
  CompareResult<RouteInfo> routeDiff=new CompareResult<RouteInfo>();
  if (curLp != null) {
    routeDiff=curLp.compareRoutes(newLp);
    dnsDiff=curLp.compareDnses(newLp);
  }
 else   if (newLp != null) {
    routeDiff.added=newLp.getRoutes();
    dnsDiff.added=newLp.getDnses();
  }
  for (  RouteInfo r : routeDiff.removed) {
    if (isLinkDefault || !r.isDefaultRoute()) {
      removeRoute(curLp,r);
    }
  }
  for (  RouteInfo r : routeDiff.added) {
    if (isLinkDefault || !r.isDefaultRoute()) {
      addRoute(newLp,r);
    }
  }
  if (!isLinkDefault) {
    if (routeDiff.removed.size() == 0 && routeDiff.added.size() == 0) {
      for (      InetAddress oldDns : dnsDiff.removed) {
        removeRouteToAddress(curLp,oldDns);
      }
      for (      InetAddress newDns : dnsDiff.added) {
        addRouteToAddress(newLp,newDns);
      }
    }
 else {
      if (curLp != null) {
        for (        InetAddress oldDns : curLp.getDnses()) {
          removeRouteToAddress(curLp,oldDns);
        }
      }
      if (newLp != null) {
        for (        InetAddress newDns : newLp.getDnses()) {
          addRouteToAddress(newLp,newDns);
        }
      }
    }
  }
}
