{
  Collection<RouteInfo> routesToAdd=null;
  CompareResult<InetAddress> dnsDiff=null;
  if (curLp != null) {
    CompareResult<RouteInfo> routeDiff=curLp.compareRoutes(newLp);
    dnsDiff=curLp.compareDnses(newLp);
    for (    RouteInfo r : routeDiff.removed) {
      if (isLinkDefault || !r.isDefaultRoute()) {
        removeRoute(curLp,r);
      }
    }
    routesToAdd=routeDiff.added;
  }
  if (newLp != null) {
    if (routesToAdd == null) {
      routesToAdd=newLp.getRoutes();
    }
    for (    RouteInfo r : routesToAdd) {
      if (isLinkDefault || !r.isDefaultRoute()) {
        addRoute(newLp,r);
      }
    }
  }
  if (!isLinkDefault) {
    Collection<InetAddress> dnsToAdd=null;
    if (dnsDiff != null) {
      dnsToAdd=dnsDiff.added;
      for (      InetAddress dnsAddress : dnsDiff.removed) {
        removeRoute(curLp,RouteInfo.makeHostRoute(dnsAddress));
      }
    }
    if (newLp != null) {
      if (dnsToAdd == null) {
        dnsToAdd=newLp.getDnses();
      }
      for (      InetAddress dnsAddress : dnsToAdd) {
        addRoute(newLp,RouteInfo.makeHostRoute(dnsAddress));
      }
    }
  }
}
