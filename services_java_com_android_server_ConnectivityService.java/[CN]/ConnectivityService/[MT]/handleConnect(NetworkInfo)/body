{
  int type=info.getType();
  boolean isFailover=info.isFailover();
  NetworkStateTracker thisNet=mNetTrackers[type];
  if (mNetConfigs[type].isDefault()) {
    if (mActiveDefaultNetwork != -1 && mActiveDefaultNetwork != type) {
      if ((type != mNetworkPreference && mNetConfigs[mActiveDefaultNetwork].priority > mNetConfigs[type].priority) || mNetworkPreference == mActiveDefaultNetwork) {
        if (DBG) {
          log("Not broadcasting CONNECT_ACTION " + "to torn down network " + info.getTypeName());
        }
        teardown(thisNet);
        return;
      }
 else {
        NetworkStateTracker otherNet=mNetTrackers[mActiveDefaultNetwork];
        if (DBG) {
          log("Policy requires " + otherNet.getNetworkInfo().getTypeName() + " teardown");
        }
        if (!teardown(otherNet)) {
          loge("Network declined teardown request");
          return;
        }
      }
    }
synchronized (ConnectivityService.this) {
      if (mNetTransitionWakeLock.isHeld()) {
        mHandler.sendMessageDelayed(mHandler.obtainMessage(EVENT_CLEAR_NET_TRANSITION_WAKELOCK,mNetTransitionWakeLockSerialNumber,0),1000);
      }
    }
    mActiveDefaultNetwork=type;
    mDefaultInetConditionPublished=0;
    mDefaultConnectionSequence++;
    mInetConditionChangeInFlight=false;
  }
  thisNet.setTeardownRequested(false);
  updateNetworkSettings(thisNet);
  handleConnectivityChange(type,false);
  sendConnectedBroadcast(info);
}
