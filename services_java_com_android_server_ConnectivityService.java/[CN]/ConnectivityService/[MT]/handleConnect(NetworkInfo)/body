{
  if (DBG)   Log.d(TAG,"Handle CONNECT for " + info.getTypeName());
  int type=info.getType();
  boolean isFailover=info.isFailover();
  NetworkStateTracker thisNet=mNetTrackers[type];
  if (mNetAttributes[type].isDefault()) {
    if (DBG)     Log.d(TAG,"connecting to a default network");
    if (mActiveDefaultNetwork != -1 && mActiveDefaultNetwork != type) {
      if ((type != mNetworkPreference && mNetAttributes[mActiveDefaultNetwork].mPriority > mNetAttributes[type].mPriority) || mNetworkPreference == mActiveDefaultNetwork) {
        if (DBG)         Log.v(TAG,"Not broadcasting CONNECT_ACTION " + "to torn down network " + info.getTypeName());
        teardown(thisNet);
        return;
      }
 else {
        NetworkStateTracker otherNet=mNetTrackers[mActiveDefaultNetwork];
        if (DBG)         Log.v(TAG,"Policy requires " + otherNet.getNetworkInfo().getTypeName() + " teardown");
        if (!teardown(otherNet)) {
          Log.e(TAG,"Network declined teardown request");
          return;
        }
        if (isFailover) {
          otherNet.releaseWakeLock();
        }
      }
    }
    mActiveDefaultNetwork=type;
  }
  thisNet.setTeardownRequested(false);
  if (DBG)   Log.d(TAG,"Sending CONNECT bcast for " + info.getTypeName());
  thisNet.updateNetworkSettings();
  handleConnectivityChange();
  sendConnectedBroadcast(info);
}
