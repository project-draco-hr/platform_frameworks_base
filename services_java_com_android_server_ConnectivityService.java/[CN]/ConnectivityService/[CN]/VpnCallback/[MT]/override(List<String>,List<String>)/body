{
  if (dnsServers == null) {
    restore();
    return;
  }
  List<InetAddress> addresses=new ArrayList<InetAddress>();
  for (  String address : dnsServers) {
    try {
      addresses.add(InetAddress.parseNumericAddress(address));
    }
 catch (    Exception e) {
    }
  }
  if (addresses.isEmpty()) {
    restore();
    return;
  }
  StringBuilder buffer=new StringBuilder();
  if (searchDomains != null) {
    for (    String domain : searchDomains) {
      buffer.append(domain).append(' ');
    }
  }
  String domains=buffer.toString().trim();
synchronized (mDnsLock) {
    updateDnsLocked("VPN","VPN",addresses,domains);
    mDnsOverridden=true;
  }
synchronized (mDefaultProxyLock) {
    mDefaultProxyDisabled=true;
    if (mDefaultProxy != null) {
      sendProxyBroadcast(null);
    }
  }
}
