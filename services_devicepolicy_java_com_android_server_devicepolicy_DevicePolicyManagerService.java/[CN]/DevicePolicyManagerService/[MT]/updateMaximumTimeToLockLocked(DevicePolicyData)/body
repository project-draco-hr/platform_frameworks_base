{
  long timeMs=getMaximumTimeToLock(null,policy.mUserHandle);
  if (policy.mLastMaximumTimeToLock == timeMs) {
    return;
  }
  long ident=mInjector.binderClearCallingIdentity();
  try {
    if (timeMs <= 0) {
      timeMs=Integer.MAX_VALUE;
    }
 else {
      mInjector.settingsGlobalPutInt(Settings.Global.STAY_ON_WHILE_PLUGGED_IN,0);
    }
    policy.mLastMaximumTimeToLock=timeMs;
    mInjector.getPowerManagerInternal().setMaximumScreenOffTimeoutFromDeviceAdmin((int)timeMs);
  }
  finally {
    mInjector.binderRestoreCallingIdentity(ident);
  }
}
