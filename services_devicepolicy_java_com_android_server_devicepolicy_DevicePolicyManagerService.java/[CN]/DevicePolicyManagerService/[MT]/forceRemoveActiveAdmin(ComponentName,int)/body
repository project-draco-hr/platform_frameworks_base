{
  if (!mHasFeature) {
    return;
  }
  Preconditions.checkNotNull(adminReceiver,"ComponentName is null");
  enforceShell("forceRemoveActiveAdmin");
  long ident=mInjector.binderClearCallingIdentity();
  try {
    final ApplicationInfo ai;
    try {
      ai=mIPackageManager.getApplicationInfo(adminReceiver.getPackageName(),0,userHandle);
    }
 catch (    RemoteException e) {
      throw new IllegalStateException(e);
    }
    if (ai == null) {
      throw new IllegalStateException("Couldn't find package to remove admin " + adminReceiver.getPackageName() + " "+ userHandle);
    }
    if ((ai.flags & ApplicationInfo.FLAG_TEST_ONLY) == 0) {
      throw new SecurityException("Attempt to remove non-test admin " + adminReceiver + adminReceiver+ " "+ userHandle);
    }
synchronized (this) {
      if (isDeviceOwner(adminReceiver,userHandle)) {
        clearDeviceOwnerLocked(getDeviceOwnerAdminLocked(),userHandle);
      }
      if (isProfileOwner(adminReceiver,userHandle)) {
        final ActiveAdmin admin=getActiveAdminUncheckedLocked(adminReceiver,userHandle,false);
        clearProfileOwnerLocked(admin,userHandle);
      }
    }
    removeAdminArtifacts(adminReceiver,userHandle);
  }
  finally {
    mInjector.binderRestoreCallingIdentity(ident);
  }
}
