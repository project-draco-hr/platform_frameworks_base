{
  Preconditions.checkNotNull(admin,"ComponentName is null");
  final int userHandle=mInjector.userHandleGetCallingUserId();
synchronized (this) {
    getActiveAdminForCallerLocked(admin,DeviceAdminInfo.USES_POLICY_PROFILE_OWNER);
    if (packageName != null && !isPackageInstalledForUser(packageName,userHandle)) {
      return false;
    }
    DevicePolicyData policy=getUserData(userHandle);
    policy.mApplicationRestrictionsManagingPackage=packageName;
    saveSettingsLocked(userHandle);
    return true;
  }
}
