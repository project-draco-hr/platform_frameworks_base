{
  if (!mHasFeature) {
    return false;
  }
  if (who == null) {
    throw new NullPointerException("ComponentName is null");
  }
  if (!checkCallerIsCurrentUserOrProfile()) {
    return false;
  }
  if (packageList != null) {
    InputMethodManager inputMethodManager=(InputMethodManager)mContext.getSystemService(Context.INPUT_METHOD_SERVICE);
    List<InputMethodInfo> enabledImes=inputMethodManager.getEnabledInputMethodList();
    if (enabledImes != null) {
      List<String> enabledPackages=new ArrayList<String>();
      for (      InputMethodInfo ime : enabledImes) {
        enabledPackages.add(ime.getPackageName());
      }
      if (!checkPackagesInPermittedListOrSystem(enabledPackages,packageList)) {
        Slog.e(LOG_TAG,"Cannot set permitted input methods, " + "because it contains already enabled input method.");
        return false;
      }
    }
  }
synchronized (this) {
    ActiveAdmin admin=getActiveAdminForCallerLocked(who,DeviceAdminInfo.USES_POLICY_PROFILE_OWNER);
    admin.permittedInputMethods=packageList;
    saveSettingsLocked(UserHandle.getCallingUserId());
  }
  return true;
}
