{
  Preconditions.checkNotNull(packageName,"packageName is null");
  try {
    int uid=mContext.getPackageManager().getPackageUid(packageName,0);
    if (uid != Binder.getCallingUid()) {
      throw new SecurityException("Invalid packageName");
    }
  }
 catch (  NameNotFoundException e) {
    throw new SecurityException(e);
  }
  if (!isDeviceOwner(packageName)) {
    throw new SecurityException("clearDeviceOwner can only be called by the device owner");
  }
synchronized (this) {
    clearUserPoliciesLocked(new UserHandle(UserHandle.USER_OWNER));
    if (mDeviceOwner != null) {
      mDeviceOwner.clearDeviceOwner();
      mDeviceOwner.writeOwnerFile();
      updateDeviceOwnerLocked();
      long ident=Binder.clearCallingIdentity();
      try {
        IBackupManager ibm=IBackupManager.Stub.asInterface(ServiceManager.getService(Context.BACKUP_SERVICE));
        ibm.setBackupServiceActive(UserHandle.USER_OWNER,true);
      }
 catch (      RemoteException e) {
        throw new IllegalStateException("Failed reactivating backup service.",e);
      }
 finally {
        Binder.restoreCallingIdentity(ident);
      }
    }
  }
}
