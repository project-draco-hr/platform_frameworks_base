{
  List<UserInfo> profiles=mUserManager.getProfiles(userHandle);
  for (  UserInfo userInfo : profiles) {
    int profileId=userInfo.getUserHandle().getIdentifier();
    DevicePolicyData policy=getUserData(profileId);
    final int N=policy.mAdminList.size();
    if (N > 0) {
      for (int i=0; i < N; i++) {
        ActiveAdmin admin=policy.mAdminList.get(i);
        if (admin.info.usesPolicy(DeviceAdminInfo.USES_POLICY_EXPIRE_PASSWORD)) {
          long timeout=admin.passwordExpirationTimeout;
          long expiration=timeout > 0L ? (timeout + System.currentTimeMillis()) : 0L;
          admin.passwordExpirationDate=expiration;
        }
      }
    }
    saveSettingsLocked(profileId);
  }
}
