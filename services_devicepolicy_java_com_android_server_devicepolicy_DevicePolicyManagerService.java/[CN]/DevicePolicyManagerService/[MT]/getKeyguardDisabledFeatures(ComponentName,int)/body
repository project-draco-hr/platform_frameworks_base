{
  if (!mHasFeature) {
    return 0;
  }
  enforceCrossUserPermission(userHandle);
  long ident=mInjector.binderClearCallingIdentity();
  try {
synchronized (this) {
      if (who != null) {
        ActiveAdmin admin=getActiveAdminUncheckedLocked(who,userHandle);
        return (admin != null) ? admin.disabledKeyguardFeatures : 0;
      }
      UserInfo user=mUserManager.getUserInfo(userHandle);
      final List<UserInfo> profiles;
      if (user.isManagedProfile()) {
        profiles=new ArrayList<UserInfo>(1);
        profiles.add(user);
      }
 else {
        profiles=mUserManager.getProfiles(userHandle);
      }
      int which=0;
      for (      UserInfo userInfo : profiles) {
        DevicePolicyData policy=getUserData(userInfo.id);
        final int N=policy.mAdminList.size();
        for (int i=0; i < N; i++) {
          ActiveAdmin admin=policy.mAdminList.get(i);
          if (userInfo.id == userHandle || !userInfo.isManagedProfile()) {
            which|=admin.disabledKeyguardFeatures;
          }
 else {
            which|=(admin.disabledKeyguardFeatures & PROFILE_KEYGUARD_FEATURES_AFFECT_OWNER);
          }
        }
      }
      return which;
    }
  }
  finally {
    mInjector.binderRestoreCallingIdentity(ident);
  }
}
