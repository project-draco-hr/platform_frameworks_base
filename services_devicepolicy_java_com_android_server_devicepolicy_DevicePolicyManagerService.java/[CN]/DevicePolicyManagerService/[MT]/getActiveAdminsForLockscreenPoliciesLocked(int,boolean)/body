{
  if (!parent && isSeparateProfileChallengeEnabled(userHandle)) {
    return getUserDataUnchecked(userHandle).mAdminList;
  }
 else {
    ArrayList<ActiveAdmin> admins=new ArrayList<ActiveAdmin>();
    for (    UserInfo userInfo : mUserManager.getProfiles(userHandle)) {
      DevicePolicyData policy=getUserData(userInfo.id);
      if (!userInfo.isManagedProfile()) {
        admins.addAll(policy.mAdminList);
      }
 else {
        boolean hasSeparateChallenge=isSeparateProfileChallengeEnabled(userInfo.id);
        final int N=policy.mAdminList.size();
        for (int i=0; i < N; i++) {
          ActiveAdmin admin=policy.mAdminList.get(i);
          if (admin.hasParentActiveAdmin()) {
            admins.add(admin.getParentActiveAdmin());
          }
          if (!hasSeparateChallenge) {
            admins.add(admin);
          }
        }
      }
    }
    return admins;
  }
}
