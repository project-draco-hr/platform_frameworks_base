{
  UserHandle user=createUser(who,name);
  if (user == null) {
    return null;
  }
  long id=binderClearCallingIdentity();
  try {
    String profileOwnerPkg=profileOwnerComponent.getPackageName();
    final IPackageManager ipm=getIPackageManager();
    IActivityManager activityManager=getIActivityManager();
    final int userHandle=user.getIdentifier();
    try {
      if (!ipm.isPackageAvailable(profileOwnerPkg,userHandle)) {
        ipm.installExistingPackageAsUser(profileOwnerPkg,userHandle);
      }
      activityManager.startUserInBackground(userHandle);
    }
 catch (    RemoteException e) {
      Slog.e(LOG_TAG,"Failed to make remote calls for configureUser",e);
    }
    setActiveAdmin(profileOwnerComponent,true,userHandle,adminExtras);
    setProfileOwner(profileOwnerComponent,ownerName,userHandle);
    return user;
  }
  finally {
    binderRestoreCallingIdentity(id);
  }
}
