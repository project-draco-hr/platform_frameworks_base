{
  UserHandle user=createUser(who,name);
  long id=Binder.clearCallingIdentity();
  try {
    String profileOwnerPkg=profileOwnerComponent.getPackageName();
    final IPackageManager ipm=AppGlobals.getPackageManager();
    IActivityManager activityManager=ActivityManagerNative.getDefault();
    try {
      if (!ipm.isPackageAvailable(profileOwnerPkg,user.getIdentifier())) {
        ipm.installExistingPackageAsUser(profileOwnerPkg,user.getIdentifier());
      }
      activityManager.startUserInBackground(user.getIdentifier());
    }
 catch (    RemoteException e) {
      Slog.e(LOG_TAG,"Failed to make remote calls for configureUser",e);
    }
    setActiveAdmin(profileOwnerComponent,true,user.getIdentifier(),adminExtras);
    setProfileOwner(profileOwnerPkg,ownerName,user.getIdentifier());
    return user;
  }
  finally {
    restoreCallingIdentity(id);
  }
}
