{
  if (!mHasFeature) {
    return false;
  }
  if (initializer == null || !mOwners.hasDeviceOwner() || !isPackageInstalledForUser(initializer.getPackageName(),mOwners.getDeviceOwnerUserId())) {
    throw new IllegalArgumentException("Invalid component name " + initializer + " for device initializer or no device owner set");
  }
  boolean isInitializerSystemApp;
  try {
    isInitializerSystemApp=isSystemApp(mIPackageManager,initializer.getPackageName(),mInjector.binderGetCallingUserHandle().getIdentifier());
  }
 catch (  RemoteException|IllegalArgumentException e) {
    isInitializerSystemApp=false;
    Slog.e(LOG_TAG,"Fail to check if device initialzer is system app.",e);
  }
  if (!isInitializerSystemApp) {
    throw new IllegalArgumentException("Only system app can be set as device initializer.");
  }
synchronized (this) {
    enforceCanSetDeviceInitializer(who);
    if (mOwners.hasDeviceInitializer()) {
      throw new IllegalStateException("Trying to set device initializer but device initializer is already set.");
    }
    mOwners.setDeviceInitializer(initializer);
    addDeviceInitializerToLockTaskPackagesLocked(mOwners.getDeviceOwnerUserId());
    mOwners.writeDeviceOwner();
    return true;
  }
}
