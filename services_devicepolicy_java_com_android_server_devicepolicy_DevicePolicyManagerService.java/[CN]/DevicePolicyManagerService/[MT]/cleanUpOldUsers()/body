{
  Set<Integer> usersWithProfileOwners;
  Set<Integer> usersWithData;
synchronized (this) {
    usersWithProfileOwners=mDeviceOwner.getProfileOwnerKeys();
    usersWithData=new HashSet<Integer>();
    for (int i=0; i < mUserData.size(); i++) {
      usersWithData.add(mUserData.keyAt(i));
    }
  }
  List<UserInfo> allUsers=mUserManager.getUsers();
  Set<Integer> deletedUsers=new HashSet<Integer>();
  deletedUsers.addAll(usersWithProfileOwners);
  deletedUsers.addAll(usersWithData);
  for (  UserInfo userInfo : allUsers) {
    deletedUsers.remove(userInfo.id);
  }
  for (  Integer userId : deletedUsers) {
    removeUserData(userId);
  }
}
