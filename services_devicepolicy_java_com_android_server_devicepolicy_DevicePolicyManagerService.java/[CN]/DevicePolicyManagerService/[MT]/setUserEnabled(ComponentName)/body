{
  if (!mHasFeature) {
    return false;
  }
synchronized (this) {
    if (who == null) {
      throw new NullPointerException("ComponentName is null");
    }
    int userId=UserHandle.getCallingUserId();
    ActiveAdmin activeAdmin=getActiveAdminForCallerLocked(who,DeviceAdminInfo.USES_POLICY_PROFILE_OWNER);
    if (!isDeviceInitializer(activeAdmin.info.getPackageName())) {
      throw new SecurityException("This method can only be called by device initializers");
    }
    long id=mInjector.binderClearCallingIdentity();
    try {
      if (!isDeviceOwner(activeAdmin.info.getPackageName())) {
        mIPackageManager.setComponentEnabledSetting(who,PackageManager.COMPONENT_ENABLED_STATE_DISABLED,PackageManager.DONT_KILL_APP,userId);
        removeActiveAdmin(who,userId);
      }
      if (userId == UserHandle.USER_SYSTEM) {
        Settings.Global.putInt(mContext.getContentResolver(),Settings.Global.DEVICE_PROVISIONED,1);
      }
      Settings.Secure.putIntForUser(mContext.getContentResolver(),Settings.Secure.USER_SETUP_COMPLETE,1,userId);
    }
 catch (    RemoteException e) {
      Log.i(LOG_TAG,"Can't talk to package manager",e);
      return false;
    }
 finally {
      mInjector.binderRestoreCallingIdentity(id);
    }
    return true;
  }
}
