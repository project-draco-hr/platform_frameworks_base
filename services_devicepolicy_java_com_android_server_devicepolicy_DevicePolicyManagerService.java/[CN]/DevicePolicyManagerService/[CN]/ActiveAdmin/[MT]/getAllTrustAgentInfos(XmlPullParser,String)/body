{
  int outerDepthDAM=parser.getDepth();
  int typeDAM;
  final ArrayMap<String,TrustAgentInfo> result=new ArrayMap<>();
  while ((typeDAM=parser.next()) != END_DOCUMENT && (typeDAM != END_TAG || parser.getDepth() > outerDepthDAM)) {
    if (typeDAM == END_TAG || typeDAM == TEXT) {
      continue;
    }
    String tagDAM=parser.getName();
    if (TAG_TRUST_AGENT_COMPONENT.equals(tagDAM)) {
      final String component=parser.getAttributeValue(null,ATTR_VALUE);
      final TrustAgentInfo trustAgentInfo=getTrustAgentInfo(parser,tag);
      result.put(component,trustAgentInfo);
    }
 else {
      Slog.w(LOG_TAG,"Unknown tag under " + tag + ": "+ tagDAM);
    }
  }
  return result;
}
