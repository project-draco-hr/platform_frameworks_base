{
  checkToolbarInitialized();
  mContentRectOnWindow.set(mContentRect);
  mContentRectOnWindow.offset(mViewPosition[0],mViewPosition[1]);
  if (isContentRectWithinBounds()) {
    mFloatingToolbarVisibilityHelper.setOutOfBounds(false);
    mContentRectOnWindow.set(Math.max(mContentRectOnWindow.left,mViewRect.left),Math.max(mContentRectOnWindow.top,mViewRect.top),Math.min(mContentRectOnWindow.right,mViewRect.right),Math.min(mContentRectOnWindow.bottom,mViewRect.bottom + mBottomAllowance));
    if (!mContentRectOnWindow.equals(mPreviousContentRectOnWindow)) {
      mOriginatingView.removeCallbacks(mMovingOff);
      mFloatingToolbarVisibilityHelper.setMoving(true);
      mFloatingToolbarVisibilityHelper.updateToolbarVisibility();
      mOriginatingView.postDelayed(mMovingOff,MOVING_HIDE_DELAY);
      mFloatingToolbar.setContentRect(mContentRectOnWindow);
      mFloatingToolbar.updateLayout();
    }
  }
 else {
    mFloatingToolbarVisibilityHelper.setOutOfBounds(true);
    mFloatingToolbarVisibilityHelper.updateToolbarVisibility();
    mContentRectOnWindow.setEmpty();
  }
  mPreviousContentRectOnWindow.set(mContentRectOnWindow);
}
