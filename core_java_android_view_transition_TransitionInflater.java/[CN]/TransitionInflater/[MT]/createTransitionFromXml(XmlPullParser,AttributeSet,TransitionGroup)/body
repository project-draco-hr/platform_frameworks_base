{
  Transition transition=null;
  int type;
  int depth=parser.getDepth();
  while (((type=parser.next()) != XmlPullParser.END_TAG || parser.getDepth() > depth) && type != XmlPullParser.END_DOCUMENT) {
    boolean newTransition=false;
    if (type != XmlPullParser.START_TAG) {
      continue;
    }
    String name=parser.getName();
    if ("fade".equals(name)) {
      transition=new Fade();
      newTransition=true;
    }
 else     if ("move".equals(name)) {
      transition=new Move();
      newTransition=true;
    }
 else     if ("slide".equals(name)) {
      transition=new Slide();
      newTransition=true;
    }
 else     if ("autoTransition".equals(name)) {
      transition=new AutoTransition();
      newTransition=true;
    }
 else     if ("recolor".equals(name)) {
      transition=new Recolor();
      newTransition=true;
    }
 else     if ("transitionGroup".equals(name)) {
      transition=new TransitionGroup();
      createTransitionFromXml(parser,attrs,((TransitionGroup)transition));
      newTransition=true;
    }
 else     if ("targets".equals(name)) {
      if (parser.getDepth() - 1 > depth && transition != null) {
        getTargetIDs(parser,attrs,transition);
      }
 else       if (parser.getDepth() - 1 == depth && transitionGroup != null) {
        getTargetIDs(parser,attrs,transitionGroup);
      }
    }
    if (transition != null || "targets".equals(name)) {
      if (newTransition) {
        loadTransition(transition,attrs);
        if (transitionGroup != null) {
          transitionGroup.addTransitions(transition);
        }
      }
    }
 else {
      throw new RuntimeException("Unknown scene name: " + parser.getName());
    }
  }
  return transition;
}
