{
  mStackBox.makeDirty();
  int stackNdx;
  if (!toTop) {
    stackNdx=0;
  }
 else {
    stackNdx=mTasks.size();
    final int currentUserId=mService.mCurrentUserId;
    if (task.mUserId != currentUserId) {
      while (--stackNdx >= 0) {
        if (currentUserId != mTasks.get(stackNdx).mUserId) {
          break;
        }
      }
      ++stackNdx;
    }
  }
  if (DEBUG_TASK_MOVEMENT)   Slog.d(TAG,"addTask: task=" + task + " toTop="+ toTop+ " pos="+ stackNdx);
  mTasks.add(stackNdx,task);
  task.mStack=this;
  mDisplayContent.addTask(task,toTop);
  return mDisplayContent.moveHomeStackBox(mStackId == HOME_STACK_ID);
}
