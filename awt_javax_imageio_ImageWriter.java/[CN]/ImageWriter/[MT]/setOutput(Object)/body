{
  if (output != null) {
    ImageWriterSpi spi=getOriginatingProvider();
    if (null != spi) {
      Class[] outTypes=spi.getOutputTypes();
      boolean supported=false;
      for (      Class<?> element : outTypes) {
        if (element.isInstance(output)) {
          supported=true;
          break;
        }
      }
      if (!supported) {
        throw new IllegalArgumentException("output " + output + " is not supported");
      }
    }
  }
  this.output=output;
}
