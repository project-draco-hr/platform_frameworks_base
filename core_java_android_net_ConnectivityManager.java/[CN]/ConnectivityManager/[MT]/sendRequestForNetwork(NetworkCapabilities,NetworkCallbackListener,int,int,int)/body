{
  NetworkRequest networkRequest=null;
  if (networkCallbackListener == null) {
    throw new IllegalArgumentException("null NetworkCallbackListener");
  }
  if (need == null)   throw new IllegalArgumentException("null NetworkCapabilities");
  try {
    addCallbackListener();
    if (action == LISTEN) {
      networkRequest=mService.listenForNetwork(need,new Messenger(sCallbackHandler),new Binder());
    }
 else {
      networkRequest=mService.requestNetwork(need,new Messenger(sCallbackHandler),timeoutSec,new Binder(),legacyType);
    }
    if (networkRequest != null) {
synchronized (sNetworkCallbackListener) {
        sNetworkCallbackListener.put(networkRequest,networkCallbackListener);
      }
    }
  }
 catch (  RemoteException e) {
  }
  if (networkRequest == null)   removeCallbackListener();
  return networkRequest;
}
