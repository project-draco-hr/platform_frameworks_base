{
  NetworkRequest networkRequest=null;
  if (networkCallbacks == null)   throw new IllegalArgumentException("null NetworkCallbacks");
  if (need == null)   throw new IllegalArgumentException("null NetworkCapabilities");
  try {
    addCallbackListener();
    if (action == LISTEN) {
      networkRequest=mService.listenForNetwork(need,new Messenger(sCallbackHandler),new Binder());
    }
 else {
      networkRequest=mService.requestNetwork(need,new Messenger(sCallbackHandler),timeoutSec,new Binder());
    }
    if (networkRequest != null) {
synchronized (sNetworkCallbacks) {
        sNetworkCallbacks.put(networkRequest,networkCallbacks);
      }
    }
  }
 catch (  RemoteException e) {
  }
  if (networkRequest == null)   removeCallbackListener();
  return networkRequest;
}
