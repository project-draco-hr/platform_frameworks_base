{
  setAirplaneMode(false);
  for (  String tether : getTetheredIfaces()) {
    untether(tether);
  }
  try {
    VpnConfig vpnConfig=mService.getVpnConfig();
    if (vpnConfig != null) {
      if (vpnConfig.legacy) {
        mService.prepareVpn(VpnConfig.LEGACY_VPN,VpnConfig.LEGACY_VPN);
      }
 else {
        mService.setVpnPackageAuthorization(false);
        mService.prepareVpn(vpnConfig.user,VpnConfig.LEGACY_VPN);
      }
    }
  }
 catch (  RemoteException e) {
  }
}
