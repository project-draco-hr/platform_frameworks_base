{
  int layer=mHighestApplicationLayer + WINDOW_LAYER_MULTIPLIER;
  while (!mDockedWindows.isEmpty()) {
    layer=assignAndIncreaseLayerIfNeeded(mDockedWindows.remove(),layer);
  }
  layer=assignAndIncreaseLayerIfNeeded(mDockDivider,layer);
  if (mDockDivider != null && mDockDivider.isVisibleLw() && mService.mInputMethodWindow != null) {
    layer=assignAndIncreaseLayerIfNeeded(mService.mInputMethodWindow,layer);
    for (int i=mService.mInputMethodDialogs.size() - 1; i >= 0; i--) {
      final WindowState dialog=mService.mInputMethodDialogs.get(i);
      layer=assignAndIncreaseLayerIfNeeded(dialog,layer);
    }
  }
  while (!mReplacingWindows.isEmpty()) {
    layer=assignAndIncreaseLayerIfNeeded(mReplacingWindows.remove(),layer);
  }
  while (!mPinnedWindows.isEmpty()) {
    layer=assignAndIncreaseLayerIfNeeded(mPinnedWindows.remove(),layer);
  }
}
