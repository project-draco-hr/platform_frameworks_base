{
  int layer=mHighestApplicationLayer + WINDOW_LAYER_MULTIPLIER;
  while (!mDockedWindows.isEmpty()) {
    layer=assignAndIncreaseLayerIfNeeded(mDockedWindows.remove(),layer);
  }
  layer=assignAndIncreaseLayerIfNeeded(mDockDivider,layer);
  if (mDockDivider != null && mDockDivider.isVisibleLw()) {
    while (!mInputMethodWindows.isEmpty()) {
      final WindowState w=mInputMethodWindows.remove();
      if (layer > w.mLayer) {
        layer=assignAndIncreaseLayerIfNeeded(w,layer);
      }
    }
  }
  while (!mReplacingWindows.isEmpty()) {
    layer=assignAndIncreaseLayerIfNeeded(mReplacingWindows.remove(),layer);
  }
  while (!mPinnedWindows.isEmpty()) {
    layer=assignAndIncreaseLayerIfNeeded(mPinnedWindows.remove(),layer);
  }
}
