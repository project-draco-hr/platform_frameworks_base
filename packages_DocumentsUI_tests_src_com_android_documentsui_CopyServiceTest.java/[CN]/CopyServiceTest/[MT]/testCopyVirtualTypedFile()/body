{
  String srcPath="/virtual.sth";
  String expectedDstPath="/virtual.sth.pdf";
  ArrayList<String> streamTypes=new ArrayList<>();
  streamTypes.add("application/pdf");
  streamTypes.add("text/html");
  String testContent="I love fruit cakes!";
  Uri testFile=mStorage.createVirtualFile(SRC_ROOT,srcPath,"virtual/mime-type",streamTypes,testContent.getBytes());
  startService(createCopyIntent(Lists.newArrayList(testFile)));
  mResolver.waitForChanges(2);
  assertDestFileCount(1);
  byte[] dstContent=readFile(DST_ROOT,expectedDstPath);
  MoreAsserts.assertEquals("Moved file contents differ",testContent.getBytes(),dstContent);
}
