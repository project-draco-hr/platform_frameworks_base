{
  String testContent[]={"The five boxing wizards jump quickly","The quick brown fox jumps over the lazy dog","Jackdaws love my big sphinx of quartz"};
  String srcDir="/testdir";
  String srcFiles[]={srcDir + "/test0.txt",srcDir + "/test1.txt",srcDir + "/test2.txt"};
  Uri testDir=createTestDirectory(srcDir);
  mStorage.createRegularFile(SRC_ROOT,srcFiles[0],"text/plain",testContent[0].getBytes());
  mStorage.createRegularFile(SRC_ROOT,srcFiles[1],"text/plain",testContent[1].getBytes());
  mStorage.createRegularFile(SRC_ROOT,srcFiles[2],"text/plain",testContent[2].getBytes());
  Intent moveIntent=createCopyIntent(Lists.newArrayList(testDir));
  moveIntent.putExtra(CopyService.EXTRA_TRANSFER_MODE,CopyService.TRANSFER_MODE_MOVE);
  startService(moveIntent);
  mResolver.waitForChanges(11);
  File dst=mStorage.getFile(DST_ROOT,srcDir);
  assertTrue(dst.isDirectory());
  for (int i=0; i < testContent.length; ++i) {
    byte[] dstContent=readFile(DST_ROOT,srcFiles[i]);
    MoreAsserts.assertEquals("Copied file contents differ",testContent[i].getBytes(),dstContent);
  }
  assertDoesNotExist(SRC_ROOT,srcDir);
  for (  String srcFile : srcFiles) {
    assertDoesNotExist(SRC_ROOT,srcFile);
  }
}
