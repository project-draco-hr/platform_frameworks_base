{
  if (DEBUG)   Slog.v(TAG,"show: layer=" + layer + " alpha="+ alpha+ " duration="+ duration);
  if (mDimSurface == null) {
    Slog.e(TAG,"show: no Surface");
    mTargetAlpha=mAlpha=0;
    return;
  }
  final DisplayInfo info=mDisplayContent.getDisplayInfo();
  final int dw=(int)(info.logicalWidth * 1.5);
  final int dh=(int)(info.logicalHeight * 1.5);
  final float xPos=-1 * dw / 6;
  final float yPos=-1 * dh / 6;
  if (mLastDimWidth != dw || mLastDimHeight != dh || mLayer != layer) {
    try {
      mDimSurface.setPosition(xPos,yPos);
      mDimSurface.setSize(dw,dh);
      mDimSurface.setLayer(layer);
    }
 catch (    RuntimeException e) {
      Slog.w(TAG,"Failure setting size or layer",e);
    }
    mLastDimWidth=dw;
    mLastDimHeight=dh;
    mLayer=layer;
  }
  long curTime=SystemClock.uptimeMillis();
  final boolean animating=isAnimating();
  if ((animating && (mTargetAlpha != alpha || durationEndsEarlier(duration))) || (!animating && mAlpha != alpha)) {
    if (duration <= 0) {
      setAlpha(alpha);
    }
 else {
      mStartAlpha=mAlpha;
      mStartTime=curTime;
      mDuration=duration;
    }
  }
  if (DEBUG)   Slog.v(TAG,"show: mStartAlpha=" + mStartAlpha + " mStartTime="+ mStartTime);
  mTargetAlpha=alpha;
}
