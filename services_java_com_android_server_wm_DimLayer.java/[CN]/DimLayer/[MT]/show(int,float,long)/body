{
  if (DEBUG)   Slog.v(TAG,"show: layer=" + layer + " alpha="+ alpha+ " duration="+ duration);
  if (mDimSurface == null) {
    Slog.e(TAG,"show: no Surface");
    mTargetAlpha=mAlpha=0;
    return;
  }
  if (!mLastBounds.equals(mBounds) || mLayer != layer) {
    try {
      mDimSurface.setPosition(mBounds.left,mBounds.top);
      mDimSurface.setSize(mBounds.width(),mBounds.height());
      mDimSurface.setLayer(layer);
    }
 catch (    RuntimeException e) {
      Slog.w(TAG,"Failure setting size or layer",e);
    }
    mLastBounds.set(mBounds);
    mLayer=layer;
  }
  long curTime=SystemClock.uptimeMillis();
  final boolean animating=isAnimating();
  if ((animating && (mTargetAlpha != alpha || durationEndsEarlier(duration))) || (!animating && mAlpha != alpha)) {
    if (duration <= 0) {
      setAlpha(alpha);
    }
 else {
      mStartAlpha=mAlpha;
      mStartTime=curTime;
      mDuration=duration;
    }
  }
  if (DEBUG)   Slog.v(TAG,"show: mStartAlpha=" + mStartAlpha + " mStartTime="+ mStartTime);
  mTargetAlpha=alpha;
}
