{
  if (isShowing()) {
    mPopup.dismiss();
  }
  mTreeObserver.removeGlobalOnLayoutListener(this);
  mTreeObserver=null;
}
