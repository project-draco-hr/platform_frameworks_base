{
  if (isShowing()) {
    mPopup.dismiss();
  }
  if (mTreeObserver != null) {
    mTreeObserver.removeGlobalOnLayoutListener(this);
    mTreeObserver=null;
  }
}
