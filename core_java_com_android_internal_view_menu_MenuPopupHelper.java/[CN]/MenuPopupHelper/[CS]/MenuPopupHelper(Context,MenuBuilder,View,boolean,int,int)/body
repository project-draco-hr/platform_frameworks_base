{
  mContext=context;
  mInflater=LayoutInflater.from(context);
  mMenu=menu;
  mAdapter=new MenuAdapter(mMenu,mInflater,overflowOnly);
  mOverflowOnly=overflowOnly;
  mPopupStyleAttr=popupStyleAttr;
  mPopupStyleRes=popupStyleRes;
  final Resources res=context.getResources();
  mPopupMaxWidth=Math.max(res.getDisplayMetrics().widthPixels / 2,res.getDimensionPixelSize(com.android.internal.R.dimen.config_prefDialogWidth));
  mAnchorView=anchorView;
  menu.addMenuPresenter(this,context);
}
