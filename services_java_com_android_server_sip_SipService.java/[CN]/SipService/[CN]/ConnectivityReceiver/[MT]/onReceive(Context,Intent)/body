{
  String action=intent.getAction();
  if (action.equals(ConnectivityManager.CONNECTIVITY_ACTION)) {
    Bundle b=intent.getExtras();
    if (b != null) {
      NetworkInfo netInfo=(NetworkInfo)b.get(ConnectivityManager.EXTRA_NETWORK_INFO);
      String type=netInfo.getTypeName();
      NetworkInfo.State state=netInfo.getState();
      if (state == NetworkInfo.State.CONNECTED) {
        Log.v(TAG,"Connectivity alert: CONNECTED " + type);
        onChanged(type,true);
      }
 else       if (state == NetworkInfo.State.DISCONNECTED) {
        Log.v(TAG,"Connectivity alert: DISCONNECTED " + type);
        onChanged(type,false);
      }
 else {
        Log.d(TAG,"Connectivity alert not processed: " + state + " "+ type);
      }
    }
  }
}
