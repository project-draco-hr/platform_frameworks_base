{
  if (mSession == null)   return;
  if (mConnected && mRegistered)   mSession.unregister();
  mTimer.cancel(this);
  if (mKeepAliveProcess != null) {
    mKeepAliveProcess.stop();
    mKeepAliveProcess=null;
  }
  if (!keepStates) {
    mSession=null;
    mRegistered=false;
  }
}
