{
  final RectF TEMP_RECT=new RectF(10.0f,20.0f,30.0f,40.0f);
  final int TEMP_FLAGS=0x1234;
  final SparseRectFArrayBuilder builder=new SparseRectFArrayBuilder();
  builder.append(100,TEMP_RECT.left,TEMP_RECT.top,TEMP_RECT.right,TEMP_RECT.bottom,TEMP_FLAGS);
  assertNull(builder.build().get(-1));
  assertNull(builder.build().get(0));
  assertNull(builder.build().get(99));
  assertEquals(0,builder.build().getFlags(99,0));
  assertEquals(1,builder.build().getFlags(99,1));
  assertEquals(TEMP_RECT,builder.build().get(100));
  assertEquals(TEMP_FLAGS,builder.build().getFlags(100,0));
  assertEquals(TEMP_FLAGS,builder.build().getFlags(100,1));
  assertNull(builder.build().get(101));
  assertEquals(0,builder.build().getFlags(101,0));
  assertEquals(1,builder.build().getFlags(101,1));
  builder.reset();
  assertNull(builder.build().get(100));
  builder.reset();
  for (int i=0; i < MANY_RECTS.length; i++) {
    final RectF rect=MANY_RECTS[i];
    if (rect != null) {
      builder.append(i,rect.left,rect.top,rect.right,rect.bottom,i);
    }
  }
  final SparseRectFArray array=builder.build();
  for (int i=0; i < MANY_RECTS.length; i++) {
    final RectF expectedRect=MANY_RECTS[i];
    assertEquals(expectedRect,array.get(i));
    if (expectedRect != null) {
      assertEquals(i,array.getFlags(i,0x1234));
      assertEquals(i,array.getFlags(i,0x4321));
    }
 else {
      assertEquals(0x1234,array.getFlags(i,0x1234));
      assertEquals(0x4321,array.getFlags(i,0x4321));
    }
  }
  final SparseRectFArray array2=builder.build();
  for (int i=0; i < MANY_RECTS.length; i++) {
    final RectF expectedRect=MANY_RECTS[i];
    assertEquals(expectedRect,array2.get(i));
    if (expectedRect != null) {
      assertEquals(i,array2.getFlags(i,0x1234));
      assertEquals(i,array2.getFlags(i,0x4321));
    }
 else {
      assertEquals(0x1234,array2.getFlags(i,0x1234));
      assertEquals(0x4321,array2.getFlags(i,0x4321));
    }
  }
  assertEqualRects(array,array2);
  final SparseRectFArray array3=cloneViaParcel(array);
  for (int i=0; i < MANY_RECTS.length; i++) {
    final RectF expectedRect=MANY_RECTS[i];
    assertEquals(expectedRect,array3.get(i));
    if (expectedRect != null) {
      assertEquals(i,array3.getFlags(i,0x1234));
      assertEquals(i,array3.getFlags(i,0x4321));
    }
 else {
      assertEquals(0x1234,array3.getFlags(i,0x1234));
      assertEquals(0x4321,array3.getFlags(i,0x4321));
    }
  }
  assertEqualRects(array,array3);
  builder.reset();
  assertNull(builder.build().get(0));
}
