{
  super.setUp();
  WifiAssociationTestRunner mRunner=(WifiAssociationTestRunner)getInstrumentation();
  mWifiManager=(WifiManager)mRunner.getContext().getSystemService(Context.WIFI_SERVICE);
  mAct=getActivity();
  Bundle arguments=mRunner.getArguments();
  mSecurityType=arguments.getString("security-type");
  mSsid=arguments.getString("ssid");
  mPassword=arguments.getString("password");
  mFrequencyBand=arguments.getString("frequency-band");
  mBand=mRunner.mBand;
  assertNotNull("Security type is empty",mSecurityType);
  assertNotNull("Ssid is empty",mSsid);
  validateFrequencyBand();
  assertTrue("enable Wifi failed",mAct.enableWifi());
  sleep(2 * ConnectivityManagerTestActivity.SHORT_TIMEOUT,"interrupted while waiting for WPA_SUPPLICANT to start");
  WifiInfo mConnection=mAct.mWifiManager.getConnectionInfo();
  assertNotNull(mConnection);
  assertTrue("wpa_supplicant is not started ",mAct.mWifiManager.pingSupplicant());
}
