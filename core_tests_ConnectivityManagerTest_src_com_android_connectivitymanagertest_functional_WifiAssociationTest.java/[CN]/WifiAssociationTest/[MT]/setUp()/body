{
  super.setUp();
  WifiAssociationTestRunner runner=(WifiAssociationTestRunner)getInstrumentation();
  Bundle arguments=runner.getArguments();
  mSecurityType=arguments.getString("security-type");
  mSsid=arguments.getString("ssid");
  mPassword=arguments.getString("password");
  mFrequencyBand=arguments.getString("frequency-band");
  mBand=runner.mBand;
  assertNotNull("security type is empty",mSecurityType);
  assertNotNull("ssid is empty",mSsid);
  validateFrequencyBand();
  assertTrue("enable Wifi failed",enableWifi());
  assertTrue("wifi not connected",waitForNetworkState(ConnectivityManager.TYPE_WIFI,State.CONNECTED,LONG_TIMEOUT));
  WifiInfo wi=mWifiManager.getConnectionInfo();
  assertNotNull("no active wifi info",wi);
  assertTrue("failed to ping wpa_supplicant ",mWifiManager.pingSupplicant());
}
