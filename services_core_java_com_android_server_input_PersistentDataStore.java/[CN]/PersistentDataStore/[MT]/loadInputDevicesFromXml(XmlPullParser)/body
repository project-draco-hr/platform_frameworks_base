{
  final int outerDepth=parser.getDepth();
  while (XmlUtils.nextElementWithin(parser,outerDepth)) {
    if (parser.getName().equals("input-device")) {
      String descriptor=parser.getAttributeValue(null,"descriptor");
      if (descriptor == null) {
        throw new XmlPullParserException("Missing descriptor attribute on input-device.");
      }
      if (mInputDevices.containsKey(descriptor)) {
        throw new XmlPullParserException("Found duplicate input device.");
      }
      InputDeviceState state=new InputDeviceState();
      state.loadFromXml(parser);
      mInputDevices.put(descriptor,state);
    }
  }
}
