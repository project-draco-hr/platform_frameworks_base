{
  List<String> goodProviders=getProviders(criteria,enabledOnly);
  if (!goodProviders.isEmpty()) {
    return best(goodProviders).getName();
  }
  criteria=new Criteria(criteria);
  int power=criteria.getPowerRequirement();
  while (goodProviders.isEmpty() && (power != Criteria.NO_REQUIREMENT)) {
    power=nextPower(power);
    criteria.setPowerRequirement(power);
    goodProviders=getProviders(criteria,enabledOnly);
  }
  if (!goodProviders.isEmpty()) {
    return best(goodProviders).getName();
  }
  int accuracy=criteria.getAccuracy();
  while (goodProviders.isEmpty() && (accuracy != Criteria.NO_REQUIREMENT)) {
    accuracy=nextAccuracy(accuracy);
    criteria.setAccuracy(accuracy);
    goodProviders=getProviders(criteria,enabledOnly);
  }
  if (!goodProviders.isEmpty()) {
    return best(goodProviders).getName();
  }
  criteria.setBearingRequired(false);
  goodProviders=getProviders(criteria,enabledOnly);
  if (!goodProviders.isEmpty()) {
    return best(goodProviders).getName();
  }
  criteria.setSpeedRequired(false);
  goodProviders=getProviders(criteria,enabledOnly);
  if (!goodProviders.isEmpty()) {
    return best(goodProviders).getName();
  }
  criteria.setAltitudeRequired(false);
  goodProviders=getProviders(criteria,enabledOnly);
  if (!goodProviders.isEmpty()) {
    return best(goodProviders).getName();
  }
  return null;
}
