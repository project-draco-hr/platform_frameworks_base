{
synchronized (mAppWidgetIds) {
    ensureStateLoadedLocked();
    Provider p=lookupProviderLocked(provider);
    if (p == null) {
      Slog.w(TAG,"updateAppWidgetProvider: provider doesn't exist: " + provider);
      return;
    }
    ArrayList<AppWidgetId> instances=p.instances;
    final int callingUid=getCallingUid();
    final int N=instances.size();
    for (int i=0; i < N; i++) {
      AppWidgetId id=instances.get(i);
      if (canAccessAppWidgetId(id,callingUid)) {
        updateAppWidgetInstanceLocked(id,views);
      }
    }
  }
}
