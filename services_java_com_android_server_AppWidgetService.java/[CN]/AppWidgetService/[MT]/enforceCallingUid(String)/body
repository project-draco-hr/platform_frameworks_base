{
  int callingUid=getCallingUid();
  int packageUid;
  try {
    packageUid=getUidForPackage(packageName);
  }
 catch (  PackageManager.NameNotFoundException ex) {
    throw new IllegalArgumentException("packageName and uid don't match packageName=" + packageName);
  }
  if (callingUid != packageUid && Process.supportsProcesses()) {
    throw new IllegalArgumentException("packageName and uid don't match packageName=" + packageName);
  }
  return callingUid;
}
