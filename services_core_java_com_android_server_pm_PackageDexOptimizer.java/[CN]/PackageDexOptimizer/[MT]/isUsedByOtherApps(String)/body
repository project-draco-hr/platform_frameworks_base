{
  try {
    apkPath=new File(apkPath).getCanonicalPath();
  }
 catch (  IOException e) {
    Slog.w(TAG,"Failed to get canonical path",e);
  }
  String useMarker=apkPath.replace('/','@');
  final int[] currentUserIds=UserManagerService.getInstance().getUserIds();
  for (int i=0; i < currentUserIds.length; i++) {
    File profileDir=Environment.getDataProfilesDeForeignDexDirectory(currentUserIds[i]);
    File foreignUseMark=new File(profileDir,useMarker);
    if (foreignUseMark.exists()) {
      return true;
    }
  }
  return false;
}
