{
  final IccCard.State simState=mUpdateMonitor.getSimState();
  if (stuckOnLockScreenBecauseSimMissing() || (simState == IccCard.State.PUK_REQUIRED)) {
    return Mode.LockScreen;
  }
 else   if (mUpdateMonitor.isKeyboardOpen() && isSecure()) {
    return Mode.UnlockScreen;
  }
 else {
    return Mode.LockScreen;
  }
}
