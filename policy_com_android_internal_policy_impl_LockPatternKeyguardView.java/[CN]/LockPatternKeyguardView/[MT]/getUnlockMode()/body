{
  final SimCard.State simState=mUpdateMonitor.getSimState();
  if (simState == SimCard.State.PIN_REQUIRED || simState == SimCard.State.PUK_REQUIRED) {
    return UnlockMode.SimPin;
  }
 else {
    return mLockPatternUtils.isPermanentlyLocked() ? UnlockMode.Account : UnlockMode.Pattern;
  }
}
