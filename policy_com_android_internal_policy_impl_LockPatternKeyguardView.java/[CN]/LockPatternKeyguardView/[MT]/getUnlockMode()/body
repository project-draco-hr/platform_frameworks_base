{
  final IccCard.State simState=mUpdateMonitor.getSimState();
  if (simState == IccCard.State.PIN_REQUIRED || simState == IccCard.State.PUK_REQUIRED) {
    return UnlockMode.SimPin;
  }
 else {
    return (mForgotPattern || mLockPatternUtils.isPermanentlyLocked()) ? UnlockMode.Account : UnlockMode.Pattern;
  }
}
