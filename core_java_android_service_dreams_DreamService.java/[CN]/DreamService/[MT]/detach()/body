{
  if (mWindow == null) {
    return;
  }
  try {
    onDreamingStopped();
  }
 catch (  Throwable t) {
    Slog.w(TAG,"Crashed in onDreamingStopped()",t);
  }
  if (mDebug)   Slog.v(TAG,"detach(): Removing window from window manager");
  try {
    mWindowManager.removeViewImmediate(mWindow.getDecorView());
    WindowManagerGlobal.getInstance().closeAll(mWindowToken,this.getClass().getName(),"Dream");
  }
 catch (  Throwable t) {
    Slog.w(TAG,"Crashed removing window view",t);
  }
  mWindow=null;
  mWindowToken=null;
}
