{
  if (mStarted) {
    if (mDebug)     Slog.v(TAG,"detach(): Calling onDreamingStopped()");
    mStarted=false;
    onDreamingStopped();
  }
  if (mWindow != null) {
    if (mDebug)     Slog.v(TAG,"detach(): Removing window from window manager");
    mWindow.getWindowManager().removeViewImmediate(mWindow.getDecorView());
    mWindow=null;
  }
  if (mWindowToken != null) {
    WindowManagerGlobal.getInstance().closeAll(mWindowToken,this.getClass().getName(),"Dream");
    mWindowToken=null;
    mCanDoze=false;
  }
}
