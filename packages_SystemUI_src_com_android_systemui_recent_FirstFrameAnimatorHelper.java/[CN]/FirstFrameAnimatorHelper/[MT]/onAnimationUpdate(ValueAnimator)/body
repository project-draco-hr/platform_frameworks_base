{
  final long currentTime=System.currentTimeMillis();
  if (mStartTime == -1) {
    mStartFrame=sGlobalFrameCounter;
    mStartTime=currentTime;
  }
  if (!mHandlingOnAnimationUpdate && animation.getCurrentPlayTime() < animation.getDuration()) {
    mHandlingOnAnimationUpdate=true;
    long frameNum=sGlobalFrameCounter - mStartFrame;
    if (frameNum == 0 && currentTime < mStartTime + MAX_DELAY) {
      mTarget.getRootView().invalidate();
      animation.setCurrentPlayTime(0);
    }
 else     if (frameNum == 1 && currentTime < mStartTime + MAX_DELAY && !mAdjustedSecondFrameTime && currentTime > mStartTime + IDEAL_FRAME_DURATION) {
      animation.setCurrentPlayTime(IDEAL_FRAME_DURATION);
      mAdjustedSecondFrameTime=true;
    }
 else {
      if (frameNum > 1) {
        mTarget.post(new Runnable(){
          public void run(){
            animation.removeUpdateListener(FirstFrameAnimatorHelper.this);
          }
        }
);
      }
      if (DEBUG)       print(animation);
    }
    mHandlingOnAnimationUpdate=false;
  }
 else {
    if (DEBUG)     print(animation);
  }
}
