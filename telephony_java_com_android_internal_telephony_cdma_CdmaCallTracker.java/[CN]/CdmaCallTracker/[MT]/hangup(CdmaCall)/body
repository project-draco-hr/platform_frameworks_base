{
  if (call.getConnections().size() == 0) {
    throw new CallStateException("no connections in call");
  }
  if (call == ringingCall) {
    if (Phone.DEBUG_PHONE)     log("(ringing) hangup waiting or background");
    cm.hangupWaitingOrBackground(obtainCompleteMessage());
  }
 else   if (call == foregroundCall) {
    if (call.isDialingOrAlerting()) {
      if (Phone.DEBUG_PHONE) {
        log("(foregnd) hangup dialing or alerting...");
      }
      hangup((CdmaConnection)(call.getConnections().get(0)));
    }
 else {
      hangupForegroundResumeBackground();
    }
  }
 else   if (call == backgroundCall) {
    if (ringingCall.isRinging()) {
      if (Phone.DEBUG_PHONE) {
        log("hangup all conns in background call");
      }
      hangupAllConnections(call);
    }
 else {
      hangupWaitingOrBackground();
    }
  }
 else {
    throw new RuntimeException("CdmaCall " + call + "does not belong to CdmaCallTracker "+ this);
  }
  call.onHangupLocal();
}
