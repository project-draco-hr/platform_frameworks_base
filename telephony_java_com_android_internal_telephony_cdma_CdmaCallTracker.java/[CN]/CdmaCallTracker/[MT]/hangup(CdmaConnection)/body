{
  if (conn.owner != this) {
    throw new CallStateException("CdmaConnection " + conn + "does not belong to CdmaCallTracker "+ this);
  }
  if (conn == pendingMO) {
    if (Phone.DEBUG_PHONE)     log("hangup: set hangupPendingMO to true");
    hangupPendingMO=true;
  }
 else   if ((conn.getCall() == ringingCall) && (ringingCall.getState() == CdmaCall.State.WAITING)) {
    conn.onLocalDisconnect();
    phone.notifyPreciseCallStateChanged();
    return;
  }
 else {
    try {
      cm.hangupConnection(conn.getCDMAIndex(),obtainCompleteMessage());
    }
 catch (    CallStateException ex) {
      Log.w(LOG_TAG,"CdmaCallTracker WARN: hangup() on absent connection " + conn);
    }
  }
  conn.onHangupLocal();
}
