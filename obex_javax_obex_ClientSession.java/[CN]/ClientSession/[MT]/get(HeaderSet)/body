{
  if (!isConnected) {
    throw new IOException("Not connected to the server");
  }
synchronized (this) {
    if (isActive) {
      throw new IOException("OBEX request is already being performed");
    }
    isActive=true;
  }
  ensureOpen();
  if (header == null) {
    header=new HeaderSet();
  }
 else {
    if ((header).nonce != null) {
      challengeDigest=new byte[16];
      System.arraycopy((header).nonce,0,challengeDigest,0,16);
    }
  }
  if (connectionID != null) {
    (header).connectionID=new byte[4];
    System.arraycopy(connectionID,0,(header).connectionID,0,4);
  }
  return new ClientOperation(input,maxPacketSize,this,header,true);
}
