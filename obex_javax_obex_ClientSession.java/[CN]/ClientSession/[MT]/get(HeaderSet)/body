{
  if (!mObexConnected) {
    throw new IOException("Not connected to the server");
  }
  setRequestActive();
  ensureOpen();
  if (header == null) {
    header=new HeaderSet();
  }
 else {
    if (header.nonce != null) {
      mChallengeDigest=new byte[16];
      System.arraycopy(header.nonce,0,mChallengeDigest,0,16);
    }
  }
  if (mConnectionId != null) {
    header.connectionID=new byte[4];
    System.arraycopy(mConnectionId,0,header.connectionID,0,4);
  }
  return new ClientOperation(mInput,maxPacketSize,this,header,true);
}
