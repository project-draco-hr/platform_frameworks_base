{
  Instrumentation inst=getInstrumentation();
{
    Activity activity=getActivity();
    Intent intent=new Intent();
    intent.setClass(activity,HTMLHostActivity.class);
    intent.putExtra(HTMLHostActivity.RESUME_FROM_CRASH,resume);
    intent.putExtra(HTMLHostActivity.SINGLE_TEST_MODE,false);
    intent.putExtra(HTMLHostActivity.TEST_PATH_PREFIX,layoutTestDir);
    intent.putExtra(HTMLHostActivity.TIMEOUT_IN_MILLIS,mTimeoutInMillis);
    activity.startActivity(intent);
  }
  ActivityMonitor htmlHostActivityMonitor=inst.addMonitor("com.android.dumprendertree.HTMLHostActivity",null,false);
  HTMLHostActivity activity=(HTMLHostActivity)htmlHostActivityMonitor.waitForActivity();
  while (!activity.hasFinishedRunning()) {
    try {
      Thread.sleep(5000);
    }
 catch (    Exception e) {
    }
  }
  try {
    Thread.sleep(5000);
  }
 catch (  Exception e) {
  }
  activity.finish();
}
