{
  for (int i=mSpanCount - 1; i >= 0; i--) {
    if (mSpans[i] == what) {
      int ostart=mSpanStarts[i];
      int oend=mSpanEnds[i];
      if (ostart > mGapStart)       ostart-=mGapLength;
      if (oend > mGapStart)       oend-=mGapLength;
      int count=mSpanCount - (i + 1);
      System.arraycopy(mSpans,i + 1,mSpans,i,count);
      System.arraycopy(mSpanStarts,i + 1,mSpanStarts,i,count);
      System.arraycopy(mSpanEnds,i + 1,mSpanEnds,i,count);
      System.arraycopy(mSpanFlags,i + 1,mSpanFlags,i,count);
      mSpanCount--;
      mSpans[mSpanCount]=null;
      sendSpanRemoved(what,ostart,oend);
      return;
    }
  }
}
