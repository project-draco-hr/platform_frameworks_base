{
  if (o instanceof Spanned && toString().equals(o.toString())) {
    Object[] otherSpans=((Spanned)o).getSpans(0,((Spanned)o).length(),Object.class);
    if (mSpanCount == otherSpans.length) {
      for (int i=0; i < mSpanCount; ++i) {
        Object thisSpan=mSpans[i];
        Object otherSpan=otherSpans[i];
        if (!thisSpan.equals(otherSpan) || getSpanStart(thisSpan) != getSpanStart(otherSpan) || getSpanEnd(thisSpan) != getSpanEnd(otherSpan) || getSpanFlags(thisSpan) != getSpanFlags(otherSpan)) {
          return false;
        }
      }
      return true;
    }
  }
  return false;
}
