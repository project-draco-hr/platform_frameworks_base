{
  checkRange("drawTextRun",start,end);
  int contextLen=contextEnd - contextStart;
  int len=end - start;
  if (contextEnd <= mGapStart) {
    c.drawTextRun(mText,start,len,contextStart,contextLen,x,y,flags,p);
  }
 else   if (contextStart >= mGapStart) {
    c.drawTextRun(mText,start + mGapLength,len,contextStart + mGapLength,contextLen,x,y,flags,p);
  }
 else {
    char[] buf=TextUtils.obtain(contextLen);
    getChars(contextStart,contextEnd,buf,0);
    c.drawTextRun(buf,start - contextStart,len,0,contextLen,x,y,flags,p);
    TextUtils.recycle(buf);
  }
}
