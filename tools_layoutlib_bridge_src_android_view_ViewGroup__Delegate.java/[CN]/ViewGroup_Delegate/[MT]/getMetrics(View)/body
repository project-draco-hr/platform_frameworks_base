{
  Context context=view.getContext();
  while (context instanceof ContextThemeWrapper) {
    context=((ContextThemeWrapper)context).getBaseContext();
  }
  if (context instanceof BridgeContext) {
    return ((BridgeContext)context).getMetrics();
  }
  throw new RuntimeException("View " + view.getClass().getName() + " not created with the "+ "right context");
}
