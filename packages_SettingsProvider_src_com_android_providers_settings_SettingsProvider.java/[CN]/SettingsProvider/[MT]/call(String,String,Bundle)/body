{
  int callingUser=UserHandle.getCallingUserId();
  if (args != null) {
    int reqUser=args.getInt(Settings.CALL_METHOD_USER_KEY,callingUser);
    if (reqUser != callingUser) {
      callingUser=ActivityManager.handleIncomingUser(Binder.getCallingPid(),Binder.getCallingUid(),reqUser,false,true,"get/set setting for user",null);
      if (LOCAL_LOGV)       Slog.v(TAG,"   access setting for user " + callingUser);
    }
  }
  DatabaseHelper dbHelper;
  SettingsCache cache;
  if (Settings.CALL_METHOD_GET_SYSTEM.equals(method)) {
    if (LOCAL_LOGV)     Slog.v(TAG,"call(system:" + request + ") for "+ callingUser);
    dbHelper=getOrEstablishDatabase(callingUser);
    cache=sSystemCaches.get(callingUser);
    return lookupValue(dbHelper,TABLE_SYSTEM,cache,request);
  }
  if (Settings.CALL_METHOD_GET_SECURE.equals(method)) {
    if (LOCAL_LOGV)     Slog.v(TAG,"call(secure:" + request + ") for "+ callingUser);
    dbHelper=getOrEstablishDatabase(callingUser);
    cache=sSecureCaches.get(callingUser);
    return lookupValue(dbHelper,TABLE_SECURE,cache,request);
  }
  if (Settings.CALL_METHOD_GET_GLOBAL.equals(method)) {
    if (LOCAL_LOGV)     Slog.v(TAG,"call(global:" + request + ") for "+ callingUser);
    return lookupValue(getOrEstablishDatabase(UserHandle.USER_OWNER),TABLE_GLOBAL,sGlobalCache,request);
  }
  final String newValue=(args == null) ? null : args.getString(Settings.NameValueTable.VALUE);
  final ContentValues values=new ContentValues();
  values.put(Settings.NameValueTable.NAME,request);
  values.put(Settings.NameValueTable.VALUE,newValue);
  if (Settings.CALL_METHOD_PUT_SYSTEM.equals(method)) {
    if (LOCAL_LOGV)     Slog.v(TAG,"call_put(system:" + request + "="+ newValue+ ") for "+ callingUser);
    insertForUser(Settings.System.CONTENT_URI,values,callingUser);
  }
 else   if (Settings.CALL_METHOD_PUT_SECURE.equals(method)) {
    if (LOCAL_LOGV)     Slog.v(TAG,"call_put(secure:" + request + "="+ newValue+ ") for "+ callingUser);
    insertForUser(Settings.Secure.CONTENT_URI,values,callingUser);
  }
 else   if (Settings.CALL_METHOD_PUT_GLOBAL.equals(method)) {
    if (LOCAL_LOGV)     Slog.v(TAG,"call_put(global:" + request + "="+ newValue+ ") for "+ callingUser);
    insertForUser(Settings.Global.CONTENT_URI,values,callingUser);
  }
 else {
    Slog.w(TAG,"call() with invalid method: " + method);
  }
  return null;
}
