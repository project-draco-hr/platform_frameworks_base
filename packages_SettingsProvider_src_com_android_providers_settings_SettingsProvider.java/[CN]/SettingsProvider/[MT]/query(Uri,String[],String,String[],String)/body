{
  final int callingUser=UserHandle.getCallingUserId();
  if (LOCAL_LOGV)   Slog.v(TAG,"query() for user " + callingUser);
  SqlArguments args=new SqlArguments(url,where,whereArgs);
  DatabaseHelper dbH;
synchronized (this) {
    dbH=getOrEstablishDatabaseLocked(callingUser);
  }
  SQLiteDatabase db=dbH.getReadableDatabase();
  if (TABLE_FAVORITES.equals(args.table)) {
    return null;
  }
 else   if (TABLE_OLD_FAVORITES.equals(args.table)) {
    args.table=TABLE_FAVORITES;
    Cursor cursor=db.rawQuery("PRAGMA table_info(favorites);",null);
    if (cursor != null) {
      boolean exists=cursor.getCount() > 0;
      cursor.close();
      if (!exists)       return null;
    }
 else {
      return null;
    }
  }
  SQLiteQueryBuilder qb=new SQLiteQueryBuilder();
  qb.setTables(args.table);
  Cursor ret=qb.query(db,select,args.where,args.args,null,null,sort);
  ret.setNotificationUri(getContext().getContentResolver(),url);
  return ret;
}
