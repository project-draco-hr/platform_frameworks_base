{
  boolean backedUpDataChanged=false;
  String property=null, table=uri.getPathSegments().get(0);
  final boolean isGlobal=table.equals(TABLE_GLOBAL);
  if (table.equals(TABLE_SYSTEM)) {
    property=Settings.System.SYS_PROP_SETTING_VERSION + '_' + userHandle;
    backedUpDataChanged=true;
  }
 else   if (table.equals(TABLE_SECURE)) {
    property=Settings.Secure.SYS_PROP_SETTING_VERSION + '_' + userHandle;
    backedUpDataChanged=true;
  }
 else   if (isGlobal) {
    property=Settings.Global.SYS_PROP_SETTING_VERSION;
    backedUpDataChanged=true;
  }
  if (property != null) {
    long version=SystemProperties.getLong(property,0) + 1;
    if (LOCAL_LOGV)     Log.v(TAG,"property: " + property + "="+ version);
    SystemProperties.set(property,Long.toString(version));
  }
  if (backedUpDataChanged) {
    mBackupManager.dataChanged();
  }
  String notify=uri.getQueryParameter("notify");
  if (notify == null || "true".equals(notify)) {
    final int notifyTarget=isGlobal ? UserHandle.USER_ALL : userHandle;
    getContext().getContentResolver().notifyChange(uri,null,true,notifyTarget);
    if (LOCAL_LOGV)     Log.v(TAG,"notifying for " + notifyTarget + ": "+ uri);
  }
 else {
    if (LOCAL_LOGV)     Log.v(TAG,"notification suppressed: " + uri);
  }
}
