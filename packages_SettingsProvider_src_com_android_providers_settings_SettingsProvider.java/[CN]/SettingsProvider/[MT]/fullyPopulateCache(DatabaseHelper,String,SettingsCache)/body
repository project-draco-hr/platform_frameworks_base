{
  SQLiteDatabase db=dbHelper.getReadableDatabase();
  Cursor c=db.query(table,new String[]{Settings.NameValueTable.NAME,Settings.NameValueTable.VALUE},null,null,null,null,null,"" + (MAX_CACHE_ENTRIES + 1));
  try {
synchronized (cache) {
      cache.evictAll();
      cache.setFullyMatchesDisk(true);
      int rows=0;
      while (c.moveToNext()) {
        rows++;
        String name=c.getString(0);
        String value=c.getString(1);
        cache.populate(name,value);
      }
      if (rows > MAX_CACHE_ENTRIES) {
        cache.setFullyMatchesDisk(false);
        Log.d(TAG,"row count exceeds max cache entries for table " + table);
      }
      if (LOCAL_LOGV)       Log.d(TAG,"cache for settings table '" + table + "' rows="+ rows+ "; fullycached="+ cache.fullyMatchesDisk());
    }
  }
  finally {
    c.close();
  }
}
