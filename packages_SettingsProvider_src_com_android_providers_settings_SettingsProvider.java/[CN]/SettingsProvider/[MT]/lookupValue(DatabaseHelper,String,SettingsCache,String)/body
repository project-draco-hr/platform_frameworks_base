{
  if (cache == null) {
    Slog.e(TAG,"cache is null for user " + UserHandle.getCallingUserId() + " : key="+ key);
    return null;
  }
synchronized (cache) {
    Bundle value=cache.get(key);
    if (value != null) {
      if (value != TOO_LARGE_TO_CACHE_MARKER) {
        return value;
      }
    }
 else     if (cache.fullyMatchesDisk()) {
      return NULL_SETTING;
    }
  }
  SQLiteDatabase db=dbHelper.getReadableDatabase();
  Cursor cursor=null;
  try {
    cursor=db.query(table,COLUMN_VALUE,"name=?",new String[]{key},null,null,null,null);
    if (cursor != null && cursor.getCount() == 1) {
      cursor.moveToFirst();
      return cache.putIfAbsent(key,cursor.getString(0));
    }
  }
 catch (  SQLiteException e) {
    Log.w(TAG,"settings lookup error",e);
    return null;
  }
 finally {
    if (cursor != null)     cursor.close();
  }
  cache.putIfAbsent(key,null);
  return NULL_SETTING;
}
