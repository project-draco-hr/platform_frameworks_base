{
  mBackupManager=new BackupManager(getContext());
  mUserManager=UserManager.get(getContext());
  setAppOps(AppOpsManager.OP_NONE,AppOpsManager.OP_WRITE_SETTINGS);
  establishDbTracking(UserHandle.USER_OWNER);
  IntentFilter userFilter=new IntentFilter();
  userFilter.addAction(Intent.ACTION_USER_REMOVED);
  userFilter.addAction(Intent.ACTION_USER_ADDED);
  getContext().registerReceiver(new BroadcastReceiver(){
    @Override public void onReceive(    Context context,    Intent intent){
      final int userHandle=intent.getIntExtra(Intent.EXTRA_USER_HANDLE,UserHandle.USER_OWNER);
      if (intent.getAction().equals(Intent.ACTION_USER_REMOVED)) {
        onUserRemoved(userHandle);
      }
 else       if (intent.getAction().equals(Intent.ACTION_USER_ADDED)) {
        onProfilesChanged();
      }
    }
  }
,userFilter);
  onProfilesChanged();
  return true;
}
