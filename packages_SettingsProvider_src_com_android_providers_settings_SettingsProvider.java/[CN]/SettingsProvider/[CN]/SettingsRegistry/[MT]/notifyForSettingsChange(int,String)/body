{
  boolean backedUpDataChanged=false;
  String property=null;
  if (isGlobalSettingsKey(key)) {
    property=Settings.Global.SYS_PROP_SETTING_VERSION;
    backedUpDataChanged=true;
  }
 else   if (isSecureSettingsKey(key)) {
    property=Settings.Secure.SYS_PROP_SETTING_VERSION;
    backedUpDataChanged=true;
  }
 else   if (isSystemSettingsKey(key)) {
    property=Settings.System.SYS_PROP_SETTING_VERSION;
    backedUpDataChanged=true;
  }
  if (property != null) {
    final long version=SystemProperties.getLong(property,0) + 1;
    SystemProperties.set(property,Long.toString(version));
    if (DEBUG) {
      Slog.v(LOG_TAG,"System property " + property + "="+ version);
    }
  }
  if (backedUpDataChanged) {
    mHandler.obtainMessage(MyHandler.MSG_NOTIFY_DATA_CHANGED).sendToTarget();
  }
  final int userId=getUserIdFromKey(key);
  Uri uri=getNotificationUriFor(key,name);
  mHandler.obtainMessage(MyHandler.MSG_NOTIFY_URI_CHANGED,userId,0,uri).sendToTarget();
  if (isSecureSettingsKey(key)) {
    maybeNotifyProfiles(userId,uri,name,sSecureCloneToManagedSettings);
  }
 else   if (isSystemSettingsKey(key)) {
    maybeNotifyProfiles(userId,uri,name,sSystemCloneToManagedSettings);
  }
}
