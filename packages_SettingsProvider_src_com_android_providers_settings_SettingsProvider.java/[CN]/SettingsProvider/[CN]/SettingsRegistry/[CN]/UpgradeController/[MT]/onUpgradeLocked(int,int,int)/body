{
  if (DEBUG) {
    Slog.w(LOG_TAG,"Upgrading settings for user: " + userId + " from version: "+ oldVersion+ " to version: "+ newVersion);
  }
  int currentVersion=oldVersion;
  if (currentVersion == 118) {
    if (userId == UserHandle.USER_SYSTEM) {
      final SettingsState globalSettings=getGlobalSettingsLocked();
      globalSettings.updateSettingLocked(Settings.Global.ZEN_MODE,Integer.toString(Settings.Global.ZEN_MODE_OFF),SettingsState.SYSTEM_PACKAGE_NAME);
      globalSettings.updateSettingLocked(Settings.Global.MODE_RINGER,Integer.toString(AudioManager.RINGER_MODE_NORMAL),SettingsState.SYSTEM_PACKAGE_NAME);
    }
    currentVersion=119;
  }
  if (currentVersion == 119) {
    SettingsState secureSettings=getSecureSettingsLocked(userId);
    secureSettings.insertSettingLocked(Settings.Secure.DOUBLE_TAP_TO_WAKE,getContext().getResources().getBoolean(R.bool.def_double_tap_to_wake) ? "1" : "0",SettingsState.SYSTEM_PACKAGE_NAME);
    currentVersion=120;
  }
  if (currentVersion == 120) {
    currentVersion=121;
  }
  if (currentVersion == 121) {
    final SettingsState secureSettings=getSecureSettingsLocked(userId);
    String defaultComponent=(getContext().getResources().getString(R.string.def_nfc_payment_component));
    Setting currentSetting=secureSettings.getSettingLocked(Settings.Secure.NFC_PAYMENT_DEFAULT_COMPONENT);
    if (defaultComponent != null && !defaultComponent.isEmpty() && currentSetting == null) {
      secureSettings.insertSettingLocked(Settings.Secure.NFC_PAYMENT_DEFAULT_COMPONENT,defaultComponent,SettingsState.SYSTEM_PACKAGE_NAME);
    }
    currentVersion=122;
  }
  return currentVersion;
}
