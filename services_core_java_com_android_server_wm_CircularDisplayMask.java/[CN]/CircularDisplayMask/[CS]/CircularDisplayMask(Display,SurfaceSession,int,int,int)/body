{
  mScreenSize=new Point();
  display.getSize(mScreenSize);
  if (mScreenSize.x != mScreenSize.y + screenOffset) {
    Slog.w(TAG,"Screen dimensions of displayId = " + display.getDisplayId() + "are not equal, circularMask will not be drawn.");
    mDimensionsUnequal=true;
  }
  SurfaceControl ctrl=null;
  try {
    if (WindowManagerService.DEBUG_SURFACE_TRACE) {
      ctrl=new WindowStateAnimator.SurfaceTrace(session,"CircularDisplayMask",mScreenSize.x,mScreenSize.y,PixelFormat.TRANSLUCENT,SurfaceControl.HIDDEN);
    }
 else {
      ctrl=new SurfaceControl(session,"CircularDisplayMask",mScreenSize.x,mScreenSize.y,PixelFormat.TRANSLUCENT,SurfaceControl.HIDDEN);
    }
    ctrl.setLayerStack(display.getLayerStack());
    ctrl.setLayer(zOrder);
    ctrl.setPosition(0,0);
    ctrl.show();
    mSurface.copyFrom(ctrl);
  }
 catch (  OutOfResourcesException e) {
  }
  mSurfaceControl=ctrl;
  mDrawNeeded=true;
  mPaint=new Paint();
  mPaint.setAntiAlias(true);
  mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
  mScreenOffset=screenOffset;
  mMaskThickness=maskThickness;
}
