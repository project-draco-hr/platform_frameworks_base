{
  boolean didCurState=false;
  for (int i=0; i < mDurations.getKeyCount(); i++) {
    final int key=mDurations.getKeyAt(i);
    final int type=SparseMappingTable.getIdFromKey(key);
    long time=mDurations.getValue(key);
    if (mCurState == type) {
      didCurState=true;
      time+=now - mStartTime;
    }
    DumpUtils.printProcStateTagAndValue(pw,type,time);
  }
  if (!didCurState && mCurState != STATE_NOTHING) {
    DumpUtils.printProcStateTagAndValue(pw,mCurState,now - mStartTime);
  }
}
