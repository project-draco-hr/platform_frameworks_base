{
  ensureNotDead();
  if (!mDead && (mCurState != state)) {
    commitStateTime(now);
    mCurState=state;
  }
}
