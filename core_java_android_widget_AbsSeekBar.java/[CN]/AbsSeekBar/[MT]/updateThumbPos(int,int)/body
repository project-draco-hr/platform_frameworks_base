{
  Drawable d=getCurrentDrawable();
  Drawable thumb=mThumb;
  int thumbHeight=thumb == null ? 0 : thumb.getIntrinsicHeight();
  int trackHeight=Math.min(mMaxHeight,h - mPaddingTop - mPaddingBottom);
  int max=getMax();
  float scale=max > 0 ? (float)getProgress() / (float)max : 0;
  if (thumbHeight > trackHeight) {
    if (thumb != null) {
      setThumbPos(w,thumb,scale,0);
    }
    int gapForCenteringTrack=(thumbHeight - trackHeight) / 2;
    if (d != null) {
      d.setBounds(0,gapForCenteringTrack,w - mPaddingRight - mPaddingLeft,h - mPaddingBottom - gapForCenteringTrack- mPaddingTop);
    }
  }
 else {
    if (d != null) {
      d.setBounds(0,0,w - mPaddingRight - mPaddingLeft,h - mPaddingBottom - mPaddingTop);
    }
    int gap=(trackHeight - thumbHeight) / 2;
    if (thumb != null) {
      setThumbPos(w,thumb,scale,gap);
    }
  }
}
