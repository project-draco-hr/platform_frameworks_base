{
  MediaCodec mediaCodec;
  try {
    mediaCodec=MediaCodec.createDecoderByType(format.getString(MediaFormat.KEY_MIME));
  }
 catch (  IOException e) {
    throw new RuntimeException("failed to create decoder for " + format.getString(MediaFormat.KEY_MIME),e);
  }
  Surface surface=new Surface(mSurfaceTexture);
  mediaCodec.configure(format,surface,null,0);
  surface.release();
  return mediaCodec;
}
