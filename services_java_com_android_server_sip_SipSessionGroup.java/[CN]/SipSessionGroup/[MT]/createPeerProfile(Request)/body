{
  try {
    FromHeader fromHeader=(FromHeader)request.getHeader(FromHeader.NAME);
    Address address=fromHeader.getAddress();
    SipURI uri=(SipURI)address.getURI();
    String username=uri.getUser();
    if (username == null)     username=ANONYMOUS;
    return new SipProfile.Builder(username,uri.getHost()).setPort(uri.getPort()).setDisplayName(address.getDisplayName()).build();
  }
 catch (  InvalidArgumentException e) {
    throw new SipException("createPeerProfile()",e);
  }
catch (  ParseException e) {
    throw new SipException("createPeerProfile()",e);
  }
}
