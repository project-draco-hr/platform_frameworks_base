{
  Log.d(TAG,"processing Timeout..." + event);
  Transaction current=event.isServerTransaction() ? mServerTransaction : mClientTransaction;
  Transaction target=event.isServerTransaction() ? event.getServerTransaction() : event.getClientTransaction();
  if ((current != target) && (mState != SipSessionState.PINGING)) {
    Log.d(TAG,"not the current transaction; current=" + current + ", timed out="+ target);
    return;
  }
switch (mState) {
case REGISTERING:
case DEREGISTERING:
    reset();
  mProxy.onRegistrationTimeout(this);
break;
case INCOMING_CALL:
case INCOMING_CALL_ANSWERING:
case OUTGOING_CALL_CANCELING:
endCallOnError(new SipException("timed out"));
break;
case PINGING:
reset();
mReRegisterFlag=true;
mState=SipSessionState.READY_TO_CALL;
break;
default :
break;
}
}
