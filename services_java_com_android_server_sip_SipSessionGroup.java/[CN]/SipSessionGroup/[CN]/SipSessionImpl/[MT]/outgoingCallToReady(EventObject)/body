{
  if (evt instanceof ResponseEvent) {
    ResponseEvent event=(ResponseEvent)evt;
    Response response=event.getResponse();
    int statusCode=response.getStatusCode();
    if (expectResponse(Request.CANCEL,evt)) {
switch (statusCode) {
case Response.OK:
        return true;
case Response.REQUEST_TERMINATED:
      endCallNormally();
    return true;
}
}
 else if (expectResponse(Request.INVITE,evt)) {
if (statusCode == Response.OK) {
  outgoingCall(evt);
  return true;
}
}
 else {
return false;
}
if (statusCode >= 400) {
onError(response);
return true;
}
}
 else if (evt instanceof TransactionTerminatedEvent) {
onError(new SipException("timed out"));
}
return false;
}
