{
  cancelSessionTimer();
switch (mState) {
case SipSession.State.REGISTERING:
case SipSession.State.DEREGISTERING:
    onRegistrationFailed(errorCode,message);
  break;
default :
if ((errorCode != SipErrorCode.DATA_CONNECTION_LOST) && mInCall) {
  fallbackToPreviousInCall(errorCode,message);
}
 else {
  endCallOnError(errorCode,message);
}
}
}
