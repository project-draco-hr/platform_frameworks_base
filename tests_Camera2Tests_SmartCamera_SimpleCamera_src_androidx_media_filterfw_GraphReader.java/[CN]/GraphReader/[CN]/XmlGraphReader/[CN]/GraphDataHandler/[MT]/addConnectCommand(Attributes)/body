{
  String sourcePortName=null;
  String sourceFilterName=null;
  String targetPortName=null;
  String targetFilterName=null;
  String sourceTag=attributes.getValue("source");
  if (sourceTag != null) {
    String[] sourceParts=sourceTag.split(":");
    if (sourceParts.length == 2) {
      sourceFilterName=sourceParts[0];
      sourcePortName=sourceParts[1];
    }
 else {
      throw new RuntimeException("'source' tag needs to have format \"filter:port\"! " + "Alternatively, you may use the form " + "'sourceFilter=\"filter\" sourcePort=\"port\"'.");
    }
  }
 else {
    sourceFilterName=attributes.getValue("sourceFilter");
    sourcePortName=attributes.getValue("sourcePort");
  }
  String targetTag=attributes.getValue("target");
  if (targetTag != null) {
    String[] targetParts=targetTag.split(":");
    if (targetParts.length == 2) {
      targetFilterName=targetParts[0];
      targetPortName=targetParts[1];
    }
 else {
      throw new RuntimeException("'target' tag needs to have format \"filter:port\"! " + "Alternatively, you may use the form " + "'targetFilter=\"filter\" targetPort=\"port\"'.");
    }
  }
 else {
    targetFilterName=attributes.getValue("targetFilter");
    targetPortName=attributes.getValue("targetPort");
  }
  String sourceSlotName=attributes.getValue("sourceSlot");
  String targetSlotName=attributes.getValue("targetSlot");
  if (sourceSlotName != null) {
    sourceFilterName="sourceSlot_" + sourceSlotName;
    mCommandStack.append(new AddSourceSlotCommand(sourceFilterName,sourceSlotName));
    sourcePortName="frame";
  }
  if (targetSlotName != null) {
    targetFilterName="targetSlot_" + targetSlotName;
    mCommandStack.append(new AddTargetSlotCommand(targetFilterName,targetSlotName));
    targetPortName="frame";
  }
  assertValueNotNull("sourceFilter",sourceFilterName);
  assertValueNotNull("sourcePort",sourcePortName);
  assertValueNotNull("targetFilter",targetFilterName);
  assertValueNotNull("targetPort",targetPortName);
  mCommandStack.append(new ConnectCommand(sourceFilterName,sourcePortName,targetFilterName,targetPortName));
}
