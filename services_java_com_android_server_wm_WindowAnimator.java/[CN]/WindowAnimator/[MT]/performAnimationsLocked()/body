{
  if (WindowManagerService.DEBUG_APP_TRANSITIONS)   Slog.v(TAG,"*** ANIM STEP: seq=" + mTransactionSequence + " mAnimating="+ mAnimating);
  mTokenMayBeDrawn=false;
  mService.mInnerFields.mWallpaperMayChange=false;
  mForceHiding=false;
  mService.mInnerFields.mDetachedWallpaper=null;
  mWindowAnimationBackground=null;
  mWindowAnimationBackgroundColor=0;
  updateWindowsAndWallpaperLocked();
  if (mTokenMayBeDrawn) {
    testTokenMayBeDrawnLocked();
  }
  if (WindowManagerService.DEBUG_APP_TRANSITIONS)   Slog.v(TAG,"*** ANIM STEP: changes=0x" + Integer.toHexString(mPendingLayoutChanges));
}
