{
  DisplayContentsAnimator displayAnimator=mDisplayContentsAnimators.get(displayId);
  if (newWinAnimator == null) {
    displayAnimator.mDimWinAnimator=null;
  }
 else {
    final WindowStateAnimator existingDimWinAnimator=displayAnimator.mDimWinAnimator;
    if (newWinAnimator.mSurfaceShown && (existingDimWinAnimator == null || !existingDimWinAnimator.mSurfaceShown || existingDimWinAnimator.mAnimLayer < newWinAnimator.mAnimLayer)) {
      displayAnimator.mDimWinAnimator=newWinAnimator;
    }
  }
}
