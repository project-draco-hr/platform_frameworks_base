{
  final String subPrefix="  " + prefix;
  final String subSubPrefix="  " + subPrefix;
  boolean needSep=false;
  if (mAppAnimators.size() > 0) {
    needSep=true;
    pw.println("  App Animators:");
    for (int i=mAppAnimators.size() - 1; i >= 0; i--) {
      AppWindowAnimator anim=mAppAnimators.get(i);
      pw.print(prefix);
      pw.print("App Animator #");
      pw.print(i);
      pw.print(' ');
      pw.print(anim);
      if (dumpAll) {
        pw.println(':');
        anim.dump(pw,subPrefix,dumpAll);
      }
 else {
        pw.println();
      }
    }
  }
  if (mWallpaperTokens.size() > 0) {
    if (needSep) {
      pw.println();
    }
    needSep=true;
    pw.print(prefix);
    pw.println("Wallpaper tokens:");
    for (int i=mWallpaperTokens.size() - 1; i >= 0; i--) {
      WindowToken token=mWallpaperTokens.get(i);
      pw.print(prefix);
      pw.print("Wallpaper #");
      pw.print(i);
      pw.print(' ');
      pw.print(token);
      if (dumpAll) {
        pw.println(':');
        token.dump(pw,subPrefix);
      }
 else {
        pw.println();
      }
    }
  }
  if (needSep) {
    pw.println();
  }
  for (int i=0; i < mDisplayContentsAnimators.size(); i++) {
    pw.print(prefix);
    pw.print("DisplayContentsAnimator #");
    pw.print(mDisplayContentsAnimators.keyAt(i));
    pw.println(":");
    DisplayContentsAnimator displayAnimator=mDisplayContentsAnimators.valueAt(i);
    for (int j=0; j < displayAnimator.mWinAnimators.size(); j++) {
      WindowStateAnimator wanim=displayAnimator.mWinAnimators.get(j);
      pw.print(subPrefix);
      pw.print("Window #");
      pw.print(j);
      pw.print(": ");
      pw.println(wanim);
    }
    if (displayAnimator.mWindowAnimationBackgroundSurface != null) {
      if (dumpAll || displayAnimator.mWindowAnimationBackgroundSurface.mDimShown) {
        pw.print(subPrefix);
        pw.println("mWindowAnimationBackgroundSurface:");
        displayAnimator.mWindowAnimationBackgroundSurface.printTo(subSubPrefix,pw);
      }
    }
    if (displayAnimator.mDimAnimator != null) {
      if (dumpAll || displayAnimator.mDimAnimator.mDimShown) {
        pw.print(subPrefix);
        pw.println("mDimAnimator:");
        displayAnimator.mDimAnimator.printTo(subSubPrefix,pw);
      }
    }
 else     if (dumpAll) {
      pw.print(subPrefix);
      pw.println("no DimAnimator ");
    }
    if (displayAnimator.mDimParams != null) {
      pw.print(subPrefix);
      pw.println("mDimParams:");
      displayAnimator.mDimParams.printTo(subSubPrefix,pw);
    }
 else     if (dumpAll) {
      pw.print(subPrefix);
      pw.println("no DimParams ");
    }
    if (displayAnimator.mScreenRotationAnimation != null) {
      pw.print(subPrefix);
      pw.println("mScreenRotationAnimation:");
      displayAnimator.mScreenRotationAnimation.printTo(subSubPrefix,pw);
    }
 else     if (dumpAll) {
      pw.print(subPrefix);
      pw.println("no ScreenRotationAnimation ");
    }
  }
  pw.println();
  if (dumpAll) {
    pw.print(prefix);
    pw.print("mAnimTransactionSequence=");
    pw.print(mAnimTransactionSequence);
    pw.print(" mForceHiding=");
    pw.println(forceHidingToString());
    pw.print(prefix);
    pw.print("mCurrentTime=");
    pw.println(TimeUtils.formatUptime(mCurrentTime));
    pw.print(prefix);
    pw.print("mDw=");
    pw.print(mDw);
    pw.print(" mDh=");
    pw.print(mDh);
    pw.print(" mInnerDw=");
    pw.print(mInnerDw);
    pw.print(" mInnerDh=");
    pw.println(mInnerDh);
  }
  if (mBulkUpdateParams != 0) {
    pw.print(prefix);
    pw.print("mBulkUpdateParams=0x");
    pw.print(Integer.toHexString(mBulkUpdateParams));
    pw.println(bulkUpdateParamsToString(mBulkUpdateParams));
  }
  if (mPendingActions != 0) {
    pw.print(prefix);
    pw.print("mPendingActions=0x");
    pw.println(Integer.toHexString(mPendingActions));
  }
  if (mWindowDetachedWallpaper != null) {
    pw.print(prefix);
    pw.print("mWindowDetachedWallpaper=");
    pw.println(mWindowDetachedWallpaper);
  }
  pw.print(prefix);
  pw.print("mWallpaperTarget=");
  pw.println(mWallpaperTarget);
  pw.print(prefix);
  pw.print("mWpAppAnimator=");
  pw.println(mWpAppAnimator);
  if (mLowerWallpaperTarget != null || mUpperWallpaperTarget != null) {
    pw.print(prefix);
    pw.print("mLowerWallpaperTarget=");
    pw.println(mLowerWallpaperTarget);
    pw.print(prefix);
    pw.print("mUpperWallpaperTarget=");
    pw.println(mUpperWallpaperTarget);
  }
  if (mUniverseBackground != null) {
    pw.print(prefix);
    pw.print("mUniverseBackground=");
    pw.print(mUniverseBackground);
    pw.print(" mAboveUniverseLayer=");
    pw.println(mAboveUniverseLayer);
  }
}
