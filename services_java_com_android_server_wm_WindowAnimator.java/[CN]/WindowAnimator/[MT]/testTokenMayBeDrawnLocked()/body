{
  final ArrayList<AppWindowToken> appTokens=mService.mAnimatingAppTokens;
  final int NT=appTokens.size();
  for (int i=0; i < NT; i++) {
    AppWindowToken wtoken=appTokens.get(i);
    final boolean allDrawn=wtoken.allDrawn;
    if (allDrawn != wtoken.mAppAnimator.allDrawn) {
      wtoken.mAppAnimator.allDrawn=allDrawn;
      if (allDrawn) {
        if (wtoken.mAppAnimator.freezingScreen) {
          wtoken.mAppAnimator.showAllWindowsLocked();
          mService.unsetAppFreezingScreenLocked(wtoken,false,true);
          if (WindowManagerService.DEBUG_ORIENTATION)           Slog.i(TAG,"Setting mOrientationChangeComplete=true because wtoken " + wtoken + " numInteresting="+ wtoken.numInterestingWindows+ " numDrawn="+ wtoken.numDrawnWindows);
          mPendingLayoutChanges|=WindowManagerPolicy.FINISH_LAYOUT_REDO_WALLPAPER;
        }
 else {
          mPendingLayoutChanges|=PhoneWindowManager.FINISH_LAYOUT_REDO_ANIM;
          if (WindowManagerService.DEBUG_LAYOUT_REPEATS) {
            mService.debugLayoutRepeats("testTokenMayBeDrawnLocked",mPendingLayoutChanges);
          }
          if (!mService.mOpeningApps.contains(wtoken)) {
            mAnimating|=wtoken.mAppAnimator.showAllWindowsLocked();
          }
        }
      }
    }
  }
}
