{
  final int NT=mService.mAppTokens.size();
  for (int i=0; i < NT; i++) {
    AppWindowToken wtoken=mService.mAppTokens.get(i);
    if (wtoken.mAppAnimator.freezingScreen) {
      int numInteresting=wtoken.numInterestingWindows;
      if (numInteresting > 0 && wtoken.numDrawnWindows >= numInteresting) {
        if (WindowManagerService.DEBUG_VISIBILITY)         Slog.v(TAG,"allDrawn: " + wtoken + " interesting="+ numInteresting+ " drawn="+ wtoken.numDrawnWindows);
        wtoken.mAppAnimator.showAllWindowsLocked();
        mService.unsetAppFreezingScreenLocked(wtoken,false,true);
        if (WindowManagerService.DEBUG_ORIENTATION)         Slog.i(TAG,"Setting mOrientationChangeComplete=true because wtoken " + wtoken + " numInteresting="+ numInteresting+ " numDrawn="+ wtoken.numDrawnWindows);
      }
    }
 else     if (!wtoken.allDrawn) {
      int numInteresting=wtoken.numInterestingWindows;
      if (numInteresting > 0 && wtoken.numDrawnWindows >= numInteresting) {
        if (WindowManagerService.DEBUG_VISIBILITY)         Slog.v(TAG,"allDrawn: " + wtoken + " interesting="+ numInteresting+ " drawn="+ wtoken.numDrawnWindows);
        wtoken.allDrawn=true;
        mPendingLayoutChanges|=PhoneWindowManager.FINISH_LAYOUT_REDO_ANIM;
        if (WindowManagerService.DEBUG_LAYOUT_REPEATS) {
          mService.debugLayoutRepeats("testTokenMayBeDrawnLocked",mPendingLayoutChanges);
        }
        if (!mService.mOpeningApps.contains(wtoken)) {
          mAnimating|=wtoken.mAppAnimator.showAllWindowsLocked();
        }
      }
    }
  }
}
