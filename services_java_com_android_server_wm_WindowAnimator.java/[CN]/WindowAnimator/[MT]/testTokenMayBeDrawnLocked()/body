{
  final int NT=mAppAnimators.size();
  for (int i=0; i < NT; i++) {
    AppWindowAnimator appAnimator=mAppAnimators.get(i);
    AppWindowToken wtoken=appAnimator.mAppToken;
    final boolean allDrawn=wtoken.allDrawn;
    if (allDrawn != appAnimator.allDrawn) {
      appAnimator.allDrawn=allDrawn;
      if (allDrawn) {
        if (appAnimator.freezingScreen) {
          appAnimator.showAllWindowsLocked();
          mService.unsetAppFreezingScreenLocked(wtoken,false,true);
          if (WindowManagerService.DEBUG_ORIENTATION)           Slog.i(TAG,"Setting mOrientationChangeComplete=true because wtoken " + wtoken + " numInteresting="+ wtoken.numInterestingWindows+ " numDrawn="+ wtoken.numDrawnWindows);
          mPendingLayoutChanges|=WindowManagerPolicy.FINISH_LAYOUT_REDO_WALLPAPER;
        }
 else {
          mPendingLayoutChanges|=PhoneWindowManager.FINISH_LAYOUT_REDO_ANIM;
          if (WindowManagerService.DEBUG_LAYOUT_REPEATS) {
            mService.debugLayoutRepeats("testTokenMayBeDrawnLocked",mPendingLayoutChanges);
          }
          if (!mService.mOpeningApps.contains(wtoken)) {
            mAnimating|=appAnimator.showAllWindowsLocked();
          }
        }
      }
    }
  }
}
