{
  final LayoutToAnimatorParams layoutToAnim=mService.mLayoutToAnim;
synchronized (layoutToAnim) {
    layoutToAnim.mAnimationScheduled=false;
    mWinAnimators=new ArrayList<WindowStateAnimator>(layoutToAnim.mWinAnimators);
    mWallpaperTarget=layoutToAnim.mWallpaperTarget;
    DimAnimator.Parameters dimParams=layoutToAnim.mDimParams;
    if (dimParams == null) {
      mDimParams=dimParams;
    }
 else {
      final WindowStateAnimator newWinAnimator=dimParams.mDimWinAnimator;
      final WindowStateAnimator existingDimWinAnimator=mDimParams == null ? null : mDimParams.mDimWinAnimator;
      if (newWinAnimator.mSurfaceShown && (existingDimWinAnimator == null || !existingDimWinAnimator.mSurfaceShown || existingDimWinAnimator.mAnimLayer < newWinAnimator.mAnimLayer)) {
        mDimParams=dimParams;
      }
    }
  }
}
