{
  if ((mService.mWallpaperTarget == w && mService.mLowerWallpaperTarget == null) || mService.mWallpaperTarget == null) {
    for (    final WindowToken token : mService.mWallpaperTokens) {
      for (      final WindowState wallpaper : token.windows) {
        final WindowStateAnimator winAnimator=wallpaper.mWinAnimator;
        if (!winAnimator.mLastHidden) {
          winAnimator.hide();
          mService.dispatchWallpaperVisibility(wallpaper,false);
          mPendingLayoutChanges|=WindowManagerPolicy.FINISH_LAYOUT_REDO_WALLPAPER;
        }
      }
      token.hidden=true;
    }
  }
}
