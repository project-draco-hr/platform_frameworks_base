{
  StateMachine2 sm2=new StateMachine2("sm2");
  sm2.start();
  if (sm2.isDbg())   Log.d(TAG,"testStateMachine2 E");
synchronized (sm2) {
    sm2.sendMessage(TEST_CMD_1);
    sm2.sendMessage(TEST_CMD_2);
    try {
      sm2.wait();
    }
 catch (    InterruptedException e) {
      Log.e(TAG,"testStateMachine2: exception while waiting " + e.getMessage());
    }
  }
  assertTrue(sm2.getProcessedMessagesSize() == 4);
  ProcessedMessages.Info pmi;
  pmi=sm2.getProcessedMessage(0);
  assertEquals(TEST_CMD_1,pmi.getWhat());
  assertEquals(sm2.mS1,pmi.getState());
  pmi=sm2.getProcessedMessage(1);
  assertEquals(TEST_CMD_2,pmi.getWhat());
  assertEquals(sm2.mS1,pmi.getState());
  pmi=sm2.getProcessedMessage(2);
  assertEquals(TEST_CMD_1,pmi.getWhat());
  assertEquals(sm2.mS2,pmi.getState());
  pmi=sm2.getProcessedMessage(3);
  assertEquals(TEST_CMD_2,pmi.getWhat());
  assertEquals(sm2.mS2,pmi.getState());
  assertTrue(sm2.mDidEnter);
  assertTrue(sm2.mDidExit);
  if (sm2.isDbg())   Log.d(TAG,"testStateMachine2 X");
}
