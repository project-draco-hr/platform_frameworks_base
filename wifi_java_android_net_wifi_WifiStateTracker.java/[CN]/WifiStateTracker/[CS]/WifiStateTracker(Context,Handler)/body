{
  super(context,target,ConnectivityManager.TYPE_WIFI,0,"WIFI","");
  mWifiInfo=new WifiInfo();
  mWifiMonitor=new WifiMonitor(this);
  mHaveIpAddress=false;
  mObtainingIpAddress=false;
  setTornDownByConnMgr(false);
  mDisconnectPending=false;
  mScanResults=new ArrayList<ScanResult>();
  mDhcpInfo=new DhcpInfo();
  mRunState=RUN_STATE_STARTING;
  mAlarmManager=(AlarmManager)mContext.getSystemService(Context.ALARM_SERVICE);
  Intent dhcpRenewalIntent=new Intent(ACTION_DHCP_RENEW,null);
  mDhcpRenewalIntent=PendingIntent.getBroadcast(mContext,DHCP_RENEW,dhcpRenewalIntent,0);
  mContext.registerReceiver(new BroadcastReceiver(){
    @Override public void onReceive(    Context context,    Intent intent){
      if (mDhcpTarget != null) {
        Log.d(TAG,"Sending a DHCP renewal");
        mDhcpRenewWakeLock.acquire(40000);
        mDhcpTarget.sendEmptyMessage(EVENT_DHCP_RENEW);
      }
    }
  }
,new IntentFilter(ACTION_DHCP_RENEW));
  PowerManager powerManager=(PowerManager)mContext.getSystemService(Context.POWER_SERVICE);
  mDhcpRenewWakeLock=powerManager.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,WAKELOCK_TAG);
  NOTIFICATION_REPEAT_DELAY_MS=Settings.Secure.getInt(context.getContentResolver(),Settings.Secure.WIFI_NETWORKS_AVAILABLE_REPEAT_DELAY,900) * 1000l;
  mNotificationEnabledSettingObserver=new NotificationEnabledSettingObserver(new Handler());
  mNotificationEnabledSettingObserver.register();
  mSettingsObserver=new SettingsObserver(new Handler());
  mInterfaceName=SystemProperties.get("wifi.interface","tiwlan0");
  sDnsPropNames=new String[]{"dhcp." + mInterfaceName + ".dns1","dhcp." + mInterfaceName + ".dns2"};
  mBatteryStats=IBatteryStats.Stub.asInterface(ServiceManager.getService("batteryinfo"));
}
