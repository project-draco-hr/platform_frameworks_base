{
  mTarget=target;
  mContext=context;
  mNetworkInfo=new NetworkInfo(ConnectivityManager.TYPE_WIFI,0,"WIFI","");
  mWifiInfo=new WifiInfo();
  mWifiMonitor=new WifiMonitor(this);
  mHaveIpAddress=false;
  mObtainingIpAddress=false;
  setTornDownByConnMgr(false);
  mDisconnectPending=false;
  mScanResults=new ArrayList<ScanResult>();
  mDhcpInfo=new DhcpInfo();
  mRunState=RUN_STATE_STARTING;
  NOTIFICATION_REPEAT_DELAY_MS=Settings.Secure.getInt(context.getContentResolver(),Settings.Secure.WIFI_NETWORKS_AVAILABLE_REPEAT_DELAY,900) * 1000l;
  mNotificationEnabledSettingObserver=new NotificationEnabledSettingObserver(new Handler());
  mNotificationEnabledSettingObserver.register();
  mSettingsObserver=new SettingsObserver(new Handler());
  mInterfaceName=SystemProperties.get("wifi.interface","tiwlan0");
  mDnsPropNames=new String[]{"net." + mInterfaceName + ".dns1","net." + mInterfaceName + ".dns2"};
  mBatteryStats=IBatteryStats.Stub.asInterface(ServiceManager.getService("batteryinfo"));
}
