{
  if (intent.getAction().equals(WifiManager.NETWORK_STATE_CHANGED_ACTION)) {
    mNetworkInfo=(NetworkInfo)intent.getParcelableExtra(WifiManager.EXTRA_NETWORK_INFO);
    mLinkProperties=intent.getParcelableExtra(WifiManager.EXTRA_LINK_PROPERTIES);
    if (mLinkProperties == null) {
      mLinkProperties=new LinkProperties();
    }
    mLinkCapabilities=intent.getParcelableExtra(WifiManager.EXTRA_LINK_CAPABILITIES);
    if (mLinkCapabilities == null) {
      mLinkCapabilities=new LinkCapabilities();
    }
    Message msg=mCsHandler.obtainMessage(EVENT_STATE_CHANGED,mNetworkInfo);
    msg.sendToTarget();
  }
 else   if (intent.getAction().equals(WifiManager.CONFIG_CHANGED_ACTION)) {
    mLinkProperties=(LinkProperties)intent.getParcelableExtra(WifiManager.EXTRA_LINK_PROPERTIES);
    Message msg=mCsHandler.obtainMessage(EVENT_CONFIGURATION_CHANGED,mNetworkInfo);
    msg.sendToTarget();
  }
}
