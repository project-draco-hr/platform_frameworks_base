{
  int event;
switch (msg.what) {
case EVENT_DHCP_START:
    boolean modifiedBluetoothCoexistenceMode=false;
  if (shouldDisableCoexistenceMode()) {
    modifiedBluetoothCoexistenceMode=true;
synchronized (WifiStateTracker.this) {
      WifiNative.setBluetoothCoexistenceModeCommand(WifiNative.BLUETOOTH_COEXISTENCE_MODE_DISABLED);
    }
  }
synchronized (WifiStateTracker.this) {
  WifiNative.setPowerModeCommand(DRIVER_POWER_MODE_ACTIVE);
}
synchronized (this) {
mCancelCallback=false;
}
Log.d(TAG,"DhcpHandler: DHCP request started");
if (NetworkUtils.runDhcp(mInterfaceName,mDhcpInfo)) {
event=EVENT_INTERFACE_CONFIGURATION_SUCCEEDED;
if (LOCAL_LOGD) Log.v(TAG,"DhcpHandler: DHCP request succeeded");
}
 else {
event=EVENT_INTERFACE_CONFIGURATION_FAILED;
Log.i(TAG,"DhcpHandler: DHCP request failed: " + NetworkUtils.getDhcpError());
}
synchronized (WifiStateTracker.this) {
WifiNative.setPowerModeCommand(DRIVER_POWER_MODE_AUTO);
}
if (modifiedBluetoothCoexistenceMode) {
synchronized (WifiStateTracker.this) {
WifiNative.setBluetoothCoexistenceModeCommand(WifiNative.BLUETOOTH_COEXISTENCE_MODE_SENSE);
}
}
synchronized (this) {
if (!mCancelCallback) {
Message.obtain(mTarget,event).sendToTarget();
}
}
break;
}
}
