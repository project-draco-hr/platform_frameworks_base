{
  int event;
switch (msg.what) {
case EVENT_DHCP_START:
    boolean modifiedBluetoothCoexistenceMode=false;
  if (shouldDisableCoexistenceMode()) {
    modifiedBluetoothCoexistenceMode=true;
    setBluetoothCoexistenceMode(WifiNative.BLUETOOTH_COEXISTENCE_MODE_DISABLED);
  }
setPowerMode(DRIVER_POWER_MODE_ACTIVE);
synchronized (this) {
mCancelCallback=false;
}
Log.d(TAG,"DhcpHandler: DHCP request started");
if (NetworkUtils.runDhcp(mInterfaceName,mDhcpInfo)) {
event=EVENT_INTERFACE_CONFIGURATION_SUCCEEDED;
if (LOCAL_LOGD) Log.v(TAG,"DhcpHandler: DHCP request succeeded");
}
 else {
event=EVENT_INTERFACE_CONFIGURATION_FAILED;
Log.i(TAG,"DhcpHandler: DHCP request failed: " + NetworkUtils.getDhcpError());
}
setPowerMode(DRIVER_POWER_MODE_AUTO);
if (modifiedBluetoothCoexistenceMode) {
setBluetoothCoexistenceMode(WifiNative.BLUETOOTH_COEXISTENCE_MODE_SENSE);
}
synchronized (this) {
if (!mCancelCallback) {
mTarget.sendEmptyMessage(event);
}
}
break;
}
}
