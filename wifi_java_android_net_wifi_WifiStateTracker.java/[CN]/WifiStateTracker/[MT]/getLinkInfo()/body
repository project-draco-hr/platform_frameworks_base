{
  if (mNetworkInfo == null) {
    return null;
  }
  WifiLinkInfo li=new WifiLinkInfo();
  li.mNetworkType=mNetworkInfo.getType();
synchronized (mSamplingDataTracker.mSamplingDataLock) {
    mSamplingDataTracker.setCommonLinkInfoFields(li);
    li.mTxGood=mSamplingDataTracker.getSampledTxPacketCount();
    li.mTxBad=mSamplingDataTracker.getSampledTxPacketErrorCount();
  }
  if (mWifiInfo != null) {
    li.mBssid=mWifiInfo.getBSSID();
    int rssi=mWifiInfo.getRssi();
    li.mRssi=rssi;
    li.mNormalizedSignalStrength=mWifiManager.calculateSignalLevel(rssi,LinkInfo.NORMALIZED_SIGNAL_STRENGTH_RANGE);
  }
  return li;
}
