{
  boolean ret=true;
  ;
  if (mRunState != RUN_STATE_STOPPING && mRunState != RUN_STATE_STOPPED) {
    setNotificationVisible(false,0,false,0);
    if (mWifiInfo.getSupplicantState() == SupplicantState.DORMANT) {
      ret=stopDriver();
    }
 else {
      ret=disconnect();
    }
    mRunState=RUN_STATE_STOPPING;
  }
  return ret;
}
