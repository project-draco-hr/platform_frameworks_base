{
  if (LOCAL_LOGD)   Log.d(TAG,"Deconfiguring interface and stopping DHCP");
  if (mDisconnectPending) {
    cancelDisconnect();
  }
  mDisconnectExpected=false;
  resetInterface();
  setDetailedState(newState);
  sendNetworkStateChangeBroadcast(mLastBssid);
  mWifiInfo.setBSSID(null);
  mLastBssid=null;
  mLastSsid=null;
  mDisconnectPending=false;
}
