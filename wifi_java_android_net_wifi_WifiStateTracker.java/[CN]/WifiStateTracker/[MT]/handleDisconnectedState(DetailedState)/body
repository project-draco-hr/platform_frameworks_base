{
  if (mDisconnectPending) {
    cancelDisconnect();
  }
  mDisconnectExpected=false;
  resetConnections(true);
  setDetailedState(newState);
  sendNetworkStateChangeBroadcast(mLastBssid);
  mWifiInfo.setBSSID(null);
  mLastBssid=null;
  mLastSsid=null;
  mDisconnectPending=false;
}
