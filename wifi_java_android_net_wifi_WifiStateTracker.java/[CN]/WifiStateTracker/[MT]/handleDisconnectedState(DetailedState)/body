{
  if (LOCAL_LOGD)   Log.d(TAG,"Deconfiguring interface and stopping DHCP");
  if (mDisconnectPending) {
    cancelDisconnect();
  }
  Intent intent=new Intent(WifiManager.NETWORK_STATE_CHANGED_ACTION);
  intent.putExtra(WifiManager.EXTRA_NETWORK_INFO,mNetworkInfo);
  if (mLastBssid != null)   intent.putExtra(WifiManager.EXTRA_BSSID,mLastBssid);
  mWifiInfo.setBSSID(null);
  mLastBssid=null;
  mLastSsid=null;
  resetInterface();
  mContext.sendStickyBroadcast(intent);
  setDetailedState(newState);
  mDisconnectPending=false;
}
