{
  if (mNetworkInfo == null) {
    return null;
  }
  WifiLinkQualityInfo li=new WifiLinkQualityInfo();
  li.setNetworkType(mNetworkInfo.getType());
synchronized (mSamplingDataTracker.mSamplingDataLock) {
    mSamplingDataTracker.setCommonLinkQualityInfoFields(li);
    li.setTxGood(mSamplingDataTracker.getSampledTxPacketCount());
    li.setTxBad(mSamplingDataTracker.getSampledTxPacketErrorCount());
  }
  if (mWifiInfo != null) {
    li.setBssid(mWifiInfo.getBSSID());
    int rssi=mWifiInfo.getRssi();
    li.setRssi(rssi);
    li.setNormalizedSignalStrength(mWifiManager.calculateSignalLevel(rssi,LinkQualityInfo.NORMALIZED_SIGNAL_STRENGTH_RANGE));
  }
  return li;
}
