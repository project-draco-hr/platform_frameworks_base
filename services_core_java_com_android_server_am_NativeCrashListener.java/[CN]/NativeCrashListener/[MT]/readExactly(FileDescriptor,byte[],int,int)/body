{
  int totalRead=0;
  while (numBytes > 0) {
    int n=Libcore.os.read(fd,buffer,offset + totalRead,numBytes);
    if (n <= 0) {
      if (DEBUG) {
        Slog.w(TAG,"Needed " + numBytes + " but saw "+ n);
      }
      return -1;
    }
    numBytes-=n;
    totalRead+=n;
  }
  return totalRead;
}
