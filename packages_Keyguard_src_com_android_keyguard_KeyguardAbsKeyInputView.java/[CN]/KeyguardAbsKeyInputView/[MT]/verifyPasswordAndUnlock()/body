{
  String entry=getPasswordText();
  if (mLockPatternUtils.checkPassword(entry)) {
    mCallback.reportUnlockAttempt(true);
    mCallback.dismiss(true);
  }
 else {
    if (entry.length() > MINIMUM_PASSWORD_LENGTH_BEFORE_REPORT) {
      mCallback.reportUnlockAttempt(false);
      int attempts=KeyguardUpdateMonitor.getInstance(mContext).getFailedUnlockAttempts();
      if (0 == (attempts % LockPatternUtils.FAILED_ATTEMPTS_BEFORE_TIMEOUT)) {
        long deadline=mLockPatternUtils.setLockoutAttemptDeadline();
        handleAttemptLockout(deadline);
      }
    }
    mSecurityMessageDisplay.setMessage(getWrongPasswordStringId(),true);
  }
  resetPasswordText(true);
}
