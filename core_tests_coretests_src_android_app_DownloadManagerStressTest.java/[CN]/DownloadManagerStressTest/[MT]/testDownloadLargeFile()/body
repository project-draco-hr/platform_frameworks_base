{
  long fileSize=50000000L;
  Log.i(TAG,"creating a file of size: " + fileSize);
  File largeFile=createFileOnSD(null,fileSize,DataType.TEXT,null);
  Log.i(TAG,"DONE creating a file of size: " + fileSize);
  MultipleDownloadsCompletedReceiver receiver=registerNewMultipleDownloadsReceiver();
  try {
    long dlRequest=doStandardEnqueue(largeFile);
    waitForDownloadOrTimeout(dlRequest);
    ParcelFileDescriptor pfd=mDownloadManager.openDownloadedFile(dlRequest);
    verifyFileContents(pfd,largeFile);
    verifyFileSize(pfd,largeFile.length());
    assertEquals(1,receiver.numDownloadsCompleted());
    mContext.unregisterReceiver(receiver);
  }
 catch (  Exception e) {
    throw e;
  }
 finally {
    largeFile.delete();
  }
}
