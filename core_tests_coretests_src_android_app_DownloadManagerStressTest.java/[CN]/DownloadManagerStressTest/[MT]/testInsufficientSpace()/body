{
  long fileSize=300000000L;
  File largeFile=createFileOnSD(null,fileSize,DataType.TEXT,null);
  Cursor cursor=null;
  try {
    long dlRequest=doStandardEnqueue(largeFile);
    waitForDownloadOrTimeout(dlRequest);
    cursor=getCursor(dlRequest);
    verifyInt(cursor,DownloadManager.COLUMN_STATUS,DownloadManager.STATUS_FAILED);
    verifyInt(cursor,DownloadManager.COLUMN_REASON,DownloadManager.ERROR_INSUFFICIENT_SPACE);
  }
  finally {
    if (cursor != null) {
      cursor.close();
    }
    largeFile.delete();
  }
}
