{
  int type=JPEGConsts.JCS_UNKNOW;
  ColorModel cm=image.getColorModel();
  if (null != cm) {
    boolean hasAlpha=cm.hasAlpha();
    ColorSpace cs=cm.getColorSpace();
switch (cs.getType()) {
case ColorSpace.TYPE_GRAY:
      type=JPEGConsts.JCS_GRAYSCALE;
    break;
case ColorSpace.TYPE_RGB:
  type=hasAlpha ? JPEGConsts.JCS_YCbCrA : JPEGConsts.JCS_YCbCr;
break;
case ColorSpace.TYPE_YCbCr:
type=hasAlpha ? JPEGConsts.JCS_YCbCrA : JPEGConsts.JCS_YCbCr;
break;
case ColorSpace.TYPE_3CLR:
type=hasAlpha ? JPEGConsts.JCS_YCCA : JPEGConsts.JCS_YCC;
break;
case ColorSpace.TYPE_CMYK:
type=JPEGConsts.JCS_CMYK;
break;
}
}
return type;
}
