{
  final int outerDepth=parser.getDepth();
  while (XmlUtils.nextElementWithin(parser,outerDepth)) {
    if (parser.getName().equals("input-device")) {
      String descriptor=parser.getAttributeValue(null,"descriptor");
      if (descriptor == null) {
        throw new XmlPullParserException("Missing descriptor attribute on input-device");
      }
      InputDeviceState state=new InputDeviceState();
      state.keyboardLayoutDescriptor=parser.getAttributeValue(null,"keyboard-layout");
      mInputDevices.put(descriptor,state);
    }
  }
}
