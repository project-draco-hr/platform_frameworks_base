{
  if (DEBUG) {
    Slog.d(TAG,"System ready.");
  }
  mSystemReady=true;
  reloadKeyboardLayouts();
  IntentFilter filter=new IntentFilter(Intent.ACTION_PACKAGE_ADDED);
  filter.addAction(Intent.ACTION_PACKAGE_REMOVED);
  filter.addAction(Intent.ACTION_PACKAGE_CHANGED);
  filter.addDataScheme("package");
  mContext.registerReceiver(new BroadcastReceiver(){
    @Override public void onReceive(    Context context,    Intent intent){
      if (DEBUG) {
        Slog.d(TAG,"Packages changed, reloading keyboard layouts.");
      }
      reloadKeyboardLayouts();
    }
  }
,filter,null,mHandler);
}
