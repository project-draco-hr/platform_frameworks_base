{
  if (!checkCallingPermission(android.Manifest.permission.SET_KEYBOARD_LAYOUT,"setKeyboardLayoutForInputDevice()")) {
    throw new SecurityException("Requires SET_KEYBOARD_LAYOUT permission");
  }
  if (inputDeviceDescriptor == null) {
    throw new IllegalArgumentException("inputDeviceDescriptor must not be null");
  }
  final boolean changed;
synchronized (mDataStore) {
    try {
      changed=mDataStore.setKeyboardLayout(inputDeviceDescriptor,keyboardLayoutDescriptor);
    }
  finally {
      mDataStore.saveIfNeeded();
    }
  }
  if (changed) {
    if (DEBUG) {
      Slog.d(TAG,"Keyboard layout changed, reloading keyboard layouts.");
    }
    reloadKeyboardLayouts();
  }
}
