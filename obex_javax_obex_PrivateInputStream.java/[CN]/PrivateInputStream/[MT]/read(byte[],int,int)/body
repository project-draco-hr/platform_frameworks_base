{
  if (b == null) {
    throw new IOException("buffer is null");
  }
  if ((offset | length) < 0 || length > b.length - offset) {
    throw new ArrayIndexOutOfBoundsException("index outof bound");
  }
  ensureOpen();
  int currentDataLength=mData.length - mIndex;
  int remainReadLength=length;
  int offset1=offset;
  int result=0;
  while (currentDataLength <= remainReadLength) {
    System.arraycopy(mData,mIndex,b,offset1,currentDataLength);
    mIndex+=currentDataLength;
    offset1+=currentDataLength;
    result+=currentDataLength;
    remainReadLength-=currentDataLength;
    if (!mParent.continueOperation(true,true)) {
      return result == 0 ? -1 : result;
    }
    currentDataLength=mData.length - mIndex;
  }
  if (remainReadLength > 0) {
    System.arraycopy(mData,mIndex,b,offset1,remainReadLength);
    mIndex+=remainReadLength;
    result+=remainReadLength;
  }
  return result;
}
