{
  Iterator<Map.Entry<String,SyncOperation>> entries=mOpsByKey.entrySet().iterator();
  while (entries.hasNext()) {
    Map.Entry<String,SyncOperation> entry=entries.next();
    SyncOperation syncOperation=entry.getValue();
    if (account != null && !syncOperation.account.equals(account))     continue;
    if (authority != null && !syncOperation.authority.equals(authority))     continue;
    if (DEBUG_CHECK_DATA_CONSISTENCY)     debugCheckDataStructures(true);
    entries.remove();
    if (!mOpsByWhen.remove(syncOperation)) {
      throw new IllegalStateException("unable to find " + syncOperation + " in mOpsByWhen");
    }
    if (!mSyncStorageEngine.deleteFromPending(syncOperation.pendingOperation)) {
      final String errorMessage="unable to find pending row for " + syncOperation;
      Log.e(TAG,errorMessage,new IllegalStateException(errorMessage));
    }
    if (DEBUG_CHECK_DATA_CONSISTENCY)     debugCheckDataStructures(true);
  }
}
