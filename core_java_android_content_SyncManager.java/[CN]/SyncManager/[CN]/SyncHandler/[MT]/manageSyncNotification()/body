{
  boolean shouldCancel;
  boolean shouldInstall;
  if (mActiveSyncContext == null) {
    mSyncNotificationInfo.startTime=null;
    shouldCancel=mSyncNotificationInfo.isActive;
    shouldInstall=false;
  }
 else {
    final SyncOperation syncOperation=mActiveSyncContext.mSyncOperation;
    final long now=SystemClock.elapsedRealtime();
    if (mSyncNotificationInfo.startTime == null) {
      mSyncNotificationInfo.startTime=now;
    }
    shouldCancel=mSyncNotificationInfo.isActive && (!syncOperation.authority.equals(mSyncNotificationInfo.authority) || !syncOperation.account.equals(mSyncNotificationInfo.account));
    if (mSyncNotificationInfo.isActive) {
      shouldInstall=shouldCancel;
    }
 else {
      final boolean timeToShowNotification=now > mSyncNotificationInfo.startTime + SYNC_NOTIFICATION_DELAY;
      final boolean syncIsForced=syncOperation.extras.getBoolean(ContentResolver.SYNC_EXTRAS_FORCE,false);
      shouldInstall=timeToShowNotification || syncIsForced;
    }
  }
  if (shouldCancel && !shouldInstall) {
    mNeedSyncActiveNotification=false;
    sendSyncStateIntent();
    mSyncNotificationInfo.isActive=false;
  }
  if (shouldInstall) {
    SyncOperation syncOperation=mActiveSyncContext.mSyncOperation;
    mNeedSyncActiveNotification=true;
    sendSyncStateIntent();
    mSyncNotificationInfo.isActive=true;
    mSyncNotificationInfo.account=syncOperation.account;
    mSyncNotificationInfo.authority=syncOperation.authority;
  }
}
