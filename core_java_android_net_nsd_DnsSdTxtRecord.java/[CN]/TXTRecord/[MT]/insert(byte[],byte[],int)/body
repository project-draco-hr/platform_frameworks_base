{
  byte[] oldBytes=fBytes;
  int valLen=(value != null) ? value.length : 0;
  int insertion=0;
  int newLen, avLen;
  for (int i=0; i < index && insertion < fBytes.length; i++)   insertion+=(0xFF & (fBytes[insertion] + 1));
  avLen=keyBytes.length + valLen + (value != null ? 1 : 0);
  newLen=avLen + oldBytes.length + 1;
  fBytes=new byte[newLen];
  System.arraycopy(oldBytes,0,fBytes,0,insertion);
  int secondHalfLen=oldBytes.length - insertion;
  System.arraycopy(oldBytes,insertion,fBytes,newLen - secondHalfLen,secondHalfLen);
  fBytes[insertion]=(byte)avLen;
  System.arraycopy(keyBytes,0,fBytes,insertion + 1,keyBytes.length);
  if (value != null) {
    fBytes[insertion + 1 + keyBytes.length]=kAttrSep;
    System.arraycopy(value,0,fBytes,insertion + keyBytes.length + 2,valLen);
  }
}
