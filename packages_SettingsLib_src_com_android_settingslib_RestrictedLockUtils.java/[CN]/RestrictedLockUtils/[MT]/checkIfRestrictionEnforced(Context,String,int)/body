{
  DevicePolicyManager dpm=(DevicePolicyManager)context.getSystemService(Context.DEVICE_POLICY_SERVICE);
  if (dpm == null) {
    return null;
  }
  ComponentName deviceOwner=dpm.getDeviceOwnerComponentOnAnyUser();
  int deviceOwnerUserId=dpm.getDeviceOwnerUserId();
  boolean enforcedByDeviceOwner=false;
  if (deviceOwner != null && deviceOwnerUserId != UserHandle.USER_NULL) {
    Bundle enforcedRestrictions=dpm.getUserRestrictionsForUser(deviceOwner,deviceOwnerUserId);
    if (enforcedRestrictions != null && enforcedRestrictions.getBoolean(userRestriction,false)) {
      enforcedByDeviceOwner=true;
    }
  }
  ComponentName profileOwner=null;
  boolean enforcedByProfileOwner=false;
  if (userId != UserHandle.USER_NULL) {
    profileOwner=dpm.getProfileOwnerAsUser(userId);
    if (profileOwner != null) {
      Bundle enforcedRestrictions=dpm.getUserRestrictionsForUser(profileOwner,userId);
      if (enforcedRestrictions != null && enforcedRestrictions.getBoolean(userRestriction,false)) {
        enforcedByProfileOwner=true;
      }
    }
  }
  if (!enforcedByDeviceOwner && !enforcedByProfileOwner) {
    return null;
  }
  EnforcedAdmin admin=null;
  if (enforcedByDeviceOwner && enforcedByProfileOwner) {
    admin=new EnforcedAdmin();
  }
 else   if (enforcedByDeviceOwner) {
    admin=new EnforcedAdmin(deviceOwner,deviceOwnerUserId);
  }
 else {
    admin=new EnforcedAdmin(profileOwner,userId);
  }
  return admin;
}
