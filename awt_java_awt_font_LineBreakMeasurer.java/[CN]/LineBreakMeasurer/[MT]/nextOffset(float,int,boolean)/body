{
  if (offsetLimit <= position) {
    throw new IllegalArgumentException(Messages.getString("awt.203"));
  }
  if (position == maxpos) {
    return position;
  }
  int breakPos=tm.getLineBreakIndex(position,wrappingWidth);
  int correctedPos=breakPos;
  if (position >= correctedPos) {
    if (requireNextWord) {
      correctedPos=position;
    }
 else {
      correctedPos=Math.max(position + 1,breakPos);
    }
  }
  return Math.min(correctedPos,offsetLimit);
}
