{
synchronized (this) {
    if (status == 0) {
      isAdvertising=!isAdvertising;
      if (!isAdvertising) {
        try {
          mBluetoothGatt.unregisterClient(mLeHandle);
          mLeHandle=-1;
        }
 catch (        RemoteException e) {
          Log.e(TAG,"remote exception when unregistering",e);
        }
      }
      mAdvertiseCallback.onSuccess(null);
    }
 else {
      mAdvertiseCallback.onFailure(status);
    }
    notifyAll();
  }
}
