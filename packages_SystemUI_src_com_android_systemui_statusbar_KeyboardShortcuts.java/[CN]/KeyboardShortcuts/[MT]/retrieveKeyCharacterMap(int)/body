{
  final InputManager inputManager=InputManager.getInstance();
  if (deviceId != -1) {
    final InputDevice inputDevice=inputManager.getInputDevice(deviceId);
    if (inputDevice != null) {
      mKeyCharacterMap=inputDevice.getKeyCharacterMap();
      return;
    }
  }
  final int[] deviceIds=inputManager.getInputDeviceIds();
  for (int i=0; i < deviceIds.length; ++i) {
    final InputDevice inputDevice=inputManager.getInputDevice(deviceIds[i]);
    if (inputDevice.getId() != -1 && inputDevice.isFullKeyboard()) {
      mKeyCharacterMap=inputDevice.getKeyCharacterMap();
      return;
    }
  }
  final InputDevice inputDevice=inputManager.getInputDevice(-1);
  mKeyCharacterMap=inputDevice.getKeyCharacterMap();
}
