{
  InputDevice inputDevice=InputManager.getInstance().getInputDevice(deviceId);
  if (inputDevice != null) {
    mKeyCharacterMap=inputDevice.getKeyCharacterMap();
  }
  if (mKeyboardShortcutsDialog == null) {
    Recents.getSystemServices().requestKeyboardShortcuts(mContext,new KeyboardShortcutsReceiver(){
      @Override public void onKeyboardShortcutsReceived(      final List<KeyboardShortcutGroup> result){
        KeyboardShortcutGroup systemGroup=new KeyboardShortcutGroup(mContext.getString(R.string.keyboard_shortcut_group_system),true);
        systemGroup.addItem(new KeyboardShortcutInfo(mContext.getString(R.string.keyboard_shortcut_group_system_home),KeyEvent.KEYCODE_ENTER,KeyEvent.META_META_ON));
        systemGroup.addItem(new KeyboardShortcutInfo(mContext.getString(R.string.keyboard_shortcut_group_system_back),KeyEvent.KEYCODE_DEL,KeyEvent.META_META_ON));
        systemGroup.addItem(new KeyboardShortcutInfo(mContext.getString(R.string.keyboard_shortcut_group_system_recents),KeyEvent.KEYCODE_TAB,KeyEvent.META_ALT_ON));
        systemGroup.addItem(new KeyboardShortcutInfo(mContext.getString(R.string.keyboard_shortcut_group_system_notifications),KeyEvent.KEYCODE_N,KeyEvent.META_META_ON));
        systemGroup.addItem(new KeyboardShortcutInfo(mContext.getString(R.string.keyboard_shortcut_group_system_shortcuts_helper),KeyEvent.KEYCODE_SLASH,KeyEvent.META_META_ON));
        systemGroup.addItem(new KeyboardShortcutInfo(mContext.getString(R.string.keyboard_shortcut_group_system_switch_input),KeyEvent.KEYCODE_SPACE,KeyEvent.META_META_ON));
        result.add(systemGroup);
        KeyboardShortcutGroup applicationGroup=new KeyboardShortcutGroup(mContext.getString(R.string.keyboard_shortcut_group_applications),true);
        applicationGroup.addItem(new KeyboardShortcutInfo(mContext.getString(R.string.keyboard_shortcut_group_applications_assist),KeyEvent.KEYCODE_UNKNOWN,KeyEvent.META_META_ON));
        applicationGroup.addItem(new KeyboardShortcutInfo(mContext.getString(R.string.keyboard_shortcut_group_applications_browser),KeyEvent.KEYCODE_B,KeyEvent.META_META_ON));
        applicationGroup.addItem(new KeyboardShortcutInfo(mContext.getString(R.string.keyboard_shortcut_group_applications_contacts),KeyEvent.KEYCODE_C,KeyEvent.META_META_ON));
        applicationGroup.addItem(new KeyboardShortcutInfo(mContext.getString(R.string.keyboard_shortcut_group_applications_email),KeyEvent.KEYCODE_E,KeyEvent.META_META_ON));
        applicationGroup.addItem(new KeyboardShortcutInfo(mContext.getString(R.string.keyboard_shortcut_group_applications_im),KeyEvent.KEYCODE_T,KeyEvent.META_META_ON));
        applicationGroup.addItem(new KeyboardShortcutInfo(mContext.getString(R.string.keyboard_shortcut_group_applications_music),KeyEvent.KEYCODE_P,KeyEvent.META_META_ON));
        applicationGroup.addItem(new KeyboardShortcutInfo(mContext.getString(R.string.keyboard_shortcut_group_applications_youtube),KeyEvent.KEYCODE_Y,KeyEvent.META_META_ON));
        applicationGroup.addItem(new KeyboardShortcutInfo(mContext.getString(R.string.keyboard_shortcut_group_applications_calendar),KeyEvent.KEYCODE_L,KeyEvent.META_META_ON));
        result.add(applicationGroup);
        showKeyboardShortcutsDialog(result);
      }
    }
,deviceId);
  }
 else {
    dismissKeyboardShortcutsDialog();
  }
}
