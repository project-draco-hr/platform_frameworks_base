{
  long onTimeMs=mStats.getWifiOnTime(mRawRealtime,mStatsType) / 1000;
  long runningTimeMs=mStats.getGlobalWifiRunningTime(mRawRealtime,mStatsType) / 1000;
  if (DEBUG)   Log.d(TAG,"WIFI runningTime=" + runningTimeMs + " app runningTime="+ mAppWifiRunning);
  runningTimeMs-=mAppWifiRunning;
  if (runningTimeMs < 0)   runningTimeMs=0;
  double wifiPower=(onTimeMs * 0 * mPowerProfile.getAveragePower(PowerProfile.POWER_WIFI_ON) + runningTimeMs * mPowerProfile.getAveragePower(PowerProfile.POWER_WIFI_ON)) / (60 * 60 * 1000);
  if (DEBUG && wifiPower != 0) {
    Log.d(TAG,"Wifi: time=" + runningTimeMs + " power="+ makemAh(wifiPower));
  }
  if ((wifiPower + mWifiPower) != 0) {
    BatterySipper bs=addEntry(BatterySipper.DrainType.WIFI,runningTimeMs,wifiPower + mWifiPower);
    aggregateSippers(bs,mWifiSippers,"WIFI");
  }
}
