{
  double power=0;
  long screenOnTimeMs=mStats.getScreenOnTime(mRawRealtimeUs,mStatsType) / 1000;
  power+=screenOnTimeMs * mPowerProfile.getAveragePower(PowerProfile.POWER_SCREEN_ON);
  final double screenFullPower=mPowerProfile.getAveragePower(PowerProfile.POWER_SCREEN_FULL);
  for (int i=0; i < BatteryStats.NUM_SCREEN_BRIGHTNESS_BINS; i++) {
    double screenBinPower=screenFullPower * (i + 0.5f) / BatteryStats.NUM_SCREEN_BRIGHTNESS_BINS;
    long brightnessTime=mStats.getScreenBrightnessTime(i,mRawRealtimeUs,mStatsType) / 1000;
    double p=screenBinPower * brightnessTime;
    if (DEBUG && p != 0) {
      Log.d(TAG,"Screen bin #" + i + ": time="+ brightnessTime+ " power="+ makemAh(p / (60 * 60 * 1000)));
    }
    power+=p;
  }
  power/=(60 * 60 * 1000);
  if (power != 0) {
    addEntry(BatterySipper.DrainType.SCREEN,screenOnTimeMs,power);
  }
}
