{
  validateNotAppThread();
  long downTime=event.getDownTime();
  long eventTime=event.getEventTime();
  int action=event.getAction();
  int code=event.getKeyCode();
  int repeatCount=event.getRepeatCount();
  int metaState=event.getMetaState();
  int deviceId=event.getDeviceId();
  int scancode=event.getScanCode();
  int source=event.getSource();
  int flags=event.getFlags();
  if (source == InputDevice.SOURCE_UNKNOWN) {
    source=InputDevice.SOURCE_KEYBOARD;
  }
  if (eventTime == 0) {
    eventTime=SystemClock.uptimeMillis();
  }
  if (downTime == 0) {
    downTime=eventTime;
  }
  KeyEvent newEvent=new KeyEvent(downTime,eventTime,action,code,repeatCount,metaState,deviceId,scancode,flags | KeyEvent.FLAG_FROM_SYSTEM,source);
  InputManager.injectInputEvent(newEvent,InputManager.INJECT_INPUT_EVENT_MODE_WAIT_FOR_FINISH);
}
