{
  adapter.getProfileProxy(mContext,mServiceListener,profile);
  long s=System.currentTimeMillis();
switch (profile) {
case BluetoothProfile.A2DP:
    while (mA2dp == null && System.currentTimeMillis() - s < CONNECT_PROXY_TIMEOUT) {
      sleep(POLL_TIME);
    }
  return mA2dp;
case BluetoothProfile.HEADSET:
while (mHeadset == null && System.currentTimeMillis() - s < CONNECT_PROXY_TIMEOUT) {
  sleep(POLL_TIME);
}
return mHeadset;
case BluetoothProfile.INPUT_DEVICE:
while (mInput == null && System.currentTimeMillis() - s < CONNECT_PROXY_TIMEOUT) {
sleep(POLL_TIME);
}
return mInput;
case BluetoothProfile.PAN:
while (mPan == null && System.currentTimeMillis() - s < CONNECT_PROXY_TIMEOUT) {
sleep(POLL_TIME);
}
return mPan;
default :
return null;
}
}
