{
  adapter.getProfileProxy(mContext,mServiceListener,profile);
  long s=System.currentTimeMillis();
switch (profile) {
case BluetoothProfile.A2DP:
    while (mA2dp != null && System.currentTimeMillis() - s < CONNECT_PROXY_TIMEOUT) {
      sleep(POLL_TIME);
    }
  return mA2dp;
case BluetoothProfile.HEADSET:
while (mHeadset != null && System.currentTimeMillis() - s < CONNECT_PROXY_TIMEOUT) {
  sleep(POLL_TIME);
}
return mHeadset;
default :
return null;
}
}
