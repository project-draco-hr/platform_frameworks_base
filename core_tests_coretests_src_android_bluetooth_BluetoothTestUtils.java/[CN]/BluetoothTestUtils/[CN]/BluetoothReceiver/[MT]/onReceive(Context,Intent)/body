{
synchronized (this) {
    if (BluetoothAdapter.ACTION_DISCOVERY_STARTED.equals(intent.getAction())) {
      mFiredFlags|=DISCOVERY_STARTED_FLAG;
    }
 else     if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(intent.getAction())) {
      mFiredFlags|=DISCOVERY_FINISHED_FLAG;
    }
 else     if (BluetoothAdapter.ACTION_SCAN_MODE_CHANGED.equals(intent.getAction())) {
      int mode=intent.getIntExtra(BluetoothAdapter.EXTRA_SCAN_MODE,BluetoothAdapter.ERROR);
      assertNotSame(mode,BluetoothAdapter.ERROR);
switch (mode) {
case BluetoothAdapter.SCAN_MODE_NONE:
        mFiredFlags|=SCAN_MODE_NONE_FLAG;
      break;
case BluetoothAdapter.SCAN_MODE_CONNECTABLE:
    mFiredFlags|=SCAN_MODE_CONNECTABLE_FLAG;
  break;
case BluetoothAdapter.SCAN_MODE_CONNECTABLE_DISCOVERABLE:
mFiredFlags|=SCAN_MODE_CONNECTABLE_DISCOVERABLE_FLAG;
break;
}
}
 else if (BluetoothAdapter.ACTION_STATE_CHANGED.equals(intent.getAction())) {
int state=intent.getIntExtra(BluetoothAdapter.EXTRA_STATE,BluetoothAdapter.ERROR);
assertNotSame(state,BluetoothAdapter.ERROR);
switch (state) {
case BluetoothAdapter.STATE_OFF:
mFiredFlags|=STATE_OFF_FLAG;
break;
case BluetoothAdapter.STATE_TURNING_ON:
mFiredFlags|=STATE_TURNING_ON_FLAG;
break;
case BluetoothAdapter.STATE_ON:
mFiredFlags|=STATE_ON_FLAG;
break;
case BluetoothAdapter.STATE_TURNING_OFF:
mFiredFlags|=STATE_TURNING_OFF_FLAG;
break;
}
}
}
}
