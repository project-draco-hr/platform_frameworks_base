{
  if (mConnectionAction != null && mConnectionAction.equals(intent.getAction())) {
    if (!mDevice.equals(intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE))) {
      return;
    }
    int state=intent.getIntExtra(BluetoothProfile.EXTRA_STATE,-1);
    assertNotSame(-1,state);
switch (state) {
case BluetoothProfile.STATE_DISCONNECTED:
      setFiredFlag(STATE_DISCONNECTED_FLAG);
    break;
case BluetoothProfile.STATE_CONNECTING:
  setFiredFlag(STATE_CONNECTING_FLAG);
break;
case BluetoothProfile.STATE_CONNECTED:
setFiredFlag(STATE_CONNECTED_FLAG);
break;
case BluetoothProfile.STATE_DISCONNECTING:
setFiredFlag(STATE_DISCONNECTING_FLAG);
break;
}
}
}
