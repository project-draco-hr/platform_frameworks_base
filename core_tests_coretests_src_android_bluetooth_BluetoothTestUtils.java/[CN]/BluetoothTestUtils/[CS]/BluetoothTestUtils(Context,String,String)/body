{
  mContext=context;
  mTag=tag;
  mOutputFile=outputFile;
  if (mOutputFile == null) {
    mOutputWriter=null;
  }
 else {
    try {
      mOutputWriter=new BufferedWriter(new FileWriter(new File(Environment.getExternalStorageDirectory(),mOutputFile),true));
    }
 catch (    IOException e) {
      Log.w(mTag,"Test output file could not be opened",e);
      mOutputWriter=null;
    }
  }
  IntentFilter filter=new IntentFilter();
  filter.addAction(BluetoothAdapter.ACTION_DISCOVERY_FINISHED);
  filter.addAction(BluetoothAdapter.ACTION_DISCOVERY_STARTED);
  filter.addAction(BluetoothAdapter.ACTION_SCAN_MODE_CHANGED);
  filter.addAction(BluetoothAdapter.ACTION_STATE_CHANGED);
  mContext.registerReceiver(mReceiver,filter);
}
