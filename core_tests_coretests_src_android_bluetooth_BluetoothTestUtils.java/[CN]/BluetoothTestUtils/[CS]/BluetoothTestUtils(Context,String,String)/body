{
  mContext=context;
  mTag=tag;
  mOutputFile=outputFile;
  if (mOutputFile == null) {
    mOutputWriter=null;
  }
 else {
    try {
      mOutputWriter=new BufferedWriter(new FileWriter(new File(Environment.getExternalStorageDirectory(),mOutputFile),true));
    }
 catch (    IOException e) {
      Log.w(mTag,"Test output file could not be opened",e);
      mOutputWriter=null;
    }
  }
  mA2dp=new BluetoothA2dp(mContext);
  mHeadset=new BluetoothHeadset(mContext,mHeadsetServiceListener);
  mBluetoothReceiver=getBluetoothReceiver(mContext);
  mReceivers.add(mBluetoothReceiver);
}
