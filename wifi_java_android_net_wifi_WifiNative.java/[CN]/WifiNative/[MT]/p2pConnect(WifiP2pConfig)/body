{
  if (config == null)   return null;
  List<String> args=new ArrayList<String>();
  WpsConfiguration wpsConfig=config.wpsConfig;
  args.add(config.deviceAddress);
switch (wpsConfig.setup) {
case PBC:
    args.add("pbc");
  break;
case DISPLAY:
args.add("pin");
args.add("display");
break;
case KEYPAD:
args.add(wpsConfig.pin);
args.add("keypad");
break;
case LABEL:
args.add(wpsConfig.pin);
args.add("label");
default :
break;
}
if (config.isPersistent) args.add("persistent");
if (config.joinExistingGroup) args.add("join");
args.add("go_intent=" + config.groupOwnerIntent);
if (config.channel > 0) args.add("freq=" + config.channel);
String command="p2p_connect ";
for (String s : args) command+=s + " ";
return doStringTempCommand(command);
}
