{
  if (config == null)   return null;
  List<String> args=new ArrayList<String>();
  WpsInfo wps=config.wps;
  args.add(config.deviceAddress);
switch (wps.setup) {
case WpsInfo.PBC:
    args.add("pbc");
  break;
case WpsInfo.DISPLAY:
if (TextUtils.isEmpty(wps.pin)) {
  args.add("pin");
}
 else {
  args.add(wps.pin);
}
args.add("display");
break;
case WpsInfo.KEYPAD:
args.add(wps.pin);
args.add("keypad");
break;
case WpsInfo.LABEL:
args.add(wps.pin);
args.add("label");
default :
break;
}
if (joinExistingGroup) {
args.add("join");
}
 else {
int groupOwnerIntent=config.groupOwnerIntent;
if (groupOwnerIntent < 0 || groupOwnerIntent > 15) {
groupOwnerIntent=DEFAULT_GROUP_OWNER_INTENT;
}
args.add("go_intent=" + groupOwnerIntent);
}
String command="P2P_CONNECT ";
for (String s : args) command+=s + " ";
return doStringCommand(command);
}
