{
  if (config == null)   return null;
  List<String> args=new ArrayList<String>();
  WpsConfiguration wpsConfig=config.wpsConfig;
  args.add(config.deviceAddress);
switch (wpsConfig.setup) {
case PBC:
    args.add("pbc");
  break;
case DISPLAY:
args.add("pin");
args.add("display");
break;
case KEYPAD:
args.add(wpsConfig.pin);
args.add("keypad");
break;
case LABEL:
args.add(wpsConfig.pin);
args.add("label");
default :
break;
}
if (config.persist != WifiP2pConfig.Persist.NO) args.add("persistent");
if (joinExistingGroup) args.add("join");
int groupOwnerIntent=config.groupOwnerIntent;
if (groupOwnerIntent < 0 || groupOwnerIntent > 15) {
groupOwnerIntent=3;
}
args.add("go_intent=" + groupOwnerIntent);
String command="P2P_CONNECT ";
for (String s : args) command+=s + " ";
return doStringCommand(command);
}
