{
  int newHeightSpec=MeasureSpec.makeMeasureSpec(mMaxNotificationHeight,MeasureSpec.AT_MOST);
  int maxChildHeight=0;
  int childCount=getChildCount();
  for (int i=0; i < childCount; i++) {
    View child=getChildAt(i);
    if (child != mBackgroundDimmed && child != mBackgroundNormal) {
      child.measure(widthMeasureSpec,newHeightSpec);
      int childHeight=child.getMeasuredHeight();
      maxChildHeight=Math.max(maxChildHeight,childHeight);
    }
  }
  newHeightSpec=MeasureSpec.makeMeasureSpec(maxChildHeight,MeasureSpec.EXACTLY);
  mBackgroundDimmed.measure(widthMeasureSpec,newHeightSpec);
  mBackgroundNormal.measure(widthMeasureSpec,newHeightSpec);
  int width=MeasureSpec.getSize(widthMeasureSpec);
  setMeasuredDimension(width,maxChildHeight);
}
