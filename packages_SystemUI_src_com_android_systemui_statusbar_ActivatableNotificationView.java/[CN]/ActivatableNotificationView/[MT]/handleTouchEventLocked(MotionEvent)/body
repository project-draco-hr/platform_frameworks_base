{
  int action=event.getActionMasked();
switch (action) {
case MotionEvent.ACTION_DOWN:
    mDownX=event.getX();
  mDownY=event.getY();
if (mDownY > getActualHeight()) {
  return false;
}
if (mOnActivatedListener != null) {
mOnActivatedListener.onActivated(this);
}
break;
case MotionEvent.ACTION_MOVE:
if (!isWithinTouchSlop(event)) {
makeInactive();
return false;
}
break;
case MotionEvent.ACTION_UP:
if (isWithinTouchSlop(event)) {
if (!mActivated) {
makeActive(event.getX(),event.getY());
postDelayed(mTapTimeoutRunnable,DOUBLETAP_TIMEOUT_MS);
}
 else {
performClick();
makeInactive();
}
}
 else {
makeInactive();
}
break;
case MotionEvent.ACTION_CANCEL:
makeInactive();
break;
default :
break;
}
return true;
}
