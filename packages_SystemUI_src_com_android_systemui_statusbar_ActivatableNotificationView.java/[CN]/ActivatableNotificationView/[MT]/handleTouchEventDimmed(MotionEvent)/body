{
  int action=event.getActionMasked();
switch (action) {
case MotionEvent.ACTION_DOWN:
    mDownX=event.getX();
  mDownY=event.getY();
if (mDownY > getActualHeight()) {
  return false;
}
break;
case MotionEvent.ACTION_MOVE:
if (!isWithinTouchSlop(event)) {
makeInactive();
return false;
}
break;
case MotionEvent.ACTION_UP:
if (isWithinTouchSlop(event)) {
if (!mActivated) {
makeActive();
postDelayed(mTapTimeoutRunnable,DOUBLETAP_TIMEOUT_MS);
}
 else {
performClick();
}
}
 else {
makeInactive();
}
break;
case MotionEvent.ACTION_CANCEL:
makeInactive();
break;
default :
break;
}
return true;
}
