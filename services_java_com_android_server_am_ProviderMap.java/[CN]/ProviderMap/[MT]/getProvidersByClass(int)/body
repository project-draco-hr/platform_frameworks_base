{
  final int userId=optionalUserId >= 0 ? optionalUserId : Binder.getOrigCallingUser();
  final HashMap<ComponentName,ContentProviderRecord> map=mProvidersByClassPerUser.get(userId);
  if (map == null) {
    HashMap<ComponentName,ContentProviderRecord> newMap=new HashMap<ComponentName,ContentProviderRecord>();
    mProvidersByClassPerUser.put(userId,newMap);
    return newMap;
  }
 else {
    return map;
  }
}
