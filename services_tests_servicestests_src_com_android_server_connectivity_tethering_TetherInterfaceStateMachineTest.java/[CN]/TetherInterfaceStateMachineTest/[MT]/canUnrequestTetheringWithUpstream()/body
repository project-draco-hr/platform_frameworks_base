{
  initTetheredStateMachine(ConnectivityManager.TETHERING_BLUETOOTH,UPSTREAM_IFACE);
  dispatchCommand(TetherInterfaceStateMachine.CMD_TETHER_UNREQUESTED);
  InOrder inOrder=inOrder(mNMService,mStatsService,mTetherHelper);
  inOrder.verify(mTetherHelper).notifyInterfaceTetheringReadiness(false,mTestedSm);
  inOrder.verify(mStatsService).forceUpdate();
  inOrder.verify(mNMService).stopInterfaceForwarding(IFACE_NAME,UPSTREAM_IFACE);
  inOrder.verify(mNMService).disableNat(IFACE_NAME,UPSTREAM_IFACE);
  inOrder.verify(mNMService).untetherInterface(IFACE_NAME);
  inOrder.verify(mTetherHelper).sendTetherStateChangedBroadcast();
  verifyNoMoreInteractions(mNMService,mStatsService,mTetherHelper);
  assertTrue("Should be ready for tethering again",mTestedSm.isAvailable());
  assertFalse("Should not be tethered",mTestedSm.isTethered());
  assertFalse("Should have no errors",mTestedSm.isErrored());
}
