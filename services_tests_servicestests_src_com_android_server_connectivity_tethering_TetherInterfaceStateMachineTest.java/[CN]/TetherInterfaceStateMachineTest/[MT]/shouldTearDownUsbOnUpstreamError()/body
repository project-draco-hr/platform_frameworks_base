{
  initTetheredStateMachine(ConnectivityManager.TETHERING_USB,null);
  doThrow(RemoteException.class).when(mNMService).enableNat(anyString(),anyString());
  dispatchTetherConnectionChanged(UPSTREAM_IFACE);
  InOrder usbTeardownOrder=inOrder(mNMService,mInterfaceConfiguration,mTetherHelper);
  usbTeardownOrder.verify(mInterfaceConfiguration).setInterfaceDown();
  usbTeardownOrder.verify(mNMService).setInterfaceConfig(IFACE_NAME,mInterfaceConfiguration);
  usbTeardownOrder.verify(mTetherHelper).notifyInterfaceStateChange(IFACE_NAME,mTestedSm,STATE_AVAILABLE,TETHER_ERROR_ENABLE_NAT_ERROR);
}
