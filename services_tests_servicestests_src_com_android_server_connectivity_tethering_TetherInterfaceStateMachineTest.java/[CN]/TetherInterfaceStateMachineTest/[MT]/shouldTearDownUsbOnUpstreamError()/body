{
  initTetheredStateMachine(true,null);
  doThrow(RemoteException.class).when(mNMService).enableNat(anyString(),anyString());
  dispatchTetherConnectionChanged(UPSTREAM_IFACE);
  InOrder usbTeardownOrder=inOrder(mNMService,mInterfaceConfiguration);
  usbTeardownOrder.verify(mInterfaceConfiguration).setInterfaceDown();
  usbTeardownOrder.verify(mNMService).setInterfaceConfig(IFACE_NAME,mInterfaceConfiguration);
  verify(mTetherHelper).notifyInterfaceTetheringReadiness(false,mTestedSm);
}
