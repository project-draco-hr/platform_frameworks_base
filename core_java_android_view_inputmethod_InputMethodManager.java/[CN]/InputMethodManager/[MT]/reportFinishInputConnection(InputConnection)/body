{
  final InputConnection currentConnection;
  if (mServedInputConnectionWrapper == null) {
    currentConnection=null;
  }
 else {
    currentConnection=mServedInputConnectionWrapper.getInputConnection();
  }
  if (currentConnection != ic) {
    ic.finishComposingText();
    if (ic instanceof BaseInputConnection) {
      ((BaseInputConnection)ic).reportFinish();
    }
  }
}
