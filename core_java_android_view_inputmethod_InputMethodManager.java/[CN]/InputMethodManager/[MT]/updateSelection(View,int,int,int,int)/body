{
  checkFocus();
synchronized (mH) {
    if ((mServedView != view && (mServedView == null || !mServedView.checkInputConnectionProxy(view))) || mCurrentTextBoxAttribute == null || mCurMethod == null) {
      return;
    }
    if (mCursorSelStart != selStart || mCursorSelEnd != selEnd || mCursorCandStart != candidatesStart || mCursorCandEnd != candidatesEnd) {
      if (DEBUG)       Log.d(TAG,"updateSelection");
      try {
        if (DEBUG)         Log.v(TAG,"SELECTION CHANGE: " + mCurMethod);
        final int oldSelStart=mCursorSelStart;
        final int oldSelEnd=mCursorSelEnd;
        mCursorSelStart=selStart;
        mCursorSelEnd=selEnd;
        mCursorCandStart=candidatesStart;
        mCursorCandEnd=candidatesEnd;
        mCurMethod.updateSelection(oldSelStart,oldSelEnd,selStart,selEnd,candidatesStart,candidatesEnd);
      }
 catch (      RemoteException e) {
        Log.w(TAG,"IME died: " + mCurId,e);
      }
    }
  }
}
