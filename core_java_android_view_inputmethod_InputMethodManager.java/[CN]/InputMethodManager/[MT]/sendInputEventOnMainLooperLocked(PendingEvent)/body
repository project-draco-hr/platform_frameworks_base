{
  if (mCurChannel != null) {
    if (mCurSender == null) {
      mCurSender=new ImeInputEventSender(mCurChannel,mH.getLooper());
    }
    final InputEvent event=p.mEvent;
    final int seq=event.getSequenceNumber();
    if (mCurSender.sendInputEvent(seq,event)) {
      mPendingEvents.put(seq,p);
      Trace.traceCounter(Trace.TRACE_TAG_INPUT,PENDING_EVENT_COUNTER,mPendingEvents.size());
      Message msg=mH.obtainMessage(MSG_TIMEOUT_INPUT_EVENT,p);
      msg.setAsynchronous(true);
      mH.sendMessageDelayed(msg,INPUT_METHOD_NOT_RESPONDING_TIMEOUT);
      return DISPATCH_IN_PROGRESS;
    }
    Log.w(TAG,"Unable to send input event to IME: " + mCurId + " dropping: "+ event);
  }
  return DISPATCH_NOT_HANDLED;
}
