{
  boolean handled=false;
synchronized (mH) {
    if (DEBUG)     Log.d(TAG,"dispatchKeyEvent");
    if (mCurMethod != null) {
      if (key.getAction() == KeyEvent.ACTION_DOWN && key.getKeyCode() == KeyEvent.KEYCODE_SYM) {
        showInputMethodPickerLocked();
        handled=true;
      }
 else {
        try {
          if (DEBUG)           Log.v(TAG,"DISPATCH KEY: " + mCurMethod);
          final long startTime=SystemClock.uptimeMillis();
          enqueuePendingEventLocked(startTime,seq,mCurId,callback);
          mCurMethod.dispatchKeyEvent(seq,key,mInputMethodCallback);
          return;
        }
 catch (        RemoteException e) {
          Log.w(TAG,"IME died: " + mCurId + " dropping: "+ key,e);
        }
      }
    }
  }
  callback.finishedEvent(seq,handled);
}
