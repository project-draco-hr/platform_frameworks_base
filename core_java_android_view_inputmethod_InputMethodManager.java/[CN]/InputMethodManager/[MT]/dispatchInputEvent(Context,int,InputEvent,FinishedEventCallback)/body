{
synchronized (mH) {
    if (DEBUG)     Log.d(TAG,"dispatchInputEvent");
    if (mCurMethod != null) {
      if (event instanceof KeyEvent) {
        KeyEvent keyEvent=(KeyEvent)event;
        if (keyEvent.getAction() == KeyEvent.ACTION_DOWN && keyEvent.getKeyCode() == KeyEvent.KEYCODE_SYM && keyEvent.getRepeatCount() == 0) {
          showInputMethodPickerLocked();
          return ViewRootImpl.EVENT_HANDLED;
        }
      }
      if (DEBUG)       Log.v(TAG,"DISPATCH INPUT EVENT: " + mCurMethod);
      final long startTime=SystemClock.uptimeMillis();
      if (mCurChannel != null) {
        if (mCurSender == null) {
          mCurSender=new ImeInputEventSender(mCurChannel,mH.getLooper());
        }
        if (mCurSender.sendInputEvent(seq,event)) {
          enqueuePendingEventLocked(startTime,seq,mCurId,callback);
          return ViewRootImpl.EVENT_PENDING_IME;
        }
 else {
          Log.w(TAG,"Unable to send input event to IME: " + mCurId + " dropping: "+ event);
        }
      }
    }
  }
  return ViewRootImpl.EVENT_POST_IME;
}
