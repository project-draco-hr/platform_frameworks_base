{
  int vwidth=getWidth() - mPaddingLeft - mPaddingRight;
  int vheight=getHeight() - mPaddingTop - mPaddingBottom;
  int dwidth;
  int dheight;
  if (mBitmap != null) {
    dwidth=mBitmap.getWidth();
    dheight=mBitmap.getHeight();
  }
 else   if (mDrawable != null) {
    dwidth=mDrawable.getIntrinsicWidth();
    dheight=mDrawable.getIntrinsicHeight();
    mDrawable.setBounds(0,0,dwidth,dheight);
    vwidth-=2 * (mFrameWidth - 1);
    vheight-=2 * (mFrameWidth - 1);
  }
 else {
    return;
  }
  float scale;
  float dx;
  float dy;
  scale=Math.min((float)vwidth / (float)dwidth,(float)vheight / (float)dheight);
  dx=(int)((vwidth - dwidth * scale) * 0.5f + 0.5f);
  dy=(int)((vheight - dheight * scale) * 0.5f + 0.5f);
  mDrawMatrix.setScale(scale,scale);
  mDrawMatrix.postTranslate(dx,dy);
  mScale=scale;
}
