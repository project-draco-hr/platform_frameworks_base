{
  if (fromRGBTransform == null) {
    ICC_Profile sRGBProfile=((ICC_ColorSpace)ColorSpace.getInstance(CS_sRGB)).getProfile();
    ICC_Profile[] profiles={sRGBProfile,getProfile()};
    fromRGBTransform=new ICC_Transform(profiles);
    if (!scalingDataLoaded) {
      scaler.loadScalingData(this);
      scalingDataLoaded=true;
    }
  }
  short[] scaledRGBValue=new short[3];
  scaledRGBValue[0]=(short)(rgbvalue[0] * MAX_SHORT + 0.5f);
  scaledRGBValue[1]=(short)(rgbvalue[1] * MAX_SHORT + 0.5f);
  scaledRGBValue[2]=(short)(rgbvalue[2] * MAX_SHORT + 0.5f);
  short[] converted=converter.translateColor(fromRGBTransform,scaledRGBValue,null);
  float[] res=new float[getNumComponents()];
  scaler.unscale(res,converted,0);
  return res;
}
