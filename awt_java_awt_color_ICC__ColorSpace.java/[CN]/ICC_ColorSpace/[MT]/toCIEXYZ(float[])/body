{
  if (toXYZTransform == null) {
    ICC_Profile xyzProfile=((ICC_ColorSpace)ColorSpace.getInstance(CS_CIEXYZ)).getProfile();
    ICC_Profile[] profiles={getProfile(),xyzProfile};
    try {
      int[] intents={ICC_Profile.icRelativeColorimetric,ICC_Profile.icPerceptual};
      toXYZTransform=new ICC_Transform(profiles,intents);
    }
 catch (    CMMException e) {
      toXYZTransform=new ICC_Transform(profiles);
    }
    if (!scalingDataLoaded) {
      scaler.loadScalingData(this);
      scalingDataLoaded=true;
    }
  }
  short[] data=new short[getNumComponents()];
  scaler.scale(colorvalue,data,0);
  short[] converted=converter.translateColor(toXYZTransform,data,null);
  float[] res=new float[3];
  res[0]=((converted[0] & 0xFFFF)) * SHORT2XYZ_FACTOR;
  res[1]=((converted[1] & 0xFFFF)) * SHORT2XYZ_FACTOR;
  res[2]=((converted[2] & 0xFFFF)) * SHORT2XYZ_FACTOR;
  return res;
}
