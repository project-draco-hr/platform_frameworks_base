{
  if (fromXYZTransform == null) {
    ICC_Profile xyzProfile=((ICC_ColorSpace)ColorSpace.getInstance(CS_CIEXYZ)).getProfile();
    ICC_Profile[] profiles={xyzProfile,getProfile()};
    try {
      int[] intents={ICC_Profile.icPerceptual,ICC_Profile.icRelativeColorimetric};
      fromXYZTransform=new ICC_Transform(profiles,intents);
    }
 catch (    CMMException e) {
      fromXYZTransform=new ICC_Transform(profiles);
    }
    if (!scalingDataLoaded) {
      scaler.loadScalingData(this);
      scalingDataLoaded=true;
    }
  }
  short[] scaledXYZValue=new short[3];
  scaledXYZValue[0]=(short)(xyzvalue[0] * XYZ2SHORT_FACTOR + 0.5f);
  scaledXYZValue[1]=(short)(xyzvalue[1] * XYZ2SHORT_FACTOR + 0.5f);
  scaledXYZValue[2]=(short)(xyzvalue[2] * XYZ2SHORT_FACTOR + 0.5f);
  short[] converted=converter.translateColor(fromXYZTransform,scaledXYZValue,null);
  float[] res=new float[getNumComponents()];
  scaler.unscale(res,converted,0);
  return res;
}
