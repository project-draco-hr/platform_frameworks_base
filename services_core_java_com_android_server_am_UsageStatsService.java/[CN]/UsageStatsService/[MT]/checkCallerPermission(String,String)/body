{
  int mode=mAppOps.noteOpNoThrow(AppOpsManager.OP_GET_USAGE_STATS,Binder.getCallingUid(),callingPkg);
  if (mode == AppOpsManager.MODE_ALLOWED) {
    return;
  }
 else   if (mode != AppOpsManager.MODE_IGNORED) {
    if (mContext.checkCallingOrSelfPermission(android.Manifest.permission.PACKAGE_USAGE_STATS) == PackageManager.PERMISSION_GRANTED) {
      return;
    }
  }
  String msg="Package " + callingPkg + " not allowed to call "+ callingOp;
  throw new SecurityException(msg);
}
