{
  List<String> fileList=getUsageStatsFileListFLOCK();
  if (fileList == null) {
    return;
  }
  Collections.sort(fileList);
  for (  String file : fileList) {
    if (deleteAfterPrint && file.equalsIgnoreCase(mFileLeaf)) {
      continue;
    }
    File dFile=new File(mDir,file);
    String dateStr=file.substring(FILE_PREFIX.length());
    if (dateStr.length() > 0 && (dateStr.charAt(0) <= '0' || dateStr.charAt(0) >= '9')) {
      continue;
    }
    try {
      Parcel in=getParcelForFile(dFile);
      collectDumpInfoFromParcelFLOCK(in,pw,dateStr,isCompactOutput,packages);
      if (deleteAfterPrint) {
        dFile.delete();
      }
    }
 catch (    IOException e) {
      Slog.w(TAG,"Failed with " + e + " when collecting dump info from file : "+ file);
    }
  }
}
