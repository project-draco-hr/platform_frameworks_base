{
  if (localLOGV)   Slog.v(TAG,"UsageStatsService: " + dir);
  mDir=new File(dir);
  mDir.mkdir();
  File parentDir=mDir.getParentFile();
  String files[]=parentDir.list();
  if (files != null) {
    String prefix=mDir.getName() + ".";
    for (    String file : files) {
      if (file.startsWith(prefix)) {
        Slog.i(TAG,"Deleting old usage file: " + file);
        (new File(parentDir,file)).delete();
      }
    }
  }
  mFileLeaf=getCurrentDateStr(FILE_PREFIX);
  mFile=new File(mDir,mFileLeaf);
  mHistoryFile=new AtomicFile(new File(mDir,FILE_HISTORY));
  readStatsFromFile();
  readHistoryStatsFromFile();
  mLastWriteElapsedTime.set(SystemClock.elapsedRealtime());
  mLastWriteDay.set(mCal.get(Calendar.DAY_OF_YEAR));
}
