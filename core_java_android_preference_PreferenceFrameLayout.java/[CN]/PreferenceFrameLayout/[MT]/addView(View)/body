{
  int borderTop=getPaddingTop();
  int borderBottom=getPaddingBottom();
  int borderLeft=getPaddingLeft();
  int borderRight=getPaddingRight();
  LayoutParams layoutParams=(PreferenceFrameLayout.LayoutParams)child.getLayoutParams();
  if (layoutParams != null && layoutParams.removeBorders) {
    if (mPaddingApplied) {
      borderTop-=mBorderTop;
      borderBottom-=mBorderBottom;
      borderLeft-=mBorderLeft;
      borderRight-=mBorderRight;
      mPaddingApplied=false;
    }
  }
 else {
    if (!mPaddingApplied) {
      borderTop+=mBorderTop;
      borderBottom+=mBorderBottom;
      borderLeft+=mBorderLeft;
      borderRight+=mBorderRight;
      mPaddingApplied=true;
    }
  }
  int previousTop=getPaddingTop();
  int previousBottom=getPaddingBottom();
  int previousLeft=getPaddingLeft();
  int previousRight=getPaddingRight();
  if (previousTop != borderTop || previousBottom != borderBottom || previousLeft != borderLeft || previousRight != borderRight) {
    setPadding(borderLeft,borderTop,borderRight,borderBottom);
  }
  super.addView(child);
}
