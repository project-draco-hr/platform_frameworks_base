{
  if ('0' <= nibble && nibble <= '9') {
    return nibble - '0';
  }
 else   if ('a' <= nibble && nibble <= 'f') {
    return nibble - 'a' + 10;
  }
 else   if ('A' <= nibble && nibble <= 'F') {
    return nibble - 'A' + 10;
  }
 else {
    throw new IllegalArgumentException("Invalid character " + nibble + " in hex string");
  }
}
