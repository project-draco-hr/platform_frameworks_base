{
  State state=new State();
  final Intent intent=getIntent();
  state.localOnly=intent.getBooleanExtra(Intent.EXTRA_LOCAL_ONLY,false);
  state.forceSize=intent.getBooleanExtra(DocumentsContract.EXTRA_SHOW_FILESIZE,false);
  state.showSize=state.forceSize || LocalPreferences.getDisplayFileSize(this);
  state.forceAdvanced=intent.getBooleanExtra(DocumentsContract.EXTRA_SHOW_ADVANCED,false);
  state.showAdvanced=state.forceAdvanced || LocalPreferences.getDisplayAdvancedDevices(this);
  state.initAcceptMimes(intent);
  state.excludedAuthorities=getExcludedAuthorities();
  return state;
}
