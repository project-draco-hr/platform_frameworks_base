{
  super.onCreate(icicle);
  final Intent intent=getIntent();
  if (intent.getBooleanExtra(EXTRA_BENCHMARK,false) && BENCHMARK_TESTING_PACKAGE.equals(getCallingPackage())) {
    closeOnIdleForTesting();
  }
  setContentView(mLayoutId);
  mDrawer=DrawerController.create(this);
  mState=getState(icicle);
  Metrics.logActivityLaunch(this,mState,intent);
  mRoots=DocumentsApplication.getRootsCache(this);
  mRoots.setOnCacheUpdateListener(new RootsCache.OnCacheUpdateListener(){
    @Override public void onCacheUpdate(){
      new HandleRootsChangedTask(BaseActivity.this).execute(getCurrentRoot());
    }
  }
);
  mSearchManager=new SearchViewManager(this,icicle);
  DocumentsToolbar toolbar=(DocumentsToolbar)findViewById(R.id.toolbar);
  setActionBar(toolbar);
  mNavigator=new NavigationView(mDrawer,toolbar,(Spinner)findViewById(R.id.stack),mState,this);
  setResult(Activity.RESULT_CANCELED);
}
