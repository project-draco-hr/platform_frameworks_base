{
  if (mSearchManager.cancelSearch()) {
    return;
  }
  DirectoryFragment dir=getDirectoryFragment();
  if (dir != null && dir.onBackPressed()) {
    return;
  }
  if (!mState.hasLocationChanged()) {
    super.onBackPressed();
    return;
  }
  if (onBeforePopDir() || popDir()) {
    return;
  }
  super.onBackPressed();
}
