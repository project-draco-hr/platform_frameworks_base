{
  if (mMenu == null) {
    Log.d(mTag,"update called before Search MenuItem installed.");
    return;
  }
  if (mState.currentSearch != null) {
    mMenu.expandActionView();
    mView.setIconified(false);
    mView.clearFocus();
    mView.setQuery(mState.currentSearch,false);
  }
 else {
    mView.clearFocus();
    if (!mView.isIconified()) {
      mIgnoreNextClose=true;
      mView.setIconified(true);
    }
    if (mMenu.isActionViewExpanded()) {
      mIgnoreNextCollapse=true;
      mMenu.collapseActionView();
    }
  }
  showMenu(root != null && ((root.flags & Root.FLAG_SUPPORTS_SEARCH) != 0));
}
