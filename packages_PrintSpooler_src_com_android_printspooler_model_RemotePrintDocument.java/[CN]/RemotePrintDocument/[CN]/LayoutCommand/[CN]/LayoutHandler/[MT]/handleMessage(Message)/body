{
  if (isFailed()) {
    if (DEBUG) {
      Log.i(LOG_TAG,"[CALLBACK] on failed layout command");
    }
    return;
  }
  int sequence;
  int what=message.what;
switch (what) {
case MSG_ON_LAYOUT_FINISHED:
    removeForceCancel();
  sequence=message.arg2;
break;
case MSG_ON_LAYOUT_FAILED:
case MSG_ON_LAYOUT_CANCELED:
removeForceCancel();
case MSG_ON_LAYOUT_STARTED:
sequence=message.arg1;
break;
default :
sequence=-1;
}
if (isCanceling() && what != MSG_ON_LAYOUT_STARTED) {
what=MSG_ON_LAYOUT_CANCELED;
}
switch (what) {
case MSG_ON_LAYOUT_STARTED:
{
ICancellationSignal cancellation=(ICancellationSignal)message.obj;
handleOnLayoutStarted(cancellation,sequence);
}
break;
case MSG_ON_LAYOUT_FINISHED:
{
PrintDocumentInfo info=(PrintDocumentInfo)message.obj;
final boolean changed=(message.arg1 == 1);
handleOnLayoutFinished(info,changed,sequence);
}
break;
case MSG_ON_LAYOUT_FAILED:
{
CharSequence error=(CharSequence)message.obj;
handleOnLayoutFailed(error,sequence);
}
break;
case MSG_ON_LAYOUT_CANCELED:
{
handleOnLayoutCanceled(sequence);
}
break;
}
}
