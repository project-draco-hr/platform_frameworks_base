{
  if (Arrays.equals(writtenPages,requestedPages)) {
    return ALL_PAGES_ARRAY;
  }
 else   if (Arrays.equals(writtenPages,ALL_PAGES_ARRAY)) {
    return requestedPages;
  }
 else   if (PageRangeUtils.contains(writtenPages,requestedPages)) {
    final int offset=-writtenPages[0].getStart();
    PageRangeUtils.offset(requestedPages,offset);
    return requestedPages;
  }
 else   if (Arrays.equals(requestedPages,ALL_PAGES_ARRAY) && isAllPages(writtenPages,pageCount)) {
    return ALL_PAGES_ARRAY;
  }
  return null;
}
