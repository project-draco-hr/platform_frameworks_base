{
  if (node.mName.equals(TtmlUtils.PCDATA) && inPTag) {
    out.append(node.mText);
  }
 else   if (node.mName.equals(TtmlUtils.TAG_BR) && inPTag) {
    out.append("\n");
  }
 else   if (node.mName.equals(TtmlUtils.TAG_METADATA)) {
  }
 else   if (node.isActive(startUs,endUs)) {
    boolean pTag=node.mName.equals(TtmlUtils.TAG_P);
    int length=out.length();
    for (int i=0; i < node.mChildren.size(); ++i) {
      extractText(node.mChildren.get(i),startUs,endUs,out,pTag || inPTag);
    }
    if (pTag && length != out.length()) {
      out.append("\n");
    }
  }
}
