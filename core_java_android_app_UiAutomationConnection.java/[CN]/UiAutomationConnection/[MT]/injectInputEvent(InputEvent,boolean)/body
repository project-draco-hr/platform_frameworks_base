{
synchronized (mLock) {
    throwIfCalledByNotTrustedUidLocked();
    throwIfShutdownLocked();
    throwIfNotConnectedLocked();
  }
  final int mode=(sync) ? InputManager.INJECT_INPUT_EVENT_MODE_WAIT_FOR_FINISH : InputManager.INJECT_INPUT_EVENT_MODE_ASYNC;
  final long identity=Binder.clearCallingIdentity();
  try {
    return InputManager.getInstance().injectInputEvent(event,mode);
  }
  finally {
    Binder.restoreCallingIdentity(identity);
  }
}
