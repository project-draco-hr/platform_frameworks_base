{
  reloadGpsProperties(mContext,mProperties);
  SubscriptionManager.from(mContext).addOnSubscriptionsChangedListener(mOnSubscriptionsChangedListener);
  IntentFilter intentFilter;
  if (native_is_agps_ril_supported()) {
    intentFilter=new IntentFilter();
    intentFilter.addAction(Intents.DATA_SMS_RECEIVED_ACTION);
    intentFilter.addDataScheme("sms");
    intentFilter.addDataAuthority("localhost","7275");
    mContext.registerReceiver(mBroadcastReceiver,intentFilter,null,this);
    intentFilter=new IntentFilter();
    intentFilter.addAction(Intents.WAP_PUSH_RECEIVED_ACTION);
    try {
      intentFilter.addDataType("application/vnd.omaloc-supl-init");
    }
 catch (    IntentFilter.MalformedMimeTypeException e) {
      Log.w(TAG,"Malformed SUPL init mime type");
    }
    mContext.registerReceiver(mBroadcastReceiver,intentFilter,null,this);
  }
 else   if (DEBUG) {
    Log.d(TAG,"Skipped registration for SMS/WAP-PUSH messages because AGPS Ril in GPS" + " HAL is not supported");
  }
  intentFilter=new IntentFilter();
  intentFilter.addAction(ALARM_WAKEUP);
  intentFilter.addAction(ALARM_TIMEOUT);
  intentFilter.addAction(PowerManager.ACTION_POWER_SAVE_MODE_CHANGED);
  intentFilter.addAction(PowerManager.ACTION_DEVICE_IDLE_MODE_CHANGED);
  intentFilter.addAction(Intent.ACTION_SCREEN_OFF);
  intentFilter.addAction(Intent.ACTION_SCREEN_ON);
  intentFilter.addAction(SIM_STATE_CHANGED);
  mContext.registerReceiver(mBroadcastReceiver,intentFilter,null,this);
  NetworkRequest.Builder networkRequestBuilder=new NetworkRequest.Builder();
  networkRequestBuilder.addTransportType(NetworkCapabilities.TRANSPORT_CELLULAR);
  networkRequestBuilder.addTransportType(NetworkCapabilities.TRANSPORT_WIFI);
  NetworkRequest networkRequest=networkRequestBuilder.build();
  mConnMgr.registerNetworkCallback(networkRequest,mNetworkConnectivityCallback);
  LocationManager locManager=(LocationManager)mContext.getSystemService(Context.LOCATION_SERVICE);
  long minTime=0;
  float minDistance=0;
  boolean oneShot=false;
  LocationRequest request=LocationRequest.createFromDeprecatedProvider(LocationManager.PASSIVE_PROVIDER,minTime,minDistance,oneShot);
  request.setHideFromAppOps(true);
  locManager.requestLocationUpdates(request,new NetworkLocationListener(),getLooper());
}
