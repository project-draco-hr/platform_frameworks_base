{
  if (cmd.getSource() != mAvrLogicalAddress) {
    return false;
  }
switch (mState) {
case STATE_WAIT_FOR_SET_SYSTEM_AUDIO_MODE:
    if (cmd.getOpcode() == Constants.MESSAGE_FEATURE_ABORT && (cmd.getParams()[0] & 0xFF) == Constants.MESSAGE_SYSTEM_AUDIO_MODE_REQUEST) {
      HdmiLogger.debug("Failed to start system audio mode request.");
      setSystemAudioMode(false);
      finishWithCallback(HdmiControlManager.RESULT_EXCEPTION);
      return true;
    }
  if (cmd.getOpcode() != Constants.MESSAGE_SET_SYSTEM_AUDIO_MODE || !HdmiUtils.checkCommandSource(cmd,mAvrLogicalAddress,TAG)) {
    return false;
  }
boolean receivedStatus=HdmiUtils.parseCommandParamSystemAudioStatus(cmd);
if (receivedStatus == mTargetAudioStatus) {
setSystemAudioMode(receivedStatus);
startAudioStatusAction();
return true;
}
 else {
HdmiLogger.debug("Unexpected system audio mode request:" + receivedStatus);
finishWithCallback(HdmiControlManager.RESULT_EXCEPTION);
return false;
}
default :
return false;
}
}
