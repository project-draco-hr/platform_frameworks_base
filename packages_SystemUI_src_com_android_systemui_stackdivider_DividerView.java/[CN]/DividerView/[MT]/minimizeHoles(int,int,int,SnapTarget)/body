{
  if (dockSideTopLeft(dockSide)) {
    if (position > taskPosition) {
      SnapTarget nextTarget=mSnapAlgorithm.getNextTarget(taskSnapTarget);
      if (nextTarget != taskSnapTarget && nextTarget == mSnapAlgorithm.getDismissEndTarget()) {
        float t=(float)(position - taskPosition) / (nextTarget.position - taskPosition);
        if (t > SWITCH_FULLSCREEN_FRACTION) {
          return nextTarget.position;
        }
      }
    }
  }
 else   if (dockSideBottomRight(dockSide)) {
    if (position < taskPosition) {
      SnapTarget previousTarget=mSnapAlgorithm.getPreviousTarget(taskSnapTarget);
      if (previousTarget != taskSnapTarget) {
        float t=(float)(taskPosition - position) / (taskPosition - previousTarget.position);
        float threshold=previousTarget == mSnapAlgorithm.getDismissStartTarget() ? SWITCH_FULLSCREEN_FRACTION : BOTTOM_RIGHT_SWITCH_BIGGER_FRACTION;
        if (t > threshold) {
          return previousTarget.position;
        }
      }
    }
  }
  return taskPosition;
}
