{
  SnapTarget snapTarget=mSnapAlgorithm.calculateSnapTarget(position,velocity);
  if (avoidDismissStart && snapTarget == mSnapAlgorithm.getDismissStartTarget()) {
    snapTarget=mSnapAlgorithm.getFirstSplitTarget();
  }
  final SnapTarget finalTarget=snapTarget;
  ValueAnimator anim=ValueAnimator.ofInt(position,snapTarget.position);
  anim.addUpdateListener(new AnimatorUpdateListener(){
    @Override public void onAnimationUpdate(    ValueAnimator animation){
      resizeStack((Integer)animation.getAnimatedValue(),animation.getAnimatedFraction() == 1f ? TASK_POSITION_SAME : finalTarget.position,finalTarget);
    }
  }
);
  anim.addListener(new AnimatorListenerAdapter(){
    @Override public void onAnimationEnd(    Animator animation){
      commitSnapFlags(finalTarget);
      mWindowManagerProxy.setResizing(false);
      mDockSide=WindowManager.DOCKED_INVALID;
    }
  }
);
  mFlingAnimationUtils.apply(anim,position,snapTarget.position,velocity);
  anim.start();
}
