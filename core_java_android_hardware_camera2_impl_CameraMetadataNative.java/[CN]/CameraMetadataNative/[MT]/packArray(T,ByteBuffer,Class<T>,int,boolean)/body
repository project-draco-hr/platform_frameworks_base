{
  int size=0;
  int arrayLength=Array.getLength(value);
  @SuppressWarnings("unchecked") Class<Object> componentType=(Class<Object>)type.getComponentType();
  for (int i=0; i < arrayLength; ++i) {
    size+=packSingle(Array.get(value,i),buffer,componentType,nativeType,sizeOnly);
  }
  return size;
}
