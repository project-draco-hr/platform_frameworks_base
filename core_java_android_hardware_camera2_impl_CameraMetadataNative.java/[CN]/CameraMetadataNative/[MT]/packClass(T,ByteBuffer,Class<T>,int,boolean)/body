{
  MetadataMarshalClass<T> marshaler=getMarshaler(type,nativeType);
  if (marshaler == null) {
    throw new IllegalArgumentException(String.format("Unknown Key type: %s",type));
  }
  return marshaler.marshal(value,buffer,nativeType,sizeOnly);
}
