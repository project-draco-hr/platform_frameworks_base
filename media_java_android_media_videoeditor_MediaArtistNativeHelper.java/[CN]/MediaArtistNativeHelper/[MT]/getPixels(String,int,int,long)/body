{
  if (inputFile == null) {
    throw new IllegalArgumentException("Invalid input file");
  }
  final int newWidth=(width + 1) & 0xFFFFFFFE;
  final int newHeight=(height + 1) & 0xFFFFFFFE;
  Bitmap tempBitmap=null;
  if ((newWidth != width) || (newHeight != height)) {
    tempBitmap=Bitmap.createBitmap(newWidth,newHeight,Bitmap.Config.ARGB_8888);
  }
  IntBuffer rgb888=IntBuffer.allocate(newWidth * newHeight * 4);
  Bitmap bitmap=Bitmap.createBitmap(width,height,Bitmap.Config.ARGB_8888);
  nativeGetPixels(inputFile,rgb888.array(),newWidth,newHeight,timeMS);
  if ((newWidth == width) && (newHeight == height)) {
    bitmap.copyPixelsFromBuffer(rgb888);
  }
 else {
    tempBitmap.copyPixelsFromBuffer(rgb888);
    final Canvas canvas=new Canvas(bitmap);
    canvas.drawBitmap(tempBitmap,new Rect(0,0,newWidth,newHeight),new Rect(0,0,width,height),sResizePaint);
  }
  if (tempBitmap != null) {
    tempBitmap.recycle();
  }
  return bitmap;
}
