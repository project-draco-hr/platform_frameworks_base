{
  String outputFilename=null;
  int err=0;
  int outVideoProfile=0;
  int outVideoLevel=0;
  outputFilename=String.format(mProjectPath + "/" + uniqueId+ ".3gp");
  outVideoProfile=VideoEditorProfile.getExportProfile(VideoFormat.H264);
  outVideoLevel=VideoEditorProfile.getExportLevel(VideoFormat.H264);
  e.videoProfile=outVideoProfile;
  e.videoLevel=outVideoLevel;
  e.outputFile=outputFilename;
  e.audioBitrate=Bitrate.BR_64_KBPS;
  e.audioChannels=2;
  e.audioFormat=AudioFormat.AAC;
  e.audioSamplingFreq=AudioSamplingFrequency.FREQ_32000;
  e.videoFormat=VideoFormat.H264;
  e.videoFrameRate=VideoFrameRate.FR_30_FPS;
  e.videoFrameSize=getTransitionResolution(m1,m2);
  e.videoBitrate=findVideoBitrate(e.videoFrameSize);
  if (new File(outputFilename).exists()) {
    new File(outputFilename).delete();
  }
  mProcessingState=PROCESSING_INTERMEDIATE3;
  mProcessingObject=t;
  err=generateClip(e);
  mProcessingState=PROCESSING_NONE;
  if (err != 0) {
    throw new RuntimeException("preview generation cannot be completed");
  }
  return outputFilename;
}
