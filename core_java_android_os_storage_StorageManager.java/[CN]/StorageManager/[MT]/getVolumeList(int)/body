{
  final IMountService mountService=IMountService.Stub.asInterface(ServiceManager.getService("mount"));
  try {
    String packageName=ActivityThread.currentOpPackageName();
    if (packageName == null) {
      String[] packageNames=ActivityThread.getPackageManager().getPackagesForUid(android.os.Process.myUid());
      if (packageNames == null || packageNames.length <= 0) {
        return new StorageVolume[0];
      }
      packageName=packageNames[0];
    }
    final int uid=ActivityThread.getPackageManager().getPackageUid(packageName,userId);
    if (uid <= 0) {
      return new StorageVolume[0];
    }
    return mountService.getVolumeList(uid,packageName);
  }
 catch (  RemoteException e) {
    throw e.rethrowAsRuntimeException();
  }
}
