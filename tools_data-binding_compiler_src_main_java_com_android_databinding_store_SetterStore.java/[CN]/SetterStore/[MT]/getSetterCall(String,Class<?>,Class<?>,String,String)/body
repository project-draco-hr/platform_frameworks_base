{
  ArrayList<AdaptedMethod> adapters=mAdaptedMethods.get(attribute);
  AdaptedMethod adapter=null;
  String setterName=null;
  Method bestSetterMethod=getBestSetter(viewType,valueType,attribute);
  Class<?> bestViewType=null;
  Class<?> bestValueType=null;
  if (bestSetterMethod != null) {
    bestViewType=bestSetterMethod.getDeclaringClass();
    bestValueType=bestSetterMethod.getParameterTypes()[0];
    setterName=bestSetterMethod.getName();
  }
  if (adapters != null) {
    for (    AdaptedMethod adaptedMethod : adapters) {
      if (adaptedMethod.viewType.isAssignableFrom(viewType)) {
        boolean isBetterView=bestViewType == null || bestValueType.isAssignableFrom(adaptedMethod.valueType);
        if (isBetterParameter(valueType,adaptedMethod.valueType,bestValueType,isBetterView)) {
          bestViewType=adaptedMethod.viewType;
          bestValueType=adaptedMethod.valueType;
          adapter=adaptedMethod;
        }
      }
    }
  }
  ConversionMethod conversionMethod=getConversionMethod(valueType,bestValueType);
  if (conversionMethod != null) {
    valueExpression=conversionMethod.type + "." + conversionMethod.method+ "("+ valueExpression+ ")";
  }
  if (adapter == null) {
    if (setterName == null) {
      setterName=getDefaultSetter(attribute);
    }
    return viewExpression + "." + setterName+ "("+ valueExpression+ ")";
  }
 else {
    return adapter.type + "." + adapter.method+ "("+ viewExpression+ ", "+ valueExpression+ ")";
  }
}
