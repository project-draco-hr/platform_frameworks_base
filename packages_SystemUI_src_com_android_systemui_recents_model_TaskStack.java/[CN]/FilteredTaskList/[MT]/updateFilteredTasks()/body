{
  mFilteredTasks.clear();
  if (mFilter != null) {
    SparseArray<Task> taskIdMap=new SparseArray<>();
    int taskCount=mTasks.size();
    for (int i=0; i < taskCount; i++) {
      Task t=mTasks.get(i);
      taskIdMap.put(t.key.id,t);
    }
    for (int i=0; i < taskCount; i++) {
      Task t=mTasks.get(i);
      if (mFilter.acceptTask(taskIdMap,t,i)) {
        mFilteredTasks.add(t);
      }
    }
  }
 else {
    mFilteredTasks.addAll(mTasks);
  }
  updateFilteredTaskIndices();
}
