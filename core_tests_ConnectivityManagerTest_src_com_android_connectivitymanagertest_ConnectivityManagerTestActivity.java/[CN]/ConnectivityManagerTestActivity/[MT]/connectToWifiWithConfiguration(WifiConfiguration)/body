{
  String ssid=config.SSID;
  config.SSID=convertToQuotedString(ssid);
  if (!mWifiManager.isWifiEnabled()) {
    log("Wifi is not enabled, enable it");
    mWifiManager.setWifiEnabled(true);
    if (!waitForWifiState(WifiManager.WIFI_STATE_ENABLED,2 * SHORT_TIMEOUT)) {
      log("wait for WIFI_STATE_ENABLED failed");
      return false;
    }
  }
  mWifiManager.connect(config,new WifiManager.ActionListener(){
    public void onSuccess(){
    }
    public void onFailure(    int reason){
      log("connect failure " + reason);
    }
  }
);
  return true;
}
