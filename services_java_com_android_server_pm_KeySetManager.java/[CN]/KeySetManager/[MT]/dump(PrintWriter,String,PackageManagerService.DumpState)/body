{
synchronized (mLockObject) {
    boolean printedHeader=false;
    for (    Map.Entry<String,PackageSetting> e : mPackages.entrySet()) {
      String keySetPackage=e.getKey();
      if (packageName != null && !packageName.equals(keySetPackage)) {
        continue;
      }
      if (!printedHeader) {
        if (dumpState.onTitlePrinted())         pw.println();
        pw.println("Key Set Manager:");
        printedHeader=true;
      }
      PackageSetting pkg=e.getValue();
      pw.print("  [");
      pw.print(keySetPackage);
      pw.println("]");
      if (pkg.keySetData != null) {
        boolean printedLabel=false;
        for (        long keySetId : pkg.keySetData.getDefinedKeySets()) {
          if (!printedLabel) {
            pw.print("      Defined KeySets: ");
            printedLabel=true;
          }
 else {
            pw.print(", ");
          }
          pw.print(Long.toString(keySetId));
        }
        if (printedLabel) {
          pw.println("");
        }
        printedLabel=false;
        for (        long keySetId : pkg.keySetData.getSigningKeySets()) {
          if (!printedLabel) {
            pw.print("      Signing KeySets:");
            printedLabel=true;
          }
 else {
            pw.print(", ");
          }
          pw.print(" ");
          pw.print(Long.toString(keySetId));
        }
        if (printedLabel) {
          pw.println("");
        }
      }
    }
  }
}
