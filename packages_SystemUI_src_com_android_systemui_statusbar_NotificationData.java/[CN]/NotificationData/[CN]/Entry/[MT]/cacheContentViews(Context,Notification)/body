{
  boolean applyInPlace=false;
  if (updatedNotification != null) {
    final Notification.Builder updatedNotificationBuilder=Notification.Builder.recoverBuilder(ctx,updatedNotification);
    final RemoteViews newContentView=updatedNotificationBuilder.makeContentView();
    final RemoteViews newBigContentView=updatedNotificationBuilder.makeBigContentView();
    final RemoteViews newHeadsUpContentView=updatedNotificationBuilder.makeHeadsUpContentView();
    final Notification updatedPublicNotification=updatedNotification.publicVersion;
    final RemoteViews newPubContentView=(updatedPublicNotification != null) ? Notification.Builder.recoverBuilder(ctx,updatedPublicNotification).makeContentView() : null;
    applyInPlace=compareRemoteViews(cachedContentView,newContentView) && compareRemoteViews(cachedBigContentView,newBigContentView) && compareRemoteViews(cachedHeadsUpContentView,newHeadsUpContentView)&& compareRemoteViews(cachedPublicContentView,newPubContentView);
    cachedPublicContentView=newPubContentView;
    cachedHeadsUpContentView=newHeadsUpContentView;
    cachedBigContentView=newBigContentView;
    cachedContentView=newContentView;
  }
 else {
    final Notification.Builder builder=Notification.Builder.recoverBuilder(ctx,notification.getNotification());
    cachedContentView=builder.makeContentView();
    cachedBigContentView=builder.makeBigContentView();
    cachedHeadsUpContentView=builder.makeHeadsUpContentView();
    final Notification publicNotification=notification.getNotification().publicVersion;
    if (publicNotification != null) {
      final Notification.Builder publicBuilder=Notification.Builder.recoverBuilder(ctx,publicNotification);
      cachedPublicContentView=publicBuilder.makeContentView();
    }
    applyInPlace=false;
  }
  return applyInPlace;
}
