{
  boolean applyInPlace=false;
  if (updatedNotification != null) {
    final Notification.Builder updatedNotificationBuilder=Notification.Builder.recoverBuilder(ctx,updatedNotification);
    final RemoteViews newContentView=updatedNotificationBuilder.createContentView();
    final RemoteViews newBigContentView=updatedNotificationBuilder.createBigContentView();
    final RemoteViews newHeadsUpContentView=updatedNotificationBuilder.createHeadsUpContentView();
    final RemoteViews newPublicNotification=updatedNotificationBuilder.makePublicContentView();
    boolean sameCustomView=Objects.equals(notification.getNotification().extras.getBoolean(Notification.EXTRA_CONTAINS_CUSTOM_VIEW),updatedNotification.extras.getBoolean(Notification.EXTRA_CONTAINS_CUSTOM_VIEW));
    applyInPlace=compareRemoteViews(cachedContentView,newContentView) && compareRemoteViews(cachedBigContentView,newBigContentView) && compareRemoteViews(cachedHeadsUpContentView,newHeadsUpContentView)&& compareRemoteViews(cachedPublicContentView,newPublicNotification)&& sameCustomView;
    cachedPublicContentView=newPublicNotification;
    cachedHeadsUpContentView=newHeadsUpContentView;
    cachedBigContentView=newBigContentView;
    cachedContentView=newContentView;
  }
 else {
    final Notification.Builder builder=Notification.Builder.recoverBuilder(ctx,notification.getNotification());
    cachedContentView=builder.createContentView();
    cachedBigContentView=builder.createBigContentView();
    cachedHeadsUpContentView=builder.createHeadsUpContentView();
    cachedPublicContentView=builder.makePublicContentView();
    applyInPlace=false;
  }
  return applyInPlace;
}
