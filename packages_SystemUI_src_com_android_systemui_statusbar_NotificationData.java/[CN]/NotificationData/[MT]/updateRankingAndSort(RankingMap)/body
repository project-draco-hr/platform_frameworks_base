{
  if (ranking != null) {
    mRankingMap=ranking;
synchronized (mEntries) {
      final int N=mEntries.size();
      for (int i=0; i < N; i++) {
        Entry entry=mEntries.valueAt(i);
        final StatusBarNotification oldSbn=entry.notification.clone();
        final String overrideGroupKey=getOverrideGroupKey(entry.key);
        if (!Objects.equals(oldSbn.getOverrideGroupKey(),overrideGroupKey)) {
          entry.notification.setOverrideGroupKey(overrideGroupKey);
          mGroupManager.onEntryUpdated(entry,oldSbn);
        }
      }
    }
  }
  filterAndSort();
}
