{
  if (getSourcePath() == routingPath && mSource.getActiveSource() == getSourceAddress()) {
    invokeCallback(HdmiCec.RESULT_SUCCESS);
    return;
  }
  HdmiCecDeviceInfo device=mService.getDeviceInfo(deviceLogicalAddress);
  if (device == null) {
    mSource.addAndStartAction(new NewDeviceAction(mSource,deviceLogicalAddress,routingPath,false));
  }
  if (!mSource.isInPresetInstallationMode()) {
    int prevActiveInput=mSource.getActivePortId();
    mSource.updateActiveDevice(deviceLogicalAddress,routingPath);
    if (prevActiveInput != mSource.getActivePortId()) {
    }
    invokeCallback(HdmiCec.RESULT_SUCCESS);
  }
 else {
    if (mSource.getActiveSource() == getSourceAddress()) {
      HdmiCecMessage activeSource=HdmiCecMessageBuilder.buildActiveSource(getSourceAddress(),getSourcePath());
      mService.sendCecCommand(activeSource);
      mSource.updateActiveDevice(deviceLogicalAddress,routingPath);
      invokeCallback(HdmiCec.RESULT_SUCCESS);
    }
 else {
      int activePath=mSource.getActivePath();
      mService.sendCecCommand(HdmiCecMessageBuilder.buildRoutingChange(getSourceAddress(),routingPath,activePath));
    }
  }
}
