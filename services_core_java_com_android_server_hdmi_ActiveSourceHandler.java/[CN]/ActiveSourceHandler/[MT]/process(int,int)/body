{
  if (mSourcePath == routingPath && mService.getActiveSource() == mSourceAddress) {
    invokeCallback(HdmiCec.RESULT_SUCCESS);
    return;
  }
  HdmiCecDeviceInfo device=mService.getDeviceInfo(deviceLogicalAddress);
  if (device == null) {
  }
  if (!mService.isInPresetInstallationMode()) {
    int prevActiveInput=mService.getActiveInput();
    mService.updateActiveDevice(deviceLogicalAddress,routingPath);
    if (prevActiveInput != mService.getActiveInput()) {
    }
    invokeCallback(HdmiCec.RESULT_SUCCESS);
  }
 else {
    if (mService.getActiveSource() == mSourceAddress) {
      HdmiCecMessage activeSource=HdmiCecMessageBuilder.buildActiveSource(mSourceAddress,mSourcePath);
      mService.sendCecCommand(activeSource);
      mService.updateActiveDevice(deviceLogicalAddress,routingPath);
      invokeCallback(HdmiCec.RESULT_SUCCESS);
    }
 else {
      int activePath=mService.getActivePath();
      mService.sendCecCommand(HdmiCecMessageBuilder.buildRoutingChange(mSourceAddress,routingPath,activePath));
    }
  }
}
