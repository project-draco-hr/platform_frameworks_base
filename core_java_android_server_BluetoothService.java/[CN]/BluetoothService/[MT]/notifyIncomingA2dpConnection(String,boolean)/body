{
synchronized (this) {
    if (!mAllowConnect) {
      Log.d(TAG,"Not allowing a2dp connection because of temporary BT on state.");
      return false;
    }
  }
  BluetoothDeviceProfileState state=mDeviceProfileState.get(address);
  if (state != null) {
    Message msg=new Message();
    if (rejected) {
      if (mHeadsetProxy.getPriority(getRemoteDevice(address)) >= BluetoothProfile.PRIORITY_ON) {
        msg.what=BluetoothDeviceProfileState.CONNECT_OTHER_PROFILES;
        msg.arg1=BluetoothDeviceProfileState.CONNECT_HFP_OUTGOING;
        state.sendMessageDelayed(msg,BluetoothDeviceProfileState.CONNECT_OTHER_PROFILES_DELAY);
      }
    }
 else {
      msg.what=BluetoothDeviceProfileState.CONNECT_A2DP_INCOMING;
      state.sendMessage(msg);
    }
    return true;
  }
  return false;
}
