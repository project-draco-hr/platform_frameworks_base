{
  pw.println("\n--Bluetooth Service- Input Device Profile");
  if (mInputDevice != null) {
    List<BluetoothDevice> deviceList=mInputDevice.getConnectedDevices();
    if (deviceList.size() == 0) {
      pw.println("\nNo input devices connected--");
    }
 else {
      pw.println("\nNumber of connected devices:" + deviceList.size());
      BluetoothDevice device=deviceList.get(0);
      pw.println("getConnectedDevices[0] = " + device);
      pw.println("Priority of Connected device = " + mInputDevice.getPriority(device));
switch (mInputDevice.getConnectionState(device)) {
case BluetoothInputDevice.STATE_CONNECTING:
        pw.println("getConnectionState() = STATE_CONNECTING");
      break;
case BluetoothInputDevice.STATE_CONNECTED:
    pw.println("getConnectionState() = STATE_CONNECTED");
  break;
case BluetoothInputDevice.STATE_DISCONNECTING:
pw.println("getConnectionState() = STATE_DISCONNECTING");
break;
}
}
deviceList.clear();
deviceList=mInputDevice.getDevicesMatchingConnectionStates(new int[]{BluetoothProfile.STATE_CONNECTED,BluetoothProfile.STATE_DISCONNECTED});
pw.println("--Connected and Disconnected input devices");
for (BluetoothDevice device : deviceList) {
pw.println(device);
}
}
mAdapter.closeProfileProxy(BluetoothProfile.INPUT_DEVICE,mBluetoothHeadset);
}
