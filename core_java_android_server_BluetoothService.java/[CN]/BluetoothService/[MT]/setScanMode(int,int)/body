{
  mContext.enforceCallingOrSelfPermission(android.Manifest.permission.WRITE_SECURE_SETTINGS,"Need WRITE_SECURE_SETTINGS permission");
  boolean pairable=false;
  boolean discoverable=false;
switch (mode) {
case BluetoothAdapter.SCAN_MODE_NONE:
    pairable=false;
  discoverable=false;
break;
case BluetoothAdapter.SCAN_MODE_CONNECTABLE:
pairable=true;
discoverable=false;
break;
case BluetoothAdapter.SCAN_MODE_CONNECTABLE_DISCOVERABLE:
setDiscoverableTimeout(duration);
pairable=true;
discoverable=true;
if (DBG) Log.d(TAG,"BT Discoverable for " + duration + " seconds");
break;
default :
Log.w(TAG,"Requested invalid scan mode " + mode);
return false;
}
setPropertyBoolean("Pairable",pairable);
setPropertyBoolean("Discoverable",discoverable);
return true;
}
