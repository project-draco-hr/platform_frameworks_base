{
  mContext.enforceCallingOrSelfPermission(BLUETOOTH_PERM,"Need BLUETOOTH permission");
  Set<BluetoothDevice> devices=new HashSet<BluetoothDevice>();
  for (  BluetoothDevice device : mPanDevices.keySet()) {
    if (getPanDeviceState(device) == BluetoothPan.STATE_CONNECTED) {
      devices.add(device);
    }
  }
  return devices.toArray(new BluetoothDevice[devices.size()]);
}
