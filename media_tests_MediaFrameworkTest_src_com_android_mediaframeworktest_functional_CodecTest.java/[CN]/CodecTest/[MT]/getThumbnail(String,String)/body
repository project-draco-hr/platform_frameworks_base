{
  Log.v(TAG,"getThumbnail - " + filePath);
  int goldenHeight=0;
  int goldenWidth=0;
  int outputWidth=0;
  int outputHeight=0;
  try {
    BitmapFactory mBitmapFactory=new BitmapFactory();
    MediaMetadataRetriever mMediaMetadataRetriever=new MediaMetadataRetriever();
    try {
      mMediaMetadataRetriever.setDataSource(filePath);
    }
 catch (    Exception e) {
      e.printStackTrace();
      return false;
    }
    Bitmap outThumbnail=mMediaMetadataRetriever.getFrameAtTime(-1);
    Bitmap goldenBitmap=mBitmapFactory.decodeFile(goldenPath);
    outputWidth=outThumbnail.getWidth();
    outputHeight=outThumbnail.getHeight();
    goldenHeight=goldenBitmap.getHeight();
    goldenWidth=goldenBitmap.getWidth();
    if ((outputWidth != goldenWidth) || (outputHeight != goldenHeight))     return false;
    int x=goldenHeight / 2;
    for (int j=1; j < goldenWidth / 2; j++) {
      if (goldenBitmap.getPixel(x,j) != outThumbnail.getPixel(x,j)) {
        Log.v(TAG,"pixel = " + goldenBitmap.getPixel(x,j));
        return false;
      }
    }
  }
 catch (  Exception e) {
    Log.v(TAG,e.toString());
    return false;
  }
  return true;
}
