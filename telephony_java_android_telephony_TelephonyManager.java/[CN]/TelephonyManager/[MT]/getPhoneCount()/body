{
  int phoneCount=1;
switch (getMultiSimConfiguration()) {
case UNKNOWN:
    if (isVoiceCapable() || isSmsCapable()) {
      phoneCount=1;
    }
 else {
      if (mContext == null) {
        phoneCount=1;
      }
 else {
        ConnectivityManager cm=(ConnectivityManager)mContext.getSystemService(Context.CONNECTIVITY_SERVICE);
        if (cm == null) {
          phoneCount=1;
        }
 else {
          if (cm.isNetworkSupported(ConnectivityManager.TYPE_MOBILE)) {
            phoneCount=1;
          }
 else {
            phoneCount=0;
          }
        }
      }
    }
  break;
case DSDS:
case DSDA:
phoneCount=PhoneConstants.MAX_PHONE_COUNT_DUAL_SIM;
break;
case TSTS:
phoneCount=PhoneConstants.MAX_PHONE_COUNT_TRI_SIM;
break;
}
return phoneCount;
}
