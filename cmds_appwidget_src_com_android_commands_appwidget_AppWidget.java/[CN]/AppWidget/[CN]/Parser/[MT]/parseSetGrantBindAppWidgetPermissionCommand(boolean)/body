{
  String packageName=null;
  int userId=UserHandle.USER_SYSTEM;
  for (String argument; (argument=mTokenizer.nextArg()) != null; ) {
    if (ARGUMENT_PACKAGE.equals(argument)) {
      packageName=argumentValueRequired(argument);
    }
 else     if (ARGUMENT_USER.equals(argument)) {
      String user=argumentValueRequired(argument);
      if (VALUE_USER_CURRENT.equals(user)) {
        userId=UserHandle.USER_CURRENT;
      }
 else {
        userId=Integer.parseInt(user);
      }
    }
 else {
      throw new IllegalArgumentException("Unsupported argument: " + argument);
    }
  }
  if (packageName == null) {
    throw new IllegalArgumentException("Package name not specified." + " Did you specify --package argument?");
  }
  return new SetBindAppWidgetPermissionCommand(packageName,granted,userId);
}
