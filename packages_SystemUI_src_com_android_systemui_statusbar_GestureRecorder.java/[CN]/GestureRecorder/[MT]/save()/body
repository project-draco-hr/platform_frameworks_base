{
synchronized (mGestures) {
    try {
      BufferedWriter w=new BufferedWriter(new FileWriter(mLogfile,true));
      w.append(toJsonLocked() + "\n");
      w.close();
      mGestures.clear();
      if (mCurrentGesture != null && !mCurrentGesture.isComplete()) {
        mGestures.add(mCurrentGesture);
      }
      if (DEBUG) {
        Log.v(TAG,String.format("Wrote %d complete gestures to %s",mLastSaveLen,mLogfile));
      }
    }
 catch (    IOException e) {
      Log.e(TAG,String.format("Couldn't write gestures to %s",mLogfile),e);
      mLastSaveLen=-1;
    }
  }
}
