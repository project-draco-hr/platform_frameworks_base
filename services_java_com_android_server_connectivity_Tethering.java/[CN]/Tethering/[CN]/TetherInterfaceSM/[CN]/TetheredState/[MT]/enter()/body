{
  IBinder b=ServiceManager.getService(Context.NETWORKMANAGEMENT_SERVICE);
  INetworkManagementService service=INetworkManagementService.Stub.asInterface(b);
  try {
    service.tetherInterface(mIfaceName);
  }
 catch (  Exception e) {
    setLastError(ConnectivityManager.TETHER_ERROR_TETHER_IFACE_ERROR);
    Message m=obtainMessage(CMD_TRANSITION_TO_STATE);
    m.obj=mInitialState;
    sendMessageAtFrontOfQueue(m);
    return;
  }
  try {
    service.enableNat(mIfaceName,mUpstreamIfaceName);
  }
 catch (  Exception e) {
    try {
      service.untetherInterface(mIfaceName);
    }
 catch (    Exception ee) {
    }
    setLastError(ConnectivityManager.TETHER_ERROR_ENABLE_NAT_ERROR);
    Message m=obtainMessage(CMD_TRANSITION_TO_STATE);
    m.obj=mInitialState;
    sendMessageAtFrontOfQueue(m);
    return;
  }
  if (mUsb)   Tethering.this.enableUsbRndis(true);
  Log.d(TAG,"Tethered " + mIfaceName);
  setAvailable(false);
  setTethered(true);
  sendTetherStateChangedBroadcast();
}
