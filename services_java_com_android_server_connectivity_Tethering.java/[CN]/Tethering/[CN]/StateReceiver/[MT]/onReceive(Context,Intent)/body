{
  String action=intent.getAction();
  if (action.equals(Intent.ACTION_BATTERY_CHANGED)) {
    boolean usbConnected=(intent.getIntExtra(BatteryManager.EXTRA_PLUGGED,-1) == BatteryManager.BATTERY_PLUGGED_USB);
    Tethering.this.enableUsbIfaces(usbConnected);
  }
 else   if (action.equals(ConnectivityManager.CONNECTIVITY_ACTION)) {
    IBinder b=ServiceManager.getService(Context.CONNECTIVITY_SERVICE);
    IConnectivityManager service=IConnectivityManager.Stub.asInterface(b);
    try {
      NetworkInfo info=service.getNetworkInfo(ConnectivityManager.TYPE_MOBILE_DUN);
      int msg;
      if (info != null && info.isConnected() == true) {
        msg=TetherMasterSM.CMD_CELL_DUN_ENABLED;
      }
 else {
        msg=TetherMasterSM.CMD_CELL_DUN_DISABLED;
      }
      mTetherMasterSM.sendMessage(mTetherMasterSM.obtainMessage(msg));
    }
 catch (    RemoteException e) {
    }
  }
}
