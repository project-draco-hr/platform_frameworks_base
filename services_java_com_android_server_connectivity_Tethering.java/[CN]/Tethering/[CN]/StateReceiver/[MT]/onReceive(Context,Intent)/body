{
  String action=intent.getAction();
  if (action.equals(Intent.ACTION_BATTERY_CHANGED)) {
    mUsbConnected=(intent.getIntExtra(BatteryManager.EXTRA_PLUGGED,-1) == BatteryManager.BATTERY_PLUGGED_USB);
    Tethering.this.updateUsbStatus();
  }
 else   if (action.equals(Intent.ACTION_MEDIA_SHARED)) {
    mUsbMassStorageOff=false;
    updateUsbStatus();
  }
 else   if (action.equals(Intent.ACTION_MEDIA_UNSHARED)) {
    mUsbMassStorageOff=true;
    updateUsbStatus();
  }
 else   if (action.equals(ConnectivityManager.CONNECTIVITY_ACTION)) {
    if (DEBUG)     Log.d(TAG,"Tethering got CONNECTIVITY_ACTION");
    mTetherMasterSM.sendMessage(TetherMasterSM.CMD_UPSTREAM_CHANGED);
  }
 else   if (action.equals(Intent.ACTION_BOOT_COMPLETED)) {
    mBooted=true;
    updateUsbStatus();
  }
}
