{
  String action=intent.getAction();
  if (action.equals(UsbManager.ACTION_USB_STATE)) {
    mUsbConnected=intent.getExtras().getBoolean(UsbManager.USB_CONNECTED);
    updateUsbStatus();
  }
 else   if (action.equals(Intent.ACTION_MEDIA_SHARED)) {
    mUsbMassStorageOff=false;
    updateUsbStatus();
  }
 else   if (action.equals(Intent.ACTION_MEDIA_UNSHARED)) {
    mUsbMassStorageOff=true;
    updateUsbStatus();
  }
 else   if (action.equals(ConnectivityManager.CONNECTIVITY_ACTION)) {
    if (DEBUG)     Log.d(TAG,"Tethering got CONNECTIVITY_ACTION");
    mTetherMasterSM.sendMessage(TetherMasterSM.CMD_UPSTREAM_CHANGED);
  }
 else   if (action.equals(Intent.ACTION_BOOT_COMPLETED)) {
    mBooted=true;
    updateUsbStatus();
  }
}
