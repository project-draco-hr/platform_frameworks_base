{
  int requiredApn=((Settings.Secure.getInt(mContext.getContentResolver(),Settings.Secure.TETHER_DUN_REQUIRED,0) == 1) ? ConnectivityManager.TYPE_MOBILE_DUN : ConnectivityManager.TYPE_MOBILE_HIPRI);
  if (mPreferredUpstreamMobileApn != requiredApn) {
    if (requiredApn == ConnectivityManager.TYPE_MOBILE_DUN) {
      while (mUpstreamIfaceTypes.contains(MOBILE_TYPE)) {
        mUpstreamIfaceTypes.remove(MOBILE_TYPE);
      }
      while (mUpstreamIfaceTypes.contains(HIPRI_TYPE)) {
        mUpstreamIfaceTypes.remove(HIPRI_TYPE);
      }
      if (mUpstreamIfaceTypes.contains(DUN_TYPE) == false) {
        mUpstreamIfaceTypes.add(DUN_TYPE);
      }
    }
 else {
      while (mUpstreamIfaceTypes.contains(DUN_TYPE)) {
        mUpstreamIfaceTypes.remove(DUN_TYPE);
      }
      if (mUpstreamIfaceTypes.contains(MOBILE_TYPE) == false) {
        mUpstreamIfaceTypes.add(MOBILE_TYPE);
      }
      if (mUpstreamIfaceTypes.contains(HIPRI_TYPE) == false) {
        mUpstreamIfaceTypes.add(HIPRI_TYPE);
      }
    }
    mPreferredUpstreamMobileApn=requiredApn;
  }
}
