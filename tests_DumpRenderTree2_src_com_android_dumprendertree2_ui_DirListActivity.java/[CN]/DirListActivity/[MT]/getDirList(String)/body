{
  List<ListItem> subDirs=new ArrayList<ListItem>();
  List<ListItem> subFiles=new ArrayList<ListItem>();
  List<String> dirRelativePaths=FsUtils.getLayoutTestsDirContents(dirPath,false,true);
  if (dirRelativePaths == null) {
    return null;
  }
  for (  String dirRelativePath : dirRelativePaths) {
    if (FileFilter.isTestDir(new File(dirRelativePath).getName())) {
      subDirs.add(new ListItem(dirRelativePath,true));
    }
  }
  List<String> testRelativePaths=FsUtils.getLayoutTestsDirContents(dirPath,false,false);
  if (testRelativePaths == null) {
    return null;
  }
  for (  String testRelativePath : testRelativePaths) {
    if (FileFilter.isTestFile(new File(testRelativePath).getName())) {
      subFiles.add(new ListItem(testRelativePath,false));
    }
  }
  subDirs.addAll(subFiles);
  return subDirs.toArray(new ListItem[subDirs.size()]);
}
