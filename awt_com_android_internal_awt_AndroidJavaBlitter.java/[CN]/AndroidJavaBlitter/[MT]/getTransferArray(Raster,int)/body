{
  int transferType=raster.getTransferType();
  int nbDataElements=raster.getSampleModel().getNumDataElements();
  int n=nbDataElements * nbPixels;
switch (transferType) {
case DataBuffer.TYPE_BYTE:
    return new byte[n];
case DataBuffer.TYPE_SHORT:
case DataBuffer.TYPE_USHORT:
  return new short[n];
case DataBuffer.TYPE_INT:
return new int[n];
case DataBuffer.TYPE_FLOAT:
return new float[n];
case DataBuffer.TYPE_DOUBLE:
return new double[n];
case DataBuffer.TYPE_UNDEFINED:
default :
return null;
}
}
