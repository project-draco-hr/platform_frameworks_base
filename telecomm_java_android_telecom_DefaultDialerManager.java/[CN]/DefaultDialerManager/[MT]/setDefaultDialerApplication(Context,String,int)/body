{
  String oldPackageName=Settings.Secure.getStringForUser(context.getContentResolver(),Settings.Secure.DIALER_DEFAULT_APPLICATION,user);
  if (packageName != null && oldPackageName != null && packageName.equals(oldPackageName)) {
    return false;
  }
  List<String> packageNames=getInstalledDialerApplications(context);
  if (packageNames.contains(packageName)) {
    Settings.Secure.putStringForUser(context.getContentResolver(),Settings.Secure.DIALER_DEFAULT_APPLICATION,packageName,user);
    return true;
  }
  return false;
}
