{
  int flag;
switch (state) {
case IMAGEABORTED:
    flag=ImageObserver.ABORT;
  break;
case IMAGEERROR:
flag=ImageObserver.ERROR | ImageObserver.ABORT;
break;
case SINGLEFRAMEDONE:
flag=ImageObserver.FRAMEBITS;
break;
case STATICIMAGEDONE:
flag=ImageObserver.ALLBITS;
break;
default :
throw new IllegalArgumentException(Messages.getString("awt.3B"));
}
imageUpdate(this,flag,0,0,width,height);
if ((flag & (ImageObserver.ERROR | ImageObserver.ABORT | ImageObserver.ALLBITS)) != 0) {
stopProduction();
observers.removeAllElements();
}
}
