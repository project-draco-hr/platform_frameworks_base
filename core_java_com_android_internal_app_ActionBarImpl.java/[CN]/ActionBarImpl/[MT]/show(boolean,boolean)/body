{
  if (mCurrentShowAnim != null) {
    mCurrentShowAnim.end();
  }
  if (mTopVisibilityView.getVisibility() == View.VISIBLE) {
    if (markHiddenBeforeMode)     mWasHiddenBeforeMode=false;
    return;
  }
  mTopVisibilityView.setVisibility(View.VISIBLE);
  if (mCurWindowVisibility == View.VISIBLE && (mShowHideAnimationEnabled || alwaysAnimate)) {
    mTopVisibilityView.setAlpha(0);
    mTopVisibilityView.setTranslationY(-mTopVisibilityView.getHeight());
    AnimatorSet anim=new AnimatorSet();
    AnimatorSet.Builder b=anim.play(ObjectAnimator.ofFloat(mTopVisibilityView,"alpha",1));
    b.with(ObjectAnimator.ofFloat(mTopVisibilityView,"translationY",0));
    if (mContentView != null) {
      b.with(ObjectAnimator.ofFloat(mContentView,"translationY",-mTopVisibilityView.getHeight(),0));
    }
    if (mSplitView != null && mContextDisplayMode == CONTEXT_DISPLAY_SPLIT) {
      mSplitView.setAlpha(0);
      mSplitView.setTranslationY(mSplitView.getHeight());
      mSplitView.setVisibility(View.VISIBLE);
      b.with(ObjectAnimator.ofFloat(mSplitView,"alpha",1));
      b.with(ObjectAnimator.ofFloat(mSplitView,"translationY",0));
    }
    anim.setInterpolator(AnimationUtils.loadInterpolator(mContext,com.android.internal.R.interpolator.decelerate_quad));
    anim.addListener(mShowListener);
    mCurrentShowAnim=anim;
    anim.start();
  }
 else {
    mTopVisibilityView.setAlpha(1);
    mContainerView.setTranslationY(0);
    mShowListener.onAnimationEnd(null);
  }
}
