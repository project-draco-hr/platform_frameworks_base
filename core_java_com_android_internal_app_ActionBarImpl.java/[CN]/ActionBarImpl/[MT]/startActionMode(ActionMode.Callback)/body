{
  if (mActionMode != null) {
    mActionMode.finish();
  }
  mUpperContextView.killMode();
  ActionMode mode=new ActionModeImpl(callback);
  if (callback.onCreateActionMode(mode,mode.getMenu())) {
    mWasHiddenBeforeMode=!isShowing();
    mode.invalidate();
    mUpperContextView.initForMode(mode);
    animateTo(CONTEXT_VIEW);
    if (mLowerContextView != null) {
      mLowerContextView.setVisibility(View.VISIBLE);
    }
    mActionMode=mode;
    return mode;
  }
  return null;
}
