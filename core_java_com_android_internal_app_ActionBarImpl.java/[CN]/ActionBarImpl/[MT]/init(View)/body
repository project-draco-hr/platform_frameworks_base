{
  mContext=decor.getContext();
  mActionView=(ActionBarView)decor.findViewById(com.android.internal.R.id.action_bar);
  mUpperContextView=(ActionBarContextView)decor.findViewById(com.android.internal.R.id.action_context_bar);
  mLowerContextView=(LinearLayout)decor.findViewById(com.android.internal.R.id.lower_action_context_bar);
  mContainerView=(ActionBarContainer)decor.findViewById(com.android.internal.R.id.action_bar_container);
  if (mActionView == null || mUpperContextView == null || mContainerView == null) {
    throw new IllegalStateException(getClass().getSimpleName() + " can only be used " + "with a compatible window decor layout");
  }
  mActionView.setContextView(mUpperContextView);
  mContextDisplayMode=mLowerContextView == null ? CONTEXT_DISPLAY_NORMAL : CONTEXT_DISPLAY_SPLIT;
  if (!mActionView.hasEmbeddedTabs()) {
    HorizontalScrollView tabScroller=new HorizontalScrollView(mContext);
    ViewGroup tabContainer=mActionView.createTabContainer();
    tabScroller.setHorizontalFadingEdgeEnabled(true);
    tabScroller.addView(tabContainer);
    tabScroller.setVisibility(getNavigationMode() == NAVIGATION_MODE_TABS ? View.VISIBLE : View.GONE);
    mActionView.setExternalTabLayout(tabContainer);
    mContainerView.setTabContainer(tabScroller);
    mExternalTabView=tabScroller;
  }
}
