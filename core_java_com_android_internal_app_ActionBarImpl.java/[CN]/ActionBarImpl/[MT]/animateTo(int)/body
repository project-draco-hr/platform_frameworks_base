{
  if (mCurrentAnimation != null) {
    mCurrentAnimation.end();
  }
  AnimatorSet set=new AnimatorSet();
  final View targetChild=mContainerView.getChildAt(viewIndex);
  targetChild.setVisibility(View.VISIBLE);
  AnimatorSet.Builder b=set.play(ObjectAnimator.ofFloat(targetChild,"alpha",1));
  if (viewIndex == NORMAL_VIEW) {
    targetChild.setScaleY(0);
    b.with(ObjectAnimator.ofFloat(targetChild,"scaleY",1));
  }
  final int count=mContainerView.getChildCount();
  for (int i=0; i < count; i++) {
    final View child=mContainerView.getChildAt(i);
    if (i == viewIndex) {
      continue;
    }
    if (child.getVisibility() != View.GONE) {
      ObjectAnimator a=ObjectAnimator.ofFloat(child,"alpha",0);
      b.with(a);
      if (viewIndex == CONTEXT_VIEW) {
        b.with(ObjectAnimator.ofFloat(child,"scaleY",0));
      }
    }
  }
  set.addListener(mAfterAnimation[viewIndex]);
  mCurrentAnimation=set;
  set.start();
  return set.getDuration();
}
