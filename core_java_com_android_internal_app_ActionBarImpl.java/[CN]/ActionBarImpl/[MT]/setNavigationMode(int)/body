{
  final int oldMode=mActionView.getNavigationMode();
switch (oldMode) {
case NAVIGATION_MODE_TABS:
    mSavedTabPosition=getSelectedNavigationIndex();
  selectTab(null);
if (!mActionView.hasEmbeddedTabs()) {
  mExternalTabView.setVisibility(View.GONE);
}
break;
}
mActionView.setNavigationMode(mode);
switch (mode) {
case NAVIGATION_MODE_TABS:
if (!mActionView.hasEmbeddedTabs()) {
mExternalTabView.setVisibility(View.VISIBLE);
}
if (mSavedTabPosition != INVALID_POSITION) {
setSelectedNavigationItem(mSavedTabPosition);
mSavedTabPosition=INVALID_POSITION;
}
break;
}
}
