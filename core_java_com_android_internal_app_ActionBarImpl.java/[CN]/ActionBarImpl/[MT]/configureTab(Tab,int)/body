{
  final TabImpl tabi=(TabImpl)tab;
  final boolean isFirstTab=mTabs.isEmpty();
  final FragmentTransaction trans=mActivity.openFragmentTransaction();
  final Fragment frag=tabi.getFragment();
  tabi.setPosition(position);
  mTabs.add(position,tabi);
  if (mTabSwitchMode == TAB_SWITCH_SHOW_HIDE) {
    if (!frag.isAdded()) {
      trans.add(mTabContainerViewId,frag);
    }
  }
  if (isFirstTab) {
    if (mTabSwitchMode == TAB_SWITCH_SHOW_HIDE) {
      trans.show(frag);
    }
 else     if (mTabSwitchMode == TAB_SWITCH_ADD_REMOVE) {
      trans.add(mTabContainerViewId,frag);
    }
    mSelectedTab=tabi;
  }
 else {
    if (mTabSwitchMode == TAB_SWITCH_SHOW_HIDE) {
      trans.hide(frag);
    }
  }
  trans.commit();
}
