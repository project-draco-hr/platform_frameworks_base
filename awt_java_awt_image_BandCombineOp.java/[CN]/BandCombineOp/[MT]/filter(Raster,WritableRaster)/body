{
  int numBands=src.getNumBands();
  if (mxWidth != numBands && mxWidth != (numBands + 1)) {
    throw new IllegalArgumentException(Messages.getString("awt.254",new Object[]{numBands,mxWidth,mxHeight}));
  }
  if (dst == null) {
    dst=createCompatibleDestRaster(src);
  }
 else   if (dst.getNumBands() != mxHeight) {
    throw new IllegalArgumentException(Messages.getString("awt.255",new Object[]{dst.getNumBands(),mxWidth,mxHeight}));
  }
  if (verySlowFilter(src,dst) != 0) {
    throw new ImagingOpException(Messages.getString("awt.21F"));
  }
  return dst;
}
