{
  int stackId=createStackOnDisplay(getNextStackId(),Display.DEFAULT_DISPLAY);
  final ActivityStack stack=getStack(stackId);
  for (int taskNdx=tasks.size() - 1; taskNdx >= 0; --taskNdx) {
    final TaskRecord task=tasks.get(taskNdx);
    stack.addTask(task,false,false);
    final int taskId=task.taskId;
    final ArrayList<ActivityRecord> activities=task.mActivities;
    for (int activityNdx=activities.size() - 1; activityNdx >= 0; --activityNdx) {
      final ActivityRecord r=activities.get(activityNdx);
      mWindowManager.addAppToken(0,r.appToken,taskId,stackId,r.info.screenOrientation,r.fullscreen,(r.info.flags & ActivityInfo.FLAG_SHOW_ON_LOCK_SCREEN) != 0,r.userId,r.info.configChanges,task.voiceSession != null);
    }
    mWindowManager.addTask(taskId,stackId,false);
  }
  resumeHomeActivity(null);
}
