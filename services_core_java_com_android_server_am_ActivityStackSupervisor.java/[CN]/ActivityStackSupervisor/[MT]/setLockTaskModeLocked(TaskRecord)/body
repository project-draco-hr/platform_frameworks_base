{
  final Message lockTaskMsg=Message.obtain();
  if (task == null) {
    mLockTaskModeTask=null;
    lockTaskMsg.what=LOCK_TASK_END_MSG;
    mHandler.sendMessage(lockTaskMsg);
    return;
  }
  if (isLockTaskModeViolation(task)) {
    Slog.e(TAG,"setLockTaskMode: Attempt to start a second Lock Task Mode task.");
    return;
  }
  mLockTaskModeTask=task;
  findTaskToMoveToFrontLocked(task,0,null);
  resumeTopActivitiesLocked();
  lockTaskMsg.what=LOCK_TASK_START_MSG;
  mHandler.sendMessage(lockTaskMsg);
}
