{
synchronized (mService) {
    ActivityDisplay activityDisplay=mActivityDisplays.get(displayId);
    if (activityDisplay != null) {
      ArrayList<ActivityStack> stacks=activityDisplay.mStacks;
      for (int stackNdx=stacks.size() - 1; stackNdx >= 0; --stackNdx) {
        activityDisplay.detachActivitiesLocked(stacks.get(stackNdx));
      }
      mActivityDisplays.remove(displayId);
    }
  }
  mWindowManager.onDisplayRemoved(displayId);
}
