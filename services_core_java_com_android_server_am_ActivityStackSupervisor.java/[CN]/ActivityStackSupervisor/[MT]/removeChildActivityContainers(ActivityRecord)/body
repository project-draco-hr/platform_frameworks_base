{
  for (int ndx=mActivityContainers.size() - 1; ndx >= 0; --ndx) {
    final ActivityContainer container=mActivityContainers.valueAt(ndx).get();
    if (container == null) {
      mActivityContainers.removeAt(ndx);
      continue;
    }
    if (container.mParentActivity != parentActivity) {
      continue;
    }
    ActivityStack stack=container.mStack;
    ActivityRecord top=stack.topRunningNonDelayedActivityLocked(null);
    if (top != null) {
      stack.destroyActivityLocked(top,true,true,"stack parent destroyed");
    }
    mActivityContainers.removeAt(ndx);
    container.detachLocked();
  }
}
