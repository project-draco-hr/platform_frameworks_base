{
  final ActivityStack stack=getStack(stackId,!CREATE_IF_NEEDED,!ON_TOP);
  if (stack == null) {
    throw new IllegalArgumentException("moveTopStackActivityToPinnedStackLocked: Unknown stackId=" + stackId);
  }
  final ActivityRecord r=stack.topRunningActivityLocked();
  if (r == null) {
    Slog.w(TAG,"moveTopStackActivityToPinnedStackLocked: No top running activity" + " in stack=" + stack);
    return false;
  }
  if (!mService.mForceResizableActivities && !r.info.supportsPip) {
    Slog.w(TAG,"moveTopStackActivityToPinnedStackLocked: Picture-In-Picture not supported for " + " r=" + r);
    return false;
  }
  moveActivityToStackLocked(r,PINNED_STACK_ID,"moveTopActivityToPinnedStack",bounds);
  return true;
}
