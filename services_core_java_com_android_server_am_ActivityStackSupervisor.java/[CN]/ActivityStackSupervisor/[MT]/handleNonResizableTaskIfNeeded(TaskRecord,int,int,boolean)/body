{
  if ((!isStackDockedInEffect(actualStackId) && preferredStackId != DOCKED_STACK_ID) || task.isHomeTask()) {
    return;
  }
  final ActivityRecord topActivity=task.getTopActivity();
  if (!task.canGoInDockedStack() || forceNonResizable) {
    mService.mHandler.sendEmptyMessage(NOTIFY_ACTIVITY_DISMISSING_DOCKED_STACK_MSG);
    moveTasksToFullscreenStackLocked(DOCKED_STACK_ID,actualStackId == DOCKED_STACK_ID);
  }
 else   if (topActivity != null && topActivity.isNonResizableOrForced() && !topActivity.noDisplay) {
    String packageName=topActivity.appInfo.packageName;
    mService.mHandler.obtainMessage(NOTIFY_FORCED_RESIZABLE_MSG,task.taskId,0,packageName).sendToTarget();
  }
}
