{
  mLastFocusedStack=mFocusedStack;
  mFocusedStack=focusedStack;
  EventLogTags.writeAmFocusedStack(mCurrentUser,mFocusedStack == null ? -1 : mFocusedStack.getStackId(),mLastFocusedStack == null ? -1 : mLastFocusedStack.getStackId(),reason);
  if (mService.mBooting || !mService.mBooted) {
    final ActivityRecord r=topRunningActivityLocked();
    if (r != null && r.idle) {
      checkFinishBootingLocked();
    }
  }
}
