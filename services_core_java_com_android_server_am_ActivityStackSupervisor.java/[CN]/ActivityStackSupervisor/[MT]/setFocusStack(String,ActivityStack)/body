{
  ArrayList<ActivityStack> stacks=mHomeStack.mStacks;
  final int topNdx=stacks.size() - 1;
  if (topNdx <= 0) {
    return;
  }
  final ActivityStack topStack=stacks.get(topNdx);
  mFocusedStack=topStack;
  if (lastFocusedStack != null) {
    mLastFocusedStack=lastFocusedStack;
  }
  EventLogTags.writeAmFocusedStack(mCurrentUser,mFocusedStack == null ? -1 : mFocusedStack.getStackId(),mLastFocusedStack == null ? -1 : mLastFocusedStack.getStackId(),reason);
  if (mService.mBooting || !mService.mBooted) {
    final ActivityRecord r=topRunningActivityLocked();
    if (r != null && r.idle) {
      checkFinishBootingLocked();
    }
  }
}
