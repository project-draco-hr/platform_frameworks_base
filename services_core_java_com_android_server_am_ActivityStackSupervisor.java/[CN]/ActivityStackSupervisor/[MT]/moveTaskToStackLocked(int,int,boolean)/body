{
  final TaskRecord task=anyTaskForIdLocked(taskId);
  if (task == null) {
    Slog.w(TAG,"moveTaskToStack: no task for id=" + taskId);
    return;
  }
  ActivityStack stack=getStack(stackId,true,toTop);
  mWindowManager.moveTaskToStack(taskId,stackId,toTop);
  if (task.stack != null) {
    task.stack.removeTask(task,"moveTaskToStack",false);
  }
  stack.addTask(task,toTop,true);
  if (stackId == FULLSCREEN_WORKSPACE_STACK_ID && task.mBounds != null) {
    resizeTaskLocked(task,null);
  }
 else   if (stackId == FREEFORM_WORKSPACE_STACK_ID && task.mBounds == null && task.mLastNonFullscreenBounds != null) {
    resizeTaskLocked(task,task.mLastNonFullscreenBounds);
  }
  stack.ensureActivitiesVisibleLocked(null,0);
  resumeTopActivitiesLocked();
}
