{
  final TaskRecord task=anyTaskForIdLocked(taskId);
  if (task == null) {
    Slog.w(TAG,"positionTaskInStackLocked: no task for id=" + taskId);
    return;
  }
  final ActivityStack stack=getStack(stackId,CREATE_IF_NEEDED,!ON_TOP);
  task.updateOverrideConfigurationForStack(stack);
  mWindowManager.positionTaskInStack(taskId,stackId,position,task.mBounds,task.mOverrideConfig);
  final boolean stackChanged=task.stack != null && task.stack != stack;
  if (stackChanged) {
    task.stack.removeTask(task,"moveTaskToStack",MOVING);
  }
  stack.positionTask(task,position,stackChanged);
  stack.ensureActivitiesVisibleLocked(null,0,!PRESERVE_WINDOWS);
  resumeTopActivitiesLocked();
}
