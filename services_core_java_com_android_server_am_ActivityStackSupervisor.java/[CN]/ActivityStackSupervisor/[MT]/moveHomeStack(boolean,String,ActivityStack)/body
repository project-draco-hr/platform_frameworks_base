{
  ArrayList<ActivityStack> stacks=mHomeStack.mStacks;
  final int topNdx=stacks.size() - 1;
  if (topNdx <= 0) {
    return;
  }
  ActivityStack topStack=stacks.get(topNdx);
  final boolean homeInFront=topStack == mHomeStack;
  if (homeInFront != toFront) {
    stacks.remove(mHomeStack);
    stacks.add(toFront ? topNdx : 0,mHomeStack);
    if (DEBUG_STACK)     Slog.d(TAG,"moveHomeTask: topStack old=" + topStack + " new="+ mFocusedStack);
  }
  if (lastFocusedStack != null) {
    mLastFocusedStack=lastFocusedStack;
  }
  mFocusedStack=stacks.get(topNdx);
  EventLog.writeEvent(EventLogTags.AM_HOME_STACK_MOVED,mCurrentUser,toFront ? 1 : 0,stacks.get(topNdx).getStackId(),mFocusedStack == null ? -1 : mFocusedStack.getStackId(),reason);
  if (mService.mBooting || !mService.mBooted) {
    final ActivityRecord r=topRunningActivityLocked();
    if (r != null && r.idle) {
      checkFinishBootingLocked();
    }
  }
}
