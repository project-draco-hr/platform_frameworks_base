{
  final TaskRecord task=r.task;
  if (task.mActivities.size() == 1) {
    moveTaskToStackLocked(task.taskId,stackId,ON_TOP,FORCE_FOCUS,reason,true);
  }
 else {
    final ActivityStack stack=getStack(stackId,CREATE_IF_NEEDED,ON_TOP);
    stack.moveActivityToStack(r);
  }
  if (bounds != null) {
    resizeStackLocked(PINNED_STACK_ID,bounds,!PRESERVE_WINDOWS,true);
  }
  ensureActivitiesVisibleLocked(null,0,!PRESERVE_WINDOWS);
  resumeTopActivitiesLocked();
}
