{
  mService.enforceNotIsolatedCaller("ActivityContainer.attachToSurface");
  final long origId=Binder.clearCallingIdentity();
  try {
synchronized (mService) {
      ActivityDisplay activityDisplay=new ActivityDisplay(surface,width,height,density);
      mActivityDisplays.put(activityDisplay.mDisplayId,activityDisplay);
      attachToDisplayLocked(activityDisplay);
      mStack.resumeTopActivityLocked(null);
    }
    if (DEBUG_STACK)     Slog.d(TAG,"attachToSurface: " + this + " to display="+ mActivityDisplay);
  }
  finally {
    Binder.restoreCallingIdentity(origId);
  }
}
