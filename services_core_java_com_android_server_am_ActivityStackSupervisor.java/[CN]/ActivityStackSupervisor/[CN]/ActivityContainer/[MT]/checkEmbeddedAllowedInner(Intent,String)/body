{
  int userId=mService.handleIncomingUser(Binder.getCallingPid(),Binder.getCallingUid(),mCurrentUser,false,ActivityManagerService.ALLOW_FULL_ONLY,"ActivityContainer",null);
  if (resolvedType == null) {
    resolvedType=intent.getType();
    if (resolvedType == null && intent.getData() != null && "content".equals(intent.getData().getScheme())) {
      resolvedType=mService.getProviderMimeType(intent.getData(),userId);
    }
  }
  ActivityInfo aInfo=resolveActivity(intent,resolvedType,0,null,userId);
  if (aInfo != null && (aInfo.flags & ActivityInfo.FLAG_ALLOW_EMBEDDED) == 0) {
    throw new SecurityException("Attempt to embed activity that has not set allowEmbedded=\"true\"");
  }
}
