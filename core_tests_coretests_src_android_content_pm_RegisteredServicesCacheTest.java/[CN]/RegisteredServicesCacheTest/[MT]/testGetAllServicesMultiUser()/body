{
  TestServicesCache cache=new TestServicesCache(mContext,mDataDir);
  int u0=0;
  int u1=1;
  int pid1=1;
  cache.addServiceForQuerying(u0,r1,new RegisteredServicesCache.ServiceInfo<>(t1,null,pid1));
  int u1uid=UserHandle.getUid(u1,0);
  cache.addServiceForQuerying(u1,r2,new RegisteredServicesCache.ServiceInfo<>(t2,null,u1uid));
  assertEquals(u1,cache.getAllServicesSize(u0));
  assertEquals(u1,cache.getPersistentServicesSize(u0));
  assertEquals(u1,cache.getAllServicesSize(u1));
  assertEquals(u1,cache.getPersistentServicesSize(u1));
  assertEquals("No services should be available for user 3",0,cache.getAllServicesSize(3));
  cache=new TestServicesCache(mContext,mDataDir);
  assertEquals(u1,cache.getPersistentServicesSize(u0));
  assertEquals(u1,cache.getPersistentServicesSize(u1));
}
