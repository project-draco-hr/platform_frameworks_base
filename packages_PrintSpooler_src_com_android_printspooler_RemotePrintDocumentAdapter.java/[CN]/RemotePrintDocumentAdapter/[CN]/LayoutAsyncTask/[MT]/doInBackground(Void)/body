{
synchronized (mLock) {
    if (DEBUG) {
      Log.i(LOG_TAG,"layout()");
    }
    if (mState != STATE_START_COMPLETED && mState != STATE_LAYOUT_COMPLETED && mState != STATE_WRITE_COMPLETED) {
      throw new IllegalStateException("Invalid state: " + mState);
    }
    mState=STATE_LAYOUT_STARTED;
  }
  try {
    mRemoteInterface.layout(mOldAttributes,mNewAttributes,mILayoutResultCallback,mMetadata);
synchronized (mLock) {
      while (true) {
        if (mState == STATE_LAYOUT_COMPLETED) {
          break;
        }
        try {
          mLock.wait();
        }
 catch (        InterruptedException ie) {
        }
      }
    }
  }
 catch (  RemoteException re) {
    Slog.e(LOG_TAG,"Error calling layout",re);
    mState=STATE_FAILED;
    mTaskQueue.remove(this);
    notifyLayoutFailedQuietly();
  }
  return null;
}
