{
  try {
    final boolean readOnly=(connectionFlags & CONNECTION_FLAG_READ_ONLY) != 0;
    connection.setOnlyAllowReadOnlyOperations(readOnly);
    mAcquiredConnections.put(connection,AcquiredConnectionStatus.NORMAL);
  }
 catch (  RuntimeException ex) {
    Log.e(TAG,"Failed to prepare acquired connection for session, closing it: " + connection + ", connectionFlags="+ connectionFlags);
    closeConnectionAndLogExceptionsLocked(connection);
    throw ex;
  }
}
