{
  if (configuration == null) {
    throw new IllegalArgumentException("configuration must not be null.");
  }
synchronized (mLock) {
    throwIfClosedLocked();
    final boolean poolSizeChanged=mConfiguration.maxConnectionPoolSize != configuration.maxConnectionPoolSize;
    mConfiguration.updateParametersFrom(configuration);
    if (poolSizeChanged) {
      int availableCount=mAvailableNonPrimaryConnections.size();
      while (availableCount-- > mConfiguration.maxConnectionPoolSize - 1) {
        SQLiteConnection connection=mAvailableNonPrimaryConnections.remove(availableCount);
        closeConnectionAndLogExceptionsLocked(connection);
      }
    }
    reconfigureAllConnectionsLocked();
    wakeConnectionWaitersLocked();
  }
}
