{
  if (mPolicyVisibility && mPolicyVisibilityAfterAnim) {
    return false;
  }
  if (DEBUG_VISIBILITY)   Slog.v(WindowManagerService.TAG,"Policy visibility true: " + this);
  if (doAnimation) {
    if (DEBUG_VISIBILITY)     Slog.v(WindowManagerService.TAG,"doAnimation: mPolicyVisibility=" + mPolicyVisibility + " mAnimation="+ mAnimation);
    if (mService.mDisplayFrozen || !mService.mPolicy.isScreenOn()) {
      doAnimation=false;
    }
 else     if (mPolicyVisibility && mAnimation == null) {
      doAnimation=false;
    }
  }
  mPolicyVisibility=true;
  mPolicyVisibilityAfterAnim=true;
  if (doAnimation) {
    mService.applyAnimationLocked(this,WindowManagerPolicy.TRANSIT_ENTER,true);
  }
  if (requestAnim) {
    mService.requestAnimationLocked(0);
  }
  return true;
}
