{
  if (!TRACE_MOTION_EVENTS) {
    return;
  }
  if (sMotionEventRoot == null || sMotionEventTraces == null) {
    throw new IllegalStateException("You must call startMotionEventTracing() before" + " stopMotionEventTracing()!");
  }
  try {
    sMotionEventTraces.close();
  }
 catch (  IOException e) {
    Log.e("View","Could not write view traces");
  }
  sMotionEventTraces=null;
  File hierarchyDump=new File(Environment.getExternalStorageDirectory(),"motion-events/");
  hierarchyDump.mkdirs();
  hierarchyDump=new File(hierarchyDump,sMotionEventTracePrefix + ".tree");
  BufferedWriter out;
  try {
    out=new BufferedWriter(new FileWriter(hierarchyDump),8 * 1024);
  }
 catch (  IOException e) {
    Log.e("View","Could not dump view hierarchy");
    return;
  }
  View view=sMotionEventRoot.getView();
  if (view instanceof ViewGroup) {
    ViewGroup group=(ViewGroup)view;
    dumpViewHierarchy(group,out,0);
    try {
      out.close();
    }
 catch (    IOException e) {
      Log.e("View","Could not dump view hierarchy");
    }
  }
  sHierarhcyRoot=null;
}
