{
  if (captureView != null) {
    final CountDownLatch latch=new CountDownLatch(1);
    final Bitmap[] cache=new Bitmap[1];
    captureView.post(new Runnable(){
      public void run(){
        try {
          cache[0]=captureView.createSnapshot(Bitmap.Config.ARGB_8888,0,skpiChildren);
        }
 catch (        OutOfMemoryError e) {
          try {
            cache[0]=captureView.createSnapshot(Bitmap.Config.ARGB_4444,0,skpiChildren);
          }
 catch (          OutOfMemoryError e2) {
            Log.w("View","Out of memory for bitmap");
          }
        }
 finally {
          latch.countDown();
        }
      }
    }
);
    try {
      latch.await(CAPTURE_TIMEOUT,TimeUnit.MILLISECONDS);
      return cache[0];
    }
 catch (    InterruptedException e) {
      Log.w("View","Could not complete the capture of the view " + captureView);
      Thread.currentThread().interrupt();
    }
  }
  return null;
}
