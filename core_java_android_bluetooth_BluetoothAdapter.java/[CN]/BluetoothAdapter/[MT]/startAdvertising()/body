{
  if (getState() != STATE_ON)   return false;
  try {
    IBluetoothGatt iGatt=mManagerService.getBluetoothGatt();
    if (iGatt == null) {
      return false;
    }
    if (isAdvertising()) {
      if (mAdvertisingCallback == null || mAdvertisingCallback.mLeHandle == -1) {
        Log.e(TAG,"failed to restart advertising, invalid callback");
        return false;
      }
      iGatt.startAdvertising(mAdvertisingCallback.mLeHandle);
      return true;
    }
    UUID uuid=UUID.randomUUID();
    GattCallbackWrapper wrapper=new GattCallbackWrapper(this,null,null,GattCallbackWrapper.CALLBACK_TYPE_ADV);
    iGatt.registerClient(new ParcelUuid(uuid),wrapper);
    mAdvertisingCallback=wrapper;
    return true;
  }
 catch (  RemoteException e) {
    Log.e(TAG,"",e);
    return false;
  }
}
