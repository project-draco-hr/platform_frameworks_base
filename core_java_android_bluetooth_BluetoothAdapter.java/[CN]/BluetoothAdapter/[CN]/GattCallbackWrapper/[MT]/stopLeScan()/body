{
synchronized (this) {
    if (mLeHandle <= 0) {
      Log.e(TAG,"Error state, mLeHandle: " + mLeHandle);
      return;
    }
    BluetoothAdapter adapter=mBluetoothAdapter.get();
    if (adapter != null) {
      try {
        IBluetoothGatt iGatt=adapter.getBluetoothManager().getBluetoothGatt();
        iGatt.stopScan(mLeHandle,false);
        iGatt.unregisterClient(mLeHandle);
      }
 catch (      RemoteException e) {
        Log.e(TAG,"Failed to stop scan and unregister" + e);
      }
    }
 else {
      Log.e(TAG,"stopLeScan, BluetoothAdapter is null");
    }
    mLeHandle=-1;
    notifyAll();
  }
}
