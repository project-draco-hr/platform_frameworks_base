{
  Thread thread=new Thread(){
    @Override public void run(){
      try {
        SSLSocket socket=(SSLSocket)clientFactory.createSocket("www.heise.de",80);
        socket.setSoTimeout(5000);
        socket.startHandshake();
        socket.close();
      }
 catch (      Exception ex) {
        handshakeException=ex;
      }
    }
  }
;
  thread.start();
  try {
    thread.join(10000);
  }
 catch (  InterruptedException ex) {
  }
  if (handshakeException == null) {
    fail("SSL handshake should have failed.");
  }
}
