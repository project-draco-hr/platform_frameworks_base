{
  if (useOldZoom(mContext))   return;
  if (visible) {
    dismissZoomRingDelayed(ZOOM_CONTROLS_TIMEOUT);
  }
 else {
    mPanner.stop();
  }
  if (mIsZoomRingVisible == visible) {
    return;
  }
  if (visible) {
    if (mContainerLayoutParams.token == null) {
      mContainerLayoutParams.token=mOwnerView.getWindowToken();
    }
    mWindowManager.addView(mContainer,mContainerLayoutParams);
    if (mPostedVisibleInitializer == null) {
      mPostedVisibleInitializer=new Runnable(){
        public void run(){
          refreshPositioningVariables();
          resetZoomRing();
          mWindowManager.updateViewLayout(mContainer,mContainerLayoutParams);
        }
      }
;
    }
    mHandler.post(mPostedVisibleInitializer);
    mContext.registerReceiver(mConfigurationChangedReceiver,mConfigurationChangedFilter);
    mOwnerView.setOnKeyListener(this);
  }
 else {
    mOwnerView.setOnKeyListener(null);
    mContext.unregisterReceiver(mConfigurationChangedReceiver);
    mWindowManager.removeView(mContainer);
  }
  mIsZoomRingVisible=visible;
  if (mCallback != null) {
    mCallback.onVisibilityChanged(visible);
  }
}
