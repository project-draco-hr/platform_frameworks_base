{
  if (DBG)   log("updateMessageOnSimEf: index=" + index + " status="+ status+ " ==> "+ "("+ pdu+ ")");
  enforceReceiveAndSend("Updating message on SIM");
synchronized (mLock) {
    mSuccess=false;
    Message response=mHandler.obtainMessage(EVENT_UPDATE_DONE);
    if (status == SmsManager.STATUS_ON_SIM_FREE) {
      mPhone.mCM.deleteSmsOnSim(index,response);
    }
 else {
      byte[] record=makeSmsRecordData(status,pdu);
      mPhone.mSIMFileHandler.updateEFLinearFixed(SimConstants.EF_SMS,index,record,null,response);
    }
    try {
      mLock.wait();
    }
 catch (    InterruptedException e) {
      log("interrupted while trying to update by index");
    }
  }
  return mSuccess;
}
