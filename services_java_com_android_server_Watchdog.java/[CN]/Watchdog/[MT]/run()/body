{
  while (true) {
    mCompleted=false;
    mHandler.sendEmptyMessage(MONITOR);
synchronized (this) {
      long timeout=TIME_TO_WAIT;
      long start=SystemClock.uptimeMillis();
      do {
        try {
          wait(timeout);
        }
 catch (        InterruptedException e) {
          if (SystemProperties.getBoolean("ro.secure",false)) {
            Log.e("WatchDog","Woof! Woof! Interrupter!");
          }
 else {
            throw new AssertionError("Someone interrupted the watchdog");
          }
        }
        timeout=TIME_TO_WAIT - (SystemClock.uptimeMillis() - start);
      }
 while (timeout > 0 && !mForceKillSystem);
      if (mCompleted && !mForceKillSystem) {
        continue;
      }
    }
    String name=(mCurrentMonitor != null) ? mCurrentMonitor.getClass().getName() : "null";
    EventLog.writeEvent(EVENT_LOG_TAG,name);
    Process.sendSignal(Process.myPid(),Process.SIGNAL_QUIT);
    try {
      Thread.sleep(10 * 1000);
    }
 catch (    InterruptedException e) {
    }
    if (!Debug.isDebuggerConnected()) {
      Log.i(TAG,"Watchdog is killing the system process");
      Process.killProcess(Process.myPid());
    }
  }
}
