{
  if (mTouchedRipples == null) {
    mTouchedRipples=new SparseArray<Ripple>();
    mActiveRipples=new Ripple[MAX_RIPPLES];
  }
  final Ripple ripple=mTouchedRipples.get(id);
  if (ripple == null) {
    final Rect bounds=getBounds();
    final Rect padding=mPaddingRect;
    getPadding(padding);
    if (mState.mPinned) {
      x=bounds.exactCenterX();
      y=bounds.exactCenterY();
    }
    final boolean pulse=(id != R.attr.state_focused);
    final Ripple newRipple=new Ripple(bounds,padding,x,y,mDensity,pulse);
    newRipple.animate().enter();
    mActiveRipples[mActiveRipplesCount++]=newRipple;
    mTouchedRipples.put(id,newRipple);
  }
 else   if (!mState.mPinned) {
    ripple.move(x,y);
  }
  scheduleAnimation();
}
