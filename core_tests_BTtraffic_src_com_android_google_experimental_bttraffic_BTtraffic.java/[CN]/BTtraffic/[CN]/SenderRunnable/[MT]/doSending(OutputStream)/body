{
  Log.w(TAG,"doSending");
  try {
    Random random=new Random(System.currentTimeMillis());
    byte[] bytes=new byte[pkgsize];
    random.nextBytes(bytes);
    while (!Thread.interrupted()) {
      writeBytes(outputStream,bytes.length);
      outputStream.write(bytes,0,bytes.length);
      if (period < 0)       break;
      if (period == 0)       continue;
      SystemClock.sleep(period);
    }
    Log.d(TAG,"Sender interrupted");
  }
 catch (  IOException e) {
    Log.d(TAG,"doSending got error",e);
  }
}
