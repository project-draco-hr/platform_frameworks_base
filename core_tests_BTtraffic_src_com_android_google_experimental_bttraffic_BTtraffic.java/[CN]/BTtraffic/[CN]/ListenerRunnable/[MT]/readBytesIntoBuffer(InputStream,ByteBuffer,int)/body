{
  byteBuffer.clear();
  while (true) {
    int position=byteBuffer.position();
    int remaining=numToRead - position;
    if (remaining == 0) {
      break;
    }
    int count=inputStream.read(byteBuffer.array(),position,remaining);
    if (count < 0) {
      throw new IOException("read the EOF");
    }
    byteBuffer.position(position + count);
  }
}
