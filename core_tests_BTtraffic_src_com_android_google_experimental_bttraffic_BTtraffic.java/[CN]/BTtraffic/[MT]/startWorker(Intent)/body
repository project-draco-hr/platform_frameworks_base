{
  if (mWorkerThread != null) {
    Log.d(TAG,"worker thread already active");
    return;
  }
  isShuttingDown=false;
  String remoteAddr=intent.getStringExtra("addr");
  Log.d(TAG,"startWorker: addr=" + remoteAddr);
  Runnable worker=remoteAddr == null ? new ListenerRunnable(this,intent) : new SenderRunnable(this,remoteAddr,intent);
  isServer=remoteAddr == null ? true : false;
  mWorkerThread=new Thread(worker,"BTtrafficWorker");
  try {
    startMonitor();
    Log.d(TAG,"Monitor service started");
    mWorkerThread.start();
    Log.d(TAG,"Worker thread started");
  }
 catch (  Exception e) {
    Log.d(TAG,"Failed to start service",e);
  }
}
