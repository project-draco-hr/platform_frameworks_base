{
  mCallback=callback;
  mContext=context;
  mPm=pm;
  mHandler=new Handler(looper,mHandlerCallback);
  this.sessionId=sessionId;
  this.userId=userId;
  this.installerPackageName=installerPackageName;
  this.installerUid=installerUid;
  this.params=params;
  this.createdMillis=createdMillis;
  this.stageDir=stageDir;
  this.stageCid=stageCid;
  if ((stageDir == null) == (stageCid == null)) {
    throw new IllegalArgumentException("Exactly one of stageDir or stageCid stage must be set");
  }
  mPrepared=prepared;
  mSealed=sealed;
  DevicePolicyManager dpm=(DevicePolicyManager)mContext.getSystemService(Context.DEVICE_POLICY_SERVICE);
  final boolean isPermissionGranted=(mPm.checkUidPermission(android.Manifest.permission.INSTALL_PACKAGES,installerUid) == PackageManager.PERMISSION_GRANTED);
  final boolean isInstallerRoot=(installerUid == Process.ROOT_UID);
  final boolean forcePermissionPrompt=(params.installFlags & PackageManager.INSTALL_FORCE_PERMISSION_PROMPT) != 0;
  mIsInstallerDeviceOwner=(dpm != null) && dpm.isDeviceOwnerAppOnCallingUser(installerPackageName);
  if ((isPermissionGranted || isInstallerRoot || mIsInstallerDeviceOwner) && !forcePermissionPrompt) {
    mPermissionsAccepted=true;
  }
 else {
    mPermissionsAccepted=false;
  }
}
