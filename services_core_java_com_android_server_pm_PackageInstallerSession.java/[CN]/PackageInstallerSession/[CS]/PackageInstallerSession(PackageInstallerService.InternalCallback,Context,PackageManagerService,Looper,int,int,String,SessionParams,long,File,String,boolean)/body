{
  mCallback=callback;
  mContext=context;
  mPm=pm;
  mHandler=new Handler(looper,mHandlerCallback);
  this.sessionId=sessionId;
  this.userId=userId;
  this.installerPackageName=installerPackageName;
  this.params=params;
  this.createdMillis=createdMillis;
  this.internalStageDir=internalStageDir;
  this.externalStageCid=externalStageCid;
  if ((internalStageDir == null) == (externalStageCid == null)) {
    throw new IllegalArgumentException("Exactly one of internal or external stage must be set");
  }
  mSealed=sealed;
  installerUid=mPm.getPackageUid(installerPackageName,userId);
  if (mPm.checkPermission(android.Manifest.permission.INSTALL_PACKAGES,installerPackageName) == PackageManager.PERMISSION_GRANTED) {
    mPermissionsAccepted=true;
  }
 else {
    mPermissionsAccepted=false;
  }
  computeProgressLocked();
}
