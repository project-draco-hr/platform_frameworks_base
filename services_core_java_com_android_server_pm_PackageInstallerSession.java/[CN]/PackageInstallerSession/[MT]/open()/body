{
  if (mActiveCount.getAndIncrement() == 0) {
    mCallback.onSessionActiveChanged(this,true);
  }
synchronized (mLock) {
    if (!mPrepared) {
      if (stageDir != null) {
        prepareInternalStageDir(stageDir);
      }
 else       if (stageCid != null) {
        prepareExternalStageCid(stageCid,params.sizeBytes);
        mInternalProgress=0.25f;
        computeProgressLocked(true);
      }
 else {
        throw new IllegalArgumentException("Exactly one of stageDir or stageCid stage must be set");
      }
      mPrepared=true;
      mCallback.onSessionPrepared(this);
    }
  }
}
