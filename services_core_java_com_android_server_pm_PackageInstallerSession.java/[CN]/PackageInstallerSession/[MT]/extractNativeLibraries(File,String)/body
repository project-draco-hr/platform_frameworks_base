{
  final File libDir=new File(packageDir,NativeLibraryHelper.LIB_DIR_NAME);
  NativeLibraryHelper.removeNativeBinariesFromDirLI(libDir,true);
  NativeLibraryHelper.Handle handle=null;
  try {
    handle=NativeLibraryHelper.Handle.create(packageDir);
    final int res=NativeLibraryHelper.copyNativeBinariesWithOverride(handle,libDir,abiOverride);
    if (res != PackageManager.INSTALL_SUCCEEDED) {
      throw new PackageManagerException(res,"Failed to extract native libraries, res=" + res);
    }
  }
 catch (  IOException e) {
    throw new PackageManagerException(INSTALL_FAILED_INTERNAL_ERROR,"Failed to extract native libraries",e);
  }
 finally {
    IoUtils.closeQuietly(handle);
  }
}
