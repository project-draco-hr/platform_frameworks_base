{
  if (mRule == null) {
    throw new IllegalArgumentException("Illegal null AudioMixingRule");
  }
  if (mRouteFlags == 0) {
    mRouteFlags=ROUTE_FLAG_RENDER;
  }
  if (mFormat == null) {
    int rate=AudioSystem.getPrimaryOutputSamplingRate();
    if (rate <= 0) {
      rate=44100;
    }
    mFormat=new AudioFormat.Builder().setSampleRate(rate).build();
  }
  return new AudioMix(mRule,mFormat,mRouteFlags,mCallbackFlags);
}
