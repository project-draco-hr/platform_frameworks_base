{
  if (fragment != null) {
    int containerId=fragment.mContainerId;
    if (containerId != 0 && !fragment.isHidden()) {
      if (fragment.isAdded() && fragment.getView() != null && firstOutFragments.get(containerId) == null) {
        firstOutFragments.put(containerId,fragment);
      }
      if (lastInFragments.get(containerId) == fragment) {
        lastInFragments.remove(containerId);
      }
    }
  }
}
