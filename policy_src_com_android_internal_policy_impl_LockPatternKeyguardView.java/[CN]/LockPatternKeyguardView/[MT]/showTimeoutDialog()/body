{
  int timeoutInSeconds=(int)LockPatternUtils.FAILED_ATTEMPT_TIMEOUT_MS / 1000;
  int messageId=R.string.lockscreen_too_many_failed_attempts_dialog_message;
  ;
  if (getUnlockMode() == UnlockMode.Password) {
    if (mLockPatternUtils.getKeyguardStoredPasswordQuality() == DevicePolicyManager.PASSWORD_QUALITY_NUMERIC) {
      messageId=R.string.lockscreen_too_many_failed_pin_attempts_dialog_message;
    }
 else {
      messageId=R.string.lockscreen_too_many_failed_password_attempts_dialog_message;
    }
  }
  String message=mContext.getString(messageId,mUpdateMonitor.getFailedAttempts(),timeoutInSeconds);
  final AlertDialog dialog=new AlertDialog.Builder(mContext).setTitle(null).setMessage(message).setNeutralButton(R.string.ok,null).create();
  dialog.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD_DIALOG);
  if (!mContext.getResources().getBoolean(com.android.internal.R.bool.config_sf_slowBlur)) {
    dialog.getWindow().setFlags(WindowManager.LayoutParams.FLAG_BLUR_BEHIND,WindowManager.LayoutParams.FLAG_BLUR_BEHIND);
  }
  dialog.show();
}
