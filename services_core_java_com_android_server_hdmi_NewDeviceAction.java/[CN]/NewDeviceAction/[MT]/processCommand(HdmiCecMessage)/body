{
  int opcode=cmd.getOpcode();
  int src=cmd.getSource();
  byte[] params=cmd.getParams();
  if (mDeviceLogicalAddress != src) {
    return false;
  }
  if (mState == STATE_WAITING_FOR_SET_OSD_NAME) {
    if (opcode == Constants.MESSAGE_SET_OSD_NAME) {
      try {
        mDisplayName=new String(params,"US-ASCII");
      }
 catch (      UnsupportedEncodingException e) {
        Slog.e(TAG,"Failed to get OSD name: " + e.getMessage());
      }
      requestVendorId(true);
      return true;
    }
 else     if (opcode == Constants.MESSAGE_FEATURE_ABORT) {
      int requestOpcode=params[0] & 0xFF;
      if (requestOpcode == Constants.MESSAGE_GIVE_OSD_NAME) {
        requestVendorId(true);
        return true;
      }
    }
  }
 else   if (mState == STATE_WAITING_FOR_DEVICE_VENDOR_ID) {
    if (opcode == Constants.MESSAGE_DEVICE_VENDOR_ID) {
      mVendorId=HdmiUtils.threeBytesToInt(params);
      addDeviceInfo();
      finish();
      return true;
    }
 else     if (opcode == Constants.MESSAGE_FEATURE_ABORT) {
      int requestOpcode=params[0] & 0xFF;
      if (requestOpcode == Constants.MESSAGE_GIVE_DEVICE_VENDOR_ID) {
        addDeviceInfo();
        finish();
        return true;
      }
    }
  }
  return false;
}
