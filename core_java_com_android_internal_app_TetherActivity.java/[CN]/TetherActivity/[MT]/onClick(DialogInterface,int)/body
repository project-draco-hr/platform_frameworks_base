{
  boolean error=false;
  if (which == POSITIVE_BUTTON) {
    ConnectivityManager cm=(ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
    String[] tethered=cm.getTetheredIfaces();
    if (tethered.length == 0) {
      String[] tetherable=cm.getTetherableIfaces();
      String[] usbRegexs=cm.getTetherableUsbRegexs();
      for (      String t : tetherable) {
        for (        String r : usbRegexs) {
          if (t.matches(r)) {
            if (!cm.tether(t))             error=true;
            break;
          }
        }
      }
      if (error) {
        showTetheringError();
      }
    }
 else {
      for (      String t : tethered) {
        if (!cm.untether("ppp0")) {
          error=true;
        }
      }
      if (error) {
        showUnTetheringError();
      }
    }
  }
  finish();
}
