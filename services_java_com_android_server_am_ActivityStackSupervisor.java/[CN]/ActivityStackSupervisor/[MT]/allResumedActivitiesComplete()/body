{
  for (int stackNdx=mStacks.size() - 1; stackNdx >= 0; --stackNdx) {
    final ActivityStack stack=mStacks.get(stackNdx);
    if (isFrontStack(stack)) {
      final ActivityRecord r=stack.mResumedActivity;
      if (r != null && r.state != ActivityState.RESUMED) {
        return false;
      }
    }
  }
switch (mStackState) {
case STACK_STATE_HOME_TO_BACK:
    mStackState=STACK_STATE_HOME_IN_BACK;
  break;
case STACK_STATE_HOME_TO_FRONT:
mStackState=STACK_STATE_HOME_IN_FRONT;
break;
}
return true;
}
