{
  if (r == null) {
    return;
  }
  if (r.isHomeActivity) {
    if (mStackState != STACK_STATE_HOME_IN_FRONT) {
      mStackState=STACK_STATE_HOME_TO_FRONT;
    }
  }
 else {
    if (r.task.stack == mHomeStack) {
      Slog.e(TAG,"!!! setFocusedStack: home stack used for non-home activity !!!",new RuntimeException("here").fillInStackTrace());
      moveTaskToStack(r.task.taskId,getCorrectStack(r).mStackId,true);
    }
    mFocusedStack=r.task.stack;
    if (mStackState != STACK_STATE_HOME_IN_BACK) {
      mStackState=STACK_STATE_HOME_TO_BACK;
    }
  }
}
