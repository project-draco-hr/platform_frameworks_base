{
synchronized (mSyncRoot) {
    LogicalDisplay display=mLogicalDisplays.get(displayId);
    if (display == null) {
      return;
    }
    if (display.hasContentLocked() != hasContent) {
      if (DEBUG) {
        Slog.d(TAG,"Display " + displayId + " hasContent flag changed: "+ "hasContent="+ hasContent+ ", inTraversal="+ inTraversal);
      }
      display.setHasContentLocked(hasContent);
      scheduleTraversalLocked(inTraversal);
    }
    if (requestedModeId == 0 && requestedRefreshRate != 0) {
      requestedModeId=display.getDisplayInfoLocked().findDefaultModeByRefreshRate(requestedRefreshRate);
    }
    if (display.getRequestedModeIdLocked() != requestedModeId) {
      if (DEBUG) {
        Slog.d(TAG,"Display " + displayId + " switching to mode "+ requestedModeId);
      }
      display.setRequestedModeIdLocked(requestedModeId);
      scheduleTraversalLocked(inTraversal);
    }
  }
}
