{
  WindowManager.LayoutParams lp;
  int pixelFormat;
  Drawable bg;
  pixelFormat=PixelFormat.TRANSLUCENT;
  bg=mExpandedView.getBackground();
  if (bg != null) {
    pixelFormat=bg.getOpacity();
  }
  lp=mExpandedDialog.getWindow().getAttributes();
  lp.width=ViewGroup.LayoutParams.FILL_PARENT;
  lp.height=ViewGroup.LayoutParams.WRAP_CONTENT;
  lp.x=0;
  lp.y=0;
  lp.type=WindowManager.LayoutParams.TYPE_STATUS_BAR_PANEL;
  lp.flags=WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN | WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS | WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL;
  lp.format=pixelFormat;
  lp.gravity=Gravity.TOP | Gravity.FILL_HORIZONTAL;
  lp.setTitle("StatusBarExpanded");
  mExpandedDialog.getWindow().setAttributes(lp);
  mExpandedParams=lp;
  mExpandedDialog.getWindow().requestFeature(Window.FEATURE_NO_TITLE);
  mExpandedDialog.setContentView(mExpandedView,new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT,ViewGroup.LayoutParams.WRAP_CONTENT));
  mExpandedDialog.show();
  mExpandedDialog.hide();
  View hack=(View)mExpandedView.getParent();
}
