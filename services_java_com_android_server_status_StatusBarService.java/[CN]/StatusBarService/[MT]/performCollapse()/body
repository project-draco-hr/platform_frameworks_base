{
  if (SPEW)   Log.d(TAG,"Perform collapse: expanded=" + mExpanded + " expanded visible="+ mExpandedVisible);
  if (!mExpandedVisible) {
    return;
  }
  mExpandedVisible=false;
  panelSlightlyVisible(false);
  mExpandedParams.flags|=WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE;
  mExpandedParams.flags&=~WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM;
  mExpandedDialog.getWindow().setAttributes(mExpandedParams);
  mTrackingView.setVisibility(View.GONE);
  if ((mDisabled & StatusBarManager.DISABLE_NOTIFICATION_ICONS) == 0) {
    setNotificationIconVisibility(true,com.android.internal.R.anim.fade_in);
  }
  setDateViewVisibility(false,com.android.internal.R.anim.fade_out);
  if (!mExpanded) {
    return;
  }
  mExpanded=false;
}
