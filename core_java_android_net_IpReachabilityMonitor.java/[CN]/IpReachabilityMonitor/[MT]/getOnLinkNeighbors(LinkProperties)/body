{
  Set<InetAddress> allIps=new HashSet<InetAddress>();
  final List<RouteInfo> routes=lp.getRoutes();
  for (  RouteInfo route : routes) {
    if (route.hasGateway()) {
      allIps.add(route.getGateway());
    }
  }
  for (  InetAddress nameserver : lp.getDnsServers()) {
    allIps.add(nameserver);
  }
  try {
    allIps.add(NetworkUtils.numericToInetAddress(lp.getHttpProxy().getHost()));
  }
 catch (  NullPointerException|IllegalArgumentException e) {
  }
  Set<InetAddress> neighbors=new HashSet<InetAddress>();
  for (  InetAddress ip : allIps) {
    for (    RouteInfo route : routes) {
      if (route.hasGateway()) {
        continue;
      }
      if (route.matches(ip)) {
        neighbors.add(ip);
        break;
      }
    }
  }
  return neighbors;
}
