{
  if (DBG) {
    Log.d(TAG,"Probing ip=" + ip.getHostAddress());
  }
  final byte[] msg=RtNetlinkNeighborMessage.newNewNeighborMessage(1,ip,StructNdMsg.NUD_DELAY,mInterfaceIndex,null);
  NetlinkSocket nlSocket=null;
  try {
    nlSocket=new NetlinkSocket(OsConstants.NETLINK_ROUTE);
    nlSocket.connectToKernel();
    nlSocket.sendMessage(msg,0,msg.length,300);
    final NetlinkMessage response=NetlinkMessage.parse(nlSocket.recvMessage(300));
    if (response != null && response instanceof NetlinkErrorMessage) {
      Log.e(TAG,"Error probing ip=" + response.toString());
    }
  }
 catch (  ErrnoException|InterruptedIOException|SocketException e) {
    Log.d(TAG,"Error probing ip=" + ip.getHostAddress(),e);
  }
  if (nlSocket != null) {
    nlSocket.close();
  }
}
