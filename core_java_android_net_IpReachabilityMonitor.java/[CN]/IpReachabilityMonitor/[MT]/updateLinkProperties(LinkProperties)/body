{
  if (!mInterfaceName.equals(lp.getInterfaceName())) {
    Log.wtf(TAG,"requested LinkProperties interface '" + lp.getInterfaceName() + "' does not match: "+ mInterfaceName);
    return;
  }
synchronized (mLock) {
    mLinkProperties=new LinkProperties(lp);
    Map<InetAddress,Short> newIpWatchList=new HashMap<>();
    final List<RouteInfo> routes=mLinkProperties.getRoutes();
    for (    RouteInfo route : routes) {
      if (route.hasGateway()) {
        InetAddress gw=route.getGateway();
        if (isOnLink(routes,gw)) {
          newIpWatchList.put(gw,getNeighborStateLocked(gw));
        }
      }
    }
    for (    InetAddress nameserver : lp.getDnsServers()) {
      if (isOnLink(routes,nameserver)) {
        newIpWatchList.put(nameserver,getNeighborStateLocked(nameserver));
      }
    }
    mIpWatchList=newIpWatchList;
    mIpWatchListVersion++;
  }
  if (DBG) {
    Log.d(TAG,"watch: " + describeWatchList());
  }
}
