{
  RelativeLayout.LayoutParams lp=(LayoutParams)mSystemIconsSuperContainer.getLayoutParams();
  boolean systemIconsAboveClock=mExpanded && !mOverscrolled && mShowChargingInfo&& !mShowEmergencyCallsOnly;
  lp.setMarginEnd(0);
  if (systemIconsAboveClock) {
    lp.addRule(ALIGN_PARENT_START);
    lp.removeRule(START_OF);
  }
 else {
    lp.addRule(RelativeLayout.START_OF,mExpanded ? mSettingsButton.getId() : mMultiUserSwitch.getId());
    lp.removeRule(ALIGN_PARENT_START);
    if (mMultiUserSwitch.getVisibility() == GONE) {
      lp.setMarginEnd(mSystemIconsSwitcherHiddenExpandedMargin);
    }
  }
  mSystemIconsSuperContainer.setLayoutParams(lp);
  RelativeLayout.LayoutParams clockLp=(LayoutParams)mDateTime.getLayoutParams();
  if (systemIconsAboveClock) {
    clockLp.addRule(BELOW,mChargingInfo.getId());
  }
 else {
    clockLp.addRule(BELOW,mEmergencyCallsOnly.getId());
  }
  mDateTime.setLayoutParams(clockLp);
}
