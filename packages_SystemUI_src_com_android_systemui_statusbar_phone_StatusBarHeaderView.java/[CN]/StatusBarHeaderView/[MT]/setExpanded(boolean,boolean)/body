{
  boolean changed=expanded != mExpanded;
  boolean overscrollChanged=overscrolled != mOverscrolled;
  mExpanded=expanded;
  mOverscrolled=overscrolled;
  if (changed || overscrollChanged) {
    updateHeights();
    updateVisibilities();
    updateSystemIconsLayoutParams();
    updateZTranslation();
    updateClickTargets();
    updateWidth();
    updatePadding();
    updateMultiUserSwitch();
    if (mQSPanel != null) {
      mQSPanel.setExpanded(expanded && !overscrolled);
    }
    updateClockScale();
    updateAvatarScale();
    updateClockLp();
    updateBatteryLevelPaddingEnd();
    mStatusIconClipper.update();
  }
}
