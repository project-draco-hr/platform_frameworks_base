{
  boolean changed=expanded != mExpanded;
  boolean overscrollChanged=overscrolled != mOverscrolled;
  mExpanded=expanded;
  mOverscrolled=overscrolled;
  if (changed || overscrollChanged) {
    updateHeights();
    updateVisibilities();
    updateSystemIconsLayoutParams();
    updateBrightnessControllerState();
    updateZTranslation();
    updateClickTargets();
    if (mQSPanel != null) {
      mQSPanel.setExpanded(expanded && !overscrolled);
    }
  }
}
