{
  int id=rs.nMeshCreate(b.mVertexTypeCount,b.mIndexTypes.size());
  Mesh newMesh=new Mesh(id,rs);
  newMesh.mIndexBuffers=new Allocation[b.mIndexTypes.size()];
  newMesh.mPrimitives=new Primitive[b.mIndexTypes.size()];
  newMesh.mVertexBuffers=new Allocation[b.mVertexTypeCount];
  for (int ct=0; ct < b.mIndexTypes.size(); ct++) {
    Entry entry=(Entry)b.mIndexTypes.elementAt(ct);
    int allocID=(entry.a == null) ? 0 : entry.a.getID();
    rs.nMeshBindIndex(id,allocID,entry.prim.mID,ct);
    newMesh.mIndexBuffers[ct]=entry.a;
    newMesh.mPrimitives[ct]=entry.prim;
  }
  for (int ct=0; ct < b.mVertexTypeCount; ct++) {
    Entry entry=b.mVertexTypes[ct];
    rs.nMeshBindVertex(id,entry.a.mID,ct);
    newMesh.mVertexBuffers[ct]=entry.a;
  }
  rs.nMeshInitVertexAttribs(id);
  return newMesh;
}
