{
  final boolean usingLegacyDhcp=(Settings.Global.getInt(mContext.getContentResolver(),Settings.Global.LEGACY_DHCP_CLIENT,0) == 1);
  if (usingLegacyDhcp) {
    mDhcpStateMachine=DhcpStateMachine.makeDhcpStateMachine(mContext,IpManager.this,mInterfaceName);
  }
 else {
    mDhcpStateMachine=DhcpClient.makeDhcpStateMachine(mContext,IpManager.this,mInterfaceName);
  }
}
