{
  super(IpManager.class.getSimpleName() + "." + ifName);
  mTag=getName();
  mContext=context;
  mInterfaceName=ifName;
  mCallback=callback;
  mNwService=INetworkManagementService.Stub.asInterface(ServiceManager.getService(Context.NETWORKMANAGEMENT_SERVICE));
  mNetlinkTracker=new NetlinkTracker(mInterfaceName,new NetlinkTracker.Callback(){
    @Override public void update(){
      sendMessage(EVENT_NETLINK_LINKPROPERTIES_CHANGED);
    }
  }
);
  try {
    mNwService.registerObserver(mNetlinkTracker);
  }
 catch (  RemoteException e) {
    Log.e(mTag,"Couldn't register NetlinkTracker: " + e.toString());
  }
  resetLinkProperties();
  addState(mStoppedState);
  addState(mStartedState);
  addState(mStoppingState);
  setInitialState(mStoppedState);
  setLogRecSize(MAX_LOG_RECORDS);
  super.start();
}
