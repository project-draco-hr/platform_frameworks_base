{
  super((ellipsize == null) ? source : (source instanceof Spanned) ? new SpannedEllipsizer(source) : new Ellipsizer(source),paint,outerwidth,align,textDir,spacingmult,spacingadd);
  if (ellipsize != null) {
    Ellipsizer e=(Ellipsizer)getText();
    e.mLayout=this;
    e.mWidth=ellipsizedWidth;
    e.mMethod=ellipsize;
    mEllipsizedWidth=ellipsizedWidth;
    mColumns=COLUMNS_ELLIPSIZE;
  }
 else {
    mColumns=COLUMNS_NORMAL;
    mEllipsizedWidth=outerwidth;
  }
  mLines=new int[ArrayUtils.idealIntArraySize(2 * mColumns)];
  mLineDirections=new Directions[ArrayUtils.idealIntArraySize(2 * mColumns)];
  mMaximumVisibleLineCount=maxLines;
  mMeasured=MeasuredText.obtain();
  generate(source,bufstart,bufend,paint,outerwidth,align,textDir,spacingmult,spacingadd,includepad,includepad,ellipsizedWidth,ellipsize,mMaximumVisibleLineCount);
  mMeasured=MeasuredText.recycle(mMeasured);
  mFontMetricsInt=null;
}
