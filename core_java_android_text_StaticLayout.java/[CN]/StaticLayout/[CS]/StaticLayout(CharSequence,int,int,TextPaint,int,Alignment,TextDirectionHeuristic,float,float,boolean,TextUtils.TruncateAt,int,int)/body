{
  super((ellipsize == null) ? source : (source instanceof Spanned) ? new SpannedEllipsizer(source) : new Ellipsizer(source),paint,outerwidth,align,textDir,spacingmult,spacingadd);
  Builder b=Builder.obtain();
  b.setText(source,bufstart,bufend).setPaint(paint).setWidth(outerwidth).setTextDir(textDir).setSpacingMult(spacingmult).setSpacingAdd(spacingadd).setIncludePad(includepad).setEllipsizedWidth(ellipsizedWidth).setEllipsize(ellipsize).setMaxLines(maxLines);
  if (ellipsize != null) {
    Ellipsizer e=(Ellipsizer)getText();
    e.mLayout=this;
    e.mWidth=ellipsizedWidth;
    e.mMethod=ellipsize;
    mEllipsizedWidth=ellipsizedWidth;
    mColumns=COLUMNS_ELLIPSIZE;
  }
 else {
    mColumns=COLUMNS_NORMAL;
    mEllipsizedWidth=outerwidth;
  }
  mLineDirections=ArrayUtils.newUnpaddedArray(Directions.class,2 * mColumns);
  mLines=new int[mLineDirections.length];
  mMaximumVisibleLineCount=maxLines;
  initFromBuilder(b);
  Builder.recycle(b);
}
