{
  Set<String> filterOutputs=new HashSet<String>();
  filterOutputs.addAll(filter.getConnectedOutputPortMap().keySet());
  if (mOutputPorts != null) {
    for (    Entry<String,PortInfo> entry : mOutputPorts.entrySet()) {
      String portName=entry.getKey();
      PortInfo portInfo=entry.getValue();
      OutputPort outputPort=filter.getConnectedOutputPort(portName);
      if (outputPort == null && portInfo.isRequired()) {
        throw new RuntimeException("Filter " + filter + " does not have required "+ "output port '"+ portName+ "'!");
      }
      filterOutputs.remove(portName);
    }
  }
  if (!mAllowOtherOutputs && !filterOutputs.isEmpty()) {
    throw new RuntimeException("Filter " + filter + " has invalid output ports: "+ filterOutputs+ "!");
  }
}
