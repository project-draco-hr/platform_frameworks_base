{
  if (w <= 0 || h <= 0) {
    throw new RasterFormatException(Messages.getString("awt.22E"));
  }
  if (location == null) {
    location=new Point(0,0);
  }
  if ((long)location.x + w > Integer.MAX_VALUE || (long)location.y + h > Integer.MAX_VALUE) {
    throw new RasterFormatException(Messages.getString("awt.276"));
  }
  if (bankIndices == null || bandOffsets == null) {
    throw new ArrayIndexOutOfBoundsException(Messages.getString("awt.277"));
  }
  if (dataType != DataBuffer.TYPE_BYTE && dataType != DataBuffer.TYPE_USHORT && dataType != DataBuffer.TYPE_INT) {
    throw new IllegalArgumentException(Messages.getString("awt.230"));
  }
  int maxOffset=bandOffsets[0];
  int maxBank=bankIndices[0];
  for (int i=0; i < bankIndices.length; i++) {
    if (bandOffsets[i] > maxOffset) {
      maxOffset=bandOffsets[i];
    }
    if (bankIndices[i] > maxBank) {
      maxBank=bankIndices[i];
    }
  }
  int numBanks=maxBank + 1;
  int dataSize=scanlineStride * (h - 1) + w + maxOffset;
  DataBuffer data=null;
switch (dataType) {
case DataBuffer.TYPE_BYTE:
    data=new DataBufferByte(dataSize,numBanks);
  break;
case DataBuffer.TYPE_USHORT:
data=new DataBufferUShort(dataSize,numBanks);
break;
case DataBuffer.TYPE_INT:
data=new DataBufferInt(dataSize,numBanks);
break;
}
return createBandedRaster(data,w,h,scanlineStride,bankIndices,bandOffsets,location);
}
