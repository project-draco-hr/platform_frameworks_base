{
  while (true) {
    if (mCancelled) {
      mContext=null;
synchronized (mLoadThread) {
        try {
          mLoadThread.wait();
        }
 catch (        InterruptedException ie) {
          ie.printStackTrace();
        }
      }
    }
 else {
      SystemServicesProxy ssp=mSystemServicesProxy;
      final Task t=mLoadQueue.nextTask();
      if (t != null) {
        Drawable cachedIcon=mApplicationIconCache.getCheckLastActiveTime(t.key);
        Bitmap cachedThumbnail=mThumbnailCache.getCheckLastActiveTime(t.key);
        if (cachedIcon == null) {
          Drawable icon=null;
          ActivityInfo info=ssp.getActivityInfo(t.key.baseIntent.getComponent(),t.userId);
          if (info != null) {
            icon=ssp.getActivityIcon(info,t.userId);
          }
          cachedIcon=icon != null ? icon : mDefaultApplicationIcon;
          mApplicationIconCache.put(t.key,cachedIcon);
        }
        if (cachedThumbnail == null) {
          Bitmap thumbnail=ssp.getTaskThumbnail(t.key.id);
          if (thumbnail != null) {
            thumbnail.setHasAlpha(false);
          }
          cachedThumbnail=thumbnail != null ? thumbnail : mDefaultThumbnail;
          mThumbnailCache.put(t.key,cachedThumbnail);
        }
        if (!mCancelled) {
          final Drawable newIcon=cachedIcon;
          final Bitmap newThumbnail=cachedThumbnail;
          mMainThreadHandler.post(new Runnable(){
            @Override public void run(){
              t.notifyTaskDataLoaded(newThumbnail,newIcon);
            }
          }
);
        }
      }
      if (!mCancelled && mLoadQueue.isEmpty()) {
synchronized (mLoadQueue) {
          try {
            mWaitingOnLoadQueue=true;
            mLoadQueue.wait();
            mWaitingOnLoadQueue=false;
          }
 catch (          InterruptedException ie) {
            ie.printStackTrace();
          }
        }
      }
    }
  }
}
