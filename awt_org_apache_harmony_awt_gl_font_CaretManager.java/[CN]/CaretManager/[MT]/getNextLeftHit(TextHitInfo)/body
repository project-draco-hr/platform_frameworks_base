{
  checkHit(hitInfo);
  int visual=getVisualFromHitInfo(hitInfo);
  if (visual == 0) {
    return null;
  }
  TextHitInfo newInfo;
  while (visual >= 0) {
    visual--;
    newInfo=getHitInfoFromVisual(visual);
    if (newInfo.getCharIndex() < 0) {
      return newInfo;
    }
    if (hitInfo.getCharIndex() < breaker.logical2segment.length) {
      if (breaker.logical2segment[newInfo.getCharIndex()] != breaker.logical2segment[hitInfo.getCharIndex()]) {
        return newInfo;
      }
    }
    TextRunSegment seg=breaker.runSegments.get(breaker.logical2segment[newInfo.getCharIndex()]);
    if (!seg.charHasZeroAdvance(newInfo.getCharIndex())) {
      return newInfo;
    }
  }
  return null;
}
