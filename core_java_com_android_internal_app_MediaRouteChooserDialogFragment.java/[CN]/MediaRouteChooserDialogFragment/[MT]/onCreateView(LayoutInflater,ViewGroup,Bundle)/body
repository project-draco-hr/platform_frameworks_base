{
  mInflater=inflater;
  final View layout=inflater.inflate(R.layout.media_route_chooser_layout,container,false);
  final View extendedSettingsButton=layout.findViewById(R.id.extended_settings);
  if (mExtendedSettingsListener != null) {
    extendedSettingsButton.setVisibility(View.VISIBLE);
    extendedSettingsButton.setOnClickListener(mExtendedSettingsListener);
  }
  final ListView list=(ListView)layout.findViewById(R.id.list);
  list.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
  list.setItemsCanFocus(true);
  list.setAdapter(mAdapter=new RouteAdapter());
  list.setItemChecked(mAdapter.getSelectedRoutePosition(),true);
  list.setOnItemClickListener(mAdapter);
  mListView=list;
  mRouter.addCallback(mRouteTypes,mAdapter.mCallback);
  return layout;
}
