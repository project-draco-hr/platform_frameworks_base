{
  mInflater=inflater;
  final View layout=inflater.inflate(R.layout.media_route_chooser_layout,container,false);
  mVolumeIcon=(ImageView)layout.findViewById(R.id.volume_icon);
  mVolumeSlider=(SeekBar)layout.findViewById(R.id.volume_slider);
  updateVolume();
  mVolumeSlider.setOnSeekBarChangeListener(new VolumeSliderChangeListener());
  if (mExtendedSettingsListener != null) {
    final View extendedSettingsButton=layout.findViewById(R.id.extended_settings);
    extendedSettingsButton.setVisibility(View.VISIBLE);
    extendedSettingsButton.setOnClickListener(mExtendedSettingsListener);
  }
  final ListView list=(ListView)layout.findViewById(R.id.list);
  list.setItemsCanFocus(true);
  list.setAdapter(mAdapter=new RouteAdapter());
  list.setOnItemClickListener(mAdapter);
  mListView=list;
  mRouter.addCallback(mRouteTypes,mCallback);
  mAdapter.scrollToSelectedItem();
  return layout;
}
