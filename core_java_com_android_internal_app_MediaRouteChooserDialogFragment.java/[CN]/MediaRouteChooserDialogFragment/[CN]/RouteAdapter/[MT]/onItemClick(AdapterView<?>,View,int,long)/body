{
  final int type=getItemViewType(position);
  if (type == VIEW_SECTION_HEADER || type == VIEW_TOP_HEADER) {
    return;
  }
 else   if (type == VIEW_GROUPING_DONE) {
    finishGrouping();
    return;
  }
 else {
    final Object item=getItem(position);
    if (!(item instanceof RouteInfo)) {
      return;
    }
    final RouteInfo route=(RouteInfo)item;
    if (type == VIEW_ROUTE) {
      mRouter.selectRouteInt(mRouteTypes,route,true);
      dismiss();
    }
 else     if (type == VIEW_GROUPING_ROUTE) {
      final Checkable c=(Checkable)view;
      final boolean wasChecked=c.isChecked();
      mIgnoreUpdates=true;
      RouteGroup oldGroup=route.getGroup();
      if (!wasChecked && oldGroup != mEditingGroup) {
        if (mRouter.getSelectedRoute(mRouteTypes) == oldGroup) {
          mRouter.selectRouteInt(mRouteTypes,mEditingGroup,true);
        }
        oldGroup.removeRoute(route);
        mEditingGroup.addRoute(route);
        c.setChecked(true);
      }
 else       if (wasChecked && mEditingGroup.getRouteCount() > 1) {
        mEditingGroup.removeRoute(route);
        mRouter.addRouteInt(route);
      }
      mIgnoreUpdates=false;
      update();
    }
  }
}
