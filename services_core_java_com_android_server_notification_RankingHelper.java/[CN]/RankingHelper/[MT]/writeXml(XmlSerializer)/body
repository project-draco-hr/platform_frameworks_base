{
  out.startTag(null,TAG_RANKING);
  out.attribute(null,ATT_VERSION,Integer.toString(XML_VERSION));
  final int N=mPackagePriorities.size();
  for (int i=0; i < N; i++) {
    String name=mPackagePriorities.keyAt(i);
    SparseIntArray priorityByUid=mPackagePriorities.get(name);
    final int M=priorityByUid.size();
    for (int j=0; j < M; j++) {
      int uid=priorityByUid.keyAt(j);
      int priority=priorityByUid.get(uid);
      out.startTag(null,TAG_PACKAGE);
      out.attribute(null,ATT_NAME,name);
      out.attribute(null,ATT_UID,Integer.toString(uid));
      out.attribute(null,ATT_PRIORITY,Integer.toString(priority));
      out.endTag(null,TAG_PACKAGE);
    }
  }
  out.endTag(null,TAG_RANKING);
}
