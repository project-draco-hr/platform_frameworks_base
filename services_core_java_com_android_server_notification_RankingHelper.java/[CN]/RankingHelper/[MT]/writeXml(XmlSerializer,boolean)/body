{
  out.startTag(null,TAG_RANKING);
  out.attribute(null,ATT_VERSION,Integer.toString(XML_VERSION));
  final int N=mRecords.size();
  for (int i=0; i < N; i++) {
    final Record r=mRecords.valueAt(i);
    if (forBackup && UserHandle.getUserId(r.uid) != UserHandle.USER_SYSTEM) {
      continue;
    }
    out.startTag(null,TAG_PACKAGE);
    out.attribute(null,ATT_NAME,r.pkg);
    if (!forBackup) {
      out.attribute(null,ATT_UID,Integer.toString(r.uid));
    }
    writeTopicsXml(out,r);
    out.endTag(null,TAG_PACKAGE);
  }
  out.endTag(null,TAG_RANKING);
}
