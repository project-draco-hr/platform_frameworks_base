{
  final int innerDepth=parser.getDepth();
  int type;
  while ((type=parser.next()) != XmlPullParser.END_DOCUMENT && (type != XmlPullParser.END_TAG || parser.getDepth() > innerDepth)) {
    if (type == XmlPullParser.END_TAG || type == XmlPullParser.TEXT) {
      continue;
    }
    String tagName=parser.getName();
    if (TAG_TOPIC.equals(tagName)) {
      int priority=safeInt(parser,ATT_PRIORITY,DEFAULT_PRIORITY);
      int vis=safeInt(parser,ATT_VISIBILITY,DEFAULT_VISIBILITY);
      String id=parser.getAttributeValue(null,ATT_TOPIC_ID);
      CharSequence label=parser.getAttributeValue(null,ATT_TOPIC_LABEL);
      if (!TextUtils.isEmpty(id)) {
        Topic topic=new Topic(new Notification.Topic(id,label));
        if (priority != DEFAULT_PRIORITY) {
          topic.priority=priority;
        }
        if (vis != DEFAULT_VISIBILITY) {
          topic.visibility=vis;
        }
        r.topics.put(id,topic);
      }
    }
  }
}
