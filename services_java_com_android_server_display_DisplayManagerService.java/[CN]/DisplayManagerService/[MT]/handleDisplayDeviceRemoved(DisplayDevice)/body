{
synchronized (mLock) {
    if (!mDisplayDevices.remove(device)) {
      Slog.w(TAG,"Attempted to remove non-existent display device: " + device);
      return;
    }
    for (int i=mLogicalDisplays.size(); i-- > 0; ) {
      LogicalDisplay display=mLogicalDisplays.valueAt(i);
      if (display.mPrimaryDisplayDevice == device) {
        final int displayId=mLogicalDisplays.keyAt(i);
        mLogicalDisplays.removeAt(i);
        sendDisplayEventLocked(displayId,DisplayManagerGlobal.EVENT_DISPLAY_REMOVED);
      }
    }
  }
}
