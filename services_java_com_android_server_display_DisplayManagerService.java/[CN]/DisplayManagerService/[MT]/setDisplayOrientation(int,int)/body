{
synchronized (mLock) {
    LogicalDisplay display=mLogicalDisplays.get(displayId);
    if (display != null && display.mPrimaryDisplayDevice != null) {
      IBinder displayToken=display.mPrimaryDisplayDevice.getDisplayToken();
      if (displayToken != null) {
        Surface.openTransaction();
        try {
          Surface.setDisplayOrientation(displayToken,orientation);
        }
  finally {
          Surface.closeTransaction();
        }
      }
      display.mBaseDisplayInfo.rotation=orientation;
      sendDisplayEventLocked(displayId,DisplayManagerGlobal.EVENT_DISPLAY_CHANGED);
    }
  }
}
