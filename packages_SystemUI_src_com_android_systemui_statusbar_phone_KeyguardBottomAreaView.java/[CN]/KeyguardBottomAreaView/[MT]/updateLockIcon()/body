{
  boolean visible=isShown() && KeyguardUpdateMonitor.getInstance(mContext).isScreenOn();
  if (visible) {
    mTrustDrawable.start();
  }
 else {
    mTrustDrawable.stop();
  }
  if (!visible) {
    return;
  }
  boolean isFingerprintIcon=KeyguardUpdateMonitor.getInstance(mContext).isFingerprintDetectionRunning();
  boolean anyFingerprintIcon=isFingerprintIcon || mTransientFpError;
  int iconRes=mTransientFpError ? R.drawable.ic_fingerprint_error : isFingerprintIcon ? R.drawable.ic_fingerprint : mUnlockMethodCache.isFaceUnlockRunning() ? com.android.internal.R.drawable.ic_account_circle : mUnlockMethodCache.isCurrentlyInsecure() ? R.drawable.ic_lock_open_24dp : R.drawable.ic_lock_24dp;
  if (mLastUnlockIconRes != iconRes) {
    Drawable icon=mContext.getDrawable(iconRes);
    int iconHeight=getResources().getDimensionPixelSize(R.dimen.keyguard_affordance_icon_height);
    int iconWidth=getResources().getDimensionPixelSize(R.dimen.keyguard_affordance_icon_width);
    if (!anyFingerprintIcon && (icon.getIntrinsicHeight() != iconHeight || icon.getIntrinsicWidth() != iconWidth)) {
      icon=new IntrinsicSizeDrawable(icon,iconWidth,iconHeight);
    }
    mLockIcon.setImageDrawable(icon);
    mLockIcon.setPaddingRelative(0,0,0,anyFingerprintIcon ? getResources().getDimensionPixelSize(R.dimen.fingerprint_icon_additional_padding) : 0);
    mLockIcon.setRestingAlpha(anyFingerprintIcon ? 1f : KeyguardAffordanceHelper.SWIPE_RESTING_ALPHA_AMOUNT);
  }
  boolean trustManaged=mUnlockMethodCache.isTrustManaged() && !anyFingerprintIcon;
  mTrustDrawable.setTrustManaged(trustManaged);
  updateLockIconClickability();
}
