{
  Intent intent=getCameraIntent();
  ActivityInfo targetInfo=PreviewInflater.getTargetActivityInfo(mContext,intent,KeyguardUpdateMonitor.getCurrentUser());
  if (targetInfo != null && targetInfo.metaData != null) {
    String clazz=targetInfo.metaData.getString(MediaStore.META_DATA_STILL_IMAGE_CAMERA_PREWARM_SERVICE);
    if (clazz != null) {
      Intent serviceIntent=new Intent();
      serviceIntent.setClassName(targetInfo.packageName,clazz);
      serviceIntent.setAction(CameraPrewarmService.ACTION_PREWARM);
      try {
        if (getContext().bindServiceAsUser(serviceIntent,mPrewarmConnection,Context.BIND_AUTO_CREATE | Context.BIND_FOREGROUND_SERVICE,new UserHandle(UserHandle.USER_CURRENT))) {
          mPrewarmBound=true;
        }
      }
 catch (      SecurityException e) {
        Log.w(TAG,"Unable to bind to prewarm service package=" + targetInfo.packageName + " class="+ clazz,e);
      }
    }
  }
}
