{
  assertRunOnServiceThread();
  if (getActivePortId() != Constants.INVALID_PORT_ID) {
    if (!routingForBootup && !isProhibitMode()) {
      removeAction(RoutingControlAction.class);
      int newPath=mService.portIdToPath(getActivePortId());
      setActivePath(newPath);
      mService.sendCecCommand(HdmiCecMessageBuilder.buildRoutingChange(mAddress,getActivePath(),newPath));
      addAndStartAction(new RoutingControlAction(this,getActivePortId(),routingForBootup,null));
    }
  }
 else {
    int activePath=mService.getPhysicalAddress();
    setActivePath(activePath);
    if (!routingForBootup) {
      mService.sendCecCommand(HdmiCecMessageBuilder.buildActiveSource(mAddress,activePath));
    }
  }
}
