{
  assertRunOnServiceThread();
  if (getActiveSource().logicalAddress != message.getSource()) {
    return true;
  }
  if (isProhibitMode()) {
    return true;
  }
  int portId=getPrevPortId();
  if (portId != Constants.INVALID_PORT_ID) {
    HdmiDeviceInfo inactiveSource=getCecDeviceInfo(message.getSource());
    if (inactiveSource == null) {
      return true;
    }
    if (mService.pathToPortId(inactiveSource.getPhysicalAddress()) == portId) {
      return true;
    }
    doManualPortSwitching(portId,null);
    setPrevPortId(Constants.INVALID_PORT_ID);
  }
 else {
    mActiveSource.invalidate();
    setActivePath(Constants.INVALID_PHYSICAL_ADDRESS);
    mService.invokeInputChangeListener(HdmiDeviceInfo.INACTIVE_DEVICE);
  }
  return true;
}
