{
  assertRunOnServiceThread();
  List<HdmiPortInfo> ports=mService.getPortInfo();
  for (  HdmiPortInfo port : ports) {
    mArcFeatureEnabled.put(port.getId(),port.isArcSupported());
  }
  mService.registerTvInputCallback(mTvInputCallback);
  mService.sendCecCommand(HdmiCecMessageBuilder.buildReportPhysicalAddressCommand(mAddress,mService.getPhysicalAddress(),mDeviceType));
  mService.sendCecCommand(HdmiCecMessageBuilder.buildDeviceVendorIdCommand(mAddress,mService.getVendorId()));
  mCecSwitches.add(mService.getPhysicalAddress());
  mTvInputs.clear();
  mSkipRoutingControl=(reason == HdmiControlService.INITIATED_BY_WAKE_UP_MESSAGE);
  launchRoutingControl(reason != HdmiControlService.INITIATED_BY_ENABLE_CEC && reason != HdmiControlService.INITIATED_BY_BOOT_UP);
  mLocalDeviceAddresses=initLocalDeviceAddresses();
  resetSelectRequestBuffer();
  launchDeviceDiscovery();
}
