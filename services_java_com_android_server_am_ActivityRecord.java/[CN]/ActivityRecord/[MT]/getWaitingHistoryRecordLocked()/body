{
  ActivityRecord r=this;
  final ActivityStack stack=task.stack;
  if (r.waitingVisible) {
    r=stack.mResumedActivity;
    if (r == null) {
      r=stack.mPausingActivity;
    }
    if (r == null) {
      r=this;
    }
  }
  return r;
}
