{
  final ActivityStack stack=task.stack;
  final long thisTime=curTime - displayStartTime;
  final long totalTime=stack.mLaunchStartTime != 0 ? (curTime - stack.mLaunchStartTime) : thisTime;
  if (ActivityManagerService.SHOW_ACTIVITY_START_TIME) {
    Trace.traceCounter(Trace.TRACE_TAG_ACTIVITY_MANAGER,"launch",(int)totalTime);
    EventLog.writeEvent(EventLogTags.AM_ACTIVITY_LAUNCH_TIME,userId,System.identityHashCode(this),shortComponentName,thisTime,totalTime);
    StringBuilder sb=service.mStringBuilder;
    sb.setLength(0);
    sb.append("Displayed ");
    sb.append(shortComponentName);
    sb.append(": ");
    TimeUtils.formatDuration(thisTime,sb);
    if (thisTime != totalTime) {
      sb.append(" (total ");
      TimeUtils.formatDuration(totalTime,sb);
      sb.append(")");
    }
    Log.i(ActivityManagerService.TAG,sb.toString());
  }
  mStackSupervisor.reportActivityLaunchedLocked(false,this,thisTime,totalTime);
  if (totalTime > 0) {
    service.mUsageStatsService.noteLaunchTime(realActivity,(int)totalTime);
  }
  displayStartTime=0;
  stack.mLaunchStartTime=0;
}
