{
  final ActivityRecord r=ActivityRecord.forToken(token);
  if (r == null) {
    return -1;
  }
  final TaskRecord task=r.task;
switch (task.mActivities.indexOf(r)) {
case -1:
    return -1;
case 0:
  return task.taskId;
default :
return onlyRoot ? -1 : task.taskId;
}
}
