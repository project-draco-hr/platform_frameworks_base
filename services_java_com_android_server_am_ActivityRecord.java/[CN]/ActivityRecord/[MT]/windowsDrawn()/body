{
synchronized (service) {
    if (launchTime != 0) {
      final ActivityStack stack=task.stack;
      final long curTime=SystemClock.uptimeMillis();
      final long thisTime=curTime - launchTime;
      final long totalTime=stack.mInitialStartTime != 0 ? (curTime - stack.mInitialStartTime) : thisTime;
      if (ActivityManagerService.SHOW_ACTIVITY_START_TIME) {
        EventLog.writeEvent(EventLogTags.AM_ACTIVITY_LAUNCH_TIME,userId,System.identityHashCode(this),shortComponentName,thisTime,totalTime);
        StringBuilder sb=service.mStringBuilder;
        sb.setLength(0);
        sb.append("Displayed ");
        sb.append(shortComponentName);
        sb.append(": ");
        TimeUtils.formatDuration(thisTime,sb);
        if (thisTime != totalTime) {
          sb.append(" (total ");
          TimeUtils.formatDuration(totalTime,sb);
          sb.append(")");
        }
        Log.i(ActivityManagerService.TAG,sb.toString());
      }
      stack.reportActivityLaunchedLocked(false,this,thisTime,totalTime);
      if (totalTime > 0) {
        service.mUsageStatsService.noteLaunchTime(realActivity,(int)totalTime);
      }
      launchTime=0;
      stack.mInitialStartTime=0;
    }
    startTime=0;
    finishLaunchTickingLocked();
  }
}
