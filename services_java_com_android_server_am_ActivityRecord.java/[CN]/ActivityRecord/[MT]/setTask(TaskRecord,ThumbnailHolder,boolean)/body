{
  if (task != null && task.removeActivity(this)) {
    mStackSupervisor.removeTask(task);
  }
  if (inHistory && !finishing) {
    if (task != null) {
      task.numActivities--;
    }
    if (newTask != null) {
      newTask.numActivities++;
    }
  }
  if (newThumbHolder == null) {
    newThumbHolder=newTask;
  }
  task=newTask;
  if (!isRoot && (intent.getFlags() & Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET) != 0) {
    if (thumbHolder == null) {
      thumbHolder=new ThumbnailHolder();
    }
  }
 else {
    thumbHolder=newThumbHolder;
  }
}
