{
  enforceWritePermissionInner(uri,callerToken);
  final int permOp=AppOpsManager.permissionToOpCode(mWritePermission);
  if (permOp != AppOpsManager.OP_NONE) {
    final int mode=mAppOpsManager.noteProxyOp(permOp,callingPkg);
    if (mode != AppOpsManager.MODE_ALLOWED) {
      return mode;
    }
  }
  if (mWriteOp != AppOpsManager.OP_NONE) {
    return mAppOpsManager.noteProxyOp(mWriteOp,callingPkg);
  }
  return AppOpsManager.MODE_ALLOWED;
}
