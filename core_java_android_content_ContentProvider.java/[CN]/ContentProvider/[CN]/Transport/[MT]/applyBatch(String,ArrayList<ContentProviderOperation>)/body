{
  for (  ContentProviderOperation operation : operations) {
    if (operation.isReadOperation()) {
      if (enforceReadPermission(callingPkg,operation.getUri()) != AppOpsManager.MODE_ALLOWED) {
        throw new OperationApplicationException("App op not allowed",0);
      }
    }
    if (operation.isWriteOperation()) {
      if (enforceWritePermission(callingPkg,operation.getUri()) != AppOpsManager.MODE_ALLOWED) {
        throw new OperationApplicationException("App op not allowed",0);
      }
    }
  }
  mCallingPackage.set(callingPkg);
  try {
    return ContentProvider.this.applyBatch(operations);
  }
  finally {
    mCallingPackage.set(null);
  }
}
