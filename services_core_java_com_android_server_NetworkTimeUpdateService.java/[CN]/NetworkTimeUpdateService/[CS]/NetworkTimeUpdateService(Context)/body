{
  mContext=context;
  mTime=NtpTrustedTime.getInstance(context);
  mAlarmManager=(AlarmManager)mContext.getSystemService(Context.ALARM_SERVICE);
  Intent pollIntent=new Intent(ACTION_POLL,null);
  mPendingPollIntent=PendingIntent.getBroadcast(mContext,POLL_REQUEST,pollIntent,0);
  mPollingIntervalMs=mContext.getResources().getInteger(com.android.internal.R.integer.config_ntpPollingInterval);
  mPollingIntervalShorterMs=mContext.getResources().getInteger(com.android.internal.R.integer.config_ntpPollingIntervalShorter);
  mTryAgainTimesMax=mContext.getResources().getInteger(com.android.internal.R.integer.config_ntpRetry);
  mTimeErrorThresholdMs=mContext.getResources().getInteger(com.android.internal.R.integer.config_ntpThreshold);
  mWakeLock=((PowerManager)context.getSystemService(Context.POWER_SERVICE)).newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,TAG);
}
