{
  if (mNativePaint == 0)   throw new NullPointerException("Already finalized!");
  if (text == null) {
    throw new IllegalArgumentException("text cannot be null");
  }
  if (text.length() == 0) {
    return 0;
  }
  if (!mHasCompatScaling) {
    return nBreakText(mNativePaint,mNativeTypeface,text,measureForwards,maxWidth,mBidiFlags,measuredWidth);
  }
  final float oldSize=getTextSize();
  setTextSize(oldSize * mCompatScaling);
  int res=nBreakText(mNativePaint,mNativeTypeface,text,measureForwards,maxWidth * mCompatScaling,mBidiFlags,measuredWidth);
  setTextSize(oldSize);
  if (measuredWidth != null)   measuredWidth[0]*=mInvCompatScaling;
  return res;
}
