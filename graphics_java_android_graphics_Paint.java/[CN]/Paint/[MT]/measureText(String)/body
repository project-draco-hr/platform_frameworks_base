{
  if (text == null) {
    throw new IllegalArgumentException("text cannot be null");
  }
  if (text.length() == 0) {
    return 0f;
  }
  if (!mHasCompatScaling) {
    return (float)Math.ceil(native_measureText(text,mBidiFlags));
  }
  final float oldSize=getTextSize();
  setTextSize(oldSize * mCompatScaling);
  float w=native_measureText(text,mBidiFlags);
  setTextSize(oldSize);
  return (float)Math.ceil(w * mInvCompatScaling);
}
