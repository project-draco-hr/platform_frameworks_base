{
  int level1=layout.getCharacterLevel(hit1.getCharIndex());
  int level2=layout.getCharacterLevel(hit2.getCharIndex());
  if (level1 == level2) {
    return (hit2.isLeadingEdge() && (!hit1.isLeadingEdge())) ? hit2 : hit1;
  }
  return level1 > level2 ? hit1 : hit2;
}
