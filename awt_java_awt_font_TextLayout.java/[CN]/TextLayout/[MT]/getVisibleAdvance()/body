{
  updateMetrics();
  int lastNonWhitespace=breaker.getLastNonWhitespace();
  if (lastNonWhitespace < 0) {
    return 0;
  }
 else   if (lastNonWhitespace == getCharacterCount() - 1) {
    return getAdvance();
  }
 else   if (justificationWidth >= 0) {
    return justificationWidth;
  }
 else {
    breaker.pushSegments(breaker.getACI().getBeginIndex(),lastNonWhitespace + breaker.getACI().getBeginIndex() + 1);
    breaker.createAllSegments();
    float visAdvance=tmc.createMetrics().getAdvance();
    breaker.popSegments();
    return visAdvance;
  }
}
