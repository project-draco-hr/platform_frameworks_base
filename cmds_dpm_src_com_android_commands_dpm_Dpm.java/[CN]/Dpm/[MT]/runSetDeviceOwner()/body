{
  parseArgs(true);
  mDevicePolicyManager.setActiveAdmin(mComponent,true,mUserId);
  String packageName=mComponent.getPackageName();
  try {
    if (!mDevicePolicyManager.setDeviceOwner(packageName,null,mUserId)) {
      throw new RuntimeException("Can't set package " + packageName + " as device owner.");
    }
  }
 catch (  Exception e) {
    mDevicePolicyManager.removeActiveAdmin(mComponent,UserHandle.USER_SYSTEM);
    throw e;
  }
  System.out.println("Success: Device owner set to package " + packageName);
  System.out.println("Active admin set to component " + mComponent.toShortString());
}
