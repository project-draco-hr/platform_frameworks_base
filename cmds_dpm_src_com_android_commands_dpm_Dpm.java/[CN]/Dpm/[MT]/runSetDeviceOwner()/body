{
  ComponentName component=parseComponentName(nextArgRequired());
  mDevicePolicyManager.setActiveAdmin(component,true,UserHandle.USER_OWNER);
  String packageName=component.getPackageName();
  try {
    if (!mDevicePolicyManager.setDeviceOwner(packageName,null)) {
      throw new RuntimeException("Can't set package " + packageName + " as device owner.");
    }
  }
 catch (  Exception e) {
    mDevicePolicyManager.removeActiveAdmin(component,UserHandle.USER_OWNER);
    throw e;
  }
  System.out.println("Success: Device owner set to package " + packageName);
  System.out.println("Active admin set to component " + component.toShortString());
}
