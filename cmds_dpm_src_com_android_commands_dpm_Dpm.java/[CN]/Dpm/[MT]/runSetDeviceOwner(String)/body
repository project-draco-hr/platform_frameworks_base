{
  ComponentName component=ComponentName.unflattenFromString(argument);
  if (component == null) {
    throw new IllegalArgumentException("Invalid component " + argument);
  }
  mDevicePolicyManager.setActiveAdmin(component,true,UserHandle.USER_OWNER);
  String packageName=component.getPackageName();
  try {
    if (!mDevicePolicyManager.setDeviceOwner(packageName,null)) {
      throw new Exception("Can't set package " + packageName + " as device owner.");
    }
  }
 catch (  Exception e) {
    mDevicePolicyManager.removeActiveAdmin(component,UserHandle.USER_OWNER);
    throw e;
  }
  System.out.println("Device owner set to package " + packageName);
  System.out.println("Active admin set to component " + component.toShortString());
}
