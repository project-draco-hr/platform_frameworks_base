{
  LayoutPullParser parser=new LayoutPullParser(APP_TEST_RES + "/layout/activity.xml");
  LayoutLibTestCallback layoutLibCallback=new LayoutLibTestCallback(getLogger());
  layoutLibCallback.initResources();
  SessionParams params=getSessionParams(parser,ConfigGenerator.NEXUS_5,layoutLibCallback);
  RenderSession session=mBridge.createSession(params);
  if (!session.getResult().isSuccess()) {
    getLogger().error(session.getResult().getException(),session.getResult().getErrorMessage());
  }
  Result renderResult=session.render(50000);
  if (!renderResult.isSuccess()) {
    getLogger().error(session.getResult().getException(),session.getResult().getErrorMessage());
  }
  try {
    String goldenImagePath=APP_TEST_DIR + "/golden/activity.png";
    ImageUtils.requireSimilar(goldenImagePath,session.getImage());
  }
 catch (  IOException e) {
    getLogger().error(e,e.getMessage());
  }
}
