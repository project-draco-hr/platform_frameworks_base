{
  if (mAllocationOut != null) {
    mAllocationOut.destroy();
  }
  android.util.Log.v("cpa","reset " + width + ", "+ height);
  mHeight=height;
  mWidth=width;
  mScript.invoke_setSize(mWidth,mHeight);
  Type.Builder tb=new Type.Builder(mRS,Element.RGBA_8888(mRS));
  tb.setX(mWidth);
  tb.setY(mHeight);
  Type t=tb.create();
  mAllocationOut=Allocation.createTyped(mRS,t,Allocation.USAGE_SCRIPT | Allocation.USAGE_IO_OUTPUT);
  mAllocationIn=Allocation.createSized(mRS,Element.U8(mRS),(mHeight * mWidth) + ((mHeight / 2) * (mWidth / 2) * 2));
  mYuv.setInput(mAllocationIn);
  setupSurface();
  ScriptGroup.Builder b=new ScriptGroup.Builder(mRS);
  b.addKernel(mScript.getKernelID_root());
  b.addKernel(mYuv.getKernelID());
  b.addConnection(t,mYuv.getKernelID(),mScript.getKernelID_root());
  mGroup=b.create();
}
