{
  super.onCreateOptionsMenu(menu,inflater);
  inflater.inflate(R.menu.select_printer_activity,menu);
  MenuItem searchItem=menu.findItem(R.id.action_search);
  SearchView searchView=(SearchView)searchItem.getActionView();
  searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener(){
    @Override public boolean onQueryTextSubmit(    String query){
      return true;
    }
    @Override public boolean onQueryTextChange(    String searchString){
      ((DestinationAdapter)mListView.getAdapter()).getFilter().filter(searchString);
      return true;
    }
  }
);
  searchView.addOnAttachStateChangeListener(new View.OnAttachStateChangeListener(){
    @Override public void onViewAttachedToWindow(    View view){
      if (AccessibilityManager.getInstance(getActivity()).isEnabled()) {
        view.announceForAccessibility(getString(R.string.print_search_box_shown_utterance));
      }
    }
    @Override public void onViewDetachedFromWindow(    View view){
      Activity activity=getActivity();
      if (activity != null && !activity.isFinishing() && AccessibilityManager.getInstance(activity).isEnabled()) {
        view.announceForAccessibility(getString(R.string.print_search_box_hidden_utterance));
      }
    }
  }
);
  if (mAddPrinterServices.isEmpty()) {
    menu.removeItem(R.id.action_add_printer);
  }
}
