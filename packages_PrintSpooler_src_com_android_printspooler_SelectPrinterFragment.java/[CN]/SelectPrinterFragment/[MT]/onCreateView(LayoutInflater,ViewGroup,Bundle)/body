{
  View content=inflater.inflate(R.layout.select_printer_fragment,container,false);
  mListView=(ListView)content.findViewById(android.R.id.list);
  final DestinationAdapter adapter=new DestinationAdapter();
  adapter.registerDataSetObserver(new DataSetObserver(){
    @Override public void onChanged(){
      if (!getActivity().isFinishing() && adapter.getCount() <= 0) {
        updateEmptyView(adapter);
      }
    }
    @Override public void onInvalidated(){
      if (!getActivity().isFinishing()) {
        updateEmptyView(adapter);
      }
    }
  }
);
  mListView.setAdapter(adapter);
  mListView.setOnItemClickListener(new AdapterView.OnItemClickListener(){
    @Override public void onItemClick(    AdapterView<?> parent,    View view,    int position,    long id){
      PrinterInfo printer=(PrinterInfo)mListView.getAdapter().getItem(position);
      Activity activity=getActivity();
      if (activity instanceof OnPrinterSelectedListener) {
        ((OnPrinterSelectedListener)activity).onPrinterSelected(printer.getId());
      }
 else {
        throw new IllegalStateException("the host activity must implement" + " OnPrinterSelectedListener");
      }
    }
  }
);
  return content;
}
