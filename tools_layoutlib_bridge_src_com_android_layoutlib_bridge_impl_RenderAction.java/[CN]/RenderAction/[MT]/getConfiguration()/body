{
  Configuration config=new Configuration();
  HardwareConfig hardwareConfig=mParams.getHardwareConfig();
  ScreenSize screenSize=hardwareConfig.getScreenSize();
  if (screenSize != null) {
switch (screenSize) {
case SMALL:
      config.screenLayout|=Configuration.SCREENLAYOUT_SIZE_SMALL;
    break;
case NORMAL:
  config.screenLayout|=Configuration.SCREENLAYOUT_SIZE_NORMAL;
break;
case LARGE:
config.screenLayout|=Configuration.SCREENLAYOUT_SIZE_LARGE;
break;
case XLARGE:
config.screenLayout|=Configuration.SCREENLAYOUT_SIZE_XLARGE;
break;
}
}
Density density=hardwareConfig.getDensity();
if (density == null) {
density=Density.MEDIUM;
}
config.screenWidthDp=hardwareConfig.getScreenWidth() / density.getDpiValue();
config.screenHeightDp=hardwareConfig.getScreenHeight() / density.getDpiValue();
if (config.screenHeightDp < config.screenWidthDp) {
config.smallestScreenWidthDp=config.screenHeightDp;
}
 else {
config.smallestScreenWidthDp=config.screenWidthDp;
}
config.densityDpi=density.getDpiValue();
config.compatScreenWidthDp=config.screenWidthDp;
config.compatScreenHeightDp=config.screenHeightDp;
return config;
}
