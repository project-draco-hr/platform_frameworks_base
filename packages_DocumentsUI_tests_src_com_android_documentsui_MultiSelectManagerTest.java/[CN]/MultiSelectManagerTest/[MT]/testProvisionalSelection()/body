{
  Selection s=mManager.getSelection();
  assertSelection();
  SparseBooleanArray provisional=new SparseBooleanArray();
  provisional.append(1,true);
  provisional.append(2,true);
  s.setProvisionalSelection(provisional);
  assertSelection(1,2);
  provisional.delete(1);
  provisional.append(3,true);
  s.setProvisionalSelection(provisional);
  assertSelection(2,3);
  s.applyProvisionalSelection();
  assertSelection(2,3);
  provisional.clear();
  provisional.append(3,true);
  provisional.append(4,true);
  s.setProvisionalSelection(provisional);
  assertSelection(2,3,4);
  provisional.delete(3);
  s.setProvisionalSelection(provisional);
  assertSelection(2,3,4);
}
