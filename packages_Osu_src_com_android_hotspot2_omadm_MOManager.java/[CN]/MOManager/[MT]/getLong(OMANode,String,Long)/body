{
  OMANode child=node.getChild(key);
  if (child == null) {
    if (dflt != null) {
      return dflt;
    }
 else {
      throw new OMAException("Missing value for " + key);
    }
  }
 else {
    if (!child.isLeaf()) {
      throw new OMAException(key + " is not a leaf node");
    }
    String value=child.getValue();
    try {
      long result=Long.parseLong(value);
      if (result < 0) {
        throw new OMAException("Negative value for " + key);
      }
      return result;
    }
 catch (    NumberFormatException nfe) {
      throw new OMAException("Value for " + key + " is non-numeric: "+ value);
    }
  }
}
