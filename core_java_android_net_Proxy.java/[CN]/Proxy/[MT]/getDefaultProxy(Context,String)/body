{
  if (sConnectivityManager == null) {
    sConnectivityManager=(ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
  }
  if (sConnectivityManager == null)   return java.net.Proxy.NO_PROXY;
  LinkProperties linkProperties=sConnectivityManager.getActiveLinkProperties();
  if (linkProperties != null) {
    ProxyProperties proxyProperties=linkProperties.getHttpProxy();
    if (proxyProperties != null) {
      String exclusionList=proxyProperties.getExclusionList();
      SocketAddress socketAddr=proxyProperties.getSocketAddress();
      if (socketAddr != null) {
        String[] parsedExclusionArray=parsedExclusionArray=parseExclusionList(exclusionList);
        if (!isURLInExclusionList(url,parsedExclusionArray)) {
          return new java.net.Proxy(java.net.Proxy.Type.HTTP,socketAddr);
        }
      }
    }
  }
  return java.net.Proxy.NO_PROXY;
}
