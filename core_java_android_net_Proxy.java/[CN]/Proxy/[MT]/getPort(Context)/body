{
  ContentResolver contentResolver=ctx.getContentResolver();
  Assert.assertNotNull(contentResolver);
  String host=Settings.Secure.getString(contentResolver,Settings.Secure.HTTP_PROXY);
  if (host != null) {
    int i=host.indexOf(':');
    if (i == -1) {
      if (DEBUG) {
        Assert.assertTrue(host.length() == 0);
      }
      return -1;
    }
    if (DEBUG) {
      Assert.assertTrue(i < host.length());
    }
    return Integer.parseInt(host.substring(i + 1));
  }
  return getDefaultPort();
}
