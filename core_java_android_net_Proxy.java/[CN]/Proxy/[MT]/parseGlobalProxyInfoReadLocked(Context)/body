{
  ContentResolver contentResolver=ctx.getContentResolver();
  String proxyHost=Settings.Secure.getString(contentResolver,Settings.Secure.HTTP_PROXY);
  if (TextUtils.isEmpty(proxyHost)) {
    sProxyInfoLock.readLock().unlock();
    sProxyInfoLock.writeLock().lock();
    sGlobalProxySpec=null;
    sProxyInfoLock.readLock().lock();
    sProxyInfoLock.writeLock().unlock();
    return;
  }
  String exclusionListSpec=Settings.Secure.getString(contentResolver,Settings.Secure.HTTP_PROXY_EXCLUSION_LIST);
  String host=parseHost(proxyHost);
  int port=parsePort(proxyHost);
  ProxySpec tmpProxySpec=null;
  if (proxyHost != null) {
    tmpProxySpec=new ProxySpec();
    tmpProxySpec.address=new InetSocketAddress(host,port);
    tmpProxySpec.exclusionList=parseExclusionList(exclusionListSpec);
  }
  sProxyInfoLock.readLock().unlock();
  sProxyInfoLock.writeLock().lock();
  sGlobalProxySpec=tmpProxySpec;
  sProxyInfoLock.readLock().lock();
  sProxyInfoLock.writeLock().unlock();
}
