{
  String oldValue=null;
  boolean sendBroadcast=false;
  final SettingsLookup table;
  if (destination.equals(Settings.Secure.CONTENT_URI)) {
    table=sSecureLookup;
  }
 else   if (destination.equals(Settings.System.CONTENT_URI)) {
    table=sSystemLookup;
  }
 else {
    table=sGlobalLookup;
  }
  if (sBroadcastOnRestore.contains(name)) {
    oldValue=table.lookup(cr,name,UserHandle.USER_OWNER);
    sendBroadcast=true;
  }
  try {
    if (Settings.System.SCREEN_BRIGHTNESS.equals(name)) {
      setBrightness(Integer.parseInt(value));
    }
 else     if (Settings.System.SOUND_EFFECTS_ENABLED.equals(name)) {
      setSoundEffects(Integer.parseInt(value) == 1);
    }
 else     if (Settings.Secure.LOCATION_PROVIDERS_ALLOWED.equals(name)) {
      setGpsLocation(value);
      return;
    }
 else     if (Settings.Secure.BACKUP_AUTO_RESTORE.equals(name)) {
      setAutoRestore(Integer.parseInt(value) == 1);
    }
 else     if (isAlreadyConfiguredCriticalAccessibilitySetting(name)) {
      return;
    }
 else     if (Settings.System.RINGTONE.equals(name) || Settings.System.NOTIFICATION_SOUND.equals(name)) {
      setRingtone(name,value);
      return;
    }
    contentValues.clear();
    contentValues.put(Settings.NameValueTable.NAME,name);
    contentValues.put(Settings.NameValueTable.VALUE,value);
    cr.insert(destination,contentValues);
  }
 catch (  Exception e) {
    sendBroadcast=false;
  }
 finally {
    if (sendBroadcast) {
      Intent intent=new Intent(Intent.ACTION_SETTING_RESTORED).setPackage("android").addFlags(Intent.FLAG_RECEIVER_REGISTERED_ONLY).putExtra(Intent.EXTRA_SETTING_NAME,name).putExtra(Intent.EXTRA_SETTING_NEW_VALUE,value).putExtra(Intent.EXTRA_SETTING_PREVIOUS_VALUE,oldValue);
      context.sendBroadcastAsUser(intent,UserHandle.OWNER,null);
    }
  }
}
