{
  if (!hasDividerBefore(index)) {
    if (((getChildCount() > 0 && (mShowDividers & SHOW_DIVIDER_MIDDLE) == SHOW_DIVIDER_MIDDLE) || (mShowDividers & SHOW_DIVIDER_BEGINNING) == SHOW_DIVIDER_BEGINNING)) {
      super.addView(new DividerView(mContext),index,makeDividerLayoutParams());
      if (index >= 0) {
        index++;
      }
    }
  }
  final int paddingLeft=child.getPaddingLeft();
  final int paddingRight=child.getPaddingRight();
  final int paddingTop=child.getPaddingTop();
  final int paddingBottom=child.getPaddingBottom();
  child.setBackgroundDrawable(mButtonBackground);
  child.setPadding(paddingLeft,paddingTop,paddingRight,paddingBottom);
  final boolean isLast=index < 0 || index == getChildCount();
  super.addView(child,index,params);
  if (index >= 0) {
    index++;
  }
  if ((isLast && (mShowDividers & SHOW_DIVIDER_END) == SHOW_DIVIDER_END) || ((mShowDividers & SHOW_DIVIDER_MIDDLE) == SHOW_DIVIDER_MIDDLE && !(getChildAt(index) instanceof DividerView))) {
    super.addView(new DividerView(mContext),index,makeDividerLayoutParams());
  }
}
