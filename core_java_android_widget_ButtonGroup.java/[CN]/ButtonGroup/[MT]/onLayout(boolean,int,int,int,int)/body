{
  super.onLayout(changed,l,t,r,b);
  final boolean begin=(mShowDividers & SHOW_DIVIDER_BEGINNING) == SHOW_DIVIDER_BEGINNING;
  final boolean middle=(mShowDividers & SHOW_DIVIDER_MIDDLE) == SHOW_DIVIDER_MIDDLE;
  if (getOrientation() == VERTICAL) {
    int offset=begin ? mDividerHeight : 0;
    final int childCount=getChildCount();
    for (int i=0; i < childCount; i++) {
      View child=getChildAt(i);
      child.offsetTopAndBottom(offset);
      if (middle && child.getVisibility() != GONE) {
        offset+=mDividerHeight;
      }
    }
  }
 else {
    int offset=begin ? mDividerWidth : 0;
    final int childCount=getChildCount();
    for (int i=0; i < childCount; i++) {
      View child=getChildAt(i);
      child.offsetLeftAndRight(offset);
      if (middle && child.getVisibility() != GONE) {
        offset+=mDividerWidth;
      }
    }
  }
}
