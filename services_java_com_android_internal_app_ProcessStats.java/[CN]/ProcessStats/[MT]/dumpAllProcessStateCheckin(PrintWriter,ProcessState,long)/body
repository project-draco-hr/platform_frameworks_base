{
  boolean didCurState=false;
  for (int i=0; i < proc.mDurationsTableSize; i++) {
    int off=proc.mDurationsTable[i];
    int type=(off >> OFFSET_TYPE_SHIFT) & OFFSET_TYPE_MASK;
    long time=proc.mProcessStats.getLong(off,0);
    if (proc.mCurState == type) {
      didCurState=true;
      time+=now - proc.mStartTime;
    }
    printProcStateTagAndValue(pw,type,time);
  }
  if (!didCurState && proc.mCurState != STATE_NOTHING) {
    printProcStateTagAndValue(pw,proc.mCurState,now - proc.mStartTime);
  }
}
