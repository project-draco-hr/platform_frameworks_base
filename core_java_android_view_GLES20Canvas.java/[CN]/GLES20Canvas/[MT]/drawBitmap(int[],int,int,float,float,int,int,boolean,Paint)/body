{
  boolean hasColorFilter=paint != null && setupColorFilter(paint);
  final Bitmap.Config config=hasAlpha ? Bitmap.Config.ARGB_8888 : Bitmap.Config.RGB_565;
  final Bitmap b=Bitmap.createBitmap(colors,offset,stride,width,height,config);
  final int nativePaint=paint == null ? 0 : paint.mNativePaint;
  nDrawBitmap(mRenderer,b.mNativeBitmap,b.mBuffer,x,y,nativePaint);
  b.recycle();
  if (hasColorFilter)   nResetModifiers(mRenderer);
}
