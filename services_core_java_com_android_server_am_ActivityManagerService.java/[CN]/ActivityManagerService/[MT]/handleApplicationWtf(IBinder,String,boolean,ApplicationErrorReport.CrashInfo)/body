{
  final ProcessRecord r=findAppProcess(app,"WTF");
  final String processName=app == null ? "system_server" : (r == null ? "unknown" : r.processName);
  EventLog.writeEvent(EventLogTags.AM_WTF,UserHandle.getUserId(Binder.getCallingUid()),Binder.getCallingPid(),processName,r == null ? -1 : r.info.flags,tag,crashInfo.exceptionMessage);
  if (system) {
    mHandler.post(new Runnable(){
      @Override public void run(){
        addErrorToDropBox("wtf",r,processName,null,null,tag,null,null,crashInfo);
      }
    }
);
    return false;
  }
  addErrorToDropBox("wtf",r,processName,null,null,tag,null,null,crashInfo);
  if (r != null && r.pid != Process.myPid() && Settings.Global.getInt(mContext.getContentResolver(),Settings.Global.WTF_IS_FATAL,0) != 0) {
    crashApplication(r,crashInfo);
    return true;
  }
 else {
    return false;
  }
}
