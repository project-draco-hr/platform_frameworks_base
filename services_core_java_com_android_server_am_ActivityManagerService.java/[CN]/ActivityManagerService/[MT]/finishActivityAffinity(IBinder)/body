{
synchronized (this) {
    final long origId=Binder.clearCallingIdentity();
    ActivityRecord r=ActivityRecord.isInStackLocked(token);
    boolean res=false;
    if (r != null) {
      res=r.task.stack.finishActivityAffinityLocked(r);
    }
    Binder.restoreCallingIdentity(origId);
    return res;
  }
}
