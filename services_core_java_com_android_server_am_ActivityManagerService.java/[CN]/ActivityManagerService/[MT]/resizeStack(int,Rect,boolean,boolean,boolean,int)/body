{
  enforceCallingPermission(MANAGE_ACTIVITY_STACKS,"resizeStack()");
  long ident=Binder.clearCallingIdentity();
  try {
synchronized (this) {
      if (animate) {
        if (stackId == PINNED_STACK_ID) {
          mWindowManager.animateResizePinnedStack(bounds,animationDuration);
        }
 else {
          throw new IllegalArgumentException("Stack: " + stackId + " doesn't support animated resize.");
        }
      }
 else {
        mStackSupervisor.resizeStackLocked(stackId,bounds,null,null,preserveWindows,allowResizeInDockedMode,!DEFER_RESUME);
      }
    }
  }
  finally {
    Binder.restoreCallingIdentity(ident);
  }
}
