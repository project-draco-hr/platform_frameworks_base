{
  try {
    ActivityManagerService m=sSelf;
    ServiceManager.addService(Context.ACTIVITY_SERVICE,m,true);
    ServiceManager.addService(ProcessStats.SERVICE_NAME,m.mProcessStats);
    ServiceManager.addService("meminfo",new MemBinder(m));
    ServiceManager.addService("gfxinfo",new GraphicsBinder(m));
    ServiceManager.addService("dbinfo",new DbBinder(m));
    if (MONITOR_CPU_USAGE) {
      ServiceManager.addService("cpuinfo",new CpuBinder(m));
    }
    ServiceManager.addService("permission",new PermissionController(m));
    ApplicationInfo info=sSelf.mContext.getPackageManager().getApplicationInfo("android",STOCK_PM_FLAGS);
    sSystemThread.installSystemApplicationInfo(info);
synchronized (sSelf) {
      ProcessRecord app=sSelf.newProcessRecordLocked(info,info.processName,false);
      app.persistent=true;
      app.pid=MY_PID;
      app.maxAdj=ProcessList.SYSTEM_ADJ;
      app.makeActive(sSystemThread.getApplicationThread(),sSelf.mProcessStats);
      sSelf.mProcessNames.put(app.processName,app.uid,app);
synchronized (sSelf.mPidsSelfLocked) {
        sSelf.mPidsSelfLocked.put(app.pid,app);
      }
      sSelf.updateLruProcessLocked(app,false,null);
      sSelf.updateOomAdjLocked();
    }
  }
 catch (  PackageManager.NameNotFoundException e) {
    throw new RuntimeException("Unable to find android system package",e);
  }
}
