{
  enforceShellRestriction(UserManager.DISALLOW_DEBUGGING_FEATURES,userId);
  String userName;
synchronized (this) {
    UserInfo userInfo=getUserManagerLocked().getUserInfo(userId);
    if (userInfo == null) {
      Slog.w(TAG,"No user info for user #" + userId);
      return false;
    }
    if (userInfo.isManagedProfile()) {
      Slog.w(TAG,"Cannot switch to User #" + userId + ": not a full user");
      return false;
    }
    userName=userInfo.name;
    mUserController.mTargetUserId=userId;
  }
  mUiHandler.removeMessages(START_USER_SWITCH_MSG);
  mUiHandler.sendMessage(mUiHandler.obtainMessage(START_USER_SWITCH_MSG,userId,0,userName));
  return true;
}
