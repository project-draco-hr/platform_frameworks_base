{
  if (DEBUG_WHITELISTS) {
    Slog.d(TAG,"tempWhitelistAppForPowerSave(" + callerPid + ", "+ callerUid+ ", "+ targetUid+ ", "+ duration+ ")");
  }
synchronized (mPidsSelfLocked) {
    final ProcessRecord pr=mPidsSelfLocked.get(callerPid);
    if (pr == null) {
      Slog.w(TAG,"tempWhitelistAppForPowerSave() no ProcessRecord for pid " + callerPid);
      return;
    }
    if (!pr.whitelistManager) {
      if (DEBUG_WHITELISTS) {
        Slog.d(TAG,"tempWhitelistAppForPowerSave() for target " + targetUid + ": pid "+ callerPid+ " is not allowed");
      }
      return;
    }
  }
  final long token=Binder.clearCallingIdentity();
  try {
    mLocalDeviceIdleController.addPowerSaveTempWhitelistAppDirect(targetUid,duration,true,"pe from uid:" + callerUid);
  }
  finally {
    Binder.restoreCallingIdentity(token);
  }
}
