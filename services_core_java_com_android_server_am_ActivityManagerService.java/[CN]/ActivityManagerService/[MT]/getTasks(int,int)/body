{
  final int callingUid=Binder.getCallingUid();
  ArrayList<RunningTaskInfo> list=new ArrayList<RunningTaskInfo>();
synchronized (this) {
    if (localLOGV)     Slog.v(TAG,"getTasks: max=" + maxNum + ", flags="+ flags);
    final boolean allowed=checkCallingPermission(android.Manifest.permission.GET_TASKS) == PackageManager.PERMISSION_GRANTED;
    if (!allowed) {
      Slog.w(TAG,"getTasks: caller " + callingUid + " does not hold GET_TASKS; limiting output");
    }
    mStackSupervisor.getTasksLocked(maxNum,list,callingUid,allowed);
  }
  return list;
}
