{
  enforceNotIsolatedCaller("startActivityAndWait");
  userId=handleIncomingUser(Binder.getCallingPid(),Binder.getCallingUid(),userId,false,true,"startActivityAndWait",null);
  WaitResult res=new WaitResult();
  mStackSupervisor.startActivityMayWait(caller,-1,callingPackage,intent,resolvedType,resultTo,resultWho,requestCode,startFlags,profileFile,profileFd,res,null,options,UserHandle.getCallingUserId());
  return res;
}
