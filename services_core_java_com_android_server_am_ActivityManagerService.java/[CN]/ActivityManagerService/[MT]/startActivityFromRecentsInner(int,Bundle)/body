{
  final TaskRecord task;
  final int callingUid;
  final String callingPackage;
  final Intent intent;
  final int userId;
synchronized (this) {
    task=mRecentTasks.taskForIdLocked(taskId);
    if (task == null) {
      throw new IllegalArgumentException("Task " + taskId + " not found.");
    }
    if (task.getRootActivity() != null) {
      moveTaskToFrontLocked(task.taskId,0,null);
      return ActivityManager.START_TASK_TO_FRONT;
    }
    callingUid=task.mCallingUid;
    callingPackage=task.mCallingPackage;
    intent=task.intent;
    intent.addFlags(Intent.FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY);
    userId=task.userId;
  }
  return startActivityInPackage(callingUid,callingPackage,intent,null,null,null,0,0,options,userId,null,task);
}
