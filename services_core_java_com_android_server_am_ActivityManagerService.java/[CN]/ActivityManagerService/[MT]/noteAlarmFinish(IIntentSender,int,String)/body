{
  if (!(sender instanceof PendingIntentRecord)) {
    return;
  }
  final PendingIntentRecord rec=(PendingIntentRecord)sender;
  final BatteryStatsImpl stats=mBatteryStatsService.getActiveStatistics();
synchronized (stats) {
    mBatteryStatsService.enforceCallingPermission();
    int MY_UID=Binder.getCallingUid();
    int uid=rec.uid == MY_UID ? Process.SYSTEM_UID : rec.uid;
    mBatteryStatsService.noteAlarmFinish(tag,sourceUid >= 0 ? sourceUid : uid);
  }
}
