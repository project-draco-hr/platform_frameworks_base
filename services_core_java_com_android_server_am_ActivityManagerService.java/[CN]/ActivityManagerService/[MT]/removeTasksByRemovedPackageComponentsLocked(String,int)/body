{
  final IPackageManager pm=AppGlobals.getPackageManager();
  final HashSet<ComponentName> componentsKnownToExist=new HashSet<ComponentName>();
  for (int i=mRecentTasks.size() - 1; i >= 0; i--) {
    TaskRecord tr=mRecentTasks.get(i);
    if (tr.userId != userId)     continue;
    ComponentName cn=tr.intent.getComponent();
    if (cn != null && cn.getPackageName().equals(packageName)) {
      if (componentsKnownToExist.contains(cn))       continue;
      try {
        ActivityInfo info=pm.getActivityInfo(cn,0,userId);
        if (info != null) {
          componentsKnownToExist.add(cn);
        }
 else {
          removeTaskByIdLocked(tr.taskId,false);
        }
      }
 catch (      RemoteException e) {
        Log.e(TAG,"Activity info query failed. component=" + cn,e);
      }
    }
  }
}
