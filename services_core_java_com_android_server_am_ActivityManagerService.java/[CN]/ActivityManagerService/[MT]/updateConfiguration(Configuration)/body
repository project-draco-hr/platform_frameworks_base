{
  enforceCallingPermission(android.Manifest.permission.CHANGE_CONFIGURATION,"updateConfiguration()");
synchronized (this) {
    if (values == null && mWindowManager != null) {
      values=mWindowManager.computeNewConfiguration();
    }
    if (mWindowManager != null) {
      mProcessList.applyDisplaySize(mWindowManager);
    }
    final long origId=Binder.clearCallingIdentity();
    if (values != null) {
      Settings.System.clearConfiguration(values);
    }
    updateConfigurationLocked(values,null,false);
    Binder.restoreCallingIdentity(origId);
  }
}
