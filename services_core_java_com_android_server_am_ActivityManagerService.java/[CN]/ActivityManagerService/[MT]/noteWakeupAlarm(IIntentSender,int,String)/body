{
  if (!(sender instanceof PendingIntentRecord)) {
    return;
  }
  final PendingIntentRecord rec=(PendingIntentRecord)sender;
  final String tag;
synchronized (this) {
    tag=getTagForIntentSenderLocked(rec,"*walarm*:");
  }
  final BatteryStatsImpl stats=mBatteryStatsService.getActiveStatistics();
synchronized (stats) {
    if (mBatteryStatsService.isOnBattery()) {
      mBatteryStatsService.enforceCallingPermission();
      int MY_UID=Binder.getCallingUid();
      int uid=rec.uid == MY_UID ? Process.SYSTEM_UID : rec.uid;
      BatteryStatsImpl.Uid.Pkg pkg=stats.getPackageStatsLocked(sourceUid >= 0 ? sourceUid : uid,sourcePkg != null ? sourcePkg : rec.key.packageName);
      pkg.noteWakeupAlarmLocked(tag);
    }
  }
}
