{
  if (processName != null) {
    enforceCallingPermission(android.Manifest.permission.SET_DEBUG_APP,"setDumpHeapDebugLimit()");
  }
 else {
synchronized (mPidsSelfLocked) {
      ProcessRecord proc=mPidsSelfLocked.get(Binder.getCallingPid());
      if (proc == null) {
        throw new SecurityException("No process found for calling pid " + Binder.getCallingPid());
      }
      if (!Build.IS_DEBUGGABLE && (proc.info.flags & ApplicationInfo.FLAG_DEBUGGABLE) == 0) {
        throw new SecurityException("Not running a debuggable build");
      }
      processName=proc.processName;
      uid=proc.uid;
      if (reportPackage != null && !proc.pkgList.containsKey(reportPackage)) {
        throw new SecurityException("Package " + reportPackage + " is not running in "+ proc);
      }
    }
  }
synchronized (this) {
    if (maxMemSize > 0) {
      mMemWatchProcesses.put(processName,uid,new Pair(maxMemSize,reportPackage));
    }
 else {
      if (uid != 0) {
        mMemWatchProcesses.remove(processName,uid);
      }
 else {
        mMemWatchProcesses.getMap().remove(processName);
      }
    }
  }
}
