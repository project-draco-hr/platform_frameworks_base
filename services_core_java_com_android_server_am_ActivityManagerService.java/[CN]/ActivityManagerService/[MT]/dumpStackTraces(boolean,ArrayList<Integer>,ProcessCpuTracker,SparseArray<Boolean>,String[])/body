{
  String tracesPath=SystemProperties.get("dalvik.vm.stack-trace-file",null);
  if (tracesPath == null || tracesPath.length() == 0) {
    return null;
  }
  File tracesFile=new File(tracesPath);
  try {
    if (clearTraces && tracesFile.exists())     tracesFile.delete();
    tracesFile.createNewFile();
    FileUtils.setPermissions(tracesFile.getPath(),0666,-1,-1);
  }
 catch (  IOException e) {
    Slog.w(TAG,"Unable to prepare ANR traces file: " + tracesPath,e);
    return null;
  }
  dumpStackTraces(tracesPath,firstPids,processCpuTracker,lastPids,nativeProcs);
  return tracesFile;
}
