{
  boolean unfrozen=false;
synchronized (this) {
    if (clearInitializing) {
      uss.initializing=false;
      getUserManagerLocked().makeInitialized(uss.mHandle.getIdentifier());
    }
    if (clearSwitching) {
      uss.switching=false;
    }
    if (!uss.switching && !uss.initializing) {
      mWindowManager.stopFreezingScreen();
      unfrozen=true;
    }
  }
  if (unfrozen) {
    final int N=mUserSwitchObservers.beginBroadcast();
    for (int i=0; i < N; i++) {
      try {
        mUserSwitchObservers.getBroadcastItem(i).onUserSwitchComplete(newUserId);
      }
 catch (      RemoteException e) {
      }
    }
    mUserSwitchObservers.finishBroadcast();
  }
  stopGuestUserIfBackground();
}
