{
  PendingAssistExtras pae=(PendingAssistExtras)token;
synchronized (pae) {
    pae.result=extras;
    pae.structure=structure;
    pae.content=content;
    pae.haveResult=true;
    pae.notifyAll();
    if (pae.intent == null && pae.receiver == null) {
      return;
    }
  }
synchronized (this) {
    buildAssistBundleLocked(pae,extras);
    boolean exists=mPendingAssistExtras.remove(pae);
    mHandler.removeCallbacks(pae);
    if (!exists) {
      return;
    }
    if (pae.receiver != null) {
      Bundle topBundle=new Bundle();
      topBundle.putBundle("data",pae.extras);
      topBundle.putParcelable("structure",pae.structure);
      topBundle.putParcelable("content",pae.content);
      try {
        pae.receiver.send(0,topBundle);
      }
 catch (      RemoteException e) {
      }
      return;
    }
  }
  pae.intent.replaceExtras(pae.extras);
  pae.intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_CLEAR_TOP);
  closeSystemDialogs("assist");
  try {
    mContext.startActivityAsUser(pae.intent,new UserHandle(pae.userHandle));
  }
 catch (  ActivityNotFoundException e) {
    Slog.w(TAG,"No activity to handle assist action.",e);
  }
}
