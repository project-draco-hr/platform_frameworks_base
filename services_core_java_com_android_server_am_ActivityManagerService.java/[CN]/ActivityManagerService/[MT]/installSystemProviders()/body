{
  List<ProviderInfo> providers;
synchronized (sSelf) {
    ProcessRecord app=sSelf.mProcessNames.get("system",Process.SYSTEM_UID);
    providers=sSelf.generateApplicationProvidersLocked(app);
    if (providers != null) {
      for (int i=providers.size() - 1; i >= 0; i--) {
        ProviderInfo pi=(ProviderInfo)providers.get(i);
        if ((pi.applicationInfo.flags & ApplicationInfo.FLAG_SYSTEM) == 0) {
          Slog.w(TAG,"Not installing system proc provider " + pi.name + ": not system .apk");
          providers.remove(i);
        }
      }
    }
  }
  if (providers != null) {
    sSystemThread.installSystemProviders(providers);
  }
  sSelf.mCoreSettingsObserver=new CoreSettingsObserver(sSelf);
  sSelf.mUsageStatsService.monitorPackages();
}
