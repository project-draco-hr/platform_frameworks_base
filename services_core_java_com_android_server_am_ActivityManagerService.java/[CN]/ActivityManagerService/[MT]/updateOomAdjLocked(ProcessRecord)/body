{
  final ActivityRecord TOP_ACT=resumedAppLocked();
  final ProcessRecord TOP_APP=TOP_ACT != null ? TOP_ACT.app : null;
  final boolean wasCached=app.cached;
  mAdjSeq++;
  final int cachedAdj=app.curRawAdj >= ProcessList.CACHED_APP_MIN_ADJ ? app.curRawAdj : ProcessList.UNKNOWN_ADJ;
  boolean success=updateOomAdjLocked(app,cachedAdj,TOP_APP,false,SystemClock.uptimeMillis());
  if (wasCached != app.cached || app.curRawAdj == ProcessList.UNKNOWN_ADJ) {
    updateOomAdjLocked();
  }
  return success;
}
