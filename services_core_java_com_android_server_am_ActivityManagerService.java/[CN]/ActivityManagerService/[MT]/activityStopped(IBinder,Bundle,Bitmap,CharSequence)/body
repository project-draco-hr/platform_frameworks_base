{
  if (localLOGV)   Slog.v(TAG,"Activity stopped: token=" + token);
  if (icicle != null && icicle.hasFileDescriptors()) {
    throw new IllegalArgumentException("File descriptors passed in Bundle");
  }
  final long origId=Binder.clearCallingIdentity();
synchronized (this) {
    ActivityRecord r=ActivityRecord.isInStackLocked(token);
    if (r != null) {
      r.task.stack.activityStoppedLocked(r,icicle,thumbnail,description);
    }
  }
  trimApplications();
  Binder.restoreCallingIdentity(origId);
}
