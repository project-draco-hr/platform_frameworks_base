{
  Intent intent=new Intent(Intent.ACTION_PRE_BOOT_COMPLETED);
  List<ResolveInfo> ris=null;
  try {
    ris=AppGlobals.getPackageManager().queryIntentReceivers(intent,null,0,userId);
  }
 catch (  RemoteException e) {
  }
  if (ris == null) {
    return false;
  }
  for (int i=ris.size() - 1; i >= 0; i--) {
    if ((ris.get(i).activityInfo.applicationInfo.flags & ApplicationInfo.FLAG_SYSTEM) == 0) {
      ris.remove(i);
    }
  }
  intent.addFlags(Intent.FLAG_RECEIVER_BOOT_UPGRADE);
  if (userId == UserHandle.USER_OWNER) {
    ArrayList<ComponentName> lastDoneReceivers=readLastDonePreBootReceivers();
    for (int i=0; i < ris.size(); i++) {
      ActivityInfo ai=ris.get(i).activityInfo;
      ComponentName comp=new ComponentName(ai.packageName,ai.name);
      if (false && lastDoneReceivers.contains(comp)) {
        ris.remove(i);
        i--;
        doneReceivers.add(comp);
      }
    }
  }
  if (ris.size() <= 0) {
    return false;
  }
  final int[] users=userId == UserHandle.USER_OWNER ? getUsersLocked() : new int[]{userId};
  if (users.length <= 0) {
    return false;
  }
  PreBootContinuation cont=new PreBootContinuation(intent,onFinishCallback,doneReceivers,ris,users);
  cont.go();
  return true;
}
