{
  long ident=Binder.clearCallingIdentity();
  try {
synchronized (this) {
      ActivityRecord caller=ActivityRecord.forTokenLocked(token);
      ActivityRecord top=getFocusedStack().topActivity();
      if (top != caller) {
        Slog.w(TAG,"showAssistFromActivity failed: caller " + caller + " is not current top "+ top);
        return false;
      }
      if (!top.nowVisible) {
        Slog.w(TAG,"showAssistFromActivity failed: caller " + caller + " is not visible");
        return false;
      }
    }
    AssistUtils utils=new AssistUtils(mContext);
    return utils.showSessionForActiveService(args,VoiceInteractionSession.SHOW_SOURCE_APPLICATION,null,token);
  }
  finally {
    Binder.restoreCallingIdentity(ident);
  }
}
