{
  enforceNotIsolatedCaller("broadcastIntent");
synchronized (this) {
    intent=verifyBroadcastLocked(intent);
    final ProcessRecord callerApp=getRecordForAppLocked(caller);
    final int callingPid=Binder.getCallingPid();
    final int callingUid=Binder.getCallingUid();
    final long origId=Binder.clearCallingIdentity();
    int res=broadcastIntentLocked(callerApp,callerApp != null ? callerApp.info.packageName : null,intent,resolvedType,resultTo,resultCode,resultData,resultExtras,requiredPermissions,appOp,bOptions,serialized,sticky,callingPid,callingUid,userId);
    Binder.restoreCallingIdentity(origId);
    return res;
  }
}
