{
  if (mSleeping && !shouldSleepLocked()) {
    mSleeping=false;
    mStackSupervisor.comeOutOfSleepIfNeededLocked();
  }
 else   if (!mSleeping && shouldSleepLocked()) {
    mSleeping=true;
    mStackSupervisor.goingToSleepLocked();
    checkExcessivePowerUsageLocked(false);
    mHandler.removeMessages(CHECK_EXCESSIVE_WAKE_LOCKS_MSG);
    Message nmsg=mHandler.obtainMessage(CHECK_EXCESSIVE_WAKE_LOCKS_MSG);
    mHandler.sendMessageDelayed(nmsg,POWER_CHECK_DELAY);
  }
}
