{
  checkCaller();
  int callingUser=UserHandle.getCallingUserId();
  TaskRecord tr;
  IApplicationThread appThread;
synchronized (ActivityManagerService.this) {
    tr=mStackSupervisor.anyTaskForIdLocked(mTaskId);
    if (tr == null) {
      throw new IllegalArgumentException("Unable to find task ID " + mTaskId);
    }
    appThread=ApplicationThreadNative.asInterface(whoThread);
    if (appThread == null) {
      throw new IllegalArgumentException("Bad app thread " + appThread);
    }
  }
  return mActivityStarter.startActivityMayWait(appThread,-1,callingPackage,intent,resolvedType,null,null,null,null,0,0,null,null,null,bOptions,false,callingUser,null,tr);
}
