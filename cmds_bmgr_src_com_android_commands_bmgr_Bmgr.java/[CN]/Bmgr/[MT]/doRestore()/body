{
  long token;
  try {
    token=Long.parseLong(nextArg(),16);
  }
 catch (  NumberFormatException e) {
    showUsage();
    return;
  }
  RestoreObserver observer=new RestoreObserver();
  try {
    boolean didRestore=false;
    String curTransport=mBmgr.getCurrentTransport();
    mRestore=mBmgr.beginRestoreSession(curTransport);
    if (mRestore == null) {
      System.err.println(BMGR_NOT_RUNNING_ERR);
      return;
    }
    RestoreSet[] sets=mRestore.getAvailableRestoreSets();
    if (sets != null) {
      for (      RestoreSet s : sets) {
        if (s.token == token) {
          System.out.println("Scheduling restore: " + s.name);
          didRestore=(mRestore.performRestore(token,observer) == 0);
          break;
        }
      }
    }
    if (!didRestore) {
      if (sets == null || sets.length == 0) {
        System.out.println("No available restore sets; no restore performed");
      }
 else {
        System.out.println("No matching restore set token.  Available sets:");
        printRestoreSets(sets);
      }
    }
    if (didRestore) {
synchronized (observer) {
        while (!observer.done) {
          try {
            observer.wait();
          }
 catch (          InterruptedException ex) {
          }
        }
      }
    }
    mRestore.endRestoreSession();
  }
 catch (  RemoteException e) {
    System.err.println(e.toString());
    System.err.println(BMGR_NOT_RUNNING_ERR);
  }
  System.out.println("done");
}
