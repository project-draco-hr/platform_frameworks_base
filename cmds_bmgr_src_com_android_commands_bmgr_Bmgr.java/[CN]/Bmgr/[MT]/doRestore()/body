{
  long token;
  try {
    token=Long.parseLong(nextArg());
  }
 catch (  NumberFormatException e) {
    showUsage();
    return;
  }
  RestoreObserver observer=new RestoreObserver();
  try {
    boolean didRestore=false;
    String curTransport=mBmgr.getCurrentTransport();
    mRestore=mBmgr.beginRestoreSession(curTransport);
    if (mRestore == null) {
      System.err.println(BMGR_NOT_RUNNING_ERR);
      return;
    }
    RestoreSet[] sets=mRestore.getAvailableRestoreSets();
    for (    RestoreSet s : sets) {
      if (s.token == token) {
        System.out.println("Scheduling restore: " + s.name);
        mRestore.performRestore(token,observer);
        didRestore=true;
        break;
      }
    }
    if (!didRestore) {
      if (sets == null || sets.length == 0) {
        System.out.println("No available restore sets; no restore performed");
      }
 else {
        System.out.println("No matching restore set token.  Available sets:");
        printRestoreSets(sets);
      }
    }
synchronized (observer) {
      while (!observer.done) {
        try {
          observer.wait();
        }
 catch (        InterruptedException ex) {
        }
      }
    }
    mRestore.endRestoreSession();
  }
 catch (  RemoteException e) {
    System.err.println(e.toString());
    System.err.println(BMGR_NOT_RUNNING_ERR);
  }
  System.out.println("done");
}
