{
  if (operations == null) {
    TestCase.fail("There is no operation.");
  }
  final int size=operations.size();
  ContentProviderResult[] fakeResultArray=new ContentProviderResult[size];
  for (int i=0; i < size; i++) {
    Uri uri=Uri.withAppendedPath(RawContacts.CONTENT_URI,String.valueOf(i));
    fakeResultArray[i]=new ContentProviderResult(uri);
  }
  for (int i=0; i < size; i++) {
    ContentProviderOperation operation=operations.get(i);
    ContentValues contentValues=operation.resolveValueBackReferences(fakeResultArray,i);
  }
  for (int i=0; i < size; i++) {
    ContentProviderOperation operation=operations.get(i);
    ContentValues actualContentValues=operation.resolveValueBackReferences(fakeResultArray,i);
    final Uri uri=operation.getUri();
    if (uri.equals(RawContacts.CONTENT_URI)) {
      TestCase.assertNull(actualContentValues.get(RawContacts.ACCOUNT_NAME));
      TestCase.assertNull(actualContentValues.get(RawContacts.ACCOUNT_TYPE));
    }
 else     if (uri.equals(Data.CONTENT_URI)) {
      final String mimeType=actualContentValues.getAsString(Data.MIMETYPE);
      if (!sKnownMimeTypeSet.contains(mimeType)) {
        TestCase.fail(String.format("Unknown MimeType %s. Probably added after developing this test",mimeType));
      }
      Set<String> keyToBeRemoved=new HashSet<String>();
      for (      Entry<String,Object> entry : actualContentValues.valueSet()) {
        Object value=entry.getValue();
        if (value == null || TextUtils.isEmpty(value.toString())) {
          keyToBeRemoved.add(entry.getKey());
        }
      }
      for (      String key : keyToBeRemoved) {
        actualContentValues.remove(key);
      }
      if (actualContentValues.containsKey(Data.RAW_CONTACT_ID)) {
        actualContentValues.remove(Data.RAW_CONTACT_ID);
      }
      final Collection<ContentValues> contentValuesCollection=mMimeTypeToExpectedContentValues.get(mimeType);
      if (contentValuesCollection.isEmpty()) {
        TestCase.fail("ContentValues for MimeType " + mimeType + " is not expected at all ("+ actualContentValues+ ")");
      }
      boolean checked=false;
      for (      ContentValues expectedContentValues : contentValuesCollection) {
        if (equalsForContentValues(expectedContentValues,actualContentValues)) {
          TestCase.assertTrue(contentValuesCollection.remove(expectedContentValues));
          checked=true;
          break;
        }
      }
      if (!checked) {
        final StringBuilder builder=new StringBuilder();
        builder.append("\n");
        builder.append("Unexpected: ");
        builder.append(convertToEasilyReadableString(actualContentValues));
        builder.append("\n");
        builder.append("Expected  : ");
        for (        ContentValues expectedContentValues : contentValuesCollection) {
          builder.append(convertToEasilyReadableString(expectedContentValues));
        }
        TestCase.fail(builder.toString());
      }
    }
 else {
      TestCase.fail("Unexpected Uri has come: " + uri);
    }
  }
  return fakeResultArray;
}
