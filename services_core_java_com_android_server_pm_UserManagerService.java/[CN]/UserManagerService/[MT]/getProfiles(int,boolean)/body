{
  if (userId != UserHandle.getCallingUserId()) {
    checkManageOrCreateUsersPermission("getting profiles related to user " + userId);
  }
  final long ident=Binder.clearCallingIdentity();
  try {
synchronized (mPackagesLock) {
      return getProfilesLocked(userId,enabledOnly);
    }
  }
  finally {
    Binder.restoreCallingIdentity(ident);
  }
}
