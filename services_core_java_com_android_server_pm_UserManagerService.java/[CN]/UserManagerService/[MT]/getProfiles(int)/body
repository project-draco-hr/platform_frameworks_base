{
  checkManageUsersPermission("query users");
synchronized (mPackagesLock) {
    UserInfo user=getUserInfoLocked(userId);
    ArrayList<UserInfo> users=new ArrayList<UserInfo>(mUsers.size());
    for (int i=0; i < mUsers.size(); i++) {
      UserInfo profile=mUsers.valueAt(i);
      if (!isProfileOf(user,profile)) {
        continue;
      }
      users.add(profile);
    }
    return users;
  }
}
