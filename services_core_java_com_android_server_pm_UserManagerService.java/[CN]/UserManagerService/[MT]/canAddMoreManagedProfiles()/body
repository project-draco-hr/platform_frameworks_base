{
  checkManageUsersPermission("check if more managed profiles can be added.");
  if (ActivityManager.isLowRamDeviceStatic()) {
    return false;
  }
  if (!mContext.getPackageManager().hasSystemFeature(PackageManager.FEATURE_MANAGED_USERS)) {
    return false;
  }
synchronized (mPackagesLock) {
    if (numberOfUsersOfTypeLocked(UserInfo.FLAG_MANAGED_PROFILE,true) >= MAX_MANAGED_PROFILES) {
      return false;
    }
    int usersCount=getAliveUsersExcludingGuestsCountLocked();
    return usersCount == 1 || usersCount < UserManager.getMaxSupportedUsers();
  }
}
