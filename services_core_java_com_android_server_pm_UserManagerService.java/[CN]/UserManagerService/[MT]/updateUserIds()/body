{
  int num=0;
synchronized (mUsersLock) {
    final int userSize=mUsers.size();
    for (int i=0; i < userSize; i++) {
      if (!mUsers.valueAt(i).info.partial) {
        num++;
      }
    }
    final int[] newUsers=new int[num];
    int n=0;
    for (int i=0; i < userSize; i++) {
      if (!mUsers.valueAt(i).info.partial) {
        newUsers[n++]=mUsers.keyAt(i);
      }
    }
    mUserIds=newUsers;
  }
}
