{
  String iconPath;
synchronized (mPackagesLock) {
    UserInfo targetUserInfo=getUserInfoNoChecks(targetUserId);
    if (targetUserInfo == null || targetUserInfo.partial) {
      Slog.w(LOG_TAG,"getUserIcon: unknown user #" + targetUserId);
      return null;
    }
    final int callingUserId=UserHandle.getCallingUserId();
    final int callingGroupId=getUserInfoNoChecks(callingUserId).profileGroupId;
    final int targetGroupId=targetUserInfo.profileGroupId;
    final boolean sameGroup=(callingGroupId != UserInfo.NO_PROFILE_GROUP_ID && callingGroupId == targetGroupId);
    if ((callingUserId != targetUserId) && !sameGroup) {
      checkManageUsersPermission("get the icon of a user who is not related");
    }
    if (targetUserInfo.iconPath == null) {
      return null;
    }
    iconPath=targetUserInfo.iconPath;
  }
  try {
    return ParcelFileDescriptor.open(new File(iconPath),ParcelFileDescriptor.MODE_READ_ONLY);
  }
 catch (  FileNotFoundException e) {
    Log.e(LOG_TAG,"Couldn't find icon file",e);
  }
  return null;
}
