{
  if (DBG) {
    Log.d(LOG_TAG,"updateUserRestrictionsInternalLocked userId=" + userId + " bundle="+ newRestrictions);
  }
  final Bundle prevRestrictions=getEffectiveUserRestrictions(userId);
  if (newRestrictions != null) {
    Preconditions.checkState(mBaseUserRestrictions.get(userId) != newRestrictions);
    Preconditions.checkState(mCachedEffectiveUserRestrictions.get(userId) != newRestrictions);
    mBaseUserRestrictions.put(userId,newRestrictions);
  }
  mCachedEffectiveUserRestrictions.put(userId,computeEffectiveUserRestrictionsRL(userId));
  applyUserRestrictionsRL(userId,mBaseUserRestrictions.get(userId),prevRestrictions);
}
