{
  UserInfo user=getUserInfoLU(userId);
  ArrayList<UserInfo> users=new ArrayList<UserInfo>(mUsers.size());
  if (user == null) {
    return users;
  }
  final int userSize=mUsers.size();
  for (int i=0; i < userSize; i++) {
    UserInfo profile=mUsers.valueAt(i).info;
    if (!isProfileOf(user,profile)) {
      continue;
    }
    if (enabledOnly && !profile.isEnabled()) {
      continue;
    }
    if (mRemovingUserIds.get(profile.id)) {
      continue;
    }
    if (profile.partial) {
      continue;
    }
    UserInfo userInfo=userWithName(profile);
    if (!fullInfo) {
      userInfo=new UserInfo(userInfo);
      userInfo.name=null;
      userInfo.iconPath=null;
    }
    users.add(userInfo);
  }
  return users;
}
