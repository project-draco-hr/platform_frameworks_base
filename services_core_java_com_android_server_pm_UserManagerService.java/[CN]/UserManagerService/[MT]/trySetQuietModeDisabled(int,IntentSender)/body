{
  checkManageUsersPermission("silence profile");
  if (StorageManager.isUserKeyUnlocked(userHandle) || !mLockPatternUtils.isSecure(userHandle)) {
    setQuietModeEnabled(userHandle,false);
    return true;
  }
  long identity=Binder.clearCallingIdentity();
  try {
    final KeyguardManager km=(KeyguardManager)mContext.getSystemService(Context.KEYGUARD_SERVICE);
    final Intent unlockIntent=km.createConfirmDeviceCredentialIntent(null,null,userHandle);
    if (unlockIntent == null) {
      return false;
    }
    final Intent callBackIntent=new Intent(ACTION_DISABLE_QUIET_MODE_AFTER_UNLOCK);
    if (target != null) {
      callBackIntent.putExtra(Intent.EXTRA_INTENT,target);
    }
    callBackIntent.putExtra(Intent.EXTRA_USER_ID,userHandle);
    callBackIntent.setPackage(mContext.getPackageName());
    callBackIntent.addFlags(Intent.FLAG_RECEIVER_FOREGROUND);
    final PendingIntent pendingIntent=PendingIntent.getBroadcast(mContext,0,callBackIntent,PendingIntent.FLAG_CANCEL_CURRENT | PendingIntent.FLAG_ONE_SHOT | PendingIntent.FLAG_IMMUTABLE);
    unlockIntent.putExtra(Intent.EXTRA_INTENT,pendingIntent.getIntentSender());
    unlockIntent.setFlags(FLAG_ACTIVITY_NEW_TASK | FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);
    mContext.startActivity(unlockIntent);
  }
  finally {
    Binder.restoreCallingIdentity(identity);
  }
  return false;
}
