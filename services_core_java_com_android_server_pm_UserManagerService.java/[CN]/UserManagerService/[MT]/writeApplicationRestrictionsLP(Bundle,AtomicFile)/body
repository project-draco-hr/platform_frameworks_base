{
  FileOutputStream fos=null;
  try {
    fos=restrictionsFile.startWrite();
    final BufferedOutputStream bos=new BufferedOutputStream(fos);
    final XmlSerializer serializer=new FastXmlSerializer();
    serializer.setOutput(bos,StandardCharsets.UTF_8.name());
    serializer.startDocument(null,true);
    serializer.setFeature("http://xmlpull.org/v1/doc/features.html#indent-output",true);
    serializer.startTag(null,TAG_RESTRICTIONS);
    writeBundle(restrictions,serializer);
    serializer.endTag(null,TAG_RESTRICTIONS);
    serializer.endDocument();
    restrictionsFile.finishWrite(fos);
  }
 catch (  Exception e) {
    restrictionsFile.failWrite(fos);
    Slog.e(LOG_TAG,"Error writing application restrictions list",e);
  }
}
