{
  if (UserHandle.getCallingUserId() != userId || !UserHandle.isSameApp(Binder.getCallingUid(),getUidForPackage(packageName))) {
    checkManageUsersPermission("Only system can set restrictions for other users/apps");
  }
synchronized (mPackagesLock) {
    writeApplicationRestrictionsLocked(packageName,restrictions,userId);
  }
}
