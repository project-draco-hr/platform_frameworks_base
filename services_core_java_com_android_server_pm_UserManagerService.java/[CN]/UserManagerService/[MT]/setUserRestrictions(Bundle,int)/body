{
  checkManageUsersPermission("setUserRestrictions");
  if (restrictions == null)   return;
synchronized (mPackagesLock) {
    final Bundle oldUserRestrictions=mUserRestrictions.get(userId);
    for (    String key : SYSTEM_CONTROLLED_RESTRICTIONS) {
      restrictions.remove(key);
      if (oldUserRestrictions.containsKey(key)) {
        restrictions.putBoolean(key,oldUserRestrictions.getBoolean(key));
      }
    }
    setUserRestrictionsInternalLocked(restrictions,userId);
  }
}
