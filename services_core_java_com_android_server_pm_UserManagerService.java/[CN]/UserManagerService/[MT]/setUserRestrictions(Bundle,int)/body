{
  checkManageUsersPermission("setUserRestrictions");
  if (restrictions == null)   return;
synchronized (mPackagesLock) {
    mUserRestrictions.get(userId).clear();
    mUserRestrictions.get(userId).putAll(restrictions);
    long token=Binder.clearCallingIdentity();
    try {
      mAppOpsService.setUserRestrictions(mUserRestrictions.get(userId),userId);
    }
 catch (    RemoteException e) {
      Log.w(LOG_TAG,"Unable to notify AppOpsService of UserRestrictions");
    }
 finally {
      Binder.restoreCallingIdentity(token);
    }
    scheduleWriteUserLocked(mUsers.get(userId));
  }
}
