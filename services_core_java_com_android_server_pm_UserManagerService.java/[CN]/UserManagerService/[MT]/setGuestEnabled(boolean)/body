{
  checkManageUsersPermission("enable guest users");
synchronized (mPackagesLock) {
    if (mGuestEnabled != enable) {
      mGuestEnabled=enable;
      for (int i=0; i < mUsers.size(); i++) {
        UserInfo user=mUsers.valueAt(i);
        if (!user.partial && user.isGuest()) {
          if (!enable) {
            removeUser(user.id);
          }
          return;
        }
      }
      if (enable) {
        createUser("Guest",UserInfo.FLAG_GUEST);
      }
    }
  }
}
