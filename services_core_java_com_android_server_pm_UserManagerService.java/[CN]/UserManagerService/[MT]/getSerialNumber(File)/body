{
  try {
    final byte[] buf=new byte[256];
    final int len=Os.getxattr(file.getAbsolutePath(),XATTR_SERIAL,buf);
    final String serial=new String(buf,0,len);
    try {
      return Integer.parseInt(serial);
    }
 catch (    NumberFormatException e) {
      throw new IOException("Bad serial number: " + serial);
    }
  }
 catch (  ErrnoException e) {
    if (e.errno == OsConstants.ENODATA) {
      return -1;
    }
 else {
      throw e.rethrowAsIOException();
    }
  }
}
