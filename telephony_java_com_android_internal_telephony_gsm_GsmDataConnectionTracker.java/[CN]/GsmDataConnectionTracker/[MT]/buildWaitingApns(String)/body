{
  ArrayList<ApnSetting> apnList=new ArrayList<ApnSetting>();
  if (requestedApnType.equals(Phone.APN_TYPE_DUN)) {
    ApnSetting dun=fetchDunApn();
    if (dun != null)     apnList.add(dun);
    if (DBG)     log("buildWaitingApns: X added APN_TYPE_DUN apnList=" + apnList);
    return apnList;
  }
  String operator=mPhone.mIccRecords.getOperatorNumeric();
  if (requestedApnType.equals(Phone.APN_TYPE_DEFAULT)) {
    if (canSetPreferApn && mPreferredApn != null) {
      if (DBG) {
        log("buildWaitingApns: Preferred APN:" + operator + ":"+ mPreferredApn.numeric+ ":"+ mPreferredApn);
      }
      if (mPreferredApn.numeric.equals(operator)) {
        apnList.add(mPreferredApn);
        if (DBG)         log("buildWaitingApns: X added preferred apnList=" + apnList);
        return apnList;
      }
 else {
        if (DBG)         log("buildWaitingApns: no preferred APN");
        setPreferredApn(-1);
        mPreferredApn=null;
      }
    }
  }
  if (mAllApns != null) {
    for (    ApnSetting apn : mAllApns) {
      if (apn.canHandleType(requestedApnType)) {
        apnList.add(apn);
      }
    }
  }
 else {
    loge("mAllApns is empty!");
  }
  if (DBG)   log("buildWaitingApns: X apnList=" + apnList);
  return apnList;
}
