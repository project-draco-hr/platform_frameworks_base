{
  ArrayList<ApnSetting> apnList=new ArrayList<ApnSetting>();
  if (requestedApnType.equals(Phone.APN_TYPE_DUN)) {
    ApnSetting dun=fetchDunApn();
    if (dun != null)     apnList.add(dun);
    return apnList;
  }
  String operator=mGsmPhone.mSIMRecords.getSIMOperatorNumeric();
  if (requestedApnType.equals(Phone.APN_TYPE_DEFAULT)) {
    if (canSetPreferApn && mPreferredApn != null) {
      log("Preferred APN:" + operator + ":"+ mPreferredApn.numeric+ ":"+ mPreferredApn);
      if (mPreferredApn.numeric.equals(operator)) {
        log("Waiting APN set to preferred APN");
        apnList.add(mPreferredApn);
        return apnList;
      }
 else {
        setPreferredApn(-1);
        mPreferredApn=null;
      }
    }
  }
  if (mAllApns != null) {
    for (    ApnSetting apn : mAllApns) {
      if (apn.canHandleType(requestedApnType)) {
        apnList.add(apn);
      }
    }
  }
  return apnList;
}
