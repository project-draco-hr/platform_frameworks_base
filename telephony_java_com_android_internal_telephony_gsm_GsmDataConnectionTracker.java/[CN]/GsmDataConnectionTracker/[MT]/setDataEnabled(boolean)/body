{
  boolean isEnabled=isEnabled(Phone.APN_TYPE_DEFAULT);
  Log.d(LOG_TAG,"setDataEnabled(" + enable + ") isEnabled="+ isEnabled);
  if (!isEnabled && enable) {
    setEnabled(Phone.APN_TYPE_DEFAULT,true);
    sendMessage(obtainMessage(EVENT_TRY_SETUP_DATA));
    return true;
  }
 else   if (!enable) {
    setEnabled(Phone.APN_TYPE_DEFAULT,false);
    if ((isApnTypeActive(Phone.APN_TYPE_MMS) && isEnabled(Phone.APN_TYPE_MMS)) || (isApnTypeActive(Phone.APN_TYPE_SUPL) && isEnabled(Phone.APN_TYPE_SUPL)) || (isApnTypeActive(Phone.APN_TYPE_DEFAULT_FEATURE) && isEnabled(Phone.APN_TYPE_DEFAULT_FEATURE))) {
      return false;
    }
    Message msg=obtainMessage(EVENT_CLEAN_UP_CONNECTION);
    msg.arg1=1;
    msg.obj=Phone.REASON_DATA_DISABLED;
    sendMessage(msg);
    return true;
  }
 else {
    return true;
  }
}
