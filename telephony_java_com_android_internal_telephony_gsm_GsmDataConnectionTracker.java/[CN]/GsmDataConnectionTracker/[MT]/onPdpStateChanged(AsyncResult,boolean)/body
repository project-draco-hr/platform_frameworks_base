{
  ArrayList<DataCallState> pdpStates;
  pdpStates=(ArrayList<DataCallState>)(ar.result);
  if (ar.exception != null) {
    return;
  }
  if (state == State.CONNECTED) {
    if (!pdpStatesHasCID(pdpStates,cidActive)) {
      Log.i(LOG_TAG,"PDP connection has dropped. Reconnecting");
      int cid=-1;
      GsmCellLocation loc=((GsmCellLocation)phone.getCellLocation());
      if (loc != null)       cid=loc.getCid();
      EventLog.List val=new EventLog.List(cid,TelephonyManager.getDefault().getNetworkType());
      EventLog.writeEvent(TelephonyEventLog.EVENT_LOG_PDP_NETWORK_DROP,val);
      cleanUpConnection(true,null);
      return;
    }
 else     if (!pdpStatesHasActiveCID(pdpStates,cidActive)) {
      if (!explicitPoll) {
        phone.mCM.getPDPContextList(this.obtainMessage(EVENT_GET_PDP_LIST_COMPLETE));
      }
 else {
        Log.i(LOG_TAG,"PDP connection has dropped (active=false case). " + " Reconnecting");
        int cid=-1;
        GsmCellLocation loc=((GsmCellLocation)phone.getCellLocation());
        if (loc != null)         cid=loc.getCid();
        EventLog.List val=new EventLog.List(cid,TelephonyManager.getDefault().getNetworkType());
        EventLog.writeEvent(TelephonyEventLog.EVENT_LOG_PDP_NETWORK_DROP,val);
        cleanUpConnection(true,null);
      }
    }
  }
}
