{
  for (  ApnContext apnContext : mApnContexts.values()) {
    if (apnContext.isReady()) {
      if (apnContext.getState() == State.FAILED) {
        cleanApnContextBeforeRestart(apnContext);
        if (apnContext.getDataConnection() != null) {
          apnContext.getDataConnection().resetRetryCount();
        }
      }
      if (apnContext.getState() == State.IDLE) {
        apnContext.setReason(reason);
        trySetupData(apnContext);
      }
    }
  }
}
