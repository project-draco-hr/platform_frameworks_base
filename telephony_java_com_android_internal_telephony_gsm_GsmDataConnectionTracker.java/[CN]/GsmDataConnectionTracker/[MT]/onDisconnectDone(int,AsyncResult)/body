{
  ApnContext apnContext=null;
  if (DBG)   log("EVENT_DISCONNECT_DONE connId=" + connId);
  if (ar.userObj instanceof ApnContext) {
    apnContext=(ApnContext)ar.userObj;
  }
  mPhone.notifyDataConnection(apnContext.getReason(),apnContext.getApnType());
  if (apnContext.getPendingAction() == ApnContext.PENDING_ACTION_APN_DISABLE) {
    mApnContexts.remove(apnContext.getApnType());
    return;
  }
  apnContext.setState(State.IDLE);
  apnContext.setApnSetting(null);
  if (TextUtils.equals(apnContext.getApnType(),Phone.APN_TYPE_DEFAULT) && retryAfterDisconnected(apnContext.getReason())) {
    SystemProperties.set("gsm.defaultpdpcontext.active","false");
    trySetupData(apnContext);
  }
 else   if (apnContext.getPendingAction() == ApnContext.PENDING_ACTION_RECONNECT) {
    apnContext.setPendingAction(ApnContext.PENDING_ACTION_NONE);
    trySetupData(apnContext);
  }
}
