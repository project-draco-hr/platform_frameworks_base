{
  ArrayList<ApnSetting> apnList=new ArrayList<ApnSetting>();
  if (mRequestedApnType.equals(Phone.APN_TYPE_DUN)) {
    ApnSetting dun=fetchDunApn();
    if (dun != null)     apnList.add(dun);
    return apnList;
  }
  String operator=mGsmPhone.mSIMRecords.getSIMOperatorNumeric();
  if (mRequestedApnType.equals(Phone.APN_TYPE_DEFAULT)) {
    if (canSetPreferApn && preferredApn != null) {
      Log.i(LOG_TAG,"Preferred APN:" + operator + ":"+ preferredApn.numeric+ ":"+ preferredApn);
      if (preferredApn.numeric.equals(operator)) {
        Log.i(LOG_TAG,"Waiting APN set to preferred APN");
        apnList.add(preferredApn);
        return apnList;
      }
 else {
        setPreferredApn(-1);
        preferredApn=null;
      }
    }
  }
  if (allApns != null) {
    for (    ApnSetting apn : allApns) {
      if (apn.canHandleType(mRequestedApnType)) {
        apnList.add(apn);
      }
    }
  }
  return apnList;
}
