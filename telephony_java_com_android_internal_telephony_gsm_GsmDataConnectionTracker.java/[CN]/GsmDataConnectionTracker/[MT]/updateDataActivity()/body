{
  long sent, received;
  Activity newActivity;
  TxRxSum preTxRxSum=new TxRxSum(mTxPkts,mRxPkts);
  TxRxSum curTxRxSum=new TxRxSum();
  curTxRxSum.updateTxRxSum();
  mTxPkts=curTxRxSum.txPkts;
  mRxPkts=curTxRxSum.rxPkts;
  if (VDBG) {
    log("updateDataActivity: curTxRxSum=" + curTxRxSum + " preTxRxSum="+ preTxRxSum);
  }
  if (mNetStatPollEnabled && (preTxRxSum.txPkts > 0 || preTxRxSum.rxPkts > 0)) {
    sent=mTxPkts - preTxRxSum.txPkts;
    received=mRxPkts - preTxRxSum.rxPkts;
    if (VDBG)     log("updateDataActivity: sent=" + sent + " received="+ received);
    if (sent > 0 && received > 0) {
      newActivity=Activity.DATAINANDOUT;
    }
 else     if (sent > 0 && received == 0) {
      newActivity=Activity.DATAOUT;
    }
 else     if (sent == 0 && received > 0) {
      newActivity=Activity.DATAIN;
    }
 else {
      newActivity=Activity.NONE;
    }
    if (mActivity != newActivity && mIsScreenOn) {
      if (VDBG)       log("updateDataActivity: newActivity=" + newActivity);
      mActivity=newActivity;
      mPhone.notifyDataActivity();
    }
  }
}
