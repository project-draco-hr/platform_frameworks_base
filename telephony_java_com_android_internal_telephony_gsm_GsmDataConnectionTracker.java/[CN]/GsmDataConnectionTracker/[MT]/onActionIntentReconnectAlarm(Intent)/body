{
  if (DBG)   log("GPRS reconnect alarm. Previous state was " + mState);
  String reason=intent.getStringExtra(INTENT_RECONNECT_ALARM_EXTRA_REASON);
  String type=intent.getStringExtra(INTENT_RECONNECT_ALARM_EXTRA_TYPE);
  ApnContext apnContext=mApnContexts.get(type);
  if (apnContext != null) {
    apnContext.setReason(reason);
    if (apnContext.getState() == State.FAILED) {
      Message msg=obtainMessage(EVENT_CLEAN_UP_CONNECTION);
      msg.arg1=0;
      msg.obj=(ApnContext)apnContext;
      sendMessage(msg);
    }
    sendMessage(obtainMessage(EVENT_TRY_SETUP_DATA,apnContext));
  }
}
