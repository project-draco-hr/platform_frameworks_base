{
  boolean isConnecting=false;
  Iterator<ApnContext> it=mApnContexts.values().iterator();
  while (it.hasNext()) {
    ApnContext apnContext=it.next();
    if (apnContext.getState() == State.CONNECTED || apnContext.getState() == State.DISCONNECTING) {
      if (DBG)       log("overall state is CONNECTED");
      return State.CONNECTED;
    }
 else     if (apnContext.getState() == State.CONNECTING || apnContext.getState() == State.INITING) {
      isConnecting=true;
    }
  }
  if (isConnecting) {
    if (DBG)     log("overall state is CONNECTING");
    return State.CONNECTING;
  }
 else {
    if (DBG)     log("overall state is IDLE");
    return State.IDLE;
  }
}
