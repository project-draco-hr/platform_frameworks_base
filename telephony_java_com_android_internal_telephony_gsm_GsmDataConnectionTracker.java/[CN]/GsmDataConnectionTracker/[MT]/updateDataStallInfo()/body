{
  long sent, received;
  TxRxSum preTxRxSum=new TxRxSum(mDataStallTxRxSum);
  mDataStallTxRxSum.updateTxRxSum();
  if (VDBG) {
    log("updateDataStallInfo: mDataStallTxRxSum=" + mDataStallTxRxSum + " preTxRxSum="+ preTxRxSum);
  }
  sent=mDataStallTxRxSum.txPkts - preTxRxSum.txPkts;
  received=mDataStallTxRxSum.rxPkts - preTxRxSum.rxPkts;
  if (VDBG) {
    if (SystemProperties.getBoolean("radio.test.data.stall",false)) {
      log("updateDataStallInfo: radio.test.data.stall true received = 0;");
      received=0;
    }
  }
  if (sent > 0 && received > 0) {
    if (VDBG)     log("updateDataStallInfo: IN/OUT");
    mSentSinceLastRecv=0;
    putRecoveryAction(RecoveryAction.GET_DATA_CALL_LIST);
  }
 else   if (sent > 0 && received == 0) {
    if (mPhone.getState() == Phone.State.IDLE) {
      mSentSinceLastRecv+=sent;
    }
 else {
      mSentSinceLastRecv=0;
    }
    if (DBG) {
      log("updateDataStallInfo: OUT sent=" + sent + " mSentSinceLastRecv="+ mSentSinceLastRecv);
    }
  }
 else   if (sent == 0 && received > 0) {
    if (VDBG)     log("updateDataStallInfo: IN");
    mSentSinceLastRecv=0;
    putRecoveryAction(RecoveryAction.GET_DATA_CALL_LIST);
  }
 else {
    if (VDBG)     log("updateDataStallInfo: NONE");
  }
}
