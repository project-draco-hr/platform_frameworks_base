{
  boolean roaming=mPhone.getServiceState().getRoaming();
  if (mGsmPhone.mSIMRecords.getRecordsLoaded() && mGsmPhone.mSST.getCurrentGprsState() == ServiceState.STATE_IN_SERVICE && (!roaming || getDataOnRoamingEnabled()) && !mIsWifiConnected && !mIsPsRestricted) {
    return (mState == State.CONNECTED);
  }
  return true;
}
