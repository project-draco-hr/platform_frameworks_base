{
  if (DBG)   log("GSMDataConnTrack handleMessage " + msg);
  if (!mGsmPhone.mIsTheCurrentActivePhone) {
    log("Ignore GSM msgs since GSM phone is inactive");
    return;
  }
switch (msg.what) {
case EVENT_RECORDS_LOADED:
    onRecordsLoaded();
  break;
case EVENT_GPRS_DETACHED:
onGprsDetached();
break;
case EVENT_GPRS_ATTACHED:
onGprsAttached();
break;
case EVENT_DATA_STATE_CHANGED:
onDataStateChanged((AsyncResult)msg.obj,false);
break;
case EVENT_GET_PDP_LIST_COMPLETE:
onDataStateChanged((AsyncResult)msg.obj,true);
break;
case EVENT_POLL_PDP:
onPollPdp();
break;
case EVENT_START_NETSTAT_POLL:
startNetStatPoll();
break;
case EVENT_START_RECOVERY:
doRecovery();
break;
case EVENT_APN_CHANGED:
onApnChanged();
break;
case EVENT_PS_RESTRICT_ENABLED:
log("[DSAC DEB] " + "EVENT_PS_RESTRICT_ENABLED " + mIsPsRestricted);
stopNetStatPoll();
mIsPsRestricted=true;
break;
case EVENT_PS_RESTRICT_DISABLED:
log("[DSAC DEB] " + "EVENT_PS_RESTRICT_DISABLED " + mIsPsRestricted);
mIsPsRestricted=false;
if (mState == State.CONNECTED) {
startNetStatPoll();
}
 else {
if (mState == State.FAILED) {
cleanUpConnection(false,Phone.REASON_PS_RESTRICT_ENABLED);
mRetryMgr.resetRetryCount();
mReregisterOnReconnectFailure=false;
}
trySetupData(Phone.REASON_PS_RESTRICT_ENABLED);
}
break;
default :
super.handleMessage(msg);
break;
}
}
