{
  mAllApns=new ArrayList<ApnSetting>();
  String operator=mGsmPhone.mSIMRecords.getSIMOperatorNumeric();
  if (operator != null) {
    String selection="numeric = '" + operator + "'";
    Cursor cursor=mPhone.getContext().getContentResolver().query(Telephony.Carriers.CONTENT_URI,null,selection,null,null);
    if (cursor != null) {
      if (cursor.getCount() > 0) {
        mAllApns=createApnList(cursor);
      }
      cursor.close();
    }
  }
  if (mAllApns.isEmpty()) {
    if (DBG)     log("No APN found for carrier: " + operator);
    mPreferredApn=null;
    notifyNoData(GsmDataConnection.FailCause.MISSING_UNKNOWN_APN);
  }
 else {
    mPreferredApn=getPreferredApn();
    log("Get PreferredAPN");
    if (mPreferredApn != null && !mPreferredApn.numeric.equals(operator)) {
      mPreferredApn=null;
      setPreferredApn(-1);
    }
  }
}
