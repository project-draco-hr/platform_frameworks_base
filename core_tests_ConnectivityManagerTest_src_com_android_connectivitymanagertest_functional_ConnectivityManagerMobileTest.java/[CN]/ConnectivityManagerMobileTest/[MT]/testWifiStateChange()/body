{
  assertNotNull("SSID is null",mTestAccessPoint);
  assertTrue("failed to enable wifi",enableWifi());
  assertTrue("wifi not enabled",waitForWifiState(WifiManager.WIFI_STATE_ENABLED,LONG_TIMEOUT));
  assertTrue("failed to connect to " + mTestAccessPoint,connectToWifi(mTestAccessPoint));
  assertTrue(waitForNetworkState(ConnectivityManager.TYPE_WIFI,State.CONNECTED,WIFI_CONNECTION_TIMEOUT));
  assertNotNull("not associated with any AP",mWifiManager.getConnectionInfo().getBSSID());
  assertTrue("failed to disconnect from AP",disconnectAP());
  assertTrue("failed to disable wifi",disableWifi());
  assertTrue("wifi state not disabled",waitForWifiState(WifiManager.WIFI_STATE_DISABLED,LONG_TIMEOUT));
}
