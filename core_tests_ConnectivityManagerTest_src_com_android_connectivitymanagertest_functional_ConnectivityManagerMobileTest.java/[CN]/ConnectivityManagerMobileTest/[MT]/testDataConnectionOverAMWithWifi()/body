{
  assertNotNull("SSID is null",mSsid);
  mCm.setAirplaneMode(true);
  assertTrue("still has active network connection",waitUntilNoActiveNetworkConnection(LONG_TIMEOUT));
  assertTrue("failed to connect to " + mSsid,connectToWifi(mSsid,mPassword));
  assertTrue("wifi not connected",waitForNetworkState(ConnectivityManager.TYPE_WIFI,State.CONNECTED,WIFI_CONNECTION_TIMEOUT));
  assertTrue("no network connectivity after wifi enable",checkNetworkConnectivity());
  mCm.setAirplaneMode(false);
}
