{
  boolean isCdmaDataConnectionTracker=false;
  if (mDataConnection instanceof CdmaDataConnectionTracker) {
    isCdmaDataConnectionTracker=true;
  }
  log("getDataConnectionState");
  DataState ret=DataState.DISCONNECTED;
  if (!isCdmaDataConnectionTracker && (SystemProperties.get("adb.connected","").length() > 0)) {
    ret=DataState.CONNECTED;
  }
 else   if (mSST == null) {
    ret=DataState.DISCONNECTED;
  }
 else   if (mSST.getCurrentCdmaDataConnectionState() != ServiceState.STATE_IN_SERVICE) {
    ret=DataState.DISCONNECTED;
  }
 else   if (mDataConnection.isApnTypeEnabled(apnType) == false) {
    ret=DataState.DISCONNECTED;
  }
 else {
    DataConnectionTracker.State state;
    if (isCdmaDataConnectionTracker) {
      state=mDataConnection.getState();
    }
 else {
      state=((GsmDataConnectionTracker)mDataConnection).getState(apnType);
    }
switch (state) {
case FAILED:
case IDLE:
      ret=DataState.DISCONNECTED;
    break;
case CONNECTED:
case DISCONNECTING:
  if (mCT.state != Phone.State.IDLE && !mSST.isConcurrentVoiceAndDataAllowed()) {
    ret=DataState.SUSPENDED;
  }
 else {
    ret=DataState.CONNECTED;
  }
break;
case INITING:
case CONNECTING:
case SCANNING:
ret=DataState.CONNECTING;
break;
}
}
return ret;
}
