{
synchronized (sManagerCache) {
    if (sService == null) {
      IBinder b=ServiceManager.getService(Context.APPWIDGET_SERVICE);
      sService=IAppWidgetService.Stub.asInterface(b);
    }
    WeakReference<AppWidgetManager> ref=sManagerCache.get(context);
    AppWidgetManager result=null;
    if (ref != null) {
      result=ref.get();
    }
    if (result == null) {
      result=new AppWidgetManager(context);
      sManagerCache.put(context,new WeakReference<AppWidgetManager>(result));
    }
    return result;
  }
}
