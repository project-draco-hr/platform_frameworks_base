{
  super(context);
  if (RILJ_LOGD) {
    riljLog("RIL(context, preferredNetworkType=" + preferredNetworkType + " cdmaSubscription="+ cdmaSubscription+ ")");
  }
  mCdmaSubscription=cdmaSubscription;
  mPreferredNetworkType=preferredNetworkType;
  mPhoneType=RILConstants.NO_PHONE;
  PowerManager pm=(PowerManager)context.getSystemService(Context.POWER_SERVICE);
  mWakeLock=pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,LOG_TAG);
  mWakeLock.setReferenceCounted(false);
  mWakeLockTimeout=SystemProperties.getInt(TelephonyProperties.PROPERTY_WAKE_LOCK_TIMEOUT,DEFAULT_WAKE_LOCK_TIMEOUT);
  mRequestMessagesPending=0;
  mRequestMessagesWaiting=0;
  mSenderThread=new HandlerThread("RILSender");
  mSenderThread.start();
  Looper looper=mSenderThread.getLooper();
  mSender=new RILSender(looper);
  ConnectivityManager cm=(ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
  if (cm.isNetworkSupported(ConnectivityManager.TYPE_MOBILE) == false) {
    riljLog("Not starting RILReceiver: wifi-only");
  }
 else {
    riljLog("Starting RILReceiver");
    mReceiver=new RILReceiver();
    mReceiverThread=new Thread(mReceiver,"RILReceiver");
    mReceiverThread.start();
    IntentFilter filter=new IntentFilter();
    filter.addAction(Intent.ACTION_SCREEN_ON);
    filter.addAction(Intent.ACTION_SCREEN_OFF);
    context.registerReceiver(mIntentReceiver,filter);
  }
}
