{
  float scale=mWindowScale * mLiveScale;
  if (mWidth * scale > mDefaultDisplayInfo.logicalWidth) {
    scale=mDefaultDisplayInfo.logicalWidth / mWidth;
  }
  if (mHeight * scale > mDefaultDisplayInfo.logicalHeight) {
    scale=mDefaultDisplayInfo.logicalHeight / mHeight;
  }
  scale=Math.max(MIN_SCALE,Math.min(MAX_SCALE,scale));
  float offsetScale=(scale / mWindowScale - 1.0f) * 0.5f;
  int width=(int)(mWidth * scale);
  int height=(int)(mHeight * scale);
  int x=mWindowX + mLiveTranslationX - (int)(width * offsetScale);
  int y=mWindowY + mLiveTranslationY - (int)(height * offsetScale);
  x=Math.max(0,Math.min(x,mDefaultDisplayInfo.logicalWidth - width));
  y=Math.max(0,Math.min(y,mDefaultDisplayInfo.logicalHeight - height));
  mTextureView.setScaleX(scale);
  mTextureView.setScaleY(scale);
  mWindowParams.x=x;
  mWindowParams.y=y;
  mWindowParams.width=width;
  mWindowParams.height=height;
}
