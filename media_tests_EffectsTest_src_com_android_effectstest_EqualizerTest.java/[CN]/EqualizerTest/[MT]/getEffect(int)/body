{
synchronized (sInstances) {
    if (sInstances.containsKey(session)) {
      mEqualizer=sInstances.get(session);
    }
 else {
      try {
        mEqualizer=new Equalizer(0,session);
      }
 catch (      IllegalArgumentException e) {
        Log.e(TAG,"Equalizer effect not supported");
      }
catch (      UnsupportedOperationException e) {
        Log.e(TAG,"Equalizer library not loaded");
      }
catch (      IllegalStateException e) {
        Log.e(TAG,"Equalizer cannot get presets");
      }
catch (      RuntimeException e) {
        Log.e(TAG,"Equalizer effect not found");
      }
      sInstances.put(session,mEqualizer);
    }
  }
  mReleaseButton.setEnabled(false);
  mOnOffButton.setEnabled(false);
  if (mEqualizer != null) {
    if (mSettings != "") {
      Log.d(TAG,"Equalizer settings: " + mSettings);
      mEqualizer.setProperties(new Equalizer.Settings(mSettings));
    }
    mEqualizer.setEnableStatusListener(mEffectListener);
    mEqualizer.setControlStatusListener(mEffectListener);
    mEqualizer.setParameterListener(mEffectListener);
    mReleaseButton.setChecked(true);
    mReleaseButton.setEnabled(true);
    mOnOffButton.setChecked(mEqualizer.getEnabled());
    mOnOffButton.setEnabled(true);
  }
}
