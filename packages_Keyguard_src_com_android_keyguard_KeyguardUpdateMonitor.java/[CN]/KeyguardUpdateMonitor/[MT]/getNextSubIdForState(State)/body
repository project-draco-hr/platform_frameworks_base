{
  List<SubscriptionInfo> list=getSubscriptionInfo(false);
  int resultId=SubscriptionManager.INVALID_SUB_ID;
  int bestSlotId=Integer.MAX_VALUE;
  for (int i=0; i < list.size(); i++) {
    final SubscriptionInfo info=list.get(i);
    final int id=info.getSubscriptionId();
    int slotId=SubscriptionManager.getSlotId(id);
    if (state == getSimState(id) && bestSlotId > slotId) {
      resultId=id;
      bestSlotId=slotId;
    }
  }
  return resultId;
}
