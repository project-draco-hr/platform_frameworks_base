{
  Resources r=Resources.getSystem();
  long duration=Math.abs(now - time);
  if (duration < MINUTE_IN_MILLIS && minResolution < MINUTE_IN_MILLIS) {
    long count=duration / SECOND_IN_MILLIS;
    String singular=r.getString(com.android.internal.R.string.second);
    String plural=r.getString(com.android.internal.R.string.seconds);
    return pluralizedSpan(count,singular,plural,prefix,postfix);
  }
  if (duration < HOUR_IN_MILLIS && minResolution < HOUR_IN_MILLIS) {
    long count=duration / MINUTE_IN_MILLIS;
    String singular=r.getString(com.android.internal.R.string.minute);
    String plural=r.getString(com.android.internal.R.string.minutes);
    return pluralizedSpan(count,singular,plural,prefix,postfix);
  }
  if (duration < DAY_IN_MILLIS && minResolution < DAY_IN_MILLIS) {
    long count=duration / HOUR_IN_MILLIS;
    String singular=r.getString(com.android.internal.R.string.hour);
    String plural=r.getString(com.android.internal.R.string.hours);
    return pluralizedSpan(count,singular,plural,prefix,postfix);
  }
  if (duration < WEEK_IN_MILLIS && minResolution < WEEK_IN_MILLIS) {
    return getRelativeDayString(r,time,now);
  }
  return dateString(time);
}
