{
  if (mBatchSize >= 0) {
    double completed=(double)this.mBytesCopied / mBatchSize;
    mProgressBuilder.setProgress(100,(int)(completed * 100),false);
    mProgressBuilder.setContentInfo(NumberFormat.getPercentInstance().format(completed));
  }
 else {
    mProgressBuilder.setProgress(0,0,true);
  }
  if (mRemainingTime > 0) {
    mProgressBuilder.setContentText(service.getString(msgId,DateUtils.formatDuration(mRemainingTime)));
  }
 else {
    mProgressBuilder.setContentText(null);
  }
  mLastNotificationTime=elapsedRealtime();
  return mProgressBuilder.build();
}
