{
  List<ResolveInfo> activities=null;
  try {
    activities=mService.getLauncherActivities(packageName,user);
  }
 catch (  RemoteException re) {
    throw new RuntimeException("Failed to call LauncherAppsService");
  }
  if (activities == null) {
    return Collections.EMPTY_LIST;
  }
  ArrayList<LauncherActivityInfo> lais=new ArrayList<LauncherActivityInfo>();
  final int count=activities.size();
  for (int i=0; i < count; i++) {
    ResolveInfo ri=activities.get(i);
    LauncherActivityInfo lai=new LauncherActivityInfo(mContext,ri,user);
    if (DEBUG) {
      Log.v(TAG,"Returning activity for profile " + user + " : "+ lai.getComponentName());
    }
    lais.add(lai);
  }
  return lais;
}
