{
  int taskId=5;
  long runByMillis=20000L;
  long runFromMillis=2000L;
  long initialBackoff=10000L;
  final Task task=new Builder(taskId,mComponent).setRequiresCharging(true).setRequiredNetworkCapabilities(Task.NetworkType.ANY).setBackoffCriteria(initialBackoff,Task.BackoffPolicy.EXPONENTIAL).setOverrideDeadline(runByMillis).setMinimumLatency(runFromMillis).build();
  final TaskStatus ts=new TaskStatus(task,SOME_UID,true);
  mTaskStoreUnderTest.add(ts);
  Thread.sleep(IO_WAIT);
  mTaskStoreUnderTest.readTaskMapFromDisk(new TaskMapReadFinishedListener(){
    @Override public void onTaskMapReadFinished(    List<TaskStatus> tasks){
      assertEquals("Didn't get expected number of persisted tasks.",1,tasks.size());
      TaskStatus loadedTaskStatus=tasks.get(0);
      assertTasksEqual(task,loadedTaskStatus.getTask());
      assertEquals("Different uids.",SOME_UID,tasks.get(0).getUid());
      compareTimestampsSubjectToIoLatency("Early run-times not the same after read.",ts.getEarliestRunTime(),loadedTaskStatus.getEarliestRunTime());
      compareTimestampsSubjectToIoLatency("Late run-times not the same after read.",ts.getLatestRunTimeElapsed(),loadedTaskStatus.getLatestRunTimeElapsed());
    }
  }
);
}
