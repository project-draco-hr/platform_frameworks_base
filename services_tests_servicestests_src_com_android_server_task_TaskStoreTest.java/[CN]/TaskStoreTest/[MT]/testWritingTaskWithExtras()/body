{
  Task.Builder b=new Builder(8,mComponent).setRequiresDeviceIdle(true).setPeriodic(10000L).setRequiresCharging(true);
  PersistableBundle extras=new PersistableBundle();
  extras.putDouble("hello",3.2);
  extras.putString("hi","there");
  extras.putInt("into",3);
  b.setExtras(extras);
  final Task task=b.build();
  TaskStatus taskStatus=new TaskStatus(task,SOME_UID,true);
  mTaskStoreUnderTest.add(taskStatus);
  Thread.sleep(IO_WAIT);
  mTaskStoreUnderTest.readTaskMapFromDisk(new TaskMapReadFinishedListener(){
    @Override public void onTaskMapReadFinished(    List<TaskStatus> tasks){
      assertEquals("Incorrect # of persisted tasks.",1,tasks.size());
      TaskStatus loaded=tasks.get(0);
      assertTasksEqual(task,loaded.getTask());
    }
  }
);
}
