{
  Class filterClass=getClass();
  Annotation annotation;
  for (  Field field : filterClass.getDeclaredFields()) {
    if ((annotation=field.getAnnotation(GenerateFinalPort.class)) != null) {
      GenerateFinalPort generator=(GenerateFinalPort)annotation;
      String name=generator.name().isEmpty() ? field.getName() : generator.name();
      boolean hasDefault=generator.hasDefault();
      addFieldPort(name,field,hasDefault,true);
      if (values.containsKey(name)) {
        setImmediateInputValue(name,values.get(name));
        values.remove(name);
      }
 else       if (!generator.hasDefault()) {
        throw new RuntimeException("No value specified for final input port '" + name + "' of filter "+ this+ "!");
      }
    }
  }
}
