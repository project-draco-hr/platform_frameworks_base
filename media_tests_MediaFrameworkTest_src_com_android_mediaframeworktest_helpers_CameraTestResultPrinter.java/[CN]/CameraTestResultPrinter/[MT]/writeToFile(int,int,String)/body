{
  String results=String.format("%s=%d|%s=%d",KEY_NUM_ATTEMPTS,numAttempts,KEY_ITERATION,iteration);
  if (!"".equals(cameraId)) {
    results+=String.format("|%s=%s",KEY_CAMERA_ID,cameraId);
  }
  Log.v(TAG,String.format("Writing result to a file: %s",results));
  File swapFile=new File(RESULT_DIR,RESULT_SWAP_FILE);
  BufferedWriter out=null;
  try {
    out=new BufferedWriter(new FileWriter(swapFile));
    out.write(results);
    out.flush();
  }
 catch (  Exception e) {
    Log.w(TAG,String.format("Failed to write results to a file: %s",e));
  }
 finally {
    if (out != null) {
      try {
        out.close();
        String resultFileName=String.format(RESULT_FILE_FORMAT,cameraId);
        File txtFile=new File(RESULT_DIR,resultFileName);
        txtFile.delete();
        swapFile.renameTo(txtFile);
      }
 catch (      Exception e) {
        Log.w(TAG,String.format("Failed to write results to a file: %s",e));
      }
    }
  }
}
