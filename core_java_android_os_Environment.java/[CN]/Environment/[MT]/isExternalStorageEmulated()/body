{
  if (mIsExternalStorageEmulated == null) {
synchronized (mLock) {
      if (mIsExternalStorageEmulated == null) {
        boolean externalStorageEmulated;
        try {
          IMountService mountService=IMountService.Stub.asInterface(ServiceManager.getService("mount"));
          externalStorageEmulated=mountService.isExternalStorageEmulated();
          mIsExternalStorageEmulated=Boolean.valueOf(externalStorageEmulated);
        }
 catch (        Exception e) {
          Log.e(TAG,"couldn't talk to MountService",e);
          return false;
        }
      }
    }
  }
  return mIsExternalStorageEmulated;
}
