{
  resetProperties();
  sendBugreportStarted(1000);
  if (waitScreenshot) {
    waitForScreenshotButtonEnabled(true);
  }
  DetailsUi detailsUi=new DetailsUi(mUiBot);
  detailsUi.nameField.setText(NEW_NAME);
  sendBugreportFinished(PID,mPlainTextPath,mScreenshotPath);
  mUiBot.getNotification(mContext.getString(R.string.bugreport_finished_title));
  mContext.sendBroadcast(new Intent(Intent.ACTION_CLOSE_SYSTEM_DIALOGS));
  assertFalse("didn't disable name on UI",detailsUi.nameField.isEnabled());
  assertEquals("didn't revert name on UI",NAME,detailsUi.nameField.getText().toString());
  detailsUi.titleField.setText(TITLE);
  detailsUi.descField.setText(mDescription);
  detailsUi.clickOk();
  Bundle extras=acceptBugreportAndGetSharedIntent();
  assertActionSendMultiple(extras,BUGREPORT_FILE,BUGREPORT_CONTENT,PID,NAME,TITLE,mDescription,1,waitScreenshot);
  assertServiceNotRunning();
}
