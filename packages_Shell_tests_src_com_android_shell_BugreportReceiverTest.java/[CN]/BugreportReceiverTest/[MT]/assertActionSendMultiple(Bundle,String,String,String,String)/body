{
  String body=extras.getString(Intent.EXTRA_TEXT);
  assertContainsRegex("missing build info",SystemProperties.get("ro.build.description"),body);
  assertContainsRegex("missing serial number",SystemProperties.get("ro.serialno"),body);
  if (description != null) {
    assertContainsRegex("missing description",description,body);
  }
  assertEquals("wrong subject",subject,extras.getString(Intent.EXTRA_SUBJECT));
  List<Uri> attachments=extras.getParcelableArrayList(Intent.EXTRA_STREAM);
  int expectedSize=screenshotContent != null ? 2 : 1;
  assertEquals("wrong number of attachments",expectedSize,attachments.size());
  Uri zipUri=null, screenshotUri=null;
  for (  Uri attachment : attachments) {
    if (attachment.getPath().endsWith(".zip")) {
      zipUri=attachment;
    }
    if (attachment.getPath().endsWith(".png")) {
      screenshotUri=attachment;
    }
  }
  assertNotNull("did not get .zip attachment",zipUri);
  assertZipContent(zipUri,BUGREPORT_FILE,BUGREPORT_CONTENT);
  if (screenshotContent != null) {
    assertNotNull("did not get .png attachment",screenshotUri);
    assertContent(screenshotUri,SCREENSHOT_CONTENT);
  }
 else {
    assertNull("should not have .png attachment",screenshotUri);
  }
}
