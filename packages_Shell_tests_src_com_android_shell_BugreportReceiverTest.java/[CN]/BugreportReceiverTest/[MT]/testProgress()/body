{
  resetProperties();
  sendBugreportStarted(1000);
  waitForScreenshotButtonEnabled(true);
  final NumberFormat nf=NumberFormat.getPercentInstance();
  nf.setMinimumFractionDigits(2);
  nf.setMaximumFractionDigits(2);
  assertProgressNotification(NAME,nf.format(0));
  SystemProperties.set(PROGRESS_PROPERTY,"108");
  assertProgressNotification(NAME,nf.format(0.108));
  SystemProperties.set(PROGRESS_PROPERTY,"500");
  assertProgressNotification(NAME,nf.format(0.50));
  SystemProperties.set(MAX_PROPERTY,"2000");
  assertProgressNotification(NAME,nf.format(0.25));
  Bundle extras=sendBugreportFinishedAndGetSharedIntent(PID,mPlainTextPath,mScreenshotPath);
  assertActionSendMultiple(extras,BUGREPORT_CONTENT,SCREENSHOT_CONTENT,PID,ZIP_FILE,NAME,NO_TITLE,NO_DESCRIPTION,1,RENAMED_SCREENSHOTS);
  assertServiceNotRunning();
}
