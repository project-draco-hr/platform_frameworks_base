{
  BugreportPrefs.setWarningState(mContext,BugreportPrefs.STATE_SHOW);
  sendBugreportFinished(NO_PID,mPlainTextPath,null);
  acceptBugreport(NO_PID);
  mUiBot.getVisibleObject(mContext.getString(R.string.bugreport_confirm));
  UiObject showMessageAgain=mUiBot.getVisibleObject(mContext.getString(R.string.bugreport_confirm_repeat));
  mUiBot.click(showMessageAgain,"show-message-again");
  UiObject ok=mUiBot.getVisibleObject(mContext.getString(com.android.internal.R.string.ok));
  mUiBot.click(ok,"ok");
  mUiBot.chooseActivity(UI_NAME);
  Bundle extras=mListener.getExtras();
  assertActionSendMultiple(extras,BUGREPORT_CONTENT,NO_SCREENSHOT);
  int newState=BugreportPrefs.getWarningState(mContext,BugreportPrefs.STATE_UNKNOWN);
  assertEquals("Didn't change state",BugreportPrefs.STATE_HIDE,newState);
}
