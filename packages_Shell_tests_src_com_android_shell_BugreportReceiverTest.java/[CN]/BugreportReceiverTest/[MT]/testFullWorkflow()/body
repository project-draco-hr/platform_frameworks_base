{
  final String name="BUG, Y U NO REPORT?";
  SystemProperties.set("dumpstate.42.progress","0");
  SystemProperties.set("dumpstate.42.max","0");
  Intent intent=new Intent(INTENT_BUGREPORT_STARTED);
  intent.putExtra(EXTRA_PID,42);
  intent.putExtra(EXTRA_NAME,name);
  intent.putExtra(EXTRA_MAX,1000);
  mContext.sendBroadcast(intent);
  assertProgressNotification(name,"0.00%");
  SystemProperties.set("dumpstate.42.progress","108");
  assertProgressNotification(name,"10.80%");
  SystemProperties.set("dumpstate.42.progress","500");
  assertProgressNotification(name,"50.00%");
  SystemProperties.set("dumpstate.42.max","2000");
  assertProgressNotification(name,"25.00%");
  createTextFile(mPlainTextPath,BUGREPORT_CONTENT);
  createTextFile(mScreenshotPath,SCREENSHOT_CONTENT);
  Bundle extras=sendBugreportFinishedIntent(42,mPlainTextPath,mScreenshotPath);
  assertActionSendMultiple(extras,BUGREPORT_CONTENT,SCREENSHOT_CONTENT);
  String service=BugreportProgressService.class.getName();
  assertFalse("Service '" + service + "' is still running",isServiceRunning(service));
}
