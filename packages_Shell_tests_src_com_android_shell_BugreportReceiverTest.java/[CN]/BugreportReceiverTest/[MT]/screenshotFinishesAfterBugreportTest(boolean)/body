{
  resetProperties();
  sendBugreportStarted(1000);
  waitForScreenshotButtonEnabled(true);
  takeScreenshot();
  sendBugreportFinished(ID,mPlainTextPath,NO_SCREENSHOT);
  waitShareNotification(ID);
  Thread.sleep(SAFE_SCREENSHOT_DELAY * DateUtils.SECOND_IN_MILLIS);
  if (serviceDies) {
    killService();
  }
  Bundle extras=acceptBugreportAndGetSharedIntent(ID);
  assertActionSendMultiple(extras,BUGREPORT_CONTENT,NO_SCREENSHOT,ID,PID,ZIP_FILE,NAME,NO_TITLE,NO_DESCRIPTION,1,RENAMED_SCREENSHOTS);
  assertServiceNotRunning();
}
