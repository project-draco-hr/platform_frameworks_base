{
  final String setting=Settings.Secure.getStringForUser(mContext.getContentResolver(),Settings.Secure.ASSISTANT,UserHandle.USER_CURRENT);
  if (setting != null) {
    mAssistComponent=ComponentName.unflattenFromString(setting);
    return;
  }
  if (getVoiceInteractorSupportsAssistGesture()) {
    mAssistComponent=getVoiceInteractorComponentName();
    return;
  }
  Intent intent=((SearchManager)mContext.getSystemService(Context.SEARCH_SERVICE)).getAssistIntent(mContext,false,UserHandle.USER_CURRENT);
  if (intent != null) {
    mAssistComponent=intent.getComponent();
    return;
  }
  mAssistComponent=null;
}
