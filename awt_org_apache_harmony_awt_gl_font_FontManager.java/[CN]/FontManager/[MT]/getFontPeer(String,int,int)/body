{
  updateFontsTable();
  FontPeer peer=null;
  String key;
  String name;
  int fontStyle=_fontStyle;
  int logicalIndex=getLogicalFaceIndex(fontName);
  if (logicalIndex != -1) {
    name=getLogicalFaceFromFont(fontStyle,logicalIndex);
    fontStyle=getStyleFromLogicalFace(name);
    key=name.concat(String.valueOf(size));
  }
 else {
    name=fontName;
    key=name.concat(String.valueOf(fontStyle)).concat(String.valueOf(size));
  }
  HashMapReference hmr=fontsTable.get(key);
  if (hmr != null) {
    peer=hmr.get();
  }
  if (peer == null) {
    peer=createFontPeer(name,fontStyle,size,logicalIndex);
    if (peer == null) {
      peer=getFontPeer(DIALOG_NAME,fontStyle,size);
    }
    fontsTable.put(key,new HashMapReference(key,peer,queue));
  }
  return peer;
}
