{
  mExitPostBootUpdate.set(true);
  mAbortIdleOptimization.set(false);
  new Thread("BackgroundDexOptService_IdleOptimization"){
    @Override public void run(){
      for (      String pkg : pkgs) {
        if (mAbortIdleOptimization.get()) {
          return;
        }
        if (sFailedPackageNames.contains(pkg)) {
          continue;
        }
synchronized (sFailedPackageNames) {
          sFailedPackageNames.add(pkg);
        }
        if (pm.performDexOpt(pkg,true,PackageManagerService.REASON_BACKGROUND_DEXOPT,false)) {
synchronized (sFailedPackageNames) {
            sFailedPackageNames.remove(pkg);
          }
        }
      }
      jobFinished(jobParams,false);
    }
  }
.start();
  return true;
}
