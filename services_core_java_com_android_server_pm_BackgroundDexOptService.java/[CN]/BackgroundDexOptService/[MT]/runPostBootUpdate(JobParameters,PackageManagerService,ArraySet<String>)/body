{
  if (mExitPostBootUpdate.get()) {
    return false;
  }
  final int lowBatteryThreshold=getResources().getInteger(com.android.internal.R.integer.config_lowBatteryWarningLevel);
  mAbortPostBootUpdate.set(false);
  new Thread("BackgroundDexOptService_PostBootUpdate"){
    @Override public void run(){
      for (      String pkg : pkgs) {
        if (mAbortPostBootUpdate.get()) {
          return;
        }
        if (mExitPostBootUpdate.get()) {
          break;
        }
        if (getBatteryLevel() < lowBatteryThreshold) {
          break;
        }
        if (DEBUG_DEXOPT) {
          Log.i(TAG,"Updating package " + pkg);
        }
        pm.performDexOpt(pkg,null,true,PackageManagerService.REASON_BOOT,false);
      }
      jobFinished(jobParams,false);
    }
  }
.start();
  return true;
}
