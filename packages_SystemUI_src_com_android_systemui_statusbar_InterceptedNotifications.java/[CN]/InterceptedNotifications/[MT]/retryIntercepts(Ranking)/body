{
  if (ranking == null)   return;
  final int N=mIntercepted.size();
  final ArraySet<String> removed=new ArraySet<String>(N);
  for (int i=0; i < N; i++) {
    final StatusBarNotification sbn=mIntercepted.valueAt(i);
    if (!tryIntercept(sbn,ranking)) {
      removed.add(sbn.getKey());
      mBar.displayNotification(sbn,ranking);
    }
  }
  if (!removed.isEmpty()) {
    mIntercepted.removeAll(removed);
    updateSyntheticNotification();
  }
}
