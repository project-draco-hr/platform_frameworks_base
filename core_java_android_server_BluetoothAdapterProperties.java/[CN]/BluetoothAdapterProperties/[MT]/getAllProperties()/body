{
  mContext.enforceCallingOrSelfPermission(BluetoothService.BLUETOOTH_PERM,"Need BLUETOOTH permission");
  mPropertiesMap.clear();
  String properties[]=(String[])mService.getAdapterPropertiesNative();
  if (properties == null) {
    Log.e(TAG,"*Error*: GetAdapterProperties returned NULL");
    return;
  }
  for (int i=0; i < properties.length; i++) {
    String name=properties[i];
    String newValue=null;
    int len;
    if (name == null) {
      Log.e(TAG,"Error:Adapter Property at index " + i + " is null");
      continue;
    }
    if (name.equals("Devices") || name.equals("UUIDs")) {
      StringBuilder str=new StringBuilder();
      len=Integer.valueOf(properties[++i]);
      for (int j=0; j < len; j++) {
        str.append(properties[++i]);
        str.append(",");
      }
      if (len > 0) {
        newValue=str.toString();
      }
    }
 else {
      newValue=properties[++i];
    }
    mPropertiesMap.put(name,newValue);
  }
  String adapterPath=mService.getAdapterPathNative();
  if (adapterPath != null) {
    mPropertiesMap.put("ObjectPath",adapterPath + "/dev_");
  }
}
