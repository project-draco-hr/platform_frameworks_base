{
  if (halVersion < CAMERA_HAL_API_VERSION_1_0 && halVersion != CAMERA_HAL_API_VERSION_NORMAL_OPEN) {
    throw new IllegalArgumentException("Invalid HAL version " + halVersion);
  }
  mShutterCallback=null;
  mRawImageCallback=null;
  mJpegCallback=null;
  mPreviewCallback=null;
  mPostviewCallback=null;
  mUsingPreviewAllocation=false;
  mZoomListener=null;
  Looper looper;
  if ((looper=Looper.myLooper()) != null) {
    mEventHandler=new EventHandler(this,looper);
  }
 else   if ((looper=Looper.getMainLooper()) != null) {
    mEventHandler=new EventHandler(this,looper);
  }
 else {
    mEventHandler=null;
  }
  String packageName=ActivityThread.currentPackageName();
  return native_setup(new WeakReference<Camera>(this),cameraId,halVersion,packageName);
}
