{
  if (DEBUG)   Log.d(TAG,"onCreateSession()");
  String passthroughInputId=getPassthroughInputId(inputId);
  if (passthroughInputId == null) {
    Log.w(TAG,"The passthrough TV input for input id(" + inputId + ") is not setup yet.");
    return null;
  }
  TvInputInfo info=mTvInputManager.getTvInputInfo(passthroughInputId);
  if (info == null || !info.isPassthroughInputType()) {
    Log.w(TAG,"Invalid TV input id from derived class: " + passthroughInputId);
    return null;
  }
  PassthroughWrapperSession session=onCreatePassthroughWrapperSession();
  if (session == null) {
    return null;
  }
  if (!session.connect(passthroughInputId)) {
    throw new IllegalStateException("WrapperSession cannot be reused.");
  }
  return session;
}
