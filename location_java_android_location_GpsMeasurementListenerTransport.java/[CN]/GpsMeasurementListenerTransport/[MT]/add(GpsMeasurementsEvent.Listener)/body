{
  Preconditions.checkNotNull(listener);
synchronized (mListeners) {
    if (mListeners.isEmpty()) {
      boolean registeredWithServer;
      try {
        registeredWithServer=mLocationManager.addGpsMeasurementsListener(mListenerTransport,mContext.getPackageName());
      }
 catch (      RemoteException e) {
        Log.e(TAG,"Error handling first listener.",e);
        return false;
      }
      if (!registeredWithServer) {
        Log.e(TAG,"Unable to register listener transport.");
        return false;
      }
    }
    if (mListeners.contains(listener)) {
      return true;
    }
    mListeners.add(listener);
  }
  return true;
}
