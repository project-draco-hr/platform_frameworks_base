{
  int id;
  if (record.isGuest && record.info == null) {
    id=mUserManager.createGuest(mContext,mContext.getResources().getString(R.string.guest_nickname)).id;
  }
 else {
    id=record.info.id;
  }
  if (ActivityManager.getCurrentUser() == id) {
    return;
  }
  try {
    WindowManagerGlobal.getWindowManagerService().lockNow(null);
    ActivityManagerNative.getDefault().switchUser(id);
  }
 catch (  RemoteException e) {
    Log.e(TAG,"Couldn't switch user.",e);
  }
}
