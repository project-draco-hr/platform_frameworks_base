{
  int id;
  if (record.isGuest && record.info == null) {
    UserInfo guest=mUserManager.createGuest(mContext,mContext.getString(R.string.guest_nickname));
    if (guest == null) {
      return;
    }
    id=guest.id;
  }
 else   if (record.isAddUser) {
    showAddUserDialog();
    return;
  }
 else {
    id=record.info.id;
  }
  if (ActivityManager.getCurrentUser() == id) {
    if (record.isGuest) {
      showExitGuestDialog(id);
    }
    return;
  }
  switchToUserId(id);
}
