{
  if (newState != Renderer.STATE_ERROR) {
    mPlaybackState.setErrorMessage(null);
  }
  long position=-1;
  if (mRenderer != null) {
    position=mRenderer.getSeekPosition();
  }
switch (newState) {
case Renderer.STATE_ENDED:
case Renderer.STATE_STOPPED:
    mPlaybackState.setState(PlaybackState.PLAYSTATE_STOPPED,position,0);
  break;
case Renderer.STATE_INIT:
case Renderer.STATE_PREPARING:
mPlaybackState.setState(PlaybackState.PLAYSTATE_BUFFERING,position,0);
break;
case Renderer.STATE_ERROR:
mPlaybackState.setState(PlaybackState.PLAYSTATE_ERROR,position,0);
break;
case Renderer.STATE_PAUSED:
mPlaybackState.setState(PlaybackState.PLAYSTATE_PAUSED,position,0);
break;
case Renderer.STATE_PLAYING:
mPlaybackState.setState(PlaybackState.PLAYSTATE_PLAYING,position,1);
break;
default :
mPlaybackState.setState(PlaybackState.PLAYSTATE_ERROR,position,0);
mPlaybackState.setErrorMessage("unkown state");
break;
}
mControls.sendPlaybackChangeEvent(mPlaybackState.getState());
}
