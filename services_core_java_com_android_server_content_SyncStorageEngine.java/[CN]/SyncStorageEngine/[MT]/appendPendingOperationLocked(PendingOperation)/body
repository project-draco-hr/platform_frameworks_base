{
  if (Log.isLoggable(TAG_FILE,Log.VERBOSE)) {
    Log.v(TAG,"Appending to " + mPendingFile.getBaseFile());
  }
  FileOutputStream fos=null;
  try {
    fos=mPendingFile.openAppend();
  }
 catch (  java.io.IOException e) {
    if (Log.isLoggable(TAG_FILE,Log.VERBOSE)) {
      Log.v(TAG,"Failed append; writing full file");
    }
    writePendingOperationsLocked();
    return;
  }
  try {
    XmlSerializer out=new FastXmlSerializer();
    out.setOutput(fos,"utf-8");
    writePendingOperationLocked(op,out);
    out.endDocument();
    mPendingFile.finishWrite(fos);
  }
 catch (  java.io.IOException e1) {
    Log.w(TAG,"Error writing appending operation",e1);
    mPendingFile.failWrite(fos);
  }
 finally {
    try {
      fos.close();
    }
 catch (    IOException e) {
    }
  }
}
