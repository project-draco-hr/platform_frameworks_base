{
  final long timeout=System.currentTimeMillis() + (timeoutSeconds * 1000L);
  while (System.currentTimeMillis() < timeout) {
    if (condition.getAsBoolean()) {
      return;
    }
    try {
      Thread.sleep(100);
    }
 catch (    InterruptedException e) {
      throw new RuntimeException(e);
    }
  }
  fail("Timed out for: " + message);
}
