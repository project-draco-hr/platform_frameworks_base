{
  if (mOnLayout == null) {
    mOnLayout=makeLayout(mTextOn);
  }
  if (mOffLayout == null) {
    mOffLayout=makeLayout(mTextOff);
  }
  mTrackDrawable.getPadding(mTempRect);
  final int maxTextWidth=Math.max(mOnLayout.getWidth(),mOffLayout.getWidth()) + mThumbTextPadding * 2;
  mThumbWidth=Math.max(maxTextWidth,mThumbDrawable.getIntrinsicWidth());
  final int switchWidth=Math.max(mSwitchMinWidth,2 * mThumbWidth + mTempRect.left + mTempRect.right);
  final int switchHeight=Math.max(mTrackDrawable.getIntrinsicHeight(),mThumbDrawable.getIntrinsicHeight());
  mSwitchWidth=switchWidth;
  mSwitchHeight=switchHeight;
  super.onMeasure(widthMeasureSpec,heightMeasureSpec);
  final int measuredHeight=getMeasuredHeight();
  if (measuredHeight < switchHeight) {
    setMeasuredDimension(getMeasuredWidthAndState(),switchHeight);
  }
}
