{
  if (mOnLayout == null) {
    mOnLayout=makeLayout(mTextOn);
  }
  if (mOffLayout == null) {
    mOffLayout=makeLayout(mTextOff);
  }
  mTrackDrawable.getPadding(mTempRect);
  final int maxTextWidth=Math.max(mOnLayout.getWidth(),mOffLayout.getWidth());
  final int switchWidth=Math.max(mSwitchMinWidth,maxTextWidth * 2 + mThumbTextPadding * 4 + mTempRect.left + mTempRect.right);
  final int switchHeight=mTrackDrawable.getIntrinsicHeight();
  mThumbWidth=maxTextWidth + mThumbTextPadding * 2;
  mSwitchWidth=switchWidth;
  mSwitchHeight=switchHeight;
  super.onMeasure(widthMeasureSpec,heightMeasureSpec);
  final int measuredHeight=getMeasuredHeight();
  if (measuredHeight < switchHeight) {
    setMeasuredDimension(getMeasuredWidthAndState(),switchHeight);
  }
}
