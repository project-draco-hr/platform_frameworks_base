{
  if (DEBUG)   Slog.v(TAG,"writing to file " + filename);
  RandomAccessFile out=null;
  try {
    out=new RandomAccessFile(filename,sync ? "rws" : "rw");
    toDataOut(out);
    truncateIfPossible(out);
  }
  finally {
    close(out);
  }
}
