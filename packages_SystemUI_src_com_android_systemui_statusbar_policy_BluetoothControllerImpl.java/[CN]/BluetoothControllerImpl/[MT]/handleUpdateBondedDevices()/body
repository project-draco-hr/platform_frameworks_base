{
  if (mAdapter == null)   return;
  final Set<BluetoothDevice> bondedDevices=mAdapter.getBondedDevices();
  for (  DeviceInfo info : mDeviceInfo.values()) {
    info.bonded=false;
  }
  int bondedCount=0;
  BluetoothDevice lastBonded=null;
  if (bondedDevices != null) {
    for (    BluetoothDevice bondedDevice : bondedDevices) {
      final boolean bonded=bondedDevice.getBondState() != BluetoothDevice.BOND_NONE;
      updateInfo(bondedDevice).bonded=bonded;
      if (bonded) {
        bondedCount++;
        lastBonded=bondedDevice;
      }
    }
  }
  if (mLastDevice == null && bondedCount == 1) {
    mLastDevice=lastBonded;
  }
  updateConnectionStates();
  firePairedDevicesChanged();
}
