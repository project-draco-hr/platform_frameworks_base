{
  final int N=mDeviceInfo.size();
  for (int i=0; i < N; i++) {
    BluetoothDevice device=mDeviceInfo.keyAt(i);
    DeviceInfo info=updateInfo(device);
    info.connectionStateIndex=0;
    info.connectedProfiles.clear();
    for (int j=0; j < mProfiles.size(); j++) {
      int state=mProfiles.valueAt(j).getConnectionState(device);
      handleUpdateConnectionState(device,mProfiles.keyAt(j),state);
    }
  }
  handleConnectionChange();
  firePairedDevicesChanged();
}
