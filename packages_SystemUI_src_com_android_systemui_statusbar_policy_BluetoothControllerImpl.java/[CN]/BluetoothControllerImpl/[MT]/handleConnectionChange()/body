{
  if (mLastDevice != null && CONNECTION_STATES[mDeviceInfo.get(mLastDevice).connectionStateIndex] != BluetoothProfile.STATE_CONNECTED) {
    mLastDevice=null;
    final int size=mDeviceInfo.size();
    for (int i=0; i < size; i++) {
      BluetoothDevice device=mDeviceInfo.keyAt(i);
      DeviceInfo info=mDeviceInfo.valueAt(i);
      if (CONNECTION_STATES[info.connectionStateIndex] == BluetoothProfile.STATE_CONNECTED) {
        mLastDevice=device;
        break;
      }
    }
  }
}
