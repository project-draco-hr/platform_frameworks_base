{
  final String action=intent.getAction();
  final BluetoothDevice device=intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
  if (action.equals(BluetoothAdapter.ACTION_STATE_CHANGED)) {
    setAdapterState(intent.getIntExtra(BluetoothAdapter.EXTRA_STATE,ERROR));
    if (DEBUG)     Log.d(TAG,"ACTION_STATE_CHANGED " + mEnabled);
  }
 else   if (action.equals(BluetoothAdapter.ACTION_CONNECTION_STATE_CHANGED)) {
    final DeviceInfo info=updateInfo(device);
    final int state=intent.getIntExtra(BluetoothAdapter.EXTRA_CONNECTION_STATE,ERROR);
    if (state != ERROR) {
      info.connectionState=state;
    }
    mLastDevice=device;
    if (DEBUG)     Log.d(TAG,"ACTION_CONNECTION_STATE_CHANGED " + connectionStateToString(state) + " "+ deviceToString(device));
    setConnecting(info.connectionState == BluetoothAdapter.STATE_CONNECTING);
  }
 else   if (action.equals(BluetoothDevice.ACTION_ALIAS_CHANGED)) {
    updateInfo(device);
    mLastDevice=device;
  }
 else   if (action.equals(BluetoothDevice.ACTION_BOND_STATE_CHANGED)) {
    if (DEBUG)     Log.d(TAG,"ACTION_BOND_STATE_CHANGED " + device);
  }
  updateBondedBluetoothDevices();
}
