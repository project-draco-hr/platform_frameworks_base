{
  Message msg;
  mRadioControl.setNextDialFailImmediately(true);
  Connection cn=mGSMPhone.dial("+13125551212");
  do {
    msg=mTestHandler.getNextMessage();
  }
 while (msg.what != EVENT_DISCONNECT);
  assertEquals(Phone.State.IDLE,mGSMPhone.getState());
  assertEquals(Connection.DisconnectCause.NORMAL,cn.getDisconnectCause());
  assertEquals(0,mGSMPhone.getRingingCall().getConnections().size());
  assertEquals(1,mGSMPhone.getForegroundCall().getConnections().size());
  assertEquals(0,mGSMPhone.getBackgroundCall().getConnections().size());
  assertEquals(Call.State.IDLE,mGSMPhone.getRingingCall().getState());
  assertEquals(Call.State.DISCONNECTED,mGSMPhone.getForegroundCall().getState());
  assertEquals(Call.State.IDLE,mGSMPhone.getBackgroundCall().getState());
  assertTrue(mGSMPhone.getForegroundCall().getEarliestCreateTime() > 0);
  assertEquals(0,mGSMPhone.getForegroundCall().getEarliestConnectTime());
}
