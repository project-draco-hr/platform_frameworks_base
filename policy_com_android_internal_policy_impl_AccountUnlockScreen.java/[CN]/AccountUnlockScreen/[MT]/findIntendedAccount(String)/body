{
  ensureAccountManager();
  Account[] accounts=mAccountManager.blockingGetAccounts();
  if (accounts == null) {
    return null;
  }
  Account bestAccount=null;
  int bestScore=0;
  for (  Account a : accounts) {
    int score=0;
    if (username.equals(a.mName)) {
      score=4;
    }
 else     if (username.equalsIgnoreCase(a.mName)) {
      score=3;
    }
 else     if (username.indexOf('@') < 0) {
      int i=a.mName.indexOf('@');
      if (i >= 0) {
        String aUsername=a.mName.substring(0,i);
        if (username.equals(aUsername)) {
          score=2;
        }
 else         if (username.equalsIgnoreCase(aUsername)) {
          score=1;
        }
      }
    }
    if (score > bestScore) {
      bestAccount=a;
      bestScore=score;
    }
 else     if (score == bestScore) {
      bestAccount=null;
    }
  }
  return bestAccount;
}
