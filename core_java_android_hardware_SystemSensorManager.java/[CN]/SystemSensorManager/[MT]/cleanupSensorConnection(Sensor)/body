{
  mHandleToSensor.remove(sensor.getHandle());
  if (sensor.getReportingMode() == Sensor.REPORTING_MODE_ONE_SHOT) {
synchronized (mTriggerListeners) {
      for (      TriggerEventListener l : mTriggerListeners.keySet()) {
        if (DEBUG_DYNAMIC_SENSOR) {
          Log.i(TAG,"removed trigger listener" + l.toString() + " due to sensor disconnection");
        }
        cancelTriggerSensorImpl(l,sensor,true);
      }
    }
  }
 else {
synchronized (mSensorListeners) {
      for (      SensorEventListener l : mSensorListeners.keySet()) {
        if (DEBUG_DYNAMIC_SENSOR) {
          Log.i(TAG,"removed event listener" + l.toString() + " due to sensor disconnection");
        }
        unregisterListenerImpl(l,sensor);
      }
    }
  }
}
