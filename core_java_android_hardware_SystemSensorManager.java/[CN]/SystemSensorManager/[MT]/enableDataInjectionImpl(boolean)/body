{
  if (!mHasDataInjectionPermissions) {
    throw new SecurityException("Permission denial. Calling enableDataInjection without " + Manifest.permission.HARDWARE_TEST);
  }
synchronized (sSensorModuleLock) {
    int ret=nativeEnableDataInjection(enable);
    if (ret != 0) {
      Log.e(TAG,"HAL does not support data injection");
      return false;
    }
    mDataInjectionMode=enable;
    if (!enable && mInjectEventQueue != null) {
      mInjectEventQueue.dispose();
      mInjectEventQueue=null;
    }
    return true;
  }
}
