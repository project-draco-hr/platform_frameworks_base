{
  final ArrayList<ActivityRecord> activities=mActivities;
  int numActivities=activities.size();
  for (; activityNdx < numActivities; ++activityNdx) {
    final ActivityRecord r=activities.get(activityNdx);
    if (r.finishing) {
      continue;
    }
    if (stack.finishActivityLocked(r,Activity.RESULT_CANCELED,null,"clear",false)) {
      --activityNdx;
      --numActivities;
    }
  }
}
