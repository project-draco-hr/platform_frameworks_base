{
  stringName=null;
  if (info.targetActivity == null) {
    if (_intent != null) {
      if (_intent.getSelector() != null || _intent.getSourceBounds() != null) {
        _intent=new Intent(_intent);
        _intent.setSelector(null);
        _intent.setSourceBounds(null);
      }
    }
    if (ActivityManagerService.DEBUG_TASKS)     Slog.v(ActivityManagerService.TAG,"Setting Intent of " + this + " to "+ _intent);
    intent=_intent;
    realActivity=_intent != null ? _intent.getComponent() : null;
    origActivity=null;
  }
 else {
    ComponentName targetComponent=new ComponentName(info.packageName,info.targetActivity);
    if (_intent != null) {
      Intent targetIntent=new Intent(_intent);
      targetIntent.setComponent(targetComponent);
      targetIntent.setSelector(null);
      targetIntent.setSourceBounds(null);
      if (ActivityManagerService.DEBUG_TASKS)       Slog.v(ActivityManagerService.TAG,"Setting Intent of " + this + " to target "+ targetIntent);
      intent=targetIntent;
      realActivity=targetComponent;
      origActivity=_intent.getComponent();
    }
 else {
      intent=null;
      realActivity=targetComponent;
      origActivity=new ComponentName(info.packageName,info.name);
    }
  }
  if (intent != null && (intent.getFlags() & Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED) != 0) {
    rootWasReset=true;
  }
  if (info.applicationInfo != null) {
    userId=UserId.getUserId(info.applicationInfo.uid);
  }
}
