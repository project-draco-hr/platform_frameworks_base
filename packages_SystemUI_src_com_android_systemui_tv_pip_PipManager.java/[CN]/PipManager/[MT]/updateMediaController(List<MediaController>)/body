{
  MediaController mediaController=null;
  if (controllers != null && mState != STATE_NO_PIP && mPipComponentName != null) {
    for (int i=controllers.size() - 1; i >= 0; i--) {
      MediaController controller=controllers.get(i);
      if (controller.getPackageName().equals(mPipComponentName.getPackageName())) {
        mediaController=controller;
        break;
      }
    }
  }
  if (mPipMediaController != mediaController) {
    mPipMediaController=mediaController;
    for (int i=mMediaListeners.size() - 1; i >= 0; i--) {
      mMediaListeners.get(i).onMediaControllerChanged();
    }
    if (mPipMediaController == null) {
      mHandler.postDelayed(mClosePipRunnable,CLOSE_PIP_WHEN_MEDIA_SESSION_GONE_TIMEOUT_MS);
    }
 else {
      mHandler.removeCallbacks(mClosePipRunnable);
    }
  }
}
