{
  if (mInitialized) {
    return;
  }
  mInitialized=true;
  mContext=context;
  Resources res=context.getResources();
  mPipBounds=Rect.unflattenFromString(res.getString(com.android.internal.R.string.config_defaultPictureInPictureBounds));
  mMenuModePipBounds=Rect.unflattenFromString(res.getString(com.android.internal.R.string.config_centeredPictureInPictureBounds));
  mRecentsPipBounds=Rect.unflattenFromString(res.getString(com.android.internal.R.string.config_pictureInPictureBoundsInRecents));
  float scaleBy=(SCALE_FACTOR - 1.0f) / 2;
  mRecentsFocusedPipBounds=new Rect((int)(mRecentsPipBounds.left - scaleBy * mRecentsPipBounds.width()),(int)(mRecentsPipBounds.top - scaleBy * mRecentsPipBounds.height()),(int)(mRecentsPipBounds.right + scaleBy * mRecentsPipBounds.width()),(int)(mRecentsPipBounds.bottom + scaleBy * mRecentsPipBounds.height()));
  mActivityManager=ActivityManagerNative.getDefault();
  TaskStackListener taskStackListener=new TaskStackListener();
  IActivityManager iam=ActivityManagerNative.getDefault();
  try {
    iam.registerTaskStackListener(taskStackListener);
  }
 catch (  RemoteException e) {
    Log.e(TAG,"registerTaskStackListener failed",e);
  }
  IntentFilter intentFilter=new IntentFilter();
  intentFilter.addAction(Intent.ACTION_MEDIA_RESOURCE_GRANTED);
  mContext.registerReceiver(mBroadcastReceiver,intentFilter);
  mOnboardingShown=Prefs.getBoolean(mContext,TV_PICTURE_IN_PICTURE_ONBOARDING_SHOWN,false);
  mMediaSessionManager=(MediaSessionManager)mContext.getSystemService(Context.MEDIA_SESSION_SERVICE);
}
