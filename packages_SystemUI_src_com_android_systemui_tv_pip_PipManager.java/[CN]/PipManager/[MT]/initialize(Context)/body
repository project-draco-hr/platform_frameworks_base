{
  if (mInitialized) {
    return;
  }
  mInitialized=true;
  mContext=context;
  Resources res=context.getResources();
  mPipBound=Rect.unflattenFromString(res.getString(com.android.internal.R.string.config_defaultPictureInPictureBounds));
  mMenuModePipBound=Rect.unflattenFromString(res.getString(com.android.internal.R.string.config_centeredPictureInPictureBounds));
  mActivityManager=ActivityManagerNative.getDefault();
  TaskStackListener taskStackListener=new TaskStackListener();
  IActivityManager iam=ActivityManagerNative.getDefault();
  try {
    iam.registerTaskStackListener(taskStackListener);
  }
 catch (  RemoteException e) {
    Log.e(TAG,"registerTaskStackListener failed",e);
  }
  IntentFilter intentFilter=new IntentFilter();
  intentFilter.addAction(Intent.ACTION_MEDIA_RESOURCE_GRANTED);
  mContext.registerReceiver(mBroadcastReceiver,intentFilter);
  mOnboardingShown=Prefs.getBoolean(mContext,TV_PICTURE_IN_PICTURE_ONBOARDING_SHOWN,false);
}
