{
  mState=STATE_NO_PIP;
  mPipTaskId=TASK_ID_NO_PIP;
  mPipMediaController=null;
  mMediaSessionManager.removeOnActiveSessionsChangedListener(mActiveMediaSessionListener);
  if (removePipStack) {
    try {
      mActivityManager.removeStack(PINNED_STACK_ID);
    }
 catch (    RemoteException e) {
      Log.e(TAG,"removeStack failed",e);
    }
  }
  for (int i=mListeners.size() - 1; i >= 0; --i) {
    mListeners.get(i).onPipActivityClosed();
  }
  mHandler.removeCallbacks(mClosePipRunnable);
  updatePipVisibility(false);
}
