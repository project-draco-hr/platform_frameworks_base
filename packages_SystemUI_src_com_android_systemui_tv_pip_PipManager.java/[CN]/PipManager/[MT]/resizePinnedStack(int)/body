{
  if (DEBUG)   Log.d(TAG,"resizePinnedStack() state=" + state);
  mState=state;
  for (int i=mListeners.size() - 1; i >= 0; --i) {
    mListeners.get(i).onPipResizeAboutToStart();
  }
  if (mSuspendPipResizingReason != 0) {
    if (DEBUG)     Log.d(TAG,"resizePinnedStack() deferring mSuspendPipResizingReason=" + mSuspendPipResizingReason);
    return;
  }
  int animationDurationMs=-1;
switch (mState) {
case STATE_NO_PIP:
    mCurrentPipBounds=null;
  break;
case STATE_PIP_MENU:
mCurrentPipBounds=mMenuModePipBounds;
break;
case STATE_PIP_OVERLAY:
if (mIsRecentsShown) {
if (mCurrentPipBounds == mRecentsFocusedPipBounds || mCurrentPipBounds == mRecentsFocusedPipBounds) {
animationDurationMs=mRecentsFocusChangedAnimationDurationMs;
}
if (mIsPipFocusedInRecent) {
mCurrentPipBounds=mRecentsFocusedPipBounds;
}
 else {
mCurrentPipBounds=mRecentsPipBounds;
}
}
 else {
mCurrentPipBounds=mPipBounds;
}
break;
default :
mCurrentPipBounds=mPipBounds;
break;
}
try {
mActivityManager.resizeStack(PINNED_STACK_ID,mCurrentPipBounds,true,true,true,animationDurationMs);
}
 catch (RemoteException e) {
Log.e(TAG,"resizeStack failed",e);
}
}
