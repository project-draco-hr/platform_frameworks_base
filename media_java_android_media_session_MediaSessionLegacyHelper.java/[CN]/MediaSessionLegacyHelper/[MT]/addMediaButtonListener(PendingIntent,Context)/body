{
  if (pi == null) {
    Log.w(TAG,"Pending intent was null, can't addMediaButtonListener.");
    return;
  }
  SessionHolder holder=getHolder(pi,true);
  if (holder.mMediaButtonListener != null) {
    if (DEBUG) {
      Log.d(TAG,"addMediaButtonListener already added " + pi);
    }
    return;
  }
  holder.mMediaButtonListener=new MediaButtonListener(pi,context);
  holder.mFlags|=Session.FLAG_HANDLES_MEDIA_BUTTONS;
  holder.mSession.setFlags(holder.mFlags);
  holder.mSession.getTransportPerformer().addListener(holder.mMediaButtonListener,mHandler);
  holder.mMediaButtonReceiver=new MediaButtonReceiver(pi,context);
  holder.mSession.addCallback(holder.mMediaButtonReceiver,mHandler);
  if (DEBUG) {
    Log.d(TAG,"addMediaButtonListener added " + pi);
  }
}
