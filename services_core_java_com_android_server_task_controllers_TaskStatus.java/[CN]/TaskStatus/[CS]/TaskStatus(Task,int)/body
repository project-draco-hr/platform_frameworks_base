{
  this.taskId=task.getTaskId();
  this.userId=userId;
  this.component=task.getService();
  hasChargingConstraint=task.isRequireCharging();
  hasIdleConstraint=task.isRequireDeviceIdle();
  if (task.isPeriodic()) {
    long elapsedNow=SystemClock.elapsedRealtime();
    earliestRunTimeElapsedMillis=elapsedNow;
    latestRunTimeElapsedMillis=elapsedNow + task.getIntervalMillis();
    hasTimingConstraint=true;
  }
 else   if (task.getMinLatencyMillis() != 0L || task.getMaxExecutionDelayMillis() != 0L) {
    earliestRunTimeElapsedMillis=task.getMinLatencyMillis() > 0L ? task.getMinLatencyMillis() : Long.MAX_VALUE;
    latestRunTimeElapsedMillis=task.getMaxExecutionDelayMillis() > 0L ? task.getMaxExecutionDelayMillis() : Long.MAX_VALUE;
    hasTimingConstraint=true;
  }
 else {
    hasTimingConstraint=false;
  }
  hasMeteredConstraint=task.getNetworkCapabilities() == Task.NetworkType.UNMETERED;
  hasConnectivityConstraint=task.getNetworkCapabilities() == Task.NetworkType.ANY;
}
