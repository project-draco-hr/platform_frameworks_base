{
  PackageInfo pi;
  try {
    pi=mPm.getPackageInfo(pkg,0);
    if (!UserHandle.isSameApp(pi.applicationInfo.uid,uid)) {
      throw new SecurityException("Calling uid " + uid + " does not own package "+ pkg);
    }
  }
 catch (  NameNotFoundException e) {
    throw new IllegalArgumentException("Unknown package " + pkg,e);
  }
  PerUserClipboard clipboard=getClipboard();
  if (clipboard.primaryClip != null && !clipboard.activePermissionOwners.contains(pkg)) {
    final int N=clipboard.primaryClip.getItemCount();
    for (int i=0; i < N; i++) {
      grantItemLocked(clipboard.primaryClip.getItemAt(i),pkg);
    }
    clipboard.activePermissionOwners.add(pkg);
  }
}
