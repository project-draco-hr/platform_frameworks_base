{
  super.onDetachedFromWindow();
  if (mLayer != null) {
    if (mListener != null) {
      mListener.onSurfaceTextureDestroyed(mSurface);
    }
synchronized (mNativeWindowLock) {
      nDestroyNativeWindow();
    }
    mLayer.destroy();
    mSurface.release();
    mSurface=null;
    mLayer=null;
  }
}
