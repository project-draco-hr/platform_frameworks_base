{
synchronized (mLock) {
    int deviceId=findDeviceIdForInputIdLocked(inputId);
    if (deviceId < 0) {
      Slog.e(TAG,"Invalid inputId : " + inputId);
      return false;
    }
    Connection connection=mConnections.get(deviceId);
    final TvInputHardwareImpl hardwareImpl=connection.getHardwareImplLocked();
    if (hardwareImpl != null) {
      Runnable runnable=connection.getOnFirstFrameCapturedLocked();
      if (runnable != null) {
        runnable.run();
        connection.setOnFirstFrameCapturedLocked(null);
      }
      boolean result=hardwareImpl.startCapture(surface,config);
      if (result) {
        connection.setOnFirstFrameCapturedLocked(new Runnable(){
          @Override public void run(){
            hardwareImpl.stopCapture(config);
          }
        }
);
      }
      return result;
    }
  }
  return false;
}
