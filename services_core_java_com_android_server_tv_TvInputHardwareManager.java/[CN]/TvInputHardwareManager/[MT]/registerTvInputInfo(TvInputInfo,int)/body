{
  if (info.getType() == TvInputInfo.TYPE_VIRTUAL) {
    throw new IllegalArgumentException("info (" + info + ") has virtual type.");
  }
synchronized (mLock) {
    if (mTvInputInfoMap.indexOfKey(deviceId) >= 0) {
      Slog.w(TAG,"Trying to override previous registration: old = " + mTvInputInfoMap.get(deviceId) + ":"+ deviceId+ ", new = "+ info+ ":"+ deviceId);
    }
    mTvInputInfoMap.put(deviceId,info);
    for (int i=0; i < mHdmiStateMap.size(); ++i) {
      String inputId=findInputIdForHdmiPortLocked(mHdmiStateMap.keyAt(i));
      if (inputId != null && inputId.equals(info.getId())) {
        mHandler.obtainMessage(ClientHandler.DO_SET_AVAILABLE,convertConnectedToState(mHdmiStateMap.valueAt(i)),0,inputId).sendToTarget();
      }
    }
  }
}
