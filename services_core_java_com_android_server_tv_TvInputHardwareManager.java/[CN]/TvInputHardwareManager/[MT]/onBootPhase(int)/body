{
  if (phase == SystemService.PHASE_SYSTEM_SERVICES_READY) {
    mHdmiControlService=IHdmiControlService.Stub.asInterface(ServiceManager.getService(Context.HDMI_CONTROL_SERVICE));
    if (mHdmiControlService != null) {
      try {
        mHdmiControlService.addHotplugEventListener(mHdmiHotplugEventListener);
        mHdmiControlService.addDeviceEventListener(mHdmiDeviceEventListener);
        mHdmiControlService.addSystemAudioModeChangeListener(mHdmiSystemAudioModeChangeListener);
        mHdmiDeviceList.addAll(mHdmiControlService.getInputDevices());
      }
 catch (      RemoteException e) {
        Slog.w(TAG,"Error registering listeners to HdmiControlService:",e);
      }
    }
 else {
      Slog.w(TAG,"HdmiControlService is not available");
    }
    if (!mUseMasterVolume) {
      final IntentFilter filter=new IntentFilter();
      filter.addAction(AudioManager.VOLUME_CHANGED_ACTION);
      filter.addAction(AudioManager.STREAM_MUTE_CHANGED_ACTION);
      mContext.registerReceiver(mVolumeReceiver,filter);
    }
    updateVolume();
  }
}
