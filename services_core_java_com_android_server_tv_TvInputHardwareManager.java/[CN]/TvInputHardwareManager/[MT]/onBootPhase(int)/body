{
  if (phase == SystemService.PHASE_SYSTEM_SERVICES_READY) {
    IHdmiControlService hdmiControlService=IHdmiControlService.Stub.asInterface(ServiceManager.getService(Context.HDMI_CONTROL_SERVICE));
    if (hdmiControlService != null) {
      try {
        hdmiControlService.addHotplugEventListener(mHdmiHotplugEventListener);
        hdmiControlService.addDeviceEventListener(mHdmiDeviceEventListener);
        hdmiControlService.addSystemAudioModeChangeListener(mHdmiSystemAudioModeChangeListener);
        mHdmiDeviceList.addAll(hdmiControlService.getInputDevices());
      }
 catch (      RemoteException e) {
        Slog.w(TAG,"Error registering listeners to HdmiControlService:",e);
      }
    }
 else {
      Slog.w(TAG,"HdmiControlService is not available");
    }
    final IntentFilter filter=new IntentFilter();
    filter.addAction(AudioManager.VOLUME_CHANGED_ACTION);
    filter.addAction(AudioManager.STREAM_MUTE_CHANGED_ACTION);
    mContext.registerReceiver(mVolumeReceiver,filter);
    updateVolume();
  }
}
