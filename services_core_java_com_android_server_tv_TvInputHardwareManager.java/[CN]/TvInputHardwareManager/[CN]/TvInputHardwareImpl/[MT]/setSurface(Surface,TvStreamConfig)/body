{
synchronized (mImplLock) {
    if (mReleased) {
      throw new IllegalStateException("Device already released.");
    }
    if (mInfo.getType() == TvInputHal.TYPE_HDMI) {
      if (surface != null) {
        mActiveHdmiSources.add(mInfo.getDeviceId());
      }
 else {
        mActiveHdmiSources.remove(mInfo.getDeviceId());
        if (mActiveHdmiSources.size() == 0) {
        }
      }
    }
    return mHal.setSurface(mInfo.getDeviceId(),surface,config) == TvInputHal.SUCCESS;
  }
}
