{
synchronized (mLock) {
    int messageType=0;
switch (status) {
case HdmiControlManager.DEVICE_EVENT_ADD_DEVICE:
{
        if (!mHdmiDeviceList.contains(deviceInfo)) {
          mHdmiDeviceList.add(deviceInfo);
        }
 else {
          Slog.w(TAG,"The list already contains " + deviceInfo + "; ignoring.");
          return;
        }
        messageType=ListenerHandler.HDMI_DEVICE_ADDED;
        break;
      }
case HdmiControlManager.DEVICE_EVENT_REMOVE_DEVICE:
{
      if (!mHdmiDeviceList.remove(deviceInfo)) {
        Slog.w(TAG,"The list doesn't contain " + deviceInfo + "; ignoring.");
        return;
      }
      messageType=ListenerHandler.HDMI_DEVICE_REMOVED;
      break;
    }
case HdmiControlManager.DEVICE_EVENT_UPDATE_DEVICE:
{
    if (!mHdmiDeviceList.remove(deviceInfo)) {
      Slog.w(TAG,"The list doesn't contain " + deviceInfo + "; ignoring.");
      return;
    }
    mHdmiDeviceList.add(deviceInfo);
    messageType=ListenerHandler.HDMI_DEVICE_UPDATED;
    break;
  }
}
Message msg=mHandler.obtainMessage(messageType,0,0,deviceInfo);
if (findHardwareInfoForHdmiPortLocked(deviceInfo.getPortId()) != null) {
msg.sendToTarget();
}
 else {
mPendingHdmiDeviceEvents.add(msg);
}
}
}
