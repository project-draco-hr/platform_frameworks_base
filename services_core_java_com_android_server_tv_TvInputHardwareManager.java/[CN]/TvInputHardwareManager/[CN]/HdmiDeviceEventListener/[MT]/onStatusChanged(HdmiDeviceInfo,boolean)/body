{
synchronized (mLock) {
    if (activated) {
      if (!mHdmiDeviceList.contains(deviceInfo)) {
        mHdmiDeviceList.add(deviceInfo);
      }
 else {
        Slog.w(TAG,"The list already contains " + deviceInfo + "; ignoring.");
        return;
      }
    }
 else {
      if (!mHdmiDeviceList.remove(deviceInfo)) {
        Slog.w(TAG,"The list doesn't contain " + deviceInfo + "; ignoring.");
        return;
      }
    }
    Message msg=mHandler.obtainMessage(activated ? ListenerHandler.HDMI_DEVICE_ADDED : ListenerHandler.HDMI_DEVICE_REMOVED,0,0,deviceInfo);
    if (findHardwareInfoForHdmiPortLocked(deviceInfo.getPortId()) != null) {
      msg.sendToTarget();
    }
 else {
      mPendingHdmiDeviceEvents.add(msg);
    }
  }
}
