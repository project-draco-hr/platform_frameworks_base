{
  if (mHardware != null) {
    try {
      mCallback.onReleased();
    }
 catch (    RemoteException e) {
      Slog.e(TAG,"error in Connection::resetLocked",e);
    }
    mHardware.release();
  }
  mHardware=hardware;
  mCallback=callback;
  mInfo=info;
  mCallingUid=callingUid;
  mResolvedUserId=resolvedUserId;
  mOnFirstFrameCaptured=null;
  if (mHardware != null && mCallback != null) {
    try {
      mCallback.onStreamConfigChanged(getConfigsLocked());
    }
 catch (    RemoteException e) {
      Slog.e(TAG,"error in Connection::resetLocked",e);
    }
  }
}
