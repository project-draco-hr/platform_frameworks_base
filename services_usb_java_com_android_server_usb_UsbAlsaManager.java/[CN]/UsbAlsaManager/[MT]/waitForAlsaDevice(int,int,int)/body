{
  if (DEBUG) {
    Slog.e(TAG,"waitForAlsaDevice(c:" + card + " d:"+ device+ ")");
  }
  AlsaDevice testDevice=new AlsaDevice(type,card,device);
  final int kWaitTime=2500;
synchronized (mAlsaDevices) {
    long timeout=SystemClock.elapsedRealtime() + kWaitTime;
    do {
      if (mAlsaDevices.values().contains(testDevice)) {
        return testDevice;
      }
      long waitTime=timeout - SystemClock.elapsedRealtime();
      if (waitTime > 0) {
        try {
          mAlsaDevices.wait(waitTime);
        }
 catch (        InterruptedException e) {
          Slog.d(TAG,"usb: InterruptedException while waiting for ALSA file.");
        }
      }
    }
 while (timeout > SystemClock.elapsedRealtime());
  }
  Slog.e(TAG,"waitForAlsaDevice failed for " + testDevice);
  return null;
}
