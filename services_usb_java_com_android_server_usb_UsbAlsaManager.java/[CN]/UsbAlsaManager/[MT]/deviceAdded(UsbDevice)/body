{
  if (DEBUG) {
    Slog.d(TAG,"deviceAdded(): " + usbDevice);
  }
  boolean isAudioDevice=false;
  AlsaDevice midiDevice=null;
  int interfaceCount=usbDevice.getInterfaceCount();
  for (int ntrfaceIndex=0; !isAudioDevice && ntrfaceIndex < interfaceCount; ntrfaceIndex++) {
    UsbInterface ntrface=usbDevice.getInterface(ntrfaceIndex);
    if (ntrface.getInterfaceClass() == UsbConstants.USB_CLASS_AUDIO) {
      isAudioDevice=true;
    }
  }
  if (!isAudioDevice) {
    return;
  }
  ArrayList<AlsaCardsParser.AlsaCardRecord> prevScanRecs=mCardsParser.getScanRecords();
  mCardsParser.scan();
  int addedCard=-1;
  ArrayList<AlsaCardsParser.AlsaCardRecord> newScanRecs=mCardsParser.getNewCardRecords(prevScanRecs);
  if (newScanRecs.size() > 0) {
    addedCard=newScanRecs.get(0).mCardNum;
  }
 else {
    addedCard=mCardsParser.getDefaultUsbCard();
  }
  if (mCardsParser.isCardUsb(addedCard)) {
    selectCard(addedCard);
    mAudioDevices.put(usbDevice,mSelectedAudioDevice);
  }
  if (midiDevice != null && mMidiManager != null) {
    try {
      mMidiManager.alsaDeviceAdded(midiDevice.mCard,midiDevice.mDevice,usbDevice);
    }
 catch (    RemoteException e) {
      Slog.e(TAG,"MIDI Manager dead",e);
    }
  }
}
