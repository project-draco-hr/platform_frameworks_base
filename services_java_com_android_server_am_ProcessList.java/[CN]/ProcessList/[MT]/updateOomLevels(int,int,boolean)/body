{
  float scaleMem=((float)(mTotalMemMb - 300)) / (700 - 300);
  int minSize=320 * 480;
  int maxSize=1280 * 800;
  float scaleDisp=((float)(displayWidth * displayHeight) - minSize) / (maxSize - minSize);
  StringBuilder adjString=new StringBuilder();
  StringBuilder memString=new StringBuilder();
  float scale=scaleMem > scaleDisp ? scaleMem : scaleDisp;
  if (scale < 0)   scale=0;
 else   if (scale > 1)   scale=1;
  for (int i=0; i < mOomAdj.length; i++) {
    long low=mOomMinFreeLow[i];
    long high=mOomMinFreeHigh[i];
    mOomMinFree[i]=(long)(low + ((high - low) * scale));
    if (i > 0) {
      adjString.append(',');
      memString.append(',');
    }
    adjString.append(mOomAdj[i]);
    memString.append((mOomMinFree[i] * 1024) / PAGE_SIZE);
  }
  if (write) {
    writeFile("/sys/module/lowmemorykiller/parameters/adj",adjString.toString());
    writeFile("/sys/module/lowmemorykiller/parameters/minfree",memString.toString());
  }
}
