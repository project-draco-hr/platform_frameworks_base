{
switch (dir) {
case 0:
    dir=Bidi.LTR;
  break;
case 1:
dir=Bidi.RTL;
break;
case -1:
dir=Bidi.LEVEL_DEFAULT_RTL;
break;
case -2:
dir=Bidi.LEVEL_DEFAULT_LTR;
break;
default :
Bridge.getLog().error(LayoutLog.TAG_BROKEN,"Invalid direction flag",null);
dir=Bidi.LEVEL_DEFAULT_LTR;
}
Bidi bidi=new Bidi(chars,0,null,0,count,dir);
if (charInfo != null) {
for (int i=0; i < count; ++i) charInfo[i]=bidi.getLevelAt(i);
}
return bidi.getParaLevel();
}
