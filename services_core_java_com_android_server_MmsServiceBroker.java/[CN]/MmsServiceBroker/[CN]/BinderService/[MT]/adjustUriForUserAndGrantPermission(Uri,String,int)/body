{
  final int callingUserId=UserHandle.getCallingUserId();
  if (callingUserId != UserHandle.USER_SYSTEM) {
    contentUri=ContentProvider.maybeAddUserId(contentUri,callingUserId);
  }
  long token=Binder.clearCallingIdentity();
  try {
    mContext.grantUriPermission(PHONE_PACKAGE_NAME,contentUri,permission);
    Intent intent=new Intent(action);
    TelephonyManager telephonyManager=(TelephonyManager)mContext.getSystemService(Context.TELEPHONY_SERVICE);
    List<String> carrierPackages=telephonyManager.getCarrierPackageNamesForIntent(intent);
    if (carrierPackages != null && carrierPackages.size() == 1) {
      mContext.grantUriPermission(carrierPackages.get(0),contentUri,permission);
    }
  }
  finally {
    Binder.restoreCallingIdentity(token);
  }
  return contentUri;
}
