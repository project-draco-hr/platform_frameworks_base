{
  if (entry == null) {
    throw new KeyStoreException("entry == null");
  }
  if (engineContainsAlias(alias)) {
    engineDeleteEntry(alias);
  }
  if (entry instanceof KeyStore.TrustedCertificateEntry) {
    KeyStore.TrustedCertificateEntry trE=(KeyStore.TrustedCertificateEntry)entry;
    engineSetCertificateEntry(alias,trE.getTrustedCertificate());
    return;
  }
  if (param != null && !(param instanceof KeyStoreParameter)) {
    throw new KeyStoreException("protParam should be android.security.KeyStoreParameter; was: " + param.getClass().getName());
  }
  if (entry instanceof PrivateKeyEntry) {
    PrivateKeyEntry prE=(PrivateKeyEntry)entry;
    setPrivateKeyEntry(alias,prE.getPrivateKey(),prE.getCertificateChain(),(KeyStoreParameter)param);
    return;
  }
  throw new KeyStoreException("Entry must be a PrivateKeyEntry or TrustedCertificateEntry; was " + entry);
}
