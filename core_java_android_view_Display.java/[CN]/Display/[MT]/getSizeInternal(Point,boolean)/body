{
  try {
    IWindowManager wm=getWindowManager();
    if (wm != null) {
      wm.getDisplaySize(outSize);
      CompatibilityInfo ci;
      if (doCompat && (ci=mCompatibilityInfo.getIfNeeded()) != null) {
synchronized (mTmpMetrics) {
          mTmpMetrics.noncompatWidthPixels=outSize.x;
          mTmpMetrics.noncompatHeightPixels=outSize.y;
          mTmpMetrics.density=mDensity;
          ci.applyToDisplayMetrics(mTmpMetrics);
          outSize.x=mTmpMetrics.widthPixels;
          outSize.y=mTmpMetrics.heightPixels;
        }
      }
    }
 else {
      outSize.y=getRealHeight();
    }
    if (DEBUG_COMPAT && doCompat)     Slog.v(TAG,"Returning display size: " + outSize);
  }
 catch (  RemoteException e) {
    Slog.w("Display","Unable to get display size",e);
  }
}
