{
  if (pendingOptions != null && pendingOptions.getAnimationType() != ActivityOptions.ANIM_SCENE_TRANSITION) {
    final int animationType=pendingOptions.getAnimationType();
switch (animationType) {
case ActivityOptions.ANIM_CUSTOM:
      service.mWindowManager.overridePendingAppTransition(pendingOptions.getPackageName(),pendingOptions.getCustomEnterResId(),pendingOptions.getCustomExitResId(),pendingOptions.getOnAnimationStartListener());
    break;
case ActivityOptions.ANIM_SCALE_UP:
  service.mWindowManager.overridePendingAppTransitionScaleUp(pendingOptions.getStartX(),pendingOptions.getStartY(),pendingOptions.getStartWidth(),pendingOptions.getStartHeight());
if (intent.getSourceBounds() == null) {
  intent.setSourceBounds(new Rect(pendingOptions.getStartX(),pendingOptions.getStartY(),pendingOptions.getStartX() + pendingOptions.getStartWidth(),pendingOptions.getStartY() + pendingOptions.getStartHeight()));
}
break;
case ActivityOptions.ANIM_THUMBNAIL_SCALE_UP:
case ActivityOptions.ANIM_THUMBNAIL_SCALE_DOWN:
boolean scaleUp=(animationType == ActivityOptions.ANIM_THUMBNAIL_SCALE_UP);
service.mWindowManager.overridePendingAppTransitionThumb(pendingOptions.getThumbnail(),pendingOptions.getStartX(),pendingOptions.getStartY(),pendingOptions.getOnAnimationStartListener(),scaleUp);
if (intent.getSourceBounds() == null) {
intent.setSourceBounds(new Rect(pendingOptions.getStartX(),pendingOptions.getStartY(),pendingOptions.getStartX() + pendingOptions.getThumbnail().getWidth(),pendingOptions.getStartY() + pendingOptions.getThumbnail().getHeight()));
}
break;
}
pendingOptions=null;
}
}
