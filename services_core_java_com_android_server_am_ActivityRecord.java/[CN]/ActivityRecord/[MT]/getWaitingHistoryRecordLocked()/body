{
  if (mStackSupervisor.mWaitingVisibleActivities.contains(this) || stopped) {
    final ActivityStack stack=mStackSupervisor.getFocusedStack();
    ActivityRecord r=stack.mResumedActivity;
    if (r == null) {
      r=stack.mPausingActivity;
    }
    if (r != null) {
      return r;
    }
  }
  return this;
}
