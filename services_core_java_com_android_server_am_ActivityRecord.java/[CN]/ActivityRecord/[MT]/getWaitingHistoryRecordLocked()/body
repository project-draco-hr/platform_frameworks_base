{
  ActivityRecord r=this;
  if (mStackSupervisor.mWaitingVisibleActivities.contains(this)) {
    final ActivityStack stack=mStackSupervisor.getFocusedStack();
    r=stack.mResumedActivity;
    if (r == null) {
      r=stack.mPausingActivity;
    }
    if (r == null) {
      r=this;
    }
  }
  return r;
}
