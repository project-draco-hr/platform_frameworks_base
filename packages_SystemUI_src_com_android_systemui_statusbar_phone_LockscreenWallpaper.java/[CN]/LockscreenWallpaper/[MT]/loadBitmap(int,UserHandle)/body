{
  final int lockWallpaperUserId=selectedUser != null ? selectedUser.getIdentifier() : currentUserId;
  ParcelFileDescriptor fd=mWallpaperManager.getWallpaperFile(WallpaperManager.FLAG_LOCK,lockWallpaperUserId);
  if (fd != null) {
    try {
      BitmapFactory.Options options=new BitmapFactory.Options();
      return LoaderResult.success(BitmapFactory.decodeFileDescriptor(fd.getFileDescriptor(),null,options));
    }
 catch (    OutOfMemoryError e) {
      Log.w(TAG,"Can't decode file",e);
      return LoaderResult.fail();
    }
 finally {
      IoUtils.closeQuietly(fd);
    }
  }
 else {
    if (selectedUser != null && selectedUser.getIdentifier() != currentUserId) {
      return LoaderResult.success(mWallpaperManager.getBitmapAsUser(selectedUser.getIdentifier()));
    }
 else {
      return LoaderResult.success(null);
    }
  }
}
