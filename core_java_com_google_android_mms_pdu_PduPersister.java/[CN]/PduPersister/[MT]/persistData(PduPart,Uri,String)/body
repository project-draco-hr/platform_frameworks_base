{
  OutputStream os=null;
  InputStream is=null;
  try {
    os=mContentResolver.openOutputStream(uri);
    byte[] data=part.getData();
    if (data == null) {
      Uri dataUri=part.getDataUri();
      if ((dataUri == null) || (dataUri == uri)) {
        Log.w(TAG,"Can't find data for this part.");
        return;
      }
      is=mContentResolver.openInputStream(dataUri);
      if (LOCAL_LOGV) {
        Log.v(TAG,"Saving data to: " + uri);
      }
      byte[] buffer=new byte[256];
      for (int len=0; (len=is.read(buffer)) != -1; ) {
        os.write(buffer,0,len);
      }
    }
 else {
      if (LOCAL_LOGV) {
        Log.v(TAG,"Saving data to: " + uri);
      }
      os.write(data);
    }
  }
 catch (  FileNotFoundException e) {
    Log.e(TAG,"Failed to open Input/Output stream.",e);
    throw new MmsException(e);
  }
catch (  IOException e) {
    Log.e(TAG,"Failed to read/write data.",e);
    throw new MmsException(e);
  }
 finally {
    if (os != null) {
      try {
        os.close();
      }
 catch (      IOException e) {
        Log.e(TAG,"IOException while closing: " + os,e);
      }
    }
    if (is != null) {
      try {
        is.close();
      }
 catch (      IOException e) {
        Log.e(TAG,"IOException while closing: " + is,e);
      }
    }
  }
}
