{
  BackStackEntry bse=new BackStackEntry(fm);
  int pos=0;
  while (pos < mOps.length) {
    BackStackEntry.Op op=new BackStackEntry.Op();
    op.cmd=mOps[pos++];
    Fragment f=fm.mActive.get(mOps[pos++]);
    f.mBackStackNesting++;
    op.fragment=f;
    op.enterAnim=mOps[pos++];
    op.exitAnim=mOps[pos++];
    final int N=mOps[pos++];
    if (N > 0) {
      op.removed=new ArrayList<Fragment>(N);
      for (int i=0; i < N; i++) {
        op.removed.add(fm.mActive.get(mOps[pos++]));
      }
    }
    bse.addOp(op);
  }
  bse.mTransition=mTransition;
  bse.mTransitionStyle=mTransitionStyle;
  bse.mName=mName;
  return bse;
}
