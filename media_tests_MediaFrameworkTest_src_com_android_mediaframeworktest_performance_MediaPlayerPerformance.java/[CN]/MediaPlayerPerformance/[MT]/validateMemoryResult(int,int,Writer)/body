{
  Thread.sleep(10000);
  mEndPid=getMediaserverPid();
  mEndMemory=getMediaserverVsize();
  Log.v(TAG,"End Memory " + mEndMemory);
  output.write("End Memory :" + mEndMemory + "\n");
  int memDiff=mEndMemory - startMemory;
  if (memDiff < 0)   memDiff=0;
 else   output.write("The total diff = " + memDiff);
  output.write("\n\n");
  if (startPid != mEndPid) {
    output.write("mediaserver died. Test failed\n");
    return false;
  }
  if (memDiff > MAX_ACCEPTED_MEMORY_LEAK_KB)   return false;
  return true;
}
