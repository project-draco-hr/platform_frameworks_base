{
  final int w=getWidth();
  mBrightnessView.layout(0,0,mBrightnessView.getMeasuredWidth(),mBrightnessView.getMeasuredHeight());
  for (  TileRecord record : mRecords) {
    if (record.tileView.getVisibility() == GONE)     continue;
    final int cols=getColumnCount(record.row);
    final int cw=record.row == 0 ? mLargeCellWidth : mCellWidth;
    final int extra=(w - cw * cols) / (cols + 1);
    final int left=record.col * cw + (record.col + 1) * extra;
    final int top=getRowTop(record.row);
    record.tileView.layout(left,top,left + record.tileView.getMeasuredWidth(),top + record.tileView.getMeasuredHeight());
  }
  final int dh=Math.max(mDetail.getMeasuredHeight(),getMeasuredHeight());
  mDetail.layout(0,0,mDetail.getMeasuredWidth(),dh);
  if (mFooter.hasFooter()) {
    View footer=mFooter.getView();
    footer.layout(0,getMeasuredHeight() - footer.getMeasuredHeight(),footer.getMeasuredWidth(),getMeasuredHeight());
  }
}
