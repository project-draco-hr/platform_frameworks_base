{
  final Resources res=mContext.getResources();
  final int columns=Math.max(1,res.getInteger(R.integer.quick_settings_num_columns));
  mCellHeight=res.getDimensionPixelSize(R.dimen.qs_tile_height);
  mCellWidth=(int)(mCellHeight * TILE_ASPECT);
  mLargeCellHeight=res.getDimensionPixelSize(R.dimen.qs_dual_tile_height);
  mLargeCellWidth=(int)(mLargeCellHeight * TILE_ASPECT);
  mPanelPaddingBottom=res.getDimensionPixelSize(R.dimen.qs_panel_padding_bottom);
  mDualTileUnderlap=res.getDimensionPixelSize(R.dimen.qs_dual_tile_padding_vertical);
  mBrightnessPaddingTop=res.getDimensionPixelSize(R.dimen.qs_brightness_padding_top);
  if (mColumns != columns) {
    mColumns=columns;
    postInvalidate();
  }
  for (  TileRecord r : mRecords) {
    r.tile.clearState();
  }
  if (mListening) {
    refreshAllTiles();
  }
  updateDetailText();
}
