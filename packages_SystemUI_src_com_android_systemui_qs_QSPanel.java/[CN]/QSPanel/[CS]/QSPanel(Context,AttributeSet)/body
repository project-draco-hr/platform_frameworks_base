{
  super(context,attrs);
  mContext=context;
  mDetail=LayoutInflater.from(context).inflate(R.layout.qs_detail,this,false);
  mDetailContent=(ViewGroup)mDetail.findViewById(android.R.id.content);
  mDetailSettingsButton=(TextView)mDetail.findViewById(android.R.id.button2);
  mDetailDoneButton=(TextView)mDetail.findViewById(android.R.id.button1);
  updateDetailText();
  mDetail.setVisibility(GONE);
  mDetail.setClickable(true);
  mBrightnessView=LayoutInflater.from(context).inflate(R.layout.quick_settings_brightness_dialog,this,false);
  mFooter=new QSFooter(this,context);
  addView(mDetail);
  addView(mBrightnessView);
  addView(mFooter.getView());
  mClipper=new QSDetailClipper(mDetail);
  updateResources();
  mBrightnessController=new BrightnessController(getContext(),(ImageView)findViewById(R.id.brightness_icon),(ToggleSlider)findViewById(R.id.brightness_slider));
  mDetailDoneButton.setOnClickListener(new OnClickListener(){
    @Override public void onClick(    View v){
      closeDetail();
    }
  }
);
}
