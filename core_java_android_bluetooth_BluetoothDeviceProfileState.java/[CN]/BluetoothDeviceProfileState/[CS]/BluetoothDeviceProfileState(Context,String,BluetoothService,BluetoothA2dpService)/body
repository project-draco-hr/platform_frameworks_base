{
  super(address);
  mContext=context;
  mDevice=new BluetoothDevice(address);
  mService=service;
  mA2dpService=a2dpService;
  addState(mBondedDevice);
  addState(mOutgoingHandsfree);
  addState(mIncomingHandsfree);
  addState(mIncomingA2dp);
  addState(mOutgoingA2dp);
  addState(mOutgoingHid);
  addState(mIncomingHid);
  setInitialState(mBondedDevice);
  IntentFilter filter=new IntentFilter();
  filter.addAction(BluetoothDevice.ACTION_ACL_CONNECTED);
  filter.addAction(BluetoothHeadset.ACTION_CONNECTION_STATE_CHANGED);
  filter.addAction(BluetoothA2dp.ACTION_CONNECTION_STATE_CHANGED);
  filter.addAction(BluetoothInputDevice.ACTION_INPUT_DEVICE_STATE_CHANGED);
  mContext.registerReceiver(mBroadcastReceiver,filter);
  BluetoothAdapter adapter=BluetoothAdapter.getDefaultAdapter();
  adapter.getProfileProxy(mContext,mBluetoothProfileServiceListener,BluetoothProfile.HEADSET);
  PbapServiceListener p=new PbapServiceListener();
}
