{
  super(address);
  mContext=context;
  mDevice=new BluetoothDevice(address);
  mService=service;
  mA2dpService=a2dpService;
  addState(mBondedDevice);
  addState(mOutgoingHandsfree);
  addState(mIncomingHandsfree);
  addState(mIncomingA2dp);
  addState(mOutgoingA2dp);
  addState(mOutgoingHid);
  addState(mIncomingHid);
  setInitialState(mBondedDevice);
  IntentFilter filter=new IntentFilter();
  filter.addAction(BluetoothA2dp.ACTION_SINK_STATE_CHANGED);
  filter.addAction(BluetoothHeadset.ACTION_STATE_CHANGED);
  filter.addAction(BluetoothDevice.ACTION_ACL_CONNECTED);
  filter.addAction(BluetoothInputDevice.ACTION_INPUT_DEVICE_STATE_CHANGED);
  mContext.registerReceiver(mBroadcastReceiver,filter);
  HeadsetServiceListener l=new HeadsetServiceListener();
}
