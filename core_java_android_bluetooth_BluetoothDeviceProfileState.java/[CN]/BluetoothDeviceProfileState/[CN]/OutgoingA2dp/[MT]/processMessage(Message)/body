{
  log("OutgoingA2dp State->Processing Message: " + message.what);
  Message deferMsg=new Message();
switch (message.what) {
case CONNECT_HFP_OUTGOING:
    processCommand(CONNECT_HFP_OUTGOING);
  if (mStatus) {
    deferMsg.what=mCommand;
    deferMessage(deferMsg);
  }
break;
case CONNECT_HFP_INCOMING:
processCommand(CONNECT_HFP_INCOMING);
if (mStatus) {
deferMsg.what=mCommand;
deferMessage(deferMsg);
}
break;
case CONNECT_A2DP_INCOMING:
transitionTo(mIncomingA2dp);
break;
case CONNECT_A2DP_OUTGOING:
break;
case DISCONNECT_HFP_OUTGOING:
deferMessage(message);
break;
case DISCONNECT_HFP_INCOMING:
if (mStatus) {
deferMsg.what=mCommand;
deferMessage(deferMsg);
}
break;
case DISCONNECT_A2DP_OUTGOING:
deferMessage(message);
break;
case DISCONNECT_A2DP_INCOMING:
break;
case CONNECT_HID_OUTGOING:
case DISCONNECT_HID_OUTGOING:
deferMessage(message);
break;
case CONNECT_HID_INCOMING:
transitionTo(mIncomingHid);
if (mStatus) {
deferMsg.what=mCommand;
deferMessage(deferMsg);
}
break;
case DISCONNECT_HID_INCOMING:
if (mStatus) {
deferMsg.what=mCommand;
deferMessage(deferMsg);
}
break;
case DISCONNECT_PBAP_OUTGOING:
case UNPAIR:
case AUTO_CONNECT_PROFILES:
deferMessage(message);
break;
case TRANSITION_TO_STABLE:
transitionTo(mBondedDevice);
break;
default :
return NOT_HANDLED;
}
return HANDLED;
}
