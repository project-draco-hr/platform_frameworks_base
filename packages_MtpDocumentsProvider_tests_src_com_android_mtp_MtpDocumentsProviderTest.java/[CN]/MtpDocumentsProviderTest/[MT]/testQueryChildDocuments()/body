{
  setupProvider(MtpDatabaseConstants.FLAG_DATABASE_IN_MEMORY);
  setupRoots(0,new MtpRoot[]{new MtpRoot(0,0,"Storage",1000,1000,"")});
  setupDocuments(0,0,MtpManager.OBJECT_HANDLE_ROOT_CHILDREN,"1",new MtpObjectInfo[]{new MtpObjectInfo.Builder().setObjectHandle(100).setFormat(MtpConstants.FORMAT_EXIF_JPEG).setName("image.jpg").setCompressedSize(1024 * 1024 * 5).setThumbCompressedSize(5 * 1024).setProtectionStatus(MtpConstants.PROTECTION_STATUS_READ_ONLY).build()});
  final Cursor cursor=mProvider.queryChildDocuments("1",null,null);
  assertEquals(1,cursor.getCount());
  assertTrue(cursor.moveToNext());
  assertEquals("3",cursor.getString(0));
  assertEquals("image/jpeg",cursor.getString(1));
  assertEquals("image.jpg",cursor.getString(2));
  assertEquals(0,cursor.getLong(3));
  assertEquals(Document.FLAG_SUPPORTS_THUMBNAIL,cursor.getInt(4));
  assertEquals(1024 * 1024 * 5,cursor.getInt(5));
  cursor.close();
}
