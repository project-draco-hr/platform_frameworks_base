{
  final Uri uri=DocumentsContract.buildRootsUri(MtpDocumentsProvider.AUTHORITY);
  mMtpManager.addValidDevice(0);
  assertEquals(0,mResolver.getChangeCount(uri));
  mProvider.openDevice(0);
  assertEquals(1,mResolver.getChangeCount(uri));
  mProvider.closeDevice(0);
  assertEquals(2,mResolver.getChangeCount(uri));
  int exceptionCounter=0;
  try {
    mProvider.openDevice(1);
  }
 catch (  IOException error) {
    exceptionCounter++;
  }
  assertEquals(2,mResolver.getChangeCount(uri));
  try {
    mProvider.closeDevice(1);
  }
 catch (  IOException error) {
    exceptionCounter++;
  }
  assertEquals(2,mResolver.getChangeCount(uri));
  assertEquals(2,exceptionCounter);
}
