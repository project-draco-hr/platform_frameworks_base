{
  mTestPool.setMaxPoolSize(MAX_CONN);
  assertEquals(MAX_CONN,mTestPool.getMaxPoolSize());
  HashMap<SQLiteDatabase,Integer> dbMap=new HashMap<SQLiteDatabase,Integer>();
  for (int i=0; i < MAX_CONN; i++) {
    SQLiteDatabase db=mTestPool.get(TEST_SQLS[i]);
    assertFalse(dbMap.containsKey(db));
    dbMap.put(db,1);
    executeSqlOnDatabaseConn(db,TEST_SQLS[i]);
  }
  assertEquals(0,mTestPool.getFreePoolSize());
  assertEquals(MAX_CONN,mTestPool.getSize());
  assertEquals(MAX_CONN,mTestPool.getMaxPoolSize());
  for (int i=MAX_CONN; i < 1000; i++) {
    SQLiteDatabase db=mTestPool.get(TEST_SQL + i);
    assertTrue(dbMap.containsKey(db));
    int k=dbMap.get(db);
    dbMap.put(db,++k);
  }
  assertEquals(0,mTestPool.getFreePoolSize());
  assertEquals(MAX_CONN,mTestPool.getSize());
  assertEquals(MAX_CONN,mTestPool.getMaxPoolSize());
  for (  SQLiteDatabase d : dbMap.keySet()) {
    Log.i(TAG,"connection # " + d.mConnectionNum + ", numHolders: "+ dbMap.get(d));
  }
  Log.i(TAG,mTestPool.toString());
  for (  SQLiteDatabase d : dbMap.keySet()) {
    int num=dbMap.get(d);
    for (int i=0; i < num; i++) {
      mTestPool.release(d);
    }
  }
  assertEquals(MAX_CONN,mTestPool.getFreePoolSize());
  assertEquals(MAX_CONN,mTestPool.getSize());
  assertEquals(MAX_CONN,mTestPool.getMaxPoolSize());
}
