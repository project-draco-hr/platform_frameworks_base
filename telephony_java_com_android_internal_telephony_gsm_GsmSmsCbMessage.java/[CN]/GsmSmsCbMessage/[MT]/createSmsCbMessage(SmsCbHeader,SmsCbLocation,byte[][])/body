{
  if (header.isEtwsPrimaryNotification()) {
    return new SmsCbMessage(SmsCbMessage.MESSAGE_FORMAT_3GPP,header.getGeographicalScope(),header.getSerialNumber(),location,header.getServiceCategory(),null,"ETWS",SmsCbMessage.MESSAGE_PRIORITY_EMERGENCY,header.getEtwsInfo(),header.getCmasInfo());
  }
 else {
    String language=null;
    StringBuilder sb=new StringBuilder();
    for (    byte[] pdu : pdus) {
      Pair<String,String> p=parseBody(header,pdu);
      language=p.first;
      sb.append(p.second);
    }
    int priority=header.isEmergencyMessage() ? SmsCbMessage.MESSAGE_PRIORITY_EMERGENCY : SmsCbMessage.MESSAGE_PRIORITY_NORMAL;
    return new SmsCbMessage(SmsCbMessage.MESSAGE_FORMAT_3GPP,header.getGeographicalScope(),header.getSerialNumber(),location,header.getServiceCategory(),language,sb.toString(),priority,header.getEtwsInfo(),header.getCmasInfo());
  }
}
