{
  cancelLoadingThumbnails();
  ArrayList<TaskDescription> tasks=new ArrayList<TaskDescription>();
  final PackageManager pm=mContext.getPackageManager();
  final ActivityManager am=(ActivityManager)mContext.getSystemService(Context.ACTIVITY_SERVICE);
  final List<ActivityManager.RecentTaskInfo> recentTasks=am.getRecentTasks(MAX_TASKS,ActivityManager.RECENT_IGNORE_UNAVAILABLE);
  ActivityInfo homeInfo=new Intent(Intent.ACTION_MAIN).addCategory(Intent.CATEGORY_HOME).resolveActivityInfo(pm,0);
  HashSet<Integer> recentTasksToKeepInCache=new HashSet<Integer>();
  int numTasks=recentTasks.size();
  final int first=1;
  recentTasksToKeepInCache.add(recentTasks.get(0).persistentId);
  for (int i=first, index=0; i < numTasks && (index < MAX_TASKS); ++i) {
    final ActivityManager.RecentTaskInfo recentInfo=recentTasks.get(i);
    TaskDescription item=createTaskDescription(recentInfo.id,recentInfo.persistentId,recentInfo.baseIntent,recentInfo.origActivity,recentInfo.description,homeInfo);
    if (item != null) {
      tasks.add(item);
      ++index;
    }
  }
  loadThumbnailsInBackground(new ArrayList<TaskDescription>(tasks));
  return tasks;
}
