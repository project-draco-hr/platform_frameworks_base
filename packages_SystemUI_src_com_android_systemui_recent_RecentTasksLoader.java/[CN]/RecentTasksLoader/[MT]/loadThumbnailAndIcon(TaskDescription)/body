{
  final ActivityManager am=(ActivityManager)mContext.getSystemService(Context.ACTIVITY_SERVICE);
  final PackageManager pm=mContext.getPackageManager();
  ActivityManager.TaskThumbnails thumbs=am.getTaskThumbnails(td.persistentTaskId);
  Drawable icon=getFullResIcon(td.resolveInfo,pm);
  if (DEBUG)   Log.v(TAG,"Loaded bitmap for task " + td + ": "+ thumbs.mainThumbnail);
synchronized (td) {
    if (thumbs != null && thumbs.mainThumbnail != null) {
      td.setThumbnail(thumbs.mainThumbnail);
    }
 else {
      td.setThumbnail(mDefaultThumbnailBackground);
    }
    if (icon != null) {
      td.setIcon(icon);
    }
    td.setLoaded(true);
  }
}
