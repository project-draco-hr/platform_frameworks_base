{
  boolean skipStructure=false;
synchronized (this) {
    long endTime=SystemClock.uptimeMillis() + 5000;
    long now;
    while (mPendingAsyncChildren.size() > 0 && (now=SystemClock.uptimeMillis()) < endTime) {
      try {
        wait(endTime - now);
      }
 catch (      InterruptedException e) {
      }
    }
    if (mPendingAsyncChildren.size() > 0) {
      skipStructure=true;
    }
  }
  int start=out.dataPosition();
  PooledStringWriter pwriter=new PooledStringWriter(out);
  ComponentName.writeToParcel(mActivityComponent,out);
  final int N=skipStructure ? 0 : mWindowNodes.size();
  out.writeInt(N);
  for (int i=0; i < N; i++) {
    mWindowNodes.get(i).writeToParcel(out,pwriter);
  }
  pwriter.finish();
  Log.i(TAG,"Flattened assist data: " + (out.dataPosition() - start) + " bytes");
}
