{
  int size=FLAGS_FIELD_BYTES;
  if (mServiceUuids != null) {
    int num16BitUuids=0;
    int num32BitUuids=0;
    int num128BitUuids=0;
    for (    ParcelUuid uuid : mServiceUuids) {
      if (BluetoothUuid.is16BitUuid(uuid)) {
        ++num16BitUuids;
      }
 else       if (BluetoothUuid.is32BitUuid(uuid)) {
        ++num32BitUuids;
      }
 else {
        ++num128BitUuids;
      }
    }
    if (num16BitUuids != 0) {
      size+=OVERHEAD_BYTES_PER_FIELD + num16BitUuids * BluetoothUuid.UUID_BYTES_16_BIT;
    }
    if (num32BitUuids != 0) {
      size+=OVERHEAD_BYTES_PER_FIELD + num32BitUuids * BluetoothUuid.UUID_BYTES_32_BIT;
    }
    if (num128BitUuids != 0) {
      size+=OVERHEAD_BYTES_PER_FIELD + num128BitUuids * BluetoothUuid.UUID_BYTES_128_BIT;
    }
  }
  if (mServiceData != null) {
    size+=OVERHEAD_BYTES_PER_FIELD + mServiceData.length;
  }
  if (mManufacturerSpecificData != null) {
    size+=OVERHEAD_BYTES_PER_FIELD + mManufacturerSpecificData.length;
  }
  if (mIncludeTxPowerLevel) {
    size+=OVERHEAD_BYTES_PER_FIELD + 1;
  }
  return size;
}
