{
  enableControls(false);
  final int pixelFormat=PIXEL_FORMATS[mPixelFormatSelector.getSelectedItemPosition()];
  new Thread(){
    public void run(){
      final StringBuffer sb=new StringBuffer();
switch (test) {
case TEST_COMPOSITOR:
{
          sb.append("Compositor score:");
          CompositorScore score=measureCompositionScore(pixelFormat);
          sb.append("\n    " + getPixelFormatInfo(pixelFormat) + ":"+ score+ ".");
        }
      break;
case TEST_ALLOCATION:
{
      sb.append("Allocation score:");
      AllocationScore score=measureAllocationScore(pixelFormat);
      sb.append("\n    " + getPixelFormatInfo(pixelFormat) + ":"+ score+ ".");
    }
  break;
}
runOnUiThreadAndWait(new Runnable(){
public void run(){
  mResultView.setText(sb.toString());
  enableControls(true);
  updateSystemInfo(pixelFormat);
}
}
);
}
}
.start();
}
