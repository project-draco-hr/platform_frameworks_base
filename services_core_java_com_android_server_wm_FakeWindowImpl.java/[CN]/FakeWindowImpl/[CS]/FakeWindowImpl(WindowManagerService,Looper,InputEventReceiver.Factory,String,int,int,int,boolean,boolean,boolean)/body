{
  mService=service;
  InputChannel[] channels=InputChannel.openInputChannelPair(name);
  mServerChannel=channels[0];
  mClientChannel=channels[1];
  mService.mInputManager.registerInputChannel(mServerChannel,null);
  mInputEventReceiver=inputEventReceiverFactory.createInputEventReceiver(mClientChannel,looper);
  mApplicationHandle=new InputApplicationHandle(null);
  mApplicationHandle.name=name;
  mApplicationHandle.dispatchingTimeoutNanos=WindowManagerService.DEFAULT_INPUT_DISPATCHING_TIMEOUT_NANOS;
  mWindowHandle=new InputWindowHandle(mApplicationHandle,null,Display.DEFAULT_DISPLAY);
  mWindowHandle.name=name;
  mWindowHandle.inputChannel=mServerChannel;
  mWindowLayer=getLayerLw(windowType);
  mWindowHandle.layer=mWindowLayer;
  mWindowHandle.layoutParamsFlags=layoutParamsFlags;
  mWindowHandle.layoutParamsPrivateFlags=layoutParamsPrivateFlags;
  mWindowHandle.layoutParamsType=windowType;
  mWindowHandle.dispatchingTimeoutNanos=WindowManagerService.DEFAULT_INPUT_DISPATCHING_TIMEOUT_NANOS;
  mWindowHandle.visible=true;
  mWindowHandle.canReceiveKeys=canReceiveKeys;
  mWindowHandle.hasFocus=hasFocus;
  mWindowHandle.hasWallpaper=false;
  mWindowHandle.paused=false;
  mWindowHandle.ownerPid=Process.myPid();
  mWindowHandle.ownerUid=Process.myUid();
  mWindowHandle.inputFeatures=0;
  mWindowHandle.scaleFactor=1.0f;
  mTouchFullscreen=touchFullscreen;
}
