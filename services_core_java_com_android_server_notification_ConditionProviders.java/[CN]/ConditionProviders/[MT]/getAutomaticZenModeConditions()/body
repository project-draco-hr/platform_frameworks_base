{
synchronized (mMutex) {
    final int N=mRecords.size();
    ArrayList<Condition> rt=null;
    for (int i=0; i < N; i++) {
      final ConditionRecord r=mRecords.get(i);
      if (r.isAutomatic && r.condition != null) {
        if (rt == null)         rt=new ArrayList<Condition>();
        rt.add(r.condition);
      }
    }
    return rt == null ? NO_CONDITIONS : rt.toArray(new Condition[rt.size()]);
  }
}
