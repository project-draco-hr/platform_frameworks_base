{
  if (DEBUG)   Slog.d(TAG,"setAutomaticZenModeConditions " + (conditionIds == null ? null : Arrays.asList(conditionIds)));
synchronized (mMutex) {
    final ArraySet<Uri> newIds=safeSet(conditionIds);
    final int N=mRecords.size();
    boolean changed=false;
    for (int i=0; i < N; i++) {
      final ConditionRecord r=mRecords.get(i);
      final boolean automatic=newIds.contains(r.id);
      if (!r.isAutomatic && automatic) {
        subscribeLocked(r);
        r.isAutomatic=true;
        changed=true;
      }
 else       if (r.isAutomatic && !automatic) {
        unsubscribeLocked(r);
        r.isAutomatic=false;
        changed=true;
      }
    }
    if (save && changed) {
      saveZenConfigLocked();
    }
  }
}
