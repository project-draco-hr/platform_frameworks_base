{
  final int mode=mZenModeHelper.getZenMode();
  final ZenModeConfig config=mZenModeHelper.getConfig();
  final boolean inDowntime=downtimeMode == Global.ZEN_MODE_IMPORTANT_INTERRUPTIONS || downtimeMode == Global.ZEN_MODE_NO_INTERRUPTIONS;
  final boolean downtimeCurrent=mDowntime.isDowntimeCondition(mExitCondition);
  if (inDowntime && (mode == Global.ZEN_MODE_OFF || downtimeCurrent) && config != null) {
    final Condition condition=mDowntime.createCondition(config.toDowntimeInfo(),config.sleepNone,Condition.STATE_TRUE);
    mZenModeHelper.setZenMode(downtimeMode,"downtimeEnter");
    setZenModeCondition(condition,"downtime");
  }
  if (!inDowntime && downtimeCurrent && (mode == Global.ZEN_MODE_IMPORTANT_INTERRUPTIONS || mode == Global.ZEN_MODE_NO_INTERRUPTIONS)) {
    mZenModeHelper.setZenMode(Global.ZEN_MODE_OFF,"downtimeExit");
  }
}
