{
  mUserInfo=user;
  mUserSelector=userSelector;
  mUserImage=(ImageView)findViewById(R.id.keyguard_user_avatar);
  mUserName=(TextView)findViewById(R.id.keyguard_user_name);
  mFramed=(KeyguardCircleFramedDrawable)MultiUserAvatarCache.getInstance().get(user.id);
  if (mFramed == null || !mFramed.verifyParams(mIconSize,mFrameColor,mStroke,mFrameShadowColor,mShadowRadius,mHighlightColor)) {
    Bitmap icon=null;
    try {
      icon=mUserManager.getUserIcon(user.id);
    }
 catch (    Exception e) {
      if (DEBUG)       Log.d(TAG,"failed to get profile icon " + user,e);
    }
    if (icon == null) {
      icon=BitmapFactory.decodeResource(mContext.getResources(),com.android.internal.R.drawable.ic_contact_picture);
    }
    mFramed=new KeyguardCircleFramedDrawable(icon,(int)mIconSize,mFrameColor,mStroke,mFrameShadowColor,mShadowRadius,mHighlightColor);
    MultiUserAvatarCache.getInstance().put(user.id,mFramed);
  }
  mFramed.reset();
  mUserImage.setImageDrawable(mFramed);
  mUserName.setText(mUserInfo.name);
  setOnClickListener(mUserSelector);
  mInit=false;
}
