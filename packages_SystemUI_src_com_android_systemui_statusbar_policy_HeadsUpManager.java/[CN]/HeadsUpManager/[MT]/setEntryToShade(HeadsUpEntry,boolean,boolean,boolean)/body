{
  ExpandableNotificationRow row=headsUpEntry.entry.row;
  if (row.isInShade() != inShade || justAdded) {
    row.setInShade(inShade);
    if (!justAdded || !inShade) {
      updatePinnedHeadsUpState(forceImmediate);
      for (      OnHeadsUpChangedListener listener : mListeners) {
        listener.OnHeadsUpPinnedChanged(row,!inShade);
      }
    }
  }
}
