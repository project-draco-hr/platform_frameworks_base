{
  mContext=context;
  Resources resources=mContext.getResources();
  mTouchAcceptanceDelay=resources.getInteger(R.integer.touch_acceptance_delay);
  mSnoozedPackages=new ArrayMap<>();
  mDefaultSnoozeLengthMs=resources.getInteger(R.integer.heads_up_default_snooze_length_ms);
  mSnoozeLengthMs=mDefaultSnoozeLengthMs;
  mMinimumDisplayTime=resources.getInteger(R.integer.heads_up_notification_minimum_time);
  mHeadsUpNotificationDecay=resources.getInteger(R.integer.heads_up_notification_decay);
  mClock=new Clock();
  mSnoozeLengthMs=Settings.Global.getInt(context.getContentResolver(),SETTING_HEADS_UP_SNOOZE_LENGTH_MS,mDefaultSnoozeLengthMs);
  mSettingsObserver=new ContentObserver(mHandler){
    @Override public void onChange(    boolean selfChange){
      final int packageSnoozeLengthMs=Settings.Global.getInt(context.getContentResolver(),SETTING_HEADS_UP_SNOOZE_LENGTH_MS,-1);
      if (packageSnoozeLengthMs > -1 && packageSnoozeLengthMs != mSnoozeLengthMs) {
        mSnoozeLengthMs=packageSnoozeLengthMs;
        if (DEBUG)         Log.v(TAG,"mSnoozeLengthMs = " + mSnoozeLengthMs);
      }
    }
  }
;
  context.getContentResolver().registerContentObserver(Settings.Global.getUriFor(SETTING_HEADS_UP_SNOOZE_LENGTH_MS),false,mSettingsObserver);
  mStatusBarWindowView=statusBarWindowView;
  mGroupManager=groupManager;
  mStatusBarHeight=resources.getDimensionPixelSize(com.android.internal.R.dimen.status_bar_height);
}
