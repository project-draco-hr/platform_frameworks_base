{
  final PackageLite lite=parseClusterPackageLite(packageDir,0);
  final File baseApk=new File(lite.baseCodePath);
  final Package pkg=parseBaseApk(baseApk,flags);
  if (pkg == null) {
    throw new PackageParserException(INSTALL_PARSE_FAILED_NOT_APK,"Failed to parse base APK: " + baseApk);
  }
  if (!ArrayUtils.isEmpty(lite.splitNames)) {
    pkg.splitNames=lite.splitNames;
    pkg.splitCodePaths=lite.splitCodePaths;
    for (    String splitCodePath : lite.splitCodePaths) {
      final File splitApk=new File(splitCodePath);
      parseSplitApk(pkg,splitApk,flags);
    }
  }
  pkg.codePath=packageDir.getAbsolutePath();
  return pkg;
}
