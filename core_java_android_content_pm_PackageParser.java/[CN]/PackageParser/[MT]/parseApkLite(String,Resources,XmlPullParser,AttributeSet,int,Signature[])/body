{
  final Pair<String,String> packageSplit=parsePackageSplitNames(parser,attrs,flags);
  int installLocation=PARSE_DEFAULT_INSTALL_LOCATION;
  int versionCode=0;
  boolean coreApp=false;
  boolean multiArch=false;
  int numFound=0;
  for (int i=0; i < attrs.getAttributeCount(); i++) {
    String attr=attrs.getAttributeName(i);
    if (attr.equals("installLocation")) {
      installLocation=attrs.getAttributeIntValue(i,PARSE_DEFAULT_INSTALL_LOCATION);
      numFound++;
    }
 else     if (attr.equals("versionCode")) {
      versionCode=attrs.getAttributeIntValue(i,0);
      numFound++;
    }
 else     if (attr.equals("coreApp")) {
      coreApp=attrs.getAttributeBooleanValue(i,false);
      numFound++;
    }
    if (numFound >= 3) {
      break;
    }
  }
  int type;
  final int searchDepth=parser.getDepth() + 1;
  final List<VerifierInfo> verifiers=new ArrayList<VerifierInfo>();
  while ((type=parser.next()) != XmlPullParser.END_DOCUMENT && (type != XmlPullParser.END_TAG || parser.getDepth() >= searchDepth)) {
    if (type == XmlPullParser.END_TAG || type == XmlPullParser.TEXT) {
      continue;
    }
    if (parser.getDepth() == searchDepth && "package-verifier".equals(parser.getName())) {
      final VerifierInfo verifier=parseVerifier(res,parser,attrs,flags);
      if (verifier != null) {
        verifiers.add(verifier);
      }
    }
    if (parser.getDepth() == searchDepth && "application".equals(parser.getName())) {
      for (int i=0; i < attrs.getAttributeCount(); ++i) {
        final String attr=attrs.getAttributeName(i);
        if ("multiArch".equals(attr)) {
          multiArch=attrs.getAttributeBooleanValue(i,false);
          break;
        }
      }
    }
  }
  return new ApkLite(codePath,packageSplit.first,packageSplit.second,versionCode,installLocation,verifiers,signatures,coreApp,multiArch);
}
