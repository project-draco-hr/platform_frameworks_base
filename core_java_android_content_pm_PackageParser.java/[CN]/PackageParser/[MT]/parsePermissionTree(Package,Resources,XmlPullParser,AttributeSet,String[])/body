{
  Permission perm=new Permission(owner);
  TypedArray sa=res.obtainAttributes(attrs,com.android.internal.R.styleable.AndroidManifestPermissionTree);
  if (!parsePackageItemInfo(owner,perm.info,outError,"<permission-tree>",sa,com.android.internal.R.styleable.AndroidManifestPermissionTree_name,com.android.internal.R.styleable.AndroidManifestPermissionTree_label,com.android.internal.R.styleable.AndroidManifestPermissionTree_icon,com.android.internal.R.styleable.AndroidManifestPermissionTree_logo)) {
    sa.recycle();
    mParseError=PackageManager.INSTALL_PARSE_FAILED_MANIFEST_MALFORMED;
    return null;
  }
  sa.recycle();
  int index=perm.info.name.indexOf('.');
  if (index > 0) {
    index=perm.info.name.indexOf('.',index + 1);
  }
  if (index < 0) {
    outError[0]="<permission-tree> name has less than three segments: " + perm.info.name;
    mParseError=PackageManager.INSTALL_PARSE_FAILED_MANIFEST_MALFORMED;
    return null;
  }
  perm.info.descriptionRes=0;
  perm.info.protectionLevel=PermissionInfo.PROTECTION_NORMAL;
  perm.tree=true;
  if (!parseAllMetaData(res,parser,attrs,"<permission-tree>",perm,outError)) {
    mParseError=PackageManager.INSTALL_PARSE_FAILED_MANIFEST_MALFORMED;
    return null;
  }
  owner.permissions.add(perm);
  return perm;
}
