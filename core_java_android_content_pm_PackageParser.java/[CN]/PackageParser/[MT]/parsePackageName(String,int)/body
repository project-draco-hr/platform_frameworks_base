{
  XmlResourceParser parser=null;
  AssetManager assmgr=null;
  try {
    assmgr=new AssetManager();
    int cookie=assmgr.addAssetPath(packageFilePath);
    parser=assmgr.openXmlResourceParser(cookie,"AndroidManifest.xml");
  }
 catch (  Exception e) {
    if (assmgr != null)     assmgr.close();
    Log.w(TAG,"Unable to read AndroidManifest.xml of " + packageFilePath,e);
    return null;
  }
  AttributeSet attrs=parser;
  String errors[]=new String[1];
  String packageName=null;
  try {
    packageName=parsePackageName(parser,attrs,flags,errors);
  }
 catch (  IOException e) {
    Log.w(TAG,packageFilePath,e);
  }
catch (  XmlPullParserException e) {
    Log.w(TAG,packageFilePath,e);
  }
 finally {
    if (parser != null)     parser.close();
    if (assmgr != null)     assmgr.close();
  }
  if (packageName == null) {
    Log.e(TAG,"parsePackageName error: " + errors[0]);
    return null;
  }
  return packageName;
}
