{
  final Context context=getActivity();
  final ContentResolver resolver=context.getContentResolver();
  final AlertDialog.Builder builder=new AlertDialog.Builder(context);
  final LayoutInflater dialogInflater=LayoutInflater.from(builder.getContext());
  final View view=dialogInflater.inflate(R.layout.dialog_create_dir,null,false);
  final EditText text1=(EditText)view.findViewById(android.R.id.text1);
  builder.setTitle(R.string.menu_create_dir);
  builder.setView(view);
  builder.setPositiveButton(android.R.string.ok,new OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      final String displayName=text1.getText().toString();
      final DocumentsActivity activity=(DocumentsActivity)getActivity();
      final Document cwd=activity.getCurrentDirectory();
      final ContentProviderClient client=resolver.acquireUnstableContentProviderClient(cwd.uri.getAuthority());
      try {
        final String docId=DocumentsContract.createDocument(client,DocumentsContract.getDocId(cwd.uri),Documents.MIME_TYPE_DIR,displayName);
        final Uri childUri=DocumentsContract.buildDocumentUri(cwd.uri.getAuthority(),docId);
        final Document childDoc=Document.fromUri(resolver,childUri);
        activity.onDocumentPicked(childDoc);
      }
 catch (      Exception e) {
        Toast.makeText(context,R.string.save_error,Toast.LENGTH_SHORT).show();
      }
 finally {
        ContentProviderClient.closeQuietly(client);
      }
    }
  }
);
  builder.setNegativeButton(android.R.string.cancel,null);
  return builder.create();
}
