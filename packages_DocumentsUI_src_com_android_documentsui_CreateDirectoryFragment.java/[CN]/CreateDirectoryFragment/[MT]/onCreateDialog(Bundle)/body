{
  final Context context=getActivity();
  final ContentResolver resolver=context.getContentResolver();
  final AlertDialog.Builder builder=new AlertDialog.Builder(context);
  final LayoutInflater dialogInflater=LayoutInflater.from(builder.getContext());
  final View view=dialogInflater.inflate(R.layout.dialog_create_dir,null,false);
  final EditText text1=(EditText)view.findViewById(android.R.id.text1);
  builder.setTitle(R.string.menu_create_dir);
  builder.setView(view);
  builder.setPositiveButton(android.R.string.ok,new OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      final String displayName=text1.getText().toString();
      final ContentValues values=new ContentValues();
      values.put(DocumentColumns.MIME_TYPE,Documents.MIME_TYPE_DIR);
      values.put(DocumentColumns.DISPLAY_NAME,displayName);
      final DocumentsActivity activity=(DocumentsActivity)getActivity();
      final Document cwd=activity.getCurrentDirectory();
      Uri childUri=resolver.insert(cwd.uri,values);
      try {
        final Document childDoc=Document.fromUri(resolver,childUri);
        activity.onDocumentPicked(childDoc);
      }
 catch (      FileNotFoundException e) {
        childUri=null;
      }
      if (childUri == null) {
        Toast.makeText(context,R.string.save_error,Toast.LENGTH_SHORT).show();
      }
    }
  }
);
  builder.setNegativeButton(android.R.string.cancel,null);
  return builder.create();
}
