{
  if (DEBUG) {
    Log.v(TAG,"unmarshal, buffer remaining " + buffer.remaining());
  }
  buffer.mark();
  Parcel parcel=Parcel.obtain();
  try {
    int maxLength=buffer.remaining();
    byte[] remaining=new byte[maxLength];
    buffer.get(remaining);
    parcel.unmarshall(remaining,0,maxLength);
    parcel.setDataPosition(0);
    T value=mCreator.createFromParcel(parcel);
    int actualLength=parcel.dataPosition();
    if (actualLength == 0) {
      throw new AssertionError("No data marshaled for " + value);
    }
    buffer.reset();
    buffer.position(buffer.position() + actualLength);
    if (DEBUG) {
      Log.v(TAG,"unmarshal, parcel length was " + actualLength);
      Log.v(TAG,"unmarshal, value is " + value);
    }
    return mClass.cast(value);
  }
  finally {
    parcel.recycle();
  }
}
