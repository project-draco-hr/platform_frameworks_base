{
  super(TAG);
  mContext=context;
  mBluetoothService=bluetoothService;
  mEventLoop=new BluetoothEventLoop(context,bluetoothAdapter,bluetoothService,this);
  mBluetoothOn=new BluetoothOn();
  mSwitching=new Switching();
  mHotOff=new HotOff();
  mWarmUp=new WarmUp();
  mPowerOff=new PowerOff();
  mPerProcessState=new PerProcessState();
  addState(mBluetoothOn);
  addState(mSwitching);
  addState(mHotOff);
  addState(mWarmUp);
  addState(mPowerOff);
  addState(mPerProcessState);
  setInitialState(mPowerOff);
  mPublicState=BluetoothAdapter.STATE_OFF;
  if (mContext.getResources().getBoolean(com.android.internal.R.bool.config_bluetooth_adapter_quick_switch)) {
    sendMessage(TURN_HOT);
  }
}
