{
  if (DBG)   log("BluetoothOn process message: " + message.what);
  boolean retValue=HANDLED;
switch (message.what) {
case USER_TURN_OFF:
    if ((Boolean)message.obj) {
      mPersistBluetoothOff=true;
    }
case AIRPLANE_MODE_ON:
  transitionTo(mSwitching);
broadcastState(BluetoothAdapter.STATE_TURNING_OFF);
mBluetoothService.switchConnectable(false);
mBluetoothService.disconnectDevices();
if (message.what == AIRPLANE_MODE_ON) {
deferMessage(obtainMessage(AIRPLANE_MODE_ON));
}
break;
case AIRPLANE_MODE_OFF:
case USER_TURN_ON:
break;
default :
return NOT_HANDLED;
}
return retValue;
}
