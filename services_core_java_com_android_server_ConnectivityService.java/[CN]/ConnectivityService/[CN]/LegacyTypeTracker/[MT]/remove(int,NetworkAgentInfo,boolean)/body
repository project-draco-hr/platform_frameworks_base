{
  ArrayList<NetworkAgentInfo> list=mTypeLists[type];
  if (list == null || list.isEmpty()) {
    return;
  }
  final boolean wasFirstNetwork=list.get(0).equals(nai);
synchronized (mTypeLists) {
    if (!list.remove(nai)) {
      return;
    }
  }
  final DetailedState state=DetailedState.DISCONNECTED;
  if (wasFirstNetwork || wasDefault) {
    maybeLogBroadcast(nai,state,type,wasDefault);
    sendLegacyNetworkBroadcast(nai,state,type);
  }
  if (!list.isEmpty() && wasFirstNetwork) {
    if (DBG)     log("Other network available for type " + type + ", sending connected broadcast");
    final NetworkAgentInfo replacement=list.get(0);
    maybeLogBroadcast(replacement,state,type,isDefaultNetwork(replacement));
    sendLegacyNetworkBroadcast(replacement,state,type);
  }
}
