{
  if (!isTypeSupported(type)) {
    return;
  }
  if (VDBG)   log("Adding agent " + nai + " for legacy network type "+ type);
  ArrayList<NetworkAgentInfo> list=mTypeLists[type];
  if (list.contains(nai)) {
    return;
  }
synchronized (mTypeLists) {
    list.add(nai);
  }
  final boolean isDefaultNetwork=isDefaultNetwork(nai);
  if ((list.size() == 1) || isDefaultNetwork) {
    maybeLogBroadcast(nai,DetailedState.CONNECTED,type,isDefaultNetwork);
    sendLegacyNetworkBroadcast(nai,DetailedState.CONNECTED,type);
  }
}
