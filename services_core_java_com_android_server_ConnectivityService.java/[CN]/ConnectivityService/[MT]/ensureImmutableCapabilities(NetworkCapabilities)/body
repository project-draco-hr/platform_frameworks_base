{
  if (networkCapabilities.hasCapability(NET_CAPABILITY_VALIDATED)) {
    throw new IllegalArgumentException("Cannot request network with NET_CAPABILITY_VALIDATED");
  }
  if (networkCapabilities.hasCapability(NET_CAPABILITY_CAPTIVE_PORTAL)) {
    throw new IllegalArgumentException("Cannot request network with NET_CAPABILITY_CAPTIVE_PORTAL");
  }
}
