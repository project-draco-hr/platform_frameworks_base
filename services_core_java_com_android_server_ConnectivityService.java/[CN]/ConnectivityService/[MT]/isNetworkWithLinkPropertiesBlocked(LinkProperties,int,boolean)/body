{
  if (ignoreBlocked)   return false;
  if (uid < Process.FIRST_APPLICATION_UID)   return false;
  final boolean networkMetered;
  final int uidRules;
  final String iface=(lp == null ? "" : lp.getInterfaceName());
synchronized (mRulesLock) {
    networkMetered=mMeteredIfaces.contains(iface);
    uidRules=mUidRules.get(uid,RULE_NONE);
  }
switch (uidRules) {
case RULE_ALLOW_ALL:
case RULE_ALLOW_METERED:
case RULE_TEMPORARY_ALLOW_METERED:
    return false;
case RULE_REJECT_METERED:
  return networkMetered;
case RULE_REJECT_ALL:
return true;
case RULE_NONE:
default :
return mRestrictBackground ? networkMetered : false;
}
}
