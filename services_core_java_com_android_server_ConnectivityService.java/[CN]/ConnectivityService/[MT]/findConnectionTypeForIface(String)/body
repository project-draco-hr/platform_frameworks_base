{
  enforceConnectivityInternalPermission();
  if (TextUtils.isEmpty(iface))   return ConnectivityManager.TYPE_NONE;
synchronized (mNetworkForNetId) {
    for (int i=0; i < mNetworkForNetId.size(); i++) {
      NetworkAgentInfo nai=mNetworkForNetId.valueAt(i);
      LinkProperties lp=nai.linkProperties;
      if (lp != null && iface.equals(lp.getInterfaceName()) && nai.networkInfo != null) {
        return nai.networkInfo.getType();
      }
    }
  }
  return ConnectivityManager.TYPE_NONE;
}
