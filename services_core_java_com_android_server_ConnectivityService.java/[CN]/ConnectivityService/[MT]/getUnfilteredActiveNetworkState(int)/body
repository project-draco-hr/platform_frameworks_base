{
  NetworkInfo info=null;
  LinkProperties lp=null;
  NetworkCapabilities nc=null;
  Network network=null;
  NetworkAgentInfo nai=mNetworkForRequestId.get(mDefaultRequest.requestId);
  if (nai != null) {
synchronized (nai) {
      info=new NetworkInfo(nai.networkInfo);
      lp=new LinkProperties(nai.linkProperties);
      nc=new NetworkCapabilities(nai.networkCapabilities);
      network=new Network(nai.network);
    }
  }
  return new NetworkState(info,lp,nc,network);
}
