{
  if (networkCapabilities.hasCapability(NetworkCapabilities.NET_CAPABILITY_NOT_METERED) == false) {
    final int uidRules;
    final int uid=Binder.getCallingUid();
synchronized (mRulesLock) {
      uidRules=mUidRules.get(uid,RULE_ALLOW_ALL);
    }
    if ((uidRules & RULE_REJECT_METERED) != 0) {
      networkCapabilities.addCapability(NetworkCapabilities.NET_CAPABILITY_NOT_METERED);
    }
  }
}
