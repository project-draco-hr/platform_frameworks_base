{
  enforceAccessPermission();
  enforceInternetPermission();
  if (network == null)   return;
  final int uid=Binder.getCallingUid();
  NetworkAgentInfo nai=null;
synchronized (mNetworkForNetId) {
    nai=mNetworkForNetId.get(network.netId);
  }
  if (nai == null)   return;
  if (DBG)   log("reportBadNetwork(" + nai.name() + ") by "+ uid);
synchronized (nai) {
    if (!nai.created)     return;
    if (isNetworkBlocked(nai,uid))     return;
    nai.networkMonitor.sendMessage(NetworkMonitor.CMD_FORCE_REEVALUATION,uid);
  }
}
