{
  if (!Objects.equals(networkAgent.networkCapabilities,networkCapabilities)) {
synchronized (networkAgent) {
      networkAgent.networkCapabilities=networkCapabilities;
    }
    rematchAllNetworksAndRequests(networkAgent,networkAgent.getCurrentScore());
    notifyNetworkCallbacks(networkAgent,ConnectivityManager.CALLBACK_CAP_CHANGED);
  }
}
