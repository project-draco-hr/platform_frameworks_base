{
  int last=0;
  if (dnses.size() == 0 && mDefaultDns != null) {
    dnses=new ArrayList();
    dnses.add(mDefaultDns);
    if (DBG) {
      loge("no dns provided for " + network + " - using "+ mDefaultDns.getHostAddress());
    }
  }
  try {
    mNetd.setDnsServersForInterface(iface,NetworkUtils.makeStrings(dnses),domains);
    if (defaultDns) {
      mNetd.setDefaultInterfaceForDns(iface);
    }
    for (    InetAddress dns : dnses) {
      ++last;
      String key="net.dns" + last;
      String value=dns.getHostAddress();
      SystemProperties.set(key,value);
    }
    for (int i=last + 1; i <= mNumDnsEntries; ++i) {
      String key="net.dns" + i;
      SystemProperties.set(key,"");
    }
    mNumDnsEntries=last;
  }
 catch (  Exception e) {
    loge("exception setting default dns interface: " + e);
  }
}
