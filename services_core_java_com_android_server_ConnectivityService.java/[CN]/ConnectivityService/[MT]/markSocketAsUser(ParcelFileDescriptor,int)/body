{
  enforceMarkNetworkSocketPermission();
  final long token=Binder.clearCallingIdentity();
  try {
    int mark=mNetd.getMarkForUid(uid);
    if (mark == -1) {
      mark=0;
    }
    NetworkUtils.markSocket(socket.getFd(),mark);
  }
 catch (  RemoteException e) {
  }
 finally {
    Binder.restoreCallingIdentity(token);
  }
}
