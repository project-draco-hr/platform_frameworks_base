{
  enforceAccessPermission();
  NetworkAgentInfo nai=getNetworkAgentInfoForNetwork(network);
  if (nai != null) {
synchronized (nai) {
      NetworkCapabilities nc=new NetworkCapabilities(nai.networkCapabilities);
      if (nai.lastValidated) {
        nc.addCapability(NET_CAPABILITY_VALIDATED);
      }
 else {
        nc.removeCapability(NET_CAPABILITY_VALIDATED);
      }
      return nc;
    }
  }
  return null;
}
