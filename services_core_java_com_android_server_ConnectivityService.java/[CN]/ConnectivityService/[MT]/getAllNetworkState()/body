{
  enforceAccessPermission();
  final int uid=Binder.getCallingUid();
  final ArrayList<NetworkState> result=Lists.newArrayList();
synchronized (mRulesLock) {
    for (    NetworkStateTracker tracker : mNetTrackers) {
      if (tracker != null) {
        final NetworkInfo info=getFilteredNetworkInfo(tracker,uid);
        result.add(new NetworkState(info,tracker.getLinkProperties(),tracker.getLinkCapabilities()));
      }
    }
  }
  return result.toArray(new NetworkState[result.size()]);
}
