{
  enforceConnectivityInternalPermission();
  final ArrayList<NetworkState> result=Lists.newArrayList();
  for (  Network network : getAllNetworks()) {
    final NetworkAgentInfo nai=getNetworkAgentInfoForNetwork(network);
    if (nai != null) {
      result.add(nai.getNetworkState());
    }
  }
  return result.toArray(new NetworkState[result.size()]);
}
