{
  enforceAccessPermission();
  final int uid=Binder.getCallingUid();
  final ArrayList<NetworkState> result=Lists.newArrayList();
  for (int networkType=0; networkType <= ConnectivityManager.MAX_NETWORK_TYPE; networkType++) {
    NetworkState state=getFilteredNetworkState(networkType,uid);
    if (state.networkInfo != null) {
      result.add(state);
    }
  }
  return result.toArray(new NetworkState[result.size()]);
}
