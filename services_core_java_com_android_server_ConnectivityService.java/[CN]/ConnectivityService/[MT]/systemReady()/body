{
  Intent intent=new Intent(ACTION_PKT_CNT_SAMPLE_INTERVAL_ELAPSED);
  intent.setPackage(mContext.getPackageName());
  mSampleIntervalElapsedIntent=PendingIntent.getBroadcast(mContext,SAMPLE_INTERVAL_ELAPSED_REQUEST_CODE,intent,0);
  setAlarm(DEFAULT_START_SAMPLING_INTERVAL_IN_SECONDS * 1000,mSampleIntervalElapsedIntent);
  loadGlobalProxy();
synchronized (this) {
    mSystemReady=true;
    if (mInitialBroadcast != null) {
      mContext.sendStickyBroadcastAsUser(mInitialBroadcast,UserHandle.ALL);
      mInitialBroadcast=null;
    }
  }
  mHandler.sendMessage(mHandler.obtainMessage(EVENT_APPLY_GLOBAL_HTTP_PROXY));
  if (!updateLockdownVpn()) {
    final IntentFilter filter=new IntentFilter(Intent.ACTION_USER_PRESENT);
    mContext.registerReceiver(mUserPresentReceiver,filter);
  }
  mHandler.sendMessage(mHandler.obtainMessage(EVENT_SYSTEM_READY));
  mPermissionMonitor.startMonitoring();
}
