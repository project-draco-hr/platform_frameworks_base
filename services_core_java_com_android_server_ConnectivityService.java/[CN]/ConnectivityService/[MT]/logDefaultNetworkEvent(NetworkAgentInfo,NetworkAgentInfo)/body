{
  int newNetid=NETID_UNSET;
  int prevNetid=NETID_UNSET;
  int[] transports=new int[0];
  boolean hadIPv4=false;
  boolean hadIPv6=false;
  if (newNai != null) {
    newNetid=newNai.network.netId;
    transports=newNai.networkCapabilities.getTransportTypes();
  }
  if (prevNai != null) {
    prevNetid=prevNai.network.netId;
    final LinkProperties lp=prevNai.linkProperties;
    hadIPv4=lp.hasIPv4Address() && lp.hasIPv4DefaultRoute();
    hadIPv6=lp.hasGlobalIPv6Address() && lp.hasIPv6DefaultRoute();
  }
  DefaultNetworkEvent.logEvent(newNetid,transports,prevNetid,hadIPv4,hadIPv6);
}
