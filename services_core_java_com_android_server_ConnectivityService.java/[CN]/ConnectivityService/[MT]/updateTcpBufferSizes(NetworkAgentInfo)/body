{
  if (isDefaultNetwork(nai) == false) {
    return;
  }
  String tcpBufferSizes=nai.linkProperties.getTcpBufferSizes();
  String[] values=null;
  if (tcpBufferSizes != null) {
    values=tcpBufferSizes.split(",");
  }
  if (values == null || values.length != 6) {
    if (DBG)     log("Invalid tcpBufferSizes string: " + tcpBufferSizes + ", using defaults");
    tcpBufferSizes=DEFAULT_TCP_BUFFER_SIZES;
    values=tcpBufferSizes.split(",");
  }
  if (tcpBufferSizes.equals(mCurrentTcpBufferSizes))   return;
  try {
    if (VDBG)     Slog.d(TAG,"Setting tx/rx TCP buffers to " + tcpBufferSizes);
    final String prefix="/sys/kernel/ipv4/tcp_";
    FileUtils.stringToFile(prefix + "rmem_min",values[0]);
    FileUtils.stringToFile(prefix + "rmem_def",values[1]);
    FileUtils.stringToFile(prefix + "rmem_max",values[2]);
    FileUtils.stringToFile(prefix + "wmem_min",values[3]);
    FileUtils.stringToFile(prefix + "wmem_def",values[4]);
    FileUtils.stringToFile(prefix + "wmem_max",values[5]);
    mCurrentTcpBufferSizes=tcpBufferSizes;
  }
 catch (  IOException e) {
    loge("Can't set TCP buffer sizes:" + e);
  }
  Integer rwndValue=Settings.Global.getInt(mContext.getContentResolver(),Settings.Global.TCP_DEFAULT_INIT_RWND,getDefaultTcpRwnd());
  final String sysctlKey="sys.sysctl.tcp_def_init_rwnd";
  if (rwndValue != 0) {
    SystemProperties.set(sysctlKey,rwndValue.toString());
  }
}
