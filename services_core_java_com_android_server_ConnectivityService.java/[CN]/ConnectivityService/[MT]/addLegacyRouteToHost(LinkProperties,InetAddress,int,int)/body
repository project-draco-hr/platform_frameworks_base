{
  RouteInfo bestRoute=RouteInfo.selectBestRoute(lp.getAllRoutes(),addr);
  if (bestRoute == null) {
    bestRoute=RouteInfo.makeHostRoute(addr,lp.getInterfaceName());
  }
 else {
    String iface=bestRoute.getInterface();
    if (bestRoute.getGateway().equals(addr)) {
      bestRoute=RouteInfo.makeHostRoute(addr,iface);
    }
 else {
      bestRoute=RouteInfo.makeHostRoute(addr,bestRoute.getGateway(),iface);
    }
  }
  if (DBG)   log("Adding " + bestRoute + " for interface "+ bestRoute.getInterface());
  try {
    mNetd.addLegacyRouteForNetId(netId,bestRoute,uid);
  }
 catch (  Exception e) {
    if (DBG)     loge("Exception trying to add a route: " + e);
    return false;
  }
  return true;
}
