{
  enforceAccessPermission();
  final int uid=Binder.getCallingUid();
  final ArrayList<NetworkInfo> result=Lists.newArrayList();
synchronized (mRulesLock) {
    for (int networkType=0; networkType <= ConnectivityManager.MAX_NETWORK_TYPE; networkType++) {
      if (getNetworkInfoForType(networkType) != null) {
        result.add(getFilteredNetworkInfo(networkType,uid));
      }
    }
  }
  return result.toArray(new NetworkInfo[result.size()]);
}
