{
  checkNotNull(operation,"PendingIntent cannot be null.");
  if (!hasWifiNetworkListenPermission(networkCapabilities)) {
    enforceAccessPermission();
  }
  NetworkRequest networkRequest=new NetworkRequest(new NetworkCapabilities(networkCapabilities),TYPE_NONE,nextNetworkRequestId());
  if (DBG)   log("pendingListenForNetwork for " + networkRequest + " to trigger "+ operation);
  NetworkRequestInfo nri=new NetworkRequestInfo(networkRequest,operation,NetworkRequestInfo.LISTEN);
  mHandler.sendMessage(mHandler.obtainMessage(EVENT_REGISTER_NETWORK_LISTENER,nri));
}
