{
  CompareResult<RouteInfo> routeDiff=new CompareResult<RouteInfo>();
  if (oldLp != null) {
    routeDiff=oldLp.compareAllRoutes(newLp);
  }
 else   if (newLp != null) {
    routeDiff.added=newLp.getAllRoutes();
  }
  for (  RouteInfo route : routeDiff.added) {
    if (route.hasGateway())     continue;
    if (DBG)     log("Adding Route [" + route + "] to network "+ netId);
    try {
      mNetd.addRoute(netId,route);
    }
 catch (    Exception e) {
      if ((route.getDestination().getAddress() instanceof Inet4Address) || VDBG) {
        loge("Exception in addRoute for non-gateway: " + e);
      }
    }
  }
  for (  RouteInfo route : routeDiff.added) {
    if (route.hasGateway() == false)     continue;
    if (DBG)     log("Adding Route [" + route + "] to network "+ netId);
    try {
      mNetd.addRoute(netId,route);
    }
 catch (    Exception e) {
      if ((route.getGateway() instanceof Inet4Address) || VDBG) {
        loge("Exception in addRoute for gateway: " + e);
      }
    }
  }
  for (  RouteInfo route : routeDiff.removed) {
    if (DBG)     log("Removing Route [" + route + "] from network "+ netId);
    try {
      mNetd.removeRoute(netId,route);
    }
 catch (    Exception e) {
      loge("Exception in removeRoute: " + e);
    }
  }
  return !routeDiff.added.isEmpty() || !routeDiff.removed.isEmpty();
}
