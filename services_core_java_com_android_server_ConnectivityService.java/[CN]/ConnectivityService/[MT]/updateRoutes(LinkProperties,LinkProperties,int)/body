{
  CompareResult<RouteInfo> routeDiff=new CompareResult<RouteInfo>();
  if (oldLp != null) {
    routeDiff=oldLp.compareAllRoutes(newLp);
  }
 else   if (newLp != null) {
    routeDiff.added=newLp.getAllRoutes();
  }
  for (  RouteInfo route : routeDiff.added) {
    if (route.hasGateway())     continue;
    try {
      mNetd.addRoute(netId,route);
    }
 catch (    Exception e) {
      loge("Exception in addRoute for non-gateway: " + e);
    }
  }
  for (  RouteInfo route : routeDiff.added) {
    if (route.hasGateway() == false)     continue;
    try {
      mNetd.addRoute(netId,route);
    }
 catch (    Exception e) {
      loge("Exception in addRoute for gateway: " + e);
    }
  }
  for (  RouteInfo route : routeDiff.removed) {
    try {
      mNetd.removeRoute(netId,route);
    }
 catch (    Exception e) {
      loge("Exception in removeRoute: " + e);
    }
  }
  return !routeDiff.added.isEmpty() || !routeDiff.removed.isEmpty();
}
