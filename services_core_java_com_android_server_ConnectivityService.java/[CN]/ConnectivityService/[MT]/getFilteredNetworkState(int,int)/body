{
  NetworkInfo info=null;
  LinkProperties lp=null;
  NetworkCapabilities nc=null;
  Network network=null;
  String subscriberId=null;
  if (mLegacyTypeTracker.isTypeSupported(networkType)) {
    NetworkAgentInfo nai=mLegacyTypeTracker.getNetworkForType(networkType);
    if (nai != null) {
synchronized (nai) {
        info=new NetworkInfo(nai.networkInfo);
        lp=new LinkProperties(nai.linkProperties);
        nc=new NetworkCapabilities(nai.networkCapabilities);
        network=nai.network;
        subscriberId=(nai.networkMisc != null) ? nai.networkMisc.subscriberId : null;
      }
      info.setType(networkType);
    }
 else {
      info=new NetworkInfo(networkType,0,getNetworkTypeName(networkType),"");
      info.setDetailedState(NetworkInfo.DetailedState.DISCONNECTED,null,null);
      info.setIsAvailable(true);
      lp=new LinkProperties();
      nc=new NetworkCapabilities();
      network=null;
    }
    info=getFilteredNetworkInfo(info,lp,uid);
  }
  return new NetworkState(info,lp,nc,network,subscriberId,null);
}
