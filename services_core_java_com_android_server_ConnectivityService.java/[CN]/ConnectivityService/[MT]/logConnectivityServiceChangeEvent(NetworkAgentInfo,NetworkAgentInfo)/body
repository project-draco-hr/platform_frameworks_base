{
  final int newNetId=(next == null) ? NETID_UNSET : next.network.netId;
  final int[] newTransportTypes=(next == null) ? new int[0] : next.networkCapabilities.getTransportTypes();
  final int oldNetId=(prev == null) ? NETID_UNSET : prev.network.netId;
  final boolean hadIPv4=(prev != null) && prev.linkProperties.hasIPv4Address() && prev.linkProperties.hasIPv4DefaultRoute();
  final boolean hadIPv6=(prev != null) && prev.linkProperties.hasGlobalIPv6Address() && prev.linkProperties.hasIPv6DefaultRoute();
  ConnectivityServiceChangeEvent.logEvent(newNetId,newTransportTypes,oldNetId,hadIPv4,hadIPv6);
}
