{
synchronized (mSpellCheckerMap) {
    final String subtypeHashCodeStr=Settings.Secure.getString(mContext.getContentResolver(),Settings.Secure.SELECTED_SPELL_CHECKER_SUBTYPE);
    if (DBG) {
      Slog.w(TAG,"getCurrentSpellChecker: " + subtypeHashCodeStr);
    }
    final SpellCheckerInfo sci=getCurrentSpellChecker(null);
    if (sci.getSubtypeCount() == 0) {
      return null;
    }
    if (TextUtils.isEmpty(subtypeHashCodeStr)) {
      return sci.getSubtypeAt(0);
    }
    final int hashCode=Integer.valueOf(subtypeHashCodeStr);
    for (int i=0; i < sci.getSubtypeCount(); ++i) {
      final SpellCheckerSubtype scs=sci.getSubtypeAt(i);
      if (scs.hashCode() == hashCode) {
        return scs;
      }
    }
    return sci.getSubtypeAt(0);
  }
}
