{
synchronized (mSpellCheckerMap) {
    buildSpellCheckerMapLocked(mContext,mSpellCheckerList,mSpellCheckerMap);
    SpellCheckerInfo sci=getCurrentSpellChecker(null);
    if (sci == null) {
      sci=findAvailSpellCheckerLocked(null,null);
      if (sci == null)       return;
      setCurrentSpellChecker(sci);
    }
    final String packageName=sci.getPackageName();
    final int change=isPackageDisappearing(packageName);
    if (change == PACKAGE_PERMANENT_CHANGE || change == PACKAGE_TEMPORARY_CHANGE) {
      setCurrentSpellChecker(findAvailSpellCheckerLocked(null,packageName));
    }
 else     if (isPackageModified(packageName)) {
      setCurrentSpellChecker(findAvailSpellCheckerLocked(null,packageName));
    }
  }
}
