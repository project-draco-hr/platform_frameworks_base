{
  final long startTimeMillis=SystemClock.uptimeMillis();
  try {
    final AccessibilityNodeInfo button=mUiTestAutomationBridge.findAccessibilityNodeInfoByViewIdInActiveWindow(R.id.button5);
    assertFalse(button.isFocused());
    AccessibilityEvent event=mUiTestAutomationBridge.executeCommandAndWaitForAccessibilityEvent(new Runnable(){
      @Override public void run(){
        assertTrue(button.performAction(ACTION_FOCUS));
      }
    }
,new Predicate<AccessibilityEvent>(){
      @Override public boolean apply(      AccessibilityEvent event){
        return (event.getEventType() == AccessibilityEvent.TYPE_VIEW_FOCUSED && event.getPackageName().equals(getActivity().getPackageName()) && event.getText().get(0).equals(button.getText()));
      }
    }
,TIMEOUT_PROPAGATE_ACCESSIBILITY_EVENT_MILLIS);
    assertNotNull(event);
    AccessibilityNodeInfo source=event.getSource();
    assertNotNull(source);
    Rect buttonBounds=new Rect();
    button.getBoundsInParent(buttonBounds);
    Rect sourceBounds=new Rect();
    source.getBoundsInParent(sourceBounds);
    assertEquals(buttonBounds.left,sourceBounds.left);
    assertEquals(buttonBounds.right,sourceBounds.right);
    assertEquals(buttonBounds.top,sourceBounds.top);
    assertEquals(buttonBounds.bottom,sourceBounds.bottom);
    assertEquals(button.getPackageName(),source.getPackageName());
    assertEquals(button.getClassName(),source.getClassName());
    assertEquals(button.getText(),source.getText());
    assertSame(button.getContentDescription(),source.getContentDescription());
    assertSame(button.isFocusable(),source.isFocusable());
    assertSame(button.isClickable(),source.isClickable());
    assertSame(button.isEnabled(),source.isEnabled());
    assertNotSame(button.isFocused(),source.isFocused());
    assertSame(button.isLongClickable(),source.isLongClickable());
    assertSame(button.isPassword(),source.isPassword());
    assertSame(button.isSelected(),source.isSelected());
    assertSame(button.isCheckable(),source.isCheckable());
    assertSame(button.isChecked(),source.isChecked());
  }
  finally {
    if (DEBUG) {
      final long elapsedTimeMillis=SystemClock.uptimeMillis() - startTimeMillis;
      Log.i(LOG_TAG,"testAccessibilityEventGetSource: " + elapsedTimeMillis + "ms");
    }
  }
}
