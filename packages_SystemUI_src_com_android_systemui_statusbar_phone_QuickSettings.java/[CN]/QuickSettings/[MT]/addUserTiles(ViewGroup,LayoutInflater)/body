{
  QuickSettingsTileView userTile=(QuickSettingsTileView)inflater.inflate(R.layout.quick_settings_tile,parent,false);
  userTile.setContent(R.layout.quick_settings_tile_user,inflater);
  userTile.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      collapsePanels();
      final UserManager um=UserManager.get(mContext);
      if (um.getUsers(true).size() > 1) {
        mHandler.postDelayed(new Runnable(){
          public void run(){
            try {
              WindowManagerGlobal.getWindowManagerService().lockNow(null);
            }
 catch (            RemoteException e) {
              Log.e(TAG,"Couldn't show user switcher",e);
            }
          }
        }
,400);
      }
 else {
        Intent intent=ContactsContract.QuickContact.composeQuickContactsIntent(mContext,v,ContactsContract.Profile.CONTENT_URI,ContactsContract.QuickContact.MODE_LARGE,null);
        mContext.startActivityAsUser(intent,new UserHandle(UserHandle.USER_CURRENT));
      }
    }
  }
);
  mModel.addUserTile(userTile,new QuickSettingsModel.RefreshCallback(){
    @Override public void refreshView(    QuickSettingsTileView view,    State state){
      UserState us=(UserState)state;
      ImageView iv=(ImageView)view.findViewById(R.id.user_imageview);
      TextView tv=(TextView)view.findViewById(R.id.user_textview);
      tv.setText(state.label);
      iv.setImageDrawable(us.avatar);
      view.setContentDescription(mContext.getString(R.string.accessibility_quick_settings_user,state.label));
    }
  }
);
  parent.addView(userTile);
  mDynamicSpannedTiles.add(userTile);
  final QuickSettingsBasicTile brightnessTile=new QuickSettingsBasicTile(mContext);
  brightnessTile.setImageResource(R.drawable.ic_qs_brightness_auto_off);
  brightnessTile.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      collapsePanels();
      showBrightnessDialog();
    }
  }
);
  mModel.addBrightnessTile(brightnessTile,new QuickSettingsModel.BasicRefreshCallback(brightnessTile));
  parent.addView(brightnessTile);
  mDynamicSpannedTiles.add(brightnessTile);
  final QuickSettingsBasicTile settingsTile=new QuickSettingsBasicTile(mContext);
  settingsTile.setImageResource(R.drawable.ic_qs_settings);
  settingsTile.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      startSettingsActivity(android.provider.Settings.ACTION_SETTINGS);
    }
  }
);
  mModel.addSettingsTile(settingsTile,new QuickSettingsModel.BasicRefreshCallback(settingsTile));
  parent.addView(settingsTile);
  mDynamicSpannedTiles.add(settingsTile);
}
