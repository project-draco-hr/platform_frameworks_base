{
  setThrottlePolicy(500 * MB_IN_BYTES,TEST_KBITPS,TEST_RESET_DAY);
  expectTimeCurrent();
  expectSystemReady();
  expectGetInterfaceCounter(50 * MB_IN_BYTES,50 * MB_IN_BYTES);
  expectSetInterfaceThrottle(-1,-1);
  replay(mMockTime,mMockNMService);
  systemReady();
  verify(mMockTime,mMockNMService);
  reset(mMockTime,mMockNMService);
  expectTimeCurrent();
  expectGetInterfaceCounter(50 * MB_IN_BYTES,50 * MB_IN_BYTES);
  expectSetInterfaceThrottle(TEST_KBITPS,TEST_KBITPS);
  replay(mMockTime,mMockNMService);
  setThrottlePolicy(5 * MB_IN_BYTES,TEST_KBITPS,TEST_RESET_DAY);
  mWatchingContext.nextBroadcastIntent(ThrottleManager.POLICY_CHANGED_ACTION).get();
  verify(mMockTime,mMockNMService);
}
