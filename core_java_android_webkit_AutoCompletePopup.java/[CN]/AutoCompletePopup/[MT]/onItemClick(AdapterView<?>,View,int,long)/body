{
  if (mPopup == null) {
    return;
  }
  if (id == 0 && position == 0 && mInputConnection.getIsAutoFillable()) {
    mText="";
    pushTextToInputConnection();
    if (mIsAutoFillProfileSet) {
      mWebView.autoFillForm(mQueryId);
    }
 else {
      WebChromeClient webChromeClient=mWebView.getWebChromeClient();
      if (webChromeClient != null) {
        webChromeClient.setupAutoFill(mHandler.obtainMessage(AUTOFILL_FORM));
      }
    }
  }
 else {
    Object selectedItem;
    if (position < 0) {
      selectedItem=mPopup.getSelectedItem();
    }
 else {
      selectedItem=mAdapter.getItem(position);
    }
    if (selectedItem != null) {
      setText(mFilter.convertResultToString(selectedItem));
      pushTextToInputConnection();
    }
  }
  mPopup.dismiss();
}
