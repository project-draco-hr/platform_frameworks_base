{
  if (outputs == null || outputs.isEmpty()) {
    throw new IllegalArgumentException("outputs must be a non-null, non-empty list");
  }
 else   if (listener == null) {
    throw new IllegalArgumentException("listener must not be null");
  }
  mOutputs=outputs;
  mStateHandler=checkHandler(stateHandler);
  mStateListener=createUserStateListenerProxy(mStateHandler,listener);
  mDeviceHandler=checkNotNull(deviceStateHandler,"deviceStateHandler must not be null");
  mDeviceImpl=checkNotNull(deviceImpl,"deviceImpl must not be null");
  mSequenceDrainer=new TaskDrainer<>(mDeviceHandler,new SequenceDrainListener(),"seq");
  mIdleDrainer=new TaskSingleDrainer(mDeviceHandler,new IdleDrainListener(),"idle");
  mAbortDrainer=new TaskSingleDrainer(mDeviceHandler,new AbortDrainListener(),"abort");
  mUnconfigureDrainer=new TaskSingleDrainer(mDeviceHandler,new UnconfigureDrainListener(),"unconf");
  if (configureSuccess) {
    mStateListener.onConfigured(this);
    if (VERBOSE)     Log.v(TAG,"ctor - Created session successfully");
    mConfigureSuccess=true;
  }
 else {
    mStateListener.onConfigureFailed(this);
    mClosed=true;
    Log.e(TAG,"Failed to create capture session; configuration failed");
    mConfigureSuccess=false;
  }
}
