{
  if (mAnimating) {
    if (SPEW)     Slog.d(TAG,"doAnimation dt=" + (frameTimeNanos - mAnimLastTimeNanos));
    if (SPEW)     Slog.d(TAG,"doAnimation before mAnimY=" + mAnimY);
    incrementAnim(frameTimeNanos);
    if (SPEW) {
      Slog.d(TAG,"doAnimation after  mAnimY=" + mAnimY);
    }
    if (mAnimY >= getExpandedViewMaxHeight() - 1 && !mClosing) {
      if (SPEW)       Slog.d(TAG,"Animation completed to expanded state.");
      mAnimating=false;
      mYDelta=getExpandedViewMaxHeight();
      updateUniverseScale();
      mExpanded=true;
      mState=STATE_OPEN;
      return;
    }
    if (mAnimY <= 0 && mClosing) {
      if (SPEW)       Slog.d(TAG,"Animation completed to collapsed state.");
      mAnimating=false;
      mYDelta=0;
      updateUniverseScale();
      mExpanded=false;
      mState=STATE_CLOSED;
      return;
    }
    mYDelta=(int)mAnimY;
    updateUniverseScale();
    mChoreographer.postCallback(Choreographer.CALLBACK_ANIMATION,mAnimationCallback,null);
  }
}
