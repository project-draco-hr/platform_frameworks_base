{
  Size[] outputSizes=mCameraManager.getCameraCharacteristics(cameraId).get(CameraCharacteristics.SCALER_STREAM_CONFIGURATION_MAP).getOutputSizes(SurfaceTexture.class);
  if (outputSizes == null || outputSizes.length == 0) {
    throw new IllegalStateException("Camera " + cameraId + "doesn't support any outputSize.");
  }
  Size chosen=outputSizes[0];
  for (  Size s : outputSizes) {
    if (chosen.getWidth() >= s.getWidth() && chosen.getHeight() >= s.getHeight()) {
      chosen=s;
    }
  }
  return chosen;
}
