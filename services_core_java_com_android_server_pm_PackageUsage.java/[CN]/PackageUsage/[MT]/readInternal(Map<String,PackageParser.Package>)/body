{
  AtomicFile file=getFile();
  BufferedInputStream in=null;
  try {
    in=new BufferedInputStream(file.openRead());
    StringBuffer sb=new StringBuffer();
    String firstLine=readLine(in,sb);
    if (firstLine == null) {
    }
 else     if (USAGE_FILE_MAGIC_VERSION_1.equals(firstLine)) {
      readVersion1LP(packages,in,sb);
    }
 else {
      readVersion0LP(packages,in,sb,firstLine);
    }
  }
 catch (  FileNotFoundException expected) {
    mIsHistoricalPackageUsageAvailable=false;
  }
catch (  IOException e) {
    Log.w(PackageManagerService.TAG,"Failed to read package usage times",e);
  }
 finally {
    IoUtils.closeQuietly(in);
  }
}
