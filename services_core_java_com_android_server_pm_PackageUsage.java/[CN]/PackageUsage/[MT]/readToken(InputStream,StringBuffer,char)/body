{
  sb.setLength(0);
  while (true) {
    int ch=in.read();
    if (ch == -1) {
      if (sb.length() == 0) {
        return null;
      }
      throw new IOException("Unexpected EOF");
    }
    if (ch == endOfToken) {
      return sb.toString();
    }
    sb.append((char)ch);
  }
}
