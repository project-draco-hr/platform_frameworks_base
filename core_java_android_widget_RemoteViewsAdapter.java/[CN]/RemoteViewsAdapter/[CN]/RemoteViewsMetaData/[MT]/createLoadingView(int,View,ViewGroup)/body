{
  final Context context=parent.getContext();
  RemoteViewsFrameLayout layout=new RemoteViewsFrameLayout(context);
synchronized (mCache) {
    boolean customLoadingViewAvailable=false;
    if (mUserLoadingView != null) {
      try {
        View loadingView=mUserLoadingView.apply(parent.getContext(),parent);
        loadingView.setTagInternal(com.android.internal.R.id.rowTypeId,new Integer(0));
        layout.addView(loadingView);
        customLoadingViewAvailable=true;
      }
 catch (      Exception e) {
        Log.w(TAG,"Error inflating custom loading view, using default loading" + "view instead",e);
      }
    }
    if (!customLoadingViewAvailable) {
      if (mFirstViewHeight < 0) {
        try {
          View firstView=mFirstView.apply(parent.getContext(),parent);
          firstView.measure(MeasureSpec.makeMeasureSpec(0,MeasureSpec.UNSPECIFIED),MeasureSpec.makeMeasureSpec(0,MeasureSpec.UNSPECIFIED));
          mFirstViewHeight=firstView.getMeasuredHeight();
          mFirstView=null;
        }
 catch (        Exception e) {
          float density=mContext.getResources().getDisplayMetrics().density;
          mFirstViewHeight=(int)Math.round(sDefaultLoadingViewHeight * density);
          mFirstView=null;
          Log.w(TAG,"Error inflating first RemoteViews" + e);
        }
      }
      TextView loadingTextView=(TextView)mLayoutInflater.inflate(com.android.internal.R.layout.remote_views_adapter_default_loading_view,layout,false);
      loadingTextView.setHeight(mFirstViewHeight);
      loadingTextView.setTag(new Integer(0));
      layout.addView(loadingTextView);
    }
  }
  return layout;
}
