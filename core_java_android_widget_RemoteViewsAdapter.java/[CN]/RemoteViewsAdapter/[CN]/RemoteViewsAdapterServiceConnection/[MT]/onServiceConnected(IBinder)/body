{
  mRemoteViewsFactory=IRemoteViewsFactory.Stub.asInterface(service);
  mConnected=true;
  final RemoteViewsAdapter adapter=mAdapter.get();
  if (adapter == null)   return;
  adapter.mWorkerQueue.post(new Runnable(){
    @Override public void run(){
      if (adapter.mServiceConnection.isConnected()) {
        IRemoteViewsFactory factory=adapter.mServiceConnection.getRemoteViewsFactory();
        try {
          factory.onDataSetChanged();
        }
 catch (        Exception e) {
          Log.e(TAG,"Error notifying factory of data set changed in " + "onServiceConnected(): " + e.getMessage());
          e.printStackTrace();
          return;
        }
        adapter.updateMetaData();
        adapter.mMainQueue.post(new Runnable(){
          @Override public void run(){
            final RemoteAdapterConnectionCallback callback=adapter.mCallback.get();
            if (callback != null) {
              callback.onRemoteAdapterConnected();
            }
          }
        }
);
      }
    }
  }
);
}
