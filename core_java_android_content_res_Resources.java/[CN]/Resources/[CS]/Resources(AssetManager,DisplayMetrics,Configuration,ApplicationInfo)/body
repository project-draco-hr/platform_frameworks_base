{
  mAssets=assets;
  mConfiguration.setToDefaults();
  mMetrics.setToDefaults();
  if (appInfo != null) {
    mCompatibilityInfo=new CompatibilityInfo(appInfo);
    if (DEBUG_CONFIG) {
      Log.d(TAG,"compatibility for " + appInfo.packageName + " : "+ mCompatibilityInfo);
    }
  }
 else {
    mCompatibilityInfo=CompatibilityInfo.DEFAULT_COMPATIBILITY_INFO;
  }
  updateConfiguration(config,metrics);
  assets.ensureStringBlocks();
  if (!mCompatibilityInfo.mScalingRequired) {
    mPreloadedDrawables=sPreloadedDrawables;
  }
 else {
    mPreloadedDrawables=emptySparseArray();
  }
}
