{
  if (mChallengeView == null || !mHasLayout) {
    return false;
  }
  final int bottomMargin=((LayoutParams)mChallengeView.getLayoutParams()).bottomMargin;
  final int layoutBottom=getHeight() - getPaddingBottom() - bottomMargin;
  final int challengeHeight=mChallengeView.getHeight();
  bottom=Math.max(layoutBottom,Math.min(bottom,layoutBottom + challengeHeight - mDragHandleSize));
  float offset=1.f - (float)(bottom - layoutBottom) / (challengeHeight - mDragHandleSize);
  mChallengeOffset=offset;
  if (offset > 0 && !mChallengeShowing) {
    setChallengeShowing(true);
  }
  mChallengeView.layout(mChallengeView.getLeft(),bottom - mChallengeView.getHeight(),mChallengeView.getRight(),bottom);
  mChallengeView.setAlpha(offset);
  if (mListener != null) {
    mListener.onScrollPositionChanged(offset,mChallengeView.getTop());
  }
  postInvalidateOnAnimation();
  return true;
}
