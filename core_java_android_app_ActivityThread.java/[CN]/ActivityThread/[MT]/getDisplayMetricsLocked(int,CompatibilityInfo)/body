{
  boolean isDefaultDisplay=(displayId == Display.DEFAULT_DISPLAY);
  DisplayMetrics dm=isDefaultDisplay ? mDefaultDisplayMetrics.get(ci) : null;
  if (dm != null) {
    return dm;
  }
  dm=new DisplayMetrics();
  DisplayManagerGlobal displayManager=DisplayManagerGlobal.getInstance();
  if (displayManager == null) {
    dm.setToDefaults();
    return dm;
  }
  if (isDefaultDisplay) {
    mDefaultDisplayMetrics.put(ci,dm);
  }
  CompatibilityInfoHolder cih=new CompatibilityInfoHolder();
  cih.set(ci);
  Display d=displayManager.getCompatibleDisplay(displayId,cih);
  if (d != null) {
    d.getMetrics(dm);
  }
 else {
    dm.setToDefaults();
  }
  return dm;
}
