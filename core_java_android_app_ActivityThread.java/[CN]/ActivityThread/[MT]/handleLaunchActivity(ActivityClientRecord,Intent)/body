{
  unscheduleGcIdler();
  if (r.profileFd != null) {
    mProfiler.setProfiler(r.profileFile,r.profileFd);
    mProfiler.startProfiling();
    mProfiler.autoStopProfiler=r.autoStopProfiler;
  }
  handleConfigurationChanged(null,null);
  if (localLOGV)   Slog.v(TAG,"Handling launch of " + r);
  Activity a=performLaunchActivity(r,customIntent);
  if (a != null) {
    r.createdConfig=new Configuration(mConfiguration);
    Bundle oldState=r.state;
    handleResumeActivity(r.token,false,r.isForward,!r.activity.mFinished && !r.startsNotResumed);
    if (!r.activity.mFinished && r.startsNotResumed) {
      try {
        r.activity.mCalled=false;
        mInstrumentation.callActivityOnPause(r.activity);
        if (r.isPreHoneycomb()) {
          r.state=oldState;
        }
        if (!r.activity.mCalled) {
          throw new SuperNotCalledException("Activity " + r.intent.getComponent().toShortString() + " did not call through to super.onPause()");
        }
      }
 catch (      SuperNotCalledException e) {
        throw e;
      }
catch (      Exception e) {
        if (!mInstrumentation.onException(r.activity,e)) {
          throw new RuntimeException("Unable to pause activity " + r.intent.getComponent().toShortString() + ": "+ e.toString(),e);
        }
      }
      r.paused=true;
    }
  }
 else {
    try {
      ActivityManagerNative.getDefault().finishActivity(r.token,Activity.RESULT_CANCELED,null);
    }
 catch (    RemoteException ex) {
    }
  }
}
