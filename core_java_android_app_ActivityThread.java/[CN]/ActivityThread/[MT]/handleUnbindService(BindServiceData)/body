{
  Service s=mServices.get(data.token);
  if (s != null) {
    try {
      data.intent.setExtrasClassLoader(s.getClassLoader());
      data.intent.prepareToEnterProcess();
      boolean doRebind=s.onUnbind(data.intent);
      try {
        if (doRebind) {
          ActivityManagerNative.getDefault().unbindFinished(data.token,data.intent,doRebind);
        }
 else {
          ActivityManagerNative.getDefault().serviceDoneExecuting(data.token,SERVICE_DONE_EXECUTING_ANON,0,0);
        }
      }
 catch (      RemoteException ex) {
        throw ex.rethrowFromSystemServer();
      }
    }
 catch (    Exception e) {
      if (!mInstrumentation.onException(s,e)) {
        throw new RuntimeException("Unable to unbind to service " + s + " with "+ data.intent+ ": "+ e.toString(),e);
      }
    }
  }
}
