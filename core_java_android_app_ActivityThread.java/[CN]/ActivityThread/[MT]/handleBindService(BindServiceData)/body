{
  Service s=mServices.get(data.token);
  if (DEBUG_SERVICE)   Slog.v(TAG,"handleBindService s=" + s + " rebind="+ data.rebind);
  if (s != null) {
    try {
      data.intent.setExtrasClassLoader(s.getClassLoader());
      data.intent.prepareToEnterProcess();
      try {
        if (!data.rebind) {
          IBinder binder=s.onBind(data.intent);
          ActivityManagerNative.getDefault().publishService(data.token,data.intent,binder);
        }
 else {
          s.onRebind(data.intent);
          ActivityManagerNative.getDefault().serviceDoneExecuting(data.token,SERVICE_DONE_EXECUTING_ANON,0,0);
        }
        ensureJitEnabled();
      }
 catch (      RemoteException ex) {
        throw ex.rethrowFromSystemServer();
      }
    }
 catch (    Exception e) {
      if (!mInstrumentation.onException(s,e)) {
        throw new RuntimeException("Unable to bind to service " + s + " with "+ data.intent+ ": "+ e.toString(),e);
      }
    }
  }
}
