{
  ContextImpl appContext=ContextImpl.createActivityContext(this,r.packageInfo,r.token);
  appContext.setOuterContext(activity);
  Context baseContext=appContext;
  final DisplayManagerGlobal dm=DisplayManagerGlobal.getInstance();
  try {
    IActivityContainer container=ActivityManagerNative.getDefault().getEnclosingActivityContainer(r.token);
    final int displayId=container == null ? Display.DEFAULT_DISPLAY : container.getDisplayId();
    if (displayId > Display.DEFAULT_DISPLAY) {
      Display display=dm.getRealDisplay(displayId,r.token);
      baseContext=appContext.createDisplayContext(display);
    }
  }
 catch (  RemoteException e) {
  }
  String pkgName=SystemProperties.get("debug.second-display.pkg");
  if (pkgName != null && !pkgName.isEmpty() && r.packageInfo.mPackageName.contains(pkgName)) {
    for (    int displayId : dm.getDisplayIds()) {
      if (displayId != Display.DEFAULT_DISPLAY) {
        Display display=dm.getRealDisplay(displayId,r.token);
        baseContext=appContext.createDisplayContext(display);
        break;
      }
    }
  }
  return baseContext;
}
