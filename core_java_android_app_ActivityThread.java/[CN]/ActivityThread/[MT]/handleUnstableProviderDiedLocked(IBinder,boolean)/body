{
  ProviderRefCount prc=mProviderRefCountMap.get(provider);
  if (prc != null) {
    if (DEBUG_PROVIDER)     Slog.v(TAG,"Cleaning up dead provider " + provider + " "+ prc.holder.info.name);
    mProviderRefCountMap.remove(provider);
    for (int i=mProviderMap.size() - 1; i >= 0; i--) {
      ProviderClientRecord pr=mProviderMap.valueAt(i);
      if (pr != null && pr.mProvider.asBinder() == provider) {
        Slog.i(TAG,"Removing dead content provider:" + pr.mProvider.toString());
        mProviderMap.removeAt(i);
      }
    }
    if (fromClient) {
      try {
        ActivityManagerNative.getDefault().unstableProviderDied(prc.holder.connection);
      }
 catch (      RemoteException e) {
      }
    }
  }
}
