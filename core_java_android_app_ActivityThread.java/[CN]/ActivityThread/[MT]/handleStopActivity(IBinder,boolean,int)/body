{
  ActivityRecord r=mActivities.get(token);
  r.activity.mConfigChangeFlags|=configChanges;
  StopInfo info=new StopInfo();
  performStopActivityInner(r,info,show);
  if (localLOGV)   Log.v(TAG,"Finishing stop of " + r + ": show="+ show+ " win="+ r.window);
  updateVisibility(r,show);
  try {
    ActivityManagerNative.getDefault().activityStopped(r.token,info.thumbnail,info.description);
  }
 catch (  RemoteException ex) {
  }
}
