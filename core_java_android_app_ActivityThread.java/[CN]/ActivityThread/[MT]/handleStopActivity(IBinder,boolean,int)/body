{
  ActivityClientRecord r=mActivities.get(token);
  r.activity.mConfigChangeFlags|=configChanges;
  StopInfo info=new StopInfo();
  performStopActivityInner(r,info,show,true);
  if (localLOGV)   Slog.v(TAG,"Finishing stop of " + r + ": show="+ show+ " win="+ r.window);
  updateVisibility(r,show);
  if (!r.isPreHoneycomb()) {
    QueuedWork.waitToFinish();
  }
  info.activity=r;
  info.state=r.state;
  mH.post(info);
}
