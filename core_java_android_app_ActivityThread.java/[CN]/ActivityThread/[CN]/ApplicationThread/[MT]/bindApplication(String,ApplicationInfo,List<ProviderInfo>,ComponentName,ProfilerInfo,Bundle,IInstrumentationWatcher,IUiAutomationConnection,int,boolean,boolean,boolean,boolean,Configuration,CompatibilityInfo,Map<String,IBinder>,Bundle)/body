{
  if (services != null) {
    ServiceManager.initServiceCache(services);
  }
  setCoreSettings(coreSettings);
  IPackageManager pm=getPackageManager();
  android.content.pm.PackageInfo pi=null;
  try {
    pi=pm.getPackageInfo(appInfo.packageName,0,UserHandle.myUserId());
  }
 catch (  RemoteException e) {
  }
  if (pi != null) {
    boolean sharedUserIdSet=(pi.sharedUserId != null);
    boolean processNameNotDefault=(pi.applicationInfo != null && !appInfo.packageName.equals(pi.applicationInfo.processName));
    boolean sharable=(sharedUserIdSet || processNameNotDefault);
    if (!sharable) {
      final List<String> codePaths=new ArrayList<>();
      codePaths.add(appInfo.sourceDir);
      if (appInfo.splitSourceDirs != null) {
        Collections.addAll(codePaths,appInfo.splitSourceDirs);
      }
      VMRuntime.registerAppInfo(appInfo.packageName,appInfo.dataDir,codePaths.toArray(new String[codePaths.size()]));
    }
  }
  AppBindData data=new AppBindData();
  data.processName=processName;
  data.appInfo=appInfo;
  data.providers=providers;
  data.instrumentationName=instrumentationName;
  data.instrumentationArgs=instrumentationArgs;
  data.instrumentationWatcher=instrumentationWatcher;
  data.instrumentationUiAutomationConnection=instrumentationUiConnection;
  data.debugMode=debugMode;
  data.enableBinderTracking=enableBinderTracking;
  data.trackAllocation=trackAllocation;
  data.restrictedBackupMode=isRestrictedBackupMode;
  data.persistent=persistent;
  data.config=config;
  data.compatInfo=compatInfo;
  data.initProfilerInfo=profilerInfo;
  sendMessage(H.BIND_APPLICATION,data);
}
