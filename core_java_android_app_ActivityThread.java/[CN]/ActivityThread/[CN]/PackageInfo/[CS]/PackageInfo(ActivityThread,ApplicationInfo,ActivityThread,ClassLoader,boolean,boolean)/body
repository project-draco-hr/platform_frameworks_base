{
  mActivityThread=activityThread;
  mApplicationInfo=aInfo;
  mPackageName=aInfo.packageName;
  mAppDir=aInfo.sourceDir;
  mResDir=aInfo.uid == Process.myUid() ? aInfo.sourceDir : aInfo.publicSourceDir;
  mSharedLibraries=aInfo.sharedLibraryFiles;
  mDataDir=aInfo.dataDir;
  mDataDirFile=mDataDir != null ? new File(mDataDir) : null;
  mBaseClassLoader=baseLoader;
  mSecurityViolation=securityViolation;
  mIncludeCode=includeCode;
  mCompatibilityInfo=new CompatibilityInfo(aInfo);
  if (mAppDir == null) {
    if (mSystemContext == null) {
      mSystemContext=ApplicationContext.createSystemContext(mainThread);
      mSystemContext.getResources().updateConfiguration(mainThread.getConfiguration(),mainThread.getDisplayMetricsLocked(false));
    }
    mClassLoader=mSystemContext.getClassLoader();
    mResources=mSystemContext.getResources();
  }
}
