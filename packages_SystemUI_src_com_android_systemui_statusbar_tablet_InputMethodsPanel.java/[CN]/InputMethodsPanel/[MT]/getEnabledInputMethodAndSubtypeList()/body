{
  String newEnabledIMIs=Settings.Secure.getString(mContext.getContentResolver(),Settings.Secure.ENABLED_INPUT_METHODS);
  String currentSystemLocaleString=mContext.getResources().getConfiguration().locale.toString();
  if (!TextUtils.equals(mEnabledInputMethodAndSubtypesCacheStr,newEnabledIMIs) || !TextUtils.equals(mLastSystemLocaleString,currentSystemLocaleString) || mPackageChanged) {
    mEnabledInputMethodAndSubtypesCache.clear();
    final List<InputMethodInfo> imis=mImm.getEnabledInputMethodList();
    for (    InputMethodInfo imi : imis) {
      mEnabledInputMethodAndSubtypesCache.put(imi,mImm.getEnabledInputMethodSubtypeList(imi,true));
    }
    mEnabledInputMethodAndSubtypesCacheStr=newEnabledIMIs;
    mPackageChanged=false;
    mLastSystemLocaleString=currentSystemLocaleString;
  }
  return mEnabledInputMethodAndSubtypesCache;
}
