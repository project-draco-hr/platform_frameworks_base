{
  if (imi != null) {
    if (DEBUG) {
      Log.d(TAG,"Update icons of IME: " + imi.getPackageName());
      if (subtype != null) {
        Log.d(TAG,"subtype =" + subtype.getLocale() + ","+ subtype.getMode());
      }
    }
    if (subtype != null) {
      return mPackageManager.getDrawable(imi.getPackageName(),subtype.getIconResId(),imi.getServiceInfo().applicationInfo);
    }
 else     if (imi.getSubtypes().size() > 0) {
      return mPackageManager.getDrawable(imi.getPackageName(),imi.getSubtypes().get(0).getIconResId(),imi.getServiceInfo().applicationInfo);
    }
 else {
      try {
        return mPackageManager.getApplicationInfo(imi.getPackageName(),0).loadIcon(mPackageManager);
      }
 catch (      PackageManager.NameNotFoundException e) {
        Log.w(TAG,"IME can't be found: " + imi.getPackageName());
      }
    }
  }
  return null;
}
