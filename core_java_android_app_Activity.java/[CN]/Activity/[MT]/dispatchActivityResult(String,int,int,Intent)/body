{
  if (false)   Log.v(TAG,"Dispatching result: who=" + who + ", reqCode="+ requestCode+ ", resCode="+ resultCode+ ", data="+ data);
  mFragments.noteStateNotSaved();
  if (who == null) {
    onActivityResult(requestCode,resultCode,data);
  }
 else   if (who.startsWith(REQUEST_PERMISSIONS_WHO_PREFIX)) {
    who=who.substring(REQUEST_PERMISSIONS_WHO_PREFIX.length());
    if (TextUtils.isEmpty(who)) {
      dispatchRequestPermissionsResult(requestCode,data);
    }
 else {
      Fragment frag=mFragments.findFragmentByWho(who);
      if (frag != null) {
        dispatchRequestPermissionsResultToFragment(requestCode,data,frag);
      }
    }
  }
 else   if (who.startsWith("@android:view:")) {
    ArrayList<ViewRootImpl> views=WindowManagerGlobal.getInstance().getRootViews(getActivityToken());
    for (    ViewRootImpl viewRoot : views) {
      if (viewRoot.getView() != null && viewRoot.getView().dispatchActivityResult(who,requestCode,resultCode,data)) {
        return;
      }
    }
  }
 else {
    Fragment frag=mFragments.findFragmentByWho(who);
    if (frag != null) {
      frag.onActivityResult(requestCode,resultCode,data);
    }
  }
}
