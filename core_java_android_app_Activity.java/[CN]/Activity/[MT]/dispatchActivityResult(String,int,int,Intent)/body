{
  if (false)   Log.v(TAG,"Dispatching result: who=" + who + ", reqCode="+ requestCode+ ", resCode="+ resultCode+ ", data="+ data);
  mFragments.noteStateNotSaved();
  if (who == null) {
    if (isRequestPermissionResult(data)) {
      dispatchRequestPermissionsResult(requestCode,data);
    }
 else {
      onActivityResult(requestCode,resultCode,data);
    }
  }
 else {
    if (who.startsWith("@android:view:")) {
      ArrayList<ViewRootImpl> views=WindowManagerGlobal.getInstance().getRootViews(getActivityToken());
      for (      ViewRootImpl viewRoot : views) {
        if (viewRoot.getView() != null && viewRoot.getView().dispatchActivityResult(who,requestCode,resultCode,data)) {
          return;
        }
      }
    }
 else {
      Fragment frag=mFragments.findFragmentByWho(who);
      if (frag != null) {
        if (isRequestPermissionResult(data)) {
          dispatchRequestPermissionsResultToFragment(requestCode,data,frag);
        }
 else {
          frag.onActivityResult(requestCode,resultCode,data);
        }
      }
    }
  }
}
