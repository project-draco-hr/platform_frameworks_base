{
  if (drawable instanceof ColorDrawable) {
    return ((ColorDrawable)drawable).getColor();
  }
 else   if (drawable instanceof InsetDrawable) {
    return tryExtractColorFromDrawable(((InsetDrawable)drawable).getDrawable());
  }
 else   if (drawable instanceof ShapeDrawable) {
    Paint p=((ShapeDrawable)drawable).getPaint();
    if (p != null) {
      return p.getColor();
    }
  }
 else   if (drawable instanceof LayerDrawable) {
    LayerDrawable ld=(LayerDrawable)drawable;
    int numLayers=ld.getNumberOfLayers();
    for (int i=0; i < numLayers; i++) {
      int color=tryExtractColorFromDrawable(ld.getDrawable(i));
      if (color != 0) {
        return color;
      }
    }
  }
  return 0;
}
