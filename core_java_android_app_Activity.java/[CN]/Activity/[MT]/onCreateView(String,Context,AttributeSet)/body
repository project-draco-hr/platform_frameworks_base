{
  if (!"fragment".equals(name)) {
    return null;
  }
  TypedArray a=context.obtainStyledAttributes(attrs,com.android.internal.R.styleable.Fragment);
  String fname=a.getString(com.android.internal.R.styleable.Fragment_name);
  int id=a.getResourceId(com.android.internal.R.styleable.Fragment_id,0);
  String tag=a.getString(com.android.internal.R.styleable.Fragment_tag);
  a.recycle();
  if (id == 0) {
    throw new IllegalArgumentException(attrs.getPositionDescription() + ": Must specify unique android:id for " + fname);
  }
  try {
    Fragment fragment=mFragments.findFragmentById(id);
    if (FragmentManager.DEBUG)     Log.v(TAG,"onCreateView: id=0x" + Integer.toHexString(id) + " fname="+ fname+ " existing="+ fragment);
    if (fragment == null) {
      fragment=Fragment.instantiate(this,fname);
      fragment.mFromLayout=true;
      fragment.mFragmentId=id;
      fragment.mTag=tag;
      fragment.mImmediateActivity=this;
      mFragments.addFragment(fragment,true);
    }
    if (!fragment.mRetaining) {
      fragment.onInflate(this,attrs,fragment.mSavedFragmentState);
    }
    if (fragment.mView == null) {
      throw new IllegalStateException("Fragment " + fname + " did not create a view.");
    }
    fragment.mView.setId(id);
    if (fragment.mView.getTag() == null) {
      fragment.mView.setTag(tag);
    }
    return fragment.mView;
  }
 catch (  Exception e) {
    InflateException ie=new InflateException(attrs.getPositionDescription() + ": Error inflating fragment " + fname);
    ie.initCause(e);
    throw ie;
  }
}
