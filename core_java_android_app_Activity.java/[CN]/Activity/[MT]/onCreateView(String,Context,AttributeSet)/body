{
  if (!"fragment".equals(name)) {
    return null;
  }
  String fname=attrs.getAttributeValue(null,"class");
  TypedArray a=context.obtainStyledAttributes(attrs,com.android.internal.R.styleable.Fragment);
  if (fname == null) {
    fname=a.getString(com.android.internal.R.styleable.Fragment_name);
  }
  int id=a.getResourceId(com.android.internal.R.styleable.Fragment_id,0);
  String tag=a.getString(com.android.internal.R.styleable.Fragment_tag);
  a.recycle();
  if (id == 0) {
    throw new IllegalArgumentException(attrs.getPositionDescription() + ": Must specify unique android:id for " + fname);
  }
  Fragment fragment=mFragments.findFragmentById(id);
  if (FragmentManagerImpl.DEBUG)   Log.v(TAG,"onCreateView: id=0x" + Integer.toHexString(id) + " fname="+ fname+ " existing="+ fragment);
  if (fragment == null) {
    fragment=Fragment.instantiate(this,fname);
    fragment.mFromLayout=true;
    fragment.mFragmentId=id;
    fragment.mTag=tag;
    fragment.mImmediateActivity=this;
    if (!fragment.mRetaining) {
      fragment.onInflate(attrs,fragment.mSavedFragmentState);
    }
    mFragments.addFragment(fragment,true);
  }
  if (fragment.mView == null) {
    throw new IllegalStateException("Fragment " + fname + " did not create a view.");
  }
  fragment.mView.setId(id);
  if (fragment.mView.getTag() == null) {
    fragment.mView.setTag(tag);
  }
  return fragment.mView;
}
