{
  Intent upIntent=getParentActivityIntent();
  if (upIntent != null) {
    if (shouldUpRecreateTask(upIntent)) {
      TaskStackBuilder b=TaskStackBuilder.create(this);
      onCreateNavigateUpTaskStack(b);
      onPrepareNavigateUpTaskStack(b);
      b.startActivities();
      finishAffinity();
    }
 else {
      navigateUpTo(upIntent);
    }
    return true;
  }
  return false;
}
