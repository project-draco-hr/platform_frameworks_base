{
  if (options != null) {
    ActivityOptions activityOptions=new ActivityOptions(options);
    if (activityOptions.getAnimationType() == ActivityOptions.ANIM_SCENE_TRANSITION) {
      if (mActionBar != null) {
        ArrayMap<String,View> sharedElementMap=new ArrayMap<String,View>();
        mActionBar.captureSharedElements(sharedElementMap);
        activityOptions.addSharedElements(sharedElementMap);
      }
      options=mWindow.startExitTransitionToCallee(options);
    }
  }
  if (mParent == null) {
    Instrumentation.ActivityResult ar=mInstrumentation.execStartActivity(this,mMainThread.getApplicationThread(),mToken,this,intent,requestCode,options);
    if (ar != null) {
      mMainThread.sendActivityResult(mToken,mEmbeddedID,requestCode,ar.getResultCode(),ar.getResultData());
    }
    if (requestCode >= 0) {
      mStartedActivity=true;
    }
    final View decor=mWindow != null ? mWindow.peekDecorView() : null;
    if (decor != null) {
      decor.cancelPendingInputEvents();
    }
  }
 else {
    if (options != null) {
      mParent.startActivityFromChild(this,intent,requestCode,options);
    }
 else {
      mParent.startActivityFromChild(this,intent,requestCode);
    }
  }
}
