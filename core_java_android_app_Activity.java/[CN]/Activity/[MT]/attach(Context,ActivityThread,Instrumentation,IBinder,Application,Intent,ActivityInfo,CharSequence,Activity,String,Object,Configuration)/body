{
  attachBaseContext(context);
  mWindow=PolicyManager.makeNewWindow(this);
  mWindow.setCallback(this);
  mUiThread=Thread.currentThread();
  mMainThread=aThread;
  mInstrumentation=instr;
  mToken=token;
  mApplication=application;
  mIntent=intent;
  mComponent=intent.getComponent();
  mActivityInfo=info;
  mTitle=title;
  mParent=parent;
  mEmbeddedID=id;
  mLastNonConfigurationInstance=lastNonConfigurationInstance;
  mWindow.setWindowManager(null,mToken,mComponent.flattenToString());
  if (mParent != null) {
    mWindow.setContainer(mParent.getWindow());
  }
  mWindowManager=mWindow.getWindowManager();
  mCurrentConfig=config;
}
