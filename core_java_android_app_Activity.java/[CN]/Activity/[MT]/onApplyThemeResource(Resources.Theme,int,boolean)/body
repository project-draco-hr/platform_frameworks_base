{
  if (mParent == null) {
    super.onApplyThemeResource(theme,resid,first);
  }
 else {
    try {
      theme.setTo(mParent.getTheme());
    }
 catch (    Exception e) {
    }
    theme.applyStyle(resid,false);
  }
  if (theme != null) {
    TypedArray a=theme.obtainStyledAttributes(com.android.internal.R.styleable.Theme);
    int windowBgResourceId=a.getResourceId(com.android.internal.R.styleable.Window_windowBackground,0);
    int windowBgFallbackResourceId=a.getResourceId(com.android.internal.R.styleable.Window_windowBackgroundFallback,0);
    int colorPrimary=a.getColor(com.android.internal.R.styleable.Theme_colorPrimary,0);
    int colorBg=tryExtractColorFromDrawable(DecorView.getResizingBackgroundDrawable(this,windowBgResourceId,windowBgFallbackResourceId));
    a.recycle();
    if (colorPrimary != 0) {
      ActivityManager.TaskDescription td=new ActivityManager.TaskDescription();
      if (Color.alpha(colorPrimary) == 0xFF) {
        td.setPrimaryColor(colorPrimary);
      }
      if (Color.alpha(colorBg) == 0xFF) {
        td.setBackgroundColor(colorBg);
      }
      setTaskDescription(td);
    }
  }
}
