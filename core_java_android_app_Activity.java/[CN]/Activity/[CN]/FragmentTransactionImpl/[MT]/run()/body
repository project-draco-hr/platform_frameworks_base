{
  if (mRemoved != null) {
    for (int i=mRemoved.size() - 1; i >= 0; i--) {
      mFragments.removeFragment(mRemoved.get(i),mTransition,mTransitionStyle);
    }
  }
  if (mAdded != null) {
    for (int i=mAdded.size() - 1; i >= 0; i--) {
      Fragment f=mAdded.get(i);
      mFragments.addFragment(f,false);
      if (mAddToBackStack) {
        f.mBackStackNesting++;
      }
    }
  }
  mFragments.moveToState(mFragments.mCurState,mTransition,mTransitionStyle,true);
  if (mAddToBackStack) {
    mFragments.addBackStackState(this);
  }
}
