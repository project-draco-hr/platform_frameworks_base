{
  MockPerformanceResultsWriter writer=new MockPerformanceResultsWriter();
  mPerfCollector.setPerformanceResultsWriter(writer);
  mPerfCollector.startTiming("testOutOfOrderSequenceTiming");
  sleepForRandomShortPeriod();
  mPerfCollector.beginSnapshot("testOutOfOrderSequenceSnapshot");
  sleepForRandomShortPeriod();
  Bundle timing1=mPerfCollector.stopTiming("timing1");
  sleepForRandomShortPeriod();
  Bundle snapshot1=mPerfCollector.endSnapshot();
  Bundle timing2=writer.timingResults;
  Bundle snapshot2=writer.snapshotResults;
  assertTrue(snapshot1.equals(snapshot2));
  verifySnapshotBundle(snapshot1);
  assertTrue(timing1.equals(timing2));
  ArrayList<String> labels=new ArrayList<String>();
  labels.add("timing1");
  verifyTimingBundle(timing1,labels);
}
