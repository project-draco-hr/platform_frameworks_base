{
  final InputMethodListBuilder builder=new InputMethodListBuilder();
  builder.fillImes(imis,context,true,systemLocale,true,SUBTYPE_MODE_KEYBOARD);
  if (!builder.isEmpty()) {
    return builder;
  }
  builder.fillImes(imis,context,true,systemLocale,false,SUBTYPE_MODE_KEYBOARD);
  if (!builder.isEmpty()) {
    return builder;
  }
  builder.fillImes(imis,context,true,fallbackLocale,true,SUBTYPE_MODE_KEYBOARD);
  if (!builder.isEmpty()) {
    return builder;
  }
  builder.fillImes(imis,context,true,fallbackLocale,false,SUBTYPE_MODE_KEYBOARD);
  if (!builder.isEmpty()) {
    return builder;
  }
  builder.fillImes(imis,context,false,fallbackLocale,true,SUBTYPE_MODE_KEYBOARD);
  if (!builder.isEmpty()) {
    return builder;
  }
  builder.fillImes(imis,context,false,fallbackLocale,false,SUBTYPE_MODE_KEYBOARD);
  if (!builder.isEmpty()) {
    return builder;
  }
  Slog.w(TAG,"No software keyboard is found. imis=" + Arrays.toString(imis.toArray()) + " systemLocale="+ systemLocale+ " fallbackLocale="+ fallbackLocale);
  return builder;
}
