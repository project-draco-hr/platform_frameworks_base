{
  if (mCurrentDreamToken != null) {
    if (immediate) {
      Slog.i(TAG,"Leaving dreamland.");
      cleanupDreamLocked();
    }
 else     if (mCurrentDreamIsWaking) {
      return;
    }
 else {
      Slog.i(TAG,"Gently waking up from dream.");
      mCurrentDreamIsWaking=true;
    }
    mHandler.post(new Runnable(){
      @Override public void run(){
        mController.stopDream(immediate);
      }
    }
);
  }
}
