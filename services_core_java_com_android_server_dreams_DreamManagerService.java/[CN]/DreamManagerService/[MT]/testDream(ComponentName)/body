{
  checkPermission(android.Manifest.permission.WRITE_DREAM_STATE);
  if (dream == null) {
    throw new IllegalArgumentException("dream must not be null");
  }
  final int callingUserId=UserHandle.getCallingUserId();
  final int currentUserId=ActivityManager.getCurrentUser();
  if (callingUserId != currentUserId) {
    Slog.w(TAG,"Aborted attempt to start a test dream while a different " + " user is active: callingUserId=" + callingUserId + ", currentUserId="+ currentUserId);
    return;
  }
  final long ident=Binder.clearCallingIdentity();
  try {
synchronized (mLock) {
      startDreamLocked(dream,true,callingUserId);
    }
  }
  finally {
    Binder.restoreCallingIdentity(ident);
  }
}
