{
  String category=null;
  ArrayList<String> aids=new ArrayList<String>();
  AidGroup group=null;
  boolean inGroup=false;
  int eventType=parser.getEventType();
  int minDepth=parser.getDepth();
  while (eventType != XmlPullParser.END_DOCUMENT && parser.getDepth() >= minDepth) {
    String tagName=parser.getName();
    if (eventType == XmlPullParser.START_TAG) {
      if (tagName.equals("aid")) {
        if (inGroup) {
          String aid=parser.getAttributeValue(null,"value");
          if (aid != null) {
            aids.add(aid.toUpperCase());
          }
        }
 else {
          Log.d(TAG,"Ignoring <aid> tag while not in group");
        }
      }
 else       if (tagName.equals("aid-group")) {
        category=parser.getAttributeValue(null,"category");
        if (category == null) {
          Log.e(TAG,"<aid-group> tag without valid category");
          return null;
        }
        inGroup=true;
      }
 else {
        Log.d(TAG,"Ignoring unexpected tag: " + tagName);
      }
    }
 else     if (eventType == XmlPullParser.END_TAG) {
      if (tagName.equals("aid-group") && inGroup && aids.size() > 0) {
        group=new AidGroup(aids,category);
        break;
      }
    }
    eventType=parser.next();
  }
  return group;
}
