{
  final String filenamePrefix="test.";
  MockContentResolver mockContentResolver=new MockContentResolver();
  RenamingDelegatingContext targetContextWrapper=new RenamingDelegatingContext(new MockContext(),targetContext,filenamePrefix);
  Context context=new IsolatedContext(mockContentResolver,targetContextWrapper);
  DatabaseUtils.createDbFromSqlStatements(context,databaseName,databaseVersion,sql);
  T provider=providerClass.newInstance();
  provider.attachInfo(context,null);
  MockContentResolver resolver=new MockContentResolver();
  resolver.addProvider(authority,provider);
  return resolver;
}
