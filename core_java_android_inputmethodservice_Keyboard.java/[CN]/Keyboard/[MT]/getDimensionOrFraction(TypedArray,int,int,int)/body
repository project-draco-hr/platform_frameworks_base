{
  TypedValue value=a.peekValue(index);
  if (value == null)   return defValue;
  if (value.type == TypedValue.TYPE_DIMENSION) {
    return a.getDimensionPixelOffset(index,defValue);
  }
 else   if (value.type == TypedValue.TYPE_FRACTION) {
    return Math.round(a.getFraction(index,base,base,defValue));
  }
  return defValue;
}
