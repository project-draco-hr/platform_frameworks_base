{
  try {
    int level=getAndroidLevel(record.getLevel());
    String tag=record.getLoggerName();
    if (tag == null) {
      tag="null";
    }
 else {
      int length=tag.length();
      if (length > 23) {
        int lastPeriod=tag.lastIndexOf(".");
        if (length - lastPeriod - 1 <= 23) {
          tag=tag.substring(lastPeriod + 1);
        }
 else {
          tag=tag.substring(tag.length() - 23);
        }
      }
    }
    if (!Log.isLoggable(tag,level)) {
      return;
    }
    String message=getFormatter().format(record);
    Log.println(level,tag,message);
  }
 catch (  RuntimeException e) {
    Log.e("AndroidHandler","Error logging message.",e);
  }
}
