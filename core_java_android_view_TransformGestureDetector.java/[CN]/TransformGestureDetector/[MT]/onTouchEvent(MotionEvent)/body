{
  final int action=event.getAction();
  boolean handled=true;
  if (mInitialEvent == null) {
    if ((action == MotionEvent.ACTION_POINTER_1_DOWN || action == MotionEvent.ACTION_POINTER_2_DOWN) && event.getPointerCount() >= 2) {
      mInitialEvent=MotionEvent.obtain(event);
      mPrevEvent=MotionEvent.obtain(event);
      mVelocityTracker=VelocityTracker.obtain();
      handled=mListener.onTransformBegin(this);
    }
  }
 else {
switch (action) {
case MotionEvent.ACTION_POINTER_1_UP:
case MotionEvent.ACTION_POINTER_2_UP:
      handled=mListener.onTransformEnd(this);
    reset();
  break;
case MotionEvent.ACTION_CANCEL:
handled=mListener.onTransformEnd(this);
reset();
break;
case MotionEvent.ACTION_MOVE:
setContext(event);
if (mEventIgnoreCount == 0) {
mVelocityTracker.addMovement(event);
handled=mListener.onTransform(this);
}
 else {
mEventIgnoreCount--;
}
mPrevEvent.recycle();
mPrevEvent=MotionEvent.obtain(event);
break;
}
}
return handled;
}
