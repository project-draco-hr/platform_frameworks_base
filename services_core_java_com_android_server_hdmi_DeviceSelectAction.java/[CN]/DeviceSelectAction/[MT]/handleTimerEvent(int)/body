{
  if (mState != timeoutState) {
    Slog.w(TAG,"Timer in a wrong state. Ignored.");
    return;
  }
switch (mState) {
case STATE_WAIT_FOR_REPORT_POWER_STATUS:
    if (tv().isPowerStandbyOrTransient()) {
      invokeCallback(HdmiControlManager.RESULT_INCORRECT_MODE);
      finish();
      return;
    }
  sendSetStreamPath();
break;
case STATE_WAIT_FOR_DEVICE_TO_TRANSIT_TO_STANDBY:
case STATE_WAIT_FOR_DEVICE_POWER_ON:
mPowerStatusCounter++;
queryDevicePowerStatus();
break;
case STATE_WAIT_FOR_ACTIVE_SOURCE:
invokeCallback(HdmiControlManager.RESULT_TIMEOUT);
finish();
break;
}
}
