{
  Runnable runnable=endRunnable;
  for (  Integer viewType : mTransformedViews.keySet()) {
    TransformState ownState=getCurrentState(viewType);
    if (ownState != null) {
      CustomTransformation customTransformation=mCustomTransformations.get(viewType);
      if (customTransformation != null && customTransformation.transformTo(ownState,notification,runnable)) {
        ownState.recycle();
        runnable=null;
        continue;
      }
      TransformState otherState=notification.getCurrentState(viewType);
      if (otherState != null) {
        boolean run=ownState.transformViewTo(otherState,runnable);
        otherState.recycle();
        if (run) {
          runnable=null;
        }
      }
 else {
        CrossFadeHelper.fadeOut(mTransformedViews.get(viewType),runnable);
        runnable=null;
      }
      ownState.recycle();
    }
  }
  if (runnable != null) {
    mHandler.post(runnable);
  }
}
