{
  mRS=rs;
  mRes=res;
  createPF(width,height);
  mPFPoints.bindTexture(loadTexture(R.drawable.flares),0);
  mPoints=new ScriptField_Point(mRS,PART_COUNT,Allocation.USAGE_SCRIPT);
  Mesh.AllocationBuilder smb=new Mesh.AllocationBuilder(mRS);
  smb.addVertexAllocation(mPoints.getAllocation());
  smb.addIndexSetType(Mesh.Primitive.POINT);
  Mesh smP=smb.create();
  mGrid=ScriptField_BallGrid.create2D(mRS,(width + 99) / 100,(height + 99) / 100);
  mGridCache=Allocation.createSized(mRS,Element.F32_2(mRS),PART_COUNT);
  mBalls=new ScriptField_Ball(mRS,PART_COUNT,Allocation.USAGE_SCRIPT);
  mPhysicsScript=new ScriptC_ball_physics(mRS);
  mPhysicsScript.set_gGridCache(mGridCache);
  mPhysicsScript.set_gBalls(mBalls.getAllocation());
  mScript=new ScriptC_balls(mRS);
  mScript.set_partMesh(smP);
  mScript.set_physics_script(mPhysicsScript);
  mScript.bind_point(mPoints);
  mScript.bind_balls(mBalls);
  mScript.set_gGrid(mGrid.getAllocation());
  mScript.bind_gGridCache(mGridCache);
  mScript.set_gPFPoints(mPFPoints);
  createProgramVertex();
  mRS.bindProgramStore(BLEND_ADD_DEPTH_NONE(mRS));
  mPhysicsScript.set_gMinPos(new Float2(5,5));
  mPhysicsScript.set_gMaxPos(new Float2(width - 5,height - 5));
  mPhysicsScript.set_gGrid(mGrid.getAllocation());
  mScript.invoke_initParts(width,height);
  mRS.bindRootScript(mScript);
}
