{
  if (mSchedule == null)   return 0;
  final long nextStart=getNextTime(now,mSchedule.startHour,mSchedule.startMinute);
  final long nextEnd=getNextTime(now,mSchedule.endHour,mSchedule.endMinute);
  long nextScheduleTime=Math.min(nextStart,nextEnd);
  if (mSchedule.exitAtAlarm && mSchedule.nextAlarm > now) {
    return Math.min(nextScheduleTime,mSchedule.nextAlarm);
  }
 else {
    return nextScheduleTime;
  }
}
