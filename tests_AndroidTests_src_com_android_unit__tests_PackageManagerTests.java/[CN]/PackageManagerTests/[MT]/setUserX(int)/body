{
  int origSetting=getInstallLoc();
  int iloc=PackageInfo.INSTALL_LOCATION_AUTO;
  if (userSetting == PackageHelper.APP_INSTALL_AUTO) {
    iloc=PackageInfo.INSTALL_LOCATION_AUTO;
  }
 else   if (userSetting == PackageHelper.APP_INSTALL_EXTERNAL) {
    iloc=PackageInfo.INSTALL_LOCATION_PREFER_EXTERNAL;
  }
 else   if (userSetting == PackageHelper.APP_INSTALL_INTERNAL) {
    iloc=PackageInfo.INSTALL_LOCATION_INTERNAL_ONLY;
  }
  try {
    setInstallLoc(userSetting);
    installFromRawResource("install.apk",R.raw.install,0,true,false,-1,iloc);
  }
  finally {
    setInstallLoc(origSetting);
  }
}
