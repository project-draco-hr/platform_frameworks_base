{
  if ((flags & PackageManager.INSTALL_FORWARD_LOCK) != 0) {
    return false;
  }
 else   if ((flags & PackageManager.INSTALL_EXTERNAL) != 0) {
    return true;
  }
  if (expInstallLocation == PackageInfo.INSTALL_LOCATION_PREFER_EXTERNAL) {
    return true;
  }
  if (expInstallLocation == PackageInfo.INSTALL_LOCATION_INTERNAL_ONLY) {
    return false;
  }
  boolean checkSd=false;
  int setLoc=0;
  try {
    setLoc=Settings.System.getInt(mContext.getContentResolver(),Settings.System.SET_INSTALL_LOCATION);
  }
 catch (  SettingNotFoundException e) {
    failStr(e);
  }
  if (setLoc == 1) {
    int userPref=APP_INSTALL_AUTO;
    try {
      userPref=Settings.System.getInt(mContext.getContentResolver(),Settings.System.DEFAULT_INSTALL_LOCATION);
    }
 catch (    SettingNotFoundException e) {
      failStr(e);
    }
    if (userPref == APP_INSTALL_DEVICE) {
      checkSd=false;
    }
 else     if (userPref == APP_INSTALL_SDCARD) {
      checkSd=true;
    }
 else     if (userPref == APP_INSTALL_AUTO) {
      checkSd=false;
    }
  }
  return checkSd;
}
