{
  String outFileName="install.apk";
  File filesDir=mContext.getFilesDir();
  File outFile=new File(filesDir,outFileName);
  Uri packageURI=getInstallablePackage(R.raw.install,outFile);
  PackageParser.Package pkg=parsePackage(packageURI);
  assertNotNull(pkg);
  InstallReceiver receiver=new InstallReceiver(pkg.packageName);
  try {
    try {
      assertTrue(invokeInstallPackage(packageURI,flags,pkg.packageName,receiver));
    }
 catch (    Exception e) {
      failStr("Failed with exception : " + e);
    }
    assertInstall(pkg.packageName,flags);
    return new InstallParams(pkg,outFileName,packageURI);
  }
  finally {
    if (cleanUp) {
      getPm().deletePackage(pkg.packageName,null,0);
      if (outFile != null && outFile.exists()) {
        outFile.delete();
      }
    }
  }
}
