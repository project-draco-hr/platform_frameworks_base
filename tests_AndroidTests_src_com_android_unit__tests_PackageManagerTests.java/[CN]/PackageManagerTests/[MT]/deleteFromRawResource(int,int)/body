{
  InstallParams ip=installFromRawResource(iFlags,false);
  boolean retainData=((dFlags & PackageManager.DONT_DELETE_DATA) != 0);
  GenericReceiver receiver=new DeleteReceiver(ip.pkg.packageName);
  DeleteObserver observer=new DeleteObserver();
  try {
    assertTrue(invokeDeletePackage(ip.packageURI,dFlags,ip.pkg.packageName,receiver));
    ApplicationInfo info=null;
    Log.i(TAG,"okay4");
    try {
      info=getPm().getApplicationInfo(ip.pkg.packageName,PackageManager.GET_UNINSTALLED_PACKAGES);
    }
 catch (    NameNotFoundException e) {
      info=null;
    }
    if (retainData) {
      assertNotNull(info);
      assertEquals(info.packageName,ip.pkg.packageName);
      File file=new File(info.dataDir);
      assertTrue(file.exists());
    }
 else {
      assertNull(info);
    }
  }
 catch (  Exception e) {
    failStr(e);
  }
 finally {
    cleanUpInstall(ip);
  }
}
