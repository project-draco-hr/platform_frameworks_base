{
  MyThread t1=new MyThread("t1");
  t1.start();
  try {
    Thread.sleep(1000);
  }
 catch (  InterruptedException ex) {
  }
  StackTraceElement[] traces=t1.getStackTrace();
  StackTraceElement trace=traces[traces.length - 2];
  assertTrue("Must find MyThread.doSomething in trace",trace.getClassName().endsWith("$MyThread") && trace.getMethodName().equals("doSomething"));
  ThreadGroup g1=new ThreadGroup("1");
  MyOtherThread t2=new MyOtherThread(g1,"t2");
  t2.start();
  try {
    t2.join();
  }
 catch (  InterruptedException ex) {
  }
  assertTrue("Must have traces for all threads",t2.visibleTraces > 1);
}
