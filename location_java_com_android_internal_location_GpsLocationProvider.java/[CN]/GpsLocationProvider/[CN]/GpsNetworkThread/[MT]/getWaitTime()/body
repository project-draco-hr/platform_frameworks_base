{
  long now=System.currentTimeMillis();
  long waitTime=Long.MAX_VALUE;
  if (mNtpServer != null) {
    waitTime=mNextNtpTime - now;
  }
  if (mNextXtraTime != 0) {
    long xtraWaitTime=mNextXtraTime - now;
    if (xtraWaitTime < waitTime) {
      waitTime=xtraWaitTime;
    }
  }
  if (waitTime < 0) {
    waitTime=0;
  }
  return waitTime;
}
