{
  final Intent intent=new Intent(Intent.ACTION_SEND_MULTIPLE);
  final String mimeType="application/vnd.android.bugreport";
  intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
  intent.addCategory(Intent.CATEGORY_DEFAULT);
  intent.setType(mimeType);
  intent.putExtra(Intent.EXTRA_SUBJECT,bugreportUri.getLastPathSegment());
  String messageBody=String.format("Build info: %s\nSerial number:%s",SystemProperties.get("ro.build.description"),SystemProperties.get("ro.serialno"));
  intent.putExtra(Intent.EXTRA_TEXT,messageBody);
  final ClipData clipData=new ClipData(null,new String[]{mimeType},new ClipData.Item(null,null,null,bugreportUri));
  clipData.addItem(new ClipData.Item(null,null,null,screenshotUri));
  intent.setClipData(clipData);
  final ArrayList<Uri> attachments=Lists.newArrayList(bugreportUri,screenshotUri);
  intent.putParcelableArrayListExtra(Intent.EXTRA_STREAM,attachments);
  final Account sendToAccount=findSendToAccount(context);
  if (sendToAccount != null) {
    intent.putExtra(Intent.EXTRA_EMAIL,new String[]{sendToAccount.name});
  }
  return intent;
}
