{
  final File bugreportFile=getFileExtra(intent,EXTRA_BUGREPORT);
  final File screenshotFile=getFileExtra(intent,EXTRA_SCREENSHOT);
  final Uri bugreportUri=FileProvider.getUriForFile(context,AUTHORITY,bugreportFile);
  final Uri screenshotUri=FileProvider.getUriForFile(context,AUTHORITY,screenshotFile);
  boolean isPlainText=bugreportFile.getName().toLowerCase().endsWith(".txt");
  if (!isPlainText) {
    sendBugreportNotification(context,bugreportFile,screenshotFile);
  }
 else {
    sendZippedBugreportNotification(context,bugreportFile,screenshotFile);
  }
  final PendingResult result=goAsync();
  new AsyncTask<Void,Void,Void>(){
    @Override protected Void doInBackground(    Void... params){
      FileUtils.deleteOlderFiles(bugreportFile.getParentFile(),MIN_KEEP_COUNT,MIN_KEEP_AGE);
      result.finish();
      return null;
    }
  }
.execute();
}
