{
  byte[] bytes=read(bugreportFile);
  if (bytes == null) {
    return bugreportFile;
  }
  String bugreportPath=bugreportFile.getAbsolutePath();
  String zippedPath=bugreportPath.replace(".txt",".zip");
  Log.v(TAG,"zipping " + bugreportPath + " as "+ zippedPath);
  File bugreportZippedFile=new File(zippedPath);
  try (ZipOutputStream zos=new ZipOutputStream(new BufferedOutputStream(new FileOutputStream(bugreportZippedFile)))){
    ZipEntry entry=new ZipEntry("bugreport.txt");
    zos.putNextEntry(entry);
    zos.write(bytes);
    zos.closeEntry();
    boolean deleted=bugreportFile.delete();
    if (deleted) {
      Log.v(TAG,"deleted original bugreport (" + bugreportPath + ")");
    }
 else {
      Log.e(TAG,"could not delete original bugreport (" + bugreportPath + ")");
    }
    return bugreportZippedFile;
  }
 catch (  IOException e) {
    Log.e(TAG,"exception zipping file " + zippedPath,e);
    return bugreportFile;
  }
}
