{
  mResult=new StringBuilder();
  if (struct.name == null || struct.name.trim().equals("")) {
    throw new VCardException(" struct.name MUST have value.");
  }
  if (vcardversion == VERSION_VCARD21_INT) {
    mNewline="\r\n";
  }
 else   if (vcardversion == VERSION_VCARD30_INT) {
    mNewline="\n";
  }
 else {
    throw new VCardException(" version not match VERSION_VCARD21 or VERSION_VCARD30.");
  }
  mResult.append("BEGIN:VCARD").append(mNewline);
  if (vcardversion == VERSION_VCARD21_INT) {
    mResult.append("VERSION:2.1").append(mNewline);
  }
 else {
    mResult.append("VERSION:3.0").append(mNewline);
  }
  if (!isNull(struct.name)) {
    appendNameStr(struct.name);
  }
  if (!isNull(struct.company)) {
    mResult.append("ORG:").append(struct.company).append(mNewline);
  }
  if (struct.notes.size() > 0 && !isNull(struct.notes.get(0))) {
    mResult.append("NOTE:").append(foldingString(struct.notes.get(0),vcardversion)).append(mNewline);
  }
  if (!isNull(struct.title)) {
    mResult.append("TITLE:").append(foldingString(struct.title,vcardversion)).append(mNewline);
  }
  if (struct.photoBytes != null) {
    appendPhotoStr(struct.photoBytes,struct.photoType,vcardversion);
  }
  if (struct.phoneList != null) {
    appendPhoneStr(struct.phoneList,vcardversion);
  }
  if (struct.contactmethodList != null) {
    appendContactMethodStr(struct.contactmethodList,vcardversion);
  }
  if (!isNull(struct.timeStamp)) {
    mResult.append(struct.timeStamp).append(mNewline);
  }
  mResult.append("END:VCARD").append(mNewline);
  return mResult.toString();
}
