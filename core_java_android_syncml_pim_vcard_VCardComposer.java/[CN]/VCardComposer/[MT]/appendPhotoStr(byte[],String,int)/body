{
  String value, apptype, encodingStr;
  try {
    value=foldingString(new String(Base64.encodeBase64(bytes,true)),version);
  }
 catch (  Exception e) {
    throw new VCardException(e.getMessage());
  }
  if (isNull(type)) {
    type="image/jpeg";
  }
  if (type.indexOf("jpeg") > 0) {
    apptype="JPEG";
  }
 else   if (type.indexOf("gif") > 0) {
    apptype="GIF";
  }
 else   if (type.indexOf("bmp") > 0) {
    apptype="BMP";
  }
 else {
    apptype=type.substring(type.indexOf("/")).toUpperCase();
  }
  mResult.append("LOGO;TYPE=").append(apptype);
  if (version == VERSION_VCARD21_INT) {
    encodingStr=";ENCODING=BASE64:";
    value=value + mNewline;
  }
 else   if (version == VERSION_VCARD30_INT) {
    encodingStr=";ENCODING=b:";
  }
 else {
    return;
  }
  mResult.append(encodingStr).append(value).append(mNewline);
}
