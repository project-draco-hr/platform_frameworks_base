{
  if (mPowerState.getScreenState() != state) {
    final boolean wasOn=(mPowerState.getScreenState() != Display.STATE_OFF);
    mPowerState.setScreenState(state);
    try {
      mBatteryStats.noteScreenState(state);
    }
 catch (    RemoteException ex) {
    }
    boolean isOn=(state != Display.STATE_OFF);
    if (wasOn && !isOn) {
      unblockScreenOn();
      mWindowManagerPolicy.screenTurnedOff();
    }
 else     if (!wasOn && isOn) {
      if (mPowerState.getColorFadeLevel() == 0.0f) {
        blockScreenOn();
      }
 else {
        unblockScreenOn();
      }
      mWindowManagerPolicy.screenTurningOn(mPendingScreenOnUnblocker);
    }
  }
  return mPendingScreenOnUnblocker == null;
}
