{
  if (provider == null) {
    throw new IllegalArgumentException("provider should be != NULL");
  }
  boolean rt;
  if (category == null) {
    rt=findAndAdd(provider);
  }
 else {
    rt=addToNamed(provider,category);
  }
  if (provider instanceof RegisterableService) {
    ((RegisterableService)provider).onRegistration(registry,category);
  }
  return rt;
}
