{
  boolean reschedule=false;
  BroadcastRecord r=app.curReceiver;
  if (r != null && r.queue == this) {
    logBroadcastReceiverDiscardLocked(r);
    finishReceiverLocked(r,r.resultCode,r.resultData,r.resultExtras,r.resultAbort,false);
    reschedule=true;
  }
  if (r == null && mPendingBroadcast != null && mPendingBroadcast.curApp == app) {
    if (DEBUG_BROADCAST)     Slog.v(TAG_BROADCAST,"[" + mQueueName + "] skip & discard pending app "+ r);
    r=mPendingBroadcast;
  }
  if (r != null) {
    logBroadcastReceiverDiscardLocked(r);
    finishReceiverLocked(r,r.resultCode,r.resultData,r.resultExtras,r.resultAbort,false);
    scheduleBroadcastsLocked();
  }
}
