{
  if (pos + count > length) {
    throw new IndexOutOfBoundsException("Argument out of cache");
  }
  int blockIdx=(int)(pos >> BLOCK_SHIFT);
  int offset=(int)(pos & BLOCK_MASK);
  if (blockIdx < firstUndisposed) {
    throw new IndexOutOfBoundsException("The requested data are already disposed");
  }
  while (count > 0) {
    byte[] block=blocks.get(blockIdx);
    int toWrite=Math.min(BLOCK_SIZE - offset,count);
    os.write(block,offset,toWrite);
    blockIdx++;
    offset=0;
    count-=toWrite;
  }
}
