{
  final StubDocument parentDocument=mStorage.get(parentDocumentId);
  if (parentDocument == null || !parentDocument.file.isDirectory()) {
    throw new FileNotFoundException();
  }
  final File file=new File(parentDocument.file,displayName);
  if (mimeType.equals(Document.MIME_TYPE_DIR)) {
    if (!file.mkdirs()) {
      throw new FileNotFoundException();
    }
  }
 else {
    try {
      if (!file.createNewFile()) {
        throw new IllegalStateException("The file " + file.getPath() + " already exists");
      }
    }
 catch (    IOException e) {
      throw new FileNotFoundException();
    }
  }
  final StubDocument document=new StubDocument(file,mimeType,parentDocument);
  notifyParentChanged(document.parentId);
  getContext().getContentResolver().notifyChange(DocumentsContract.buildDocumentUri(mAuthority,document.documentId),null,false);
  return document.documentId;
}
