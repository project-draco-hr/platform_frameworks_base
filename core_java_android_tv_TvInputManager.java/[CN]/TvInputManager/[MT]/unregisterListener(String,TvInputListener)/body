{
  if (inputId == null) {
    throw new IllegalArgumentException("id cannot be null");
  }
  if (listener == null) {
    throw new IllegalArgumentException("listener cannot be null");
  }
synchronized (mTvInputListenerRecordsMap) {
    List<TvInputListenerRecord> records=mTvInputListenerRecordsMap.get(inputId);
    if (records == null) {
      Log.e(TAG,"No listener found for " + inputId);
      return;
    }
    for (Iterator<TvInputListenerRecord> it=records.iterator(); it.hasNext(); ) {
      TvInputListenerRecord record=it.next();
      if (record.getListener() == listener) {
        it.remove();
      }
    }
    if (records.isEmpty()) {
      try {
        mService.unregisterCallback(mClient,inputId,mUserId);
      }
 catch (      RemoteException e) {
        throw new RuntimeException(e);
      }
 finally {
        mTvInputListenerRecordsMap.remove(inputId);
      }
    }
  }
}
