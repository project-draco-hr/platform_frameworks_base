{
  mService=service;
  mUserId=userId;
  mClient=new ITvInputClient.Stub(){
    @Override public void onSessionCreated(    ComponentName name,    IBinder token,    InputChannel channel,    int seq){
synchronized (mSessionCreateCallbackRecordMap) {
        SessionCreateCallbackRecord record=mSessionCreateCallbackRecordMap.get(seq);
        mSessionCreateCallbackRecordMap.delete(seq);
        if (record == null) {
          Log.e(TAG,"Callback not found for " + token);
          return;
        }
        Session session=null;
        if (token != null) {
          session=new Session(token,channel,mService,mUserId);
        }
        record.postSessionCreated(session);
      }
    }
    @Override public void onAvailabilityChanged(    ComponentName name,    boolean isAvailable){
synchronized (mTvInputListenerRecordsMap) {
        List<TvInputListenerRecord> records=mTvInputListenerRecordsMap.get(name);
        if (records == null) {
          return;
        }
        int recordsCount=records.size();
        for (int i=0; i < recordsCount; i++) {
          records.get(i).postAvailabilityChanged(name,isAvailable);
        }
      }
    }
  }
;
}
