{
  if (intent.getAction().equals(Intent.ACTION_REMOTE_INTENT)) {
    if (!intent.getBooleanExtra("android.intent.extra.from_trusted_server",false)) {
      Log.w(TAG,"Ignoring master clear request -- not from trusted server.");
      return;
    }
  }
  Log.w(TAG,"!!! FACTORY RESETTING DEVICE !!!");
  ICheckinService service=ICheckinService.Stub.asInterface(ServiceManager.getService("checkin"));
  if (service != null) {
    try {
      service.masterClear();
    }
 catch (    RemoteException e) {
      Log.w("MasterClear","Unable to invoke ICheckinService.masterClear()");
    }
  }
}
