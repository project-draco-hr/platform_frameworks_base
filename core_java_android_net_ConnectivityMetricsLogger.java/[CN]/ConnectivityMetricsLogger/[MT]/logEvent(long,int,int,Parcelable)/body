{
  if (mService == null) {
    if (DBG) {
      Log.d(TAG,"logEvent(" + componentTag + ","+ eventTag+ ") Service not ready");
    }
    return;
  }
  if (mServiceUnblockedTimestampMillis > 0) {
    if (System.currentTimeMillis() < mServiceUnblockedTimestampMillis) {
      mNumSkippedEvents++;
      return;
    }
  }
  ConnectivityMetricsEvent skippedEventsEvent=null;
  if (mNumSkippedEvents > 0) {
    Bundle b=new Bundle();
    b.putInt(DATA_KEY_EVENTS_COUNT,mNumSkippedEvents);
    skippedEventsEvent=new ConnectivityMetricsEvent(mServiceUnblockedTimestampMillis,componentTag,TAG_SKIPPED_EVENTS,b);
    mServiceUnblockedTimestampMillis=0;
  }
  ConnectivityMetricsEvent event=new ConnectivityMetricsEvent(timestamp,componentTag,eventTag,data);
  try {
    long result;
    if (skippedEventsEvent == null) {
      result=mService.logEvent(event);
    }
 else {
      result=mService.logEvents(new ConnectivityMetricsEvent[]{skippedEventsEvent,event});
    }
    if (result == 0) {
      mNumSkippedEvents=0;
    }
 else {
      mNumSkippedEvents++;
      if (result > 0) {
        mServiceUnblockedTimestampMillis=result;
      }
    }
  }
 catch (  RemoteException e) {
    Log.e(TAG,"Error logging event " + e.getMessage());
  }
}
