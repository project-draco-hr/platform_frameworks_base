{
  Bitmap bitmap=null;
  MediaMetadataRetriever retriever=new MediaMetadataRetriever();
  try {
    retriever.setMode(MediaMetadataRetriever.MODE_CAPTURE_FRAME_ONLY);
    retriever.setDataSource(filePath);
    bitmap=retriever.getFrameAtTime(-1);
  }
 catch (  IllegalArgumentException ex) {
  }
catch (  RuntimeException ex) {
  }
 finally {
    try {
      retriever.release();
    }
 catch (    RuntimeException ex) {
    }
  }
  if (bitmap == null)   return null;
  if (kind == Images.Thumbnails.MINI_KIND) {
    int width=bitmap.getWidth();
    int height=bitmap.getHeight();
    int max=Math.max(width,height);
    if (max > 512) {
      float scale=512f / max;
      int w=Math.round(scale * width);
      int h=Math.round(scale * height);
      bitmap=Bitmap.createScaledBitmap(bitmap,w,h,true);
    }
  }
 else   if (kind == Images.Thumbnails.MICRO_KIND) {
    bitmap=extractThumbnail(bitmap,TARGET_SIZE_MICRO_THUMBNAIL,TARGET_SIZE_MICRO_THUMBNAIL,OPTIONS_RECYCLE_INPUT);
  }
  return bitmap;
}
