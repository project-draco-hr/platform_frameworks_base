{
  GridLayoutAnimationController.AnimationParameters animationParams=(GridLayoutAnimationController.AnimationParameters)params.layoutAnimationParameters;
  if (animationParams == null) {
    animationParams=new GridLayoutAnimationController.AnimationParameters();
    params.layoutAnimationParameters=animationParams;
  }
  animationParams.count=count;
  animationParams.index=index;
  animationParams.columnsCount=mNumColumns;
  animationParams.rowsCount=count / mNumColumns;
  if (!mStackFromBottom) {
    animationParams.column=index % mNumColumns;
    animationParams.row=index / mNumColumns;
  }
 else {
    final int invertedIndex=count - 1 - index;
    animationParams.column=mNumColumns - 1 - (invertedIndex % mNumColumns);
    animationParams.row=animationParams.rowsCount - 1 - invertedIndex / mNumColumns;
  }
}
