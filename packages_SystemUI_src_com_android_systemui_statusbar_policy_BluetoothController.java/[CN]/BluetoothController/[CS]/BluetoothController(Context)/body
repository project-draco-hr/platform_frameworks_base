{
  IntentFilter filter=new IntentFilter();
  filter.addAction(BluetoothAdapter.ACTION_STATE_CHANGED);
  filter.addAction(BluetoothAdapter.ACTION_CONNECTION_STATE_CHANGED);
  filter.addAction(BluetoothDevice.ACTION_BOND_STATE_CHANGED);
  context.registerReceiver(this,filter);
  final BluetoothAdapter adapter=BluetoothAdapter.getDefaultAdapter();
  if (adapter != null) {
    handleAdapterStateChange(adapter.getState());
  }
  fireCallbacks();
  updateBondedBluetoothDevices();
}
