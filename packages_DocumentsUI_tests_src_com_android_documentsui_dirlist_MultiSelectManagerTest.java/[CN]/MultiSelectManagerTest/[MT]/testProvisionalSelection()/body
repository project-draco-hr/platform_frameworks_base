{
  Selection s=mManager.getSelection();
  assertSelection();
  SparseBooleanArray provisional=new SparseBooleanArray();
  provisional.append(1,true);
  provisional.append(2,true);
  s.setProvisionalSelection(getItemIds(provisional));
  assertSelection(items.get(1),items.get(2));
  provisional.delete(1);
  provisional.append(3,true);
  s.setProvisionalSelection(getItemIds(provisional));
  assertSelection(items.get(2),items.get(3));
  s.applyProvisionalSelection();
  assertSelection(items.get(2),items.get(3));
  provisional.clear();
  provisional.append(3,true);
  provisional.append(4,true);
  s.setProvisionalSelection(getItemIds(provisional));
  assertSelection(items.get(2),items.get(3),items.get(4));
  provisional.delete(3);
  s.setProvisionalSelection(getItemIds(provisional));
  assertSelection(items.get(2),items.get(3),items.get(4));
}
