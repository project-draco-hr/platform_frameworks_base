{
  final Intent home=new Intent(Intent.ACTION_MAIN);
  home.addCategory(Intent.CATEGORY_HOME);
  home.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
  final Intent launchable=new Intent(Intent.ACTION_MAIN);
  launchable.addCategory(Intent.CATEGORY_LAUNCHER);
  final List<ResolveInfo> activities=mPackageManager.queryIntentActivities(launchable,0);
  final Set<ProcessError> errSet=new HashSet<ProcessError>();
  for (  ResolveInfo info : activities) {
    Log.i(TAG,String.format("Got %s/%s",info.activityInfo.packageName,info.activityInfo.name));
    final ComponentName component=new ComponentName(info.activityInfo.packageName,info.activityInfo.name);
    final Intent intent=new Intent(Intent.ACTION_MAIN);
    intent.setComponent(component);
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    getContext().startActivity(intent);
    try {
      Thread.sleep(7000);
    }
 catch (    InterruptedException e) {
    }
    Collection<ProcessErrorStateInfo> procs=mActivityManager.getProcessesInErrorState();
    if (procs != null) {
      errSet.addAll(ProcessError.fromCollection(procs));
    }
    getContext().startActivity(home);
    try {
      Thread.sleep(2000);
    }
 catch (    InterruptedException e) {
    }
  }
  if (!errSet.isEmpty()) {
    fail(String.format("Got %d errors: %s",errSet.size(),reportWrappedListContents(errSet)));
  }
}
