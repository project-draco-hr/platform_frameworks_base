{
  globalInvalidateRect.set(r);
  globalInvalidateRect.union(0,0,getWidth(),getHeight());
  View p=v;
  if (!(v.getParent() != null && v.getParent() instanceof View))   return;
  boolean firstPass=true;
  parentRect.set(0,0,0,0);
  while (p.getParent() != null && p.getParent() instanceof View && !parentRect.contains(globalInvalidateRect)) {
    if (!firstPass) {
      globalInvalidateRect.offset(p.getLeft() - p.getScrollX(),p.getTop() - p.getScrollY());
    }
    firstPass=false;
    p=(View)p.getParent();
    parentRect.set(p.getScrollX(),p.getScrollY(),p.getWidth() + p.getScrollX(),p.getHeight() + p.getScrollY());
    p.invalidate(globalInvalidateRect.left,globalInvalidateRect.top,globalInvalidateRect.right,globalInvalidateRect.bottom);
  }
  p.invalidate(globalInvalidateRect.left,globalInvalidateRect.top,globalInvalidateRect.right,globalInvalidateRect.bottom);
}
