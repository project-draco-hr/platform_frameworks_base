{
  if (mView != null) {
    final LayoutParams viewLp=(LayoutParams)mView.getLayoutParams();
    float d=(float)Math.sqrt(Math.pow(viewLp.horizontalOffset,2) + Math.pow(viewLp.verticalOffset,2));
    float maxd=(float)Math.sqrt(Math.pow(mViewHeight,2) + Math.pow(0.4f * mViewHeight,2));
    if (velocity == 0) {
      return (invert ? (1 - d / maxd) : d / maxd) * DEFAULT_ANIMATION_DURATION;
    }
 else {
      float duration=invert ? d / Math.abs(velocity) : (maxd - d) / Math.abs(velocity);
      if (duration < MINIMUM_ANIMATION_DURATION || duration > DEFAULT_ANIMATION_DURATION) {
        return getDuration(invert,0);
      }
 else {
        return duration;
      }
    }
  }
  return 0;
}
