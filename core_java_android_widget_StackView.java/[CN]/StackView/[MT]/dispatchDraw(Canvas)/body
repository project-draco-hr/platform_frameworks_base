{
  canvas.getClipBounds(invalidateRect);
  final int childCount=getChildCount();
  for (int i=0; i < childCount; i++) {
    LayoutParams lp=(LayoutParams)getChildAt(i).getLayoutParams();
    invalidateRect.union(lp.getInvalidateRect());
    lp.resetInvalidateRect();
  }
  canvas.save(Canvas.CLIP_SAVE_FLAG);
  canvas.clipRect(invalidateRect,Region.Op.UNION);
  super.dispatchDraw(canvas);
  canvas.restore();
}
