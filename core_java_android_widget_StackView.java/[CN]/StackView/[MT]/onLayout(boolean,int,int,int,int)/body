{
  boolean dataChanged=mDataChanged;
  if (dataChanged) {
    handleDataChanged();
    if (mWhichChild >= mAdapter.getCount())     mWhichChild=0;
    showOnly(mWhichChild,true,true);
  }
  final int childCount=getChildCount();
  for (int i=0; i < childCount; i++) {
    final View child=getChildAt(i);
    int childRight=mPaddingLeft + child.getMeasuredWidth();
    int childBottom=mPaddingTop + child.getMeasuredHeight();
    LayoutParams lp=(LayoutParams)child.getLayoutParams();
    child.layout(mPaddingLeft + lp.horizontalOffset,mPaddingTop + lp.verticalOffset,childRight + lp.horizontalOffset,childBottom + lp.verticalOffset);
    child.setPivotX(child.getMeasuredWidth() / 2);
    child.setPivotY(child.getMeasuredHeight() / 2);
  }
  mDataChanged=false;
  onLayout();
}
