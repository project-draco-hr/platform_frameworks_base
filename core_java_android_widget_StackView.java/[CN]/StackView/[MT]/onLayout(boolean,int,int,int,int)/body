{
  super.onLayout(changed,left,top,right,bottom);
  if (!mChildrenToApplyTransformsTo.isEmpty()) {
    for (    View child : mChildrenToApplyTransformsTo.keySet()) {
      if (mRotations.containsKey(child)) {
        child.setPivotX(child.getMeasuredWidth() / 2);
        child.setPivotY(child.getMeasuredHeight() / 2);
        child.setRotation(mRotations.get(child));
      }
    }
    mChildrenToApplyTransformsTo.clear();
  }
  if (!mFirstLayoutHappened) {
    mViewHeight=Math.round(SLIDE_UP_RATIO * getMeasuredHeight());
    mSwipeThreshold=Math.round(SWIPE_THRESHOLD_RATIO * mViewHeight);
    setClipChildren(false);
    setClipToPadding(false);
    ViewGroup view=this;
    while (view.getParent() != null && view.getParent() instanceof ViewGroup) {
      view=(ViewGroup)view.getParent();
      view.setClipChildren(false);
      view.setClipToPadding(false);
    }
    mFirstLayoutHappened=true;
  }
}
