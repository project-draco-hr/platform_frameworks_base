{
  int pointerIndex=ev.findPointerIndex(mActivePointerId);
  float newY=ev.getY(pointerIndex);
  int deltaY=(int)(newY - mInitialY);
  mVelocityTracker.computeCurrentVelocity(1000,mMaximumVelocity);
  mYVelocity=(int)mVelocityTracker.getYVelocity(mActivePointerId);
  if (mVelocityTracker != null) {
    mVelocityTracker.recycle();
    mVelocityTracker=null;
  }
  if (deltaY > mSwipeThreshold && mSwipeGestureType == GESTURE_SLIDE_DOWN) {
    showNext();
    mHighlight.bringToFront();
  }
 else   if (deltaY < -mSwipeThreshold && mSwipeGestureType == GESTURE_SLIDE_UP) {
    showPrevious();
    mHighlight.bringToFront();
  }
 else   if (mSwipeGestureType == GESTURE_SLIDE_UP) {
    int duration=Math.round(mStackSlider.getYProgress() * DEFAULT_ANIMATION_DURATION);
    PropertyAnimator snapBackY=new PropertyAnimator(duration,mStackSlider,"YProgress",mStackSlider.getYProgress(),0);
    snapBackY.start();
    PropertyAnimator snapBackX=new PropertyAnimator(duration,mStackSlider,"XProgress",mStackSlider.getXProgress(),0);
    snapBackX.start();
  }
 else   if (mSwipeGestureType == GESTURE_SLIDE_DOWN) {
    int duration=Math.round((1 - mStackSlider.getYProgress()) * DEFAULT_ANIMATION_DURATION);
    PropertyAnimator snapBackY=new PropertyAnimator(duration,mStackSlider,"YProgress",mStackSlider.getYProgress(),1);
    snapBackY.start();
    PropertyAnimator snapBackX=new PropertyAnimator(duration,mStackSlider,"XProgress",mStackSlider.getXProgress(),0);
    snapBackX.start();
  }
  mActivePointerId=INVALID_POINTER;
  mSwipeGestureType=GESTURE_NONE;
}
