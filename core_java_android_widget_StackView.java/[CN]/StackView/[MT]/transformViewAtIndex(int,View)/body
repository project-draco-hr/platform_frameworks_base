{
  float maxPerspectiveShiftY=getMeasuredHeight() * PERSPECTIVE_SHIFT_FACTOR_Y;
  float maxPerspectiveShiftX=getMeasuredWidth() * PERSPECTIVE_SHIFT_FACTOR_X;
  index=mMaxNumActiveViews - index - 1;
  if (index == mMaxNumActiveViews - 1)   index--;
  float r=(index * 1.0f) / (mMaxNumActiveViews - 2);
  float scale=1 - PERSPECTIVE_SCALE_FACTOR * (1 - r);
  PropertyValuesHolder scalePropX=PropertyValuesHolder.ofFloat("scaleX",scale);
  PropertyValuesHolder scalePropY=PropertyValuesHolder.ofFloat("scaleY",scale);
  int stackDirection=(mStackMode == ITEMS_SLIDE_UP) ? 1 : -1;
  float perspectiveTranslationY=-stackDirection * r * maxPerspectiveShiftY;
  float scaleShiftCorrectionY=stackDirection * (1 - scale) * (getMeasuredHeight() * (1 - PERSPECTIVE_SHIFT_FACTOR_Y) / 2.0f);
  float transY=perspectiveTranslationY + scaleShiftCorrectionY;
  float perspectiveTranslationX=(1 - r) * maxPerspectiveShiftX;
  float scaleShiftCorrectionX=(1 - scale) * (getMeasuredWidth() * (1 - PERSPECTIVE_SHIFT_FACTOR_X) / 2.0f);
  float transX=perspectiveTranslationX + scaleShiftCorrectionX;
  PropertyValuesHolder translationX=PropertyValuesHolder.ofFloat("translationX",transX);
  PropertyValuesHolder translationY=PropertyValuesHolder.ofFloat("translationY",transY);
  ObjectAnimator pa=ObjectAnimator.ofPropertyValuesHolder(view,scalePropX,scalePropY,translationY,translationX);
  pa.setDuration(100);
  pa.start();
}
