{
  if (which == AlertDialog.BUTTON_POSITIVE) {
    try {
      IBinder b=ServiceManager.getService(USB_SERVICE);
      IUsbManager service=IUsbManager.Stub.asInterface(b);
      int uid=mResolveInfo.activityInfo.applicationInfo.uid;
      boolean alwaysUse=mAlwaysUse.isChecked();
      Intent intent=new Intent(UsbManager.ACTION_USB_ACCESSORY_ATTACHED);
      intent.putExtra(UsbManager.EXTRA_ACCESSORY,mAccessory);
      intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
      intent.setComponent(new ComponentName(mResolveInfo.activityInfo.packageName,mResolveInfo.activityInfo.name));
      service.grantAccessoryPermission(mAccessory,uid);
      if (alwaysUse) {
        service.setAccessoryPackage(mAccessory,mResolveInfo.activityInfo.packageName);
      }
 else {
        service.setAccessoryPackage(mAccessory,null);
      }
      startActivity(intent);
    }
 catch (    Exception e) {
      Log.e(TAG,"Unable to start activity",e);
    }
  }
  finish();
}
