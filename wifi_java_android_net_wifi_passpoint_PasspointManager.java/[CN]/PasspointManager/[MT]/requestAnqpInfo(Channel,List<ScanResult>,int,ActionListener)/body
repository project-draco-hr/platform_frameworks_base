{
  Log.d(TAG,"requestAnqpInfo start");
  Log.d(TAG,"requested.size=" + requested.size());
  checkChannel(c);
  List<ScanResult> list=new ArrayList<ScanResult>();
  for (  ScanResult sr : requested)   if (sr.capabilities.contains("[HS20]")) {
    list.add(sr);
    c.anqpRequestStart(sr);
    Log.d(TAG,"adding " + sr.BSSID);
  }
  int count=list.size();
  Log.d(TAG,"after filter, count=" + count);
  if (count == 0) {
    if (DBG)     Log.d(TAG,"ANQP info request contains no HS20 APs, skipped");
    listener.onSuccess();
    return;
  }
  int key=c.putListener(listener,count);
  for (  ScanResult sr : list)   c.mAsyncChannel.sendMessage(REQUEST_ANQP_INFO,mask,key,sr);
  Log.d(TAG,"requestAnqpInfo end");
}
