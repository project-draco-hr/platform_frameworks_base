{
synchronized (mLock) {
    if (lightValue != mPendingLightValue) {
      mPendingLightValue=lightValue;
      if (DEBUG) {
        Slog.d(TAG,"Enqueuing request to change brightness to " + lightValue);
      }
      if (!mPendingChange) {
        mPendingChange=true;
        mSuspendBlocker.acquire();
        mExecutor.execute(mTask);
      }
    }
    if (sync) {
      while (mPendingChange) {
        try {
          mLock.wait();
        }
 catch (        InterruptedException ex) {
        }
      }
    }
  }
}
