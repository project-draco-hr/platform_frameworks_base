{
  if (DEBUG) {
    Slog.d(TAG,mLogPrefix + "Got usage event for " + event.mPackage+ "["+ event.getTimeStamp()+ "]: "+ eventToString(event.getEventType()));
  }
  if (event.getTimeStamp() >= mDailyExpiryDate.getTimeInMillis()) {
    rolloverStats();
  }
  if (mCurrentStats[UsageStatsManager.INTERVAL_DAILY].events == null) {
    mCurrentStats[UsageStatsManager.INTERVAL_DAILY].events=new TimeSparseArray<>();
  }
  mCurrentStats[UsageStatsManager.INTERVAL_DAILY].events.put(event.getTimeStamp(),event);
  for (  IntervalStats stats : mCurrentStats) {
    stats.update(event.mPackage,event.getTimeStamp(),event.getEventType());
  }
  notifyStatsChanged();
}
