{
  AsyncResult ar;
  try {
switch (msg.what) {
case EVENT_READ_EF_IMG_RECOED_DONE:
      ar=(AsyncResult)msg.obj;
    if (handleImageDescriptor((byte[])ar.result)) {
      readIconData();
    }
 else {
      throw new Exception("Unable to parse image descriptor");
    }
  break;
case EVENT_READ_ICON_DONE:
ar=(AsyncResult)msg.obj;
byte[] rawData=((byte[])ar.result);
if (mId.codingScheme == ImageDescriptor.CODING_SCHEME_BASIC) {
mCurrentIcon=parseToBnW(rawData,rawData.length);
mIconsCache.put(mRecordNumber,mCurrentIcon);
postIcon();
}
 else if (mId.codingScheme == ImageDescriptor.CODING_SCHEME_COLOUR) {
mIconData=rawData;
readClut();
}
break;
case EVENT_READ_CLUT_DONE:
ar=(AsyncResult)msg.obj;
byte[] clut=((byte[])ar.result);
mCurrentIcon=parseToRGB(mIconData,mIconData.length,false,clut);
mIconsCache.put(mRecordNumber,mCurrentIcon);
postIcon();
break;
}
}
 catch (Exception e) {
Log.d(TAG,"Icon load failed");
postIcon();
}
}
