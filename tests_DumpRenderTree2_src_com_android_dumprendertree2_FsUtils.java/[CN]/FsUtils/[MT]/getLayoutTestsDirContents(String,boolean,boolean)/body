{
  String modeString=(mode ? "folders" : "files");
  List<String> results=new LinkedList<String>();
  URL url=null;
  try {
    url=new URL(SCRIPT_URL + "?path=" + dirRelativePath+ "&recurse="+ recurse+ "&mode="+ modeString);
  }
 catch (  MalformedURLException e) {
    Log.e(LOG_TAG,"path=" + dirRelativePath + " recurse="+ recurse+ " mode="+ modeString,e);
    return results;
  }
  try {
    InputStream inputStream=null;
    BufferedReader bufferedReader=null;
    try {
      URLConnection urlConnection=url.openConnection();
      inputStream=urlConnection.getInputStream();
      bufferedReader=new BufferedReader(new InputStreamReader(inputStream));
      String relativePath;
      while ((relativePath=bufferedReader.readLine()) != null) {
        results.add(relativePath);
      }
    }
  finally {
      if (inputStream != null) {
        inputStream.close();
      }
      if (bufferedReader != null) {
        bufferedReader.close();
      }
    }
  }
 catch (  IOException e) {
    Log.e(LOG_TAG,"path=" + dirRelativePath + " recurse="+ recurse+ " mode="+ modeString,e);
  }
  return results;
}
