{
  StringBuilder builder=null;
  do {
    int start=pos;
    while (pos < limit) {
      int c=buffer[pos++];
      if (c == quote) {
        if (skipping) {
          return "skipped!";
        }
 else         if (builder == null) {
          return stringPool.get(buffer,start,pos - start - 1);
        }
 else {
          builder.append(buffer,start,pos - start - 1);
          return builder.toString();
        }
      }
 else       if (c == '\\') {
        if (builder == null) {
          builder=new StringBuilder();
        }
        builder.append(buffer,start,pos - start - 1);
        builder.append(readEscapeCharacter());
        start=pos;
      }
    }
    if (builder == null) {
      builder=new StringBuilder();
    }
    builder.append(buffer,start,pos - start);
  }
 while (fillBuffer(1));
  throw syntaxError("Unterminated string");
}
