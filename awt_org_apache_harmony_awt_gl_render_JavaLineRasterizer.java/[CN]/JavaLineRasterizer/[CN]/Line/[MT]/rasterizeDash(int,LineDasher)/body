{
  float delta=dasher.dash[dasher.index] - dasher.phase;
  int step=(int)delta;
  delta-=step;
  while (count > step) {
    if (dasher.visible) {
      rasterize(step);
    }
 else {
      skip(step);
    }
    count-=step;
    delta+=dasher.nextDash();
    step=(int)delta;
    delta-=step;
  }
  if (count > 0 && dasher.visible) {
    rasterize(count);
    dasher.move(count);
  }
}
