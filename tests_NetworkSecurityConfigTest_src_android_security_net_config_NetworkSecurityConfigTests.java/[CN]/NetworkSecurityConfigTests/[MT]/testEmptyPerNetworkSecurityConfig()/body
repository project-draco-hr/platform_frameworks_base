{
  ArraySet<Pair<Domain,NetworkSecurityConfig>> domainMap=new ArraySet<Pair<Domain,NetworkSecurityConfig>>();
  domainMap.add(new Pair<Domain,NetworkSecurityConfig>(new Domain("android.com",true),getEmptyConfig()));
  ArrayList<CertificatesEntryRef> defaultSource=new ArrayList<CertificatesEntryRef>();
  defaultSource.add(new CertificatesEntryRef(new SystemCertificateSource(),false));
  NetworkSecurityConfig defaultConfig=new NetworkSecurityConfig(true,false,new PinSet(new ArraySet<Pin>(),-1),defaultSource);
  SSLContext context=getSSLContext(new TestConfigSource(domainMap,defaultConfig));
  assertConnectionFails(context,"android.com",443);
  assertConnectionSucceeds(context,"google.com",443);
}
