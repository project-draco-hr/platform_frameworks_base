{
  new AsyncTask<Void,Void,BatteryStats>(){
    @Override protected BatteryStats doInBackground(    Void... params){
      BatteryStatsHelper statsHelper=new BatteryStatsHelper(context,true);
      statsHelper.create((Bundle)null);
      return statsHelper.getStats();
    }
    @Override protected void onPostExecute(    BatteryStats batteryStats){
      final long elapsedRealtimeUs=SystemClock.elapsedRealtime() * 1000;
      Intent batteryBroadcast=context.registerReceiver(null,new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
      BatteryInfo batteryInfo=BatteryInfo.getBatteryInfo(context,batteryBroadcast,batteryStats,elapsedRealtimeUs);
      callback.onBatteryInfoLoaded(batteryInfo);
    }
  }
.execute();
}
