{
  final boolean qwerty=isQwertyMode();
  final int metaState=event.getMetaState();
  final KeyCharacterMap.KeyData possibleChars=new KeyCharacterMap.KeyData();
  final boolean isKeyCodeMapped=event.getKeyData(possibleChars);
  if (!isKeyCodeMapped && (keyCode != KeyEvent.KEYCODE_DEL)) {
    return null;
  }
  Vector<MenuItemImpl> items=new Vector();
  final int N=mItems.size();
  for (int i=0; i < N; i++) {
    MenuItemImpl item=mItems.get(i);
    if (item.hasSubMenu()) {
      List<MenuItemImpl> subMenuItems=((MenuBuilder)item.getSubMenu()).findItemsWithShortcutForKey(keyCode,event);
      items.addAll(subMenuItems);
    }
    final char shortcutChar=qwerty ? item.getAlphabeticShortcut() : item.getNumericShortcut();
    if (((metaState & (KeyEvent.META_SHIFT_ON | KeyEvent.META_SYM_ON)) == 0) && (shortcutChar != 0) && (shortcutChar == possibleChars.meta[0] || shortcutChar == possibleChars.meta[2] || (qwerty && shortcutChar == '\b' && keyCode == KeyEvent.KEYCODE_DEL))&& item.isEnabled()) {
      items.add(item);
    }
  }
  return items;
}
