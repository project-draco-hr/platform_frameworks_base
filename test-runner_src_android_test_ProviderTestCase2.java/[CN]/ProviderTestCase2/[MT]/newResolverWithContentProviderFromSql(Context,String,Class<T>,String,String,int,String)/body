{
  MockContentResolver resolver=new MockContentResolver();
  RenamingDelegatingContext targetContextWrapper=new RenamingDelegatingContext(new MockContext(),targetContext,filenamePrefix);
  Context context=new IsolatedContext(resolver,targetContextWrapper);
  DatabaseUtils.createDbFromSqlStatements(context,databaseName,databaseVersion,sql);
  T provider=providerClass.newInstance();
  provider.attachInfo(context,null);
  resolver.addProvider(authority,provider);
  return resolver;
}
