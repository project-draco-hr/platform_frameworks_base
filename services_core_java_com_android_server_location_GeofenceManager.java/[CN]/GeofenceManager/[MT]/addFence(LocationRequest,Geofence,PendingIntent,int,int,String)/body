{
  if (D) {
    Slog.d(TAG,"addFence: request=" + request + ", geofence="+ geofence+ ", intent="+ intent+ ", uid="+ uid+ ", packageName="+ packageName);
  }
  GeofenceState state=new GeofenceState(geofence,request.getExpireAt(),allowedResolutionLevel,uid,packageName,intent);
synchronized (mLock) {
    for (int i=mFences.size() - 1; i >= 0; i--) {
      GeofenceState w=mFences.get(i);
      if (geofence.equals(w.mFence) && intent.equals(w.mIntent)) {
        mFences.remove(i);
        break;
      }
    }
    mFences.add(state);
    scheduleUpdateFencesLocked();
  }
}
