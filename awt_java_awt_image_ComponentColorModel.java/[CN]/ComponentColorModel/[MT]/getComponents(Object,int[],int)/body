{
  if (donotSupportUnnormalized) {
    throw new IllegalArgumentException(Messages.getString("awt.213"));
  }
  if (components == null) {
    components=new int[offset + numComponents];
  }
 else   if (offset + numComponents > components.length) {
    throw new IllegalArgumentException(Messages.getString("awt.218"));
  }
switch (transferType) {
case DataBuffer.TYPE_BYTE:
    byte ba[]=(byte[])pixel;
  for (int i=0, idx=offset; i < numComponents; i++, idx++) {
    components[idx]=ba[i] & 0xff;
  }
return components;
case DataBuffer.TYPE_USHORT:
short sa[]=(short[])pixel;
for (int i=0, idx=offset; i < numComponents; i++, idx++) {
components[idx]=sa[i] & 0xffff;
}
return components;
case DataBuffer.TYPE_INT:
int ia[]=(int[])pixel;
for (int i=0, idx=offset; i < numComponents; i++, idx++) {
components[idx]=ia[i];
}
return components;
default :
throw new UnsupportedOperationException(Messages.getString("awt.217"));
}
}
