{
  int screenLayoutSize;
  boolean screenLayoutLong;
  boolean screenLayoutCompatNeeded;
  if (longSizeDp < 470) {
    screenLayoutSize=SCREENLAYOUT_SIZE_SMALL;
    screenLayoutLong=false;
    screenLayoutCompatNeeded=false;
  }
 else {
    if (longSizeDp >= 960 && shortSizeDp >= 720) {
      screenLayoutSize=SCREENLAYOUT_SIZE_XLARGE;
    }
 else     if (longSizeDp >= 640 && shortSizeDp >= 480) {
      screenLayoutSize=SCREENLAYOUT_SIZE_LARGE;
    }
 else {
      screenLayoutSize=SCREENLAYOUT_SIZE_NORMAL;
    }
    if (shortSizeDp > 321 || longSizeDp > 570) {
      screenLayoutCompatNeeded=true;
    }
 else {
      screenLayoutCompatNeeded=false;
    }
    if (((longSizeDp * 3) / 5) >= (shortSizeDp - 1)) {
      screenLayoutLong=true;
    }
 else {
      screenLayoutLong=false;
    }
  }
  if (!screenLayoutLong) {
    curLayout=(curLayout & ~SCREENLAYOUT_LONG_MASK) | SCREENLAYOUT_LONG_NO;
  }
  if (screenLayoutCompatNeeded) {
    curLayout|=Configuration.SCREENLAYOUT_COMPAT_NEEDED;
  }
  int curSize=curLayout & SCREENLAYOUT_SIZE_MASK;
  if (screenLayoutSize < curSize) {
    curLayout=(curLayout & ~SCREENLAYOUT_SIZE_MASK) | screenLayoutSize;
  }
  return curLayout;
}
