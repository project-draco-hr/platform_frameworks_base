{
switch (event.getAction()) {
case MotionEvent.ACTION_DOWN:
    mVelocityTracker=VelocityTracker.obtain();
  break;
case MotionEvent.ACTION_CANCEL:
case MotionEvent.ACTION_UP:
mVelocityTracker.recycle();
mVelocityTracker=null;
break;
}
if (mVelocityTracker != null) {
if (mDelegateView != null && mDelegateView.getVisibility() != View.VISIBLE) {
mVelocityTracker.addMovement(event);
mVelocityTracker.computeCurrentVelocity(1000);
final boolean isVertical=(mOrientation == Surface.ROTATION_90 || mOrientation == Surface.ROTATION_270);
float velocity=isVertical ? -mVelocityTracker.getXVelocity() : -mVelocityTracker.getYVelocity();
if (velocity > VELOCITY_THRESHOLD) {
if (mDelegateView != null && mDelegateView.getVisibility() != View.VISIBLE) {
mBar.showSearchPanel();
}
}
}
}
if (mDelegateView != null) {
mSourceView.getLocationOnScreen(mTempPoint);
float deltaX=mTempPoint[0];
float deltaY=mTempPoint[1];
mDelegateView.getLocationOnScreen(mTempPoint);
deltaX-=mTempPoint[0];
deltaY-=mTempPoint[1];
event.offsetLocation(deltaX,deltaY);
mDelegateView.dispatchTouchEvent(event);
event.offsetLocation(-deltaX,-deltaY);
}
return false;
}
