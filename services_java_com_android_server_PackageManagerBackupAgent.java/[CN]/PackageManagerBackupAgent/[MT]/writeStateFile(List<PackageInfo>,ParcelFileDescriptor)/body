{
  FileOutputStream outstream=new FileOutputStream(stateFile.getFileDescriptor());
  DataOutputStream out=new DataOutputStream(outstream);
  try {
    out.writeUTF(GLOBAL_METADATA_KEY);
    out.writeInt(Build.VERSION.SDK_INT);
    out.writeUTF(Build.VERSION.INCREMENTAL);
    for (    PackageInfo pkg : pkgs) {
      out.writeUTF(pkg.packageName);
      out.writeInt(pkg.versionCode);
    }
  }
 catch (  IOException e) {
    Slog.e(TAG,"Unable to write package manager state file!");
    return;
  }
}
