{
  IntentFilter filter=new IntentFilter();
  filter.addAction(Intent.ACTION_BATTERY_LOW);
  filter.addAction(Intent.ACTION_BATTERY_OKAY);
  filter.addAction(BatteryManager.ACTION_CHARGING);
  filter.addAction(BatteryManager.ACTION_DISCHARGING);
  mContext.registerReceiver(this,filter);
  BatteryManagerInternal batteryManagerInternal=LocalServices.getService(BatteryManagerInternal.class);
  mBatteryHealthy=!batteryManagerInternal.getBatteryLevelLow();
  mCharging=batteryManagerInternal.isPowered(BatteryManager.BATTERY_PLUGGED_ANY);
}
