{
  Intent intent=new Intent(UsbManager.ACTION_USB_DEVICE_ATTACHED);
  intent.putExtra(UsbManager.EXTRA_DEVICE,device);
  intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
  ArrayList<ResolveInfo> matches;
  String defaultPackage;
synchronized (mLock) {
    matches=getDeviceMatchesLocked(device,intent);
    defaultPackage=mDevicePreferenceMap.get(new DeviceFilter(device));
  }
  mContext.sendBroadcast(intent);
  resolveActivity(intent,matches,defaultPackage,device,null);
}
