{
  int width=getDefaultSize(mVideoWidth,widthMeasureSpec);
  int height=getDefaultSize(mVideoHeight,heightMeasureSpec);
  if (mVideoWidth > 0 && mVideoHeight > 0) {
    int widthSpecMode=MeasureSpec.getMode(widthMeasureSpec);
    int widthSpecSize=MeasureSpec.getSize(widthMeasureSpec);
    int heightSpecMode=MeasureSpec.getMode(heightMeasureSpec);
    int heightSpecSize=MeasureSpec.getSize(heightMeasureSpec);
    if (widthSpecMode == MeasureSpec.EXACTLY && heightSpecMode == MeasureSpec.EXACTLY) {
      width=widthSpecSize;
      height=heightSpecSize;
      if (mVideoWidth * height < width * mVideoHeight) {
        width=height * mVideoWidth / mVideoHeight;
      }
 else       if (mVideoWidth * height > width * mVideoHeight) {
        height=width * mVideoHeight / mVideoWidth;
      }
    }
 else     if (widthSpecMode == MeasureSpec.EXACTLY) {
      width=widthSpecSize;
      height=width * mVideoHeight / mVideoWidth;
      if (heightSpecMode == MeasureSpec.AT_MOST && height > heightSpecSize) {
        height=heightSpecSize;
      }
    }
 else     if (heightSpecMode == MeasureSpec.EXACTLY) {
      height=heightSpecSize;
      width=height * mVideoWidth / mVideoHeight;
      if (widthSpecMode == MeasureSpec.AT_MOST && width > widthSpecSize) {
        width=widthSpecSize;
      }
    }
 else {
      width=mVideoWidth;
      height=mVideoHeight;
      if (heightSpecMode == MeasureSpec.AT_MOST && height > heightSpecSize) {
        height=heightSpecSize;
        width=height * mVideoWidth / mVideoHeight;
      }
      if (widthSpecMode == MeasureSpec.AT_MOST && width > widthSpecSize) {
        width=widthSpecSize;
        height=width * mVideoHeight / mVideoWidth;
      }
    }
  }
 else {
  }
  setMeasuredDimension(width,height);
}
