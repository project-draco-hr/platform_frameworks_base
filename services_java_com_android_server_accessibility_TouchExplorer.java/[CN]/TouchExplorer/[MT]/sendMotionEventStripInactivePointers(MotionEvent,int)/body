{
  PointerTracker pointerTracker=mPointerTracker;
  if (prototype.getPointerCount() == pointerTracker.getActivePointerCount()) {
    sendMotionEvent(prototype,policyFlags);
    return;
  }
  if (pointerTracker.getActivePointerCount() == 0 && !pointerTracker.wasLastReceivedUpPointerActive()) {
    return;
  }
  int pointerIdBits=0;
  final int pointerCount=prototype.getPointerCount();
  for (int pointerIndex=0; pointerIndex < pointerCount; pointerIndex++) {
    final int pointerId=prototype.getPointerId(pointerIndex);
    if (pointerTracker.isActiveOrWasLastActiveUpPointer(pointerId)) {
      pointerIdBits|=(1 << pointerId);
    }
  }
  MotionEvent event=prototype.split(pointerIdBits);
  sendMotionEvent(event,policyFlags);
  event.recycle();
}
