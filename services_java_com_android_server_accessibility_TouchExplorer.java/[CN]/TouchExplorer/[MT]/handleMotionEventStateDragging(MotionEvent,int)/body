{
  final int pointerIdBits=(1 << mDraggingPointerId);
switch (event.getActionMasked()) {
case MotionEvent.ACTION_DOWN:
{
      throw new IllegalStateException("Dragging state can be reached only if two " + "pointers are already down");
    }
case MotionEvent.ACTION_POINTER_DOWN:
{
    mCurrentState=STATE_DELEGATING;
    sendMotionEvent(event,MotionEvent.ACTION_UP,pointerIdBits,policyFlags);
    sendDownForAllActiveNotInjectedPointers(event,policyFlags);
  }
break;
case MotionEvent.ACTION_MOVE:
{
final int activePointerCount=mPointerTracker.getActivePointerCount();
switch (activePointerCount) {
case 2:
{
    if (isDraggingGesture(event)) {
      sendMotionEvent(event,MotionEvent.ACTION_MOVE,pointerIdBits,policyFlags);
    }
 else {
      mCurrentState=STATE_DELEGATING;
      sendMotionEvent(event,MotionEvent.ACTION_UP,pointerIdBits,policyFlags);
      sendDownForAllActiveNotInjectedPointers(event,policyFlags);
    }
  }
break;
default :
{
mCurrentState=STATE_DELEGATING;
sendMotionEvent(event,MotionEvent.ACTION_UP,pointerIdBits,policyFlags);
sendDownForAllActiveNotInjectedPointers(event,policyFlags);
}
}
}
break;
case MotionEvent.ACTION_POINTER_UP:
{
mCurrentState=STATE_TOUCH_EXPLORING;
sendMotionEvent(event,MotionEvent.ACTION_UP,pointerIdBits,policyFlags);
}
break;
case MotionEvent.ACTION_CANCEL:
{
clear();
}
break;
}
}
