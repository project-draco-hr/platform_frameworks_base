{
  ReceivedPointerTracker receivedPointers=mReceivedPointerTracker;
  InjectedPointerTracker injectedPointers=mInjectedPointerTracker;
  int pointerIdBits=0;
  final int pointerCount=prototype.getPointerCount();
  for (int i=0; i < pointerCount; i++) {
    final int pointerId=prototype.getPointerId(i);
    if (injectedPointers.isInjectedPointerDown(pointerId)) {
      pointerIdBits|=(1 << pointerId);
    }
  }
  for (int i=0; i < pointerCount; i++) {
    final int pointerId=prototype.getPointerId(i);
    if (!receivedPointers.isActivePointer(pointerId)) {
      continue;
    }
    if (injectedPointers.isInjectedPointerDown(pointerId)) {
      continue;
    }
    pointerIdBits|=(1 << pointerId);
    final int action=computeInjectionAction(MotionEvent.ACTION_DOWN,i);
    sendMotionEvent(prototype,action,pointerIdBits,policyFlags);
  }
}
