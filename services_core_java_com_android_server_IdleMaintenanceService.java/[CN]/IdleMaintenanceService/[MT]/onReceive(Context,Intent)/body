{
  if (DEBUG) {
    Log.i(TAG,intent.getAction());
  }
  String action=intent.getAction();
  if (Intent.ACTION_BATTERY_CHANGED.equals(action)) {
    if (mIdleMaintenanceStarted) {
      updateIdleMaintenanceStateTm(false);
    }
  }
 else   if (Intent.ACTION_SCREEN_ON.equals(action) || Intent.ACTION_DREAMING_STOPPED.equals(action)) {
    mLastUserActivityElapsedTimeMillis=LAST_USER_ACTIVITY_TIME_INVALID;
    unscheduleUpdateIdleMaintenanceState();
    updateIdleMaintenanceStateTm(false);
  }
 else   if (Intent.ACTION_SCREEN_OFF.equals(action) || Intent.ACTION_DREAMING_STARTED.equals(action)) {
    mLastUserActivityElapsedTimeMillis=SystemClock.elapsedRealtime();
    scheduleUpdateIdleMaintenanceState(MIN_USER_INACTIVITY_IDLE_MAINTENANCE_START);
  }
 else   if (ACTION_UPDATE_IDLE_MAINTENANCE_STATE.equals(action)) {
    updateIdleMaintenanceStateTm(false);
  }
 else   if (ACTION_FORCE_IDLE_MAINTENANCE.equals(action)) {
    long now=SystemClock.elapsedRealtime() - 1;
    mLastUserActivityElapsedTimeMillis=now - MIN_USER_INACTIVITY_IDLE_MAINTENANCE_START;
    mLastIdleMaintenanceStartTimeMillis=now - MIN_IDLE_MAINTENANCE_INTERVAL_MILLIS;
    updateIdleMaintenanceStateTm(true);
  }
}
