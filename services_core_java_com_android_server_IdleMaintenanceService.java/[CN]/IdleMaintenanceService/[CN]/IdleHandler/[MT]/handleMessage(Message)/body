{
  final int token=msg.arg2;
switch (msg.what) {
case MSG_OP_COMPLETE:
{
      if (DEBUG) {
        Slog.i(TAG,"MSG_OP_COMPLETE of " + token);
      }
      ActiveTask task=mPendingOperations.get(token);
      if (task != null) {
        mPendingOperations.remove(token);
        removeMessages(MSG_TIMEOUT);
        handleOpCompleteTm(task,msg.arg1);
      }
 else {
        if (DEBUG) {
          Slog.w(TAG,"Belated op-complete of " + token);
        }
      }
      break;
    }
case MSG_IDLE_FINISHED:
{
    if (DEBUG) {
      Slog.i(TAG,"MSG_IDLE_FINISHED of " + token);
    }
    ActiveTask task=mPendingOperations.get(token);
    if (task != null) {
      if (DEBUG) {
        Slog.i(TAG,"... removing task " + token);
      }
      mPendingOperations.remove(token);
      removeMessages(MSG_TIMEOUT);
      handleIdleFinishedTm(task);
    }
 else {
      if (DEBUG) {
        Slog.w(TAG,"Belated idle-finished of " + token);
      }
    }
    break;
  }
case MSG_TIMEOUT:
{
  if (DEBUG) {
    Slog.i(TAG,"MSG_TIMEOUT of " + token);
  }
  ActiveTask task=mPendingOperations.get(token);
  if (task != null) {
    mPendingOperations.remove(token);
    removeMessages(MSG_OP_COMPLETE);
    handleTimeoutTm(task);
  }
 else {
    Slog.w(TAG,"Unexpected timeout of " + token);
  }
  break;
}
default :
Slog.w(TAG,"Unknown message: " + msg.what);
}
}
