{
  if (durationMs == mDurationMs) {
    return;
  }
  invalidateEndTransition();
  mDurationMs=durationMs;
  adjustTransitions();
  final List<Overlay> adjustedOverlays=adjustOverlays();
  final List<Effect> adjustedEffects=adjustEffects();
  invalidateBeginTransition(adjustedEffects,adjustedOverlays);
  invalidateEndTransition();
  if (getGeneratedImageClip() != null) {
    new File(getGeneratedImageClip()).delete();
    setGeneratedImageClip(null);
    super.setRegenerateClip(true);
  }
  mVideoEditor.updateTimelineDuration();
}
