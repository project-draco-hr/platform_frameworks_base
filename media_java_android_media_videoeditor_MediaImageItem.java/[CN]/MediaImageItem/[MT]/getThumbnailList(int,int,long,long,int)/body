{
  if (getGeneratedImageClip() == null) {
    final Bitmap thumbnail=scaleImage(mFilename,width,height);
    final Bitmap[] thumbnailArray=new Bitmap[thumbnailCount];
    for (int i=0; i < thumbnailCount; i++) {
      thumbnailArray[i]=thumbnail;
    }
    return thumbnailArray;
  }
 else {
    if (startMs > endMs) {
      throw new IllegalArgumentException("Start time is greater than end time");
    }
    if (endMs > mDurationMs) {
      throw new IllegalArgumentException("End time is greater than file duration");
    }
    if (startMs == endMs) {
      Bitmap[] bitmap=new Bitmap[1];
      bitmap[0]=mMANativeHelper.getPixels(getGeneratedImageClip(),width,height,startMs);
      return bitmap;
    }
    return mMANativeHelper.getPixelsList(getGeneratedImageClip(),width,height,startMs,endMs,thumbnailCount);
  }
}
