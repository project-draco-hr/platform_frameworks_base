{
  final List<Overlay> overlays=getAllOverlays();
  for (  Overlay overlay : overlays) {
    final long overlayStartTimeMs;
    if (overlay.getStartTime() > getDuration()) {
      overlayStartTimeMs=0;
    }
 else {
      overlayStartTimeMs=overlay.getStartTime();
    }
    final long overlayDurationMs;
    if (overlayStartTimeMs + overlay.getDuration() > getDuration()) {
      overlayDurationMs=getDuration() - overlayStartTimeMs;
    }
 else {
      overlayDurationMs=overlay.getDuration();
    }
    if (overlayStartTimeMs != overlay.getStartTime() || overlayDurationMs != overlay.getDuration()) {
      overlay.setStartTimeAndDuration(overlayStartTimeMs,overlayDurationMs);
    }
  }
}
