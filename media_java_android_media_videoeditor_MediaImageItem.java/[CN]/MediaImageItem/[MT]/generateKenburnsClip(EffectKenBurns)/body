{
  EditSettings editSettings=new EditSettings();
  editSettings.clipSettingsArray=new ClipSettings[1];
  String output=null;
  ClipSettings clipSettings=new ClipSettings();
  initClipSettings(clipSettings);
  editSettings.clipSettingsArray[0]=getKenBurns(effectKB);
  if ((getGeneratedImageClip() == null) && (getRegenerateClip())) {
    output=mMANativeHelper.generateKenBurnsClip(editSettings,this);
    setGeneratedImageClip(output);
    setRegenerateClip(false);
    clipSettings.clipPath=output;
    clipSettings.fileType=FileType.THREE_GPP;
    mGeneratedClipHeight=getScaledHeight();
switch (mVideoEditor.getAspectRatio()) {
case MediaProperties.ASPECT_RATIO_3_2:
      if (mGeneratedClipHeight == MediaProperties.HEIGHT_480)       mGeneratedClipWidth=720;
 else       if (mGeneratedClipHeight == MediaProperties.HEIGHT_720)       mGeneratedClipWidth=1080;
    break;
case MediaProperties.ASPECT_RATIO_16_9:
  if (mGeneratedClipHeight == MediaProperties.HEIGHT_360)   mGeneratedClipWidth=640;
 else   if (mGeneratedClipHeight == MediaProperties.HEIGHT_480)   mGeneratedClipWidth=854;
 else   if (mGeneratedClipHeight == MediaProperties.HEIGHT_720)   mGeneratedClipWidth=1280;
break;
case MediaProperties.ASPECT_RATIO_4_3:
if (mGeneratedClipHeight == MediaProperties.HEIGHT_480) mGeneratedClipWidth=640;
if (mGeneratedClipHeight == MediaProperties.HEIGHT_720) mGeneratedClipWidth=960;
break;
case MediaProperties.ASPECT_RATIO_5_3:
if (mGeneratedClipHeight == MediaProperties.HEIGHT_480) mGeneratedClipWidth=800;
break;
case MediaProperties.ASPECT_RATIO_11_9:
if (mGeneratedClipHeight == MediaProperties.HEIGHT_144) mGeneratedClipWidth=176;
break;
}
}
 else {
if (getGeneratedImageClip() == null) {
clipSettings.clipPath=getDecodedImageFileName();
clipSettings.fileType=FileType.JPG;
clipSettings.rgbWidth=getScaledWidth();
clipSettings.rgbHeight=getScaledHeight();
}
 else {
clipSettings.clipPath=getGeneratedImageClip();
clipSettings.fileType=FileType.THREE_GPP;
}
}
clipSettings.mediaRendering=mMANativeHelper.getMediaItemRenderingMode(getRenderingMode());
clipSettings.beginCutTime=0;
clipSettings.endCutTime=(int)getTimelineDuration();
return clipSettings;
}
