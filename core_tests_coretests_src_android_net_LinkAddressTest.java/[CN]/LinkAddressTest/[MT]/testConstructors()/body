{
  LinkAddress address;
  address=new LinkAddress(V4_ADDRESS,25);
  assertEquals(V4_ADDRESS,address.getAddress());
  assertEquals(25,address.getNetworkPrefixLength());
  address=new LinkAddress(V6_ADDRESS,127);
  assertEquals(V6_ADDRESS,address.getAddress());
  assertEquals(127,address.getNetworkPrefixLength());
  address=new LinkAddress(V6 + "/64");
  assertEquals(V6_ADDRESS,address.getAddress());
  assertEquals(64,address.getNetworkPrefixLength());
  address=new LinkAddress(V4 + "/23");
  assertEquals(V4_ADDRESS,address.getAddress());
  assertEquals(23,address.getNetworkPrefixLength());
  List<InterfaceAddress> addrs=NetworkInterface.getByName("lo").getInterfaceAddresses();
  LinkAddress ipv4Loopback, ipv6Loopback;
  assertEquals(2,addrs.size());
  if (addrs.get(0).getAddress() instanceof Inet4Address) {
    ipv4Loopback=new LinkAddress(addrs.get(0));
    ipv6Loopback=new LinkAddress(addrs.get(1));
  }
 else {
    ipv4Loopback=new LinkAddress(addrs.get(1));
    ipv6Loopback=new LinkAddress(addrs.get(0));
  }
  assertEquals(NetworkUtils.numericToInetAddress("127.0.0.1"),ipv4Loopback.getAddress());
  assertEquals(8,ipv4Loopback.getNetworkPrefixLength());
  assertEquals(NetworkUtils.numericToInetAddress("::1"),ipv6Loopback.getAddress());
  assertEquals(128,ipv6Loopback.getNetworkPrefixLength());
  try {
    address=new LinkAddress(null,24);
    fail("Null InetAddress should cause IllegalArgumentException");
  }
 catch (  IllegalArgumentException expected) {
  }
  try {
    address=new LinkAddress((String)null);
    fail("Null string should cause IllegalArgumentException");
  }
 catch (  IllegalArgumentException expected) {
  }
  try {
    address=new LinkAddress((InterfaceAddress)null);
    fail("Null string should cause NullPointerException");
  }
 catch (  NullPointerException expected) {
  }
  try {
    address=new LinkAddress(V4 + "/-1");
    fail("Negative IPv4 prefix length should cause IllegalArgumentException");
  }
 catch (  IllegalArgumentException expected) {
  }
  try {
    address=new LinkAddress(V6 + "/-1");
    fail("Negative IPv6 prefix length should cause IllegalArgumentException");
  }
 catch (  IllegalArgumentException expected) {
  }
  try {
    address=new LinkAddress(V4 + "/33");
    fail("/35 IPv4 prefix length should cause IllegalArgumentException");
  }
 catch (  IllegalArgumentException expected) {
  }
  try {
    address=new LinkAddress(V6 + "/129");
    fail("/129 IPv6 prefix length should cause IllegalArgumentException");
  }
 catch (  IllegalArgumentException expected) {
  }
}
