{
  mTaskIndexMap.clear();
  int numFreeformTasks=stackLayout.mNumFreeformTasks;
  if (!freeformTasks.isEmpty()) {
    mFreeformCellXCount=Math.max(2,(int)Math.ceil(Math.sqrt(numFreeformTasks)));
    mFreeformCellYCount=Math.max(2,(int)Math.ceil((float)numFreeformTasks / mFreeformCellXCount));
    mFreeformCellWidth=Math.min(stackLayout.mFreeformRect.width() / mFreeformCellXCount,stackLayout.mFreeformRect.height() / mFreeformCellYCount);
    mFreeformCellHeight=mFreeformCellWidth;
    int taskCount=freeformTasks.size();
    for (int i=taskCount - 1; i >= 0; i--) {
      Task task=freeformTasks.get(i);
      mTaskIndexMap.put(task.key,taskCount - i - 1);
    }
    if (DEBUG) {
      Log.d(TAG,"mFreeformCellXCount: " + mFreeformCellXCount);
      Log.d(TAG,"mFreeformCellYCount: " + mFreeformCellYCount);
      Log.d(TAG,"mFreeformCellWidth: " + mFreeformCellWidth);
      Log.d(TAG,"mFreeformCellHeight: " + mFreeformCellHeight);
    }
  }
}
