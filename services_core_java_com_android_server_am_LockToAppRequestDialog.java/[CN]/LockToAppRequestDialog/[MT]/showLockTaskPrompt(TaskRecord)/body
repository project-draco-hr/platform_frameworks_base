{
  if (mDialog != null) {
    mDialog.dismiss();
    mDialog=null;
  }
  mRequestedTask=task;
  final Resources r=Resources.getSystem();
  final String descriptionString=r.getString(R.string.lock_to_app_description);
  final SpannableString description=new SpannableString(descriptionString.replace('$',' '));
  final ImageSpan imageSpan=new ImageSpan(mContext,BitmapFactory.decodeResource(r,R.drawable.ic_recent),DynamicDrawableSpan.ALIGN_BOTTOM);
  final int index=descriptionString.indexOf('$');
  if (index >= 0) {
    description.setSpan(imageSpan,index,index + 1,Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
  }
  mDialog=new AlertDialog.Builder(mContext).setTitle(r.getString(R.string.lock_to_app_title)).setMessage(description).setPositiveButton(r.getString(R.string.lock_to_app_positive),this).setNegativeButton(r.getString(R.string.lock_to_app_negative),this).create();
  mDialog.getWindow().setType(WindowManager.LayoutParams.TYPE_SYSTEM_ALERT);
  mDialog.show();
  final TextView msgTxt=(TextView)mDialog.findViewById(R.id.message);
  final float width=imageSpan.getDrawable().getIntrinsicWidth();
  final float height=imageSpan.getDrawable().getIntrinsicHeight();
  final int lineHeight=msgTxt.getLineHeight();
  imageSpan.getDrawable().setBounds(0,0,(int)(lineHeight * width / height),lineHeight);
}
