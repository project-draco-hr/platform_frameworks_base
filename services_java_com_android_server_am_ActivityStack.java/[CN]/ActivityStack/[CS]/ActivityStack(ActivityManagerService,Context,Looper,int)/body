{
  mHandler=new ActivityStackHandler(looper);
  mService=service;
  mWindowManager=service.mWindowManager;
  mStackSupervisor=service.mStackSupervisor;
  mContext=context;
  PowerManager pm=(PowerManager)context.getSystemService(Context.POWER_SERVICE);
  if (VALIDATE_WAKE_LOCK_CALLER && Binder.getCallingUid() != Process.myUid()) {
    throw new IllegalStateException("Calling must be system uid");
  }
  mLaunchingActivity=pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,"ActivityManager-Launch");
  mLaunchingActivity.setReferenceCounted(false);
  mStackId=stackId;
  mCurrentUser=service.mCurrentUserId;
}
