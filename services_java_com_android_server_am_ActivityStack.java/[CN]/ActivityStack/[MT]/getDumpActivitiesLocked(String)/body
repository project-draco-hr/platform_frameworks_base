{
  ArrayList<ActivityRecord> activities=new ArrayList<ActivityRecord>();
  if ("all".equals(name)) {
    for (int taskNdx=mTaskHistory.size() - 1; taskNdx >= 0; --taskNdx) {
      activities.addAll(mTaskHistory.get(taskNdx).mActivities);
    }
  }
 else   if ("top".equals(name)) {
    final int top=mTaskHistory.size() - 1;
    if (top >= 0) {
      final ArrayList<ActivityRecord> list=mTaskHistory.get(top).mActivities;
      int listTop=list.size() - 1;
      if (listTop >= 0) {
        activities.add(list.get(listTop));
      }
    }
  }
 else {
    ItemMatcher matcher=new ItemMatcher();
    matcher.build(name);
    for (int taskNdx=mTaskHistory.size() - 1; taskNdx >= 0; --taskNdx) {
      for (      ActivityRecord r1 : mTaskHistory.get(taskNdx).mActivities) {
        if (matcher.match(r1,r1.intent.getComponent())) {
          activities.add(r1);
        }
      }
    }
  }
  return activities;
}
