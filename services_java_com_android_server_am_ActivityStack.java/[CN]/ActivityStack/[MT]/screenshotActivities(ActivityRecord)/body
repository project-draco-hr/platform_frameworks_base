{
  if (who.noDisplay) {
    return null;
  }
  Resources res=mService.mContext.getResources();
  int w=mThumbnailWidth;
  int h=mThumbnailHeight;
  if (w < 0) {
    mThumbnailWidth=w=res.getDimensionPixelSize(com.android.internal.R.dimen.thumbnail_width);
    mThumbnailHeight=h=res.getDimensionPixelSize(com.android.internal.R.dimen.thumbnail_height);
  }
  if (w > 0) {
    if (who != mLastScreenshotActivity || mLastScreenshotBitmap == null || mLastScreenshotBitmap.getWidth() != w || mLastScreenshotBitmap.getHeight() != h) {
      mLastScreenshotActivity=who;
      mLastScreenshotBitmap=mService.mWindowManager.screenshotApplications(who.appToken,Display.DEFAULT_DISPLAY,w,h);
    }
    if (mLastScreenshotBitmap != null) {
      return mLastScreenshotBitmap.copy(Config.ARGB_8888,true);
    }
  }
  return null;
}
