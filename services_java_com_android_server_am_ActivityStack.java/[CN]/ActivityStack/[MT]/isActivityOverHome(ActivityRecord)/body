{
  final TaskRecord recordTask=record.task;
  for (int taskNdx=mTaskHistory.indexOf(recordTask); taskNdx >= 0; --taskNdx) {
    TaskRecord task=mTaskHistory.get(taskNdx);
    final ArrayList<ActivityRecord> activities=task.mActivities;
    final int startNdx=task == recordTask ? activities.indexOf(record) : activities.size() - 1;
    for (int activityNdx=startNdx; activityNdx >= 0; --activityNdx) {
      final ActivityRecord r=activities.get(activityNdx);
      if (r.isHomeActivity()) {
        return true;
      }
      if (!r.finishing && r.visible && r.fullscreen) {
        return false;
      }
    }
    if (task.mOnTopOfHome) {
      return true;
    }
  }
  return mStackSupervisor.isFrontStack(this);
}
