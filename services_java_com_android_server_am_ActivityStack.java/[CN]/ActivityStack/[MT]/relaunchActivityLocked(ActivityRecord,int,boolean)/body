{
  List<ResultInfo> results=null;
  List<Intent> newIntents=null;
  if (andResume) {
    results=r.results;
    newIntents=r.newIntents;
  }
  if (DEBUG_SWITCH)   Slog.v(TAG,"Relaunching: " + r + " with results="+ results+ " newIntents="+ newIntents+ " andResume="+ andResume);
  EventLog.writeEvent(andResume ? EventLogTags.AM_RELAUNCH_RESUME_ACTIVITY : EventLogTags.AM_RELAUNCH_ACTIVITY,r.userId,System.identityHashCode(r),r.task.taskId,r.shortComponentName);
  r.startFreezingScreenLocked(r.app,0);
  try {
    if (DEBUG_SWITCH || DEBUG_STATES)     Slog.i(TAG,(andResume ? "Relaunching to RESUMED " : "Relaunching to PAUSED ") + r);
    r.forceNewConfig=false;
    r.app.thread.scheduleRelaunchActivity(r.appToken,results,newIntents,changes,!andResume,new Configuration(mService.mConfiguration));
  }
 catch (  RemoteException e) {
    if (DEBUG_SWITCH || DEBUG_STATES)     Slog.i(TAG,"Relaunch failed",e);
  }
  if (andResume) {
    r.results=null;
    r.newIntents=null;
    if (mMainStack) {
      mService.reportResumedActivityLocked(r);
    }
    r.state=ActivityState.RESUMED;
  }
 else {
    mHandler.removeMessages(PAUSE_TIMEOUT_MSG,r);
    r.state=ActivityState.PAUSED;
  }
  return true;
}
