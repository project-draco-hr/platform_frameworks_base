{
  final int numHistory=mHistory.size();
  int historyNdx=0;
  final int numTasks=mTaskHistory.size();
  int taskNdx;
  for (taskNdx=historyNdx=0; taskNdx < numTasks; ++taskNdx) {
    final TaskRecord task=mTaskHistory.get(taskNdx);
    final ArrayList<ActivityRecord> activities=task.mActivities;
    final int numActivities=activities.size();
    int activityNdx;
    for (activityNdx=0; activityNdx < numActivities && historyNdx < numHistory; ++activityNdx, ++historyNdx) {
      ActivityRecord r1=mHistory.get(historyNdx);
      ActivityRecord r2=activities.get(activityNdx);
      if (r1 != r2) {
        break;
      }
    }
    if (activityNdx != numActivities) {
      break;
    }
  }
  if (taskNdx != numTasks || historyNdx != numHistory) {
    logHistories("verifyActivityRecords",rebuild);
    return true;
  }
  return false;
}
