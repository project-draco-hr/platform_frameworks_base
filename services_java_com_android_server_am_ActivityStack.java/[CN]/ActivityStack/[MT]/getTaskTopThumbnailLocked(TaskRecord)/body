{
  ActivityRecord resumed=mResumedActivity;
  if (resumed != null && resumed.task == tr) {
    return resumed.stack.screenshotActivities(resumed);
  }
  TaskAccessInfo info=getTaskAccessInfoLocked(tr.taskId,true);
  if (info.numSubThumbbails <= 0) {
    return info.mainThumbnail != null ? info.mainThumbnail : tr.lastThumbnail;
  }
 else {
    return info.subtasks.get(info.numSubThumbbails - 1).holder.lastThumbnail;
  }
}
