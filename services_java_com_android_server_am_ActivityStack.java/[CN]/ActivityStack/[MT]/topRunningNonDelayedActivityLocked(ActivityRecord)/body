{
  ActivityRecord newAr=newTopRunningNonDelayedActivityLocked(notTop);
  int i=mHistory.size() - 1;
  while (i >= 0) {
    ActivityRecord r=mHistory.get(i);
    if (!r.finishing && !r.delayedResume && r != notTop && okToShow(r)) {
      if (VALIDATE_TASK_REPLACE && newAr != r)       Slog.w(TAG,"topRunningNonDelayedActivityLocked: mismatch: newAr=" + newAr + " r="+ r);
      return r;
    }
    i--;
  }
  if (VALIDATE_TASK_REPLACE && newAr != null)   Slog.w(TAG,"topRunningNonDelayedActivityLocked: mismatch: newAr!=null");
  return null;
}
