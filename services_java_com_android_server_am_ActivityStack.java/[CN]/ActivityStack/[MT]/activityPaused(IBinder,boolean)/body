{
  if (DEBUG_PAUSE)   Slog.v(TAG,"Activity paused: token=" + token + ", timeout="+ timeout);
  ActivityRecord r=null;
synchronized (mService) {
    if (VALIDATE_TASK_REPLACE) {
      verifyActivityRecords();
    }
    int index=indexOfTokenLocked(token);
    if (index >= 0) {
      r=mHistory.get(index);
      mHandler.removeMessages(PAUSE_TIMEOUT_MSG,r);
      if (mPausingActivity == r) {
        if (DEBUG_STATES)         Slog.v(TAG,"Moving to PAUSED: " + r + (timeout ? " (due to timeout)" : " (pause complete)"));
        r.state=ActivityState.PAUSED;
        completePauseLocked();
      }
 else {
        EventLog.writeEvent(EventLogTags.AM_FAILED_TO_PAUSE,r.userId,System.identityHashCode(r),r.shortComponentName,mPausingActivity != null ? mPausingActivity.shortComponentName : "(none)");
      }
    }
  }
}
