{
  if (intents == null) {
    throw new NullPointerException("intents is null");
  }
  if (resolvedTypes == null) {
    throw new NullPointerException("resolvedTypes is null");
  }
  if (intents.length != resolvedTypes.length) {
    throw new IllegalArgumentException("intents are length different than resolvedTypes");
  }
  ActivityRecord[] outActivity=new ActivityRecord[1];
  int callingPid;
  if (callingUid >= 0) {
    callingPid=-1;
  }
 else   if (caller == null) {
    callingPid=Binder.getCallingPid();
    callingUid=Binder.getCallingUid();
  }
 else {
    callingPid=callingUid=-1;
  }
  final long origId=Binder.clearCallingIdentity();
  try {
synchronized (mService) {
      for (int i=0; i < intents.length; i++) {
        Intent intent=intents[i];
        if (intent == null) {
          continue;
        }
        if (intent != null && intent.hasFileDescriptors()) {
          throw new IllegalArgumentException("File descriptors passed in Intent");
        }
        boolean componentSpecified=intent.getComponent() != null;
        intent=new Intent(intent);
        ActivityInfo aInfo=resolveActivity(intent,resolvedTypes[i],0,null,null,userId);
        aInfo=mService.getActivityInfoForUser(aInfo,userId);
        if (mMainStack && aInfo != null && (aInfo.applicationInfo.flags & ApplicationInfo.FLAG_CANT_SAVE_STATE) != 0) {
          throw new IllegalArgumentException("FLAG_CANT_SAVE_STATE not supported here");
        }
        Bundle theseOptions;
        if (options != null && i == intents.length - 1) {
          theseOptions=options;
        }
 else {
          theseOptions=null;
        }
        int res=startActivityLocked(caller,intent,resolvedTypes[i],aInfo,resultTo,null,-1,callingPid,callingUid,callingPackage,0,theseOptions,componentSpecified,outActivity);
        if (res < 0) {
          return res;
        }
        resultTo=outActivity[0] != null ? outActivity[0].appToken : null;
      }
    }
  }
  finally {
    Binder.restoreCallingIdentity(origId);
  }
  return ActivityManager.START_SUCCESS;
}
