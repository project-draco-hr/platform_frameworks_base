{
  if (VALIDATE_TOKENS) {
    validateAppTokensLocked();
  }
  if (mCurrentUser == userId) {
    return true;
  }
  mCurrentUser=userId;
  boolean haveActivities=false;
  TaskRecord task=null;
  int index=mTaskHistory.size();
  for (int i=0; i < index; ++i) {
    task=mTaskHistory.get(i);
    if (task.userId == userId) {
      haveActivities=true;
      mTaskHistory.remove(i);
      mTaskHistory.add(task);
      --index;
    }
  }
  ActivityRecord top=task != null ? task.getTopActivity() : null;
  resumeTopActivityLocked(top);
  return haveActivities;
}
