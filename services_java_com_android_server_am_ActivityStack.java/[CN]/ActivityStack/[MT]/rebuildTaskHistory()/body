{
  mTaskHistory.clear();
  final int numActivities=mHistory.size();
  TaskRecord task=null;
  for (int i=0; i < numActivities; ++i) {
    final ActivityRecord r=mHistory.get(i);
    if (r.task != task) {
      task=r.task;
      task.mActivities.clear();
      mTaskHistory.add(task);
    }
    task.mActivities.add(r);
  }
}
