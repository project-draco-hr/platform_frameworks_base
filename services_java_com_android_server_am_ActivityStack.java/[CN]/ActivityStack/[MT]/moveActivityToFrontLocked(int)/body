{
  ActivityRecord newTop=mHistory.remove(where);
  newMoveActivityToFrontLocked(newTop);
  int top=mHistory.size();
  ActivityRecord oldTop=mHistory.get(top - 1);
  if (DEBUG_ADD_REMOVE) {
    RuntimeException here=new RuntimeException("here");
    here.fillInStackTrace();
    Slog.i(TAG,"Removing and adding activity " + newTop + " to stack at "+ top,here);
  }
  mHistory.add(top,newTop);
  if (VALIDATE_TASK_REPLACE) {
    verifyActivityRecords(true);
  }
  return newTop;
}
