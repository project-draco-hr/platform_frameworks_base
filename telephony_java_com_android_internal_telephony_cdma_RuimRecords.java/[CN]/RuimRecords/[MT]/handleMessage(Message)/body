{
  AsyncResult ar;
  byte data[];
  boolean isRecordLoadResponse=false;
  try {
switch (msg.what) {
case EVENT_RUIM_READY:
      onRuimReady();
    break;
case EVENT_RADIO_OFF_OR_NOT_AVAILABLE:
  onRadioOffOrNotAvailable();
break;
case EVENT_GET_DEVICE_IDENTITY_DONE:
Log.d(LOG_TAG,"Event EVENT_GET_DEVICE_IDENTITY_DONE Received");
break;
case EVENT_GET_CDMA_SUBSCRIPTION_DONE:
ar=(AsyncResult)msg.obj;
String localTemp[]=(String[])ar.result;
if (ar.exception != null) {
break;
}
mdn=localTemp[0];
h_sid=localTemp[1];
h_nid=localTemp[2];
Log.d(LOG_TAG,"MDN: " + mdn);
break;
case EVENT_GET_ICCID_DONE:
isRecordLoadResponse=true;
ar=(AsyncResult)msg.obj;
data=(byte[])ar.result;
if (ar.exception != null) {
break;
}
iccid=IccUtils.bcdToString(data,0,data.length);
Log.d(LOG_TAG,"iccid: " + iccid);
break;
case EVENT_UPDATE_DONE:
ar=(AsyncResult)msg.obj;
if (ar.exception != null) {
Log.i(LOG_TAG,"RuimRecords update failed",ar.exception);
}
break;
case EVENT_GET_ALL_SMS_DONE:
case EVENT_MARK_SMS_READ_DONE:
case EVENT_SMS_ON_RUIM:
case EVENT_GET_SMS_DONE:
Log.w(LOG_TAG,"Event not supported: " + msg.what);
break;
case EVENT_GET_SST_DONE:
Log.d(LOG_TAG,"Event EVENT_GET_SST_DONE Received");
break;
case EVENT_RUIM_REFRESH:
isRecordLoadResponse=false;
ar=(AsyncResult)msg.obj;
if (ar.exception == null) {
handleRuimRefresh((int[])(ar.result));
}
break;
}
}
 catch (RuntimeException exc) {
Log.w(LOG_TAG,"Exception parsing RUIM record",exc);
}
 finally {
if (isRecordLoadResponse) {
onRecordLoaded();
}
}
}
