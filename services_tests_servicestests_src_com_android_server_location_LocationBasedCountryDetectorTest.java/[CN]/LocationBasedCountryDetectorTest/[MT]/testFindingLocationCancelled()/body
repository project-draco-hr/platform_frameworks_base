{
  final String country="us";
  final String provider="Good";
  CountryListenerImpl countryListener=new CountryListenerImpl();
  TestCountryDetector detector=new TestCountryDetector(country,provider);
  detector.setCountryListener(countryListener);
  detector.detectCountry();
  assertEquals(TestCountryDetector.TOTAL_PROVIDERS,detector.getListenersCount());
  detector.stop();
  assertEquals(0,detector.getListenersCount());
  assertNull(detector.getTimer());
  assertNull(detector.getQueryThread());
  assertFalse(countryListener.notified());
}
