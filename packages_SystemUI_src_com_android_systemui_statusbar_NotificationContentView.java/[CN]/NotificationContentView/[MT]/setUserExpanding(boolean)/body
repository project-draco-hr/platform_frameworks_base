{
  mUserExpanding=userExpanding;
  if (userExpanding) {
    mTransformationStartVisibleType=mVisibleType;
  }
 else {
    mTransformationStartVisibleType=UNDEFINED;
    mVisibleType=calculateVisibleType();
    updateViewVisibilities(mVisibleType);
    updateBackgroundColor(false);
  }
}
