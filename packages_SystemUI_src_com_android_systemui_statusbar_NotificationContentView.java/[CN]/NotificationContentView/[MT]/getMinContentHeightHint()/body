{
  if (mIsChildInGroup && isVisibleOrTransitioning(VISIBLE_TYPE_SINGLELINE)) {
    return mContext.getResources().getDimensionPixelSize(com.android.internal.R.dimen.notification_action_list_height);
  }
  if (mHeadsUpChild != null && mExpandedChild != null) {
    boolean transitioningBetweenHunAndExpanded=isTransitioningFromTo(VISIBLE_TYPE_HEADSUP,VISIBLE_TYPE_EXPANDED) || isTransitioningFromTo(VISIBLE_TYPE_EXPANDED,VISIBLE_TYPE_HEADSUP);
    boolean pinned=!isVisibleOrTransitioning(VISIBLE_TYPE_CONTRACTED) && mIsHeadsUp;
    if (transitioningBetweenHunAndExpanded || pinned) {
      return Math.min(mHeadsUpChild.getHeight(),mExpandedChild.getHeight());
    }
  }
  if ((mVisibleType == VISIBLE_TYPE_EXPANDED) && mContentHeightAtAnimationStart >= 0 && mExpandedChild != null) {
    return Math.min(mContentHeightAtAnimationStart,mExpandedChild.getHeight());
  }
  int hint;
  if (mHeadsUpChild != null && isVisibleOrTransitioning(VISIBLE_TYPE_HEADSUP)) {
    hint=mHeadsUpChild.getHeight();
  }
 else   if (mExpandedChild != null) {
    hint=mExpandedChild.getHeight();
  }
 else {
    hint=mContractedChild.getHeight() + mContext.getResources().getDimensionPixelSize(com.android.internal.R.dimen.notification_action_list_height);
  }
  if (mExpandedChild != null && isVisibleOrTransitioning(VISIBLE_TYPE_EXPANDED)) {
    hint=Math.min(hint,mExpandedChild.getHeight());
  }
  return hint;
}
