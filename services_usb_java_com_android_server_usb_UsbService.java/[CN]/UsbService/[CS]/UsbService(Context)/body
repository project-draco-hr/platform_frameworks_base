{
  mContext=context;
  mAlsaManager=new UsbAlsaManager(context);
  final PackageManager pm=mContext.getPackageManager();
  if (pm.hasSystemFeature(PackageManager.FEATURE_USB_HOST)) {
    mHostManager=new UsbHostManager(context,mAlsaManager);
  }
  if (new File("/sys/class/android_usb").exists()) {
    mDeviceManager=new UsbDeviceManager(context,mAlsaManager);
  }
  setCurrentUser(UserHandle.USER_OWNER);
  final IntentFilter userFilter=new IntentFilter();
  userFilter.addAction(Intent.ACTION_USER_SWITCHED);
  userFilter.addAction(Intent.ACTION_USER_STOPPED);
  mContext.registerReceiver(mUserReceiver,userFilter,null,null);
}
