{
  mContext.enforceCallingOrSelfPermission(android.Manifest.permission.MANAGE_USB,null);
  UserManager userManager=(UserManager)mContext.getSystemService(Context.USER_SERVICE);
  if (userManager.hasUserRestriction(UserManager.DISALLOW_USB_FILE_TRANSFER)) {
    if (mDeviceManager != null)     mDeviceManager.setCurrentFunctions("none",false);
    return;
  }
  if (mDeviceManager != null) {
    mDeviceManager.setCurrentFunctions(function,makeDefault);
  }
 else {
    throw new IllegalStateException("USB device mode not supported");
  }
}
