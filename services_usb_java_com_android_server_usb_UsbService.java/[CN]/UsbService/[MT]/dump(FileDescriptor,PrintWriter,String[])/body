{
  mContext.enforceCallingOrSelfPermission(android.Manifest.permission.DUMP,TAG);
  final IndentingPrintWriter pw=new IndentingPrintWriter(writer,"  ");
  pw.println("USB Manager State:");
  if (mDeviceManager != null) {
    mDeviceManager.dump(fd,pw);
  }
  if (mHostManager != null) {
    mHostManager.dump(fd,pw);
  }
  mAlsaManager.dump(fd,pw);
synchronized (mLock) {
    for (int i=0; i < mSettingsByUser.size(); i++) {
      final int userId=mSettingsByUser.keyAt(i);
      final UsbSettingsManager settings=mSettingsByUser.valueAt(i);
      pw.increaseIndent();
      pw.println("Settings for user " + userId + ":");
      settings.dump(fd,pw);
      pw.decreaseIndent();
    }
  }
  pw.decreaseIndent();
}
