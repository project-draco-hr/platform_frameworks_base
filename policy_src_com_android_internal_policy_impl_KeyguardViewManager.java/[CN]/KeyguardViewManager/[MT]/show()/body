{
  if (DEBUG)   Log.d(TAG,"show(); mKeyguardView==" + mKeyguardView);
  Resources res=mContext.getResources();
  boolean enableScreenRotation=res.getBoolean(R.bool.config_enableLockScreenRotation);
  if (mKeyguardHost == null) {
    if (DEBUG)     Log.d(TAG,"keyguard host is null, creating it...");
    mKeyguardHost=new KeyguardViewHost(mContext,mCallback);
    final int stretch=ViewGroup.LayoutParams.MATCH_PARENT;
    int flags=WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN | WindowManager.LayoutParams.FLAG_SHOW_WALLPAPER | WindowManager.LayoutParams.FLAG_KEEP_SURFACE_WHILE_ANIMATING| WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED| WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED_SYSTEM;
    if (!mNeedsInput) {
      flags|=WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM;
    }
    WindowManager.LayoutParams lp=new WindowManager.LayoutParams(stretch,stretch,WindowManager.LayoutParams.TYPE_KEYGUARD,flags,PixelFormat.TRANSLUCENT);
    lp.softInputMode=WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN;
    lp.windowAnimations=com.android.internal.R.style.Animation_LockScreen;
    lp.setTitle("Keyguard");
    mWindowLayoutParams=lp;
    mViewManager.addView(mKeyguardHost,lp);
  }
  if (enableScreenRotation) {
    Log.d(TAG,"Rotation sensor for lock screen On!");
    mWindowLayoutParams.screenOrientation=ActivityInfo.SCREEN_ORIENTATION_SENSOR;
  }
 else {
    Log.d(TAG,"Rotation sensor for lock screen Off!");
    mWindowLayoutParams.screenOrientation=ActivityInfo.SCREEN_ORIENTATION_NOSENSOR;
  }
  mViewManager.updateViewLayout(mKeyguardHost,mWindowLayoutParams);
  if (mKeyguardView == null) {
    if (DEBUG)     Log.d(TAG,"keyguard view is null, creating it...");
    mKeyguardView=mKeyguardViewProperties.createKeyguardView(mContext,mUpdateMonitor,this);
    mKeyguardView.setId(R.id.lock_screen);
    mKeyguardView.setCallback(mCallback);
    final ViewGroup.LayoutParams lp=new FrameLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,ViewGroup.LayoutParams.MATCH_PARENT);
    mKeyguardHost.addView(mKeyguardView,lp);
    if (mScreenOn) {
      mKeyguardView.onScreenTurnedOn();
    }
  }
  mViewManager.updateViewLayout(mKeyguardHost,mWindowLayoutParams);
  mKeyguardHost.setVisibility(View.VISIBLE);
  mKeyguardView.requestFocus();
}
