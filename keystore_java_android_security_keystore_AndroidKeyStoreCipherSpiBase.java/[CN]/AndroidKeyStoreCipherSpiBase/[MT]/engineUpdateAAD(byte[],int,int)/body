{
  if (mCachedException != null) {
    return;
  }
  try {
    ensureKeystoreOperationInitialized();
  }
 catch (  InvalidKeyException|InvalidAlgorithmParameterException e) {
    mCachedException=e;
    return;
  }
  if (mAdditionalAuthenticationDataStreamerClosed) {
    throw new IllegalStateException("AAD can only be provided before Cipher.update is invoked");
  }
  if (mAdditionalAuthenticationDataStreamer == null) {
    throw new IllegalStateException("This cipher does not support AAD");
  }
  byte[] output;
  try {
    output=mAdditionalAuthenticationDataStreamer.update(input,inputOffset,inputLen);
  }
 catch (  KeyStoreException e) {
    mCachedException=e;
    return;
  }
  if ((output != null) && (output.length > 0)) {
    throw new ProviderException("AAD update unexpectedly produced output: " + output.length + " bytes");
  }
}
