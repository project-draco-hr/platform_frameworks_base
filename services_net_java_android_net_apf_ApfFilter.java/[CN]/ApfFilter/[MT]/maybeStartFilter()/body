{
  FileDescriptor socket;
  try {
    mHardwareAddress=mNetworkInterface.getHardwareAddress();
synchronized (this) {
      installNewProgramLocked();
    }
    socket=Os.socket(AF_PACKET,SOCK_RAW,ETH_P_IPV6);
    PacketSocketAddress addr=new PacketSocketAddress((short)ETH_P_IPV6,mNetworkInterface.getIndex());
    Os.bind(socket,addr);
    NetworkUtils.attachRaFilter(socket,mApfCapabilities.apfPacketFormat);
  }
 catch (  SocketException|ErrnoException e) {
    Log.e(TAG,"Error starting filter",e);
    return;
  }
  mReceiveThread=new ReceiveThread(socket);
  mReceiveThread.start();
}
