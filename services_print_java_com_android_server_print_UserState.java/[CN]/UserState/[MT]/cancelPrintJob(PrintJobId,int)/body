{
  PrintJobInfo printJobInfo=mSpooler.getPrintJobInfo(printJobId,appId);
  if (printJobInfo == null) {
    return;
  }
  mSpooler.setPrintJobCancelling(printJobId,true);
  if (printJobInfo.getState() != PrintJobInfo.STATE_FAILED) {
    PrinterId printerId=printJobInfo.getPrinterId();
    if (printerId != null) {
      ComponentName printServiceName=printerId.getServiceName();
      RemotePrintService printService=null;
synchronized (mLock) {
        printService=mActiveServices.get(printServiceName);
      }
      if (printService == null) {
        return;
      }
      printService.onRequestCancelPrintJob(printJobInfo);
    }
  }
 else {
    mSpooler.setPrintJobState(printJobId,PrintJobInfo.STATE_CANCELED,null);
  }
}
