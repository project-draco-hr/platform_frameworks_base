{
  LayoutBuilder b=StaticLayoutTest.builder();
  String text="ABC";
  b.setText(pseudoBidiToReal(text));
  Layout l=b.build();
  Directions directions=l.getLineDirections(0);
  TextPaint workPaint=new TextPaint();
  int dir=-1;
  boolean trailing=true;
  boolean alt=true;
  do {
    dir=-dir;
    do {
      trailing=!trailing;
      for (int offset=0, end=b.text.length(); offset <= end; ++offset) {
        float width=Layout.measureText(b.paint,workPaint,b.text,0,offset,end,dir,directions,trailing,false,null);
        Log.i("BIDI","dir: " + dir + " trail: "+ trailing+ " offset: "+ offset+ " width: "+ width);
      }
    }
 while (!trailing);
  }
 while (dir > 0);
}
