{
  super.setUp();
  mMffContextHandlerThread=new HandlerThread("MffContextThread");
  mMffContextHandlerThread.start();
  Handler handler=new Handler(mMffContextHandlerThread.getLooper());
  FutureTask<MffContext> task=new FutureTask<MffContext>(new Callable<MffContext>(){
    @Override public MffContext call() throws Exception {
      MffContext.Config config=new MffContext.Config();
      config.requireCamera=false;
      config.requireOpenGL=false;
      config.forceNoGL=true;
      return new MffContext(getContext(),config);
    }
  }
);
  handler.post(task);
  mMffContext=task.get();
}
