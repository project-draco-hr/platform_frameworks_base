{
  if (phase == SystemService.PHASE_SYSTEM_SERVICES_READY) {
synchronized (mLock) {
      mTwilightManager=getLocalService(TwilightManager.class);
      if (mTwilightManager != null) {
        mTwilightManager.registerListener(mTwilightListener,mHandler);
      }
      mSystemReady=true;
      mCarModeEnabled=mDockState == Intent.EXTRA_DOCK_STATE_CAR;
      updateComputedNightModeLocked();
      updateLocked(0,0);
    }
  }
}
