{
  resultState.resetViewStates();
  SpeedBumpDotsLayout hostView=resultState.getHostView();
  boolean currentlyVisible=hostView.isCurrentlyVisible();
  resultState.setActiveState(currentlyVisible ? SpeedBumpDotsState.SHOWN : SpeedBumpDotsState.HIDDEN);
  int hostWidth=hostView.getWidth();
  float layoutWidth=hostWidth - 2 * mDotRadius;
  int childCount=hostView.getChildCount();
  float paddingBetween=layoutWidth / (childCount - 1);
  float centerY=hostView.getHeight() / 2.0f;
  for (int i=0; i < childCount; i++) {
    View child=hostView.getChildAt(i);
    SpeedBumpDotsState.ViewState viewState=resultState.getViewStateForView(child);
    if (currentlyVisible) {
      float xTranslation=i * paddingBetween;
      viewState.xTranslation=xTranslation;
      viewState.yTranslation=calculateYTranslation(hostView,centerY,xTranslation,layoutWidth);
    }
 else {
      viewState.xTranslation=layoutWidth / 2;
      viewState.yTranslation=centerY - mDotRadius;
    }
    viewState.alpha=currentlyVisible ? 1.0f : 0.0f;
    viewState.scale=currentlyVisible ? 1.0f : 0.5f;
  }
}
