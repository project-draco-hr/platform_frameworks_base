{
  final boolean isScaleLessThanMinZoom=scale < mMinZoomScale;
  scale=computeScaleWithLimits(scale);
  if (isScaleLessThanMinZoom && mMinZoomScale < mDefaultScale) {
    mInZoomOverview=true;
  }
 else {
    mInZoomOverview=!exceedsMinScaleIncrement(scale,getZoomOverviewScale());
  }
  if (reflowText && !mWebView.getSettings().getUseFixedViewport()) {
    mTextWrapScale=scale;
  }
  if (scale != mActualScale || force) {
    float oldScale=mActualScale;
    float oldInvScale=mInvActualScale;
    if (scale != mActualScale && !mPinchToZoomAnimating) {
      mCallbackProxy.onScaleChanged(mActualScale,scale);
    }
    mActualScale=scale;
    mInvActualScale=1 / scale;
    if (!mWebView.drawHistory()) {
      int oldX=mWebView.getScrollX();
      int oldY=mWebView.getScrollY();
      float ratio=scale * oldInvScale;
      float sx=ratio * oldX + (ratio - 1) * mZoomCenterX;
      float sy=ratio * oldY + (ratio - 1) * (mZoomCenterY - mWebView.getTitleHeight());
      mWebView.mViewManager.scaleAll();
      int scrollX=mWebView.pinLocX(Math.round(sx));
      int scrollY=mWebView.pinLocY(Math.round(sy));
      if (!mWebView.updateScrollCoordinates(scrollX,scrollY)) {
        mWebView.sendOurVisibleRect();
      }
    }
    mWebView.sendViewSizeZoom(reflowText);
  }
}
