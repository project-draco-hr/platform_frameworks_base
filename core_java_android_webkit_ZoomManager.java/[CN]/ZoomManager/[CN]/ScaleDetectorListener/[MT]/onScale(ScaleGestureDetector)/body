{
  float scale=Math.max(computeScaleWithLimits(detector.getScaleFactor() * mActualScale),getZoomOverviewScale());
  float prevFocusX=mFocusX;
  float prevFocusY=mFocusY;
  mFocusX=detector.getFocusX();
  mFocusY=detector.getFocusY();
  float focusDelta=(prevFocusX == 0 && prevFocusY == 0) ? 0 : FloatMath.sqrt((mFocusX - prevFocusX) * (mFocusX - prevFocusX) + (mFocusY - prevFocusY) * (mFocusY - prevFocusY));
  mFocusMovementSum+=focusDelta;
  mFocusMovementQueue.add(focusDelta);
  if (mFocusMovementQueue.size() > FOCUS_QUEUE_SIZE) {
    mFocusMovementSum-=mFocusMovementQueue.remove();
  }
  float deltaSpan=Math.abs(detector.getCurrentSpan() - detector.getPreviousSpan());
  if (mFocusMovementSum > deltaSpan) {
    mFocusMovementSum=0;
    mFocusMovementQueue.clear();
    return true;
  }
  if (mPinchToZoomAnimating || willScaleTriggerZoom(scale)) {
    mPinchToZoomAnimating=true;
    if (scale > mActualScale) {
      scale=Math.min(scale,mActualScale * 1.25f);
    }
 else {
      scale=Math.max(scale,mActualScale * 0.8f);
    }
    scale=computeScaleWithLimits(scale);
    if (Math.abs(scale - mActualScale) < MINIMUM_SCALE_WITHOUT_JITTER) {
      return false;
    }
    setZoomCenter(detector.getFocusX(),detector.getFocusY());
    setZoomScale(scale,false);
    mWebView.invalidate();
    return true;
  }
  return false;
}
