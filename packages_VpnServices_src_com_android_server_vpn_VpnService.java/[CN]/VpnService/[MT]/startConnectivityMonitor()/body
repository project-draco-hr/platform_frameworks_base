{
  new Thread(new Runnable(){
    public void run(){
      Log.i(TAG,"VPN connectivity monitor running");
      try {
        for (; ; ) {
synchronized (VpnService.this) {
            if ((mState != VpnState.CONNECTED) || !checkConnectivity()) {
              break;
            }
            mNotification.update();
            checkDns();
            VpnService.this.wait(1000);
          }
        }
      }
 catch (      InterruptedException e) {
        onError(e);
      }
      Log.i(TAG,"VPN connectivity monitor stopped");
    }
  }
).start();
}
