{
  sleep(2000);
  for (int i=0; i < 60; i++) {
    if (mState != VpnState.CONNECTING) {
      break;
    }
 else     if (VPN_IS_UP.equals(SystemProperties.get(VPN_STATUS))) {
      onConnected();
      return;
    }
 else {
      int err=mDaemonHelper.getSocketError();
      if (err != 0) {
        onError(err);
        return;
      }
    }
    sleep(500);
  }
  if (mState == VpnState.CONNECTING) {
    onError(new IOException("Connecting timed out"));
  }
}
