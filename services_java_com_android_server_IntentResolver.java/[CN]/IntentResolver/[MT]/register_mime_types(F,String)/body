{
  final Iterator<String> i=filter.typesIterator();
  if (i == null) {
    return 0;
  }
  int num=0;
  while (i.hasNext()) {
    String name=(String)i.next();
    num++;
    if (localLOGV)     Slog.v(TAG,prefix + name);
    String baseName=name;
    final int slashpos=name.indexOf('/');
    if (slashpos > 0) {
      baseName=name.substring(0,slashpos).intern();
    }
 else {
      name=name + "/*";
    }
    ArrayList<F> array=mTypeToFilter.get(name);
    if (array == null) {
      array=new ArrayList<F>();
      mTypeToFilter.put(name,array);
    }
    array.add(filter);
    if (slashpos > 0) {
      array=mBaseTypeToFilter.get(baseName);
      if (array == null) {
        array=new ArrayList<F>();
        mBaseTypeToFilter.put(baseName,array);
      }
      array.add(filter);
    }
 else {
      array=mWildTypeToFilter.get(baseName);
      if (array == null) {
        array=new ArrayList<F>();
        mWildTypeToFilter.put(baseName,array);
      }
      array.add(filter);
    }
  }
  return num;
}
