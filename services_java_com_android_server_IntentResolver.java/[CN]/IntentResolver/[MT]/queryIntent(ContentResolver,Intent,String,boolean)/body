{
  String scheme=intent.getScheme();
  ArrayList<R> finalList=new ArrayList<R>();
  final boolean debug=localLOGV || ((intent.getFlags() & Intent.FLAG_DEBUG_LOG_RESOLUTION) != 0);
  if (debug)   Log.v(TAG,"Resolving type " + resolvedType + " scheme "+ scheme+ " of intent "+ intent);
  ArrayList<F> firstTypeCut=null;
  ArrayList<F> secondTypeCut=null;
  ArrayList<F> thirdTypeCut=null;
  ArrayList<F> schemeCut=null;
  if (resolvedType != null) {
    int slashpos=resolvedType.indexOf('/');
    if (slashpos > 0) {
      final String baseType=resolvedType.substring(0,slashpos);
      if (!baseType.equals("*")) {
        if (resolvedType.length() != slashpos + 2 || resolvedType.charAt(slashpos + 1) != '*') {
          firstTypeCut=mTypeToFilter.get(resolvedType);
          if (debug)           Log.v(TAG,"First type cut: " + firstTypeCut);
          secondTypeCut=mWildTypeToFilter.get(baseType);
          if (debug)           Log.v(TAG,"Second type cut: " + secondTypeCut);
        }
 else {
          firstTypeCut=mBaseTypeToFilter.get(baseType);
          if (debug)           Log.v(TAG,"First type cut: " + firstTypeCut);
          secondTypeCut=mWildTypeToFilter.get(baseType);
          if (debug)           Log.v(TAG,"Second type cut: " + secondTypeCut);
        }
        thirdTypeCut=mWildTypeToFilter.get("*");
        if (debug)         Log.v(TAG,"Third type cut: " + thirdTypeCut);
      }
 else       if (intent.getAction() != null) {
        firstTypeCut=mTypedActionToFilter.get(intent.getAction());
        if (debug)         Log.v(TAG,"Typed Action list: " + firstTypeCut);
      }
    }
  }
  if (scheme != null) {
    schemeCut=mSchemeToFilter.get(scheme);
    if (debug)     Log.v(TAG,"Scheme list: " + schemeCut);
  }
  if (resolvedType == null && scheme == null && intent.getAction() != null) {
    firstTypeCut=mActionToFilter.get(intent.getAction());
    if (debug)     Log.v(TAG,"Action list: " + firstTypeCut);
  }
  if (firstTypeCut != null) {
    buildResolveList(intent,debug,defaultOnly,resolvedType,scheme,firstTypeCut,finalList);
  }
  if (secondTypeCut != null) {
    buildResolveList(intent,debug,defaultOnly,resolvedType,scheme,secondTypeCut,finalList);
  }
  if (thirdTypeCut != null) {
    buildResolveList(intent,debug,defaultOnly,resolvedType,scheme,thirdTypeCut,finalList);
  }
  if (schemeCut != null) {
    buildResolveList(intent,debug,defaultOnly,resolvedType,scheme,schemeCut,finalList);
  }
  sortResults(finalList);
  if (debug) {
    Log.v(TAG,"Final result list:");
    for (    R r : finalList) {
      Log.v(TAG,"  " + r);
    }
  }
  return finalList;
}
