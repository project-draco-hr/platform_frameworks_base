{
switch (msg.what) {
case MSG_WRITE_CONFIG:
{
      handleWriteConfigFile();
    }
  break;
case MSG_REPORT_IDLE_ON:
{
  mLocalPowerManager.setDeviceIdleMode(true);
  try {
    mNetworkPolicyManager.setDeviceIdleMode(true);
    mBatteryStats.noteDeviceIdleMode(true,false,false);
  }
 catch (  RemoteException e) {
  }
  getContext().sendBroadcastAsUser(mIdleIntent,UserHandle.ALL);
}
break;
case MSG_REPORT_IDLE_OFF:
{
mLocalPowerManager.setDeviceIdleMode(false);
try {
mNetworkPolicyManager.setDeviceIdleMode(false);
mBatteryStats.noteDeviceIdleMode(false,false,false);
}
 catch (RemoteException e) {
}
getContext().sendBroadcastAsUser(mIdleIntent,UserHandle.ALL);
}
break;
case MSG_REPORT_ACTIVE:
{
boolean fromMotion=msg.arg1 != 0;
boolean needBroadcast=msg.arg2 != 0;
mLocalPowerManager.setDeviceIdleMode(false);
try {
mNetworkPolicyManager.setDeviceIdleMode(false);
mBatteryStats.noteDeviceIdleMode(false,!fromMotion,fromMotion);
}
 catch (RemoteException e) {
}
if (needBroadcast) {
getContext().sendBroadcastAsUser(mIdleIntent,UserHandle.ALL);
}
}
break;
case MSG_TEMP_APP_WHITELIST_TIMEOUT:
{
int uid=msg.arg1;
checkTempAppWhitelistTimeout(uid);
}
break;
}
}
