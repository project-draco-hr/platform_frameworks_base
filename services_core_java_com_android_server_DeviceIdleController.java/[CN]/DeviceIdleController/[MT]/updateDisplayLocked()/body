{
  mCurDisplay=mDisplayManager.getDisplay(Display.DEFAULT_DISPLAY);
  boolean screenOn=mCurDisplay.getState() == Display.STATE_ON;
  if (DEBUG)   Slog.d(TAG,"updateDisplayLocked: screenOn=" + screenOn);
  if (!screenOn && mScreenOn) {
    mScreenOn=false;
    if (!mForceIdle) {
      becomeInactiveIfAppropriateLocked();
    }
  }
 else   if (screenOn) {
    mScreenOn=true;
    if (!mForceIdle) {
      becomeActiveLocked("screen",Process.myUid());
    }
  }
}
