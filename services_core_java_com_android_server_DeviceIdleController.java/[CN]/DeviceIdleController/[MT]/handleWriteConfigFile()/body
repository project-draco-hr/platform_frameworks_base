{
  final ByteArrayOutputStream memStream=new ByteArrayOutputStream();
  try {
synchronized (this) {
      XmlSerializer out=new FastXmlSerializer();
      out.setOutput(memStream,"utf-8");
      writeConfigFileLocked(out);
    }
  }
 catch (  IOException e) {
  }
synchronized (mConfigFile) {
    FileOutputStream stream=null;
    try {
      stream=mConfigFile.startWrite();
      memStream.writeTo(stream);
      stream.flush();
      FileUtils.sync(stream);
      stream.close();
      mConfigFile.finishWrite(stream);
    }
 catch (    IOException e) {
      Slog.w(TAG,"Error writing config file",e);
      mConfigFile.failWrite(stream);
    }
  }
}
