{
  if (DEBUG)   Slog.d(TAG,"becomeInactiveIfAppropriateLocked()");
  if (((!mScreenOn && !mCharging) || mForceIdle) && mEnabled && mState == STATE_ACTIVE) {
    mState=STATE_INACTIVE;
    if (DEBUG)     Slog.d(TAG,"Moved from STATE_ACTIVE to STATE_INACTIVE");
    mNextIdlePendingDelay=0;
    mNextIdleDelay=0;
    scheduleAlarmLocked(mInactiveTimeout,false);
    EventLogTags.writeDeviceIdle(mState,"no activity");
  }
}
