{
  super.onCreate(savedInstanceState);
  if (mStorageManager == null) {
    mStorageManager=(StorageManager)getSystemService(Context.STORAGE_SERVICE);
    if (mStorageManager == null) {
      Log.w(TAG,"Failed to get StorageManager");
    }
  }
  mUIHandler=new Handler();
  HandlerThread thr=new HandlerThread("SystemUI UsbStorageActivity");
  thr.start();
  mAsyncStorageHandler=new Handler(thr.getLooper());
  requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
  setProgressBarIndeterminateVisibility(true);
  getWindow().addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD);
  if (Environment.isExternalStorageRemovable()) {
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);
  }
  setTitle(getString(com.android.internal.R.string.usb_storage_activity_title));
  setContentView(com.android.internal.R.layout.usb_storage_activity);
  mIcon=(ImageView)findViewById(com.android.internal.R.id.icon);
  mBanner=(TextView)findViewById(com.android.internal.R.id.banner);
  mMessage=(TextView)findViewById(com.android.internal.R.id.message);
  mMountButton=(Button)findViewById(com.android.internal.R.id.mount_button);
  mMountButton.setOnClickListener(this);
  mUnmountButton=(Button)findViewById(com.android.internal.R.id.unmount_button);
  mUnmountButton.setOnClickListener(this);
  mProgressBar=(ProgressBar)findViewById(com.android.internal.R.id.progress);
}
