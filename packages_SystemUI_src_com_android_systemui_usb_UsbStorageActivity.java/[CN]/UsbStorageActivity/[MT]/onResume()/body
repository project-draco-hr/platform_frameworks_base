{
  super.onResume();
  mStorageManager.registerListener(mStorageListener);
  registerReceiver(mUsbStateReceiver,new IntentFilter(UsbManager.ACTION_USB_STATE));
  try {
    mAsyncStorageHandler.post(new Runnable(){
      @Override public void run(){
        switchDisplay(mStorageManager.isUsbMassStorageEnabled());
      }
    }
);
  }
 catch (  Exception ex) {
    Log.e(TAG,"Failed to read UMS enable state",ex);
  }
}
