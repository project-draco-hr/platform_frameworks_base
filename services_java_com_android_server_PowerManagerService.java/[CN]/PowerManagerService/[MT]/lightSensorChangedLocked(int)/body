{
  if (mDebugLightSensor) {
    Log.d(TAG,"lightSensorChangedLocked " + value);
  }
  if (mHasHardwareAutoBrightness)   return;
  if (mLightSensorValue != value) {
    mLightSensorValue=value;
    if ((mPowerState & BATTERY_LOW_BIT) == 0) {
      int lcdValue=getAutoBrightnessValue(value,mLcdBacklightValues);
      int buttonValue=getAutoBrightnessValue(value,mButtonBacklightValues);
      int keyboardValue=getAutoBrightnessValue(value,mKeyboardBacklightValues);
      mLightSensorBrightness=lcdValue;
      if (mDebugLightSensor) {
        Log.d(TAG,"lcdValue " + lcdValue);
        Log.d(TAG,"buttonValue " + buttonValue);
        Log.d(TAG,"keyboardValue " + keyboardValue);
      }
      if (mScreenBrightnessOverride < 0) {
        mHardware.setLightBrightness_UNCHECKED(HardwareService.LIGHT_ID_BACKLIGHT,lcdValue);
      }
      mHardware.setLightBrightness_UNCHECKED(HardwareService.LIGHT_ID_BUTTONS,buttonValue);
      mHardware.setLightBrightness_UNCHECKED(HardwareService.LIGHT_ID_KEYBOARD,keyboardValue);
      if (ANIMATE_SCREEN_LIGHTS) {
        mScreenBrightness.curValue=lcdValue;
        mScreenBrightness.animating=false;
      }
      if (ANIMATE_BUTTON_LIGHTS) {
        mButtonBrightness.curValue=buttonValue;
        mButtonBrightness.animating=false;
      }
      if (ANIMATE_KEYBOARD_LIGHTS) {
        mKeyboardBrightness.curValue=keyboardValue;
        mKeyboardBrightness.animating=false;
      }
    }
  }
}
