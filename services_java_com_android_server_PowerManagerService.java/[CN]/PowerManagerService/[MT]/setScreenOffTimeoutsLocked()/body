{
  if ((mPokey & POKE_LOCK_SHORT_TIMEOUT) != 0) {
    mKeylightDelay=mShortKeylightDelay;
    mDimDelay=-1;
    mScreenOffDelay=0;
  }
 else   if ((mPokey & POKE_LOCK_MEDIUM_TIMEOUT) != 0) {
    mKeylightDelay=MEDIUM_KEYLIGHT_DELAY;
    mDimDelay=-1;
    mScreenOffDelay=0;
  }
 else {
    int totalDelay=mScreenOffTimeoutSetting;
    if (totalDelay > mMaximumScreenOffTimeout) {
      totalDelay=mMaximumScreenOffTimeout;
    }
    mKeylightDelay=LONG_KEYLIGHT_DELAY;
    if (totalDelay < 0) {
      mScreenOffDelay=Integer.MAX_VALUE;
    }
 else     if (mKeylightDelay < totalDelay) {
      mScreenOffDelay=totalDelay - mKeylightDelay;
    }
 else {
      mScreenOffDelay=0;
    }
    if (mDimScreen && totalDelay >= (LONG_KEYLIGHT_DELAY + LONG_DIM_TIME)) {
      mDimDelay=mScreenOffDelay - LONG_DIM_TIME;
      mScreenOffDelay=LONG_DIM_TIME;
    }
 else {
      mDimDelay=-1;
    }
  }
  if (mSpew) {
    Slog.d(TAG,"setScreenOffTimeouts mKeylightDelay=" + mKeylightDelay + " mDimDelay="+ mDimDelay+ " mScreenOffDelay="+ mScreenOffDelay+ " mDimScreen="+ mDimScreen);
  }
}
