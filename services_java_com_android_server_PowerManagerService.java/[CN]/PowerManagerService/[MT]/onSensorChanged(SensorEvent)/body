{
  long milliseconds=event.timestamp / 1000000;
synchronized (mLocks) {
    if (event.values[0] == 0.0) {
      if (mSpew) {
        Log.d(TAG,"onSensorChanged: proximity active");
      }
      goToSleepLocked(milliseconds);
      mProximitySensorActive=true;
    }
 else {
      if (mSpew) {
        Log.d(TAG,"onSensorChanged: proximity inactive");
      }
      mProximitySensorActive=false;
      boolean savedActivityAllowed=mUserActivityAllowed;
      mUserActivityAllowed=true;
      userActivity(milliseconds,false);
      mUserActivityAllowed=savedActivityAllowed;
    }
  }
}
