{
  EventLog.writeEvent(LOG_POWER_SCREEN_STATE,0,reason,mTotalTouchDownTime,mTouchCycles);
  mLastTouchDown=0;
  int err=setScreenStateLocked(false);
  if (mScreenOnStartTime != 0) {
    mScreenOnTime+=SystemClock.elapsedRealtime() - mScreenOnStartTime;
    mScreenOnStartTime=0;
  }
  if (err == 0) {
    mScreenOffReason=reason;
    sendNotificationLocked(false,reason);
  }
  return err;
}
