{
  boolean enabled=(mode == SCREEN_BRIGHTNESS_MODE_AUTOMATIC);
  if (mUseSoftwareAutoBrightness && mAutoBrightessEnabled != enabled) {
    mAutoBrightessEnabled=enabled;
    if (isScreenOn()) {
      if (mLightSensorValue >= 0) {
        int value=(int)mLightSensorValue;
        mLightSensorValue=-1;
        lightSensorChangedLocked(value);
      }
    }
  }
}
