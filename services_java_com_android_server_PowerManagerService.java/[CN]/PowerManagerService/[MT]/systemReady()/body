{
  mSensorManager=new SensorManager(mHandlerThread.getLooper());
  mProximitySensor=mSensorManager.getDefaultSensor(Sensor.TYPE_PROXIMITY);
  if (mUseSoftwareAutoBrightness) {
    mLightSensor=mSensorManager.getDefaultSensor(Sensor.TYPE_LIGHT);
    enableLightSensor(mAutoBrightessEnabled);
  }
synchronized (mLocks) {
    Log.d(TAG,"system ready!");
    mDoneBooting=true;
    long identity=Binder.clearCallingIdentity();
    try {
      mBatteryStats.noteScreenBrightness(getPreferredBrightness());
      mBatteryStats.noteScreenOn();
    }
 catch (    RemoteException e) {
    }
 finally {
      Binder.restoreCallingIdentity(identity);
    }
    userActivity(SystemClock.uptimeMillis(),false,BUTTON_EVENT,true);
    updateWakeLockLocked();
    mLocks.notifyAll();
  }
}
