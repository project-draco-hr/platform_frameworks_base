{
  int err=Power.setScreenState(on);
  if (err == 0 && !mHasHardwareAutoBrightness) {
    enableLightSensor(on && mAutoBrightessEnabled);
    if (!on) {
      mHardware.setLightBrightness_UNCHECKED(HardwareService.LIGHT_ID_BUTTONS,0);
      mHardware.setLightBrightness_UNCHECKED(HardwareService.LIGHT_ID_KEYBOARD,0);
      mLightSensorValue=-1;
    }
  }
  return err;
}
