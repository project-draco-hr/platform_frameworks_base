{
  if (mDebugLightSensor) {
    Slog.d(TAG,"enableLightSensorLocked enable=" + enable + " mAutoBrightessEnabled="+ mAutoBrightessEnabled);
  }
  if (!mAutoBrightessEnabled) {
    enable=false;
  }
  if (mSensorManager != null && mLightSensorEnabled != enable) {
    mLightSensorEnabled=enable;
    long identity=Binder.clearCallingIdentity();
    try {
      if (enable) {
        mHighestLightSensorValue=-1;
        if (mLightSensorValue >= 0) {
          int value=(int)mLightSensorValue;
          mLightSensorValue=-1;
          handleLightSensorValue(value);
        }
        mSensorManager.registerListener(mLightListener,mLightSensor,LIGHT_SENSOR_RATE);
      }
 else {
        mSensorManager.unregisterListener(mLightListener);
        mHandler.removeCallbacks(mAutoBrightnessTask);
        mLightSensorPendingDecrease=false;
        mLightSensorPendingIncrease=false;
      }
    }
  finally {
      Binder.restoreCallingIdentity(identity);
    }
  }
}
