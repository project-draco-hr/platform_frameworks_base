{
  mLightsService=lights;
  mContext=context;
  mActivityService=activity;
  mBatteryStats=BatteryStatsService.getService();
  mBatteryService=battery;
  mLcdLight=lights.getLight(LightsService.LIGHT_ID_BACKLIGHT);
  mButtonLight=lights.getLight(LightsService.LIGHT_ID_BUTTONS);
  mKeyboardLight=lights.getLight(LightsService.LIGHT_ID_KEYBOARD);
  mAttentionLight=lights.getLight(LightsService.LIGHT_ID_ATTENTION);
  mHandlerThread=new HandlerThread("PowerManagerService"){
    @Override protected void onLooperPrepared(){
      super.onLooperPrepared();
      initInThread();
    }
  }
;
  mHandlerThread.start();
synchronized (mHandlerThread) {
    while (!mInitComplete) {
      try {
        mHandlerThread.wait();
      }
 catch (      InterruptedException e) {
      }
    }
  }
  nativeInit();
synchronized (mLocks) {
    updateNativePowerStateLocked();
  }
}
