{
  mContext=context;
  mLockPatternUtils=new LockPatternUtils(context);
  mFirstCallToVold=true;
  IntentFilter filter=new IntentFilter();
  filter.addAction(Intent.ACTION_USER_ADDED);
  filter.addAction(Intent.ACTION_USER_STARTING);
  filter.addAction(Intent.ACTION_USER_REMOVED);
  filter.addAction(Intent.ACTION_USER_PRESENT);
  mContext.registerReceiverAsUser(mBroadcastReceiver,UserHandle.ALL,filter,null,null);
  mStorage=new LockSettingsStorage(context,new LockSettingsStorage.Callback(){
    @Override public void initialize(    SQLiteDatabase db){
      boolean lockScreenDisable=SystemProperties.getBoolean("ro.lockscreen.disable.default",false);
      if (lockScreenDisable) {
        mStorage.writeKeyValue(db,LockPatternUtils.DISABLE_LOCKSCREEN_KEY,"1",0);
      }
    }
  }
);
}
