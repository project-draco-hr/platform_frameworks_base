{
  checkWritePermission(userId);
  SQLiteDatabase db=mOpenHelper.getWritableDatabase();
  try {
    final UserManager um=(UserManager)mContext.getSystemService(USER_SERVICE);
    final UserInfo parentInfo=um.getProfileParent(userId);
    if (parentInfo == null) {
      File file=new File(getLockPasswordFilename(userId));
      if (file.exists()) {
        file.delete();
      }
      file=new File(getLockPatternFilename(userId));
      if (file.exists()) {
        file.delete();
      }
    }
    db.beginTransaction();
    db.delete(TABLE,COLUMN_USERID + "='" + userId+ "'",null);
    db.setTransactionSuccessful();
  }
  finally {
    db.endTransaction();
  }
  final KeyStore ks=KeyStore.getInstance();
  final int userUid=UserHandle.getUid(userId,Process.SYSTEM_UID);
  ks.resetUid(userUid);
}
