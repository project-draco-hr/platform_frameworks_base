{
  Slog.i(TAG,"Wifi display connection failed!");
  if (mDesiredDevice != null) {
    if (mConnectionRetriesLeft > 0) {
      final WifiP2pDevice oldDevice=mDesiredDevice;
      mHandler.postDelayed(new Runnable(){
        @Override public void run(){
          if (mDesiredDevice == oldDevice && mConnectionRetriesLeft > 0) {
            mConnectionRetriesLeft-=1;
            Slog.i(TAG,"Retrying Wifi display connection.  Retries left: " + mConnectionRetriesLeft);
            retryConnection();
          }
        }
      }
,timeoutOccurred ? 0 : CONNECT_RETRY_DELAY_MILLIS);
    }
 else {
      disconnect();
    }
  }
}
