{
  if (!mNotificationEnabled)   return;
  if (networkInfo == null)   return;
  NetworkInfo.State state=networkInfo.getState();
  if ((state == NetworkInfo.State.DISCONNECTED) || (state == NetworkInfo.State.UNKNOWN)) {
    if (scanResults != null) {
      int numOpenNetworks=0;
      for (int i=scanResults.size() - 1; i >= 0; i--) {
        ScanResult scanResult=scanResults.get(i);
        if (scanResult.capabilities != null && scanResult.capabilities.equals("[ESS]")) {
          numOpenNetworks++;
        }
      }
      if (numOpenNetworks > 0) {
        if (++mNumScansSinceNetworkStateChange >= NUM_SCANS_BEFORE_ACTUALLY_SCANNING) {
          setNotificationVisible(true,numOpenNetworks,false,0);
        }
        return;
      }
    }
  }
  setNotificationVisible(false,0,false,0);
}
