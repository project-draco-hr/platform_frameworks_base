{
  mContext=context;
  mTextView=textView;
  Resources res=context.getResources();
  mSlowThreshold=res.getInteger(R.integer.config_chargingSlowlyThreshold);
  mFastThreshold=res.getInteger(R.integer.config_chargingFastThreshold);
  mBatteryInfo=IBatteryStats.Stub.asInterface(ServiceManager.getService(BatteryStats.SERVICE_NAME));
  KeyguardUpdateMonitor.getInstance(context).registerCallback(mUpdateMonitor);
  context.registerReceiverAsUser(mReceiver,UserHandle.OWNER,new IntentFilter(Intent.ACTION_TIME_TICK),null,null);
}
