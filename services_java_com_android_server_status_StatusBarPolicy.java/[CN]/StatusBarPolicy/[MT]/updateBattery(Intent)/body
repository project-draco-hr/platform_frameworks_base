{
  mBatteryData.iconId=intent.getIntExtra("icon-small",0);
  mBatteryData.iconLevel=intent.getIntExtra("level",0);
  mService.updateIcon(mBatteryIcon,mBatteryData,null);
  boolean plugged=intent.getIntExtra("plugged",0) != 0;
  int level=intent.getIntExtra("level",-1);
  if (false) {
    Log.d(TAG,"updateBattery level=" + level + " plugged="+ plugged+ " mBatteryPlugged="+ mBatteryPlugged+ " mBatteryLevel="+ mBatteryLevel+ " mBatteryFirst="+ mBatteryFirst);
  }
  boolean oldPlugged=mBatteryPlugged;
  mBatteryPlugged=plugged;
  mBatteryLevel=level;
  if (mBatteryFirst) {
    mBatteryFirst=false;
  }
  if (false) {
    Log.d(TAG,"plugged=" + plugged + " oldPlugged="+ oldPlugged+ " level="+ level);
  }
}
