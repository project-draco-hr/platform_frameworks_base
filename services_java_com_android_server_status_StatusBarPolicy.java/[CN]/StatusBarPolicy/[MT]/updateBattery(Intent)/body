{
  final int id=intent.getIntExtra("icon-small",0);
  int level=intent.getIntExtra("level",0);
  mService.setIcon("battery",null,id,level);
  boolean plugged=intent.getIntExtra("plugged",0) != 0;
  level=intent.getIntExtra("level",-1);
  if (false) {
    Slog.d(TAG,"updateBattery level=" + level + " plugged="+ plugged+ " mBatteryPlugged="+ mBatteryPlugged+ " mBatteryLevel="+ mBatteryLevel+ " mBatteryFirst="+ mBatteryFirst);
  }
  boolean oldPlugged=mBatteryPlugged;
  mBatteryPlugged=plugged;
  mBatteryLevel=level;
  if (mBatteryFirst) {
    mBatteryFirst=false;
  }
  if (false) {
    Slog.d(TAG,"plugged=" + plugged + " oldPlugged="+ oldPlugged+ " level="+ level);
  }
}
