{
  int iconLevel=-1;
  int[] iconList;
  if (!hasService()) {
    if (Settings.System.getInt(mContext.getContentResolver(),Settings.System.AIRPLANE_MODE_ON,0) == 1) {
      mPhoneData.iconId=com.android.internal.R.drawable.stat_sys_signal_flightmode;
    }
 else {
      mPhoneData.iconId=com.android.internal.R.drawable.stat_sys_signal_null;
    }
    mService.updateIcon(mPhoneIcon,mPhoneData,null);
    return;
  }
  if (!isCdma()) {
    int asu=mSignalStrength.getGsmSignalStrength();
    if (asu <= 0 || asu == 99)     iconLevel=0;
 else     if (asu >= 16)     iconLevel=4;
 else     if (asu >= 8)     iconLevel=3;
 else     if (asu >= 4)     iconLevel=2;
 else     iconLevel=1;
    if (mPhone.isNetworkRoaming()) {
      iconList=sSignalImages_r;
    }
 else {
      iconList=sSignalImages;
    }
  }
 else {
    iconList=this.sSignalImages;
    if ((mPhoneState == TelephonyManager.CALL_STATE_IDLE) && isEvdo()) {
      iconLevel=getEvdoLevel();
      if (false) {
        Log.d(TAG,"use Evdo level=" + iconLevel + " to replace Cdma Level="+ getCdmaLevel());
      }
    }
 else {
      iconLevel=getCdmaLevel();
    }
  }
  mPhoneData.iconId=iconList[iconLevel];
  mService.updateIcon(mPhoneIcon,mPhoneData,null);
}
