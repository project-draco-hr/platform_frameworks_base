{
  final int N=pkgList.size();
  if (baseProcessTracker != null) {
    long now=SystemClock.uptimeMillis();
    baseProcessTracker.setState(ProcessStats.STATE_NOTHING,tracker.getMemFactorLocked(),now,pkgList);
    if (N != 1) {
      for (int i=0; i < N; i++) {
        ProcessStats.ProcessStateHolder holder=pkgList.valueAt(i);
        if (holder.state != null && holder.state != baseProcessTracker) {
          holder.state.makeInactive();
        }
      }
      pkgList.clear();
      ProcessStats.ProcessState ps=tracker.getProcessStateLocked(info.packageName,uid,info.versionCode,processName);
      ProcessStats.ProcessStateHolder holder=new ProcessStats.ProcessStateHolder(info.versionCode);
      holder.state=ps;
      pkgList.put(info.packageName,holder);
      if (ps != baseProcessTracker) {
        ps.makeActive();
      }
    }
  }
 else   if (N != 1) {
    pkgList.clear();
    pkgList.put(info.packageName,new ProcessStats.ProcessStateHolder(info.versionCode));
  }
}
