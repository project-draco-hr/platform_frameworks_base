{
  if (thread == null) {
    final ProcessStats.ProcessState origBase=baseProcessTracker;
    if (origBase != null) {
      origBase.setState(ProcessStats.STATE_NOTHING,tracker.getMemFactorLocked(),SystemClock.uptimeMillis(),pkgList);
      origBase.makeInactive();
    }
    baseProcessTracker=tracker.getProcessStateLocked(info.packageName,uid,info.versionCode,processName);
    baseProcessTracker.makeActive();
    for (int i=0; i < pkgList.size(); i++) {
      ProcessStats.ProcessStateHolder holder=pkgList.valueAt(i);
      if (holder.state != null && holder.state != origBase) {
        holder.state.makeInactive();
      }
      holder.state=tracker.getProcessStateLocked(pkgList.keyAt(i),uid,info.versionCode,processName);
      if (holder.state != baseProcessTracker) {
        holder.state.makeActive();
      }
    }
  }
  thread=_thread;
}
