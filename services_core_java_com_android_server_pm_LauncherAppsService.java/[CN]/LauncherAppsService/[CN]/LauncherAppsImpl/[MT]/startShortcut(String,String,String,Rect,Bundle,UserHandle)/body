{
  verifyCallingPackage(callingPackage);
  ensureInUserProfiles(user,"Cannot start activity for unrelated profile " + user);
  if (!isUserEnabled(user)) {
    throw new IllegalStateException("Cannot start a shortcut for disabled profile " + user);
  }
  if (!mShortcutServiceInternal.isPinnedByCaller(getCallingUserId(),callingPackage,packageName,shortcutId,user.getIdentifier())) {
    ensureShortcutPermission(callingPackage,user);
  }
  final Intent intent=mShortcutServiceInternal.createShortcutIntent(getCallingUserId(),callingPackage,packageName,shortcutId,user.getIdentifier());
  if (intent == null) {
    return false;
  }
  intent.setSourceBounds(sourceBounds);
  prepareIntentForLaunch(intent,sourceBounds);
  final long ident=Binder.clearCallingIdentity();
  try {
    mContext.startActivityAsUser(intent,startActivityOptions,user);
  }
  finally {
    Binder.restoreCallingIdentity(ident);
  }
  return true;
}
