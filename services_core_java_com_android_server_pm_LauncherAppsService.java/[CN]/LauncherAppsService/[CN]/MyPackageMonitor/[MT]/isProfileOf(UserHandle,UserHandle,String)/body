{
  if (user.getIdentifier() == listeningUser.getIdentifier()) {
    if (DEBUG)     Log.d(TAG,"Delivering msg to same user " + debugMsg);
    return true;
  }
  long ident=Binder.clearCallingIdentity();
  try {
    UserInfo userInfo=mUm.getUserInfo(user.getIdentifier());
    UserInfo listeningUserInfo=mUm.getUserInfo(listeningUser.getIdentifier());
    if (userInfo == null || listeningUserInfo == null || userInfo.profileGroupId == UserInfo.NO_PROFILE_GROUP_ID || userInfo.profileGroupId != listeningUserInfo.profileGroupId) {
      if (DEBUG) {
        Log.d(TAG,"Not delivering msg from " + user + " to "+ listeningUser+ ":"+ debugMsg);
      }
      return false;
    }
 else {
      if (DEBUG) {
        Log.d(TAG,"Delivering msg from " + user + " to "+ listeningUser+ ":"+ debugMsg);
      }
      return true;
    }
  }
  finally {
    Binder.restoreCallingIdentity(ident);
  }
}
