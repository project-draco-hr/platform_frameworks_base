{
  if (mPrimaryDisplayDevice == null) {
    return;
  }
  if (!devices.contains(mPrimaryDisplayDevice)) {
    mPrimaryDisplayDevice=null;
    return;
  }
  DisplayDeviceInfo deviceInfo=mPrimaryDisplayDevice.getDisplayDeviceInfoLocked();
  if (!Objects.equal(mPrimaryDisplayDeviceInfo,deviceInfo)) {
    mBaseDisplayInfo.layerStack=mLayerStack;
    mBaseDisplayInfo.flags=0;
    if ((deviceInfo.flags & DisplayDeviceInfo.FLAG_SUPPORTS_PROTECTED_BUFFERS) != 0) {
      mBaseDisplayInfo.flags|=Display.FLAG_SUPPORTS_PROTECTED_BUFFERS;
    }
    if ((deviceInfo.flags & DisplayDeviceInfo.FLAG_SECURE) != 0) {
      mBaseDisplayInfo.flags|=Display.FLAG_SECURE;
    }
    if ((deviceInfo.flags & DisplayDeviceInfo.FLAG_PRIVATE) != 0) {
      mBaseDisplayInfo.flags|=Display.FLAG_PRIVATE;
    }
    if ((deviceInfo.flags & DisplayDeviceInfo.FLAG_PRESENTATION) != 0) {
      mBaseDisplayInfo.flags|=Display.FLAG_PRESENTATION;
    }
    mBaseDisplayInfo.type=deviceInfo.type;
    mBaseDisplayInfo.address=deviceInfo.address;
    mBaseDisplayInfo.name=deviceInfo.name;
    mBaseDisplayInfo.uniqueId=deviceInfo.uniqueId;
    mBaseDisplayInfo.appWidth=deviceInfo.width;
    mBaseDisplayInfo.appHeight=deviceInfo.height;
    mBaseDisplayInfo.logicalWidth=deviceInfo.width;
    mBaseDisplayInfo.logicalHeight=deviceInfo.height;
    mBaseDisplayInfo.rotation=Surface.ROTATION_0;
    mBaseDisplayInfo.modeId=deviceInfo.modeId;
    mBaseDisplayInfo.defaultModeId=deviceInfo.defaultModeId;
    mBaseDisplayInfo.supportedModes=Arrays.copyOf(deviceInfo.supportedModes,deviceInfo.supportedModes.length);
    mBaseDisplayInfo.logicalDensityDpi=deviceInfo.densityDpi;
    mBaseDisplayInfo.physicalXDpi=deviceInfo.xDpi;
    mBaseDisplayInfo.physicalYDpi=deviceInfo.yDpi;
    mBaseDisplayInfo.appVsyncOffsetNanos=deviceInfo.appVsyncOffsetNanos;
    mBaseDisplayInfo.presentationDeadlineNanos=deviceInfo.presentationDeadlineNanos;
    mBaseDisplayInfo.state=deviceInfo.state;
    mBaseDisplayInfo.smallestNominalAppWidth=deviceInfo.width;
    mBaseDisplayInfo.smallestNominalAppHeight=deviceInfo.height;
    mBaseDisplayInfo.largestNominalAppWidth=deviceInfo.width;
    mBaseDisplayInfo.largestNominalAppHeight=deviceInfo.height;
    mBaseDisplayInfo.ownerUid=deviceInfo.ownerUid;
    mBaseDisplayInfo.ownerPackageName=deviceInfo.ownerPackageName;
    mPrimaryDisplayDeviceInfo=deviceInfo;
    mInfo=null;
  }
}
