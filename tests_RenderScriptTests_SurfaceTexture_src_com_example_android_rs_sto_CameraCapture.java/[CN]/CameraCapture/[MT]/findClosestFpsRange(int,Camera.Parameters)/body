{
  List<int[]> supportedFpsRanges=params.getSupportedPreviewFpsRange();
  int[] closestRange=supportedFpsRanges.get(0);
  int fpsk=fps * 1000;
  int minDiff=1000000;
  for (  int[] range : supportedFpsRanges) {
    int low=range[Camera.Parameters.PREVIEW_FPS_MIN_INDEX];
    int high=range[Camera.Parameters.PREVIEW_FPS_MAX_INDEX];
    if (low <= fpsk && high >= fpsk) {
      int diff=(fpsk - low) + (high - fpsk);
      if (diff < minDiff) {
        closestRange=range;
        minDiff=diff;
      }
    }
  }
  Log.i("CC","Found closest range: " + closestRange[Camera.Parameters.PREVIEW_FPS_MIN_INDEX] + " - "+ closestRange[Camera.Parameters.PREVIEW_FPS_MAX_INDEX]);
  return closestRange;
}
