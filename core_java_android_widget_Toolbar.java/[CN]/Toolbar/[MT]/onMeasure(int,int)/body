{
  int width=0;
  int height=0;
  int childState=0;
  if (shouldLayout(mNavButtonView)) {
    measureChildWithMargins(mNavButtonView,widthMeasureSpec,width,heightMeasureSpec,0);
    width+=mNavButtonView.getMeasuredWidth() + getHorizontalMargins(mNavButtonView);
    height=Math.max(height,mNavButtonView.getMeasuredHeight() + getVerticalMargins(mNavButtonView));
    childState=combineMeasuredStates(childState,mNavButtonView.getMeasuredState());
  }
  if (shouldLayout(mMenuView)) {
    measureChildWithMargins(mMenuView,widthMeasureSpec,width,heightMeasureSpec,0);
    width+=mMenuView.getMeasuredWidth() + getHorizontalMargins(mMenuView);
    height=Math.max(height,mMenuView.getMeasuredHeight() + getVerticalMargins(mMenuView));
    childState=combineMeasuredStates(childState,mMenuView.getMeasuredState());
  }
  if (shouldLayout(mLogoView)) {
    measureChildWithMargins(mLogoView,widthMeasureSpec,width,heightMeasureSpec,0);
    width+=mLogoView.getMeasuredWidth() + getHorizontalMargins(mLogoView);
    height=Math.max(height,mLogoView.getMeasuredHeight() + getVerticalMargins(mLogoView));
    childState=combineMeasuredStates(childState,mLogoView.getMeasuredState());
  }
  int titleWidth=0;
  int titleHeight=0;
  final int titleVertMargins=mTitleMarginTop + mTitleMarginBottom;
  final int titleHorizMargins=mTitleMarginStart + mTitleMarginEnd;
  if (shouldLayout(mTitleTextView)) {
    measureChildWithMargins(mTitleTextView,widthMeasureSpec,width + titleHorizMargins,heightMeasureSpec,titleVertMargins);
    titleWidth=mTitleTextView.getMeasuredWidth() + getHorizontalMargins(mTitleTextView);
    titleHeight=mTitleTextView.getMeasuredHeight() + getVerticalMargins(mTitleTextView);
    childState=combineMeasuredStates(childState,mTitleTextView.getMeasuredState());
  }
  if (shouldLayout(mSubtitleTextView)) {
    measureChildWithMargins(mSubtitleTextView,widthMeasureSpec,width + titleHorizMargins,heightMeasureSpec,titleHeight + titleVertMargins);
    titleWidth=Math.max(titleWidth,mSubtitleTextView.getMeasuredWidth() + getHorizontalMargins(mSubtitleTextView));
    titleHeight+=mSubtitleTextView.getMeasuredHeight() + getVerticalMargins(mSubtitleTextView);
    childState=combineMeasuredStates(childState,mSubtitleTextView.getMeasuredState());
  }
  width+=titleWidth;
  height=Math.max(height,titleHeight);
  final int childCount=getChildCount();
  for (int i=0; i < childCount; i++) {
    final View child=getChildAt(i);
    final LayoutParams lp=(LayoutParams)child.getLayoutParams();
    if (lp.mViewType == LayoutParams.SYSTEM || !shouldLayout(child)) {
      continue;
    }
    measureChildWithMargins(child,widthMeasureSpec,width,heightMeasureSpec,0);
    width+=child.getMeasuredWidth() + getHorizontalMargins(child);
    height=Math.max(height,child.getMeasuredHeight() + getVerticalMargins(child));
    childState=combineMeasuredStates(childState,child.getMeasuredState());
  }
  width+=getPaddingLeft() + getPaddingRight();
  height+=getPaddingTop() + getPaddingBottom();
  final int measuredWidth=resolveSizeAndState(Math.max(width,getSuggestedMinimumWidth()),widthMeasureSpec,childState & MEASURED_STATE_MASK);
  final int measuredHeight=resolveSizeAndState(Math.max(height,getSuggestedMinimumHeight()),heightMeasureSpec,childState << MEASURED_HEIGHT_STATE_SHIFT);
  setMeasuredDimension(measuredWidth,measuredHeight);
}
