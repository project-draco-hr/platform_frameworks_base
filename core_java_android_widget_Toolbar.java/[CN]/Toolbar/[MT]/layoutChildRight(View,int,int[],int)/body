{
  final LayoutParams lp=(LayoutParams)child.getLayoutParams();
  final int r=lp.rightMargin - collapsingMargins[1];
  right-=Math.max(0,r);
  collapsingMargins[1]=Math.max(0,-r);
  final int top=getChildTop(child,alignmentHeight);
  final int childWidth=child.getMeasuredWidth();
  child.layout(right - childWidth,top,right,top + child.getMeasuredHeight());
  right-=childWidth + lp.leftMargin;
  return right;
}
