{
  DataInputStream in=null;
  try {
    WifiConfiguration config=new WifiConfiguration();
    in=new DataInputStream(new BufferedInputStream(new FileInputStream(AP_CONFIG_FILE)));
    int version=in.readInt();
    if (version != 1) {
      Log.e(TAG,"Bad version on hotspot configuration file, set defaults");
      setDefaultApConfiguration();
      return;
    }
    config.SSID=in.readUTF();
    int authType=in.readInt();
    config.allowedKeyManagement.set(authType);
    if (authType != KeyMgmt.NONE) {
      config.preSharedKey=in.readUTF();
    }
synchronized (sApConfigLock) {
      sApConfig=config;
    }
  }
 catch (  IOException ignore) {
    setDefaultApConfiguration();
  }
 finally {
    if (in != null) {
      try {
        in.close();
      }
 catch (      IOException e) {
      }
    }
  }
}
