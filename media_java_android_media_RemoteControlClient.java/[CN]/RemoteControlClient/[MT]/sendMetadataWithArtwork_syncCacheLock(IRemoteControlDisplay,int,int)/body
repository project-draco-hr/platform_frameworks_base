{
  if (mCurrentClientGenId == mInternalClientGenId) {
    if (target != null) {
      try {
        if ((w > 0) && (h > 0)) {
          Bitmap artwork=scaleBitmapIfTooBig(mOriginalArtwork,w,h);
          target.setAllMetadata(mInternalClientGenId,mMetadata,artwork);
        }
 else {
          target.setMetadata(mInternalClientGenId,mMetadata);
        }
      }
 catch (      RemoteException e) {
        Log.e(TAG,"Error in set(All)Metadata() for dead display " + target,e);
      }
      return;
    }
    final Iterator<DisplayInfoForClient> displayIterator=mRcDisplays.iterator();
    while (displayIterator.hasNext()) {
      final DisplayInfoForClient di=(DisplayInfoForClient)displayIterator.next();
      try {
        if (di.mEnabled) {
          if ((di.mArtworkExpectedWidth > 0) && (di.mArtworkExpectedHeight > 0)) {
            Bitmap artwork=scaleBitmapIfTooBig(mOriginalArtwork,di.mArtworkExpectedWidth,di.mArtworkExpectedHeight);
            di.mRcDisplay.setAllMetadata(mInternalClientGenId,mMetadata,artwork);
          }
 else {
            di.mRcDisplay.setMetadata(mInternalClientGenId,mMetadata);
          }
        }
      }
 catch (      RemoteException e) {
        Log.e(TAG,"Error when setting metadata, dead display " + di.mRcDisplay,e);
        displayIterator.remove();
      }
    }
  }
}
