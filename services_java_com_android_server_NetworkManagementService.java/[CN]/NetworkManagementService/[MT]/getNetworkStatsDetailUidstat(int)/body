{
  final String[] knownUids;
  if (limitUid == UID_ALL) {
    knownUids=STATS_UIDSTAT.list();
  }
 else {
    knownUids=new String[]{String.valueOf(limitUid)};
  }
  final NetworkStats stats=new NetworkStats(SystemClock.elapsedRealtime(),knownUids.length);
  for (  String uid : knownUids) {
    final int uidInt=Integer.parseInt(uid);
    final File uidPath=new File(STATS_UIDSTAT,uid);
    final long rx=readSingleLongFromFile(new File(uidPath,"tcp_rcv"));
    final long tx=readSingleLongFromFile(new File(uidPath,"tcp_snd"));
    stats.addEntry(IFACE_ALL,uidInt,TAG_NONE,rx,tx);
  }
  return stats;
}
