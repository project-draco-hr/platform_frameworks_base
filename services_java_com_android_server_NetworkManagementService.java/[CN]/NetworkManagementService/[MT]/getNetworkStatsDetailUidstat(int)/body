{
  final String[] knownUids;
  if (limitUid == UID_ALL) {
    knownUids=fileListWithoutNull(mStatsUid);
  }
 else {
    knownUids=new String[]{String.valueOf(limitUid)};
  }
  final NetworkStats stats=new NetworkStats(SystemClock.elapsedRealtime(),knownUids.length);
  final NetworkStats.Entry entry=new NetworkStats.Entry();
  for (  String uid : knownUids) {
    final int uidInt=Integer.parseInt(uid);
    final File uidPath=new File(mStatsUid,uid);
    entry.iface=IFACE_ALL;
    entry.uid=uidInt;
    entry.tag=TAG_NONE;
    entry.rxBytes=readSingleLongFromFile(new File(uidPath,"tcp_rcv"));
    entry.rxPackets=readSingleLongFromFile(new File(uidPath,"tcp_rcv_pkt"));
    entry.txBytes=readSingleLongFromFile(new File(uidPath,"tcp_snd"));
    entry.txPackets=readSingleLongFromFile(new File(uidPath,"tcp_snd_pkt"));
    stats.addValues(entry);
  }
  return stats;
}
