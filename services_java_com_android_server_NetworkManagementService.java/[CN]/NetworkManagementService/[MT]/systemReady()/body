{
  final boolean hasKernelSupport=new File("/proc/net/xt_qtaguid/ctrl").exists();
  final boolean shouldEnable=Settings.Secure.getInt(mContext.getContentResolver(),NETSTATS_ENABLED,0) != 0;
  mBandwidthControlEnabled=false;
  if (hasKernelSupport && shouldEnable) {
    Slog.d(TAG,"enabling bandwidth control");
    try {
      mConnector.doCommand("bandwidth enable");
      mBandwidthControlEnabled=true;
    }
 catch (    NativeDaemonConnectorException e) {
      Slog.e(TAG,"problem enabling bandwidth controls",e);
    }
  }
 else {
    Slog.d(TAG,"not enabling bandwidth control");
  }
  SystemProperties.set(PROP_QTAGUID_ENABLED,mBandwidthControlEnabled ? "1" : "0");
}
