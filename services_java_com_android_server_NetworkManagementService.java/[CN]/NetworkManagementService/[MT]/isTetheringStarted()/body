{
  mContext.enforceCallingOrSelfPermission(android.Manifest.permission.ACCESS_NETWORK_STATE,"NetworkManagementService");
  ArrayList<String> rsp;
  try {
    rsp=mConnector.doCommand("tether status");
  }
 catch (  NativeDaemonConnectorException e) {
    throw new IllegalStateException("Unable to communicate to native daemon to get tether status");
  }
  for (  String line : rsp) {
    String[] tok=line.split(" ");
    if (tok.length < 3) {
      throw new IllegalStateException("Malformed response for tether status: " + line);
    }
    int code=Integer.parseInt(tok[0]);
    if (code == NetdResponseCode.TetherStatusResult) {
      return "started".equals(tok[2]);
    }
 else {
      throw new IllegalStateException(String.format("Unexpected response code %d",code));
    }
  }
  throw new IllegalStateException("Got an empty response");
}
