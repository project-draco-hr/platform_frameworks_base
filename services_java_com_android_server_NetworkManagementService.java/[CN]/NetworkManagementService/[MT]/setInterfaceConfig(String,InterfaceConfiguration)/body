{
  LinkAddress linkAddr=cfg.addr;
  if (linkAddr == null)   throw new IllegalStateException("Null LinkAddress given");
  InetAddress addr=linkAddr.getAddress();
  InetAddress mask=null;
  try {
    mask=NetworkUtils.intToInetAddress(NetworkUtils.prefixLengthToNetmaskInt(linkAddr.getNetworkPrefixLength()));
  }
 catch (  IllegalArgumentException e) {
    throw new IllegalStateException(e);
  }
  if (addr == null || mask == null)   throw new IllegalStateException("Null Address given");
  String cmd=String.format("interface setcfg %s %s %s %s",iface,addr.getHostAddress(),mask.getHostAddress(),cfg.interfaceFlags);
  try {
    mConnector.doCommand(cmd);
  }
 catch (  NativeDaemonConnectorException e) {
    throw new IllegalStateException("Unable to communicate with native daemon to interface setcfg - " + e);
  }
}
