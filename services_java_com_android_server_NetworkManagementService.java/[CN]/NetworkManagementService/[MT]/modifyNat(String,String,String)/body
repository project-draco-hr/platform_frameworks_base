{
  cmd=String.format("nat %s %s %s",cmd,internalInterface,externalInterface);
  NetworkInterface internalNetworkInterface=NetworkInterface.getByName(internalInterface);
  if (internalNetworkInterface == null) {
    cmd+=" 0";
  }
 else {
    Collection<InterfaceAddress> interfaceAddresses=internalNetworkInterface.getInterfaceAddresses();
    cmd+=" " + interfaceAddresses.size();
    for (    InterfaceAddress ia : interfaceAddresses) {
      InetAddress addr=NetworkUtils.getNetworkPart(ia.getAddress(),ia.getNetworkPrefixLength());
      cmd=cmd + " " + addr.getHostAddress()+ "/"+ ia.getNetworkPrefixLength();
    }
  }
  try {
    mConnector.doCommand(cmd);
  }
 catch (  NativeDaemonConnectorException e) {
    e.rethrowAsParcelableException();
  }
}
