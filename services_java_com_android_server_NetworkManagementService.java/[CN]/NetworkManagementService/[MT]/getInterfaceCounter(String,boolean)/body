{
  mContext.enforceCallingOrSelfPermission(ACCESS_NETWORK_STATE,TAG);
  try {
    String rsp;
    try {
      rsp=mConnector.doCommand(String.format("interface read%scounter %s",(rx ? "rx" : "tx"),iface)).get(0);
    }
 catch (    NativeDaemonConnectorException e1) {
      Slog.e(TAG,"Error communicating with native daemon",e1);
      return -1;
    }
    String[] tok=rsp.split(" ");
    if (tok.length < 2) {
      Slog.e(TAG,String.format("Malformed response for reading %s interface",(rx ? "rx" : "tx")));
      return -1;
    }
    int code;
    try {
      code=Integer.parseInt(tok[0]);
    }
 catch (    NumberFormatException nfe) {
      Slog.e(TAG,String.format("Error parsing code %s",tok[0]));
      return -1;
    }
    if ((rx && code != NetdResponseCode.InterfaceRxCounterResult) || (!rx && code != NetdResponseCode.InterfaceTxCounterResult)) {
      Slog.e(TAG,String.format("Unexpected response code %d",code));
      return -1;
    }
    return Long.parseLong(tok[1]);
  }
 catch (  Exception e) {
    Slog.e(TAG,String.format("Failed to read interface %s counters",(rx ? "rx" : "tx")),e);
  }
  return -1;
}
