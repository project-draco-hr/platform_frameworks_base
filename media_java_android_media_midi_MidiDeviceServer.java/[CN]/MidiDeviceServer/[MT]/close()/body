{
synchronized (mGuard) {
    if (mIsClosed)     return;
    mGuard.close();
    for (int i=0; i < mInputPortCount; i++) {
      MidiOutputPort outputPort=mInputPortOutputPorts[i];
      if (outputPort != null) {
        IoUtils.closeQuietly(outputPort);
        mInputPortOutputPorts[i]=null;
      }
    }
    for (    MidiInputPort inputPort : mInputPorts) {
      IoUtils.closeQuietly(inputPort);
    }
    mInputPorts.clear();
    try {
      mMidiManager.unregisterDeviceServer(mServer);
    }
 catch (    RemoteException e) {
      Log.e(TAG,"RemoteException in unregisterDeviceServer");
    }
    mIsClosed=true;
  }
}
