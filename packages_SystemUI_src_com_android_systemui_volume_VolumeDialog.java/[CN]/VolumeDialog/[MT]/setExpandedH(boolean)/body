{
  if (mExpanded == expanded)   return;
  mExpanded=expanded;
  mExpandButtonAnimationRunning=isAttached();
  if (D.BUG)   Log.d(TAG,"setExpandedH " + expanded);
  if (!mExpanded && mExpandButtonAnimationRunning) {
    prepareForCollapse();
  }
  updateRowsH();
  if (mExpandButtonAnimationRunning) {
    final Drawable d=mExpandButton.getDrawable();
    if (d instanceof AnimatedVectorDrawable) {
      final AnimatedVectorDrawable avd=(AnimatedVectorDrawable)d.getConstantState().newDrawable();
      mExpandButton.setImageDrawable(avd);
      avd.start();
      mHandler.postDelayed(new Runnable(){
        @Override public void run(){
          mExpandButtonAnimationRunning=false;
          updateExpandButtonH();
          rescheduleTimeoutH();
        }
      }
,mExpandButtonAnimationDuration);
    }
  }
  rescheduleTimeoutH();
}
