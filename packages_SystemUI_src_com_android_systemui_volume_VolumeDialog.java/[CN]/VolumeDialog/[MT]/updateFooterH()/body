{
  if (D.BUG)   Log.d(TAG,"updateFooterH");
  final boolean wasVisible=mZenFooter.getVisibility() == View.VISIBLE;
  final boolean visible=mState.zenMode != Global.ZEN_MODE_OFF && (mAudioManager.isStreamAffectedByRingerMode(mActiveStream) || mExpanded) && !mShowFullZen;
  if (wasVisible != visible && !visible) {
    prepareForCollapse();
  }
  Util.setVisOrGone(mZenFooter,visible);
  mZenFooter.update();
  final boolean fullWasVisible=mZenPanel.getVisibility() == View.VISIBLE;
  final boolean fullVisible=mShowFullZen && (mState.zenMode != Global.ZEN_MODE_OFF || mExpanded);
  if (fullWasVisible != fullVisible && !fullVisible) {
    prepareForCollapse();
  }
  Util.setVisOrGone(mZenPanel,fullVisible);
}
