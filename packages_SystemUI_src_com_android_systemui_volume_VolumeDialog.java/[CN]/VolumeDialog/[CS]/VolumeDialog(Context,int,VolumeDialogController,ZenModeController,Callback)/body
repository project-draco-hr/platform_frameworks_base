{
  mContext=context;
  mController=controller;
  mCallback=callback;
  mWindowType=windowType;
  mZenModeController=zenModeController;
  mSpTexts=new SpTexts(mContext);
  mKeyguard=(KeyguardManager)context.getSystemService(Context.KEYGUARD_SERVICE);
  mAudioManager=(AudioManager)context.getSystemService(Context.AUDIO_SERVICE);
  mAccessibilityMgr=(AccessibilityManager)mContext.getSystemService(Context.ACCESSIBILITY_SERVICE);
  mActiveSliderTint=loadColorStateList(R.color.system_accent_color);
  mInactiveSliderTint=loadColorStateList(R.color.volume_slider_inactive);
  mLayoutTransition=new LayoutTransition();
  mLayoutTransition.setDuration(new ValueAnimator().getDuration() / 2);
  initDialog();
  mAccessibility.init();
  controller.addCallback(mControllerCallbackH,mHandler);
  controller.getState();
  TunerService.get(mContext).addTunable(this,SHOW_FULL_ZEN);
  final Configuration currentConfig=mContext.getResources().getConfiguration();
  mDensity=currentConfig.densityDpi;
}
