{
  List<String> fileList=getUsageStatsFileListFLOCK();
  if (fileList == null) {
    return;
  }
  final boolean isCheckinRequest=scanArgs(args,"-c");
  Collections.sort(fileList);
  File usageFile=new File(mFilePrefix);
  String dirName=usageFile.getParent();
  File dir=new File(dirName);
  String filePrefix=usageFile.getName();
  int prefixLen=filePrefix.length() + 1;
  String todayStr=getCurrentDateStr(null);
  for (  String file : fileList) {
    File dFile=new File(dir,file);
    String dateStr=file.substring(prefixLen);
    try {
      Parcel in=getParcelForFile(dFile);
      collectDumpInfoFromParcelFLOCK(in,pw,dateStr,isCheckinRequest);
      if (isCheckinRequest && !todayStr.equalsIgnoreCase(dateStr)) {
        dFile.delete();
      }
    }
 catch (    FileNotFoundException e) {
      Log.w(TAG,"Failed with " + e + " when collecting dump info from file : "+ file);
      return;
    }
catch (    IOException e) {
      Log.w(TAG,"Failed with " + e + " when collecting dump info from file : "+ file);
    }
  }
}
