{
  mStats=new HashMap<String,PkgUsageStatsExtended>();
  mStatsLock=new Object();
  mFileLock=new Object();
  mDir=new File(dir);
  mCal=Calendar.getInstance(TimeZone.getTimeZone("GMT+0"));
  mDir.mkdir();
  File parentDir=mDir.getParentFile();
  String fList[]=parentDir.list();
  if (fList != null) {
    String prefix=mDir.getName() + ".";
    int i=fList.length;
    while (i > 0) {
      i--;
      if (fList[i].startsWith(prefix)) {
        Log.i(TAG,"Deleting old usage file: " + fList[i]);
        (new File(parentDir,fList[i])).delete();
      }
    }
  }
  mFileLeaf=getCurrentDateStr(FILE_PREFIX);
  mFile=new File(mDir,mFileLeaf);
  readStatsFromFile();
  mLastWriteElapsedTime=SystemClock.elapsedRealtime();
  mLastWriteDay=mCal.get(Calendar.DAY_OF_YEAR);
}
