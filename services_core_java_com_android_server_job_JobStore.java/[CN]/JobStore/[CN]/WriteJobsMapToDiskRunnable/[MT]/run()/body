{
  final long startElapsed=SystemClock.elapsedRealtime();
  List<JobStatus> mStoreCopy=new ArrayList<JobStatus>();
synchronized (mLock) {
    for (int i=0; i < mJobSet.size(); i++) {
      JobStatus jobStatus=mJobSet.valueAt(i);
      if (!jobStatus.isPersisted()) {
        continue;
      }
      JobStatus copy=new JobStatus(jobStatus);
      mStoreCopy.add(copy);
    }
  }
  writeJobsMapImpl(mStoreCopy);
  if (JobSchedulerService.DEBUG) {
    Slog.v(TAG,"Finished writing, took " + (SystemClock.elapsedRealtime() - startElapsed) + "ms");
  }
}
