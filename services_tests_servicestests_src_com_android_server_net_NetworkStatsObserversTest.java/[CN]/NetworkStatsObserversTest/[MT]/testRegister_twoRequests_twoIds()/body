{
  NetworkTemplate[] templates=new NetworkTemplate[]{sTemplateWifi};
  DataUsageRequest inputRequest=new DataUsageRequest(DataUsageRequest.REQUEST_ID_UNSET,templates,NO_UIDS,THRESHOLD_BYTES);
  DataUsageRequest request1=mStatsObservers.register(inputRequest,mMessenger,mockBinder,Process.SYSTEM_UID,NetworkStatsAccess.Level.DEVICE);
  assertTrue(request1.requestId > 0);
  assertTrue(Arrays.deepEquals(templates,request1.templates));
  assertNull(request1.uids);
  assertEquals(THRESHOLD_BYTES,request1.thresholdInBytes);
  DataUsageRequest request2=mStatsObservers.register(inputRequest,mMessenger,mockBinder,Process.SYSTEM_UID,NetworkStatsAccess.Level.DEVICE);
  assertTrue(request2.requestId > request1.requestId);
  assertTrue(Arrays.deepEquals(templates,request2.templates));
  assertNull(request2.uids);
  assertEquals(THRESHOLD_BYTES,request2.thresholdInBytes);
}
