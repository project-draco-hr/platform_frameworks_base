{
  PrintService.throwIfNotCalledOnMainThread();
  if (mIsDestroyed) {
    Log.w(LOG_TAG,"Not adding printers - session destroyed.");
    return;
  }
  if (mIsDiscoveryStarted) {
    List<PrinterInfo> addedPrinters=null;
    final int addedPrinterCount=printers.size();
    for (int i=0; i < addedPrinterCount; i++) {
      PrinterInfo addedPrinter=printers.get(i);
      PrinterInfo oldPrinter=mPrinters.put(addedPrinter.getId(),addedPrinter);
      if (oldPrinter == null || !oldPrinter.equals(addedPrinter)) {
        if (addedPrinters == null) {
          addedPrinters=new ArrayList<PrinterInfo>();
        }
        addedPrinters.add(addedPrinter);
      }
    }
    if (addedPrinters != null) {
      try {
        mObserver.onPrintersAdded(new ParceledListSlice<PrinterInfo>(addedPrinters));
      }
 catch (      RemoteException re) {
        Log.e(LOG_TAG,"Error sending added printers",re);
      }
    }
  }
 else {
    if (mLastSentPrinters == null) {
      mLastSentPrinters=new ArrayMap<PrinterId,PrinterInfo>(mPrinters);
    }
    final int addedPrinterCount=printers.size();
    for (int i=0; i < addedPrinterCount; i++) {
      PrinterInfo addedPrinter=printers.get(i);
      if (mPrinters.get(addedPrinter.getId()) == null) {
        mPrinters.put(addedPrinter.getId(),addedPrinter);
      }
    }
  }
}
