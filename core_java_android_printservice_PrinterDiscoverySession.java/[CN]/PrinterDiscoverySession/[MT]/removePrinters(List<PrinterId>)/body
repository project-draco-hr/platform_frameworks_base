{
  PrintService.throwIfNotCalledOnMainThread();
  if (mIsDestroyed) {
    Log.w(LOG_TAG,"Not removing printers - session destroyed.");
    return;
  }
  if (mIsDiscoveryStarted) {
    List<PrinterId> removedPrinterIds=new ArrayList<PrinterId>();
    final int removedPrinterIdCount=printerIds.size();
    for (int i=0; i < removedPrinterIdCount; i++) {
      PrinterId removedPrinterId=printerIds.get(i);
      if (mPrinters.remove(removedPrinterId) != null) {
        removedPrinterIds.add(removedPrinterId);
      }
    }
    if (!removedPrinterIds.isEmpty()) {
      sendRemovedPrinters(mObserver,removedPrinterIds);
    }
  }
 else {
    if (mLastSentPrinters == null) {
      mLastSentPrinters=new ArrayMap<PrinterId,PrinterInfo>(mPrinters);
    }
    final int removedPrinterIdCount=printerIds.size();
    for (int i=0; i < removedPrinterIdCount; i++) {
      PrinterId removedPrinterId=printerIds.get(i);
      mPrinters.remove(removedPrinterId);
    }
  }
}
