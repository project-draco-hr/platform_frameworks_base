{
  if (mStatusBar.getBarState() == StatusBarState.KEYGUARD || mStatusBar.getBarState() == StatusBarState.SHADE_LOCKED) {
    boolean hidden=mNotificationStackScroller.getNotificationsTopY() <= mHeader.getBottom() + mNotificationsHeaderCollideDistance;
    if (hidden && !mHeaderHidden) {
      mHeader.animate().alpha(0f).withLayer().translationY(-mHeader.getHeight() / 2).setInterpolator(mFastOutLinearInterpolator).setDuration(200);
    }
 else     if (!hidden && mHeaderHidden) {
      mHeader.animate().alpha(1f).withLayer().translationY(0).setInterpolator(mLinearOutSlowInInterpolator).setDuration(200);
    }
    mHeaderHidden=hidden;
  }
 else {
    mHeader.animate().cancel();
    mHeader.setAlpha(1f);
    mHeader.setTranslationY(0f);
    if (mHeader.getLayerType() != LAYER_TYPE_NONE) {
      mHeader.setLayerType(LAYER_TYPE_NONE,null);
    }
    mHeaderHidden=false;
  }
}
