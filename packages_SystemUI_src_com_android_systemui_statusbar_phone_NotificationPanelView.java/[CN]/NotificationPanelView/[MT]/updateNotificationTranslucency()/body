{
  float alpha=(getNotificationsTopY() + mNotificationStackScroller.getItemHeight()) / (mQsMinExpansionHeight + mNotificationStackScroller.getBottomStackPeekSize() - mNotificationStackScroller.getCollapseSecondCardPadding());
  alpha=Math.max(0,Math.min(alpha,1));
  alpha=(float)Math.pow(alpha,0.75);
  if (alpha != 1f && mNotificationStackScroller.getLayerType() != LAYER_TYPE_HARDWARE) {
    mNotificationStackScroller.setLayerType(LAYER_TYPE_HARDWARE,null);
  }
 else   if (alpha == 1f && mNotificationStackScroller.getLayerType() == LAYER_TYPE_HARDWARE) {
    mNotificationStackScroller.setLayerType(LAYER_TYPE_NONE,null);
  }
  mNotificationStackScroller.setAlpha(alpha);
}
