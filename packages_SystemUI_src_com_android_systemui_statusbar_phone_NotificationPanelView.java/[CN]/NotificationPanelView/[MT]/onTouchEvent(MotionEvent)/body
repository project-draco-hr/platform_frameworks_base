{
  if (mBlockTouches) {
    return false;
  }
  resetDownStates(event);
  if ((!mIsExpanding || mHintAnimationRunning) && !mQsExpanded && mStatusBar.getBarState() != StatusBarState.SHADE) {
    mAfforanceHelper.onTouchEvent(event);
  }
  if (mOnlyAffordanceInThisMotion) {
    return true;
  }
  if (event.getActionMasked() == MotionEvent.ACTION_DOWN && getExpandedFraction() == 1f && mStatusBar.getBarState() != StatusBarState.KEYGUARD) {
    mQsTracking=true;
    mConflictingQsExpansionGesture=true;
    onQsExpansionStarted();
    mInitialHeightOnTouch=mQsExpansionHeight;
    mInitialTouchY=event.getX();
    mInitialTouchX=event.getY();
  }
  if (mExpandedHeight != 0) {
    handleQsDown(event);
  }
  if (!mTwoFingerQsExpand && (mQsTracking || mQsExpanded)) {
    onQsTouch(event);
    if (!mConflictingQsExpansionGesture) {
      return true;
    }
  }
  if (event.getActionMasked() == MotionEvent.ACTION_CANCEL || event.getActionMasked() == MotionEvent.ACTION_UP) {
    mConflictingQsExpansionGesture=false;
  }
  if (event.getActionMasked() == MotionEvent.ACTION_DOWN && mExpandedHeight == 0) {
    mTwoFingerQsExpandPossible=true;
  }
  if (mTwoFingerQsExpandPossible && event.getActionMasked() == MotionEvent.ACTION_POINTER_DOWN && event.getPointerCount() == 2 && event.getY(event.getActionIndex()) < mStatusBarMinHeight) {
    mTwoFingerQsExpand=true;
    requestPanelHeightUpdate();
  }
  super.onTouchEvent(event);
  return true;
}
