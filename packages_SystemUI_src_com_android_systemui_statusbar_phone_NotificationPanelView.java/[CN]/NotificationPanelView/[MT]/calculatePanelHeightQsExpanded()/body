{
  float notificationHeight=mNotificationStackScroller.getHeight() - mNotificationStackScroller.getEmptyBottomMargin() - mNotificationStackScroller.getTopPadding();
  float totalHeight=mQsMaxExpansionHeight + notificationHeight + mNotificationStackScroller.getNotificationTopPadding();
  if (totalHeight > mNotificationStackScroller.getHeight()) {
    float fullyCollapsedHeight=mQsMaxExpansionHeight + mNotificationStackScroller.getMinStackHeight() + mNotificationStackScroller.getNotificationTopPadding() - getScrollViewScrollY();
    totalHeight=Math.max(fullyCollapsedHeight,mNotificationStackScroller.getHeight());
  }
  return (int)totalHeight;
}
