{
  super.onLayout(changed,left,top,right,bottom);
  int keyguardBottomMargin=((MarginLayoutParams)mKeyguardStatusView.getLayoutParams()).bottomMargin;
  if (!mQsExpanded) {
    mStackScrollerIntrinsicPadding=mStatusBar.getBarState() == StatusBarState.KEYGUARD ? mKeyguardStatusView.getBottom() + keyguardBottomMargin : mHeader.getBottom() + mNotificationTopPadding;
    mNotificationStackScroller.setTopPadding(mStackScrollerIntrinsicPadding,mAnimateNextTopPaddingChange);
    mAnimateNextTopPaddingChange=false;
  }
  mQsMinExpansionHeight=mHeader.getCollapsedHeight();
  mQsMaxExpansionHeight=mHeader.getExpandedHeight() + mQsContainer.getHeight();
  if (mQsExpansionHeight == 0) {
    mQsExpansionHeight=mQsMinExpansionHeight;
  }
}
