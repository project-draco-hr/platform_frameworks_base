{
  boolean expandVisually=mQsExpanded || mStackScrollerOverscrolling || mHeaderAnimating;
  mHeader.setVisibility((mQsExpanded || !mKeyguardShowing || mHeaderAnimating) ? View.VISIBLE : View.INVISIBLE);
  mHeader.setExpanded((mKeyguardShowing && !mHeaderAnimating) || (mQsExpanded && !mStackScrollerOverscrolling));
  mNotificationStackScroller.setScrollingEnabled(mStatusBarState != StatusBarState.KEYGUARD && (!mQsExpanded || mQsExpansionFromOverscroll));
  mQsPanel.setVisibility(expandVisually ? View.VISIBLE : View.INVISIBLE);
  mQsContainer.setVisibility(mKeyguardShowing && !expandVisually ? View.INVISIBLE : View.VISIBLE);
  mScrollView.setTouchEnabled(mQsExpanded);
  updateEmptyShadeView();
  mQsNavbarScrim.setVisibility(mStatusBarState == StatusBarState.SHADE && mQsExpanded && !mStackScrollerOverscrolling && mQsScrimEnabled ? View.VISIBLE : View.INVISIBLE);
  if (mKeyguardUserSwitcher != null && mQsExpanded && !mStackScrollerOverscrolling) {
    mKeyguardUserSwitcher.hideIfNotSimple(true);
  }
}
