{
  super.onExpandingFinished();
  mNotificationStackScroller.onExpansionStopped();
  mHeadsUpManager.onExpandingFinished();
  mIsExpanding=false;
  mScrollYOverride=-1;
  if (isFullyCollapsed()) {
    DejankUtils.postAfterTraversal(new Runnable(){
      @Override public void run(){
        setListening(false);
      }
    }
);
    postOnAnimation(new Runnable(){
      @Override public void run(){
        getParent().invalidateChild(NotificationPanelView.this,mDummyDirtyRect);
      }
    }
);
  }
 else {
    setListening(true);
  }
  mQsExpandImmediate=false;
  mTwoFingerQsExpandPossible=false;
  mIsExpansionFromHeadsUp=false;
  mNotificationStackScroller.setTrackingHeadsUp(false);
  mExpandingFromHeadsUp=false;
  setPanelScrimMinFraction(0.0f);
}
