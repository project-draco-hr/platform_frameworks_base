{
  boolean animate=mNotificationStackScroller.isAddOrRemoveAnimationPending();
  int stackScrollerPadding;
  if (mStatusBarState != StatusBarState.KEYGUARD) {
    int bottom=mQsContainer.getHeader().getHeight();
    stackScrollerPadding=mStatusBarState == StatusBarState.SHADE ? bottom + mQsPeekHeight : mKeyguardStatusBar.getHeight();
    mTopPaddingAdjustment=0;
  }
 else {
    mClockPositionAlgorithm.setup(mStatusBar.getMaxKeyguardNotifications(),getMaxPanelHeight(),getExpandedHeight(),mNotificationStackScroller.getNotGoneChildCount(),getHeight(),mKeyguardStatusView.getHeight(),mEmptyDragAmount);
    mClockPositionAlgorithm.run(mClockPositionResult);
    if (animate || mClockAnimator != null) {
      startClockAnimation(mClockPositionResult.clockY);
    }
 else {
      mKeyguardStatusView.setY(mClockPositionResult.clockY);
    }
    updateClock(mClockPositionResult.clockAlpha,mClockPositionResult.clockScale);
    stackScrollerPadding=mClockPositionResult.stackScrollerPadding;
    mTopPaddingAdjustment=mClockPositionResult.stackScrollerPaddingAdjustment;
  }
  mNotificationStackScroller.setIntrinsicPadding(stackScrollerPadding);
  requestScrollerTopPaddingUpdate(animate);
}
