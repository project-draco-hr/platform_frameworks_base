{
  boolean animateClock=mNotificationStackScroller.isAddOrRemoveAnimationPending();
  if (mStatusBar.getBarState() != StatusBarState.KEYGUARD) {
    mStackScrollerIntrinsicPadding=mHeader.getBottom() + mNotificationTopPadding;
    mTopPaddingAdjustment=0;
  }
 else {
    mClockPositionAlgorithm.setup(mStatusBar.getMaxKeyguardNotifications(),getMaxPanelHeight(),getExpandedHeight(),mNotificationStackScroller.getNotGoneChildCount(),getHeight(),mKeyguardStatusView.getHeight());
    mClockPositionAlgorithm.run(mClockPositionResult);
    if (animateClock || mClockAnimator != null) {
      startClockAnimation(mClockPositionResult.clockY);
    }
 else {
      mKeyguardStatusView.setY(mClockPositionResult.clockY);
    }
    applyClockAlpha(mClockPositionResult.clockAlpha);
    mStackScrollerIntrinsicPadding=mClockPositionResult.stackScrollerPadding;
    mTopPaddingAdjustment=mClockPositionResult.stackScrollerPaddingAdjustment;
  }
  mNotificationStackScroller.setTopPadding(mStackScrollerIntrinsicPadding,mAnimateNextTopPaddingChange || animateClock);
  mAnimateNextTopPaddingChange=false;
}
