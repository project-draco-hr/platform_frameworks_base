{
  boolean animate=mNotificationStackScroller.isAddOrRemoveAnimationPending();
  int stackScrollerPadding;
  if (mStatusBar.getBarState() != StatusBarState.KEYGUARD) {
    int bottom=mStackScrollerOverscrolling ? mHeader.getCollapsedHeight() : mHeader.getBottom();
    stackScrollerPadding=bottom + mQsPeekHeight + mNotificationTopPadding;
    mTopPaddingAdjustment=0;
  }
 else {
    mClockPositionAlgorithm.setup(mStatusBar.getMaxKeyguardNotifications(),getMaxPanelHeight(),getExpandedHeight(),mNotificationStackScroller.getNotGoneChildCount(),getHeight(),mKeyguardStatusView.getHeight());
    mClockPositionAlgorithm.run(mClockPositionResult);
    if (animate || mClockAnimator != null) {
      startClockAnimation(mClockPositionResult.clockY);
    }
 else {
      mKeyguardStatusView.setY(mClockPositionResult.clockY);
    }
    updateClock(mClockPositionResult.clockAlpha,mClockPositionResult.clockScale);
    stackScrollerPadding=mClockPositionResult.stackScrollerPadding;
    mTopPaddingAdjustment=mClockPositionResult.stackScrollerPaddingAdjustment;
  }
  mNotificationStackScroller.setIntrinsicPadding(stackScrollerPadding);
  requestScrollerTopPaddingUpdate(animate);
}
