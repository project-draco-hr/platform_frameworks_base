{
  float target=expand ? mQsMaxExpansionHeight : mQsMinExpansionHeight;
  if (target == mQsExpansionHeight) {
    mScrollYOverride=-1;
    if (onFinishRunnable != null) {
      onFinishRunnable.run();
    }
    return;
  }
  boolean belowFalsingThreshold=isFalseTouch();
  if (belowFalsingThreshold) {
    vel=0;
  }
  mScrollView.setBlockFlinging(true);
  ValueAnimator animator=ValueAnimator.ofFloat(mQsExpansionHeight,target);
  if (isClick) {
    animator.setInterpolator(mTouchResponseInterpolator);
    animator.setDuration(368);
  }
 else {
    mFlingAnimationUtils.apply(animator,mQsExpansionHeight,target,vel);
  }
  if (belowFalsingThreshold) {
    animator.setDuration(350);
  }
  animator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener(){
    @Override public void onAnimationUpdate(    ValueAnimator animation){
      setQsExpansion((Float)animation.getAnimatedValue());
    }
  }
);
  animator.addListener(new AnimatorListenerAdapter(){
    @Override public void onAnimationEnd(    Animator animation){
      mScrollView.setBlockFlinging(false);
      mScrollYOverride=-1;
      mQsExpansionAnimator=null;
      if (onFinishRunnable != null) {
        onFinishRunnable.run();
      }
    }
  }
);
  animator.start();
  mQsExpansionAnimator=animator;
  mQsAnimatorExpand=expand;
}
