{
  boolean keyguardShowing=statusBarState == StatusBarState.KEYGUARD || statusBarState == StatusBarState.SHADE_LOCKED;
  if (!mKeyguardShowing && keyguardShowing) {
    setQsTranslation(mQsExpansionHeight);
    mHeader.setTranslationY(0f);
  }
  setKeyguardStatusViewVisibility(statusBarState,keyguardFadingAway,goingToFullShade);
  setKeyguardBottomAreaVisibility(statusBarState,goingToFullShade);
  if (goingToFullShade) {
    animateKeyguardStatusBarOut();
  }
 else {
    mKeyguardStatusBar.setAlpha(1f);
    mKeyguardStatusBar.setVisibility(keyguardShowing ? View.VISIBLE : View.INVISIBLE);
  }
  mStatusBarState=statusBarState;
  mKeyguardShowing=keyguardShowing;
  updateQsState();
  if (goingToFullShade) {
    animateHeaderSlidingIn();
  }
}
