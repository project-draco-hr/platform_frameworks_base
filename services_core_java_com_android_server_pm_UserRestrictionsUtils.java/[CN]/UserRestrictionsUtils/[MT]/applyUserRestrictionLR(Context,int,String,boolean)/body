{
  if (UserManagerService.DBG) {
    Log.d(TAG,"Applying user restriction: userId=" + userId + " key="+ key+ " value="+ newValue);
  }
  final ContentResolver cr=context.getContentResolver();
  final long id=Binder.clearCallingIdentity();
  try {
switch (key) {
case UserManager.DISALLOW_CONFIG_WIFI:
      if (newValue) {
        android.provider.Settings.Secure.putIntForUser(cr,android.provider.Settings.Secure.WIFI_NETWORKS_AVAILABLE_NOTIFICATION_ON,0,userId);
      }
    break;
case UserManager.DISALLOW_SHARE_LOCATION:
  if (newValue) {
    android.provider.Settings.Secure.putIntForUser(cr,android.provider.Settings.Secure.LOCATION_MODE,android.provider.Settings.Secure.LOCATION_MODE_OFF,userId);
    android.provider.Settings.Secure.putStringForUser(cr,android.provider.Settings.Secure.LOCATION_PROVIDERS_ALLOWED,"",userId);
  }
final String property=android.provider.Settings.Secure.SYS_PROP_SETTING_VERSION;
long version=SystemProperties.getLong(property,0) + 1;
SystemProperties.set(property,Long.toString(version));
final String name=android.provider.Settings.Secure.LOCATION_PROVIDERS_ALLOWED;
final Uri url=Uri.withAppendedPath(android.provider.Settings.Secure.CONTENT_URI,name);
context.getContentResolver().notifyChange(url,null,true,userId);
break;
case UserManager.DISALLOW_DEBUGGING_FEATURES:
if (newValue) {
if (userId == UserHandle.USER_SYSTEM) {
android.provider.Settings.Global.putStringForUser(cr,android.provider.Settings.Global.ADB_ENABLED,"0",userId);
}
}
break;
case UserManager.ENSURE_VERIFY_APPS:
if (newValue) {
android.provider.Settings.Global.putStringForUser(context.getContentResolver(),android.provider.Settings.Global.PACKAGE_VERIFIER_ENABLE,"1",userId);
android.provider.Settings.Global.putStringForUser(context.getContentResolver(),android.provider.Settings.Global.PACKAGE_VERIFIER_INCLUDE_ADB,"1",userId);
}
break;
case UserManager.DISALLOW_INSTALL_UNKNOWN_SOURCES:
if (newValue) {
android.provider.Settings.Secure.putIntForUser(cr,android.provider.Settings.Secure.INSTALL_NON_MARKET_APPS,0,userId);
}
break;
}
}
  finally {
Binder.restoreCallingIdentity(id);
}
}
