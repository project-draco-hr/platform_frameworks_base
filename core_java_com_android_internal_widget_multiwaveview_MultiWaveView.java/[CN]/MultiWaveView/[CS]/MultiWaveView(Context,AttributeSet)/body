{
  super(context,attrs);
  Resources res=context.getResources();
  TypedArray a=context.obtainStyledAttributes(attrs,R.styleable.MultiWaveView);
  mOuterRadius=a.getDimension(R.styleable.MultiWaveView_outerRadius,mOuterRadius);
  mHorizontalOffset=a.getDimension(R.styleable.MultiWaveView_horizontalOffset,mHorizontalOffset);
  mVerticalOffset=a.getDimension(R.styleable.MultiWaveView_verticalOffset,mVerticalOffset);
  mHitRadius=a.getDimension(R.styleable.MultiWaveView_hitRadius,mHitRadius);
  mSnapMargin=a.getDimension(R.styleable.MultiWaveView_snapMargin,mSnapMargin);
  mVibrationDuration=a.getInt(R.styleable.MultiWaveView_vibrationDuration,mVibrationDuration);
  mFeedbackCount=a.getInt(R.styleable.MultiWaveView_feedbackCount,mFeedbackCount);
  mHandleDrawable=new TargetDrawable(res,a.getDrawable(R.styleable.MultiWaveView_handleDrawable));
  mTapRadius=mHandleDrawable.getWidth() / 2;
  mOuterRing=new TargetDrawable(res,a.getDrawable(R.styleable.MultiWaveView_waveDrawable));
  Drawable leftChevron=a.getDrawable(R.styleable.MultiWaveView_leftChevronDrawable);
  for (int i=0; i < mFeedbackCount; i++) {
    mChevronDrawables.add(leftChevron != null ? new TargetDrawable(res,leftChevron) : null);
  }
  Drawable rightChevron=a.getDrawable(R.styleable.MultiWaveView_rightChevronDrawable);
  for (int i=0; i < mFeedbackCount; i++) {
    mChevronDrawables.add(rightChevron != null ? new TargetDrawable(res,rightChevron) : null);
  }
  Drawable topChevron=a.getDrawable(R.styleable.MultiWaveView_topChevronDrawable);
  for (int i=0; i < mFeedbackCount; i++) {
    mChevronDrawables.add(topChevron != null ? new TargetDrawable(res,topChevron) : null);
  }
  Drawable bottomChevron=a.getDrawable(R.styleable.MultiWaveView_bottomChevronDrawable);
  for (int i=0; i < mFeedbackCount; i++) {
    mChevronDrawables.add(bottomChevron != null ? new TargetDrawable(res,bottomChevron) : null);
  }
  TypedValue outValue=new TypedValue();
  if (a.getValue(R.styleable.MultiWaveView_targetDrawables,outValue)) {
    setTargetResources(outValue.resourceId);
  }
  if (mTargetDrawables == null || mTargetDrawables.size() == 0) {
    throw new IllegalStateException("Must specify at least one target drawable");
  }
  setVibrateEnabled(mVibrationDuration > 0);
}
