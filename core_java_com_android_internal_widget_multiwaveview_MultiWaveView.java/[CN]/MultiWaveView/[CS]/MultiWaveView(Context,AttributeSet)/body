{
  super(context,attrs);
  Resources res=context.getResources();
  TypedArray a=context.obtainStyledAttributes(attrs,R.styleable.MultiWaveView);
  mOuterRadius=a.getDimension(R.styleable.MultiWaveView_outerRadius,mOuterRadius);
  mHitRadius=a.getDimension(R.styleable.MultiWaveView_hitRadius,mHitRadius);
  mSnapMargin=a.getDimension(R.styleable.MultiWaveView_snapMargin,mSnapMargin);
  mVibrationDuration=a.getInt(R.styleable.MultiWaveView_vibrationDuration,mVibrationDuration);
  mFeedbackCount=a.getInt(R.styleable.MultiWaveView_feedbackCount,mFeedbackCount);
  mHandleDrawable=new TargetDrawable(res,a.peekValue(R.styleable.MultiWaveView_handleDrawable).resourceId);
  mTapRadius=mHandleDrawable.getWidth() / 2;
  mOuterRing=new TargetDrawable(res,a.peekValue(R.styleable.MultiWaveView_waveDrawable).resourceId);
  mAlwaysTrackFinger=a.getBoolean(R.styleable.MultiWaveView_alwaysTrackFinger,false);
  mGravity=a.getInt(R.styleable.MultiWaveView_gravity,Gravity.TOP);
  TypedValue outValue=new TypedValue();
  if (a.getValue(R.styleable.MultiWaveView_chevronDrawables,outValue)) {
    ArrayList<TargetDrawable> chevrons=loadDrawableArray(outValue.resourceId);
    for (int i=0; i < chevrons.size(); i++) {
      final TargetDrawable chevron=chevrons.get(i);
      for (int k=0; k < mFeedbackCount; k++) {
        mChevronDrawables.add(chevron == null ? null : new TargetDrawable(chevron));
      }
    }
  }
  if (mChevronDrawables.size() == 0) {
    final int chevronResIds[]={R.styleable.MultiWaveView_rightChevronDrawable,R.styleable.MultiWaveView_topChevronDrawable,R.styleable.MultiWaveView_leftChevronDrawable,R.styleable.MultiWaveView_bottomChevronDrawable};
    for (int i=0; i < chevronResIds.length; i++) {
      TypedValue typedValue=a.peekValue(chevronResIds[i]);
      for (int k=0; k < mFeedbackCount; k++) {
        mChevronDrawables.add(typedValue != null ? new TargetDrawable(res,typedValue.resourceId) : null);
      }
    }
  }
  if (a.getValue(R.styleable.MultiWaveView_targetDrawables,outValue)) {
    internalSetTargetResources(outValue.resourceId);
  }
  if (mTargetDrawables == null || mTargetDrawables.size() == 0) {
    throw new IllegalStateException("Must specify at least one target drawable");
  }
  if (a.getValue(R.styleable.MultiWaveView_targetDescriptions,outValue)) {
    final int resourceId=outValue.resourceId;
    if (resourceId == 0) {
      throw new IllegalStateException("Must specify target descriptions");
    }
    setTargetDescriptionsResourceId(resourceId);
  }
  if (a.getValue(R.styleable.MultiWaveView_directionDescriptions,outValue)) {
    final int resourceId=outValue.resourceId;
    if (resourceId == 0) {
      throw new IllegalStateException("Must specify direction descriptions");
    }
    setDirectionDescriptionsResourceId(resourceId);
  }
  a.recycle();
  setVibrateEnabled(mVibrationDuration > 0);
}
