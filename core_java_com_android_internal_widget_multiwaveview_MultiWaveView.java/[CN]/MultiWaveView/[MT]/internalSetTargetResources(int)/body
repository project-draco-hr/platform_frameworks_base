{
  Resources res=getContext().getResources();
  TypedArray array=res.obtainTypedArray(resourceId);
  int count=array.length();
  ArrayList<TargetDrawable> targetDrawables=new ArrayList<TargetDrawable>(count);
  int maxWidth=mHandleDrawable.getWidth();
  int maxHeight=mHandleDrawable.getHeight();
  for (int i=0; i < count; i++) {
    TypedValue value=array.peekValue(i);
    TargetDrawable target=new TargetDrawable(res,value != null ? value.resourceId : 0);
    targetDrawables.add(target);
    maxWidth=Math.max(maxWidth,target.getWidth());
    maxHeight=Math.max(maxHeight,target.getHeight());
  }
  mTargetResourceId=resourceId;
  mTargetDrawables=targetDrawables;
  if (mMaxTargetWidth != maxWidth || mMaxTargetHeight != maxHeight) {
    mMaxTargetWidth=maxWidth;
    mMaxTargetHeight=maxHeight;
    requestLayout();
  }
 else {
    updateTargetPositions();
  }
  array.recycle();
}
