{
  final AlarmClockInfo nextAlarm=mAlarmManager.getNextAlarmClock(mCurrentUserId);
  final long triggerTime=getEarlyTriggerTime(nextAlarm);
  final boolean withinThreshold=isWithinLookaheadThreshold(nextAlarm);
  final long now=System.currentTimeMillis();
  final boolean booted=isDoneWaitingAfterBoot(now);
  if (DEBUG)   Slog.d(TAG,"handleEvaluate mCurrentSubscription=" + mCurrentSubscription + " nextAlarm="+ formatAlarmDebug(triggerTime)+ " withinThreshold="+ withinThreshold+ " booted="+ booted);
  if (mCurrentSubscription == null)   return;
  if (!booted) {
    notifyCondition(mCurrentSubscription,nextAlarm,Condition.STATE_UNKNOWN,"!booted");
    final long recheckTime=(mBootCompleted > 0 ? mBootCompleted : now) + WAIT_AFTER_BOOT;
    rescheduleAlarm(recheckTime);
    return;
  }
  if (!withinThreshold) {
    notifyCondition(mCurrentSubscription,nextAlarm,Condition.STATE_FALSE,"!within");
    mCurrentSubscription=null;
    return;
  }
  notifyCondition(mCurrentSubscription,nextAlarm,Condition.STATE_TRUE,"within");
  rescheduleAlarm(triggerTime);
}
