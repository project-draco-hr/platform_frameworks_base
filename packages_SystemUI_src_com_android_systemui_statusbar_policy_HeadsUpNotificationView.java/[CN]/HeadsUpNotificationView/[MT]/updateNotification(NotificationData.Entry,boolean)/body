{
  if (DEBUG)   Log.v(TAG,"updateNotification");
  if (alert) {
    mBar.scheduleHeadsUpDecay(mHeadsUpNotificationDecay);
  }
  invalidate();
  if (mHeadsUp == headsUp) {
    return;
  }
  mHeadsUp=headsUp;
  if (mContentHolder != null) {
    mContentHolder.removeAllViews();
  }
  if (mHeadsUp != null) {
    mMostRecentPackageName=mHeadsUp.notification.getPackageName();
    if (mHeadsUp.row != null) {
      mHeadsUp.row.setSystemExpanded(true);
      mHeadsUp.row.setSensitive(false);
      mHeadsUp.row.setHeadsUp(true);
      mHeadsUp.row.setHideSensitive(false,false,0,0);
    }
    mStartTouchTime=SystemClock.elapsedRealtime() + mTouchSensitivityDelay;
    if (mContentHolder != null) {
      mContentHolder.setX(0);
      mContentHolder.setVisibility(View.VISIBLE);
      mContentHolder.setAlpha(mMaxAlpha);
      mContentHolder.addView(mHeadsUp.row);
      sendAccessibilityEvent(AccessibilityEvent.TYPE_WINDOW_CONTENT_CHANGED);
      mSwipeHelper.snapChild(mContentHolder,1f);
    }
    mHeadsUp.setInterruption();
    mBar.scheduleHeadsUpOpen();
  }
}
