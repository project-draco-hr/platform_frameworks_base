{
  final ViewConfiguration viewConfiguration=ViewConfiguration.get(getContext());
  float touchSlop=viewConfiguration.getScaledTouchSlop();
  mSwipeHelper=new SwipeHelper(SwipeHelper.X,this,getContext());
  mSwipeHelper.setMaxSwipeProgress(mMaxAlpha);
  mEdgeSwipeHelper=new EdgeSwipeHelper(touchSlop);
  int minHeight=getResources().getDimensionPixelSize(R.dimen.notification_min_height);
  int maxHeight=getResources().getDimensionPixelSize(R.dimen.notification_max_height);
  mContentHolder=(ViewGroup)findViewById(R.id.content_holder);
  mContentHolder.setOutlineProvider(CONTENT_HOLDER_OUTLINE_PROVIDER);
  mSnoozeLengthMs=Settings.Global.getInt(mContext.getContentResolver(),SETTING_HEADS_UP_SNOOZE_LENGTH_MS,mDefaultSnoozeLengthMs);
  mSettingsObserver=new ContentObserver(getHandler()){
    @Override public void onChange(    boolean selfChange){
      final int packageSnoozeLengthMs=Settings.Global.getInt(mContext.getContentResolver(),SETTING_HEADS_UP_SNOOZE_LENGTH_MS,-1);
      if (packageSnoozeLengthMs > -1 && packageSnoozeLengthMs != mSnoozeLengthMs) {
        mSnoozeLengthMs=packageSnoozeLengthMs;
        if (DEBUG)         Log.v(TAG,"mSnoozeLengthMs = " + mSnoozeLengthMs);
      }
    }
  }
;
  mContext.getContentResolver().registerContentObserver(Settings.Global.getUriFor(SETTING_HEADS_UP_SNOOZE_LENGTH_MS),false,mSettingsObserver);
  if (DEBUG)   Log.v(TAG,"mSnoozeLengthMs = " + mSnoozeLengthMs);
  if (mHeadsUp != null) {
    showNotification(mHeadsUp);
  }
  getViewTreeObserver().addOnComputeInternalInsetsListener(this);
}
