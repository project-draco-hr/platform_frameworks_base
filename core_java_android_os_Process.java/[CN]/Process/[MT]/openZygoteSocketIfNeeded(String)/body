{
  if (primaryZygoteState == null || primaryZygoteState.isClosed()) {
    primaryZygoteState=ZygoteState.connect(ZYGOTE_SOCKET,getNumTries(primaryZygoteState));
  }
  if (primaryZygoteState.matches(abi)) {
    return primaryZygoteState;
  }
  if (System.getenv("ANDROID_SOCKET_" + SECONDARY_ZYGOTE_SOCKET) == null) {
    Log.e(LOG_TAG,"Forcing app to primary zygote, secondary unavailable (ABI= " + abi + ")");
    return primaryZygoteState;
  }
  if (secondaryZygoteState == null || secondaryZygoteState.isClosed()) {
    secondaryZygoteState=ZygoteState.connect(SECONDARY_ZYGOTE_SOCKET,getNumTries(secondaryZygoteState));
  }
  if (secondaryZygoteState.matches(abi)) {
    return secondaryZygoteState;
  }
  throw new ZygoteStartFailedEx("Unsupported zygote ABI: " + abi);
}
