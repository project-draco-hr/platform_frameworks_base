{
  int pid;
  openZygoteSocketIfNeeded();
  try {
    sZygoteWriter.write(Integer.toString(args.size()));
    sZygoteWriter.newLine();
    int sz=args.size();
    for (int i=0; i < sz; i++) {
      String arg=args.get(i);
      if (arg.indexOf('\n') >= 0) {
        throw new ZygoteStartFailedEx("embedded newlines not allowed");
      }
      sZygoteWriter.write(arg);
      sZygoteWriter.newLine();
    }
    sZygoteWriter.flush();
    pid=sZygoteInputStream.readInt();
    if (pid < 0) {
      throw new ZygoteStartFailedEx("fork() failed");
    }
  }
 catch (  IOException ex) {
    try {
      if (sZygoteSocket != null) {
        sZygoteSocket.close();
      }
    }
 catch (    IOException ex2) {
      Log.e(LOG_TAG,"I/O exception on routine close",ex2);
    }
    sZygoteSocket=null;
    throw new ZygoteStartFailedEx(ex);
  }
  return pid;
}
