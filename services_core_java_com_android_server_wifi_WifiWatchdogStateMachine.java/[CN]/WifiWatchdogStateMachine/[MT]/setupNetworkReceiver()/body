{
  mBroadcastReceiver=new BroadcastReceiver(){
    @Override public void onReceive(    Context context,    Intent intent){
      String action=intent.getAction();
      if (action.equals(WifiManager.RSSI_CHANGED_ACTION)) {
        obtainMessage(EVENT_RSSI_CHANGE,intent.getIntExtra(WifiManager.EXTRA_NEW_RSSI,-200),0).sendToTarget();
      }
 else       if (action.equals(WifiManager.SUPPLICANT_STATE_CHANGED_ACTION)) {
        sendMessage(EVENT_SUPPLICANT_STATE_CHANGE,intent);
      }
 else       if (action.equals(WifiManager.NETWORK_STATE_CHANGED_ACTION)) {
        sendMessage(EVENT_NETWORK_STATE_CHANGE,intent);
      }
 else       if (action.equals(Intent.ACTION_SCREEN_ON)) {
        sendMessage(EVENT_SCREEN_ON);
      }
 else       if (action.equals(Intent.ACTION_SCREEN_OFF)) {
        sendMessage(EVENT_SCREEN_OFF);
      }
 else       if (action.equals(WifiManager.WIFI_STATE_CHANGED_ACTION)) {
        sendMessage(EVENT_WIFI_RADIO_STATE_CHANGE,intent.getIntExtra(WifiManager.EXTRA_WIFI_STATE,WifiManager.WIFI_STATE_UNKNOWN));
      }
    }
  }
;
  mIntentFilter=new IntentFilter();
  mIntentFilter.addAction(WifiManager.NETWORK_STATE_CHANGED_ACTION);
  mIntentFilter.addAction(WifiManager.WIFI_STATE_CHANGED_ACTION);
  mIntentFilter.addAction(WifiManager.RSSI_CHANGED_ACTION);
  mIntentFilter.addAction(WifiManager.SUPPLICANT_STATE_CHANGED_ACTION);
  mIntentFilter.addAction(Intent.ACTION_SCREEN_ON);
  mIntentFilter.addAction(Intent.ACTION_SCREEN_OFF);
  mContext.registerReceiver(mBroadcastReceiver,mIntentFilter);
}
