{
  final long lowThreshold;
  final DeviceStorageMonitorInternal dsm=LocalServices.getService(DeviceStorageMonitorInternal.class);
  if (dsm == null) {
    Log.w(TAG,"Couldn't get low memory threshold; no free limit imposed");
    lowThreshold=0L;
  }
 else {
    if (dsm.isMemoryLow()) {
      Log.w(TAG,"Memory is reported as being too low; aborting package install");
      return false;
    }
    lowThreshold=dsm.getMemoryLowThreshold();
  }
  return imcs.checkInternalFreeStorage(originFile.getAbsolutePath(),isFwdLocked(),lowThreshold);
}
