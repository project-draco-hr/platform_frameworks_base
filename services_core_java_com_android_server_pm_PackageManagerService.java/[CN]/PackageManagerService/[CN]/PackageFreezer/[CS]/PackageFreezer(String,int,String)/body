{
synchronized (mPackages) {
    mPackageName=packageName;
    mWeFroze=mFrozenPackages.add(mPackageName);
    final PackageSetting ps=mSettings.mPackages.get(mPackageName);
    if (ps != null) {
      killApplication(ps.name,ps.appId,userId,killReason);
    }
    final PackageParser.Package p=mPackages.get(packageName);
    if (p != null && p.childPackages != null) {
      final int N=p.childPackages.size();
      mChildren=new PackageFreezer[N];
      for (int i=0; i < N; i++) {
        mChildren[i]=new PackageFreezer(p.childPackages.get(i).packageName,userId,killReason);
      }
    }
 else {
      mChildren=null;
    }
  }
  mCloseGuard.open("close");
}
