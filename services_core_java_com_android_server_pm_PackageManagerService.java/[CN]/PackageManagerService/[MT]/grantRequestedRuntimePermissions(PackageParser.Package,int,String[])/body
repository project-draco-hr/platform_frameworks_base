{
  if (userId >= UserHandle.USER_OWNER) {
    grantRequestedRuntimePermissionsForUser(pkg,userId,grantedPermissions);
  }
 else   if (userId == UserHandle.USER_ALL) {
    final int[] userIds;
synchronized (mPackages) {
      userIds=UserManagerService.getInstance().getUserIds();
    }
    for (    int someUserId : userIds) {
      grantRequestedRuntimePermissionsForUser(pkg,someUserId,grantedPermissions);
    }
  }
synchronized (mPackages) {
    mSettings.writePackageListLPr();
  }
}
