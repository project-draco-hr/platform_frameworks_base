{
  mContext.enforceCallingOrSelfPermission(android.Manifest.permission.MANAGE_USERS,null);
  enforceCrossUserPermission(Binder.getCallingUid(),userId,true,true,"setPackageSuspended for user " + userId);
  long callingId=Binder.clearCallingIdentity();
  try {
synchronized (mPackages) {
      final PackageSetting pkgSetting=mSettings.mPackages.get(packageName);
      if (pkgSetting != null) {
        if (pkgSetting.getSuspended(userId) != suspended) {
          pkgSetting.setSuspended(suspended,userId);
          mSettings.writePackageRestrictionsLPr(userId);
        }
        return true;
      }
      return false;
    }
  }
  finally {
    Binder.restoreCallingIdentity(callingId);
  }
}
