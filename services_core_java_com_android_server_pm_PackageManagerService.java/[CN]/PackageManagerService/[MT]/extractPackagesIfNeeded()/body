{
  enforceSystemOrRoot("Only the system can request package extraction");
  if (mUseJitProfiles) {
    List<PackageParser.Package> pkgs;
synchronized (mPackages) {
      pkgs=PackageManagerServiceUtils.getPackagesForDexopt(mPackages.values(),this);
    }
    for (    PackageParser.Package pkg : pkgs) {
      if (PackageDexOptimizer.canOptimizePackage(pkg)) {
        performDexOpt(pkg.packageName,null,false,true,false);
      }
    }
  }
}
