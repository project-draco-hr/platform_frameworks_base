{
  Slog.d(TAG,"Start priming domain verification");
  boolean updated=false;
  ArrayList<String> allHosts=new ArrayList<>();
  for (  PackageParser.Package pkg : mPackages.values()) {
    final String packageName=pkg.packageName;
    if (!hasDomainURLs(pkg)) {
      if (logging) {
        Slog.d(TAG,"No priming domain verifications for " + "package with no domain URLs: " + packageName);
      }
      continue;
    }
    if (!pkg.isSystemApp()) {
      if (logging) {
        Slog.d(TAG,"No priming domain verifications for a non system package : " + packageName);
      }
      continue;
    }
    for (    PackageParser.Activity a : pkg.activities) {
      for (      ActivityIntentInfo filter : a.intents) {
        if (hasValidDomains(filter,false)) {
          allHosts.addAll(filter.getHostsList());
        }
      }
    }
    if (allHosts.size() == 0) {
      allHosts.add("*");
    }
    IntentFilterVerificationInfo ivi=mSettings.createIntentFilterVerificationIfNeededLPw(packageName,allHosts);
    if (ivi != null) {
      Slog.d(TAG,"Priming domain verifications for package: " + packageName);
      ivi.setStatus(INTENT_FILTER_DOMAIN_VERIFICATION_STATUS_ALWAYS);
      updated=true;
    }
 else {
      if (logging) {
        Slog.d(TAG,"No priming domain verifications for package: " + packageName);
      }
    }
    allHosts.clear();
  }
  if (updated) {
    scheduleWriteSettingsLocked();
  }
  Slog.d(TAG,"End priming domain verification");
}
