{
  int n=0;
  while (n++ < 32) {
    final File file=new File(installDir,"vmdl" + mTempFileRandom.nextInt() + ".tmp");
    try {
      final FileDescriptor fd=Os.open(file.getAbsolutePath(),O_RDWR | O_CREAT | O_EXCL,0644);
      IoUtils.closeQuietly(fd);
      Os.chmod(file.getAbsolutePath(),0644);
      if (!SELinux.restorecon(file)) {
        throw new IOException("Failed to restorecon");
      }
      return file;
    }
 catch (    ErrnoException e) {
      if (e.errno == EEXIST)       continue;
      throw e.rethrowAsIOException();
    }
  }
  throw new IOException("Failed to create temp file");
}
