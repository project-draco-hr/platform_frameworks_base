{
  mContext.enforceCallingOrSelfPermission(android.Manifest.permission.SET_PREFERRED_APPLICATIONS,null);
synchronized (mPackages) {
    clearPackagePreferredActivitiesLPw(null,userId);
    mSettings.applyDefaultPreferredAppsLPw(this,userId);
    applyFactoryDefaultBrowserLPw(userId);
    scheduleWritePackageRestrictionsLocked(userId);
  }
}
