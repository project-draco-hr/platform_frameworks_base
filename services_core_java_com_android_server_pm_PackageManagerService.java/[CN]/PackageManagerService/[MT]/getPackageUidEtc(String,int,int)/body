{
  if (!sUserManager.exists(userId))   return -1;
  enforceCrossUserPermission(Binder.getCallingUid(),userId,false,false,"get package uid");
synchronized (mPackages) {
    final PackageParser.Package p=mPackages.get(packageName);
    if (p != null) {
      return UserHandle.getUid(userId,p.applicationInfo.uid);
    }
    if ((flags & PackageManager.GET_UNINSTALLED_PACKAGES) != 0) {
      final PackageSetting ps=mSettings.mPackages.get(packageName);
      if (ps != null) {
        return UserHandle.getUid(userId,ps.appId);
      }
    }
  }
  return -1;
}
