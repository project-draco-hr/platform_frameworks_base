{
  mDirtyUsers.remove(userHandle);
  mSettings.removeUserLPw(userHandle);
  mPendingBroadcasts.remove(userHandle);
  if (mInstaller != null) {
    final StorageManager storage=StorageManager.from(mContext);
    final List<VolumeInfo> vols=storage.getVolumes();
    for (    VolumeInfo vol : vols) {
      if (vol.getType() == VolumeInfo.TYPE_PRIVATE && vol.isMountedWritable()) {
        final String volumeUuid=vol.getFsUuid();
        Slog.d(TAG,"Removing user data on volume " + volumeUuid);
        mInstaller.removeUserDataDirs(volumeUuid,userHandle);
      }
    }
  }
  mUserNeedsBadging.delete(userHandle);
  removeUnusedPackagesLILPw(userManager,userHandle);
}
