{
  BasePermission bp=mSettings.mPermissions.get(permission);
  if (bp == null) {
    throw new SecurityException("Missing " + permission + " permission");
  }
  SettingBase sb=(SettingBase)pkg.mExtras;
  PermissionsState permissionsState=sb.getPermissionsState();
  if (permissionsState.grantInstallPermission(bp) != PermissionsState.PERMISSION_OPERATION_FAILURE) {
    scheduleWriteSettingsLocked();
  }
}
