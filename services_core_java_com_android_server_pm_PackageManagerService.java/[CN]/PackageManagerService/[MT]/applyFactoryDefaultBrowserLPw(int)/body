{
  String browserPkg=mContext.getResources().getString(com.android.internal.R.string.default_browser);
  if (browserPkg != null) {
    PackageSetting ps=mSettings.mPackages.get(browserPkg);
    if (ps == null) {
      Slog.e(TAG,"Product default browser app does not exist: " + browserPkg);
      browserPkg=null;
    }
 else {
      mSettings.setDefaultBrowserPackageNameLPw(browserPkg,userId);
    }
  }
  if (browserPkg == null) {
    calculateDefaultBrowserLPw(userId);
  }
}
