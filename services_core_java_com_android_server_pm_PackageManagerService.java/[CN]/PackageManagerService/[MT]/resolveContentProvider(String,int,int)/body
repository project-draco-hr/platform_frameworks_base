{
  if (!sUserManager.exists(userId))   return null;
  flags=updateFlagsForComponent(flags,userId,name);
synchronized (mPackages) {
    final PackageParser.Provider provider=mProvidersByAuthority.get(name);
    PackageSetting ps=provider != null ? mSettings.mPackages.get(provider.owner.packageName) : null;
    return ps != null && mSettings.isEnabledAndMatchLPr(provider.info,flags,userId) ? PackageParser.generateProviderInfo(provider,flags,ps.readUserState(userId),userId) : null;
  }
}
