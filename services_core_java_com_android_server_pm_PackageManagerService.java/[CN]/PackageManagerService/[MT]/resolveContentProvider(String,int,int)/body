{
  if (!sUserManager.exists(userId))   return null;
  flags=augmentFlagsForUser(flags,userId);
synchronized (mPackages) {
    final PackageParser.Provider provider=mProvidersByAuthority.get(name);
    PackageSetting ps=provider != null ? mSettings.mPackages.get(provider.owner.packageName) : null;
    return ps != null && mSettings.isEnabledAndVisibleLPr(provider.info,flags,userId) && (!mSafeMode || (provider.info.applicationInfo.flags & ApplicationInfo.FLAG_SYSTEM) != 0) ? PackageParser.generateProviderInfo(provider,flags,ps.readUserState(userId),userId) : null;
  }
}
