{
  if (DEBUG_INSTALL)   Log.v(TAG,"Sending package changed: package=" + packageName + " components="+ componentNames);
  Bundle extras=new Bundle(4);
  extras.putString(Intent.EXTRA_CHANGED_COMPONENT_NAME,componentNames.get(0));
  String nameList[]=new String[componentNames.size()];
  componentNames.toArray(nameList);
  extras.putStringArray(Intent.EXTRA_CHANGED_COMPONENT_NAME_LIST,nameList);
  extras.putBoolean(Intent.EXTRA_DONT_KILL_APP,killFlag);
  extras.putInt(Intent.EXTRA_UID,packageUid);
  final int flags=!componentNames.contains(packageName) ? Intent.FLAG_RECEIVER_REGISTERED_ONLY : 0;
  sendPackageBroadcast(Intent.ACTION_PACKAGE_CHANGED,packageName,extras,flags,null,null,new int[]{UserHandle.getUserId(packageUid)});
}
