{
  ArrayList<ResolveInfo> homeActivities=new ArrayList<>();
  getHomeActivitiesAsUser(homeActivities,userId);
  boolean found=false;
  final int size=homeActivities.size();
  final ComponentName[] set=new ComponentName[size];
  for (int i=0; i < size; i++) {
    final ResolveInfo candidate=homeActivities.get(i);
    final ActivityInfo info=candidate.activityInfo;
    final ComponentName activityName=new ComponentName(info.packageName,info.name);
    set[i]=activityName;
    if (!found && activityName.equals(comp)) {
      found=true;
    }
  }
  if (!found) {
    throw new IllegalArgumentException("Component " + comp + " cannot be home on user "+ userId);
  }
  replacePreferredActivity(getHomeFilter(),IntentFilter.MATCH_CATEGORY_EMPTY,set,comp,userId);
}
