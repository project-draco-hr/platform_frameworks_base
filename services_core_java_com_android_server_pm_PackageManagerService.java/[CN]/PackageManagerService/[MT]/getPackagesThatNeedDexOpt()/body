{
  ArraySet<String> pkgs=null;
synchronized (mPackages) {
    for (    PackageParser.Package p : mPackages.values()) {
      if (DEBUG_DEXOPT) {
        Log.i(TAG,p.packageName + " mDexOptPerformed=" + p.mDexOptPerformed.toArray());
      }
      if (!p.mDexOptPerformed.isEmpty()) {
        continue;
      }
      if (pkgs == null) {
        pkgs=new ArraySet<String>();
      }
      pkgs.add(p.packageName);
    }
  }
  return pkgs;
}
