{
  ArrayList<ResolveInfo> matchingResolveInfos=new ArrayList<ResolveInfo>();
  SparseArray<ArrayList<String>> sourceForwardingInfo=mSettings.mCrossProfilePackageInfo.get(userId);
  if (sourceForwardingInfo != null) {
    int NI=sourceForwardingInfo.size();
    for (int i=0; i < NI; i++) {
      int targetUserId=sourceForwardingInfo.keyAt(i);
      ArrayList<String> packageNames=sourceForwardingInfo.valueAt(i);
      List<ResolveInfo> resolveInfos=mActivities.queryIntent(intent,resolvedType,flags,targetUserId);
      int NJ=resolveInfos.size();
      for (int j=0; j < NJ; j++) {
        ResolveInfo resolveInfo=resolveInfos.get(j);
        if (packageNames.contains(resolveInfo.activityInfo.packageName)) {
          matchingResolveInfos.add(createForwardingResolveInfo(resolveInfo.filter,userId,targetUserId));
        }
      }
    }
  }
  return matchingResolveInfos;
}
