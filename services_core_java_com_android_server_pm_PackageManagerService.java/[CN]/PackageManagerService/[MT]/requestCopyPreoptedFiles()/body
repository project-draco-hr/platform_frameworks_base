{
  final int WAIT_TIME_MS=100;
  final String CP_PREOPT_PROPERTY="sys.cppreopt";
  if (SystemProperties.getInt("ro.cp_system_other_odex",0) == 1) {
    SystemProperties.set(CP_PREOPT_PROPERTY,"requested");
    final long timeEnd=SystemClock.uptimeMillis() + 100 * 1000;
    while (!SystemProperties.get(CP_PREOPT_PROPERTY).equals("finished")) {
      try {
        Thread.sleep(WAIT_TIME_MS);
      }
 catch (      InterruptedException e) {
      }
      if (SystemClock.uptimeMillis() > timeEnd) {
        SystemProperties.set(CP_PREOPT_PROPERTY,"timed-out");
        Slog.wtf(TAG,"cppreopt did not finish!");
        break;
      }
    }
  }
}
