{
  int n=0;
  while (n++ < 32) {
    final File file=new File(installDir,"vmdl" + mTempFileRandom.nextInt() + ".tmp");
    try {
      Os.mkdir(file.getAbsolutePath(),0755);
      Os.chmod(file.getAbsolutePath(),0755);
      if (!SELinux.restorecon(file)) {
        throw new IOException("Failed to restorecon");
      }
      return file;
    }
 catch (    ErrnoException e) {
      if (e.errno == EEXIST)       continue;
      throw e.rethrowAsIOException();
    }
  }
  throw new IOException("Failed to create temp directory");
}
