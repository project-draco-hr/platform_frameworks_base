{
  if (!sUserManager.exists(userId))   return null;
  flags=updateFlagsForPackage(flags,userId,packageName);
  enforceCrossUserPermission(Binder.getCallingUid(),userId,false,false,"getPackageGids");
synchronized (mPackages) {
    final PackageParser.Package p=mPackages.get(packageName);
    if (p != null && p.isMatch(flags)) {
      PackageSetting ps=(PackageSetting)p.mExtras;
      return ps.getPermissionsState().computeGids(userId);
    }
    if ((flags & MATCH_UNINSTALLED_PACKAGES) != 0) {
      final PackageSetting ps=mSettings.mPackages.get(packageName);
      if (ps != null && ps.isMatch(flags)) {
        return ps.getPermissionsState().computeGids(userId);
      }
    }
  }
  return null;
}
