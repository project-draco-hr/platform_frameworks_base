{
  PackageDexOptimizer pdo=force ? new PackageDexOptimizer.ForcedUpdatePackageDexOptimizer(mPackageDexOptimizer) : mPackageDexOptimizer;
  Collection<PackageParser.Package> deps=findSharedNonSystemLibraries(p);
  if (!deps.isEmpty()) {
    for (    PackageParser.Package depPackage : deps) {
      pdo.performDexOpt(depPackage,instructionSets,false,false);
    }
  }
  return pdo.performDexOpt(p,instructionSets,useProfiles,extractOnly);
}
