{
  if (!sUserManager.exists(userId))   return null;
  PackageInfo pi;
  final PackageSetting ps=(PackageSetting)p.mExtras;
  if (ps == null) {
    return null;
  }
  final GrantedPermissions gp=ps.sharedUser != null ? ps.sharedUser : ps;
  final PackageUserState state=ps.readUserState(userId);
  return PackageParser.generatePackageInfo(p,gp.gids,flags,ps.firstInstallTime,ps.lastUpdateTime,gp.grantedPermissions,state,userId);
}
