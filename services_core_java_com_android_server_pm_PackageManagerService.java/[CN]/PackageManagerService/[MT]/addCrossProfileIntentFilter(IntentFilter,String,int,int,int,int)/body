{
  mContext.enforceCallingOrSelfPermission(android.Manifest.permission.INTERACT_ACROSS_USERS_FULL,null);
  int callingUid=Binder.getCallingUid();
  enforceOwnerRights(ownerPackage,ownerUserId,callingUid);
  enforceShellRestriction(UserManager.DISALLOW_DEBUGGING_FEATURES,callingUid,sourceUserId);
  if (intentFilter.countActions() == 0) {
    Slog.w(TAG,"Cannot set a crossProfile intent filter with no filter actions");
    return;
  }
synchronized (mPackages) {
    CrossProfileIntentFilter filter=new CrossProfileIntentFilter(intentFilter,ownerPackage,UserHandle.getUserId(callingUid),targetUserId,flags);
    mSettings.editCrossProfileIntentResolverLPw(sourceUserId).addFilter(filter);
    mSettings.writePackageRestrictionsLPr(sourceUserId);
  }
}
