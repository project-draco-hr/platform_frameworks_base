{
  final Intent intent=new Intent(Intent.ACTION_INSTALL_PACKAGE);
  intent.addCategory(Intent.CATEGORY_DEFAULT);
  intent.setDataAndType(Uri.fromFile(new File("foo.apk")),PACKAGE_MIME_TYPE);
  final List<ResolveInfo> matches=queryIntentActivitiesInternal(intent,PACKAGE_MIME_TYPE,MATCH_SYSTEM_ONLY | MATCH_ENCRYPTION_AWARE_AND_UNAWARE,UserHandle.USER_SYSTEM);
  if (matches.size() == 1) {
    return matches.get(0).getComponentInfo().packageName;
  }
 else {
    throw new RuntimeException("There must be exactly one installer; found " + matches);
  }
}
