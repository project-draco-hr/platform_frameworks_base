{
  long[] upgradeKeySets=oldPS.keySetData.getUpgradeKeySets();
  KeySetManagerService ksms=mSettings.mKeySetManagerService;
  Set<Long> newSigningKeyIds=new ArraySet<Long>();
  for (  PublicKey pk : newPkg.mSigningKeys) {
    newSigningKeyIds.add(ksms.getIdForPublicKey(pk));
  }
  newSigningKeyIds.remove(ksms.PUBLIC_KEY_NOT_FOUND);
  for (int i=0; i < upgradeKeySets.length; i++) {
    if (newSigningKeyIds.containsAll(ksms.mKeySetMapping.get(upgradeKeySets[i]))) {
      return true;
    }
  }
  return false;
}
