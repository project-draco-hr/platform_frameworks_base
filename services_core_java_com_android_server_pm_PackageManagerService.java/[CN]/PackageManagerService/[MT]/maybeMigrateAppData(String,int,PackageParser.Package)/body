{
  if (pkg.isSystemApp() && !StorageManager.isFileBasedEncryptionEnabled() && PackageManager.APPLY_FORCE_DEVICE_ENCRYPTED) {
    final int storageTarget=pkg.applicationInfo.isForceDeviceEncrypted() ? StorageManager.FLAG_STORAGE_DE : StorageManager.FLAG_STORAGE_CE;
synchronized (mInstallLock) {
      try {
        mInstaller.migrateAppData(volumeUuid,pkg.packageName,userId,storageTarget);
      }
 catch (      InstallerException e) {
        logCriticalInfo(Log.WARN,"Failed to migrate " + pkg.packageName + ": "+ e.getMessage());
      }
    }
    return true;
  }
 else {
    return false;
  }
}
