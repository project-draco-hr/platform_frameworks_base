{
  if (!sUserManager.exists(userId))   return null;
  flags=augmentFlagsForUser(flags,userId);
  enforceCrossUserPermission(Binder.getCallingUid(),userId,false,false,"get provider info");
synchronized (mPackages) {
    PackageParser.Provider p=mProviders.mProviders.get(component);
    if (DEBUG_PACKAGE_INFO)     Log.v(TAG,"getProviderInfo " + component + ": "+ p);
    if (p != null && mSettings.isEnabledAndVisibleLPr(p.info,flags,userId)) {
      PackageSetting ps=mSettings.mPackages.get(component.getPackageName());
      if (ps == null)       return null;
      return PackageParser.generateProviderInfo(p,flags,ps.readUserState(userId),userId);
    }
  }
  return null;
}
