{
  ArrayList<PackageParser.Package> res=null;
  for (  PackageParser.Package pkg : mPackages.values()) {
    if (hasString(pkg.usesLibraries,changingPkg.libraryNames) || hasString(pkg.usesOptionalLibraries,changingPkg.libraryNames)) {
      if (res == null) {
        res=new ArrayList<PackageParser.Package>();
      }
      res.add(pkg);
      try {
        updateSharedLibrariesLPw(pkg,changingPkg);
      }
 catch (      PackageManagerException e) {
        Slog.e(TAG,"updateAllSharedLibrariesLPw failed: " + e.getMessage());
      }
    }
  }
  return res;
}
