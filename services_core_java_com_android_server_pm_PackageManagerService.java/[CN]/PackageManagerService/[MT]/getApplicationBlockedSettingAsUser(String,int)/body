{
  mContext.enforceCallingOrSelfPermission(android.Manifest.permission.MANAGE_USERS,null);
  PackageSetting pkgSetting;
  final int uid=Binder.getCallingUid();
  if (UserHandle.getUserId(uid) != userId) {
    mContext.enforceCallingPermission(android.Manifest.permission.INTERACT_ACROSS_USERS_FULL,"getApplicationBlocked for user " + userId);
  }
  long callingId=Binder.clearCallingIdentity();
  try {
synchronized (mPackages) {
      pkgSetting=mSettings.mPackages.get(packageName);
      if (pkgSetting == null) {
        return true;
      }
      return pkgSetting.getBlocked(userId);
    }
  }
  finally {
    Binder.restoreCallingIdentity(callingId);
  }
}
