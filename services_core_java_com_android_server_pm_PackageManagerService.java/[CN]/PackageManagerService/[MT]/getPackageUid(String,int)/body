{
  if (!sUserManager.exists(userId))   return -1;
  enforceCrossUserPermission(Binder.getCallingUid(),userId,false,false,"get package uid");
synchronized (mPackages) {
    PackageParser.Package p=mPackages.get(packageName);
    if (p != null) {
      return UserHandle.getUid(userId,p.applicationInfo.uid);
    }
    PackageSetting ps=mSettings.mPackages.get(packageName);
    if ((ps == null) || (ps.pkg == null) || (ps.pkg.applicationInfo == null)) {
      return -1;
    }
    p=ps.pkg;
    return p != null ? UserHandle.getUid(userId,p.applicationInfo.uid) : -1;
  }
}
