{
  SettingBase sb=(SettingBase)pkg.mExtras;
  if (sb == null) {
    return;
  }
  PermissionsState permissionsState=sb.getPermissionsState();
  for (  String permission : pkg.requestedPermissions) {
    BasePermission bp=mSettings.mPermissions.get(permission);
    if (bp != null && bp.isRuntime() && (grantedPermissions == null || ArrayUtils.contains(grantedPermissions,permission))) {
      permissionsState.grantRuntimePermission(bp,userId);
    }
  }
}
