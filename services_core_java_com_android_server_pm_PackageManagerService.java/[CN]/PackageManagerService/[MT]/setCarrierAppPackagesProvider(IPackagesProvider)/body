{
  enforceSystemOrPhoneCaller("setCarrierAppPackagesProvider");
  long token=Binder.clearCallingIdentity();
  try {
    PackageManagerInternal.PackagesProvider wrapper=new PackageManagerInternal.PackagesProvider(){
      @Override public String[] getPackages(      int userId){
        try {
          return provider.getPackages(userId);
        }
 catch (        RemoteException e) {
          return null;
        }
      }
    }
;
synchronized (mPackages) {
      mDefaultPermissionPolicy.setCarrierAppPackagesProviderLPw(wrapper);
    }
  }
  finally {
    Binder.restoreCallingIdentity(token);
  }
}
