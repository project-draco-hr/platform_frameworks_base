{
  final Intent verification=new Intent(Intent.ACTION_INTENT_FILTER_NEEDS_VERIFICATION);
  final List<ResolveInfo> receivers=queryIntentReceivers(verification,PACKAGE_MIME_TYPE,PackageManager.GET_DISABLED_COMPONENTS,0);
  ComponentName verifierComponentName=null;
  int priority=-1000;
  final int N=receivers.size();
  for (int i=0; i < N; i++) {
    final ResolveInfo info=receivers.get(i);
    if (info.activityInfo == null) {
      continue;
    }
    final String packageName=info.activityInfo.packageName;
    final PackageSetting ps=mSettings.mPackages.get(packageName);
    if (ps == null) {
      continue;
    }
    if (checkPermission(android.Manifest.permission.INTENT_FILTER_VERIFICATION_AGENT,packageName,UserHandle.USER_OWNER) != PackageManager.PERMISSION_GRANTED) {
      continue;
    }
    if (priority < info.priority) {
      priority=info.priority;
      verifierComponentName=new ComponentName(packageName,info.activityInfo.name);
      Slog.d(TAG,"Selecting IntentFilterVerifier: " + verifierComponentName + " with priority: "+ info.priority);
    }
  }
  return verifierComponentName;
}
