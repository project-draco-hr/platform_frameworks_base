{
  Bundle extras=new Bundle(1);
  extras.putInt(Intent.EXTRA_UID,UserHandle.getUid(userId,pkgSetting.appId));
  sendPackageBroadcast(Intent.ACTION_PACKAGE_ADDED,packageName,extras,null,null,new int[]{userId});
  try {
    IActivityManager am=ActivityManagerNative.getDefault();
    final boolean isSystem=isSystemApp(pkgSetting) || isUpdatedSystemApp(pkgSetting);
    if (isSystem && am.isUserRunning(userId,false)) {
      Intent bcIntent=new Intent(Intent.ACTION_BOOT_COMPLETED).addFlags(Intent.FLAG_INCLUDE_STOPPED_PACKAGES).setPackage(packageName);
      am.broadcastIntent(null,bcIntent,null,null,0,null,null,null,android.app.AppOpsManager.OP_NONE,null,false,false,userId);
    }
  }
 catch (  RemoteException e) {
    Slog.w(TAG,"Unable to bootstrap installed package",e);
  }
}
