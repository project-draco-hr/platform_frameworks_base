{
  if (!sUserManager.exists(userId))   return null;
  enforceCrossUserPermission(Binder.getCallingUid(),userId,false,false,"get package info");
synchronized (mPackages) {
    PackageParser.Package p=mPackages.get(packageName);
    if (DEBUG_PACKAGE_INFO)     Log.v(TAG,"getPackageInfo " + packageName + ": "+ p);
    if (p != null) {
      return generatePackageInfo(p,flags,userId);
    }
    if ((flags & PackageManager.GET_UNINSTALLED_PACKAGES) != 0) {
      return generatePackageInfoFromSettingsLPw(packageName,flags,userId);
    }
  }
  return null;
}
