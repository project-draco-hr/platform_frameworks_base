{
  Console.log(Constants.DebugFlags.App.TaskDataLoader,"[RecentsTaskLoader|reload]");
  TaskStack stack=new TaskStack(context);
  SpaceNode root=new SpaceNode(context);
  root.setStack(stack);
  try {
    long t1=System.currentTimeMillis();
    PackageManager pm=context.getPackageManager();
    ActivityManager am=(ActivityManager)context.getSystemService(Context.ACTIVITY_SERVICE);
    List<ActivityManager.RecentTaskInfo> tasks=am.getRecentTasksForUser(25,ActivityManager.RECENT_IGNORE_UNAVAILABLE,UserHandle.CURRENT.getIdentifier());
    Collections.reverse(tasks);
    Console.log(Constants.DebugFlags.App.TimeSystemCalls,"[RecentsTaskLoader|getRecentTasks]","" + (System.currentTimeMillis() - t1) + "ms");
    Console.log(Constants.DebugFlags.App.TaskDataLoader,"[RecentsTaskLoader|tasks]","" + tasks.size());
    Iterator<ActivityManager.RecentTaskInfo> iter=tasks.iterator();
    while (iter.hasNext()) {
      ActivityManager.RecentTaskInfo t=iter.next();
      if (am.isInHomeStack(t.persistentId)) {
        iter.remove();
        continue;
      }
      if (t.baseIntent.getComponent().getPackageName().equals(context.getPackageName())) {
        iter.remove();
        continue;
      }
    }
    t1=System.currentTimeMillis();
    int taskCount=tasks.size();
    for (int i=0; i < taskCount; i++) {
      ActivityManager.RecentTaskInfo t=tasks.get(i);
      ActivityInfo info=pm.getActivityInfo(t.baseIntent.getComponent(),PackageManager.GET_META_DATA);
      String title=info.loadLabel(pm).toString();
      Task task;
      if (i >= (taskCount - preloadCount) || !Constants.DebugFlags.App.EnableBackgroundTaskLoading) {
        Console.log(Constants.DebugFlags.App.TaskDataLoader,"[RecentsTaskLoader|preloadTask]","i: " + i + " task: "+ t.baseIntent.getComponent().getPackageName());
        task=new Task(t.persistentId,t.baseIntent,title,null,null);
        if (Constants.DebugFlags.App.EnableBackgroundTaskLoading) {
          task.icon=mIconCache.get(task);
        }
        if (task.icon == null) {
          task.icon=info.loadIcon(pm);
          if (Constants.DebugFlags.App.EnableBackgroundTaskLoading) {
            mIconCache.put(task,task.icon);
          }
        }
        if (Constants.DebugFlags.App.EnableBackgroundTaskLoading) {
          task.thumbnail=mThumbnailCache.get(task);
        }
        if (task.thumbnail == null) {
          task.thumbnail=am.getTaskTopThumbnail(t.id);
          if (Constants.DebugFlags.App.EnableBackgroundTaskLoading) {
            mThumbnailCache.put(task,task.thumbnail);
          }
        }
        for (int j=0; j < Constants.Values.RecentsTaskLoader.TaskEntryMultiplier; j++) {
          Console.log(Constants.DebugFlags.App.TaskDataLoader,"  [RecentsTaskLoader|task]",t.baseIntent.getComponent().getPackageName());
          stack.addTask(task);
        }
      }
 else {
        for (int j=0; j < Constants.Values.RecentsTaskLoader.TaskEntryMultiplier; j++) {
          Console.log(Constants.DebugFlags.App.TaskDataLoader,"  [RecentsTaskLoader|task]",t.baseIntent.getComponent().getPackageName());
          task=new Task(t.persistentId,t.baseIntent,title,null,null);
          stack.addTask(task);
        }
      }
    }
    Console.log(Constants.DebugFlags.App.TimeSystemCalls,"[RecentsTaskLoader|getAllTaskTopThumbnail]","" + (System.currentTimeMillis() - t1) + "ms");
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  mLoader.start(context);
  return root;
}
