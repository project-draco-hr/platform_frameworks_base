{
  if ((sensor & (SensorManager.SENSOR_ORIENTATION | SensorManager.SENSOR_ORIENTATION_RAW)) != 0) {
synchronized (mNotificationManager) {
      if (value != mCompassAccuracy) {
        Log.d(TAG,"Compass needs calibration, accuracy=" + value);
        if (!SystemProperties.getBoolean("debug.sensors.notification",false)) {
          return;
        }
        mCompassAccuracy=value;
        if (value == -1) {
          mNotificationManager.cancel(0);
        }
 else {
          if (value <= SENSOR_NOTIFICATION_ACCURACY_LEVEL) {
            long token=Binder.clearCallingIdentity();
            try {
              CharSequence banner=mContext.getString(R.string.compass_accuracy_banner);
              CharSequence title=mContext.getString(R.string.compass_accuracy_notificaction_title);
              CharSequence body=mContext.getString(R.string.compass_accuracy_notificaction_body);
              Notification n=new Notification(R.drawable.stat_notify_calibrate_compass,banner,System.currentTimeMillis());
              Intent bogusIntent=new Intent(mContext,SensorService.class);
              PendingIntent contentIntent=PendingIntent.getActivity(mContext,0,bogusIntent,PendingIntent.FLAG_CANCEL_CURRENT | PendingIntent.FLAG_ONE_SHOT);
              n.setLatestEventInfo(mContext,title,body,contentIntent);
              mNotificationManager.notify(0,n);
            }
  finally {
              Binder.restoreCallingIdentity(token);
            }
          }
 else {
            mNotificationManager.cancel(0);
          }
        }
      }
    }
  }
}
