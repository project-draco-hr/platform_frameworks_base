{
  if (localLOGV)   Log.d(TAG,"enableSensor " + sensor + " "+ enable);
  if (listener == null)   throw new NullPointerException("listener is null in enableSensor");
synchronized (mListeners) {
    if (enable != SENSOR_DISABLE && !_sensors_control_activate(sensor,true)) {
      Log.w(TAG,"could not enable sensor " + sensor);
      return false;
    }
    IBinder binder=listener;
    Listener l=null;
    int minDelay=enable;
    int size=mListeners.size();
    for (int i=0; i < size; i++) {
      Listener test=mListeners.get(i);
      if (binder.equals(test.mListener)) {
        l=test;
      }
      if (minDelay > test.mDelay)       minDelay=test.mDelay;
    }
    if (l == null && enable != SENSOR_DISABLE) {
      l=new Listener(listener);
      binder.linkToDeath(l,0);
      mListeners.add(l);
      mListeners.notify();
    }
    if (l == null) {
      throw new NullPointerException("no Listener object in enableSensor");
    }
    if (minDelay >= 0) {
      _sensors_control_set_delay(minDelay);
    }
    if (enable != SENSOR_DISABLE) {
      l.addSensor(sensor,enable);
    }
 else {
      l.removeSensor(sensor);
      deactivateIfUnused(sensor);
      if (l.mSensors == 0) {
        mListeners.remove(l);
        binder.unlinkToDeath(l,0);
        mListeners.notify();
      }
    }
  }
  return true;
}
