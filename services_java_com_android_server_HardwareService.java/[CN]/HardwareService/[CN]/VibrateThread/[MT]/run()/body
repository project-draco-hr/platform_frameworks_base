{
synchronized (this) {
    int index=0;
    long[] pattern=mPattern;
    int len=pattern.length;
    long duration=0;
    while (!mDone) {
      if (index < len) {
        duration+=pattern[index++];
      }
      delay(duration);
      if (mDone) {
        break;
      }
      if (index < len) {
        duration=pattern[index++];
        if (duration > 0) {
          HardwareService.this.vibratorOn(duration);
        }
      }
 else {
        if (mRepeat < 0) {
          break;
        }
 else {
          index=mRepeat;
          duration=0;
        }
      }
    }
    if (mDone) {
      HardwareService.this.vibratorOff();
    }
    mWakeLock.release();
  }
synchronized (HardwareService.this) {
    if (mThread == this) {
      mThread=null;
    }
  }
}
