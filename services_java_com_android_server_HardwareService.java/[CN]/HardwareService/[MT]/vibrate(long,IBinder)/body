{
  if (mContext.checkCallingOrSelfPermission(android.Manifest.permission.VIBRATE) != PackageManager.PERMISSION_GRANTED) {
    throw new SecurityException("Requires VIBRATE permission");
  }
  if (milliseconds <= 0 || (mCurrentVibration != null && mCurrentVibration.hasLongerTimeout(milliseconds))) {
    return;
  }
  Vibration vib=new Vibration(token,milliseconds);
synchronized (mVibrations) {
    removeVibrationLocked(token);
    doCancelVibrateLocked();
    mCurrentVibration=vib;
    startVibrationLocked(vib);
  }
}
