{
  Log.v(LOGTAG,"Searching tests under " + dir);
  File d=new File(dir);
  if (!d.isDirectory()) {
    throw new AssertionError("A directory expected, but got " + dir);
  }
  String[] files=d.list();
  for (int i=0; i < files.length; i++) {
    String s=dir + "/" + files[i];
    if (s.endsWith("TEMPLATE.html")) {
      continue;
    }
    if (FileFilter.ignoreTest(s)) {
      Log.v(LOGTAG,"  Ignoring: " + s);
      continue;
    }
    if (s.toLowerCase().endsWith(".html") || s.toLowerCase().endsWith(".xml")) {
      bos.write(s.getBytes());
      bos.write('\n');
      continue;
    }
    File f=new File(s);
    if (f.isDirectory()) {
      findLayoutTestsRecursively(bos,s);
      continue;
    }
    Log.v(LOGTAG,"Skipping " + s);
  }
}
