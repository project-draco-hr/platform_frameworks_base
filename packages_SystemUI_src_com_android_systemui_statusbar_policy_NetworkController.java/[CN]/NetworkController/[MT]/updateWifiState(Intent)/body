{
  final String action=intent.getAction();
  if (action.equals(WifiManager.WIFI_STATE_CHANGED_ACTION)) {
    mWifiEnabled=intent.getIntExtra(WifiManager.EXTRA_WIFI_STATE,WifiManager.WIFI_STATE_UNKNOWN) == WifiManager.WIFI_STATE_ENABLED;
  }
 else   if (action.equals(WifiManager.NETWORK_STATE_CHANGED_ACTION)) {
    final NetworkInfo networkInfo=(NetworkInfo)intent.getParcelableExtra(WifiManager.EXTRA_NETWORK_INFO);
    boolean wasConnected=mWifiConnected;
    mWifiConnected=networkInfo != null && networkInfo.isConnected();
    if (mWifiConnected && !wasConnected) {
      WifiInfo info=(WifiInfo)intent.getParcelableExtra(WifiManager.EXTRA_WIFI_INFO);
      if (info == null) {
        info=mWifiManager.getConnectionInfo();
      }
      if (info != null) {
        mWifiSsid=huntForSsid(info);
      }
 else {
        mWifiSsid=null;
      }
    }
 else     if (!mWifiConnected) {
      mWifiSsid=null;
    }
  }
 else   if (action.equals(WifiManager.RSSI_CHANGED_ACTION)) {
    mWifiRssi=intent.getIntExtra(WifiManager.EXTRA_NEW_RSSI,-200);
    mWifiLevel=WifiManager.calculateSignalLevel(mWifiRssi,WifiIcons.WIFI_LEVEL_COUNT);
  }
  updateWifiIcons();
}
