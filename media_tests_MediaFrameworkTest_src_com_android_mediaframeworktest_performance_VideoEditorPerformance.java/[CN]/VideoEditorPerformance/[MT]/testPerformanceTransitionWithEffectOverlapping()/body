{
  final String videoItemFileName1=INPUT_FILE_PATH + "H264_BP_1080x720_30fps_800kbps_1_17.mp4";
  final String videoItemFileName2=INPUT_FILE_PATH + "MPEG4_SP_640x480_15fps_512kbps_AACLC_48khz_132kbps_s_0_26.mp4";
  final int renderingMode=MediaItem.RENDERING_MODE_BLACK_BORDER;
  final int transitionDuration=5000;
  final int transitionBehavior=Transition.BEHAVIOR_MIDDLE_FAST;
  final int effectItemStartTime1=5000;
  final int effectItemDurationTime1=5000;
  final int effectType1=EffectColor.TYPE_COLOR;
  final int effectColorType1=EffectColor.GREEN;
  final int effectItemStartTime2=5000;
  final int effectItemDurationTime2=5000;
  final int effectType2=EffectColor.TYPE_COLOR;
  final int effectColorType2=EffectColor.GREEN;
  int averageTime=0;
  final String[] loggingInfo=new String[1];
  final MediaVideoItem mediaVideoItem1=new MediaVideoItem(mVideoEditor,"mediaItem1",videoItemFileName1,renderingMode);
  mVideoEditor.addMediaItem(mediaVideoItem1);
  final MediaVideoItem mediaVideoItem2=new MediaVideoItem(mVideoEditor,"mediaItem2",videoItemFileName2,renderingMode);
  mVideoEditor.addMediaItem(mediaVideoItem2);
  final TransitionCrossfade transitionCrossFade=new TransitionCrossfade("transitionCrossFade",mediaVideoItem1,mediaVideoItem2,transitionDuration,transitionBehavior);
  mVideoEditor.addTransition(transitionCrossFade);
  final EffectColor effectColor1=new EffectColor(mediaVideoItem1,"effect1",effectItemStartTime1,effectItemDurationTime1,effectType1,effectColorType1);
  mediaVideoItem1.addEffect(effectColor1);
  final EffectColor effectColor2=new EffectColor(mediaVideoItem2,"effect2",effectItemStartTime2,effectItemDurationTime2,effectType2,effectColorType2);
  mediaVideoItem2.addEffect(effectColor2);
  for (int i=0; i < NUM_OF_ITERATIONS; i++) {
    final long duration1=SystemClock.uptimeMillis();
    mVideoEditor.generatePreview(new MediaProcessingProgressListener(){
      public void onProgress(      Object item,      int action,      int progress){
      }
    }
);
    final long duration2=SystemClock.uptimeMillis();
    mVideoEditor.removeTransition(transitionCrossFade.getId());
    mVideoEditor.addTransition(transitionCrossFade);
    averageTime+=duration2 - duration1;
  }
  final long durationToAddObjects=(averageTime);
  final float timeTaken=(float)durationToAddObjects * 1.0f / (float)NUM_OF_ITERATIONS;
  loggingInfo[0]="Time taken to TransitionWithEffectOverlapping :" + timeTaken;
  writeTimingInfo("testPerformanceTransitionWithEffectOverlapping",loggingInfo);
}
