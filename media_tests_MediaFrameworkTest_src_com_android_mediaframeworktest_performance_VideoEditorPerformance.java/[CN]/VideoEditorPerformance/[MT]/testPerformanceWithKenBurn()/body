{
  final String videoItemFileName=INPUT_FILE_PATH + "H264_BP_1080x720_30fps_800kbps_1_17.mp4";
  final String imageItemFileName=INPUT_FILE_PATH + "IMG_1600x1200.jpg";
  final int renderingMode=MediaItem.RENDERING_MODE_BLACK_BORDER;
  long averageTime=0;
  final String[] loggingInfo=new String[1];
  final MediaVideoItem mediaVideoItem=new MediaVideoItem(mVideoEditor,"mediaItem1",videoItemFileName,renderingMode);
  mediaVideoItem.setExtractBoundaries(0,10000);
  mVideoEditor.addMediaItem(mediaVideoItem);
  final MediaImageItem mediaImageItem=new MediaImageItem(mVideoEditor,"mediaItem2",imageItemFileName,10000,renderingMode);
  mVideoEditor.addMediaItem(mediaImageItem);
  final Rect startRect=new Rect((mediaImageItem.getHeight() / 3),(mediaImageItem.getWidth() / 3),(mediaImageItem.getHeight() / 2),(mediaImageItem.getWidth() / 2));
  final Rect endRect=new Rect(0,0,mediaImageItem.getWidth(),mediaImageItem.getHeight());
  final EffectKenBurns kbEffectOnMediaItem=new EffectKenBurns(mediaImageItem,"KBOnM2",startRect,endRect,500,3000);
  mediaImageItem.addEffect(kbEffectOnMediaItem);
  for (int i=0; i < NUM_OF_ITERATIONS; i++) {
    final long duration1=SystemClock.uptimeMillis();
    mVideoEditor.generatePreview(new MediaProcessingProgressListener(){
      public void onProgress(      Object item,      int action,      int progress){
      }
    }
);
    final long duration2=SystemClock.uptimeMillis();
    mediaImageItem.removeEffect(kbEffectOnMediaItem.getId());
    mediaImageItem.addEffect(kbEffectOnMediaItem);
    averageTime+=duration2 - duration1;
  }
  final long durationToAddObjects=(averageTime);
  final float timeTaken=(float)durationToAddObjects * 1.0f / (float)NUM_OF_ITERATIONS;
  loggingInfo[0]="Time taken to Generate KenBurn Effect :" + timeTaken;
  writeTimingInfo("testPerformanceWithKenBurn",loggingInfo);
}
