{
  if (service.delayed) {
    if (DEBUG_DELAYED_STATS)     Slog.v(TAG,"Delaying stop of pending: " + service);
    service.delayedStop=true;
    return;
  }
synchronized (service.stats.getBatteryStats()) {
    service.stats.stopRunningLocked();
  }
  service.startRequested=false;
  if (service.tracker != null) {
    service.tracker.setStarted(false,mAm.mProcessStats.getMemFactorLocked(),SystemClock.uptimeMillis());
  }
  service.callStart=false;
  bringDownServiceIfNeededLocked(service,false,false);
}
