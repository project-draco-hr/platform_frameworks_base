{
  getActivity().runOnUiThread(new Runnable(){
    @Override public void run(){
      mEditText.setText(RTL_STRING);
      mEditText.setSelection(0,0);
    }
  }
);
  getInstrumentation().waitForIdleSync();
  Drawable drawable=mEditText.getEditorForTesting().getCursorDrawable()[0];
  Rect drawableBounds=drawable.getBounds();
  Rect drawablePadding=new Rect();
  drawable.getPadding(drawablePadding);
  int maxRight=mEditText.getWidth() - mEditText.getCompoundPaddingRight() - mEditText.getCompoundPaddingLeft() + mEditText.getScrollX();
  int diff=drawableBounds.right - drawablePadding.right - maxRight;
  assertTrue(diff >= 0 && diff <= 1);
}
