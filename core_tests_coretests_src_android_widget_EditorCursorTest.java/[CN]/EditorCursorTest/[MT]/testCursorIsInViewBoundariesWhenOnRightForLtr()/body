{
  getActivity().runOnUiThread(new Runnable(){
    @Override public void run(){
      mEditText.setText("aaaaaaaaaaaaaaaaaaaaaa");
      int length=mEditText.getText().length();
      mEditText.setSelection(length,length);
    }
  }
);
  getInstrumentation().waitForIdleSync();
  Editor editor=mEditText.getEditorForTesting();
  Drawable drawable=editor.getCursorDrawable()[0];
  Rect drawableBounds=drawable.getBounds();
  Rect drawablePadding=new Rect();
  drawable.getPadding(drawablePadding);
  int maxRight=mEditText.getWidth() - mEditText.getCompoundPaddingRight() - mEditText.getCompoundPaddingLeft() + +mEditText.getScrollX();
  int diff=drawableBounds.right - drawablePadding.right - maxRight;
  assertTrue(diff >= 0 && diff <= 1);
}
