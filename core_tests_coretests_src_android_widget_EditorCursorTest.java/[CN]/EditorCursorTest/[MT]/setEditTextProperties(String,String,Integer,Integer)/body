{
  getActivity().runOnUiThread(new Runnable(){
    @Override public void run(){
      if (textDirection != null)       mEditText.setTextDirection(textDirection);
      if (text != null)       mEditText.setText(text);
      if (hint != null)       mEditText.setHint(hint);
      if (selection != null)       mEditText.setSelection(selection);
    }
  }
);
  getInstrumentation().waitForIdleSync();
  final CountDownLatch latch=new CountDownLatch(1);
  mEditText.postOnAnimationDelayed(new Runnable(){
    @Override public void run(){
      latch.countDown();
    }
  }
,CURSOR_BLINK_MS);
  try {
    assertThat("Problem while waiting for the cursor to blink",latch.await(10,TimeUnit.SECONDS),equalTo(true));
  }
 catch (  Exception e) {
    fail("Problem while waiting for the cursor to blink");
  }
}
