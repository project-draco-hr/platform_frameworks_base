{
  ContentResolver resolver=mContext.getContentResolver();
  boolean updateRotation=false;
synchronized (mLock) {
    mEndcallBehavior=Settings.System.getInt(resolver,Settings.System.END_BUTTON_BEHAVIOR,Settings.System.END_BUTTON_BEHAVIOR_DEFAULT);
    mIncallPowerBehavior=Settings.Secure.getInt(resolver,Settings.Secure.INCALL_POWER_BUTTON_BEHAVIOR,Settings.Secure.INCALL_POWER_BUTTON_BEHAVIOR_DEFAULT);
    int userRotation=Settings.System.getInt(resolver,Settings.System.USER_ROTATION,Surface.ROTATION_0);
    if (mUserRotation != userRotation) {
      mUserRotation=userRotation;
      updateRotation=true;
    }
    int userRotationMode=Settings.System.getInt(resolver,Settings.System.ACCELEROMETER_ROTATION,0) != 0 ? WindowManagerPolicy.USER_ROTATION_FREE : WindowManagerPolicy.USER_ROTATION_LOCKED;
    if (mUserRotationMode != userRotationMode) {
      mUserRotationMode=userRotationMode;
      updateRotation=true;
      updateOrientationListenerLp();
    }
    if (mSystemReady) {
      int pointerLocation=Settings.System.getInt(resolver,Settings.System.POINTER_LOCATION,0);
      if (mPointerLocationMode != pointerLocation) {
        mPointerLocationMode=pointerLocation;
        mHandler.sendEmptyMessage(pointerLocation != 0 ? MSG_ENABLE_POINTER_LOCATION : MSG_DISABLE_POINTER_LOCATION);
      }
    }
    mLockScreenTimeout=Settings.System.getInt(resolver,Settings.System.SCREEN_OFF_TIMEOUT,0);
    String imId=Settings.Secure.getString(resolver,Settings.Secure.DEFAULT_INPUT_METHOD);
    boolean hasSoftInput=imId != null && imId.length() > 0;
    if (mHasSoftInput != hasSoftInput) {
      mHasSoftInput=hasSoftInput;
      updateRotation=true;
    }
  }
  if (updateRotation) {
    updateRotation(true);
  }
}
