{
synchronized (mScreenshotLock) {
    if (mScreenshotConnection != null) {
      return;
    }
    ComponentName cn=new ComponentName("com.android.systemui","com.android.systemui.screenshot.TakeScreenshotService");
    Intent intent=new Intent();
    intent.setComponent(cn);
    ServiceConnection conn=new ServiceConnection(){
      @Override public void onServiceConnected(      ComponentName name,      IBinder service){
synchronized (mScreenshotLock) {
          if (mScreenshotConnection != this) {
            return;
          }
          Messenger messenger=new Messenger(service);
          Message msg=Message.obtain(null,1);
          final ServiceConnection myConn=this;
          Handler h=new Handler(mHandler.getLooper()){
            @Override public void handleMessage(            Message msg){
synchronized (mScreenshotLock) {
                if (mScreenshotConnection == myConn) {
                  mContext.unbindService(mScreenshotConnection);
                  mScreenshotConnection=null;
                  mHandler.removeCallbacks(mScreenshotTimeout);
                }
              }
            }
          }
;
          msg.replyTo=new Messenger(h);
          try {
            messenger.send(msg);
          }
 catch (          RemoteException e) {
          }
        }
      }
      @Override public void onServiceDisconnected(      ComponentName name){
      }
    }
;
    if (mContext.bindService(intent,conn,Context.BIND_AUTO_CREATE)) {
      mScreenshotConnection=conn;
      mHandler.postDelayed(mScreenshotTimeout,10000);
    }
  }
}
