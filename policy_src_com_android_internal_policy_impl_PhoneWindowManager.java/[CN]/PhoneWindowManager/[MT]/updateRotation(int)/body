{
  mPowerManager.setKeyboardVisibility(mLidOpen == LID_OPEN);
  int rotation=Surface.ROTATION_0;
  if (mHdmiPlugged) {
    rotation=Surface.ROTATION_0;
  }
 else   if (mLidOpen == LID_OPEN) {
    rotation=mLidOpenRotation;
  }
 else   if (mDockMode == Intent.EXTRA_DOCK_STATE_CAR && mCarDockRotation >= 0) {
    rotation=mCarDockRotation;
  }
 else   if (mDockMode == Intent.EXTRA_DOCK_STATE_DESK && mDeskDockRotation >= 0) {
    rotation=mDeskDockRotation;
  }
  try {
    mWindowManager.setRotation(rotation,true,mFancyRotationAnimation | animFlags);
  }
 catch (  RemoteException e) {
  }
}
