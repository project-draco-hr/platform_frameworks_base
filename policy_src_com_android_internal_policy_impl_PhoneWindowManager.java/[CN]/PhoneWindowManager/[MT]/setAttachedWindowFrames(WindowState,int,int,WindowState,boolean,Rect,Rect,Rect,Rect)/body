{
  if (win.getSurfaceLayer() > mDockLayer && attached.getSurfaceLayer() < mDockLayer) {
    df.left=cf.left=vf.left=mDockLeft;
    df.top=cf.top=vf.top=mDockTop;
    df.right=cf.right=vf.right=mDockRight;
    df.bottom=cf.bottom=vf.bottom=mDockBottom;
  }
 else {
    if (adjust != SOFT_INPUT_ADJUST_RESIZE) {
      cf.set(attached.getDisplayFrameLw());
    }
 else {
      cf.set(attached.getContentFrameLw());
      if (attached.getSurfaceLayer() < mDockLayer) {
        if (cf.left < mContentLeft)         cf.left=mContentLeft;
        if (cf.top < mContentTop)         cf.top=mContentTop;
        if (cf.right > mContentRight)         cf.right=mContentRight;
        if (cf.bottom > mContentBottom)         cf.bottom=mContentBottom;
      }
    }
    df.set(insetDecors ? attached.getDisplayFrameLw() : cf);
    vf.set(attached.getVisibleFrameLw());
  }
  pf.set((fl & FLAG_LAYOUT_IN_SCREEN) == 0 ? attached.getFrameLw() : df);
}
