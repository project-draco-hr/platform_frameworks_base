{
  if (mStatusHideybar == HIDEYBAR_SHOWING && 0 == (visibility & View.STATUS_BAR_OVERLAY)) {
    mStatusHideybar=HIDEYBAR_HIDING;
    mStatusBar.hideLw(true);
  }
  if (mNavigationHideybar == HIDEYBAR_SHOWING && 0 == (visibility & View.NAVIGATION_BAR_OVERLAY)) {
    mNavigationHideybar=HIDEYBAR_HIDING;
    mNavigationBar.hideLw(true);
  }
  mResettingSystemUiFlags&=visibility;
  return visibility & ~mResettingSystemUiFlags & ~mForceClearedSystemUiFlags;
}
