{
  if (mStatusBar != null && mStatusHideybar == HIDEYBAR_SHOWING && 0 == (visibility & View.STATUS_BAR_OVERLAY)) {
    mStatusHideybar=HIDEYBAR_HIDING;
    setBarShowingLw(mStatusBar,false);
  }
  if (mNavigationBar != null && mNavigationHideybar == HIDEYBAR_SHOWING && 0 == (visibility & View.NAVIGATION_BAR_OVERLAY)) {
    mNavigationHideybar=HIDEYBAR_HIDING;
    setBarShowingLw(mNavigationBar,false);
  }
  mResettingSystemUiFlags&=visibility;
  return visibility & ~mResettingSystemUiFlags & ~mForceClearedSystemUiFlags;
}
