{
  if (display.getDisplayId() != Display.DEFAULT_DISPLAY) {
    throw new IllegalArgumentException("Can only set the default display");
  }
  mDisplay=display;
  int shortSize, longSize;
  if (width > height) {
    shortSize=height;
    longSize=width;
    mLandscapeRotation=Surface.ROTATION_0;
    mSeascapeRotation=Surface.ROTATION_180;
    if (mContext.getResources().getBoolean(com.android.internal.R.bool.config_reverseDefaultRotation)) {
      mPortraitRotation=Surface.ROTATION_90;
      mUpsideDownRotation=Surface.ROTATION_270;
    }
 else {
      mPortraitRotation=Surface.ROTATION_270;
      mUpsideDownRotation=Surface.ROTATION_90;
    }
  }
 else {
    shortSize=width;
    longSize=height;
    mPortraitRotation=Surface.ROTATION_0;
    mUpsideDownRotation=Surface.ROTATION_180;
    if (mContext.getResources().getBoolean(com.android.internal.R.bool.config_reverseDefaultRotation)) {
      mLandscapeRotation=Surface.ROTATION_270;
      mSeascapeRotation=Surface.ROTATION_90;
    }
 else {
      mLandscapeRotation=Surface.ROTATION_90;
      mSeascapeRotation=Surface.ROTATION_270;
    }
  }
  mStatusBarHeight=mContext.getResources().getDimensionPixelSize(com.android.internal.R.dimen.status_bar_height);
  mNavigationBarHeightForRotation[mPortraitRotation]=mNavigationBarHeightForRotation[mUpsideDownRotation]=mContext.getResources().getDimensionPixelSize(com.android.internal.R.dimen.navigation_bar_height);
  mNavigationBarHeightForRotation[mLandscapeRotation]=mNavigationBarHeightForRotation[mSeascapeRotation]=mContext.getResources().getDimensionPixelSize(com.android.internal.R.dimen.navigation_bar_height_landscape);
  mNavigationBarWidthForRotation[mPortraitRotation]=mNavigationBarWidthForRotation[mUpsideDownRotation]=mNavigationBarWidthForRotation[mLandscapeRotation]=mNavigationBarWidthForRotation[mSeascapeRotation]=mContext.getResources().getDimensionPixelSize(com.android.internal.R.dimen.navigation_bar_width);
  int shortSizeDp=shortSize * DisplayMetrics.DENSITY_DEFAULT / density;
  mNavigationBarCanMove=shortSizeDp < 600;
  mHasNavigationBar=mContext.getResources().getBoolean(com.android.internal.R.bool.config_showNavigationBar);
  String navBarOverride=SystemProperties.get("qemu.hw.mainkeys");
  if ("1".equals(navBarOverride)) {
    mHasNavigationBar=false;
  }
 else   if ("0".equals(navBarOverride)) {
    mHasNavigationBar=true;
  }
  if (mHasNavigationBar) {
    mCanHideNavigationBar=true;
  }
 else {
    mCanHideNavigationBar=false;
  }
  if ("portrait".equals(SystemProperties.get("persist.demo.hdmirotation"))) {
    mDemoHdmiRotation=mPortraitRotation;
  }
 else {
    mDemoHdmiRotation=mLandscapeRotation;
  }
  mDemoHdmiRotationLock=SystemProperties.getBoolean("persist.demo.hdmirotationlock",false);
}
