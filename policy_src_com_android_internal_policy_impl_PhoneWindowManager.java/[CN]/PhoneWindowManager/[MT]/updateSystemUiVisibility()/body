{
  if (mFocusedWindow != null) {
    final WindowManager.LayoutParams params=mFocusedWindow.getAttrs();
    final int visibility=params.systemUiVisibility | params.subtreeSystemUiVisibility;
    mHandler.post(new Runnable(){
      public void run(){
        if (mStatusBarService == null) {
          mStatusBarService=IStatusBarService.Stub.asInterface(ServiceManager.getService("statusbar"));
        }
        if (mStatusBarService != null) {
          long origId=Binder.clearCallingIdentity();
          try {
            mStatusBarService.setSystemUiVisibility(visibility);
          }
 catch (          RemoteException e) {
            mStatusBarService=null;
          }
 finally {
            Binder.restoreCallingIdentity(origId);
          }
        }
      }
    }
);
  }
}
