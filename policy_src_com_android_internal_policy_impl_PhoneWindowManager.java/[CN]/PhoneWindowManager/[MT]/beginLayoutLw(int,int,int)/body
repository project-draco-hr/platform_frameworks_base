{
  mUnrestrictedScreenLeft=mUnrestrictedScreenTop=0;
  mUnrestrictedScreenWidth=displayWidth;
  mUnrestrictedScreenHeight=displayHeight;
  mRestrictedScreenLeft=mRestrictedScreenTop=0;
  mRestrictedScreenWidth=displayWidth;
  mRestrictedScreenHeight=displayHeight;
  mDockLeft=mContentLeft=mCurLeft=0;
  mDockTop=mContentTop=mCurTop=0;
  mDockRight=mContentRight=mCurRight=displayWidth;
  mDockBottom=mContentBottom=mCurBottom=displayHeight;
  mDockLayer=0x10000000;
  final Rect pf=mTmpParentFrame;
  final Rect df=mTmpDisplayFrame;
  final Rect vf=mTmpVisibleFrame;
  pf.left=df.left=vf.left=mDockLeft;
  pf.top=df.top=vf.top=mDockTop;
  pf.right=df.right=vf.right=mDockRight;
  pf.bottom=df.bottom=vf.bottom=mDockBottom;
  if (mStatusBar != null) {
    if (mNavigationBar != null) {
      final boolean navVisible=mNavigationBar.isVisibleLw() && (mLastSystemUiVisibility & View.SYSTEM_UI_FLAG_HIDE_NAVIGATION) == 0;
      if (displayWidth < displayHeight) {
        mTmpNavigationFrame.set(0,displayHeight - mNavigationBarHeight,displayWidth,displayHeight);
        if (navVisible) {
          mDockBottom=mTmpNavigationFrame.top;
          mRestrictedScreenHeight=mDockBottom - mDockTop;
        }
 else {
          mTmpNavigationFrame.offset(0,mNavigationBarHeight);
        }
      }
 else {
        mTmpNavigationFrame.set(displayWidth - mNavigationBarWidth,0,displayWidth,displayHeight);
        if (navVisible) {
          mDockRight=mTmpNavigationFrame.left;
          mRestrictedScreenWidth=mDockRight - mDockLeft;
        }
 else {
          mTmpNavigationFrame.offset(mNavigationBarWidth,0);
        }
      }
      if (navVisible) {
        if (mHideNavFakeWindow != null) {
          mHideNavFakeWindow.dismiss();
          mHideNavFakeWindow=null;
        }
      }
 else       if (mHideNavFakeWindow == null) {
        mHideNavFakeWindow=mWindowManagerFuncs.addFakeWindow(mHandler.getLooper(),mHideNavInputHandler,"hidden nav",WindowManager.LayoutParams.TYPE_HIDDEN_NAV_CONSUMER,0,false,false,true);
      }
      mNavigationBar.computeFrameLw(mTmpNavigationFrame,mTmpNavigationFrame,mTmpNavigationFrame,mTmpNavigationFrame);
      if (DEBUG_LAYOUT)       Log.i(TAG,"mNavigationBar frame: " + mTmpNavigationFrame);
    }
    if (DEBUG_LAYOUT)     Log.i(TAG,String.format("mDock rect: (%d,%d - %d,%d)",mDockLeft,mDockTop,mDockRight,mDockBottom));
    pf.left=df.left=vf.left=mDockLeft;
    pf.top=df.top=vf.top=mDockTop;
    pf.right=df.right=vf.right=mDockRight;
    pf.bottom=df.bottom=vf.bottom=mDockBottom;
    mStatusBar.computeFrameLw(pf,df,vf,vf);
    if (mStatusBar.isVisibleLw()) {
      final Rect r=mStatusBar.getFrameLw();
      if (mStatusBarCanHide) {
        if (mDockTop == r.top)         mDockTop=r.bottom;
 else         if (mDockBottom == r.bottom)         mDockBottom=r.top;
        mContentTop=mCurTop=mDockTop;
        mContentBottom=mCurBottom=mDockBottom;
        mContentLeft=mCurLeft=mDockLeft;
        mContentRight=mCurRight=mDockRight;
        if (DEBUG_LAYOUT)         Log.v(TAG,"Status bar: " + String.format("dock=[%d,%d][%d,%d] content=[%d,%d][%d,%d] cur=[%d,%d][%d,%d]",mDockLeft,mDockTop,mDockRight,mDockBottom,mContentLeft,mContentTop,mContentRight,mContentBottom,mCurLeft,mCurTop,mCurRight,mCurBottom));
      }
 else {
        if (mRestrictedScreenTop == r.top) {
          mRestrictedScreenTop=r.bottom;
          mRestrictedScreenHeight-=(r.bottom - r.top);
        }
 else         if ((mRestrictedScreenHeight - mRestrictedScreenTop) == r.bottom) {
          mRestrictedScreenHeight-=(r.bottom - r.top);
        }
        mContentTop=mCurTop=mDockTop=mRestrictedScreenTop;
        mContentBottom=mCurBottom=mDockBottom=mRestrictedScreenTop + mRestrictedScreenHeight;
        if (DEBUG_LAYOUT)         Log.v(TAG,"Status bar: restricted screen area: (" + mRestrictedScreenLeft + ","+ mRestrictedScreenTop+ ","+ (mRestrictedScreenLeft + mRestrictedScreenWidth)+ ","+ (mRestrictedScreenTop + mRestrictedScreenHeight)+ ")");
      }
    }
  }
}
