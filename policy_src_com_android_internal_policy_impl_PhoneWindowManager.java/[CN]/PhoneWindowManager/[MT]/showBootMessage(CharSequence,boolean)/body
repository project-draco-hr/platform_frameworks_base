{
  if (mHeadless)   return;
  mHandler.post(new Runnable(){
    @Override public void run(){
      if (mBootMsgDialog == null) {
        mBootMsgDialog=new ProgressDialog(mContext){
          @Override public boolean dispatchKeyEvent(          KeyEvent event){
            return true;
          }
          @Override public boolean dispatchKeyShortcutEvent(          KeyEvent event){
            return true;
          }
          @Override public boolean dispatchTouchEvent(          MotionEvent ev){
            return true;
          }
          @Override public boolean dispatchTrackballEvent(          MotionEvent ev){
            return true;
          }
          @Override public boolean dispatchGenericMotionEvent(          MotionEvent ev){
            return true;
          }
          @Override public boolean dispatchPopulateAccessibilityEvent(          AccessibilityEvent event){
            return true;
          }
        }
;
        mBootMsgDialog.setTitle(R.string.android_upgrading_title);
        mBootMsgDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        mBootMsgDialog.setIndeterminate(true);
        mBootMsgDialog.getWindow().setType(WindowManager.LayoutParams.TYPE_BOOT_PROGRESS);
        mBootMsgDialog.getWindow().addFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND | WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN);
        mBootMsgDialog.getWindow().setDimAmount(1);
        WindowManager.LayoutParams lp=mBootMsgDialog.getWindow().getAttributes();
        lp.screenOrientation=ActivityInfo.SCREEN_ORIENTATION_NOSENSOR;
        mBootMsgDialog.getWindow().setAttributes(lp);
        mBootMsgDialog.setCancelable(false);
        mBootMsgDialog.show();
      }
      mBootMsgDialog.setMessage(msg);
    }
  }
);
}
