{
  if (mUserRotationMode == WindowManagerPolicy.USER_ROTATION_LOCKED) {
    if (isLandscapeOrSeascape(mUserRotation)) {
      return mUserRotation;
    }
 else {
      return mLandscapeRotation;
    }
  }
  int sensorRotation=mOrientationListener.getCurrentRotation(lastRotation);
  if (isLandscapeOrSeascape(sensorRotation)) {
    return sensorRotation;
  }
  if (isLandscapeOrSeascape(lastRotation)) {
    return lastRotation;
  }
  return mLandscapeRotation;
}
