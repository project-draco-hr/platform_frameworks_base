{
switch (attrs.type) {
case TYPE_STATUS_BAR:
    mContext.enforceCallingOrSelfPermission(android.Manifest.permission.STATUS_BAR_SERVICE,"PhoneWindowManager");
  if (mStatusBar != null) {
    return WindowManagerImpl.ADD_MULTIPLE_SINGLETON;
  }
mStatusBar=win;
mStatusBarCanHide=mContext.getResources().getBoolean(com.android.internal.R.bool.config_statusBarCanHide);
mStatusBarHeight=mContext.getResources().getDimensionPixelSize(com.android.internal.R.dimen.status_bar_height);
break;
case TYPE_STATUS_BAR_PANEL:
mContext.enforceCallingOrSelfPermission(android.Manifest.permission.STATUS_BAR_SERVICE,"PhoneWindowManager");
mStatusBarPanels.add(win);
break;
case TYPE_STATUS_BAR_SUB_PANEL:
mContext.enforceCallingOrSelfPermission(android.Manifest.permission.STATUS_BAR_SERVICE,"PhoneWindowManager");
mStatusBarPanels.add(win);
break;
case TYPE_KEYGUARD:
if (mKeyguard != null) {
return WindowManagerImpl.ADD_MULTIPLE_SINGLETON;
}
mKeyguard=win;
break;
}
return WindowManagerImpl.ADD_OKAY;
}
