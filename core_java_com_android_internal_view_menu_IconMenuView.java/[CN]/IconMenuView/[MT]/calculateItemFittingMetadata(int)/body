{
  int maxNumItemsPerRow=mMaxItemsPerRow;
  int numItems=getChildCount();
  for (int i=0; i < numItems; i++) {
    LayoutParams lp=(LayoutParams)getChildAt(i).getLayoutParams();
    lp.maxNumItemsOnRow=1;
    for (int curNumItemsPerRow=maxNumItemsPerRow; curNumItemsPerRow > 0; curNumItemsPerRow--) {
      if (lp.desiredWidth < width / curNumItemsPerRow) {
        lp.maxNumItemsOnRow=curNumItemsPerRow;
        break;
      }
    }
  }
}
