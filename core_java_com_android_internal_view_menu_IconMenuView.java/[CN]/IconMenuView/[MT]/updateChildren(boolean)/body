{
  removeAllViews();
  final ArrayList<MenuItemImpl> itemsToShow=mMenu.getVisibleItems();
  final int numItems=itemsToShow.size();
  final int numItemsThatCanFit=mMaxItems;
  final int minFitMinus1AndNumItems=Math.min(numItemsThatCanFit - 1,numItems);
  MenuItemImpl itemData;
  for (int i=0; i < minFitMinus1AndNumItems; i++) {
    itemData=itemsToShow.get(i);
    addItemView((IconMenuItemView)itemData.getItemView(MenuBuilder.TYPE_ICON,this));
  }
  if (numItems > numItemsThatCanFit) {
    if (mMoreItemView == null) {
      mMoreItemView=createMoreItemView();
    }
    addItemView(mMoreItemView);
    mNumActualItemsShown=numItemsThatCanFit - 1;
  }
 else   if (numItems == numItemsThatCanFit) {
    final MenuItemImpl lastItemData=itemsToShow.get(numItemsThatCanFit - 1);
    addItemView((IconMenuItemView)lastItemData.getItemView(MenuBuilder.TYPE_ICON,this));
    mNumActualItemsShown=numItemsThatCanFit;
  }
}
