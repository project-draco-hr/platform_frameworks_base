{
  long frameNumber=-1;
  if (mSurfaceHolder != null) {
    mSurfaceHolder.mSurfaceLock.lock();
  }
  if (mSurface.isValid()) {
    frameNumber=mSurface.getNextFrameNumber();
  }
  if (mSurfaceHolder != null) {
    mSurfaceHolder.mSurfaceLock.unlock();
  }
  return frameNumber;
}
