{
  final Rect localDirty=mDirty;
  if (!localDirty.isEmpty() && !localDirty.contains(dirty)) {
    mAttachInfo.mSetIgnoreDirtyState=true;
    mAttachInfo.mIgnoreDirtyState=true;
  }
  localDirty.union(dirty.left,dirty.top,dirty.right,dirty.bottom);
  final float appScale=mAttachInfo.mApplicationScale;
  final boolean intersected=localDirty.intersect(0,0,(int)(mWidth * appScale + 0.5f),(int)(mHeight * appScale + 0.5f));
  if (!intersected) {
    localDirty.setEmpty();
  }
  if (!mWillDrawSoon && (intersected || mIsAnimating)) {
    scheduleTraversals();
  }
}
