{
  if (mTargetSdkVersion < Build.VERSION_CODES.MNC && e instanceof MotionEvent) {
    MotionEvent motion=(MotionEvent)e;
    final int mask=MotionEvent.BUTTON_STYLUS_PRIMARY | MotionEvent.BUTTON_STYLUS_SECONDARY;
    final int buttonState=motion.getButtonState();
    final int compatButtonState=(buttonState & mask) >> 4;
    if (compatButtonState != 0) {
      motion.setButtonState(buttonState | compatButtonState);
    }
  }
}
