{
  mAttachInfo.mHardwareAccelerated=false;
  mAttachInfo.mHardwareAccelerationRequested=false;
  if (mTranslator != null)   return;
  final boolean hardwareAccelerated=(attrs.flags & WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED) != 0;
  if (hardwareAccelerated) {
    if (!HardwareRenderer.isAvailable()) {
      return;
    }
    final boolean fakeHwAccelerated=(attrs.privateFlags & WindowManager.LayoutParams.PRIVATE_FLAG_FAKE_HARDWARE_ACCELERATED) != 0;
    final boolean forceHwAccelerated=(attrs.privateFlags & WindowManager.LayoutParams.PRIVATE_FLAG_FORCE_HARDWARE_ACCELERATED) != 0;
    if (!HardwareRenderer.sRendererDisabled || (HardwareRenderer.sSystemRendererDisabled && forceHwAccelerated)) {
      if (mAttachInfo.mHardwareRenderer != null) {
        mAttachInfo.mHardwareRenderer.destroy(true);
      }
      final boolean translucent=attrs.format != PixelFormat.OPAQUE;
      mAttachInfo.mHardwareRenderer=HardwareRenderer.create(mContext,translucent);
      if (mAttachInfo.mHardwareRenderer != null) {
        mAttachInfo.mHardwareRenderer.setName(attrs.getTitle().toString());
        mAttachInfo.mHardwareAccelerated=mAttachInfo.mHardwareAccelerationRequested=true;
      }
    }
 else     if (fakeHwAccelerated) {
      mAttachInfo.mHardwareAccelerationRequested=true;
    }
  }
}
