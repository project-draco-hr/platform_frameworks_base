{
  checkThread();
  if (LOCAL_LOGV)   Log.v(TAG,"DIE in " + this + " of "+ mSurface);
synchronized (this) {
    if (mRemoved) {
      return;
    }
    mRemoved=true;
    Slog.d(TAG,"doDie: b9404689 mAdded=" + mAdded + " mView="+ mView+ " Callers="+ Debug.getCallers(4));
    if (mAdded) {
      dispatchDetachedFromWindow();
    }
    if (mAdded && !mFirst) {
      Slog.d(TAG,"doDie: b9404689 mAdded && !mFirst");
      invalidateDisplayLists();
      destroyHardwareRenderer();
      if (mView != null) {
        int viewVisibility=mView.getVisibility();
        boolean viewVisibilityChanged=mViewVisibility != viewVisibility;
        if (mWindowAttributesChanged || viewVisibilityChanged) {
          try {
            if ((relayoutWindow(mWindowAttributes,viewVisibility,false) & WindowManagerGlobal.RELAYOUT_RES_FIRST_TIME) != 0) {
              mWindowSession.finishDrawing(mWindow);
            }
          }
 catch (          RemoteException e) {
          }
        }
        mSurface.release();
      }
    }
    Slog.d(TAG,"doDie: b9404689 setting mAdded=false mView=" + mView + " Callers="+ Debug.getCallers(4));
    mAdded=false;
  }
  WindowManagerGlobal.getInstance().doRemoveView(this);
}
