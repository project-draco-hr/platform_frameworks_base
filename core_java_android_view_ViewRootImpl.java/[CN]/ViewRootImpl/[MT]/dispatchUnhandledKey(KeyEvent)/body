{
  if ((event.getFlags() & KeyEvent.FLAG_FALLBACK) == 0) {
    final KeyCharacterMap kcm=event.getKeyCharacterMap();
    final int keyCode=event.getKeyCode();
    final int metaState=event.getMetaState();
    KeyEvent fallbackEvent=null;
synchronized (mFallbackAction) {
      if (kcm.getFallbackAction(keyCode,metaState,mFallbackAction)) {
        int flags=event.getFlags() | KeyEvent.FLAG_FALLBACK;
        fallbackEvent=KeyEvent.obtain(event.getDownTime(),event.getEventTime(),event.getAction(),mFallbackAction.keyCode,event.getRepeatCount(),mFallbackAction.metaState,event.getDeviceId(),event.getScanCode(),flags,event.getSource(),null);
      }
    }
    if (fallbackEvent != null) {
      dispatchKey(fallbackEvent);
    }
  }
}
