{
  final MotionEvent event=(MotionEvent)q.mEvent;
  final int source=event.getSource();
  final boolean isJoystick=event.isFromSource(InputDevice.SOURCE_CLASS_JOYSTICK);
  final boolean isTouchNavigation=event.isFromSource(InputDevice.SOURCE_TOUCH_NAVIGATION);
  if (mView == null || !mAdded) {
    if (isJoystick) {
      updateJoystickDirection(event,false);
    }
 else     if (isTouchNavigation) {
      mSimulatedDpad.updateTouchNavigation(this,event,false);
    }
    return EVENT_NOT_HANDLED;
  }
  if (mView.dispatchGenericMotionEvent(event)) {
    if (isJoystick) {
      updateJoystickDirection(event,false);
    }
 else     if (isTouchNavigation) {
      mSimulatedDpad.updateTouchNavigation(this,event,false);
    }
    return EVENT_HANDLED;
  }
  if (isJoystick) {
    updateJoystickDirection(event,true);
    return EVENT_HANDLED;
  }
  if (isTouchNavigation) {
    mSimulatedDpad.updateTouchNavigation(this,event,true);
    return EVENT_HANDLED;
  }
  return EVENT_NOT_HANDLED;
}
