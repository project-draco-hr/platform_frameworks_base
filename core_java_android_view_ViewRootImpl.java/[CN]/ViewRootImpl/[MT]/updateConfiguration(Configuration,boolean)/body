{
  if (DEBUG_CONFIGURATION)   Log.v(TAG,"Applying new config to window " + mWindowAttributes.getTitle() + ": "+ config);
  CompatibilityInfo ci=mDisplayAdjustments.getCompatibilityInfo();
  if (!ci.equals(CompatibilityInfo.DEFAULT_COMPATIBILITY_INFO)) {
    config=new Configuration(config);
    ci.applyToConfiguration(mNoncompatDensity,config);
  }
synchronized (sConfigCallbacks) {
    for (int i=sConfigCallbacks.size() - 1; i >= 0; i--) {
      sConfigCallbacks.get(i).onConfigurationChanged(config);
    }
  }
  if (mView != null) {
    config=mView.getResources().getConfiguration();
    if (force || mLastConfiguration.diff(config) != 0) {
      final int lastLayoutDirection=mLastConfiguration.getLayoutDirection();
      final int currentLayoutDirection=config.getLayoutDirection();
      mLastConfiguration.setTo(config);
      if (lastLayoutDirection != currentLayoutDirection && mViewLayoutDirectionInitial == View.LAYOUT_DIRECTION_INHERIT) {
        mView.setLayoutDirection(currentLayoutDirection);
      }
      mView.dispatchConfigurationChanged(config);
    }
  }
  mFlipControllerFallbackKeys=mContext.getResources().getBoolean(R.bool.flip_controller_fallback_keys);
}
