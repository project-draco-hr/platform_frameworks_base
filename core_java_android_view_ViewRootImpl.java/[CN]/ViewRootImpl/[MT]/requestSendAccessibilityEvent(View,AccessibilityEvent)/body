{
  if (mView == null) {
    return false;
  }
  final int eventType=event.getEventType();
switch (eventType) {
case AccessibilityEvent.TYPE_VIEW_ACCESSIBILITY_FOCUSED:
{
      final long sourceNodeId=event.getSourceNodeId();
      final int accessibilityViewId=AccessibilityNodeInfo.getAccessibilityViewId(sourceNodeId);
      View source=mView.findViewByAccessibilityId(accessibilityViewId);
      if (source != null) {
        AccessibilityNodeProvider provider=source.getAccessibilityNodeProvider();
        if (provider != null) {
          final int virtualNodeId=AccessibilityNodeInfo.getVirtualDescendantId(sourceNodeId);
          final AccessibilityNodeInfo node;
          if (virtualNodeId == AccessibilityNodeInfo.UNDEFINED_ITEM_ID) {
            node=provider.createAccessibilityNodeInfo(AccessibilityNodeProvider.HOST_VIEW_ID);
          }
 else {
            node=provider.createAccessibilityNodeInfo(virtualNodeId);
          }
          setAccessibilityFocus(source,node);
        }
      }
    }
  break;
case AccessibilityEvent.TYPE_VIEW_ACCESSIBILITY_FOCUS_CLEARED:
{
  final long sourceNodeId=event.getSourceNodeId();
  final int accessibilityViewId=AccessibilityNodeInfo.getAccessibilityViewId(sourceNodeId);
  View source=mView.findViewByAccessibilityId(accessibilityViewId);
  if (source != null) {
    AccessibilityNodeProvider provider=source.getAccessibilityNodeProvider();
    if (provider != null) {
      setAccessibilityFocus(null,null);
    }
  }
}
break;
case AccessibilityEvent.TYPE_WINDOW_CONTENT_CHANGED:
{
if (mAccessibilityFocusedHost != null && mAccessibilityFocusedVirtualView != null) {
final long eventSourceId=event.getSourceNodeId();
final int hostViewId=AccessibilityNodeInfo.getAccessibilityViewId(eventSourceId);
if (hostViewId != mAccessibilityFocusedHost.getAccessibilityViewId()) {
  break;
}
final int changes=event.getContentChangeTypes();
if ((changes & AccessibilityEvent.CONTENT_CHANGE_TYPE_SUBTREE) != 0 || changes == AccessibilityEvent.CONTENT_CHANGE_TYPE_UNDEFINED) {
  AccessibilityNodeProvider provider=mAccessibilityFocusedHost.getAccessibilityNodeProvider();
  if (provider != null) {
    final int virtualChildId=AccessibilityNodeInfo.getVirtualDescendantId(mAccessibilityFocusedVirtualView.getSourceNodeId());
    if (virtualChildId == AccessibilityNodeInfo.UNDEFINED_ITEM_ID) {
      mAccessibilityFocusedVirtualView=provider.createAccessibilityNodeInfo(AccessibilityNodeProvider.HOST_VIEW_ID);
    }
 else {
      mAccessibilityFocusedVirtualView=provider.createAccessibilityNodeInfo(virtualChildId);
    }
  }
}
}
}
break;
}
mAccessibilityManager.sendAccessibilityEvent(event);
return true;
}
