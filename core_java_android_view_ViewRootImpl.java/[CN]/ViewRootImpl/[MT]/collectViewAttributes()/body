{
  if (mAttachInfo.mRecomputeGlobalAttributes) {
    mAttachInfo.mRecomputeGlobalAttributes=false;
    boolean oldScreenOn=mAttachInfo.mKeepScreenOn;
    mAttachInfo.mKeepScreenOn=false;
    mAttachInfo.mSystemUiVisibility=0;
    mAttachInfo.mHasSystemUiListeners=false;
    mView.dispatchCollectViewAttributes(mAttachInfo,0);
    mAttachInfo.mSystemUiVisibility&=~mAttachInfo.mDisabledSystemUiVisibility;
    WindowManager.LayoutParams params=mWindowAttributes;
    mAttachInfo.mSystemUiVisibility|=getImpliedSystemUiVisibility(params);
    if (mAttachInfo.mKeepScreenOn != oldScreenOn || mAttachInfo.mSystemUiVisibility != params.subtreeSystemUiVisibility || mAttachInfo.mHasSystemUiListeners != params.hasSystemUiListeners) {
      applyKeepScreenOnFlag(params);
      params.subtreeSystemUiVisibility=mAttachInfo.mSystemUiVisibility;
      params.hasSystemUiListeners=mAttachInfo.mHasSystemUiListeners;
      mView.dispatchWindowSystemUiVisiblityChanged(mAttachInfo.mSystemUiVisibility);
      return true;
    }
  }
  return false;
}
