{
  final QueuedInputEvent q=mCurrentInputEvent;
  if (q != null && q.mSeq == seq) {
    final KeyEvent event=(KeyEvent)q.mEvent;
    if (DEBUG_IMF) {
      Log.v(TAG,"IME finished event: seq=" + seq + " handled="+ handled+ " event="+ event);
    }
    if (handled) {
      finishInputEvent(q,true);
    }
 else {
      deliverKeyEventPostIme(q);
    }
  }
 else {
    if (DEBUG_IMF) {
      Log.v(TAG,"IME finished event: seq=" + seq + " handled="+ handled+ ", event not found!");
    }
  }
}
