{
  final long parentNodeId=current.getParentNodeId();
  final int parentAccessibilityViewId=AccessibilityNodeInfo.getAccessibilityViewId(parentNodeId);
  final int parentVirtualDescendantId=AccessibilityNodeInfo.getVirtualDescendantId(parentNodeId);
  if (parentVirtualDescendantId != AccessibilityNodeInfo.UNDEFINED || parentAccessibilityViewId == providerHost.getAccessibilityViewId()) {
    AccessibilityNodeInfo parent=provider.createAccessibilityNodeInfo(parentVirtualDescendantId);
    if (parent != null) {
      SparseLongArray childNodeIds=parent.getChildNodeIds();
      final int childCount=childNodeIds.size();
      for (int i=0; i < childCount; i++) {
        final long childNodeId=childNodeIds.get(i);
        if (childNodeId != current.getSourceNodeId() && outInfos.size() < MAX_ACCESSIBILITY_NODE_INFO_BATCH_SIZE) {
          final int childVirtualDescendantId=AccessibilityNodeInfo.getVirtualDescendantId(childNodeId);
          AccessibilityNodeInfo child=provider.createAccessibilityNodeInfo(childVirtualDescendantId);
          if (child != null) {
            outInfos.add(child);
          }
        }
      }
    }
  }
 else {
    prefetchSiblingsOfRealNode(providerHost,outInfos);
  }
}
