{
  ViewParent parent=current.getParent();
  if (parent instanceof ViewGroup) {
    ViewGroup parentGroup=(ViewGroup)parent;
    final int childCount=parentGroup.getChildCount();
    for (int i=0; i < childCount; i++) {
      View child=parentGroup.getChildAt(i);
      if (outInfos.size() < MAX_ACCESSIBILITY_NODE_INFO_BATCH_SIZE && child.getAccessibilityViewId() != current.getAccessibilityViewId() && isDisplayedOnScreen(child)) {
        final long childNodeId=AccessibilityNodeInfo.makeNodeId(child.getAccessibilityViewId(),AccessibilityNodeInfo.UNDEFINED);
        AccessibilityNodeInfo info=null;
        AccessibilityNodeProvider provider=child.getAccessibilityNodeProvider();
        if (provider == null) {
          info=child.createAccessibilityNodeInfo();
        }
 else {
          info=provider.createAccessibilityNodeInfo(AccessibilityNodeInfo.UNDEFINED);
        }
        if (info != null) {
          outInfos.add(info);
        }
      }
    }
  }
}
