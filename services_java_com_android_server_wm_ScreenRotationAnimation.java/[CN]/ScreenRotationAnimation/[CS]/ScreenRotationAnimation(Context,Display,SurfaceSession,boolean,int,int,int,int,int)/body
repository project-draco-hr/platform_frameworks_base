{
  mContext=context;
  mDisplay=display;
  mExitAnimId=exitAnim;
  mEnterAnimId=enterAnim;
  if (originalRotation == Surface.ROTATION_90 || originalRotation == Surface.ROTATION_270) {
    mWidth=originalHeight;
    mHeight=originalWidth;
  }
 else {
    mWidth=originalWidth;
    mHeight=originalHeight;
  }
  mOriginalRotation=originalRotation;
  mOriginalWidth=originalWidth;
  mOriginalHeight=originalHeight;
  if (!inTransaction) {
    if (WindowManagerService.SHOW_LIGHT_TRANSACTIONS)     Slog.i(WindowManagerService.TAG,">>> OPEN TRANSACTION ScreenRotationAnimation");
    SurfaceControl.openTransaction();
  }
  try {
    try {
      if (WindowManagerService.DEBUG_SURFACE_TRACE) {
        mSurfaceControl=new SurfaceTrace(session,"FreezeSurface",mWidth,mHeight,PixelFormat.OPAQUE,SurfaceControl.FX_SURFACE_SCREENSHOT | SurfaceControl.HIDDEN);
      }
 else {
        mSurfaceControl=new SurfaceControl(session,"FreezeSurface",mWidth,mHeight,PixelFormat.OPAQUE,SurfaceControl.FX_SURFACE_SCREENSHOT | SurfaceControl.HIDDEN);
      }
      mSurfaceControl.setLayerStack(mDisplay.getLayerStack());
      mSurfaceControl.setLayer(FREEZE_LAYER + 1);
      mSurfaceControl.setAlpha(0);
      mSurfaceControl.show();
    }
 catch (    SurfaceControl.OutOfResourcesException e) {
      Slog.w(TAG,"Unable to allocate freeze surface",e);
    }
    if (WindowManagerService.SHOW_TRANSACTIONS || WindowManagerService.SHOW_SURFACE_ALLOC)     Slog.i(WindowManagerService.TAG,"  FREEZE " + mSurfaceControl + ": CREATE");
    setRotationInTransaction(originalRotation);
  }
  finally {
    if (!inTransaction) {
      SurfaceControl.closeTransaction();
      if (WindowManagerService.SHOW_LIGHT_TRANSACTIONS)       Slog.i(WindowManagerService.TAG,"<<< CLOSE TRANSACTION ScreenRotationAnimation");
    }
  }
}
