{
  if (mFinishAnimReady && mFinishAnimStartTime < 0) {
    if (DEBUG_STATE)     Slog.v(TAG,"Step: finish anim now ready");
    mFinishAnimStartTime=now;
  }
  mMoreStartExit=false;
  if (mStartExitAnimation != null) {
    mStartExitTransformation.clear();
    mMoreStartExit=mStartExitAnimation.getTransformation(now,mStartExitTransformation);
    if (DEBUG_TRANSFORMS)     Slog.v(TAG,"Stepped start exit: " + mStartExitTransformation);
    if (!mMoreStartExit) {
      if (DEBUG_STATE)       Slog.v(TAG,"Start exit animation done!");
      mStartExitAnimation.cancel();
      mStartExitAnimation=null;
    }
  }
  mMoreStartEnter=false;
  if (mStartEnterAnimation != null) {
    mStartEnterTransformation.clear();
    mMoreStartEnter=mStartEnterAnimation.getTransformation(now,mStartEnterTransformation);
    if (DEBUG_TRANSFORMS)     Slog.v(TAG,"Stepped start enter: " + mStartEnterTransformation);
    if (!mMoreStartEnter) {
      if (DEBUG_STATE)       Slog.v(TAG,"Start enter animation done!");
      mStartEnterAnimation.cancel();
      mStartEnterAnimation=null;
    }
  }
  long finishNow=mFinishAnimReady ? (now - mFinishAnimStartTime) : 0;
  if (DEBUG_STATE)   Slog.v(TAG,"Step: finishNow=" + finishNow);
  mFinishExitTransformation.clear();
  mMoreFinishExit=false;
  if (mFinishExitAnimation != null) {
    mMoreFinishExit=mFinishExitAnimation.getTransformation(finishNow,mFinishExitTransformation);
    if (DEBUG_TRANSFORMS)     Slog.v(TAG,"Stepped finish exit: " + mFinishExitTransformation);
    if (!mMoreStartExit && !mMoreFinishExit) {
      if (DEBUG_STATE)       Slog.v(TAG,"Finish exit animation done, clearing start/finish anims!");
      mStartExitTransformation.clear();
      mFinishExitAnimation.cancel();
      mFinishExitAnimation=null;
      mFinishExitTransformation.clear();
    }
  }
  mFinishEnterTransformation.clear();
  mMoreFinishEnter=false;
  if (mFinishEnterAnimation != null) {
    mMoreFinishEnter=mFinishEnterAnimation.getTransformation(finishNow,mFinishEnterTransformation);
    if (DEBUG_TRANSFORMS)     Slog.v(TAG,"Stepped finish enter: " + mFinishEnterTransformation);
    if (!mMoreStartEnter && !mMoreFinishEnter) {
      if (DEBUG_STATE)       Slog.v(TAG,"Finish enter animation done, clearing start/finish anims!");
      mStartEnterTransformation.clear();
      mFinishEnterAnimation.cancel();
      mFinishEnterAnimation=null;
      mFinishEnterTransformation.clear();
    }
  }
  mRotateExitTransformation.clear();
  mMoreRotateExit=false;
  if (mRotateExitAnimation != null) {
    mMoreRotateExit=mRotateExitAnimation.getTransformation(now,mRotateExitTransformation);
    if (DEBUG_TRANSFORMS)     Slog.v(TAG,"Stepped rotate exit: " + mRotateExitTransformation);
  }
  if (!mMoreFinishExit && !mMoreRotateExit) {
    if (DEBUG_STATE)     Slog.v(TAG,"Rotate exit animation done!");
    mRotateExitAnimation.cancel();
    mRotateExitAnimation=null;
    mRotateExitTransformation.clear();
  }
  mRotateEnterTransformation.clear();
  mMoreRotateEnter=false;
  if (mRotateEnterAnimation != null) {
    mMoreRotateEnter=mRotateEnterAnimation.getTransformation(now,mRotateEnterTransformation);
    if (DEBUG_TRANSFORMS)     Slog.v(TAG,"Stepped rotate enter: " + mRotateEnterTransformation);
  }
  if (!mMoreFinishEnter && !mMoreRotateEnter) {
    if (DEBUG_STATE)     Slog.v(TAG,"Rotate enter animation done!");
    mRotateEnterAnimation.cancel();
    mRotateEnterAnimation=null;
    mRotateEnterTransformation.clear();
  }
  mExitTransformation.set(mRotateExitTransformation);
  mExitTransformation.compose(mStartExitTransformation);
  mExitTransformation.compose(mFinishExitTransformation);
  mEnterTransformation.set(mRotateEnterTransformation);
  mEnterTransformation.compose(mStartEnterTransformation);
  mEnterTransformation.compose(mFinishEnterTransformation);
  if (DEBUG_TRANSFORMS)   Slog.v(TAG,"Final exit: " + mExitTransformation);
  if (DEBUG_TRANSFORMS)   Slog.v(TAG,"Final enter: " + mEnterTransformation);
  final boolean more=mMoreStartEnter || mMoreStartExit || mMoreFinishEnter|| mMoreFinishExit|| mMoreRotateEnter|| mMoreRotateExit|| !mFinishAnimReady;
  mSnapshotFinalMatrix.setConcat(mExitTransformation.getMatrix(),mSnapshotInitialMatrix);
  if (DEBUG_STATE)   Slog.v(TAG,"Step: more=" + more);
  return more;
}
