{
  super.initForMenu(context,menu);
  final Resources res=context.getResources();
  final int screen=res.getConfiguration().screenLayout;
  mReserveOverflow=(screen & Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_XLARGE;
  mWidthLimit=res.getDisplayMetrics().widthPixels / 2;
  mMaxItems=res.getInteger(com.android.internal.R.integer.max_action_buttons);
  int width=mWidthLimit;
  if (mReserveOverflow) {
    if (mOverflowButton == null) {
      mOverflowButton=new OverflowMenuButton(mContext);
      final int spec=MeasureSpec.makeMeasureSpec(0,MeasureSpec.UNSPECIFIED);
      mOverflowButton.measure(spec,spec);
    }
    width-=mOverflowButton.getMeasuredWidth();
  }
 else {
    mOverflowButton=null;
  }
  mActionItemWidthLimit=width;
  mScrapActionButtonView=null;
}
