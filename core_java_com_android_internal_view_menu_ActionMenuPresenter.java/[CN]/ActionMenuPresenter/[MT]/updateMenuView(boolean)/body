{
  super.updateMenuView(cleared);
  if (mMenu != null) {
    final ArrayList<MenuItemImpl> actionItems=mMenu.getActionItems();
    final int count=actionItems.size();
    for (int i=0; i < count; i++) {
      final ActionProvider provider=actionItems.get(i).getActionProvider();
      if (provider != null) {
        provider.setSubUiVisibilityListener(this);
      }
    }
  }
  final boolean hasOverflow=mReserveOverflow && mMenu != null && mMenu.getNonActionItems().size() > 0;
  if (hasOverflow) {
    if (mOverflowButton == null) {
      mOverflowButton=new OverflowMenuButton(mContext);
    }
    ViewGroup parent=(ViewGroup)mOverflowButton.getParent();
    if (parent != mMenuView) {
      if (parent != null) {
        parent.removeView(mOverflowButton);
      }
      ActionMenuView menuView=(ActionMenuView)mMenuView;
      menuView.addView(mOverflowButton,menuView.generateOverflowButtonLayoutParams());
    }
  }
 else   if (mOverflowButton != null && mOverflowButton.getParent() == mMenuView) {
    ((ViewGroup)mMenuView).removeView(mOverflowButton);
  }
  ((ActionMenuView)mMenuView).setOverflowReserved(mReserveOverflow);
}
