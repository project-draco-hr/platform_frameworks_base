{
  int flashMode=FLASH_MODE_OFF;
  int aeMode=CONTROL_AE_MODE_ON;
switch (p.getFlashMode()) {
case Parameters.FLASH_MODE_OFF:
    break;
case Parameters.FLASH_MODE_AUTO:
  aeMode=CONTROL_AE_MODE_ON_AUTO_FLASH;
break;
case Parameters.FLASH_MODE_ON:
aeMode=CONTROL_AE_MODE_ON_ALWAYS_FLASH;
break;
case Parameters.FLASH_MODE_RED_EYE:
aeMode=CONTROL_AE_MODE_ON_AUTO_FLASH_REDEYE;
break;
case Parameters.FLASH_MODE_TORCH:
flashMode=FLASH_MODE_TORCH;
break;
default :
Log.w(TAG,"mapAeAndFlashMode - Ignoring unknown flash mode " + p.getFlashMode());
}
m.set(FLASH_MODE,flashMode);
m.set(CONTROL_AE_MODE,aeMode);
}
