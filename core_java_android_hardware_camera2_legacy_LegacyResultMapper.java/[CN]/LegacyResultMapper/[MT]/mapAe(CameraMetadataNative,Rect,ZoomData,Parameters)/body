{
{
    int antiBandingMode=LegacyMetadataMapper.convertAntiBandingModeOrDefault(p.getAntibanding());
    m.set(CONTROL_AE_ANTIBANDING_MODE,antiBandingMode);
  }
  mapAeAndFlashMode(m,p);
  if (LegacyMetadataMapper.LIE_ABOUT_AE_STATE) {
    m.set(CONTROL_AE_STATE,CONTROL_AE_STATE_CONVERGED);
  }
{
    if (VERBOSE) {
      String meteringAreas=p.get("metering-areas");
      Log.v(TAG,"mapAe - parameter dump; metering-areas: " + meteringAreas);
    }
    MeteringRectangle[] meteringRectArray=getMeteringRectangles(activeArray,zoomData,p.getMeteringAreas(),"AE");
    m.set(CONTROL_AE_REGIONS,meteringRectArray);
  }
{
    if (VERBOSE) {
      String focusAreas=p.get("focus-areas");
      Log.v(TAG,"mapAe - parameter dump; focus-areas: " + focusAreas);
    }
    MeteringRectangle[] meteringRectArray=getMeteringRectangles(activeArray,zoomData,p.getFocusAreas(),"AF");
    m.set(CONTROL_AF_REGIONS,meteringRectArray);
  }
}
