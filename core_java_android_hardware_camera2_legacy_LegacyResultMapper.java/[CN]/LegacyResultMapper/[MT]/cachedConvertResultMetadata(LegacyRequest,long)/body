{
  if (mCachedRequest != null && legacyRequest.parameters.same(mCachedRequest.parameters)) {
    CameraMetadataNative newResult=new CameraMetadataNative(mCachedResult);
    newResult.set(CaptureResult.SENSOR_TIMESTAMP,timestamp);
    return newResult;
  }
  mCachedRequest=legacyRequest;
  mCachedResult=convertResultMetadata(mCachedRequest,timestamp);
  return mCachedResult;
}
