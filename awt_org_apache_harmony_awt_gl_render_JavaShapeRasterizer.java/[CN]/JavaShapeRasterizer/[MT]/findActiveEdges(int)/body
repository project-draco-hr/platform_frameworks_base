{
  int edgeActive=edgeCur;
  while (edgeActive < edgesCount && edgesYS[edgeActive] == levelY) {
    edgeActive++;
  }
  int activeNext=edgeActive;
  while (edgeActive > edgeCur) {
    edgeActive--;
    int num=edgesN[edgeActive] & 0xFFFF;
    addActiveEdge(levelY,num,getPrev(edgeActive),true);
    addActiveEdge(levelY,num,getNext(edgeActive),false);
  }
  edgeCur=activeNext;
  if (activeNext == edgesCount) {
    return edgesY[edgesCount - 1];
  }
  return edgesYS[activeNext];
}
