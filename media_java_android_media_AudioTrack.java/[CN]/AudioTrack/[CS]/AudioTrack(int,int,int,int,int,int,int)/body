{
  mState=STATE_UNINITIALIZED;
  Looper looper;
  if ((looper=Looper.myLooper()) == null) {
    looper=Looper.getMainLooper();
  }
  mInitializationLooper=looper;
  audioParamCheck(streamType,sampleRateInHz,channelConfig,audioFormat,mode);
  audioBuffSizeCheck(bufferSizeInBytes);
  if (sessionId < 0) {
    throw new IllegalArgumentException("Invalid audio session ID: " + sessionId);
  }
  int[] session=new int[1];
  session[0]=sessionId;
  int initResult=native_setup(new WeakReference<AudioTrack>(this),mStreamType,mSampleRate,mChannels,mAudioFormat,mNativeBufferSizeInBytes,mDataLoadMode,session);
  if (initResult != SUCCESS) {
    loge("Error code " + initResult + " when initializing AudioTrack.");
    return;
  }
  mSessionId=session[0];
  if (mDataLoadMode == MODE_STATIC) {
    mState=STATE_NO_STATIC_DATA;
  }
 else {
    mState=STATE_INITIALIZED;
  }
}
