{
  DatagramSocket sock=null;
  int timeout=5000;
  long start=System.currentTimeMillis();
  try {
    sock=new DatagramSocket();
    DatagramPacket pack=new DatagramPacket(new byte[100],100);
    sock.setSoTimeout(timeout);
    sock.receive(pack);
  }
 catch (  SocketTimeoutException e) {
    long delay=System.currentTimeMillis() - start;
    if (Math.abs(delay - timeout) > 1000) {
      fail("timeout was not accurate. expected: " + timeout + " actual: "+ delay+ " miliseconds.");
    }
  }
 finally {
    if (sock != null) {
      sock.close();
    }
  }
}
