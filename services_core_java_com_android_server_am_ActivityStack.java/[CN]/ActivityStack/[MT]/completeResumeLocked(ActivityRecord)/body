{
  next.idle=false;
  next.results=null;
  next.newIntents=null;
  if (next.isHomeActivity()) {
    ProcessRecord app=next.task.mActivities.get(0).app;
    if (app != null && app != mService.mHomeProcess) {
      mService.mHomeProcess=app;
    }
  }
  if (next.nowVisible) {
    mStackSupervisor.notifyActivityDrawnForKeyguard();
  }
  mStackSupervisor.scheduleIdleTimeoutLocked(next);
  mStackSupervisor.reportResumedActivityLocked(next);
  next.resumeKeyDispatchingLocked();
  mNoAnimActivities.clear();
  if (next.app != null) {
    next.cpuTimeAtResume=mService.mProcessCpuTracker.getCpuTimeForPid(next.app.pid);
  }
 else {
    next.cpuTimeAtResume=0;
  }
  next.returningOptions=null;
  if (getVisibleBehindActivity() == next) {
    setVisibleBehindActivity(null);
  }
}
