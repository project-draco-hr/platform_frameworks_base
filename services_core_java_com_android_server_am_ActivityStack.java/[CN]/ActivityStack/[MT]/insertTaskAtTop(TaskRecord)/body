{
  ActivityStack lastStack=mStackSupervisor.getLastStack();
  final boolean fromHome=lastStack == null ? true : lastStack.isHomeStack();
  if (!isHomeStack() && (fromHome || topTask() != task)) {
    task.mOnTopOfHome=fromHome;
  }
  mTaskHistory.remove(task);
  int stackNdx=mTaskHistory.size();
  if (task.userId != mCurrentUser) {
    while (--stackNdx >= 0) {
      if (mTaskHistory.get(stackNdx).userId != mCurrentUser) {
        break;
      }
    }
    ++stackNdx;
  }
  mTaskHistory.add(stackNdx,task);
}
