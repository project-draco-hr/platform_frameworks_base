{
  if (!isAttached()) {
    return;
  }
  mStacks.remove(this);
  int addIndex=mStacks.size();
  if (addIndex > 0) {
    final ActivityStack topStack=mStacks.get(addIndex - 1);
    if (StackId.isAlwaysOnTop(topStack.mStackId) && topStack != this) {
      addIndex--;
    }
  }
  mStacks.add(addIndex,this);
  if (isOnHomeDisplay()) {
    mStackSupervisor.setFocusStack(reason,this);
  }
  if (task != null) {
    insertTaskAtTop(task,null);
  }
 else {
    task=topTask();
  }
  if (task != null) {
    mWindowManager.moveTaskToTop(task.taskId);
  }
}
