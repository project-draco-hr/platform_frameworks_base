{
  if (isAttached()) {
    final boolean homeStack=isHomeStack() || (mActivityContainer.mParentActivity != null && mActivityContainer.mParentActivity.isHomeActivity());
    ActivityStack lastFocusStack=null;
    if (!homeStack) {
      lastFocusStack=mStacks.get(mStacks.size() - 1);
      mStacks.remove(this);
      mStacks.add(this);
    }
    if (isOnHomeDisplay()) {
      mStackSupervisor.moveHomeStack(homeStack,reason,lastFocusStack);
    }
    if (task != null) {
      insertTaskAtTop(task,null);
    }
 else {
      task=topTask();
    }
    if (task != null) {
      mWindowManager.moveTaskToTop(task.taskId);
    }
  }
}
