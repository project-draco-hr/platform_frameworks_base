{
  final ActivityStack prevStack=preAddTask(task,reason,toTop);
  task.stack=this;
  if (toTop) {
    insertTaskAtTop(task,null);
  }
 else {
    mTaskHistory.add(0,task);
    updateTaskMovement(task,false);
  }
  postAddTask(task,prevStack);
}
