{
  r.visible=visible;
  if (!visible && r.mUpdateTaskThumbnailWhenHidden) {
    r.updateThumbnailLocked(r.task.stack.screenshotActivitiesLocked(r),null);
    r.mUpdateTaskThumbnailWhenHidden=false;
  }
  mWindowManager.setAppVisibility(r.appToken,visible);
  final ArrayList<ActivityContainer> containers=r.mChildContainers;
  for (int containerNdx=containers.size() - 1; containerNdx >= 0; --containerNdx) {
    ActivityContainer container=containers.get(containerNdx);
    container.setVisible(visible);
  }
  mStackSupervisor.mAppVisibilitiesChangedSinceLastPause=true;
}
