{
  if (!isAttached()) {
    return false;
  }
  if (mStackSupervisor.isFrontStack(this)) {
    return true;
  }
  final boolean homeStack=mStackId == HOME_STACK_ID;
  if (!homeStack) {
    return false;
  }
  for (int i=mStacks.indexOf(this) + 1; i < mStacks.size(); i++) {
    final ActivityStack stack=mStacks.get(i);
    if (stack.mStackId != FULLSCREEN_WORKSPACE_STACK_ID) {
      return false;
    }
    final ArrayList<TaskRecord> tasks=stack.getAllTasks();
    for (int taskNdx=tasks.size() - 1; taskNdx >= 0; --taskNdx) {
      final TaskRecord task=tasks.get(taskNdx);
      if (!task.mFullscreen) {
        continue;
      }
      final ArrayList<ActivityRecord> activities=task.mActivities;
      for (int activityNdx=activities.size() - 1; activityNdx >= 0; --activityNdx) {
        final ActivityRecord r=activities.get(activityNdx);
        if (!r.finishing && r.visible && (r.fullscreen || (!isHomeStack() && r.frontOfTask && task.isOverHomeStack()))) {
          return false;
        }
      }
    }
  }
  return true;
}
