{
  if (!isAttached()) {
    return false;
  }
  if (mStackSupervisor.isFrontStack(this)) {
    return true;
  }
  final int stackIndex=mStacks.indexOf(this);
  if (stackIndex == mStacks.size() - 1) {
    Slog.wtf(TAG,"Stack=" + this + " isn't front stack but is at the top of the stack list");
    return false;
  }
  if (isHiddenByDockedStack()) {
    return false;
  }
  for (int i=stackIndex + 1; i < mStacks.size(); i++) {
    final ActivityStack stack=mStacks.get(i);
    final ArrayList<TaskRecord> tasks=stack.getAllTasks();
    if (!stack.mFullscreen && !stack.hasFullscreenTask()) {
      continue;
    }
    if (stack.mStackId == FREEFORM_WORKSPACE_STACK_ID || stack.mStackId == HOME_STACK_ID) {
      return false;
    }
    for (int taskNdx=tasks.size() - 1; taskNdx >= 0; --taskNdx) {
      final TaskRecord task=tasks.get(taskNdx);
      if (!task.mFullscreen) {
        continue;
      }
      final ArrayList<ActivityRecord> activities=task.mActivities;
      for (int activityNdx=activities.size() - 1; activityNdx >= 0; --activityNdx) {
        final ActivityRecord r=activities.get(activityNdx);
        if (!r.finishing && r.visible && (r.fullscreen || (!isHomeStack() && r.frontOfTask && task.isOverHomeStack()))) {
          return false;
        }
      }
    }
  }
  return true;
}
