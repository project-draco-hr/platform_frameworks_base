{
  if (srec == null || srec.task.affinity == null || !srec.task.affinity.equals(destAffinity)) {
    return true;
  }
  if (srec.frontOfTask && srec.task != null && srec.task.getBaseIntent() != null && srec.task.getBaseIntent().isDocument()) {
    if (srec.task.getTaskToReturnTo() != ActivityRecord.APPLICATION_ACTIVITY_TYPE) {
      return true;
    }
    int taskIdx=mTaskHistory.indexOf(srec.task);
    if (taskIdx <= 0) {
      Slog.w(TAG,"shouldUpRecreateTask: task not in history for " + srec);
      return false;
    }
    if (taskIdx == 0) {
      return true;
    }
    TaskRecord prevTask=mTaskHistory.get(taskIdx);
    if (!srec.task.affinity.equals(prevTask.affinity)) {
      return true;
    }
  }
  return false;
}
