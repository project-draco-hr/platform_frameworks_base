{
  if (r.fullscreen) {
    if (DEBUG_VISIBILITY)     Slog.v(TAG_VISIBILITY,"Fullscreen: at " + r + " stackInvisible="+ stackInvisible+ " behindFullscreenActivity="+ behindFullscreenActivity);
    behindFullscreenActivity=true;
  }
 else   if (isHomeStack()) {
    if (r.isHomeActivity()) {
      if (DEBUG_VISIBILITY)       Slog.v(TAG_VISIBILITY,"Home activity: at " + r + " stackInvisible="+ stackInvisible+ " behindFullscreenActivity="+ behindFullscreenActivity);
      behindFullscreenActivity=true;
    }
 else     if (r.isRecentsActivity() && task.getTaskToReturnTo() == APPLICATION_ACTIVITY_TYPE) {
      if (DEBUG_VISIBILITY)       Slog.v(TAG_VISIBILITY,"Recents activity returning to app: at " + r + " stackInvisible="+ stackInvisible+ " behindFullscreenActivity="+ behindFullscreenActivity);
      behindFullscreenActivity=true;
    }
  }
 else   if (r.frontOfTask && task.isOverHomeStack()) {
    if (DEBUG_VISIBILITY)     Slog.v(TAG_VISIBILITY,"Showing home: at " + r + " stackInvisible="+ stackInvisible+ " behindFullscreenActivity="+ behindFullscreenActivity);
    behindFullscreenActivity=true;
  }
  return behindFullscreenActivity;
}
