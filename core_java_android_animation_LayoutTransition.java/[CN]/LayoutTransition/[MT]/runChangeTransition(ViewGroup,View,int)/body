{
  Animator baseAnimator=null;
  Animator parentAnimator=null;
  final long duration;
switch (changeReason) {
case APPEARING:
    baseAnimator=mChangingAppearingAnim;
  duration=mChangingAppearingDuration;
parentAnimator=defaultChangeIn;
break;
case DISAPPEARING:
baseAnimator=mChangingDisappearingAnim;
duration=mChangingDisappearingDuration;
parentAnimator=defaultChangeOut;
break;
case CHANGING:
baseAnimator=mChangingAnim;
duration=mChangingDuration;
parentAnimator=defaultChange;
break;
default :
duration=0;
break;
}
if (baseAnimator == null) {
return;
}
staggerDelay=0;
final ViewTreeObserver observer=parent.getViewTreeObserver();
if (!observer.isAlive()) {
return;
}
int numChildren=parent.getChildCount();
for (int i=0; i < numChildren; ++i) {
final View child=parent.getChildAt(i);
if (child != newView) {
setupChangeAnimation(parent,changeReason,baseAnimator,duration,child);
}
}
if (mAnimateParentHierarchy) {
ViewGroup tempParent=parent;
while (tempParent != null) {
ViewParent parentParent=tempParent.getParent();
if (parentParent instanceof ViewGroup) {
setupChangeAnimation((ViewGroup)parentParent,changeReason,parentAnimator,duration,tempParent);
tempParent=(ViewGroup)parentParent;
}
 else {
tempParent=null;
}
}
}
observer.addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener(){
public boolean onPreDraw(){
parent.getViewTreeObserver().removeOnPreDrawListener(this);
int count=layoutChangeListenerMap.size();
if (count > 0) {
Collection<View> views=layoutChangeListenerMap.keySet();
for (View view : views) {
View.OnLayoutChangeListener listener=layoutChangeListenerMap.get(view);
view.removeOnLayoutChangeListener(listener);
}
}
layoutChangeListenerMap.clear();
return true;
}
}
);
}
