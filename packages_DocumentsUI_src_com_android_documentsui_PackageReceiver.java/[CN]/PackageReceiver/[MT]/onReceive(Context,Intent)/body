{
  final ContentResolver resolver=context.getContentResolver();
  final String action=intent.getAction();
  final Uri data=intent.getData();
  final String packageName=data == null ? null : data.getSchemeSpecificPart();
  if (Intent.ACTION_PACKAGE_FULLY_REMOVED.equals(action)) {
    resolver.call(RecentsProvider.buildRecent(),RecentsProvider.METHOD_PURGE,null,null);
    if (packageName != null) {
      LocalPreferences.clearPackagePreferences(context,packageName);
    }
  }
 else   if (Intent.ACTION_PACKAGE_DATA_CLEARED.equals(action)) {
    if (packageName != null) {
      resolver.call(RecentsProvider.buildRecent(),RecentsProvider.METHOD_PURGE_PACKAGE,packageName,null);
      LocalPreferences.clearPackagePreferences(context,packageName);
    }
  }
}
