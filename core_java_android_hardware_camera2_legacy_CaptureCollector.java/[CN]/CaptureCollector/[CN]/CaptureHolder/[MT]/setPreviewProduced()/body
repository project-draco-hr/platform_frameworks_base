{
  if (DEBUG) {
    Log.d(TAG,"setPreviewProduced - called for request " + mRequest.getRequestId());
  }
  if (!needsPreview) {
    throw new IllegalStateException("setPreviewProduced called for capture with no preview targets.");
  }
  if (isCompleted()) {
    throw new IllegalStateException("setPreviewProduced called on already completed request.");
  }
  mReceivedFlags|=FLAG_RECEIVED_PREVIEW;
  tryComplete();
}
