{
  final TextViewTestActivity activity=getActivity();
  final LinearLayout ll=(LinearLayout)activity.findViewById(R.id.textviewtest_layout);
  final TextView tv=(TextView)activity.findViewById(R.id.textviewtest_textview);
  getActivity().runOnUiThread(new Runnable(){
    public void run(){
      ll.setTextDirection(View.TEXT_DIRECTION_RTL);
      tv.setTextDirection(View.TEXT_DIRECTION_INHERIT);
      assertEquals(View.TEXT_DIRECTION_RTL,tv.getResolvedTextDirection());
      ll.removeView(tv);
      assertEquals(View.TEXT_DIRECTION_FIRST_STRONG,tv.getResolvedTextDirection());
    }
  }
);
}
