{
  if (DEBUG) {
    Log.i(LOG_TAG,"Preloading pages around [" + firstShownPage + "-"+ lastShownPage+ "]");
  }
  final int bitmapSizeInBytes=renderSpec.bitmapWidth * renderSpec.bitmapHeight * BYTES_PER_PIXEL;
  final int maxCachedPageCount=mPageContentCache.getMaxSizeInBytes() / bitmapSizeInBytes;
  final int halfPreloadCount=(maxCachedPageCount - (lastShownPage - firstShownPage)) / 2 - 1;
  final int excessFromStart;
  if (firstShownPage - halfPreloadCount < 0) {
    excessFromStart=halfPreloadCount - firstShownPage;
  }
 else {
    excessFromStart=0;
  }
  final int excessFromEnd;
  if (lastShownPage + halfPreloadCount >= mPageCount) {
    excessFromEnd=(lastShownPage + halfPreloadCount) - mPageCount;
  }
 else {
    excessFromEnd=0;
  }
  final int fromIndex=Math.max(firstShownPage - halfPreloadCount - excessFromEnd,0);
  final int toIndex=Math.min(lastShownPage + halfPreloadCount + excessFromStart,mPageCount - 1);
  for (int i=fromIndex; i <= toIndex; i++) {
    renderPage(i,renderSpec,null);
  }
}
