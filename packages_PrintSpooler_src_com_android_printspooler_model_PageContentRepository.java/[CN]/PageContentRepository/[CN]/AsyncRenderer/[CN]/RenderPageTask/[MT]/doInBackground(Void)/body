{
  if (isCancelled()) {
    return mRenderedPage;
  }
  Bitmap bitmap=mRenderedPage.content.getBitmap();
  ParcelFileDescriptor[] pipe=null;
  try {
    pipe=ParcelFileDescriptor.createPipe();
    ParcelFileDescriptor source=pipe[0];
    ParcelFileDescriptor destination=pipe[1];
    mRenderer.renderPage(mPageIndex,bitmap.getWidth(),bitmap.getHeight(),mRenderSpec.printAttributes,destination);
    destination.close();
    BitmapFactory.Options options=new BitmapFactory.Options();
    options.inBitmap=bitmap;
    BitmapFactory.decodeFileDescriptor(source.getFileDescriptor(),null,options);
  }
 catch (  IOException|RemoteException e) {
    Log.e(LOG_TAG,"Error rendering page:" + mPageIndex,e);
  }
 finally {
    IoUtils.closeQuietly(pipe[0]);
    IoUtils.closeQuietly(pipe[1]);
  }
  return mRenderedPage;
}
