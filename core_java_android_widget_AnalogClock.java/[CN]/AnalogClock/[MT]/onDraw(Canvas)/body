{
  super.onDraw(canvas);
  boolean changed=mChanged;
  if (changed) {
    mChanged=false;
  }
  int availableWidth=mRight - mLeft;
  int availableHeight=mBottom - mTop;
  int x=availableWidth / 2;
  int y=availableHeight / 2;
  final Drawable dial=mDial;
  int w=dial.getIntrinsicWidth();
  int h=dial.getIntrinsicHeight();
  boolean scaled=false;
  if (availableWidth < w || availableHeight < h) {
    scaled=true;
    float scale=Math.min((float)availableWidth / (float)w,(float)availableHeight / (float)h);
    canvas.save();
    canvas.scale(scale,scale,x,y);
  }
  if (changed) {
    dial.setBounds(x - (w / 2),y - (h / 2),x + (w / 2),y + (h / 2));
  }
  dial.draw(canvas);
  canvas.save();
  canvas.rotate(mHour / 12.0f * 360.0f,x,y);
  final Drawable hourHand=mHourHand;
  if (changed) {
    w=hourHand.getIntrinsicWidth();
    h=hourHand.getIntrinsicHeight();
    hourHand.setBounds(x - (w / 2),y - (h / 2),x + (w / 2),y + (h / 2));
  }
  hourHand.draw(canvas);
  canvas.restore();
  canvas.save();
  canvas.rotate(mMinutes / 60.0f * 360.0f,x,y);
  final Drawable minuteHand=mMinuteHand;
  if (changed) {
    w=minuteHand.getIntrinsicWidth();
    h=minuteHand.getIntrinsicHeight();
    minuteHand.setBounds(x - (w / 2),y - (h / 2),x + (w / 2),y + (h / 2));
  }
  minuteHand.draw(canvas);
  canvas.restore();
  if (scaled) {
    canvas.restore();
  }
}
