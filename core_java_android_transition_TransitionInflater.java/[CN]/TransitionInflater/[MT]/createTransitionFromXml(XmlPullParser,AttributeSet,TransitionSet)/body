{
  Transition transition=null;
  int type;
  int depth=parser.getDepth();
  while (((type=parser.next()) != XmlPullParser.END_TAG || parser.getDepth() > depth) && type != XmlPullParser.END_DOCUMENT) {
    boolean newTransition=false;
    if (type != XmlPullParser.START_TAG) {
      continue;
    }
    String name=parser.getName();
    if ("fade".equals(name)) {
      TypedArray a=mContext.obtainStyledAttributes(attrs,com.android.internal.R.styleable.Fade);
      int fadingMode=a.getInt(com.android.internal.R.styleable.Fade_fadingMode,Fade.IN | Fade.OUT);
      transition=new Fade(fadingMode);
      newTransition=true;
    }
 else     if ("changeBounds".equals(name)) {
      transition=new ChangeBounds();
      newTransition=true;
    }
 else     if ("slide".equals(name)) {
      transition=createSlideTransition(attrs);
      newTransition=true;
    }
 else     if ("explode".equals(name)) {
      transition=new Explode();
      newTransition=true;
    }
 else     if ("moveImage".equals(name)) {
      transition=new MoveImage();
      newTransition=true;
    }
 else     if ("changeImageTransform".equals(name)) {
      transition=new ChangeImageTransform();
      newTransition=true;
    }
 else     if ("changeTransform".equals(name)) {
      transition=new ChangeTransform();
      newTransition=true;
    }
 else     if ("changeClipBounds".equals(name)) {
      transition=new ChangeClipBounds();
      newTransition=true;
    }
 else     if ("autoTransition".equals(name)) {
      transition=new AutoTransition();
      newTransition=true;
    }
 else     if ("recolor".equals(name)) {
      transition=new Recolor();
      newTransition=true;
    }
 else     if ("transitionSet".equals(name)) {
      transition=new TransitionSet();
      TypedArray a=mContext.obtainStyledAttributes(attrs,com.android.internal.R.styleable.TransitionSet);
      int ordering=a.getInt(com.android.internal.R.styleable.TransitionSet_transitionOrdering,TransitionSet.ORDERING_TOGETHER);
      ((TransitionSet)transition).setOrdering(ordering);
      createTransitionFromXml(parser,attrs,((TransitionSet)transition));
      a.recycle();
      newTransition=true;
    }
 else     if ("transition".equals(name)) {
      transition=createCustomTransition(attrs);
    }
 else     if ("targets".equals(name)) {
      if (parser.getDepth() - 1 > depth && transition != null) {
        getTargetIds(parser,attrs,transition);
      }
 else       if (parser.getDepth() - 1 == depth && transitionSet != null) {
        getTargetIds(parser,attrs,transitionSet);
      }
    }
    if (transition != null || "targets".equals(name)) {
      if (newTransition) {
        loadTransition(transition,attrs);
        if (transitionSet != null) {
          transitionSet.addTransition(transition);
        }
      }
    }
 else {
      throw new RuntimeException("Unknown scene name: " + parser.getName());
    }
  }
  return transition;
}
