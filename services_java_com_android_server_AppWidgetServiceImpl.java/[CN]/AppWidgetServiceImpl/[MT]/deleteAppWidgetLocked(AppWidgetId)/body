{
  unbindAppWidgetRemoteViewsServicesLocked(id);
  Host host=id.host;
  host.instances.remove(id);
  pruneHostLocked(host);
  mAppWidgetIds.remove(id);
  Provider p=id.provider;
  if (p != null) {
    p.instances.remove(id);
    if (!p.zombie) {
      Intent intent=new Intent(AppWidgetManager.ACTION_APPWIDGET_DELETED);
      intent.setComponent(p.info.provider);
      intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,id.appWidgetId);
      mContext.sendBroadcast(intent,mUserId);
      if (p.instances.size() == 0) {
        cancelBroadcasts(p);
        intent=new Intent(AppWidgetManager.ACTION_APPWIDGET_DISABLED);
        intent.setComponent(p.info.provider);
        mContext.sendBroadcast(intent,mUserId);
      }
    }
  }
}
