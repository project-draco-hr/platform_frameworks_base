{
synchronized (mAppWidgetIds) {
    if (!mHasFeature) {
      return new ArrayList<AppWidgetProviderInfo>(0);
    }
    ensureStateLoadedLocked();
    final int N=mInstalledProviders.size();
    ArrayList<AppWidgetProviderInfo> result=new ArrayList<AppWidgetProviderInfo>(N);
    for (int i=0; i < N; i++) {
      Provider p=mInstalledProviders.get(i);
      if (!p.zombie && (p.info.widgetCategory & categoryFilter) != 0) {
        result.add(cloneIfLocalBinder(p.info));
      }
    }
    return result;
  }
}
