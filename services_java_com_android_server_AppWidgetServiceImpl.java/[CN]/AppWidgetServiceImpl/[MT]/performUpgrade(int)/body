{
  if (fromVersion < CURRENT_VERSION) {
    Slog.v(TAG,"Upgrading widget database from " + fromVersion + " to "+ CURRENT_VERSION+ " for user "+ mUserId);
  }
  int version=fromVersion;
  if (version == 0) {
    for (int i=0; i < mHosts.size(); i++) {
      Host host=mHosts.get(i);
      if (host != null && "android".equals(host.packageName) && host.hostId == KEYGUARD_HOST_ID) {
        host.packageName=KEYGUARD_HOST_PACKAGE;
      }
    }
    version=1;
  }
  if (version != CURRENT_VERSION) {
    throw new IllegalStateException("Failed to upgrade widget database");
  }
}
