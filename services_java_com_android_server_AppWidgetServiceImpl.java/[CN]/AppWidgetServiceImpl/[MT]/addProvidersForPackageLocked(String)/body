{
  boolean providersAdded=false;
  Intent intent=new Intent(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
  intent.setPackage(pkgName);
  List<ResolveInfo> broadcastReceivers;
  try {
    broadcastReceivers=mPm.queryIntentReceivers(intent,intent.resolveTypeIfNeeded(mContext.getContentResolver()),PackageManager.GET_META_DATA,mUserId);
  }
 catch (  RemoteException re) {
    return false;
  }
  final int N=broadcastReceivers == null ? 0 : broadcastReceivers.size();
  for (int i=0; i < N; i++) {
    ResolveInfo ri=broadcastReceivers.get(i);
    ActivityInfo ai=ri.activityInfo;
    if ((ai.applicationInfo.flags & ApplicationInfo.FLAG_EXTERNAL_STORAGE) != 0) {
      continue;
    }
    if (pkgName.equals(ai.packageName)) {
      addProviderLocked(ri);
      providersAdded=true;
    }
  }
  return providersAdded;
}
