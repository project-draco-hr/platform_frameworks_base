{
  if (mFormat == null) {
    mFormat=new AudioFormat.Builder().build();
  }
  if (mAttributes == null) {
    mAttributes=new AudioAttributes.Builder().setInternalCapturePreset(MediaRecorder.AudioSource.DEFAULT).build();
  }
  try {
    if (mBufferSizeInBytes == 0) {
      mBufferSizeInBytes=mFormat.getChannelCount() * mFormat.getBytesPerSample(mFormat.getEncoding());
    }
    return new AudioRecord(mAttributes,mFormat,mBufferSizeInBytes,mSessionId);
  }
 catch (  IllegalArgumentException e) {
    throw new UnsupportedOperationException(e.getMessage());
  }
}
