{
  CellLocation location=CellLocation.getEmpty();
  mContext=context;
  mBatteryStats=BatteryStatsService.getService();
  int numPhones=TelephonyManager.getDefault().getPhoneCount();
  if (DBG)   log("TelephonyRegistor: ctor numPhones=" + numPhones);
  mNumPhones=numPhones;
  mConnectedApns=new ArrayList[numPhones];
  mCallState=new int[numPhones];
  mDataActivity=new int[numPhones];
  mDataConnectionState=new int[numPhones];
  mDataConnectionNetworkType=new int[numPhones];
  mCallIncomingNumber=new String[numPhones];
  mServiceState=new ServiceState[numPhones];
  mSignalStrength=new SignalStrength[numPhones];
  mMessageWaiting=new boolean[numPhones];
  mDataConnectionPossible=new boolean[numPhones];
  mDataConnectionReason=new String[numPhones];
  mDataConnectionApn=new String[numPhones];
  mCallForwarding=new boolean[numPhones];
  mCellLocation=new Bundle[numPhones];
  mDataConnectionLinkProperties=new LinkProperties[numPhones];
  mDataConnectionNetworkCapabilities=new NetworkCapabilities[numPhones];
  mCellInfo=new ArrayList<List<CellInfo>>();
  for (int i=0; i < numPhones; i++) {
    mCallState[i]=TelephonyManager.CALL_STATE_IDLE;
    mDataActivity[i]=TelephonyManager.DATA_ACTIVITY_NONE;
    mDataConnectionState[i]=TelephonyManager.DATA_UNKNOWN;
    mCallIncomingNumber[i]="";
    mServiceState[i]=new ServiceState();
    mSignalStrength[i]=new SignalStrength();
    mMessageWaiting[i]=false;
    mCallForwarding[i]=false;
    mDataConnectionPossible[i]=false;
    mDataConnectionReason[i]="";
    mDataConnectionApn[i]="";
    mCellLocation[i]=new Bundle();
    mCellInfo.add(i,null);
    mConnectedApns[i]=new ArrayList<String>();
  }
  if (location != null) {
    for (int i=0; i < numPhones; i++) {
      location.fillInNotifierBundle(mCellLocation[i]);
    }
  }
  mAppOps=mContext.getSystemService(AppOpsManager.class);
}
