{
  if (listener == null) {
    throw new IllegalArgumentException("Listener cannot be null");
  }
synchronized (mLock) {
    if (getHandlerForListenerLocked(listener) != null) {
      Log.w(TAG,"Listener is already added, ignoring");
    }
    if (handler == null) {
      handler=new Handler();
    }
    MessageHandler msgHandler=new MessageHandler(handler.getLooper(),listener);
    mListeners.add(msgHandler);
  }
}
