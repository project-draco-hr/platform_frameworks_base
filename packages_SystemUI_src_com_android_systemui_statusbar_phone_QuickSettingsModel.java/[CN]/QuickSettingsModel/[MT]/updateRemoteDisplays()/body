{
  MediaRouter.RouteInfo connectedRoute=mMediaRouter.getSelectedRoute(MediaRouter.ROUTE_TYPE_REMOTE_DISPLAY);
  boolean enabled=connectedRoute != null && connectedRoute.matchesTypes(MediaRouter.ROUTE_TYPE_REMOTE_DISPLAY);
  boolean connecting;
  if (enabled) {
    connecting=connectedRoute.isConnecting();
  }
 else {
    connectedRoute=null;
    connecting=false;
    final int count=mMediaRouter.getRouteCount();
    for (int i=0; i < count; i++) {
      MediaRouter.RouteInfo route=mMediaRouter.getRouteAt(i);
      if (route.matchesTypes(MediaRouter.ROUTE_TYPE_REMOTE_DISPLAY)) {
        enabled=true;
        break;
      }
    }
  }
  mRemoteDisplayState.enabled=enabled;
  if (connectedRoute != null) {
    mRemoteDisplayState.label=connectedRoute.getName().toString();
    mRemoteDisplayState.iconId=connecting ? R.drawable.ic_qs_cast_connecting : R.drawable.ic_qs_cast_connected;
  }
 else {
    mRemoteDisplayState.label=mContext.getString(R.string.quick_settings_remote_display_no_connection_label);
    mRemoteDisplayState.iconId=R.drawable.ic_qs_cast_available;
  }
  mRemoteDisplayCallback.refreshView(mRemoteDisplayTile,mRemoteDisplayState);
}
