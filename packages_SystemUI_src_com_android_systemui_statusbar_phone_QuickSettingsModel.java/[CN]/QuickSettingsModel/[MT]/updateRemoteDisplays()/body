{
  MediaRouter.RouteInfo connectedRoute=mMediaRouter.getSelectedRoute(MediaRouter.ROUTE_TYPE_REMOTE_DISPLAY);
  boolean enabled=connectedRoute != null && (connectedRoute.getSupportedTypes() & MediaRouter.ROUTE_TYPE_REMOTE_DISPLAY) != 0;
  if (!enabled) {
    connectedRoute=null;
    final int count=mMediaRouter.getRouteCount();
    for (int i=0; i < count; i++) {
      MediaRouter.RouteInfo route=mMediaRouter.getRouteAt(i);
      if ((route.getSupportedTypes() & MediaRouter.ROUTE_TYPE_REMOTE_DISPLAY) != 0) {
        enabled=true;
        break;
      }
    }
  }
  mRemoteDisplayState.enabled=enabled;
  if (connectedRoute != null) {
    mRemoteDisplayState.label=connectedRoute.getName().toString();
    mRemoteDisplayState.iconId=R.drawable.ic_qs_remote_display_connected;
  }
 else {
    mRemoteDisplayState.label=mContext.getString(R.string.quick_settings_remote_display_no_connection_label);
    mRemoteDisplayState.iconId=R.drawable.ic_qs_remote_display;
  }
  mRemoteDisplayCallback.refreshView(mRemoteDisplayTile,mRemoteDisplayState);
}
