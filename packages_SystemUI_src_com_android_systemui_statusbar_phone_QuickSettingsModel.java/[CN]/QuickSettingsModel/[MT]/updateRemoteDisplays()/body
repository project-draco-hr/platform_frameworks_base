{
  MediaRouter.RouteInfo connectedRoute=mMediaRouter.getSelectedRoute(MediaRouter.ROUTE_TYPE_REMOTE_DISPLAY);
  boolean enabled=connectedRoute != null && connectedRoute.matchesTypes(MediaRouter.ROUTE_TYPE_REMOTE_DISPLAY);
  boolean connecting;
  if (enabled) {
    connecting=connectedRoute.isConnecting();
  }
 else {
    connectedRoute=null;
    connecting=false;
    final int count=mMediaRouter.getRouteCount();
    for (int i=0; i < count; i++) {
      MediaRouter.RouteInfo route=mMediaRouter.getRouteAt(i);
      if (route.matchesTypes(MediaRouter.ROUTE_TYPE_REMOTE_DISPLAY)) {
        enabled=true;
        break;
      }
    }
  }
  mRemoteDisplayState.enabled=enabled;
  if (connectedRoute != null) {
    mRemoteDisplayState.label=connectedRoute.getName().toString();
    mRemoteDisplayState.iconId=connecting ? com.android.internal.R.drawable.ic_media_route_connecting_holo_dark : com.android.internal.R.drawable.ic_media_route_on_holo_dark;
  }
 else {
    mRemoteDisplayState.label=mContext.getString(R.string.quick_settings_remote_display_no_connection_label);
    mRemoteDisplayState.iconId=com.android.internal.R.drawable.ic_media_route_off_holo_dark;
  }
  mRemoteDisplayCallback.refreshView(mRemoteDisplayTile,mRemoteDisplayState);
}
