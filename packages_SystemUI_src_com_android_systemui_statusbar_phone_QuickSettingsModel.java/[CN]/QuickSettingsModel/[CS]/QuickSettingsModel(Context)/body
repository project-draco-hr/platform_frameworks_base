{
  mContext=context;
  mHandler=new Handler();
  mUserTracker=new CurrentUserTracker(mContext){
    @Override public void onUserSwitched(    int newUserId){
      mBrightnessObserver.startObserving();
      mInversionObserver.startObserving();
      mContrastObserver.startObserving();
      mColorSpaceObserver.startObserving();
      refreshRotationLockTile();
      onBrightnessLevelChanged();
      onInversionChanged();
      onContrastChanged();
      onColorSpaceChanged();
      onNextAlarmChanged();
      onBugreportChanged();
      rebindMediaRouterAsCurrentUser();
    }
  }
;
  mNextAlarmObserver=new NextAlarmObserver(mHandler);
  mNextAlarmObserver.startObserving();
  mBugreportObserver=new BugreportObserver(mHandler);
  mBugreportObserver.startObserving();
  mBrightnessObserver=new BrightnessObserver(mHandler);
  mBrightnessObserver.startObserving();
  mInversionObserver=new DisplayInversionObserver(mHandler);
  mInversionObserver.startObserving();
  mContrastObserver=new DisplayContrastObserver(mHandler);
  mContrastObserver.startObserving();
  mColorSpaceObserver=new DisplayColorSpaceObserver(mHandler);
  mColorSpaceObserver.startObserving();
  mZenModeObserver=new ZenModeObserver(mHandler);
  mZenModeObserver.startObserving();
  mMediaRouter=(MediaRouter)context.getSystemService(Context.MEDIA_ROUTER_SERVICE);
  rebindMediaRouterAsCurrentUser();
  mRemoteDisplayRouteCallback=new RemoteDisplayRouteCallback();
  ConnectivityManager cm=(ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
  mHasMobileData=cm.isNetworkSupported(ConnectivityManager.TYPE_MOBILE);
  IntentFilter alarmIntentFilter=new IntentFilter();
  alarmIntentFilter.addAction(Intent.ACTION_ALARM_CHANGED);
  context.registerReceiver(mAlarmIntentReceiver,alarmIntentFilter);
}
