{
  if (ANIMATE_TRANSITIONS && isLaidOut() && mMetadataContainer.getVisibility() == VISIBLE) {
    TransitionManager.beginDelayedTransition(mMetadataContainer,mMetadataChangeTransition);
  }
  final String remoteClientPackage=mRemoteController.getRemoteControlClientPackageName();
  Drawable badgeIcon=null;
  try {
    badgeIcon=getContext().getPackageManager().getApplicationIcon(remoteClientPackage);
  }
 catch (  PackageManager.NameNotFoundException e) {
    Log.e(TAG,"Couldn't get remote control client package icon",e);
  }
  setBadgeIcon(badgeIcon);
  if (!TextUtils.isEmpty(mMetadata.trackTitle)) {
    mTrackTitle.setText(mMetadata.trackTitle);
  }
  StringBuilder sb=new StringBuilder();
  if (!TextUtils.isEmpty(mMetadata.artist)) {
    if (sb.length() != 0) {
      sb.append(" - ");
    }
    sb.append(mMetadata.artist);
  }
  if (!TextUtils.isEmpty(mMetadata.albumTitle)) {
    if (sb.length() != 0) {
      sb.append(" - ");
    }
    sb.append(mMetadata.albumTitle);
  }
  mTrackArtistAlbum.setText(sb.toString());
  if (mMetadata.duration >= 0) {
    setSeekBarsEnabled(true);
    setSeekBarDuration(mMetadata.duration);
    final String skeleton;
    if (mMetadata.duration >= 86400000) {
      skeleton="DDD kk mm ss";
    }
 else     if (mMetadata.duration >= 3600000) {
      skeleton="kk mm ss";
    }
 else {
      skeleton="mm ss";
    }
    mFormat=new SimpleDateFormat(DateFormat.getBestDateTimePattern(getContext().getResources().getConfiguration().locale,skeleton));
    mFormat.setTimeZone(TimeZone.getTimeZone("GMT+0"));
  }
 else {
    setSeekBarsEnabled(false);
  }
  KeyguardUpdateMonitor.getInstance(getContext()).dispatchSetBackground(mMetadata.bitmap);
  final int flags=mTransportControlFlags;
  setVisibilityBasedOnFlag(mBtnPrev,flags,RemoteControlClient.FLAG_KEY_MEDIA_PREVIOUS);
  setVisibilityBasedOnFlag(mBtnNext,flags,RemoteControlClient.FLAG_KEY_MEDIA_NEXT);
  setVisibilityBasedOnFlag(mBtnPlay,flags,RemoteControlClient.FLAG_KEY_MEDIA_PLAY | RemoteControlClient.FLAG_KEY_MEDIA_PAUSE | RemoteControlClient.FLAG_KEY_MEDIA_PLAY_PAUSE| RemoteControlClient.FLAG_KEY_MEDIA_STOP);
  updatePlayPauseState(mCurrentPlayState);
}
