{
  if (isAttachedToWindow()) {
    mMetadata.artist=data.getString(MediaMetadataRetriever.METADATA_KEY_ALBUMARTIST,mMetadata.artist);
    mMetadata.trackTitle=data.getString(MediaMetadataRetriever.METADATA_KEY_TITLE,mMetadata.trackTitle);
    mMetadata.albumTitle=data.getString(MediaMetadataRetriever.METADATA_KEY_ALBUM,mMetadata.albumTitle);
    mMetadata.duration=data.getLong(MediaMetadataRetriever.METADATA_KEY_DURATION,-1);
    mMetadata.bitmap=data.getBitmap(MediaMetadataEditor.BITMAP_KEY_ARTWORK,mMetadata.bitmap);
    populateMetadata();
  }
 else {
    mPopulateMetadataWhenAttached=data;
  }
}
