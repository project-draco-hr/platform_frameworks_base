{
  L.d("parsing file %s",xml.getAbsolutePath());
  DocumentBuilderFactory factory=DocumentBuilderFactory.newInstance();
  final DocumentBuilder builder=factory.newDocumentBuilder();
  final Document doc=builder.parse(xml);
  final XPathFactory xPathFactory=XPathFactory.newInstance();
  final XPath xPath=xPathFactory.newXPath();
  final LayoutBinder layoutBinder=new LayoutBinder(doc);
  List<Node> variableNodes=getVariableNodes(doc,xPath);
  L.d("number of variable nodes %d",variableNodes.size());
  for (  Node item : variableNodes) {
    L.d("reading variable node %s",item);
    NamedNodeMap attributes=item.getAttributes();
    String variableName=attributes.getNamedItem("name").getNodeValue();
    String variableType=attributes.getNamedItem("type").getNodeValue();
    L.d("name: %s, type:%s",variableName,variableType);
    layoutBinder.addVariable(variableName,variableType);
  }
  final List<Node> imports=getImportNodes(doc,xPath);
  L.d("import node count %d",imports.size());
  for (  Node item : imports) {
    NamedNodeMap attributes=item.getAttributes();
    String type=attributes.getNamedItem("type").getNodeValue();
    final Node aliasNode=attributes.getNamedItem("alias");
    final String alias;
    if (aliasNode == null) {
      final String[] split=StringUtils.split(type,'.');
      alias=split[split.length - 1];
    }
 else {
      alias=aliasNode.getNodeValue();
    }
    layoutBinder.addImport(alias,type);
  }
  final List<Node> bindingNodes=getBindingNodes(doc,xPath);
  L.d("number of binding nodes %d",bindingNodes.size());
  for (  Node parent : bindingNodes) {
    NamedNodeMap attributes=parent.getAttributes();
    Node id=attributes.getNamedItem("android:id");
    if (id != null) {
      final BindingTarget bindingTarget=layoutBinder.createBindingTarget(parent,id.getNodeValue(),getFullViewClassName(parent.getNodeName()));
      int attrCount=attributes.getLength();
      for (int i=0; i < attrCount; i++) {
        final Node attr=attributes.item(i);
        String value=attr.getNodeValue();
        if (value.charAt(0) == '{' && value.charAt(value.length() - 1) == '}') {
          final String strippedValue=value.substring(1,value.length() - 1);
          bindingTarget.addBinding(attr.getNodeName(),layoutBinder.parse(strippedValue));
        }
      }
    }
  }
  if (!layoutBinder.isEmpty()) {
    mLayoutBinders.add(layoutBinder);
  }
  return layoutBinder;
}
