{
  if (mWakefulness == WAKEFULNESS_NAPPING || mWakefulness == WAKEFULNESS_DREAMING) {
    if (isItBedTimeYetLocked()) {
      goToSleepNoUpdateLocked(SystemClock.uptimeMillis(),PowerManager.GO_TO_SLEEP_REASON_TIMEOUT);
      updatePowerStateLocked();
    }
 else {
      wakeUpNoUpdateLocked(SystemClock.uptimeMillis());
      updatePowerStateLocked();
    }
  }
}
