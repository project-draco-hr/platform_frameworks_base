{
synchronized (mLock) {
    int index=findWakeLockIndexLocked(lock);
    if (index < 0) {
      throw new IllegalArgumentException("Wake lock not active");
    }
    WakeLock wakeLock=mWakeLocks.get(index);
    if (!wakeLock.hasSameWorkSource(ws)) {
      notifyWakeLockReleasedLocked(wakeLock);
      wakeLock.updateWorkSource(ws);
      notifyWakeLockAcquiredLocked(wakeLock);
    }
  }
}
