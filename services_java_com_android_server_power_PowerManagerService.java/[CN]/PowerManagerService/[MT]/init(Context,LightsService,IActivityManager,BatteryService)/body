{
  mLightsService=lights;
  mContext=context;
  mActivityService=activity;
  mBatteryStats=BatteryStatsService.getService();
  mBatteryService=battery;
  mLcdLight=lights.getLight(LightsService.LIGHT_ID_BACKLIGHT);
  mButtonLight=lights.getLight(LightsService.LIGHT_ID_BUTTONS);
  mKeyboardLight=lights.getLight(LightsService.LIGHT_ID_KEYBOARD);
  mAttentionLight=lights.getLight(LightsService.LIGHT_ID_ATTENTION);
  mHeadless="1".equals(SystemProperties.get("ro.config.headless","0"));
  mInitComplete=false;
  mScreenBrightnessAnimator=new ScreenBrightnessAnimator("mScreenBrightnessUpdaterThread",Process.THREAD_PRIORITY_DISPLAY);
  mScreenBrightnessAnimator.start();
synchronized (mScreenBrightnessAnimator) {
    while (!mInitComplete) {
      try {
        mScreenBrightnessAnimator.wait();
      }
 catch (      InterruptedException e) {
      }
    }
  }
  mInitComplete=false;
  mHandlerThread=new HandlerThread("PowerManagerService"){
    @Override protected void onLooperPrepared(){
      super.onLooperPrepared();
      initInThread();
    }
  }
;
  mHandlerThread.start();
synchronized (mHandlerThread) {
    while (!mInitComplete) {
      try {
        mHandlerThread.wait();
      }
 catch (      InterruptedException e) {
      }
    }
  }
synchronized (mLocks) {
    updateNativePowerStateLocked();
    forceUserActivityLocked();
    mInitialized=true;
  }
}
