{
  mContext.enforceCallingOrSelfPermission(android.Manifest.permission.DEVICE_POWER,null);
  if (DEBUG)   Slog.d(TAG,"setButtonBrightnessOverride " + brightness);
synchronized (mLocks) {
    if (mButtonBrightnessOverride != brightness) {
      mButtonBrightnessOverride=brightness;
      if (isScreenOn()) {
        updateLightsLocked(mPowerState,BUTTON_BRIGHT_BIT | KEYBOARD_BRIGHT_BIT);
      }
    }
  }
}
