{
  int uid=Binder.getCallingUid();
  int pid=Binder.getCallingPid();
  if (uid != Process.myUid()) {
    mContext.enforceCallingOrSelfPermission(android.Manifest.permission.WAKE_LOCK,null);
  }
  if (ws != null) {
    enforceWakeSourcePermission(uid,pid);
  }
  long ident=Binder.clearCallingIdentity();
  try {
synchronized (mLocks) {
      acquireWakeLockLocked(flags,lock,uid,pid,tag,ws);
    }
  }
  finally {
    Binder.restoreCallingIdentity(ident);
  }
}
