{
  if (mCurState != STATE_NOTHING) {
    int idx=State.binarySearch(mPssTable,mPssTableSize,mCurState);
    int off;
    if (idx >= 0) {
      off=mPssTable[idx];
    }
 else {
      mState.mFindTable=mPssTable;
      mState.mFindTableSize=mPssTableSize;
      off=mState.addLongData(~idx,mCurState,PSS_COUNT);
      mPssTable=mState.mFindTable;
      mPssTableSize=mState.mFindTableSize;
    }
    long[] longs=mState.mLongs.get((off >> OFFSET_ARRAY_SHIFT) & OFFSET_ARRAY_MASK);
    idx=(off >> OFFSET_INDEX_SHIFT) & OFFSET_INDEX_MASK;
    long count=longs[idx + PSS_SAMPLE_COUNT];
    if (count == 0) {
      longs[idx + PSS_SAMPLE_COUNT]=1;
      longs[idx + PSS_MINIMUM]=pss;
      longs[idx + PSS_AVERAGE]=pss;
      longs[idx + PSS_MAXIMUM]=pss;
    }
 else {
      longs[idx + PSS_SAMPLE_COUNT]=count + 1;
      if (longs[idx + PSS_MINIMUM] > pss) {
        longs[idx + PSS_MINIMUM]=pss;
      }
      longs[idx + PSS_AVERAGE]=((longs[idx + PSS_AVERAGE] * count) + pss) / (count + 1);
      if (longs[idx + PSS_MAXIMUM] < pss) {
        longs[idx + PSS_MAXIMUM]=pss;
      }
    }
  }
}
