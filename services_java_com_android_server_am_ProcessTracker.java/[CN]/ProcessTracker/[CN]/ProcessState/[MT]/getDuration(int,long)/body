{
  int idx=State.binarySearch(mDurationsTable,mDurationsTableSize,state);
  long time=idx >= 0 ? mState.getLong(mDurationsTable[idx],0) : 0;
  if (mCurState == state) {
    time+=now - mStartTime;
  }
  return time;
}
