{
  if (state != STATE_NOTHING) {
    state+=memFactor * STATE_COUNT;
  }
  if (mCurState != state) {
    if (mCurState != STATE_NOTHING) {
      mDurations[mCurState]+=now - mStartTime;
    }
    mCurState=state;
    mStartTime=now;
  }
}
