{
  if (now > (mState.mLastWriteTime + WRITE_PERIOD)) {
    if (SystemClock.elapsedRealtime() > (mState.mTimePeriodStartRealtime + COMMIT_PERIOD)) {
      mCommitPending=true;
      mState.mFlags|=State.FLAG_COMPLETE;
    }
    return true;
  }
  return false;
}
