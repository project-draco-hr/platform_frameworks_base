{
  long totalTime=0;
  int printedScreen=-1;
  for (int iscreen=0; iscreen < ADJ_COUNT; iscreen+=ADJ_SCREEN_MOD) {
    int printedMem=-1;
    for (int imem=0; imem < ADJ_MEM_FACTOR_COUNT; imem++) {
      for (int is=0; is < STATE_NAMES.length; is++) {
        int bucket=is + (STATE_COUNT * (imem + iscreen));
        long time=proc.mDurations[bucket];
        String running="";
        if (proc.mCurState == bucket) {
          time+=now - proc.mStartTime;
          running=" (running)";
        }
        if (!isCheckin) {
          if (time != 0) {
            pw.print(prefix);
            printScreenLabel(pw,printedScreen != iscreen ? iscreen : STATE_NOTHING);
            printedScreen=iscreen;
            printMemLabel(pw,printedMem != imem ? imem : STATE_NOTHING);
            printedMem=imem;
            pw.print(STATE_NAMES[is]);
            pw.print(": ");
            TimeUtils.formatDuration(time,pw);
            pw.println(running);
            totalTime+=time;
          }
        }
 else {
          pw.print(",");
          pw.print(time);
        }
      }
    }
  }
  if (!isCheckin) {
    if (totalTime != 0) {
      pw.print(prefix);
      printScreenLabel(pw,STATE_NOTHING);
      printMemLabel(pw,STATE_NOTHING);
      pw.print("TOTAL      : ");
      TimeUtils.formatDuration(totalTime,pw);
      pw.println();
    }
  }
 else {
    pw.println();
  }
}
