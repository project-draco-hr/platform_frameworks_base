{
  final int count=getVirtualChildCount();
  int top=getPaddingTop();
  for (int i=0; i < count; i++) {
    final View child=getVirtualChildAt(i);
    if (child == null) {
      top+=measureNullChild(i);
    }
 else     if (child.getVisibility() != GONE) {
      if (hasDividerBeforeChildAt(i)) {
        drawHorizontalDivider(canvas,top);
        top+=mDividerHeight;
      }
      LayoutParams lp=(LayoutParams)child.getLayoutParams();
      top+=lp.topMargin + child.getHeight() + lp.bottomMargin;
    }
  }
  if (hasDividerBeforeChildAt(count)) {
    drawHorizontalDivider(canvas,top);
  }
}
