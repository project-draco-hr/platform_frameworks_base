{
  final boolean showDividerBeginning=(mShowDividers & SHOW_DIVIDER_BEGINNING) == SHOW_DIVIDER_BEGINNING;
  final boolean showDividerMiddle=(mShowDividers & SHOW_DIVIDER_MIDDLE) == SHOW_DIVIDER_MIDDLE;
  final boolean showDividerEnd=(mShowDividers & SHOW_DIVIDER_END) == SHOW_DIVIDER_END;
  final int count=getVirtualChildCount();
  int left=getPaddingLeft();
  boolean firstVisible=true;
  for (int i=0; i < count; i++) {
    final View child=getVirtualChildAt(i);
    if (child == null) {
      left+=measureNullChild(i);
    }
 else     if (child.getVisibility() != GONE) {
      if (firstVisible) {
        firstVisible=false;
        if (showDividerBeginning) {
          drawVerticalDivider(canvas,left);
          left+=mDividerWidth;
        }
      }
 else       if (showDividerMiddle) {
        drawVerticalDivider(canvas,left);
        left+=mDividerWidth;
      }
      LayoutParams lp=(LayoutParams)child.getLayoutParams();
      left+=lp.leftMargin + child.getWidth() + lp.rightMargin;
    }
  }
  if (showDividerEnd) {
    drawVerticalDivider(canvas,left);
  }
}
