{
  if (mLocalAnimating && mAnimationIsEntrance == isEntrance) {
    return true;
  }
  if (mService.okToDisplay()) {
    int anim=mPolicy.selectAnimationLw(mWin,transit);
    int attr=-1;
    Animation a=null;
    if (anim != 0) {
      a=anim != -1 ? AnimationUtils.loadAnimation(mContext,anim) : null;
    }
 else {
switch (transit) {
case WindowManagerPolicy.TRANSIT_ENTER:
        attr=com.android.internal.R.styleable.WindowAnimation_windowEnterAnimation;
      break;
case WindowManagerPolicy.TRANSIT_EXIT:
    attr=com.android.internal.R.styleable.WindowAnimation_windowExitAnimation;
  break;
case WindowManagerPolicy.TRANSIT_SHOW:
attr=com.android.internal.R.styleable.WindowAnimation_windowShowAnimation;
break;
case WindowManagerPolicy.TRANSIT_HIDE:
attr=com.android.internal.R.styleable.WindowAnimation_windowHideAnimation;
break;
}
if (attr >= 0) {
a=mService.mAppTransition.loadAnimation(mWin.mAttrs,attr);
}
}
if (WindowManagerService.DEBUG_ANIM) Slog.v(TAG,"applyAnimation: win=" + this + " anim="+ anim+ " attr=0x"+ Integer.toHexString(attr)+ " a="+ a+ " transit="+ transit+ " isEntrance="+ isEntrance+ " Callers "+ Debug.getCallers(3));
if (a != null) {
if (WindowManagerService.DEBUG_ANIM) {
RuntimeException e=null;
if (!WindowManagerService.HIDE_STACK_CRAWLS) {
e=new RuntimeException();
e.fillInStackTrace();
}
Slog.v(TAG,"Loaded animation " + a + " for "+ this,e);
}
setAnimation(a);
mAnimationIsEntrance=isEntrance;
}
}
 else {
clearAnimation();
}
return mAnimation != null;
}
