{
  while (true) {
    final HashMap<String,UsbDevice> devices=mUsbManager.getDeviceList();
    if (devices.size() == 0) {
      show("Wait for devices.");
      Thread.sleep(1000);
      continue;
    }
    final UsbDevice device=devices.values().iterator().next();
    requestPermission(device);
    final UsbDeviceConnection connection=mUsbManager.openDevice(device);
    if (connection == null) {
      fail("Cannot open USB connection.");
    }
    for (int i=0; i < device.getInterfaceCount(); i++) {
      connection.claimInterface(device.getInterface(i),true);
      connection.releaseInterface(device.getInterface(i));
    }
    connection.close();
    return device;
  }
}
