{
switch (message.what) {
case DO_ON_ACCESSIBILITY_EVENT:
{
      AccessibilityEvent event=(AccessibilityEvent)message.obj;
      if (event != null) {
        AccessibilityInteractionClient.getInstance().onAccessibilityEvent(event);
        mCallback.onAccessibilityEvent(event);
        try {
          event.recycle();
        }
 catch (        IllegalStateException ise) {
        }
      }
    }
  return;
case DO_ON_INTERRUPT:
{
  mCallback.onInterrupt();
}
return;
case DO_SET_SET_CONNECTION:
{
mConnectionId=message.arg1;
IAccessibilityServiceConnection connection=(IAccessibilityServiceConnection)message.obj;
if (connection != null) {
AccessibilityInteractionClient.getInstance().addConnection(mConnectionId,connection);
mCallback.onSetConnectionId(mConnectionId);
mCallback.onServiceConnected();
}
 else {
AccessibilityInteractionClient.getInstance().removeConnection(mConnectionId);
AccessibilityInteractionClient.getInstance().clearCache();
mCallback.onSetConnectionId(AccessibilityInteractionClient.NO_ID);
}
}
return;
case DO_ON_GESTURE:
{
final int gestureId=message.arg1;
mCallback.onGesture(gestureId);
}
return;
case DO_CLEAR_ACCESSIBILITY_CACHE:
{
AccessibilityInteractionClient.getInstance().clearCache();
}
return;
case DO_ON_KEY_EVENT:
{
KeyEvent event=(KeyEvent)message.obj;
try {
IAccessibilityServiceConnection connection=AccessibilityInteractionClient.getInstance().getConnection(mConnectionId);
if (connection != null) {
final boolean result=mCallback.onKeyEvent(event);
final int sequence=message.arg1;
try {
connection.setOnKeyEventResult(result,sequence);
}
 catch (RemoteException re) {
}
}
}
  finally {
try {
event.recycle();
}
 catch (IllegalStateException ise) {
}
}
}
return;
default :
Log.w(LOG_TAG,"Unknown message type " + message.what);
}
}
