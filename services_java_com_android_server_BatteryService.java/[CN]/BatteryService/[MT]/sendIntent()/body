{
  Intent intent=new Intent(Intent.ACTION_BATTERY_CHANGED);
  intent.addFlags(Intent.FLAG_RECEIVER_REGISTERED_ONLY);
  try {
    mBatteryStats.setOnBattery(mPlugType == BATTERY_PLUGGED_NONE);
  }
 catch (  RemoteException e) {
  }
  int icon=getIcon(mBatteryLevel);
  intent.putExtra("status",mBatteryStatus);
  intent.putExtra("health",mBatteryHealth);
  intent.putExtra("present",mBatteryPresent);
  intent.putExtra("level",mBatteryLevel);
  intent.putExtra("scale",BATTERY_SCALE);
  intent.putExtra("icon-small",icon);
  intent.putExtra("plugged",mPlugType);
  intent.putExtra("voltage",mBatteryVoltage);
  intent.putExtra("temperature",mBatteryTemperature);
  intent.putExtra("technology",mBatteryTechnology);
  if (false) {
    Log.d(TAG,"updateBattery level:" + mBatteryLevel + " scale:"+ BATTERY_SCALE+ " status:"+ mBatteryStatus+ " health:"+ mBatteryHealth+ " present:"+ mBatteryPresent+ " voltage: "+ mBatteryVoltage+ " temperature: "+ mBatteryTemperature+ " technology: "+ mBatteryTechnology+ " AC powered:"+ mAcOnline+ " USB powered:"+ mUsbOnline+ " icon:"+ icon);
  }
  ActivityManagerNative.broadcastStickyIntent(intent,null);
}
