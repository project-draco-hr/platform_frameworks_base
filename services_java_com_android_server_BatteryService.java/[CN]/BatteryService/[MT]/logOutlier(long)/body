{
  ContentResolver cr=mContext.getContentResolver();
  String dischargeThresholdString=Settings.Gservices.getString(cr,Settings.Gservices.BATTERY_DISCHARGE_THRESHOLD);
  String durationThresholdString=Settings.Gservices.getString(cr,Settings.Gservices.BATTERY_DISCHARGE_DURATION_THRESHOLD);
  if (dischargeThresholdString != null && durationThresholdString != null) {
    try {
      long durationThreshold=Long.parseLong(durationThresholdString);
      int dischargeThreshold=Integer.parseInt(dischargeThresholdString);
      if (duration <= durationThreshold && mDischargeStartLevel - mBatteryLevel >= dischargeThreshold) {
        logBatteryStats();
      }
      if (LOCAL_LOGV)       Log.v(TAG,"duration threshold: " + durationThreshold + " discharge threshold: "+ dischargeThreshold);
      if (LOCAL_LOGV)       Log.v(TAG,"duration: " + duration + " discharge: "+ (mDischargeStartLevel - mBatteryLevel));
    }
 catch (    NumberFormatException e) {
      Log.e(TAG,"Invalid DischargeThresholds GService string: " + durationThresholdString + " or "+ dischargeThresholdString);
      return;
    }
  }
}
