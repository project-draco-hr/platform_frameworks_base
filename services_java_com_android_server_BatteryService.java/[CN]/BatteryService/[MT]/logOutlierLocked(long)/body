{
  ContentResolver cr=mContext.getContentResolver();
  String dischargeThresholdString=Settings.Global.getString(cr,Settings.Global.BATTERY_DISCHARGE_THRESHOLD);
  String durationThresholdString=Settings.Global.getString(cr,Settings.Global.BATTERY_DISCHARGE_DURATION_THRESHOLD);
  if (dischargeThresholdString != null && durationThresholdString != null) {
    try {
      long durationThreshold=Long.parseLong(durationThresholdString);
      int dischargeThreshold=Integer.parseInt(dischargeThresholdString);
      if (duration <= durationThreshold && mDischargeStartLevel - mBatteryLevel >= dischargeThreshold) {
        logBatteryStatsLocked();
      }
      if (DEBUG)       Slog.v(TAG,"duration threshold: " + durationThreshold + " discharge threshold: "+ dischargeThreshold);
      if (DEBUG)       Slog.v(TAG,"duration: " + duration + " discharge: "+ (mDischargeStartLevel - mBatteryLevel));
    }
 catch (    NumberFormatException e) {
      Slog.e(TAG,"Invalid DischargeThresholds GService string: " + durationThresholdString + " or "+ dischargeThresholdString);
      return;
    }
  }
}
