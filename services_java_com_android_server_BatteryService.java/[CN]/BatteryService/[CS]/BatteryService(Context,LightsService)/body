{
  mContext=context;
  mHandler=new Handler(true);
  mLed=new Led(context,lights);
  mBatteryStats=BatteryStatsService.getService();
  mCriticalBatteryLevel=mContext.getResources().getInteger(com.android.internal.R.integer.config_criticalBatteryWarningLevel);
  mLowBatteryWarningLevel=mContext.getResources().getInteger(com.android.internal.R.integer.config_lowBatteryWarningLevel);
  mLowBatteryCloseWarningLevel=mContext.getResources().getInteger(com.android.internal.R.integer.config_lowBatteryCloseWarningLevel);
  mShutdownBatteryTemperature=mContext.getResources().getInteger(com.android.internal.R.integer.config_shutdownBatteryTemperature);
  if (new File("/sys/devices/virtual/switch/invalid_charger/state").exists()) {
    mInvalidChargerObserver.startObserving("DEVPATH=/devices/virtual/switch/invalid_charger");
  }
  mBatteryPropertiesListener=new BatteryListener();
  IBinder b=ServiceManager.getService("batteryproperties");
  mBatteryPropertiesRegistrar=IBatteryPropertiesRegistrar.Stub.asInterface(b);
  try {
    mBatteryPropertiesRegistrar.registerListener(mBatteryPropertiesListener);
  }
 catch (  RemoteException e) {
  }
}
