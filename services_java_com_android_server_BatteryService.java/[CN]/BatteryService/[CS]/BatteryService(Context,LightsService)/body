{
  mContext=context;
  mLed=new Led(context,lights);
  mBatteryStats=BatteryStatsService.getService();
  mCriticalBatteryLevel=mContext.getResources().getInteger(com.android.internal.R.integer.config_criticalBatteryWarningLevel);
  mLowBatteryWarningLevel=mContext.getResources().getInteger(com.android.internal.R.integer.config_lowBatteryWarningLevel);
  mLowBatteryCloseWarningLevel=mContext.getResources().getInteger(com.android.internal.R.integer.config_lowBatteryCloseWarningLevel);
  mShutdownBatteryTemperature=mContext.getResources().getInteger(com.android.internal.R.integer.config_shutdownBatteryTemperature);
  mPowerSupplyObserver.startObserving("SUBSYSTEM=power_supply");
  if (new File("/sys/devices/virtual/switch/invalid_charger/state").exists()) {
    mInvalidChargerObserver.startObserving("DEVPATH=/devices/virtual/switch/invalid_charger");
  }
synchronized (mLock) {
    updateLocked();
  }
}
