{
  Context context=getActivity();
  AlertDialog.Builder builder=new AlertDialog.Builder(context);
  LayoutInflater dialogInflater=LayoutInflater.from(builder.getContext());
  View view=dialogInflater.inflate(R.layout.dialog_file_name,null,false);
  final EditText editText=(EditText)view.findViewById(android.R.id.text1);
  fillWithFileName(editText,mDocument.displayName);
  builder.setTitle(R.string.menu_rename);
  builder.setView(view);
  builder.setPositiveButton(android.R.string.ok,new OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      renameDocuments(editText.getText().toString());
    }
  }
);
  builder.setNegativeButton(android.R.string.cancel,null);
  final AlertDialog dialog=builder.create();
  editText.setOnEditorActionListener(new OnEditorActionListener(){
    @Override public boolean onEditorAction(    TextView view,    int actionId,    @Nullable KeyEvent event){
      if ((actionId == EditorInfo.IME_ACTION_DONE) || (event != null && event.getKeyCode() == KeyEvent.KEYCODE_ENTER && event.hasNoModifiers())) {
        renameDocuments(editText.getText().toString());
        dialog.dismiss();
        return true;
      }
      return false;
    }
  }
);
  return dialog;
}
