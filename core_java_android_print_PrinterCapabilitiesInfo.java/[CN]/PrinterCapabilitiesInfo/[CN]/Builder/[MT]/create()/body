{
  if (mPrototype.mMediaSizes == null || mPrototype.mMediaSizes.isEmpty()) {
    throw new IllegalStateException("No media size specified.");
  }
  if (mPrototype.mDefaults[PROPERTY_MEDIA_SIZE] == DEFAULT_UNDEFINED) {
    throw new IllegalStateException("No default media size specified.");
  }
  if (mPrototype.mResolutions == null || mPrototype.mResolutions.isEmpty()) {
    throw new IllegalStateException("No resolution specified.");
  }
  if (mPrototype.mDefaults[PROPERTY_RESOLUTION] == DEFAULT_UNDEFINED) {
    throw new IllegalStateException("No default resolution specified.");
  }
  if (mPrototype.mColorModes == 0) {
    throw new IllegalStateException("No color mode specified.");
  }
  if (mPrototype.mDefaults[PROPERTY_COLOR_MODE] == DEFAULT_UNDEFINED) {
    throw new IllegalStateException("No default color mode specified.");
  }
  if (mPrototype.mMinMargins == null) {
    mPrototype.mMinMargins=new Margins(0,0,0,0);
  }
  if (mPrototype.mDefaultMargins == null) {
    mPrototype.mDefaultMargins=mPrototype.mMinMargins;
  }
  return new PrinterCapabilitiesInfo(mPrototype);
}
