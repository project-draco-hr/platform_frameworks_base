{
  if (DBG)   Log.d(TAG,getName() + message.toString() + "\n");
switch (message.what) {
case WifiStateMachine.SUPPLICANT_STATE_CHANGE_EVENT:
    StateChangeResult stateChangeResult=(StateChangeResult)message.obj;
  SupplicantState state=stateChangeResult.state;
if (state == SupplicantState.ASSOCIATING || state == SupplicantState.ASSOCIATED || state == SupplicantState.FOUR_WAY_HANDSHAKE || state == SupplicantState.GROUP_HANDSHAKE) {
  if (mLoopDetectIndex > state.ordinal()) {
    mLoopDetectCount++;
  }
  if (mLoopDetectCount > MAX_SUPPLICANT_LOOP_ITERATIONS) {
    Log.d(TAG,"Supplicant loop detected, disabling network " + stateChangeResult.networkId);
    handleNetworkConnectionFailure(stateChangeResult.networkId);
  }
  mLoopDetectIndex=state.ordinal();
  sendSupplicantStateChangedBroadcast(state,mAuthFailureInSupplicantBroadcast);
}
 else {
  return NOT_HANDLED;
}
break;
default :
return NOT_HANDLED;
}
return HANDLED;
}
