{
  try {
    Resources resources=context.getPackageManager().getResourcesForApplication(providerInfo.applicationInfo);
    final Drawable drawable;
    if (resourceId > 0) {
      if (density <= 0) {
        density=context.getResources().getDisplayMetrics().densityDpi;
      }
      drawable=resources.getDrawableForDensity(resourceId,density);
    }
 else {
      drawable=providerInfo.loadIcon(context.getPackageManager());
    }
    if (drawable instanceof BitmapDrawable) {
      UserManager userManager=(UserManager)context.getSystemService(Context.USER_SERVICE);
      return userManager.getBadgedDrawableForUser(drawable,getProfile());
    }
  }
 catch (  PackageManager.NameNotFoundException|Resources.NotFoundException e) {
  }
  return null;
}
