{
  int len=buffer.length();
  if (start != 0 && start != len && buffer.charAt(start - 1) != '\n') {
    for (start--; start > 0; start--) {
      if (buffer.charAt(start - 1) == '\n') {
        break;
      }
    }
  }
  if (end != 0 && end != len && buffer.charAt(end - 1) != '\n') {
    for (end++; end < len; end++) {
      if (buffer.charAt(end - 1) == '\n') {
        break;
      }
    }
  }
  buffer.setSpan(what,start,end,Spannable.SPAN_PARAGRAPH);
}
