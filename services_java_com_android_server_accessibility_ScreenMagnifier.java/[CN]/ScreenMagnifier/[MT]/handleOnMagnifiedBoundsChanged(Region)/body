{
  if (mUpdateMagnificationSpecOnNextBoundsChange) {
    mUpdateMagnificationSpecOnNextBoundsChange=false;
    MagnificationSpec spec=mMagnificationController.getMagnificationSpec();
    Rect magnifiedFrame=mTempRect;
    mMagnifiedBounds.getBounds(magnifiedFrame);
    final float scale=spec.scale;
    final float centerX=(-spec.offsetX + magnifiedFrame.width() / 2) / scale;
    final float centerY=(-spec.offsetY + magnifiedFrame.height() / 2) / scale;
    mMagnificationController.setScaleAndMagnifiedRegionCenter(scale,centerX,centerY,false);
  }
  mMagnifiedBounds.set(bounds);
  mAms.onMagnificationStateChanged();
}
