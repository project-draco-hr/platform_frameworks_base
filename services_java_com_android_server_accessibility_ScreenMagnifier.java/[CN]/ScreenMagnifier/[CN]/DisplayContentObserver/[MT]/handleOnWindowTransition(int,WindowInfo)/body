{
  if (DEBUG_WINDOW_TRANSITIONS) {
    Slog.i(LOG_TAG,"Window transitioning: " + windowTransitionToString(transition));
  }
  try {
    final boolean magnifying=mMagnificationController.isMagnifying();
    if (magnifying) {
switch (transition) {
case WindowManagerPolicy.TRANSIT_ACTIVITY_OPEN:
case WindowManagerPolicy.TRANSIT_TASK_OPEN:
case WindowManagerPolicy.TRANSIT_TASK_TO_FRONT:
case WindowManagerPolicy.TRANSIT_WALLPAPER_OPEN:
case WindowManagerPolicy.TRANSIT_WALLPAPER_CLOSE:
case WindowManagerPolicy.TRANSIT_WALLPAPER_INTRA_OPEN:
{
          resetMagnificationIfNeeded();
        }
    }
  }
  if (info.type == WindowManager.LayoutParams.TYPE_NAVIGATION_BAR || info.type == WindowManager.LayoutParams.TYPE_INPUT_METHOD || info.type == WindowManager.LayoutParams.TYPE_INPUT_METHOD_DIALOG) {
switch (transition) {
case WindowManagerPolicy.TRANSIT_ENTER:
case WindowManagerPolicy.TRANSIT_SHOW:
case WindowManagerPolicy.TRANSIT_EXIT:
case WindowManagerPolicy.TRANSIT_HIDE:
{
        mViewport.recomputeBounds(mMagnificationController.isMagnifying());
      }
    break;
}
}
 else {
switch (transition) {
case WindowManagerPolicy.TRANSIT_ENTER:
case WindowManagerPolicy.TRANSIT_SHOW:
{
    if (!magnifying || !screenMagnificationAutoUpdateEnabled(mContext)) {
      break;
    }
    final int type=info.type;
switch (type) {
case WindowManager.LayoutParams.TYPE_APPLICATION_PANEL:
case WindowManager.LayoutParams.TYPE_APPLICATION_MEDIA:
case WindowManager.LayoutParams.TYPE_APPLICATION_SUB_PANEL:
case WindowManager.LayoutParams.TYPE_APPLICATION_ATTACHED_DIALOG:
case WindowManager.LayoutParams.TYPE_SEARCH_BAR:
case WindowManager.LayoutParams.TYPE_PHONE:
case WindowManager.LayoutParams.TYPE_SYSTEM_ALERT:
case WindowManager.LayoutParams.TYPE_TOAST:
case WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY:
case WindowManager.LayoutParams.TYPE_PRIORITY_PHONE:
case WindowManager.LayoutParams.TYPE_SYSTEM_DIALOG:
case WindowManager.LayoutParams.TYPE_KEYGUARD_DIALOG:
case WindowManager.LayoutParams.TYPE_SYSTEM_ERROR:
case WindowManager.LayoutParams.TYPE_VOLUME_OVERLAY:
case WindowManager.LayoutParams.TYPE_NAVIGATION_BAR_PANEL:
{
        Rect magnifiedRegionBounds=mMagnificationController.getMagnifiedRegionBounds();
        Rect touchableRegion=info.touchableRegion;
        if (!magnifiedRegionBounds.intersect(touchableRegion)) {
          ensureRectangleInMagnifiedRegionBounds(magnifiedRegionBounds,touchableRegion);
        }
      }
    break;
}
break;
}
}
}
}
  finally {
if (info != null) {
info.recycle();
}
}
}
