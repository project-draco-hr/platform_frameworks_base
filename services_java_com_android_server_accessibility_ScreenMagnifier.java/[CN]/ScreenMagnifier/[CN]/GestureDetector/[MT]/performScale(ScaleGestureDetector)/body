{
  if (Float.compare(mCurrScale,Float.NaN) == 0) {
    mCurrScale=mMagnificationController.getScale();
    return;
  }
  final float totalScaleFactor=mPrevScaleFactor * detector.getScaleFactor();
  final float newScale=mCurrScale * totalScaleFactor;
  final float normalizedNewScale=Math.min(Math.max(newScale,MIN_SCALE),MAX_SCALE);
  if (DEBUG_SCALING) {
    Slog.i(LOG_TAG,"normalizedNewScale: " + normalizedNewScale);
  }
  if (Float.compare(mScaleFocusX,Float.NaN) == 0 && Float.compare(mScaleFocusY,Float.NaN) == 0) {
    mScaleFocusX=detector.getFocusX();
    mScaleFocusY=detector.getFocusY();
  }
  mMagnificationController.setScale(normalizedNewScale,mScaleFocusX,mScaleFocusY,false);
}
