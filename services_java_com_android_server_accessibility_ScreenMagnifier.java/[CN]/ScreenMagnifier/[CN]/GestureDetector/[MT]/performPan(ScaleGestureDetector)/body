{
  if (Float.compare(mPrevFocus.x,Float.NaN) == 0 && Float.compare(mPrevFocus.y,Float.NaN) == 0) {
    mPrevFocus.set(detector.getFocusX(),detector.getFocusY());
    return;
  }
  final float scale=mMagnificationController.getScale();
  final float scrollX=(detector.getFocusX() - mPrevFocus.x) / scale;
  final float scrollY=(detector.getFocusY() - mPrevFocus.y) / scale;
  final float centerX=mMagnificationController.getMagnifiedRegionCenterX() - scrollX;
  final float centerY=mMagnificationController.getMagnifiedRegionCenterY() - scrollY;
  if (DEBUG_PANNING) {
    Slog.i(LOG_TAG,"Panned content by scrollX: " + scrollX + " scrollY: "+ scrollY);
  }
  mMagnificationController.setMagnifiedRegionCenter(centerX,centerY,false);
  mPrevFocus.set(detector.getFocusX(),detector.getFocusY());
}
