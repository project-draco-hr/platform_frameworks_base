{
  mScaleGestureDetector.onTouchEvent(event);
switch (mCurrentState) {
case STATE_DETECTING:
case STATE_DELEGATING:
case STATE_VIEWPORT_DRAGGING:
{
      return;
    }
}
if (event.getActionMasked() == MotionEvent.ACTION_UP) {
  clear();
  if (mCurrentState == STATE_SCALING) {
    persistScale(mMagnificationController.getScale());
  }
  transitionToState(STATE_DETECTING);
}
}
