{
  if (mDecor == null || !mShowing) {
    return;
  }
  try {
    mWindowManager.removeView(mDecor);
  }
  finally {
    if (mActionMode != null) {
      mActionMode.finish();
    }
    mDecor=null;
    mWindow.closeAllPanels();
    onStop();
    mShowing=false;
    sendDismissMessage();
  }
}
