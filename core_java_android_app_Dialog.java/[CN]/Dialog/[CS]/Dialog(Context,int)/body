{
  mContext=new ContextThemeWrapper(context,theme == 0 ? (context.getApplicationInfo().targetSdkVersion >= Build.VERSION_CODES.HONEYCOMB ? com.android.internal.R.style.Theme_Holo_Dialog : com.android.internal.R.style.Theme_Dialog) : theme);
  mWindowManager=(WindowManager)context.getSystemService(Context.WINDOW_SERVICE);
  Window w=PolicyManager.makeNewWindow(mContext);
  mWindow=w;
  w.setCallback(this);
  w.setWindowManager(mWindowManager,null,null);
  w.setGravity(Gravity.CENTER);
  mUiThread=Thread.currentThread();
  mListenersHandler=new ListenersHandler(this);
}
