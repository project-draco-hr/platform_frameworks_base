{
  mContext=new ContextThemeWrapper(context,theme == 0 ? com.android.internal.R.style.Theme_Dialog : theme);
  mWindowManager=(WindowManager)context.getSystemService("window");
  Window w=PolicyManager.makeNewWindow(mContext);
  mWindow=w;
  w.setCallback(this);
  w.setWindowManager(mWindowManager,null,null);
  w.setGravity(Gravity.CENTER);
  mUiThread=Thread.currentThread();
  mDismissCancelHandler=new DismissCancelHandler(this);
}
