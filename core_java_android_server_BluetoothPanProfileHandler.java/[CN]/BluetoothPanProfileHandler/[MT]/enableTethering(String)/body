{
  debugLog("updateTetherState:" + iface);
  IBinder b=ServiceManager.getService(Context.NETWORKMANAGEMENT_SERVICE);
  INetworkManagementService service=INetworkManagementService.Stub.asInterface(b);
  ConnectivityManager cm=(ConnectivityManager)mContext.getSystemService(Context.CONNECTIVITY_SERVICE);
  String[] bluetoothRegexs=cm.getTetherableBluetoothRegexs();
  String[] currentIfaces=new String[0];
  try {
    currentIfaces=service.listInterfaces();
  }
 catch (  Exception e) {
    Log.e(TAG,"Error listing Interfaces :" + e);
    return null;
  }
  boolean found=false;
  for (  String currIface : currentIfaces) {
    if (currIface.equals(iface)) {
      found=true;
      break;
    }
  }
  if (!found)   return null;
  String address=createNewTetheringAddressLocked();
  if (address == null)   return null;
  InterfaceConfiguration ifcg=null;
  try {
    ifcg=service.getInterfaceConfig(iface);
    if (ifcg != null) {
      final LinkAddress linkAddr=ifcg.getLinkAddress();
      InetAddress addr=null;
      if (linkAddr == null || (addr=linkAddr.getAddress()) == null || addr.equals(NetworkUtils.numericToInetAddress("0.0.0.0")) || addr.equals(NetworkUtils.numericToInetAddress("::0"))) {
        addr=NetworkUtils.numericToInetAddress(address);
      }
      ifcg.setInterfaceUp();
      ifcg.clearFlag("running");
      ifcg.setLinkAddress(new LinkAddress(addr,BLUETOOTH_PREFIX_LENGTH));
      service.setInterfaceConfig(iface,ifcg);
      if (cm.tether(iface) != ConnectivityManager.TETHER_ERROR_NO_ERROR) {
        Log.e(TAG,"Error tethering " + iface);
      }
    }
  }
 catch (  Exception e) {
    Log.e(TAG,"Error configuring interface " + iface + ", :"+ e);
    return null;
  }
  return address;
}
