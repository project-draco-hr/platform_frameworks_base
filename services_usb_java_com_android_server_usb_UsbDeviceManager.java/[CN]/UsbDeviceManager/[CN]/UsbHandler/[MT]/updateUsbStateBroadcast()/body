{
  Intent intent=new Intent(UsbManager.ACTION_USB_STATE);
  intent.addFlags(Intent.FLAG_RECEIVER_REPLACE_PENDING | Intent.FLAG_RECEIVER_FOREGROUND);
  intent.putExtra(UsbManager.USB_CONNECTED,mConnected);
  intent.putExtra(UsbManager.USB_CONFIGURED,mConfigured);
  intent.putExtra(UsbManager.USB_DATA_UNLOCKED,mUsbDataUnlocked);
  if (mCurrentFunctions != null) {
    String[] functions=mCurrentFunctions.split(",");
    for (int i=0; i < functions.length; i++) {
      intent.putExtra(functions[i],true);
    }
  }
  if (DEBUG)   Slog.d(TAG,"broadcasting " + intent + " connected: "+ mConnected+ " configured: "+ mConfigured);
  mContext.sendStickyBroadcastAsUser(intent,UserHandle.ALL);
}
