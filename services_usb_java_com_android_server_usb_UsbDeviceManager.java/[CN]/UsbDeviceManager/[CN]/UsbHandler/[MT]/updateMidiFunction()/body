{
  boolean enabled=containsFunction(mCurrentFunctions,UsbManager.USB_FUNCTION_MIDI);
  if (enabled != mMidiEnabled) {
    int card=-1;
    int device=-1;
    if (enabled) {
      Scanner scanner=null;
      try {
        scanner=new Scanner(new File(MIDI_ALSA_PATH));
        card=scanner.nextInt();
        device=scanner.nextInt();
      }
 catch (      FileNotFoundException e) {
        Slog.e(TAG,"could not open MIDI PCM file",e);
      }
 finally {
        if (scanner != null) {
          scanner.close();
        }
      }
    }
    mUsbAlsaManager.setPeripheralMidiState(enabled,card,device);
    mMidiEnabled=enabled;
  }
}
