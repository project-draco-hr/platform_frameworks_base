{
  mContext=context;
  mContentResolver=context.getContentResolver();
  PackageManager pm=mContext.getPackageManager();
  mHasUsbAccessory=pm.hasSystemFeature(PackageManager.FEATURE_USB_ACCESSORY);
  initRndisAddress();
  readOemUsbOverrideConfig();
  mHandler=new UsbHandler(FgThread.get().getLooper());
  if (nativeIsStartRequested()) {
    if (DEBUG)     Slog.d(TAG,"accessory attached at boot");
    mHandler.sendEmptyMessage(MSG_START_ACCESSORY_MODE);
  }
  boolean secureAdbEnabled=SystemProperties.getBoolean("ro.adb.secure",false);
  boolean dataEncrypted="1".equals(SystemProperties.get("vold.decrypt"));
  if (secureAdbEnabled && !dataEncrypted) {
    mDebuggingManager=new UsbDebuggingManager(context);
  }
}
