{
  if (DEBUG)   Slog.d(TAG,"systemReady");
  mNotificationManager=(NotificationManager)mContext.getSystemService(Context.NOTIFICATION_SERVICE);
  boolean massStorageSupported=false;
  final StorageManager storageManager=StorageManager.from(mContext);
  final StorageVolume primary=storageManager.getPrimaryVolume();
  massStorageSupported=primary != null && primary.allowMassStorage();
  mUseUsbNotification=!massStorageSupported && mContext.getResources().getBoolean(com.android.internal.R.bool.config_usbChargingMessage);
  try {
    Settings.Global.putInt(mContentResolver,Settings.Global.ADB_ENABLED,mAdbEnabled ? 1 : 0);
  }
 catch (  SecurityException e) {
    Slog.d(TAG,"ADB_ENABLED is restricted.");
  }
  mHandler.sendEmptyMessage(MSG_SYSTEM_READY);
}
