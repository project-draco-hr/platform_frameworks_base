{
  int width=-1;
  int padL=0;
  int padR=0;
  final boolean nest=mLayerState.mPaddingMode == PADDING_MODE_NEST;
  final ChildDrawable[] array=mLayerState.mChildren;
  final int N=mLayerState.mNum;
  for (int i=0; i < N; i++) {
    final ChildDrawable r=array[i];
    if (r.mDrawable == null) {
      continue;
    }
    final int minWidth=r.mWidth < 0 ? r.mDrawable.getIntrinsicWidth() : r.mWidth;
    final int w=minWidth + r.mInsetL + r.mInsetR+ padL+ padR;
    if (w > width) {
      width=w;
    }
    if (nest) {
      padL+=mPaddingL[i];
      padR+=mPaddingR[i];
    }
  }
  return width;
}
