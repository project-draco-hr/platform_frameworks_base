{
  int userId=intent.getIntExtra(Intent.EXTRA_USER_HANDLE,-1);
  if (userId < 1)   return;
  UserAccounts accounts;
  boolean userUnlocked;
synchronized (mUsers) {
    accounts=mUsers.get(userId);
    mUsers.remove(userId);
    userUnlocked=mLocalUnlockedUsers.get(userId);
    mLocalUnlockedUsers.delete(userId);
  }
  if (accounts != null) {
synchronized (accounts.cacheLock) {
      accounts.openHelper.close();
    }
  }
  Log.i(TAG,"Removing database files for user " + userId);
  File dbFile=new File(getDeDatabaseName(userId));
  deleteDbFileWarnIfFailed(dbFile);
  boolean fbeEnabled=StorageManager.isFileEncryptedNativeOrEmulated();
  if (!fbeEnabled || userUnlocked) {
    File ceDb=new File(getCeDatabaseName(userId));
    if (ceDb.exists()) {
      deleteDbFileWarnIfFailed(ceDb);
    }
  }
}
