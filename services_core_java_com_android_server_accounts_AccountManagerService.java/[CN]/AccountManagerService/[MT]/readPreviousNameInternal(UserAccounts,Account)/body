{
  if (account == null) {
    return null;
  }
synchronized (accounts.cacheLock) {
    AtomicReference<String> previousNameRef=accounts.previousNameCache.get(account);
    if (previousNameRef == null) {
      final SQLiteDatabase db=accounts.openHelper.getReadableDatabase();
      Cursor cursor=db.query(TABLE_ACCOUNTS,new String[]{ACCOUNTS_PREVIOUS_NAME},ACCOUNTS_NAME + "=? AND " + ACCOUNTS_TYPE+ "=?",new String[]{account.name,account.type},null,null,null);
      try {
        if (cursor.moveToNext()) {
          String previousName=cursor.getString(0);
          previousNameRef=new AtomicReference<>(previousName);
          accounts.previousNameCache.put(account,previousNameRef);
          return previousName;
        }
 else {
          return null;
        }
      }
  finally {
        cursor.close();
      }
    }
 else {
      return previousNameRef.get();
    }
  }
}
