{
  List<String> permissionsToCheck=new ArrayList<String>(2);
  permissionsToCheck.add(Manifest.permission.GET_ACCOUNTS_PRIVILEGED);
  long id=Binder.clearCallingIdentity();
  try {
    ApplicationInfo appInfo=mPackageManager.getApplicationInfo(opPackageName,0);
    if (23 >= appInfo.targetSdkVersion) {
      permissionsToCheck.add(Manifest.permission.GET_ACCOUNTS);
    }
  }
 catch (  NameNotFoundException e) {
    Log.w(TAG,"No application associated with package: " + opPackageName);
  }
 finally {
    Binder.restoreCallingIdentity(id);
  }
  boolean isPermitted=isPermitted(opPackageName,callingUid,permissionsToCheck);
  return getTypesForCaller(callingUid,userId,isPermitted);
}
