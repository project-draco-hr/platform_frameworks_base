{
  try {
    MetricsLogger.count(mContext,"sth_service_died",1);
    sendErrorCallbacksToAll(SoundTrigger.STATUS_DEAD_OBJECT);
  }
 catch (  RemoteException e) {
    Slog.w(TAG,"RemoteException in onError",e);
  }
 finally {
    if (mKeyphraseModelData != null) {
      mKeyphraseModelData.clearState();
    }
    internalClearKeyphraseStateLocked();
    internalClearGenericModelStateLocked();
    internalClearGlobalStateLocked();
    if (mModule != null) {
      mModule.detach();
      mModule=null;
    }
  }
}
