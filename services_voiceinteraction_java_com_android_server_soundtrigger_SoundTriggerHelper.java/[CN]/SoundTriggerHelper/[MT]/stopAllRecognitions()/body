{
synchronized (mLock) {
    MetricsLogger.count(mContext,"sth_stop_all_recognitions",1);
    if (mModuleProperties == null || mModule == null) {
      return;
    }
    if (mKeyphraseModelData != null && mKeyphraseModelData.getHandle() != INVALID_VALUE) {
      mKeyphraseModelData.setRequested(false);
      int status=updateRecognitionLocked(mKeyphraseModelData,isRecognitionAllowed(),false);
      internalClearKeyphraseStateLocked();
    }
    for (    ModelData model : mGenericModelDataMap.values()) {
      if (model.isModelStarted()) {
        int status=stopRecognitionLocked(model,false);
        if (status != STATUS_OK) {
          Slog.w(TAG,"Error stopping generic model: " + model.getHandle());
        }
        model.clearState();
        model.clearCallback();
      }
    }
    internalClearGlobalStateLocked();
  }
}
