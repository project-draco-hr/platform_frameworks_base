{
  if (mModule == null || moduleProperties == null || mCurrentSoundModelHandle == INVALID_VALUE || mActiveListener == null) {
    return STATUS_OK;
  }
  boolean start=mRequested && !mCallActive && !mServiceDisabled&& !mIsPowerSaveMode;
  if (start == mStarted) {
    return STATUS_OK;
  }
  if (start) {
    int status=mModule.startRecognition(mCurrentSoundModelHandle,mRecognitionConfig);
    if (status != SoundTrigger.STATUS_OK) {
      Slog.w(TAG,"startRecognition failed with " + status);
      if (notify) {
        try {
          mActiveListener.onError(status);
        }
 catch (        RemoteException e) {
          Slog.w(TAG,"RemoteException in onError",e);
        }
      }
    }
 else {
      mStarted=true;
      if (notify) {
        try {
          mActiveListener.onRecognitionResumed();
        }
 catch (        RemoteException e) {
          Slog.w(TAG,"RemoteException in onRecognitionResumed",e);
        }
      }
    }
    return status;
  }
 else {
    int status=STATUS_OK;
    if (!mRecognitionAborted) {
      status=mModule.stopRecognition(mCurrentSoundModelHandle);
    }
 else {
      mRecognitionAborted=false;
    }
    if (status != SoundTrigger.STATUS_OK) {
      Slog.w(TAG,"stopRecognition call failed with " + status);
      if (notify) {
        try {
          mActiveListener.onError(status);
        }
 catch (        RemoteException e) {
          Slog.w(TAG,"RemoteException in onError",e);
        }
      }
    }
 else {
      mStarted=false;
      if (notify) {
        try {
          mActiveListener.onRecognitionPaused();
        }
 catch (        RemoteException e) {
          Slog.w(TAG,"RemoteException in onRecognitionPaused",e);
        }
      }
    }
    return status;
  }
}
