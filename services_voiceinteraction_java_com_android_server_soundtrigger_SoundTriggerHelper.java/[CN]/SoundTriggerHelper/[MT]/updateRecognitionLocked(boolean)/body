{
  if (mModule == null || mModuleProperties == null || mCurrentKeyphraseModelHandle == INVALID_VALUE || mKeyphraseListener == null) {
    return STATUS_OK;
  }
  boolean start=mRequested && !mCallActive && !mServiceDisabled&& !mIsPowerSaveMode;
  if (start == mKeyphraseStarted) {
    return STATUS_OK;
  }
  if (start) {
    int status=mModule.startRecognition(mCurrentKeyphraseModelHandle,mRecognitionConfig);
    if (status != SoundTrigger.STATUS_OK) {
      Slog.w(TAG,"startKeyphraseRecognition failed with " + status);
      if (notify) {
        try {
          mKeyphraseListener.onError(status);
        }
 catch (        RemoteException e) {
          Slog.w(TAG,"RemoteException in onError",e);
        }
      }
    }
 else {
      mKeyphraseStarted=true;
      if (notify) {
        try {
          mKeyphraseListener.onRecognitionResumed();
        }
 catch (        RemoteException e) {
          Slog.w(TAG,"RemoteException in onRecognitionResumed",e);
        }
      }
    }
    return status;
  }
 else {
    int status=STATUS_OK;
    if (!mRecognitionAborted) {
      status=mModule.stopRecognition(mCurrentKeyphraseModelHandle);
    }
 else {
      mRecognitionAborted=false;
    }
    if (status != SoundTrigger.STATUS_OK) {
      Slog.w(TAG,"stopRecognition call failed with " + status);
      if (notify) {
        try {
          mKeyphraseListener.onError(status);
        }
 catch (        RemoteException e) {
          Slog.w(TAG,"RemoteException in onError",e);
        }
      }
    }
 else {
      mKeyphraseStarted=false;
      if (notify) {
        try {
          mKeyphraseListener.onRecognitionPaused();
        }
 catch (        RemoteException e) {
          Slog.w(TAG,"RemoteException in onRecognitionPaused",e);
        }
      }
    }
    return status;
  }
}
