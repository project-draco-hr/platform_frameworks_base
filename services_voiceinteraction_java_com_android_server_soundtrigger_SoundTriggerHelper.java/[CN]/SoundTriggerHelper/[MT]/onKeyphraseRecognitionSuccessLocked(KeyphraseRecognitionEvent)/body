{
  Slog.i(TAG,"Recognition success");
  MetricsLogger.count(mContext,"sth_keyphrase_recognition_event",1);
  int keyphraseId=getKeyphraseIdFromEvent(event);
  ModelData modelData=getKeyphraseModelDataLocked(keyphraseId);
  if (modelData == null || !modelData.isKeyphraseModel()) {
    Slog.e(TAG,"Keyphase model data does not exist for ID:" + keyphraseId);
    return;
  }
  if (modelData.getCallback() == null) {
    Slog.w(TAG,"Received onRecognition event without callback for keyphrase model.");
    return;
  }
  try {
    modelData.getCallback().onKeyphraseDetected((KeyphraseRecognitionEvent)event);
  }
 catch (  RemoteException e) {
    Slog.w(TAG,"RemoteException in onKeyphraseDetected",e);
  }
  modelData.setStopped();
  RecognitionConfig config=modelData.getRecognitionConfig();
  if (config != null) {
    modelData.setRequested(config.allowMultipleTriggers);
  }
  if (modelData.isRequested()) {
    updateRecognitionLocked(modelData,isRecognitionAllowed(),true);
  }
}
