{
  Slog.i(TAG,"Recognition success");
  MetricsLogger.count(mContext,"sth_keyphrase_recognition_event",1);
  if (mKeyphraseModelData == null) {
    Slog.e(TAG,"Received onRecognition event for null keyphrase model data.");
    return;
  }
  if (mKeyphraseModelData.getCallback() == null) {
    Slog.w(TAG,"Received onRecognition event without any listener for it.");
    return;
  }
  KeyphraseRecognitionExtra[] keyphraseExtras=((KeyphraseRecognitionEvent)event).keyphraseExtras;
  if (keyphraseExtras == null || keyphraseExtras.length == 0) {
    Slog.w(TAG,"Invalid keyphrase recognition event!");
    return;
  }
  if (mKeyphraseId != keyphraseExtras[0].id) {
    Slog.w(TAG,"received onRecognition event for a different keyphrase");
    return;
  }
  try {
    mKeyphraseModelData.getCallback().onKeyphraseDetected((KeyphraseRecognitionEvent)event);
  }
 catch (  RemoteException e) {
    Slog.w(TAG,"RemoteException in onKeyphraseDetected",e);
  }
  mKeyphraseModelData.setStopped();
  RecognitionConfig config=mKeyphraseModelData.getRecognitionConfig();
  if (config != null) {
    mKeyphraseModelData.setRequested(config.allowMultipleTriggers);
  }
  if (mKeyphraseModelData.getRequested()) {
    updateRecognitionLocked(mKeyphraseModelData,isRecognitionAllowed(),true);
  }
}
