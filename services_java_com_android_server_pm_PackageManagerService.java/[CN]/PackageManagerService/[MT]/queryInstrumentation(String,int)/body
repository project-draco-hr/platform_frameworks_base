{
  ArrayList<InstrumentationInfo> finalList=new ArrayList<InstrumentationInfo>();
synchronized (mPackages) {
    final Iterator<PackageParser.Instrumentation> i=mInstrumentation.values().iterator();
    while (i.hasNext()) {
      final PackageParser.Instrumentation p=i.next();
      if (targetPackage == null || targetPackage.equals(p.info.targetPackage)) {
        InstrumentationInfo ii=PackageParser.generateInstrumentationInfo(p,flags);
        if (ii != null) {
          finalList.add(ii);
        }
      }
    }
  }
  return finalList;
}
