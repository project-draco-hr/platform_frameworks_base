{
  PackageSetting ps=mSettings.mPackages.get(packageName);
  if (ps != null) {
    if (ps.pkg == null) {
      ps.pkg=new PackageParser.Package(packageName);
      ps.pkg.applicationInfo.packageName=packageName;
      ps.pkg.applicationInfo.flags=ps.pkgFlags;
      ps.pkg.applicationInfo.publicSourceDir=ps.resourcePathString;
      ps.pkg.applicationInfo.sourceDir=ps.codePathString;
      ps.pkg.applicationInfo.dataDir=getDataPathForPackage(ps.pkg.packageName,0).getPath();
      ps.pkg.applicationInfo.nativeLibraryDir=ps.nativeLibraryPathString;
    }
    ps.pkg.mSetEnabled=ps.getEnabled(userId);
    ps.pkg.mSetStopped=ps.getStopped(userId);
    return generatePackageInfo(ps.pkg,flags);
  }
  return null;
}
