{
synchronized (mPackages) {
    final Iterator<Map.Entry<String,PackageParser.Provider>> i=mProviders.entrySet().iterator();
    final int userId=UserId.getCallingUserId();
    while (i.hasNext()) {
      Map.Entry<String,PackageParser.Provider> entry=i.next();
      PackageParser.Provider p=entry.getValue();
      PackageSetting ps=mSettings.mPackages.get(p.owner.packageName);
      if (p.syncable && (!mSafeMode || (p.info.applicationInfo.flags & ApplicationInfo.FLAG_SYSTEM) != 0)) {
        outNames.add(entry.getKey());
        outInfo.add(PackageParser.generateProviderInfo(p,0,ps != null ? ps.getStopped(userId) : false,ps != null ? ps.getEnabled(userId) : COMPONENT_ENABLED_STATE_DEFAULT,userId));
      }
    }
  }
}
