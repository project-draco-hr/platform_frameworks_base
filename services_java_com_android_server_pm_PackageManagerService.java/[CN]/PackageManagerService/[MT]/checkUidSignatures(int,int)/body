{
synchronized (mPackages) {
    Signature[] s1;
    Signature[] s2;
    Object obj=mSettings.getUserIdLPr(uid1);
    if (obj != null) {
      if (obj instanceof SharedUserSetting) {
        s1=((SharedUserSetting)obj).signatures.mSignatures;
      }
 else       if (obj instanceof PackageSetting) {
        s1=((PackageSetting)obj).signatures.mSignatures;
      }
 else {
        return PackageManager.SIGNATURE_UNKNOWN_PACKAGE;
      }
    }
 else {
      return PackageManager.SIGNATURE_UNKNOWN_PACKAGE;
    }
    obj=mSettings.getUserIdLPr(uid2);
    if (obj != null) {
      if (obj instanceof SharedUserSetting) {
        s2=((SharedUserSetting)obj).signatures.mSignatures;
      }
 else       if (obj instanceof PackageSetting) {
        s2=((PackageSetting)obj).signatures.mSignatures;
      }
 else {
        return PackageManager.SIGNATURE_UNKNOWN_PACKAGE;
      }
    }
 else {
      return PackageManager.SIGNATURE_UNKNOWN_PACKAGE;
    }
    return compareSignatures(s1,s2);
  }
}
