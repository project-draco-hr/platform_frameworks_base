{
  if ((flags & PackageManager.GET_UNINSTALLED_PACKAGES) != 0) {
    return PackageParser.generatePackageInfo(p,null,flags,0,0,null);
  }
  final PackageSetting ps=(PackageSetting)p.mExtras;
  if (ps == null) {
    return null;
  }
  final GrantedPermissions gp=ps.sharedUser != null ? ps.sharedUser : ps;
  return PackageParser.generatePackageInfo(p,gp.gids,flags,ps.firstInstallTime,ps.lastUpdateTime,gp.grantedPermissions);
}
