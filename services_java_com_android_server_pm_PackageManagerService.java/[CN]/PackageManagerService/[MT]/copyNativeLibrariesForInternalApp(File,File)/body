{
  if (!nativeLibraryDir.isDirectory()) {
    nativeLibraryDir.delete();
    if (!nativeLibraryDir.mkdir()) {
      throw new IOException("Cannot create " + nativeLibraryDir.getPath());
    }
    try {
      Libcore.os.chmod(nativeLibraryDir.getPath(),S_IRWXU | S_IRGRP | S_IXGRP| S_IROTH| S_IXOTH);
    }
 catch (    ErrnoException e) {
      throw new IOException("Cannot chmod native library directory " + nativeLibraryDir.getPath(),e);
    }
  }
 else   if (!SELinux.restorecon(nativeLibraryDir)) {
    throw new IOException("Cannot set SELinux context for " + nativeLibraryDir.getPath());
  }
  return NativeLibraryHelper.copyNativeBinariesIfNeededLI(scanFile,nativeLibraryDir);
}
