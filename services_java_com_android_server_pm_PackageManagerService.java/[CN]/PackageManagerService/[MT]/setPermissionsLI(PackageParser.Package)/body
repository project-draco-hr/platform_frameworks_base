{
  int retCode=0;
  if (isForwardLocked(newPackage)) {
    File destResourceFile=new File(newPackage.applicationInfo.publicSourceDir);
    try {
      extractPublicFiles(newPackage,destResourceFile);
    }
 catch (    IOException e) {
      Slog.e(TAG,"Couldn't create a new zip file for the public parts of a" + " forward-locked app.");
      return PackageManager.INSTALL_FAILED_INSUFFICIENT_STORAGE;
    }
 finally {
    }
    retCode=mInstaller.setForwardLockPerm(getApkName(newPackage.mPath),newPackage.applicationInfo.uid);
  }
 else {
  }
  if (retCode != 0) {
    Slog.e(TAG,"Couldn't set new package file permissions for " + newPackage.mPath + ". The return code was: "+ retCode);
    return PackageManager.INSTALL_FAILED_INSUFFICIENT_STORAGE;
  }
  return PackageManager.INSTALL_SUCCEEDED;
}
