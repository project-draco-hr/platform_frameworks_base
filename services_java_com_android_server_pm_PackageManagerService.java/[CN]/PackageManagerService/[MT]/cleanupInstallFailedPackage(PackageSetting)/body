{
  Slog.i(TAG,"Cleaning up incompletely installed app: " + ps.name);
  int retCode=mInstaller.remove(ps.name,0);
  if (retCode < 0) {
    Slog.w(TAG,"Couldn't remove app data directory for package: " + ps.name + ", retcode="+ retCode);
  }
 else {
    sUserManager.removePackageForAllUsers(ps.name);
  }
  if (ps.codePath != null) {
    if (!ps.codePath.delete()) {
      Slog.w(TAG,"Unable to remove old code file: " + ps.codePath);
    }
  }
  if (ps.resourcePath != null) {
    if (!ps.resourcePath.delete() && !ps.resourcePath.equals(ps.codePath)) {
      Slog.w(TAG,"Unable to remove old code file: " + ps.resourcePath);
    }
  }
  mSettings.removePackageLPw(ps.name);
}
