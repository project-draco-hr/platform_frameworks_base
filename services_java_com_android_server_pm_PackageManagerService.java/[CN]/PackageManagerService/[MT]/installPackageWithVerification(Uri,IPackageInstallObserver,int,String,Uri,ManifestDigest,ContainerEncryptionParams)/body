{
  mContext.enforceCallingOrSelfPermission(android.Manifest.permission.INSTALL_PACKAGES,null);
  final int uid=Binder.getCallingUid();
  final int filteredFlags;
  if (uid == Process.SHELL_UID || uid == 0) {
    if (DEBUG_INSTALL) {
      Slog.v(TAG,"Install from ADB");
    }
    filteredFlags=flags | PackageManager.INSTALL_FROM_ADB;
  }
 else {
    filteredFlags=flags & ~PackageManager.INSTALL_FROM_ADB;
  }
  final Message msg=mHandler.obtainMessage(INIT_COPY);
  msg.obj=new InstallParams(packageURI,observer,filteredFlags,installerPackageName,verificationURI,manifestDigest,encryptionParams);
  mHandler.sendMessage(msg);
}
