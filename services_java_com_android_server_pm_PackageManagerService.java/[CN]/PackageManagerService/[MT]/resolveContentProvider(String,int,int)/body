{
  if (!sUserManager.exists(userId))   return null;
synchronized (mPackages) {
    final PackageParser.Provider provider=mProviders.get(name);
    PackageSetting ps=provider != null ? mSettings.mPackages.get(provider.owner.packageName) : null;
    return provider != null && mSettings.isEnabledLPr(provider.info,flags,userId) && (!mSafeMode || (provider.info.applicationInfo.flags & ApplicationInfo.FLAG_SYSTEM) != 0) ? PackageParser.generateProviderInfo(provider,flags,ps != null ? ps.getStopped(userId) : false,ps != null ? ps.getEnabled(userId) : COMPONENT_ENABLED_STATE_DEFAULT,userId) : null;
  }
}
