{
  ArrayList<PackageParser.Package> pkgs=null;
synchronized (mPackages) {
    if (mDeferredDexOpt.size() > 0) {
      pkgs=new ArrayList<PackageParser.Package>(mDeferredDexOpt);
      mDeferredDexOpt.clear();
    }
  }
  if (pkgs != null) {
    for (int i=0; i < pkgs.size(); i++) {
      try {
        ActivityManagerNative.getDefault().showBootMessage(mContext.getResources().getString(com.android.internal.R.string.android_upgrading_apk,i + 1,pkgs.size()),true);
      }
 catch (      RemoteException e) {
      }
      PackageParser.Package p=pkgs.get(i);
synchronized (mInstallLock) {
        if (!p.mDidDexOpt) {
          performDexOptLI(p,false,false);
        }
      }
    }
  }
}
