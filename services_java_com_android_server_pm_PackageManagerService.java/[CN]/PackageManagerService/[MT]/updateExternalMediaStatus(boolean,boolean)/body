{
  int callingUid=Binder.getCallingUid();
  if (callingUid != 0 && callingUid != Process.SYSTEM_UID) {
    throw new SecurityException("Media status can only be updated by the system");
  }
synchronized (mPackages) {
    Log.i(TAG,"Updating external media status from " + (mMediaMounted ? "mounted" : "unmounted") + " to "+ (mediaStatus ? "mounted" : "unmounted"));
    if (DEBUG_SD_INSTALL)     Log.i(TAG,"updateExternalMediaStatus:: mediaStatus=" + mediaStatus + ", mMediaMounted="+ mMediaMounted);
    if (mediaStatus == mMediaMounted) {
      Message msg=mHandler.obtainMessage(UPDATED_MEDIA_STATUS,reportStatus ? 1 : 0,-1);
      mHandler.sendMessage(msg);
      return;
    }
    mMediaMounted=mediaStatus;
  }
  mHandler.post(new Runnable(){
    public void run(){
      mHandler.removeCallbacks(this);
      updateExternalMediaStatusInner(mediaStatus,reportStatus);
    }
  }
);
}
