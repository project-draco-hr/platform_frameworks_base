{
  int[] users=sUserManager.getUserIds();
  boolean restrictHomeDir=(targetSdkVersion >= Build.VERSION_CODES.K);
  int res=mInstaller.install(packageName,uid,uid,restrictHomeDir);
  if (res < 0) {
    return res;
  }
  for (  int user : users) {
    if (user != 0) {
      res=mInstaller.createUserData(packageName,UserHandle.getUid(user,uid),user,restrictHomeDir);
      if (res < 0) {
        return res;
      }
    }
  }
  return res;
}
