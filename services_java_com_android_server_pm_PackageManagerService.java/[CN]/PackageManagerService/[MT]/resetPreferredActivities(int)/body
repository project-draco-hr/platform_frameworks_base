{
  mContext.enforceCallingOrSelfPermission(android.Manifest.permission.SET_PREFERRED_APPLICATIONS,null);
synchronized (mPackages) {
    int user=UserHandle.getCallingUserId();
    clearPackagePreferredActivitiesLPw(null,user);
    mSettings.readDefaultPreferredAppsLPw(this,user);
    mSettings.writePackageRestrictionsLPr(user);
    scheduleWriteSettingsLocked();
  }
}
