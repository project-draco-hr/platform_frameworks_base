{
  final boolean enforcedDefault=isPermissionEnforcedDefault(READ_EXTERNAL_STORAGE);
synchronized (mPackages) {
    PackageParser.Package p=mPackages.get(packageName);
    if (DEBUG_PACKAGE_INFO)     Log.v(TAG,"getPackageGids" + packageName + ": "+ p);
    if (p != null) {
      final PackageSetting ps=(PackageSetting)p.mExtras;
      final SharedUserSetting suid=ps.sharedUser;
      int[] gids=suid != null ? suid.gids : ps.gids;
      if (!isPermissionEnforcedLocked(READ_EXTERNAL_STORAGE,enforcedDefault)) {
        final BasePermission basePerm=mSettings.mPermissions.get(READ_EXTERNAL_STORAGE);
        gids=appendInts(gids,basePerm.gids);
      }
      return gids;
    }
  }
  return new int[0];
}
