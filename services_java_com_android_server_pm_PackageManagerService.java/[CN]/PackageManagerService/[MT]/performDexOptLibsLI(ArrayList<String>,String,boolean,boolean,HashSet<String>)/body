{
  for (int i=0; i < libs.size(); i++) {
    PackageParser.Package libPkg;
    String libName;
synchronized (mPackages) {
      libName=libs.get(i);
      SharedLibraryEntry lib=mSharedLibraries.get(libName);
      if (lib != null && lib.apk != null) {
        libPkg=mPackages.get(lib.apk);
      }
 else {
        libPkg=null;
      }
    }
    if (libPkg != null && !done.contains(libName)) {
      performDexOptLI(libPkg,instructionSet,forceDex,defer,done);
    }
  }
}
