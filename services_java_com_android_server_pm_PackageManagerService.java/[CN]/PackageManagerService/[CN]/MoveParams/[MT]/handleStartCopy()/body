{
  mRet=PackageManager.INSTALL_FAILED_INSUFFICIENT_STORAGE;
  if (!targetArgs.checkFreeStorage(mContainerService)) {
    Log.w(TAG,"Insufficient storage to install");
    return;
  }
  mRet=srcArgs.doPreCopy();
  if (mRet != PackageManager.INSTALL_SUCCEEDED) {
    return;
  }
  mRet=targetArgs.copyApk(mContainerService,false);
  if (mRet != PackageManager.INSTALL_SUCCEEDED) {
    srcArgs.doPostCopy(uid);
    return;
  }
  mRet=srcArgs.doPostCopy(uid);
  if (mRet != PackageManager.INSTALL_SUCCEEDED) {
    return;
  }
  mRet=targetArgs.doPreInstall(mRet);
  if (mRet != PackageManager.INSTALL_SUCCEEDED) {
    return;
  }
  if (DEBUG_SD_INSTALL) {
    StringBuilder builder=new StringBuilder();
    if (srcArgs != null) {
      builder.append("src: ");
      builder.append(srcArgs.getCodePath());
    }
    if (targetArgs != null) {
      builder.append(" target : ");
      builder.append(targetArgs.getCodePath());
    }
    Log.i(TAG,builder.toString());
  }
}
