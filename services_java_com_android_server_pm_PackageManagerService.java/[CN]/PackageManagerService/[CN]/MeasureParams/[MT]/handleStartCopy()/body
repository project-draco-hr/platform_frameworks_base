{
  final boolean mounted;
  if (Environment.isExternalStorageEmulated()) {
    mounted=true;
  }
 else {
    final String status=Environment.getExternalStorageState();
    mounted=status.equals(Environment.MEDIA_MOUNTED) || status.equals(Environment.MEDIA_MOUNTED_READ_ONLY);
  }
  if (mounted) {
    final File externalCacheDir=Environment.getExternalStorageAppCacheDirectory(mStats.packageName);
    final long externalCacheSize=mContainerService.calculateDirectorySize(externalCacheDir.getPath());
    mStats.externalCacheSize=externalCacheSize;
    final File externalDataDir=Environment.getExternalStorageAppDataDirectory(mStats.packageName);
    long externalDataSize=mContainerService.calculateDirectorySize(externalDataDir.getPath());
    if (externalCacheDir.getParentFile().equals(externalDataDir)) {
      externalDataSize-=externalCacheSize;
    }
    mStats.externalDataSize=externalDataSize;
    final File externalMediaDir=Environment.getExternalStorageAppMediaDirectory(mStats.packageName);
    mStats.externalMediaSize=mContainerService.calculateDirectorySize(externalMediaDir.getPath());
    final File externalObbDir=Environment.getExternalStorageAppObbDirectory(mStats.packageName);
    mStats.externalObbSize=mContainerService.calculateDirectorySize(externalObbDir.getPath());
  }
}
