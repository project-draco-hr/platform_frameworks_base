{
  long now=SystemClock.elapsedRealtime();
  long end=now + poll;
  while (now < end) {
    try {
      Thread.sleep(end - now);
    }
 catch (    InterruptedException e) {
    }
    now=SystemClock.elapsedRealtime();
  }
  currentTotalWaitTime+=poll;
  if (currentTotalWaitTime > maxTimeoutMillis) {
    throw new TimeoutException(timedOutMessage);
  }
  return currentTotalWaitTime;
}
