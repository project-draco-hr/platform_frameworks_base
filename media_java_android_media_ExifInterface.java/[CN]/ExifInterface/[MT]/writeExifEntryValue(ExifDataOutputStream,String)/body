{
  int bytesWritten=0;
  int dataFormat=getDataFormatOfExifEntryValue(entryValue);
  if (dataFormat == IFD_FORMAT_STRING) {
    byte[] asciiArray=(entryValue + '\0').getBytes(Charset.forName("US-ASCII"));
    dataOutputStream.write(asciiArray);
    return asciiArray.length;
  }
  String[] components=entryValue.split(",");
  for (  String component : components) {
switch (dataFormat) {
case IFD_FORMAT_SLONG:
      dataOutputStream.writeInt(Integer.parseInt(component));
    bytesWritten+=4;
  break;
case IFD_FORMAT_DOUBLE:
dataOutputStream.writeDouble(Double.parseDouble(component));
bytesWritten+=8;
break;
case IFD_FORMAT_SRATIONAL:
String[] rationalNumber=component.split("/");
dataOutputStream.writeInt(Integer.parseInt(rationalNumber[0]));
dataOutputStream.writeInt(Integer.parseInt(rationalNumber[1]));
bytesWritten+=8;
break;
default :
throw new IllegalArgumentException();
}
}
return bytesWritten;
}
