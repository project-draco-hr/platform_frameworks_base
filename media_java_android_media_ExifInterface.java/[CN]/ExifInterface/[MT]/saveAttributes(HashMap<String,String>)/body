{
  StringBuilder sb=new StringBuilder();
  int size=attributes.size();
  if (attributes.containsKey("hasThumbnail")) {
    --size;
  }
  sb.append(size + " ");
  for (  Map.Entry<String,String> iter : attributes.entrySet()) {
    String key=iter.getKey();
    if (key.equals("hasThumbnail")) {
      continue;
    }
    String val=iter.getValue();
    sb.append(key + "=");
    sb.append(val.length() + " ");
    sb.append(val);
  }
  String s=sb.toString();
  saveAttributesNative(mFilename,s);
  commitChangesNative(mFilename);
  mSavedAttributes=true;
}
