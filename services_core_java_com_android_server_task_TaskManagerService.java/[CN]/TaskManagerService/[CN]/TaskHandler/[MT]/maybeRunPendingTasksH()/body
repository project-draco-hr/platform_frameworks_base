{
synchronized (mTasks) {
    Iterator<TaskStatus> it=mPendingTasks.iterator();
    while (it.hasNext()) {
      TaskStatus nextPending=it.next();
      TaskServiceContext availableContext=null;
      for (      TaskServiceContext tsc : mActiveServices) {
        final TaskStatus running=tsc.getRunningTask();
        if (running != null && running.matches(nextPending.getUid(),nextPending.getTaskId())) {
          availableContext=null;
          break;
        }
        if (tsc.isAvailable()) {
          availableContext=tsc;
        }
      }
      if (availableContext != null) {
        if (!availableContext.executeRunnableTask(nextPending)) {
          if (DEBUG) {
            Slog.d(TAG,"Error executing " + nextPending);
          }
          mTasks.remove(nextPending);
        }
        it.remove();
      }
    }
  }
}
