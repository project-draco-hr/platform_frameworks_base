{
  try {
    sDatabase=context.openOrCreateDatabase(DATABASE_FILE,0,null);
  }
 catch (  SQLiteException e) {
    if (context.deleteDatabase(DATABASE_FILE)) {
      sDatabase=context.openOrCreateDatabase(DATABASE_FILE,0,null);
    }
  }
  if (sDatabase == null) {
    mInitialized=true;
    notify();
    return;
  }
  if (sDatabase.getVersion() != DATABASE_VERSION) {
    sDatabase.beginTransactionNonExclusive();
    try {
      upgradeDatabase();
      sDatabase.setTransactionSuccessful();
    }
  finally {
      sDatabase.endTransaction();
    }
  }
}
