{
switch (m.what) {
case MSG_OPEN_NOTIFICATION_PEEK:
    if (DEBUG)     Slog.d(TAG,"opening notification peek window; arg=" + m.arg1);
  if (m.arg1 >= 0) {
    final int N=mNotns.size();
    if (mNotificationPeekIndex >= 0 && mNotificationPeekIndex < N) {
      NotificationData.Entry entry=mNotns.get(N - 1 - mNotificationPeekIndex);
      entry.icon.setBackgroundColor(0);
      mNotificationPeekIndex=-1;
      mNotificationPeekKey=null;
    }
    final int peekIndex=m.arg1;
    if (peekIndex < N) {
      NotificationData.Entry entry=mNotns.get(N - 1 - peekIndex);
      NotificationData.Entry copy=new NotificationData.Entry(entry.key,entry.notification,entry.icon);
      inflateViews(copy,mNotificationPeekRow);
      entry.icon.setBackgroundColor(0x20FFFFFF);
      mNotificationPeekRow.removeAllViews();
      mNotificationPeekRow.addView(copy.row);
      mNotificationPeekWindow.setVisibility(View.VISIBLE);
      mNotificationPanel.show(false,true);
      mNotificationPeekIndex=peekIndex;
      mNotificationPeekKey=entry.key;
    }
  }
break;
case MSG_CLOSE_NOTIFICATION_PEEK:
if (DEBUG) Slog.d(TAG,"closing notification peek window");
mNotificationPeekWindow.setVisibility(View.GONE);
mNotificationPeekRow.removeAllViews();
final int N=mNotns.size();
if (mNotificationPeekIndex >= 0 && mNotificationPeekIndex < N) {
NotificationData.Entry entry=mNotns.get(N - 1 - mNotificationPeekIndex);
entry.icon.setBackgroundColor(0);
}
mNotificationPeekIndex=-1;
mNotificationPeekKey=null;
break;
case MSG_OPEN_NOTIFICATION_PANEL:
if (DEBUG) Slog.d(TAG,"opening notifications panel");
if (!mNotificationPanel.isShowing()) {
mNotificationPeekWindow.setVisibility(View.GONE);
mNotificationPanel.show(true,true);
mNotificationArea.setVisibility(View.GONE);
mTicker.halt();
}
break;
case MSG_CLOSE_NOTIFICATION_PANEL:
if (DEBUG) Slog.d(TAG,"closing notifications panel");
if (mNotificationPanel.isShowing()) {
mNotificationPanel.show(false,true);
mNotificationArea.setVisibility(View.VISIBLE);
}
break;
case MSG_OPEN_RECENTS_PANEL:
if (DEBUG) Slog.d(TAG,"opening recents panel");
if (mRecentsPanel != null) mRecentsPanel.setVisibility(View.VISIBLE);
break;
case MSG_CLOSE_RECENTS_PANEL:
if (DEBUG) Slog.d(TAG,"closing recents panel");
if (mRecentsPanel != null) mRecentsPanel.setVisibility(View.GONE);
break;
case MSG_SHOW_CHROME:
if (DEBUG) Slog.d(TAG,"hiding shadows (lights on)");
mBarContents.setVisibility(View.VISIBLE);
mShadow.setVisibility(View.GONE);
break;
case MSG_HIDE_CHROME:
if (DEBUG) Slog.d(TAG,"showing shadows (lights out)");
animateCollapse();
mBarContents.setVisibility(View.GONE);
mShadow.setVisibility(View.VISIBLE);
break;
}
}
