{
  final int action=event.getAction();
switch (action) {
case MotionEvent.ACTION_DOWN:
    mVT=VelocityTracker.obtain();
  mInitialTouchX=event.getX();
mInitialTouchY=event.getY();
case MotionEvent.ACTION_OUTSIDE:
case MotionEvent.ACTION_MOVE:
if (mVT != null) {
mVT.addMovement(event);
mVT.computeCurrentVelocity(1000);
if (mVT.getYVelocity() < -mNotificationFlingVelocity) {
  animateExpand();
  mVT.recycle();
  mVT=null;
}
}
return true;
case MotionEvent.ACTION_UP:
case MotionEvent.ACTION_CANCEL:
if (mVT != null) {
if (action == MotionEvent.ACTION_UP && Math.abs(event.getX() - mInitialTouchX) < mTouchSlop && Math.abs(event.getY() - mInitialTouchY) < (mTouchSlop / 3) && (int)event.getY() < v.getBottom()) {
animateExpand();
v.sendAccessibilityEvent(AccessibilityEvent.TYPE_VIEW_CLICKED);
v.playSoundEffect(SoundEffectConstants.CLICK);
}
mVT.recycle();
mVT=null;
return true;
}
}
return false;
}
