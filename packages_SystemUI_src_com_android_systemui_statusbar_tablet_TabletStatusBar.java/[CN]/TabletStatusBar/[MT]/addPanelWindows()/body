{
  final Context context=mContext;
  final Resources res=mContext.getResources();
  mNotificationPanel=(NotificationPanel)View.inflate(context,R.layout.status_bar_notification_panel,null);
  mNotificationPanel.show(false,false);
  mNotificationPanel.setOnTouchListener(new TouchOutsideListener(MSG_CLOSE_NOTIFICATION_PANEL,mNotificationPanel));
  mBatteryController.addIconView((ImageView)mNotificationPanel.findViewById(R.id.battery));
  mBatteryController.addLabelView((TextView)mNotificationPanel.findViewById(R.id.battery_text));
  mBluetoothController.addIconView((ImageView)mNotificationPanel.findViewById(R.id.bluetooth));
  mNetworkController.addCombinedSignalIconView((ImageView)mNotificationPanel.findViewById(R.id.network_signal));
  mNetworkController.addDataTypeIconView((ImageView)mNotificationPanel.findViewById(R.id.network_type));
  mNetworkController.addDataDirectionOverlayIconView((ImageView)mNotificationPanel.findViewById(R.id.network_direction));
  mNetworkController.addLabelView((TextView)mNotificationPanel.findViewById(R.id.network_text));
  mNetworkController.addLabelView((TextView)mBarContents.findViewById(R.id.network_text));
  mStatusBarView.setIgnoreChildren(0,mNotificationTrigger,mNotificationPanel);
  WindowManager.LayoutParams lp=mNotificationPanelParams=new WindowManager.LayoutParams(res.getDimensionPixelSize(R.dimen.notification_panel_width),getNotificationPanelHeight(),WindowManager.LayoutParams.TYPE_STATUS_BAR_PANEL,WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN | WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS | WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM| WindowManager.LayoutParams.FLAG_SPLIT_TOUCH| WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED,PixelFormat.TRANSLUCENT);
  lp.gravity=Gravity.BOTTOM | Gravity.RIGHT;
  lp.setTitle("NotificationPanel");
  lp.softInputMode=WindowManager.LayoutParams.SOFT_INPUT_STATE_UNCHANGED | WindowManager.LayoutParams.SOFT_INPUT_ADJUST_NOTHING;
  lp.windowAnimations=com.android.internal.R.style.Animation;
  WindowManagerImpl.getDefault().addView(mNotificationPanel,lp);
  mNotificationPeekWindow=(NotificationPeekPanel)View.inflate(context,R.layout.status_bar_notification_peek,null);
  mNotificationPeekWindow.setBar(this);
  mNotificationPeekRow=(ViewGroup)mNotificationPeekWindow.findViewById(R.id.content);
  mNotificationPeekWindow.setVisibility(View.GONE);
  mNotificationPeekWindow.setOnTouchListener(new TouchOutsideListener(MSG_CLOSE_NOTIFICATION_PEEK,mNotificationPeekWindow));
  mNotificationPeekScrubRight=new LayoutTransition();
  mNotificationPeekScrubRight.setAnimator(LayoutTransition.APPEARING,ObjectAnimator.ofInt(null,"left",-512,0));
  mNotificationPeekScrubRight.setAnimator(LayoutTransition.DISAPPEARING,ObjectAnimator.ofInt(null,"left",-512,0));
  mNotificationPeekScrubRight.setDuration(500);
  mNotificationPeekScrubLeft=new LayoutTransition();
  mNotificationPeekScrubLeft.setAnimator(LayoutTransition.APPEARING,ObjectAnimator.ofInt(null,"left",512,0));
  mNotificationPeekScrubLeft.setAnimator(LayoutTransition.DISAPPEARING,ObjectAnimator.ofInt(null,"left",512,0));
  mNotificationPeekScrubLeft.setDuration(500);
  lp=new WindowManager.LayoutParams(512,ViewGroup.LayoutParams.WRAP_CONTENT,WindowManager.LayoutParams.TYPE_STATUS_BAR_PANEL,WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS | WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM | WindowManager.LayoutParams.FLAG_SPLIT_TOUCH,PixelFormat.TRANSLUCENT);
  lp.gravity=Gravity.BOTTOM | Gravity.RIGHT;
  lp.y=res.getDimensionPixelOffset(R.dimen.peek_window_y_offset);
  lp.setTitle("NotificationPeekWindow");
  lp.windowAnimations=com.android.internal.R.style.Animation_Toast;
  WindowManagerImpl.getDefault().addView(mNotificationPeekWindow,lp);
  mRecentsPanel=(RecentAppsPanel)View.inflate(context,R.layout.status_bar_recent_panel,null);
  mRecentsPanel.setVisibility(View.GONE);
  mRecentsPanel.setOnTouchListener(new TouchOutsideListener(MSG_CLOSE_RECENTS_PANEL,mRecentsPanel));
  mStatusBarView.setIgnoreChildren(2,mRecentButton,mRecentsPanel);
  lp=new WindowManager.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,ViewGroup.LayoutParams.WRAP_CONTENT,WindowManager.LayoutParams.TYPE_STATUS_BAR_PANEL,WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN | WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM | WindowManager.LayoutParams.FLAG_SPLIT_TOUCH| WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED,PixelFormat.TRANSLUCENT);
  lp.gravity=Gravity.BOTTOM | Gravity.LEFT;
  lp.setTitle("RecentsPanel");
  lp.windowAnimations=R.style.Animation_RecentPanel;
  lp.softInputMode=WindowManager.LayoutParams.SOFT_INPUT_STATE_UNCHANGED | WindowManager.LayoutParams.SOFT_INPUT_ADJUST_NOTHING;
  WindowManagerImpl.getDefault().addView(mRecentsPanel,lp);
  mRecentsPanel.setBar(this);
  mInputMethodsPanel=(InputMethodsPanel)View.inflate(context,R.layout.status_bar_input_methods_panel,null);
  mInputMethodsPanel.setHardKeyboardEnabledChangeListener(this);
  mInputMethodsPanel.setOnTouchListener(new TouchOutsideListener(MSG_CLOSE_INPUT_METHODS_PANEL,mInputMethodsPanel));
  mInputMethodsPanel.setImeSwitchButton(mInputMethodSwitchButton);
  mStatusBarView.setIgnoreChildren(3,mInputMethodSwitchButton,mInputMethodsPanel);
  lp=new WindowManager.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,ViewGroup.LayoutParams.WRAP_CONTENT,WindowManager.LayoutParams.TYPE_STATUS_BAR_PANEL,WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN | WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM | WindowManager.LayoutParams.FLAG_SPLIT_TOUCH| WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED,PixelFormat.TRANSLUCENT);
  lp.gravity=Gravity.BOTTOM | Gravity.RIGHT;
  lp.setTitle("InputMethodsPanel");
  lp.windowAnimations=R.style.Animation_RecentPanel;
  WindowManagerImpl.getDefault().addView(mInputMethodsPanel,lp);
  mCompatModePanel=(CompatModePanel)View.inflate(context,R.layout.status_bar_compat_mode_panel,null);
  mCompatModePanel.setOnTouchListener(new TouchOutsideListener(MSG_CLOSE_COMPAT_MODE_PANEL,mCompatModePanel));
  mCompatModePanel.setTrigger(mCompatModeButton);
  mCompatModePanel.setVisibility(View.GONE);
  mStatusBarView.setIgnoreChildren(4,mCompatModeButton,mCompatModePanel);
  lp=new WindowManager.LayoutParams(250,ViewGroup.LayoutParams.WRAP_CONTENT,WindowManager.LayoutParams.TYPE_STATUS_BAR_PANEL,WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN | WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM | WindowManager.LayoutParams.FLAG_SPLIT_TOUCH| WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED,PixelFormat.TRANSLUCENT);
  lp.gravity=Gravity.BOTTOM | Gravity.RIGHT;
  lp.setTitle("CompatModePanel");
  lp.windowAnimations=android.R.style.Animation_Dialog;
  WindowManagerImpl.getDefault().addView(mCompatModePanel,lp);
}
