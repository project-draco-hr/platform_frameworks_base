{
  int old=mDisabled;
  int diff=state ^ old;
  mDisabled=state;
  if ((diff & StatusBarManager.DISABLE_CLOCK) != 0) {
    boolean show=(state & StatusBarManager.DISABLE_CLOCK) == 0;
    Slog.i(TAG,"DISABLE_CLOCK: " + (show ? "no" : "yes"));
    showClock(show);
  }
  if ((diff & StatusBarManager.DISABLE_SYSTEM_INFO) != 0) {
    boolean show=(state & StatusBarManager.DISABLE_SYSTEM_INFO) == 0;
    Slog.i(TAG,"DISABLE_SYSTEM_INFO: " + (show ? "no" : "yes"));
    mNotificationTrigger.setVisibility(show ? View.VISIBLE : View.GONE);
  }
  if ((diff & StatusBarManager.DISABLE_EXPAND) != 0) {
    if ((state & StatusBarManager.DISABLE_EXPAND) != 0) {
      Slog.i(TAG,"DISABLE_EXPAND: yes");
      animateCollapse();
    }
  }
  if ((diff & StatusBarManager.DISABLE_NOTIFICATION_ICONS) != 0) {
    mNotificationDNDMode=Prefs.read(mContext).getBoolean(Prefs.DO_NOT_DISTURB_PREF,Prefs.DO_NOT_DISTURB_DEFAULT);
    if ((state & StatusBarManager.DISABLE_NOTIFICATION_ICONS) != 0) {
      Slog.i(TAG,"DISABLE_NOTIFICATION_ICONS: yes" + (mNotificationDNDMode ? " (DND)" : ""));
      mTicker.halt();
    }
 else {
      Slog.i(TAG,"DISABLE_NOTIFICATION_ICONS: no" + (mNotificationDNDMode ? " (DND)" : ""));
    }
    reloadAllNotificationIcons();
  }
 else   if ((diff & StatusBarManager.DISABLE_NOTIFICATION_TICKER) != 0) {
    if ((state & StatusBarManager.DISABLE_NOTIFICATION_TICKER) != 0) {
      mTicker.halt();
    }
  }
  if ((diff & StatusBarManager.DISABLE_NAVIGATION) != 0) {
    if ((state & StatusBarManager.DISABLE_NAVIGATION) != 0) {
      Slog.i(TAG,"DISABLE_NAVIGATION: yes");
      mNavigationArea.setVisibility(View.GONE);
      mInputMethodSwitchButton.setScreenLocked(true);
    }
 else {
      Slog.i(TAG,"DISABLE_NAVIGATION: no");
      mNavigationArea.setVisibility(View.VISIBLE);
      mInputMethodSwitchButton.setScreenLocked(false);
    }
  }
  if ((diff & StatusBarManager.DISABLE_BACK) != 0) {
    if ((state & StatusBarManager.DISABLE_BACK) != 0) {
      Slog.i(TAG,"DISABLE_BACK: yes");
      mBackButton.setVisibility(View.INVISIBLE);
      mInputMethodSwitchButton.setScreenLocked(true);
    }
 else {
      Slog.i(TAG,"DISABLE_BACK: no");
      mBackButton.setVisibility(View.VISIBLE);
      mInputMethodSwitchButton.setScreenLocked(false);
    }
  }
}
