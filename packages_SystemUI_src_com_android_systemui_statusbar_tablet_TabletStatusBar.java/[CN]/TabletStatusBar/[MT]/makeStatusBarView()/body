{
  final Context context=mContext;
  final Resources res=context.getResources();
  mIconSize=res.getDimensionPixelSize(com.android.internal.R.dimen.status_bar_icon_size);
  final TabletStatusBarView sb=(TabletStatusBarView)View.inflate(context,R.layout.status_bar,null);
  mStatusBarView=sb;
  sb.setHandler(mHandler);
  mBarContents=sb.findViewById(R.id.bar_contents);
  mNotificationArea=sb.findViewById(R.id.notificationArea);
  mNotificationTrigger=sb.findViewById(R.id.notificationTrigger);
  mNotificationTrigger.setOnClickListener(mOnClickListener);
  mNotificationIconArea=(NotificationIconArea)sb.findViewById(R.id.notificationIcons);
  mIconLayout=(NotificationIconArea.IconLayout)sb.findViewById(R.id.icons);
  mIconLayout.setOnTouchListener(new NotificationIconTouchListener());
  ViewConfiguration vc=ViewConfiguration.get(context);
  mNotificationPeekTapDuration=vc.getTapTimeout();
  mNotificationFlingVelocity=300;
  mTicker=new TabletTicker(context);
  mBatteryController=new BatteryController(mContext);
  mBatteryController.addIconView((ImageView)sb.findViewById(R.id.battery));
  mNetworkController=new NetworkController(mContext);
  mNetworkController.addCombinedSignalIconView((ImageView)sb.findViewById(R.id.network_signal));
  mNetworkController.addDataTypeIconView((ImageView)sb.findViewById(R.id.network_type));
  mNavigationArea=sb.findViewById(R.id.navigationArea);
  mBackButton=(ImageView)mNavigationArea.findViewById(R.id.back);
  mHomeButton=mNavigationArea.findViewById(R.id.home);
  mMenuButton=mNavigationArea.findViewById(R.id.menu);
  mRecentButton=mNavigationArea.findViewById(R.id.recent_apps);
  Slog.d(TAG,"rec=" + mRecentButton + ", listener="+ mOnClickListener);
  mRecentButton.setOnClickListener(mOnClickListener);
  mInputMethodSwitchButton=(InputMethodButton)sb.findViewById(R.id.imeSwitchButton);
  mInputMethodShortcutButton=(InputMethodButton)sb.findViewById(R.id.imeShortcutButton);
  mBackShadow=sb.findViewById(R.id.back_shadow);
  mHomeShadow=sb.findViewById(R.id.home_shadow);
  mRecentShadow=sb.findViewById(R.id.recent_shadow);
  mMenuShadow=sb.findViewById(R.id.menu_shadow);
  mNotificationShadow=sb.findViewById(R.id.notification_shadow);
  mShadowController=new ShadowController(false);
  mShadowController.add(mBackButton,mBackShadow);
  mShadowController.add(mHomeButton,mHomeShadow);
  mShadowController.add(mRecentButton,mRecentShadow);
  mShadowController.add(mMenuButton,mMenuShadow);
  mShadowController.add(mNotificationArea,mNotificationShadow);
  setAreThereNotifications();
  refreshNotificationTrigger();
  addPanelWindows();
  mPile=(ViewGroup)mNotificationPanel.findViewById(R.id.content);
  mPile.removeAllViews();
  ScrollView scroller=(ScrollView)mPile.getParent();
  scroller.setFillViewport(true);
  return sb;
}
