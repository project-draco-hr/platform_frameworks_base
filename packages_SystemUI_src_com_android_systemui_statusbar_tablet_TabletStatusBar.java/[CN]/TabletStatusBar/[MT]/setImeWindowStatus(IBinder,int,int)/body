{
  mInputMethodSwitchButton.setImeWindowStatus(token,(vis & InputMethodService.IME_ACTIVE) != 0);
  updateNotificationIcons();
  mInputMethodsPanel.setImeToken(token);
  boolean altBack=(backDisposition == InputMethodService.BACK_DISPOSITION_WILL_DISMISS) || ((vis & InputMethodService.IME_VISIBLE) != 0);
  mAltBackButtonEnabledForIme=altBack;
  mCommandQueue.setNavigationIconHints(altBack ? (mNavigationIconHints | StatusBarManager.NAVIGATION_HINT_BACK_ALT) : (mNavigationIconHints & ~StatusBarManager.NAVIGATION_HINT_BACK_ALT));
  if (FAKE_SPACE_BAR) {
    mFakeSpaceBar.setVisibility(((vis & InputMethodService.IME_VISIBLE) != 0) ? View.VISIBLE : View.GONE);
  }
}
