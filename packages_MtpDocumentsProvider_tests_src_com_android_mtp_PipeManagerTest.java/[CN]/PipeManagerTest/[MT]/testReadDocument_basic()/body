{
  final TestMtpManager mtpManager=new TestMtpManager(getContext());
  final byte[] expectedBytes=new byte[]{'h','e','l','l','o'};
  mtpManager.setImportFileBytes(0,1,expectedBytes);
  final ExecutorService executor=Executors.newSingleThreadExecutor();
  final PipeManager pipeManager=new PipeManager(executor);
  final ParcelFileDescriptor descriptor=pipeManager.readDocument(mtpManager,new Identifier(0,0,1));
  try (final ParcelFileDescriptor.AutoCloseInputStream stream=new ParcelFileDescriptor.AutoCloseInputStream(descriptor)){
    final byte[] results=new byte[100];
    assertEquals(expectedBytes.length,stream.read(results));
    for (int i=0; i < expectedBytes.length; i++) {
      assertEquals(expectedBytes[i],results[i]);
    }
  }
 }
