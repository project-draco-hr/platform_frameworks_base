{
  super.onLayout(changed,l,t,r,b);
  final View tabContainer=mTabContainer;
  final boolean hasTabs=tabContainer != null && tabContainer.getVisibility() != GONE;
  if (tabContainer != null && tabContainer.getVisibility() != GONE) {
    final int containerHeight=getMeasuredHeight();
    final int tabHeight=tabContainer.getMeasuredHeight();
    tabContainer.layout(l,containerHeight - tabHeight,r,containerHeight);
  }
  boolean needsInvalidate=false;
  if (mIsSplit) {
    if (mSplitBackground != null) {
      mSplitBackground.setBounds(0,0,getMeasuredWidth(),getMeasuredHeight());
      needsInvalidate=true;
    }
  }
 else {
    if (mBackground != null) {
      final ActionBarView actionBarView=mActionBarView;
      mBackground.setBounds(actionBarView.getLeft(),actionBarView.getTop(),actionBarView.getRight(),actionBarView.getBottom());
      needsInvalidate=true;
    }
    mIsStacked=hasTabs;
    if (hasTabs && mStackedBackground != null) {
      mStackedBackground.setBounds(tabContainer.getLeft(),tabContainer.getTop(),tabContainer.getRight(),tabContainer.getBottom());
      needsInvalidate=true;
    }
  }
  if (needsInvalidate) {
    invalidate();
  }
}
