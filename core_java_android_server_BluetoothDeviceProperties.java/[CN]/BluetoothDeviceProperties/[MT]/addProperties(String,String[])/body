{
  Map<String,String> propertyValues;
synchronized (mPropertiesMap) {
    propertyValues=mPropertiesMap.get(address);
    if (propertyValues == null) {
      propertyValues=new HashMap<String,String>();
    }
    for (int i=0; i < properties.length; i++) {
      String name=properties[i];
      String newValue=null;
      int len;
      if (name == null) {
        Log.e(TAG,"Error: Remote Device Property at index " + i + " is null");
        continue;
      }
      if (name.equals("UUIDs") || name.equals("Nodes")) {
        StringBuilder str=new StringBuilder();
        len=Integer.valueOf(properties[++i]);
        for (int j=0; j < len; j++) {
          str.append(properties[++i]);
          str.append(",");
        }
        if (len > 0) {
          newValue=str.toString();
        }
      }
 else {
        newValue=properties[++i];
      }
      propertyValues.put(name,newValue);
    }
    mPropertiesMap.put(address,propertyValues);
  }
  mService.updateDeviceServiceChannelCache(address);
  return propertyValues;
}
