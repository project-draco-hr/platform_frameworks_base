{
  for (  OutputPort outputPort : filter.getOutputPorts()) {
    InputPort inputPort=outputPort.getBasePort();
    if (inputPort != null) {
      FrameFormat inputFormat=inputPort.getSourceFormat();
      FrameFormat outputFormat=filter.getOutputFormat(outputPort.getName(),inputFormat);
      if (outputFormat == null) {
        throw new RuntimeException("Filter did not return an output format for " + outputPort + "!");
      }
      outputPort.setPortFormat(outputFormat);
    }
  }
}
