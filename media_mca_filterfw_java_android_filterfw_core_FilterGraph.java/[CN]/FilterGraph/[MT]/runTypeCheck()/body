{
  Stack<Filter> filterStack=new Stack<Filter>();
  Set<Filter> processedFilters=new HashSet<Filter>();
  filterStack.addAll(getSourceFilters());
  while (!filterStack.empty()) {
    Filter filter=filterStack.pop();
    processedFilters.add(filter);
    updateOutputs(filter);
    if (mLogVerbose)     Log.v(TAG,"Running type check on " + filter + "...");
    runTypeCheckOn(filter);
    for (    OutputPort port : filter.getOutputPorts()) {
      Filter target=port.getTargetFilter();
      if (target != null && readyForProcessing(target,processedFilters)) {
        filterStack.push(target);
      }
    }
  }
  if (processedFilters.size() != getFilters().size()) {
    throw new RuntimeException("Could not schedule all filters! Is your graph malformed?");
  }
}
