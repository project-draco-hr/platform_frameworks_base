{
  IDelegate delegate=LittleMock.mock(IDelegate.class);
  MockableTextToSpeechService.setMocker(delegate);
  LittleMock.doReturn(TextToSpeech.LANG_COUNTRY_AVAILABLE).when(delegate).onIsLanguageAvailable(LittleMock.anyString(),LittleMock.anyString(),LittleMock.anyString());
  LittleMock.doReturn(TextToSpeech.LANG_COUNTRY_AVAILABLE).when(delegate).onLoadLanguage(LittleMock.anyString(),LittleMock.anyString(),LittleMock.anyString());
  blockingCallSpeak("foo bar",delegate);
  ArgumentCaptor<SynthesisRequest> req=LittleMock.createCaptor();
  LittleMock.verify(delegate,LittleMock.times(1)).onSynthesizeText(req.capture(),LittleMock.<SynthesisCallback>anyObject());
  Locale defaultLocale=Locale.getDefault();
  assertEquals(defaultLocale.getISO3Language(),req.getValue().getLanguage());
  assertEquals(defaultLocale.getISO3Country(),req.getValue().getCountry());
  assertEquals("",req.getValue().getVariant());
  assertEquals(defaultLocale.toLanguageTag(),req.getValue().getVoiceName());
}
