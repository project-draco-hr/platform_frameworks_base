{
  if (view == null) {
    return;
  }
  boolean isListViewItem=false;
  if (view.getParent() instanceof ListView) {
    isListViewItem=true;
  }
  if (isListViewItem && !((ListView)view.getParent()).getAdapter().hasStableIds()) {
    return;
  }
  long id;
  if (!isListViewItem) {
    id=view.getId();
  }
 else {
    ListView listview=(ListView)view.getParent();
    int position=listview.getPositionForView(view);
    id=listview.getItemIdAtPosition(position);
    view.setHasTransientState(true);
  }
  TransitionValues values=new TransitionValues();
  values.view=view;
  captureValues(values,start);
  if (start) {
    if (!isListViewItem) {
      mStartValues.put(view,values);
      if (id >= 0) {
        mStartIdValues.put((int)id,values);
      }
    }
 else {
      mStartItemIdValues.put(id,values);
    }
  }
 else {
    if (!isListViewItem) {
      mEndValues.put(view,values);
      if (id >= 0) {
        mEndIdValues.put((int)id,values);
      }
    }
 else {
      mEndItemIdValues.put(id,values);
    }
  }
  if (view instanceof ViewGroup) {
    ViewGroup parent=(ViewGroup)view;
    for (int i=0; i < parent.getChildCount(); ++i) {
      captureHierarchy(parent.getChildAt(i),start);
    }
  }
}
