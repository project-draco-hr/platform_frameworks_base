{
  mVelocityTracker.addMovement(event);
  int x=(int)event.getX();
  int y=(int)event.getY();
  int xDiff=Math.abs(x - mTouchDownX);
  int yDiff=Math.abs(y - mTouchDownY);
  if (mDivider == null || mRecentsComponent == null) {
    return false;
  }
  if (!mDockWindowTouchSlopExceeded) {
    boolean touchSlopExceeded=!mIsVertical ? yDiff > mScrollTouchSlop && yDiff > xDiff : xDiff > mScrollTouchSlop && xDiff > yDiff;
    if (mDownOnRecents && touchSlopExceeded && mDivider.getView().getWindowManagerProxy().getDockSide() == DOCKED_INVALID) {
      Rect initialBounds=null;
      int dragMode=calculateDragMode();
      int createMode=ActivityManager.DOCKED_STACK_CREATE_MODE_TOP_OR_LEFT;
      if (dragMode == DRAG_MODE_DIVIDER) {
        initialBounds=new Rect();
        mDivider.getView().calculateBoundsForPosition(mIsVertical ? (int)event.getRawX() : (int)event.getRawY(),mDivider.getView().isHorizontalDivision() ? DOCKED_TOP : DOCKED_LEFT,initialBounds);
      }
 else       if (dragMode == DRAG_MODE_RECENTS && mTouchDownX < mContext.getResources().getDisplayMetrics().widthPixels / 2) {
        createMode=ActivityManager.DOCKED_STACK_CREATE_MODE_BOTTOM_OR_RIGHT;
      }
      boolean docked=mRecentsComponent.dockTopTask(dragMode,createMode,initialBounds,MetricsEvent.ACTION_WINDOW_DOCK_SWIPE);
      if (docked) {
        mDragMode=dragMode;
        if (mDragMode == DRAG_MODE_DIVIDER) {
          mDivider.getView().startDragging(false,true);
        }
        mDockWindowTouchSlopExceeded=true;
        return true;
      }
    }
  }
 else {
    if (mDragMode == DRAG_MODE_DIVIDER) {
      int position=!mIsVertical ? (int)event.getRawY() : (int)event.getRawX();
      SnapTarget snapTarget=mDivider.getView().getSnapAlgorithm().calculateSnapTarget(position,0f,false);
      mDivider.getView().resizeStack(position,snapTarget.position,snapTarget);
    }
 else     if (mDragMode == DRAG_MODE_RECENTS) {
      mRecentsComponent.onDraggingInRecents(event.getRawY());
    }
  }
  return false;
}
