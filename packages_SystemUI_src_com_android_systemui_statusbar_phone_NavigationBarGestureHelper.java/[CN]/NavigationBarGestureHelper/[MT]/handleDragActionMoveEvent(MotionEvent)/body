{
  mVelocityTracker.addMovement(event);
  int x=(int)event.getX();
  int y=(int)event.getY();
  int xDiff=Math.abs(x - mTouchDownX);
  int yDiff=Math.abs(y - mTouchDownY);
  if (!mDockWindowTouchSlopExceeded) {
    boolean touchSlopExceeded=!mIsVertical ? yDiff > mTouchSlop && yDiff > xDiff : xDiff > mTouchSlop && xDiff > yDiff;
    if (touchSlopExceeded && mDivider.getView().getWindowManagerProxy().getDockSide() == DOCKED_INVALID) {
      mDragMode=calculateDragMode();
      Rect initialBounds=null;
      int createMode=ActivityManager.DOCKED_STACK_CREATE_MODE_TOP_OR_LEFT;
      if (mDragMode == DRAG_MODE_DIVIDER) {
        initialBounds=new Rect();
        mDivider.getView().calculateBoundsForPosition(mIsVertical ? (int)event.getRawX() : (int)event.getRawY(),mDivider.getView().isHorizontalDivision() ? DOCKED_TOP : DOCKED_LEFT,initialBounds);
      }
 else       if (mDragMode == DRAG_MODE_RECENTS && mTouchDownX < mContext.getResources().getDisplayMetrics().widthPixels / 2) {
        createMode=ActivityManager.DOCKED_STACK_CREATE_MODE_BOTTOM_OR_RIGHT;
      }
      mRecentsComponent.dockTopTask(mDragMode == DRAG_MODE_RECENTS,createMode,initialBounds);
      if (mDragMode == DRAG_MODE_DIVIDER) {
        mDivider.getView().startDragging();
      }
      mDockWindowTouchSlopExceeded=true;
      return true;
    }
  }
 else {
    if (mDragMode == DRAG_MODE_DIVIDER) {
      mDivider.getView().resizeStack(!mIsVertical ? (int)event.getRawY() : (int)event.getRawX());
    }
 else     if (mDragMode == DRAG_MODE_RECENTS) {
      mRecentsComponent.onDraggingInRecents(event.getRawY());
    }
  }
  return false;
}
