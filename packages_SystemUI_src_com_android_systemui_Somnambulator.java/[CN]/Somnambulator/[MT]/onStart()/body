{
  super.onStart();
  final Intent launchIntent=getIntent();
  final String action=launchIntent.getAction();
  if (Intent.ACTION_CREATE_SHORTCUT.equals(action)) {
    Intent shortcutIntent=new Intent(this,Somnambulator.class);
    shortcutIntent.setFlags(Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS | Intent.FLAG_ACTIVITY_NEW_TASK);
    Intent resultIntent=new Intent();
    resultIntent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE,Intent.ShortcutIconResource.fromContext(this,R.mipmap.ic_dreams));
    resultIntent.putExtra(Intent.EXTRA_SHORTCUT_INTENT,shortcutIntent);
    resultIntent.putExtra(Intent.EXTRA_SHORTCUT_NAME,getString(R.string.start_dreams));
    setResult(RESULT_OK,resultIntent);
  }
 else {
    boolean docked=launchIntent.hasCategory(Intent.CATEGORY_DESK_DOCK);
    if (docked && !(isScreenSaverEnabled() && isScreenSaverActivatedOnDock())) {
      Slog.i(TAG,"Dreams currently disabled for docks.");
    }
 else {
      IDreamManager somnambulist=IDreamManager.Stub.asInterface(ServiceManager.checkService(DreamService.DREAM_SERVICE));
      if (somnambulist != null) {
        try {
          Slog.v(TAG,"Dreaming on " + (docked ? "dock insertion" : "user request"));
          somnambulist.dream();
        }
 catch (        RemoteException e) {
        }
      }
    }
  }
  finish();
}
