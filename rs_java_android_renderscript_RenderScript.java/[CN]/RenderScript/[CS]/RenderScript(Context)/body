{
  mContextType=ContextType.NORMAL;
  if (ctx != null) {
    mApplicationContext=ctx.getApplicationContext();
  }
  mRWLock=new ReentrantReadWriteLock();
  try {
    registerNativeAllocation.invoke(sRuntime,4 * 1024 * 1024);
  }
 catch (  Exception e) {
    Log.e(RenderScript.LOG_TAG,"Couldn't invoke registerNativeAllocation:" + e);
    throw new RSRuntimeException("Couldn't invoke registerNativeAllocation:" + e);
  }
}
