{
  if (ev != null && ev.getAction() == MotionEvent.ACTION_MOVE && !mConfirmMove) {
    final int dx=Math.round(ev.getX()) - mLastTouchX;
    final int dy=Math.round(ev.getY()) - mLastTouchY;
    if (dx * dx + dy * dy > mTouchSlopSquare) {
      mPrivateHandler.removeMessages(SWITCH_TO_SHORTPRESS);
      mPrivateHandler.removeMessages(SWITCH_TO_LONGPRESS);
    }
  }
  if (mTouchEventQueue == null) {
    return sequence <= mLastHandledTouchSequence;
  }
  if (ev != null && ev.getAction() == MotionEvent.ACTION_DOWN) {
    long eventTime=ev.getEventTime();
    long lastHandledEventTime=mLastEventTime;
    if (eventTime > lastHandledEventTime + QUEUED_GESTURE_TIMEOUT) {
      Log.w(LOGTAG,"Got ACTION_DOWN but still waiting on stale event. " + "Ignoring previous queued events.");
      QueuedTouch qd=mTouchEventQueue;
      while (qd != null && qd.mSequence < sequence) {
        QueuedTouch recycleMe=qd;
        qd=qd.mNext;
        recycleQueuedTouch(recycleMe);
      }
      mTouchEventQueue=qd;
      mLastHandledTouchSequence=sequence - 1;
    }
  }
  if (mIgnoreUntilSequence - 1 > mLastHandledTouchSequence) {
    QueuedTouch qd=mTouchEventQueue;
    while (qd != null && qd.mSequence < mIgnoreUntilSequence) {
      QueuedTouch recycleMe=qd;
      qd=qd.mNext;
      recycleQueuedTouch(recycleMe);
    }
    mTouchEventQueue=qd;
    mLastHandledTouchSequence=mIgnoreUntilSequence - 1;
  }
  return sequence <= mLastHandledTouchSequence;
}
