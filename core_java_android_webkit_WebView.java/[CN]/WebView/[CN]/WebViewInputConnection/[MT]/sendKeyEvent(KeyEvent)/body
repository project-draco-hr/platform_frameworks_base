{
  if (!mIsKeySentByMe) {
    if (event.getAction() == KeyEvent.ACTION_UP) {
      if (event.getKeyCode() == KeyEvent.KEYCODE_DEL) {
        return deleteSurroundingText(1,0);
      }
 else       if (event.getKeyCode() == KeyEvent.KEYCODE_FORWARD_DEL) {
        return deleteSurroundingText(0,1);
      }
 else       if (event.getUnicodeChar() != 0) {
        String newComposingText=Character.toString((char)event.getUnicodeChar());
        return commitText(newComposingText,1);
      }
    }
 else     if (event.getAction() == KeyEvent.ACTION_DOWN && (event.getKeyCode() == KeyEvent.KEYCODE_DEL || event.getKeyCode() == KeyEvent.KEYCODE_FORWARD_DEL || event.getUnicodeChar() != 0)) {
      return true;
    }
  }
  return super.sendKeyEvent(event);
}
