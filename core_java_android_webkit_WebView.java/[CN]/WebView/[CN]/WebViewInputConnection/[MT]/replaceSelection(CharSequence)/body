{
  Editable editable=getEditable();
  int selectionStart=Selection.getSelectionStart(editable);
  int selectionEnd=Selection.getSelectionEnd(editable);
  text=limitReplaceTextByMaxLength(text,selectionEnd - selectionStart);
  setNewText(selectionStart,selectionEnd,text);
  editable.replace(selectionStart,selectionEnd,text);
  restartInput();
  int newCaret=selectionStart + text.length();
  setSelection(newCaret,newCaret);
}
