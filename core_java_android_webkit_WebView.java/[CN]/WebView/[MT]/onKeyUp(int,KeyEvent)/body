{
  if (LOGV_ENABLED) {
    Log.v(LOGTAG,"keyUp at " + System.currentTimeMillis() + ", "+ event);
  }
  if (mNativeClass == 0) {
    return false;
  }
  if (keyCode == KeyEvent.KEYCODE_CALL && nativeUpdateFocusNode()) {
    FocusNode node=mFocusNode;
    String text=node.mText;
    if (!node.mIsTextField && !node.mIsTextArea && text != null && text.startsWith(SCHEME_TEL)) {
      Intent intent=new Intent(Intent.ACTION_DIAL,Uri.parse(text));
      getContext().startActivity(intent);
      return true;
    }
  }
  if (event.isSystem() || mCallbackProxy.uiOverrideKeyEvent(event)) {
    return false;
  }
  if (mTouchMode >= FIRST_SCROLL_ZOOM && mTouchMode <= LAST_SCROLL_ZOOM) {
    if (KeyEvent.KEYCODE_DPAD_CENTER == keyCode && mTouchMode != SCROLL_ZOOM_ANIMATION_IN) {
      setZoomScrollIn();
      mTouchMode=SCROLL_ZOOM_ANIMATION_IN;
      invalidate();
      return true;
    }
    return false;
  }
  if (ENABLE_COPY_PASTE && (keyCode == KeyEvent.KEYCODE_SHIFT_LEFT || keyCode == KeyEvent.KEYCODE_SHIFT_RIGHT)) {
    if (commitCopy()) {
      return true;
    }
  }
  if (keyCode >= KeyEvent.KEYCODE_DPAD_UP && keyCode <= KeyEvent.KEYCODE_DPAD_RIGHT) {
    return false;
  }
  if (keyCode == KeyEvent.KEYCODE_DPAD_CENTER || keyCode == KeyEvent.KEYCODE_ENTER) {
    mPrivateHandler.removeMessages(LONG_PRESS_ENTER);
    mGotEnterDown=false;
    if (KeyEvent.KEYCODE_DPAD_CENTER == keyCode) {
      if (mShiftIsPressed) {
        return false;
      }
      if (getSettings().supportZoom()) {
        if (mTouchMode == TOUCH_DOUBLECLICK_MODE) {
          zoomScrollOut();
        }
 else {
          if (LOGV_ENABLED) {
            Log.v(LOGTAG,"TOUCH_DOUBLECLICK_MODE");
          }
          mPrivateHandler.sendMessageDelayed(mPrivateHandler.obtainMessage(SWITCH_TO_ENTER),TAP_TIMEOUT);
          mTouchMode=TOUCH_DOUBLECLICK_MODE;
        }
        return true;
      }
    }
    Rect visibleRect=sendOurVisibleRect();
    boolean nodeOnScreen=false;
    boolean isTextField=false;
    boolean isTextArea=false;
    FocusNode node=null;
    if (nativeUpdateFocusNode()) {
      node=mFocusNode;
      isTextField=node.mIsTextField;
      isTextArea=node.mIsTextArea;
      nodeOnScreen=Rect.intersects(node.mBounds,visibleRect);
    }
    if (nodeOnScreen && !isTextField && !isTextArea) {
      nativeSetFollowedLink(true);
      mWebViewCore.sendMessage(EventHub.SET_FINAL_FOCUS,EventHub.BLOCK_FOCUS_CHANGE_UNTIL_KEY_UP,0,new WebViewCore.FocusData(mFocusData));
      playSoundEffect(SoundEffectConstants.CLICK);
      if (!mCallbackProxy.uiOverrideUrlLoading(node.mText)) {
        mWebViewCore.sendMessage(EventHub.KEY_UP,keyCode,EventHub.KEYEVENT_UNHANDLED_TYPE,event);
      }
      return true;
    }
    return false;
  }
  if (nativeFocusNodeWantsKeyEvents()) {
    mWebViewCore.sendMessage(EventHub.KEY_UP,keyCode,EventHub.KEYEVENT_FOCUS_NODE_TYPE,event);
    return true;
  }
 else   if (false) {
    mWebViewCore.sendMessage(EventHub.KEY_UP,keyCode,EventHub.KEYEVENT_UNHANDLED_TYPE,event);
    return true;
  }
  return false;
}
