{
  if (!hasFocus() && (null == mWebTextView || !mWebTextView.hasFocus())) {
    return;
  }
  boolean alreadyThere=inEditingMode();
  if (0 == mNativeClass || !nativeFocusCandidateIsTextInput()) {
    if (alreadyThere) {
      mWebTextView.remove();
    }
    return;
  }
  if (mWebTextView == null) {
    mWebTextView=new WebTextView(mContext,WebView.this);
    mTextGeneration=0;
  }
  mWebTextView.setTextSize(TypedValue.COMPLEX_UNIT_PX,contentToViewDimension(nativeFocusCandidateTextSize()));
  Rect visibleRect=new Rect();
  calcOurContentVisibleRect(visibleRect);
  Rect bounds=nativeFocusCandidateNodeBounds();
  Rect vBox=contentToViewRect(bounds);
  mWebTextView.setRect(vBox.left,vBox.top,vBox.width(),vBox.height());
  if (!Rect.intersects(bounds,visibleRect)) {
    mWebTextView.bringIntoView();
  }
  String text=nativeFocusCandidateText();
  int nodePointer=nativeFocusCandidatePointer();
  if (alreadyThere && mWebTextView.isSameTextField(nodePointer)) {
    if (text != null && !text.equals(mWebTextView.getText().toString()) && nativeTextGeneration() == mTextGeneration) {
      mWebTextView.setTextAndKeepSelection(text);
    }
  }
 else {
    mWebTextView.setGravity(nativeFocusCandidateIsRtlText() ? Gravity.RIGHT : Gravity.NO_GRAVITY);
    mWebTextView.setNodePointer(nodePointer);
    mWebTextView.setType(nativeFocusCandidateType());
    if (null == text) {
      if (DebugFlags.WEB_VIEW) {
        Log.v(LOGTAG,"rebuildWebTextView null == text");
      }
      text="";
    }
    mWebTextView.setTextAndKeepSelection(text);
    InputMethodManager imm=InputMethodManager.peekInstance();
    if (imm != null && imm.isActive(mWebTextView)) {
      imm.restartInput(mWebTextView);
    }
  }
  mWebTextView.requestFocus();
}
