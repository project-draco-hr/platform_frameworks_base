{
  if (textGeneration == mTextGeneration) {
    if (inEditingMode() && mWebTextView.isSameTextField(nodePointer)) {
      mWebTextView.setSelectionFromWebKit(data.mStart,data.mEnd);
    }
 else     if (mInputConnection != null && mFieldPointer == nodePointer) {
      mInputConnection.setSelection(data.mStart,data.mEnd);
    }
  }
  nativeSetTextSelection(mNativeClass,data.mSelectTextPtr);
  if (data.mSelectTextPtr != 0) {
    if (!mSelectingText) {
      setupWebkitSelect();
    }
 else     if (!mSelectionStarted) {
      syncSelectionCursors();
    }
  }
 else {
    selectionDone();
  }
  invalidate();
}
