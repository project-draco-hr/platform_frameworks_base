{
  checkThread();
  if (outState == null) {
    return null;
  }
  WebBackForwardList list=copyBackForwardList();
  final int currentIndex=list.getCurrentIndex();
  final int size=list.getSize();
  if (currentIndex < 0 || currentIndex >= size || size == 0) {
    return null;
  }
  outState.putInt("index",currentIndex);
  ArrayList<byte[]> history=new ArrayList<byte[]>(size);
  for (int i=0; i < size; i++) {
    WebHistoryItem item=list.getItemAtIndex(i);
    if (null == item) {
      Log.w(LOGTAG,"saveState: Unexpected null history item.");
      return null;
    }
    byte[] data=item.getFlattenedData();
    if (data == null) {
      return null;
    }
    history.add(data);
  }
  outState.putSerializable("history",history);
  if (mCertificate != null) {
    outState.putBundle("certificate",SslCertificate.saveState(mCertificate));
  }
  outState.putBoolean("privateBrowsingEnabled",isPrivateBrowsingEnabled());
  mZoomManager.saveZoomState(outState);
  return list;
}
