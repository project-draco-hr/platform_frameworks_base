{
  if (hasWindowFocus) {
    if (hasFocus()) {
      mDrawCursorRing=true;
      if (mNativeClass != 0) {
        nativeRecordButtons(true,false,true);
      }
    }
 else {
      mDrawCursorRing=false;
    }
  }
 else {
    if (getSettings().getBuiltInZoomControls() && !mZoomButtonsController.isVisible()) {
      mDrawCursorRing=false;
    }
    mGotKeyDown=false;
    mShiftIsPressed=false;
    if (mNativeClass != 0) {
      nativeRecordButtons(false,false,true);
    }
    setFocusControllerInactive();
  }
  invalidate();
  super.onWindowFocusChanged(hasWindowFocus);
}
