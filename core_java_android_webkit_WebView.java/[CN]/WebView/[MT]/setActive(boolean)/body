{
  if (active) {
    if (hasFocus()) {
      mDrawCursorRing=true;
      setFocusControllerActive(true);
      if (mNativeClass != 0) {
        nativeRecordButtons(true,false,true);
      }
    }
 else {
      if (!inEditingMode()) {
        mDrawCursorRing=false;
        setFocusControllerActive(false);
      }
    }
  }
 else {
    if (!mZoomManager.isZoomPickerVisible()) {
      mDrawCursorRing=false;
    }
    mGotKeyDown=false;
    mPrivateHandler.removeMessages(SWITCH_TO_LONGPRESS);
    mTouchMode=TOUCH_DONE_MODE;
    if (mNativeClass != 0) {
      nativeRecordButtons(false,false,true);
    }
    setFocusControllerActive(false);
  }
  invalidate();
}
