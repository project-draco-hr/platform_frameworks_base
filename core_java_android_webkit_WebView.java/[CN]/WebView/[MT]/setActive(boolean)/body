{
  if (active) {
    if (hasFocus()) {
      mDrawCursorRing=true;
      if (mNativeClass != 0) {
        nativeRecordButtons(true,false,true);
        if (inEditingMode()) {
          mWebViewCore.sendMessage(EventHub.SET_ACTIVE,1,0);
        }
      }
    }
 else {
      mDrawCursorRing=false;
    }
  }
 else {
    if (mWebViewCore != null && getSettings().getBuiltInZoomControls() && !getZoomButtonsController().isVisible()) {
      mDrawCursorRing=false;
    }
    mGotKeyDown=false;
    mShiftIsPressed=false;
    mPrivateHandler.removeMessages(SWITCH_TO_LONGPRESS);
    mTouchMode=TOUCH_DONE_MODE;
    if (mNativeClass != 0) {
      nativeRecordButtons(false,false,true);
    }
    setFocusControllerInactive();
  }
  invalidate();
}
