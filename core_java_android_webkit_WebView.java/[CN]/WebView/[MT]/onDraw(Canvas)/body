{
  if (mNativeClass == 0) {
    return;
  }
  if (mWebViewCore.mEndScaleZoom) {
    mWebViewCore.mEndScaleZoom=false;
    if (mTouchMode >= FIRST_SCROLL_ZOOM && mTouchMode <= LAST_SCROLL_ZOOM) {
      setHorizontalScrollBarEnabled(true);
      setVerticalScrollBarEnabled(true);
      mTouchMode=TOUCH_DONE_MODE;
    }
  }
  int sc=canvas.save();
  if (mTouchMode >= FIRST_SCROLL_ZOOM && mTouchMode <= LAST_SCROLL_ZOOM) {
    scrollZoomDraw(canvas);
  }
 else {
    nativeRecomputeFocus();
    nativeRecordButtons(hasFocus() && hasWindowFocus(),mTouchMode == TOUCH_SHORTPRESS_START_MODE || mTrackballDown || mGotEnterDown,false);
    drawCoreAndFocusRing(canvas,mBackgroundColor,mDrawFocusRing);
  }
  canvas.restoreToCount(sc);
  if (AUTO_REDRAW_HACK && mAutoRedraw) {
    invalidate();
  }
}
