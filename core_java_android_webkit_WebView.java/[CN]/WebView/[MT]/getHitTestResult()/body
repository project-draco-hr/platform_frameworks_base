{
  if (mNativeClass == 0) {
    return null;
  }
  HitTestResult result=new HitTestResult();
  if (nativeUpdateFocusNode()) {
    FocusNode node=mFocusNode;
    if (node.mIsTextField || node.mIsTextArea) {
      result.setType(HitTestResult.EDIT_TEXT_TYPE);
    }
 else     if (node.mText != null) {
      String text=node.mText;
      if (text.startsWith(SCHEME_TEL)) {
        result.setType(HitTestResult.PHONE_TYPE);
        result.setExtra(text.substring(SCHEME_TEL.length()));
      }
 else       if (text.startsWith(SCHEME_MAILTO)) {
        result.setType(HitTestResult.EMAIL_TYPE);
        result.setExtra(text.substring(SCHEME_MAILTO.length()));
      }
 else       if (text.startsWith(SCHEME_GEO)) {
        result.setType(HitTestResult.GEO_TYPE);
        result.setExtra(URLDecoder.decode(text.substring(SCHEME_GEO.length())));
      }
 else       if (node.mIsAnchor) {
        result.setType(HitTestResult.SRC_ANCHOR_TYPE);
        result.setExtra(text);
      }
    }
  }
  int type=result.getType();
  if (type == HitTestResult.UNKNOWN_TYPE || type == HitTestResult.SRC_ANCHOR_TYPE) {
    int contentX=viewToContent((int)mLastTouchX + mScrollX);
    int contentY=viewToContent((int)mLastTouchY + mScrollY);
    String text=nativeImageURI(contentX,contentY);
    if (text != null) {
      result.setType(type == HitTestResult.UNKNOWN_TYPE ? HitTestResult.IMAGE_TYPE : HitTestResult.SRC_IMAGE_ANCHOR_TYPE);
      result.setExtra(text);
    }
  }
  return result;
}
