{
  final File legacyImagesDir=new File(systemDir,IMAGES_DIRNAME);
  if (legacyImagesDir.exists()) {
    if (!FileUtils.deleteContents(legacyImagesDir) || !legacyImagesDir.delete()) {
      Slog.i(TAG,"Failure deleting legacy images directory: " + legacyImagesDir);
    }
  }
  final File legacyTasksDir=new File(systemDir,TASKS_DIRNAME);
  if (legacyTasksDir.exists()) {
    if (!FileUtils.deleteContents(legacyTasksDir) || !legacyTasksDir.delete()) {
      Slog.i(TAG,"Failure deleting legacy tasks directory: " + legacyTasksDir);
    }
  }
  mTaskIdsDir=new File(Environment.getDataDirectory(),"system_de");
  mStackSupervisor=stackSupervisor;
  mService=service;
  mRecentTasks=recentTasks;
  mLazyTaskWriterThread=new LazyTaskWriterThread("LazyTaskWriterThread");
}
