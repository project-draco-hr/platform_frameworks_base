{
  final ArraySet<ComponentName> validComponents=new ArraySet<>();
  final IPackageManager pm=AppGlobals.getPackageManager();
  for (int i=0; i < chain.size(); i++) {
    OtherDeviceTask task=chain.get(i);
    if (!task.mFile.exists()) {
      if (DEBUG_RESTORER)       Slog.d(TAG,"Can't add chain due to missing file=" + task.mFile);
      return false;
    }
    if (!isPackageInstalled(task.mComponentName.getPackageName())) {
      return false;
    }
    if (task.mLaunchPackages != null) {
      for (int j=task.mLaunchPackages.size() - 1; j >= 0; --j) {
        if (!isPackageInstalled(task.mLaunchPackages.valueAt(j))) {
          return false;
        }
      }
    }
    if (validComponents.contains(task.mComponentName)) {
      continue;
    }
    try {
      if (pm.getActivityInfo(task.mComponentName,0,UserHandle.USER_OWNER) == null) {
        return false;
      }
      validComponents.add(task.mComponentName);
    }
 catch (    RemoteException e) {
      return false;
    }
  }
  return true;
}
