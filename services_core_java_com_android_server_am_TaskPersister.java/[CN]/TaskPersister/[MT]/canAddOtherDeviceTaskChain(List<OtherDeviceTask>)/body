{
  ArraySet<ComponentName> componentsToCheck=new ArraySet<>();
  for (int i=0; i < chain.size(); i++) {
    OtherDeviceTask task=chain.get(i);
    if (!task.mFile.exists()) {
      if (DEBUG_RESTORER)       Slog.d(TAG,"Can't add chain due to missing file=" + task.mFile);
      return false;
    }
    componentsToCheck.add(task.mComponentName);
  }
  boolean canAdd=true;
  try {
    final IPackageManager pm=AppGlobals.getPackageManager();
    for (int i=0; canAdd && i < componentsToCheck.size(); i++) {
      ComponentName cn=componentsToCheck.valueAt(i);
      canAdd&=pm.getActivityInfo(cn,0,UserHandle.USER_OWNER) != null;
      if (DEBUG_RESTORER)       Slog.d(TAG,"ComponentName=" + cn + " installed="+ canAdd);
    }
  }
 catch (  RemoteException e) {
    canAdd=false;
  }
  if (DEBUG_RESTORER)   Slog.d(TAG,"canAdd=" + canAdd);
  return canAdd;
}
