{
  if (SystemClock.elapsedRealtime() - mLastTimeWritten.get() < WRITE_INTERVAL_MS && !PackageManagerService.DEBUG_DEXOPT) {
    return false;
  }
  if (mBackgroundWriteRunning.compareAndSet(false,true)) {
    new Thread(mBackgroundThreadName){
      @Override public void run(){
        try {
          writeImpl(data);
          mLastTimeWritten.set(SystemClock.elapsedRealtime());
        }
  finally {
          mBackgroundWriteRunning.set(false);
        }
      }
    }
.start();
    return true;
  }
  return false;
}
