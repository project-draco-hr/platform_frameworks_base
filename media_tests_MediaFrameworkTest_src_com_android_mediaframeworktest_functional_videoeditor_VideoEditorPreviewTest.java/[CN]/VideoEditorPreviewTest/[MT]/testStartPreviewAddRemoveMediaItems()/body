{
  final String videoItemFilename1=INPUT_FILE_PATH + "H263_profile0_176x144_15fps_256kbps_AACLC_32kHz_128kbps_s_0_26.3gp";
  final String imageItemFilename1=INPUT_FILE_PATH + "IMG_1600x1200.jpg";
  final String alphaFilename=INPUT_FILE_PATH + "TransitionSpiral_QVGA.jpg";
  boolean flagForException=false;
  final MediaVideoItem mediaVideoItem=mVideoEditorHelper.createMediaItem(mVideoEditor,"m1",videoItemFilename1,MediaItem.RENDERING_MODE_BLACK_BORDER);
  mediaVideoItem.setExtractBoundaries(0,15000);
  mVideoEditor.addMediaItem(mediaVideoItem);
  final MediaImageItem mediaImageItem=mVideoEditorHelper.createMediaItem(mVideoEditor,"m2",imageItemFilename1,15000,MediaItem.RENDERING_MODE_BLACK_BORDER);
  mVideoEditor.addMediaItem(mediaImageItem);
  final TransitionAlpha transition1And2=mVideoEditorHelper.createTAlpha("transition",mediaVideoItem,mediaImageItem,3000,Transition.BEHAVIOR_SPEED_UP,alphaFilename,10,false);
  mVideoEditor.addTransition(transition1And2);
  final EffectColor effectColor=mVideoEditorHelper.createEffectItem(mediaImageItem,"effect",5000,3000,EffectColor.TYPE_COLOR,EffectColor.PINK);
  mediaImageItem.addEffect(effectColor);
  assertEquals("removing Media item 1",mediaVideoItem,mVideoEditor.removeMediaItem(mediaVideoItem.getId()));
  assertEquals("removing Media item 2",mediaImageItem,mVideoEditor.removeMediaItem(mediaImageItem.getId()));
  try {
    mVideoEditor.generatePreview(new MediaProcessingProgressListener(){
      public void onProgress(      Object item,      int action,      int progress){
      }
    }
);
    final SurfaceHolder surfaceHolder=MediaFrameworkTest.mSurfaceView.getHolder();
    mVideoEditor.startPreview(surfaceHolder,0,-1,false,1,new PreviewProgressListener(){
      public void onProgress(      VideoEditor videoEditor,      long timeMs,      OverlayData overlayData){
      }
      public void onStart(      VideoEditor videoEditor){
        setPreviewStart();
      }
      public void onStop(      VideoEditor videoEditor){
        setPreviewStop();
      }
      public void onError(      VideoEditor videoEditor,      int error){
        setPreviewError();
      }
    }
);
  }
 catch (  IllegalArgumentException e) {
    flagForException=true;
  }
  assertTrue("Preview with removed Media Items",flagForException);
}
