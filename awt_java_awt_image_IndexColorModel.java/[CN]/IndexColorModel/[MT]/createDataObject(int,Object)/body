{
  if (pixel == null) {
switch (transferType) {
case DataBuffer.TYPE_BYTE:
      byte[] ba=new byte[1];
    ba[0]=(byte)colorMapIdx;
  pixel=ba;
break;
case DataBuffer.TYPE_USHORT:
short[] sa=new short[1];
sa[0]=(short)colorMapIdx;
pixel=sa;
break;
default :
throw new UnsupportedOperationException(Messages.getString("awt.267"));
}
}
 else if (pixel instanceof byte[] && transferType == DataBuffer.TYPE_BYTE) {
byte ba[]=(byte[])pixel;
ba[0]=(byte)colorMapIdx;
pixel=ba;
}
 else if (pixel instanceof short[] && transferType == DataBuffer.TYPE_USHORT) {
short[] sa=(short[])pixel;
sa[0]=(short)colorMapIdx;
pixel=sa;
}
 else if (pixel instanceof int[]) {
int ia[]=(int[])pixel;
ia[0]=colorMapIdx;
pixel=ia;
}
 else {
throw new ClassCastException(Messages.getString("awt.268"));
}
return pixel;
}
