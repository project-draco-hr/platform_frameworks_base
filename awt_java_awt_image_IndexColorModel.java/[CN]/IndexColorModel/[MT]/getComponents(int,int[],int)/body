{
  if (components == null) {
    components=new int[offset + numComponents];
  }
  components[offset + 0]=getRed(pixel);
  components[offset + 1]=getGreen(pixel);
  components[offset + 2]=getBlue(pixel);
  if (hasAlpha && (components.length - offset) > 3) {
    components[offset + 3]=getAlpha(pixel);
  }
  return components;
}
