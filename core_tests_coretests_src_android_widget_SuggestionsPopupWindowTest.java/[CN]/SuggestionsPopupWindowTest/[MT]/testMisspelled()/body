{
  final String text="abc def ghi";
  onView(withId(R.id.textview)).perform(click());
  onView(withId(R.id.textview)).perform(replaceText(text));
  final SuggestionSpan suggestionSpan=new SuggestionSpan(getActivity(),new String[]{"DEF","Def"},SuggestionSpan.FLAG_MISSPELLED);
  setSuggestionSpan(suggestionSpan,text.indexOf('d'),text.indexOf('f') + 1);
  showSuggestionsPopup();
  assertSuggestionsPopupIsDisplayed();
  assertSuggestionsPopupContainsItem("DEF");
  assertSuggestionsPopupContainsItem("Def");
  assertSuggestionsPopupContainsItem(getActivity().getString(com.android.internal.R.string.addToDictionary));
  assertSuggestionsPopupContainsItem(getActivity().getString(com.android.internal.R.string.delete));
  clickSuggestionsPopupItem(getActivity().getString(com.android.internal.R.string.addToDictionary));
}
