{
  mResources=resources;
  mMtpManager=mtpManager;
  mResolver=resolver;
  mDeviceToolkits=new HashMap<Integer,DeviceToolkit>();
  mDatabase=database;
  mRootScanner=new RootScanner(mResolver,mResources,mMtpManager,mDatabase);
  mAppFuse=new AppFuse(TAG,new AppFuseCallback());
  mIntentSender=intentSender;
  try {
    mAppFuse.mount(storageManager);
  }
 catch (  IOException e) {
    Log.e(TAG,"Failed to start app fuse.",e);
    return false;
  }
  resume();
  return true;
}
