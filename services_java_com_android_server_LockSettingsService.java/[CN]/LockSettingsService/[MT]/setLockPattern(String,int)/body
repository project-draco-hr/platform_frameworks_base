{
  checkWritePermission(userId);
  maybeUpdateKeystore(pattern,userId);
  final byte[] hash=LockPatternUtils.patternToHash(LockPatternUtils.stringToPattern(pattern));
  writeFile(getLockPatternFilename(userId),hash);
}
