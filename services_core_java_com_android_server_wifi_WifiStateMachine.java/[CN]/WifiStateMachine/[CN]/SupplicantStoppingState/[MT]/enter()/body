{
  handleNetworkDisconnect();
  if (mDhcpStateMachine != null) {
    mDhcpStateMachine.doQuit();
  }
  if (DBG)   log("stopping supplicant");
  mWifiMonitor.stopSupplicant();
  sendMessageDelayed(obtainMessage(CMD_STOP_SUPPLICANT_FAILED,++mSupplicantStopFailureToken,0),SUPPLICANT_RESTART_INTERVAL_MSECS);
  setWifiState(WIFI_STATE_DISABLING);
  mSupplicantStateTracker.sendMessage(CMD_RESET_SUPPLICANT_STATE);
}
