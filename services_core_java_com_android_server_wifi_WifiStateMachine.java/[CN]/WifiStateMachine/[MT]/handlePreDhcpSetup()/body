{
  mDhcpActive=true;
  if (!mBluetoothConnectionActive) {
    mWifiNative.setBluetoothCoexistenceMode(mWifiNative.BLUETOOTH_COEXISTENCE_MODE_DISABLED);
  }
  setSuspendOptimizationsNative(SUSPEND_DUE_TO_DHCP,false);
  mWifiNative.setPowerSave(false);
  stopBatchedScan();
  Message msg=new Message();
  msg.what=WifiP2pService.BLOCK_DISCOVERY;
  msg.arg1=WifiP2pService.ENABLED;
  msg.arg2=DhcpStateMachine.CMD_PRE_DHCP_ACTION_COMPLETE;
  msg.obj=mDhcpStateMachine;
  mWifiP2pChannel.sendMessage(msg);
}
