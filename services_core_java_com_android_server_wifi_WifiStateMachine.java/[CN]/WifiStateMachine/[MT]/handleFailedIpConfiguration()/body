{
  loge("IP configuration failed");
  mWifiInfo.setInetAddress(null);
  mWifiInfo.setMeteredHint(false);
  int maxRetries=getMaxDhcpRetries();
  if (maxRetries > 0 && ++mReconnectCount > maxRetries) {
    loge("Failed " + mReconnectCount + " times, Disabling "+ mLastNetworkId);
    mWifiConfigStore.disableNetwork(mLastNetworkId,WifiConfiguration.DISABLED_DHCP_FAILURE);
    mReconnectCount=0;
  }
  mWifiNative.disconnect();
  mWifiNative.reconnect();
}
