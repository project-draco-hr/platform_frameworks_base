{
  mLastSignalLevel=-1;
  mReconnectCount=0;
synchronized (mDhcpResultsLock) {
    mDhcpResults=dhcpResults;
  }
  LinkProperties linkProperties=dhcpResults.linkProperties;
  mWifiConfigStore.setLinkProperties(mLastNetworkId,new LinkProperties(linkProperties));
  InetAddress addr=null;
  Iterator<InetAddress> addrs=linkProperties.getAddresses().iterator();
  if (addrs.hasNext()) {
    addr=addrs.next();
  }
  mWifiInfo.setInetAddress(addr);
  mWifiInfo.setMeteredHint(dhcpResults.hasMeteredHint());
  updateLinkProperties();
}
