{
  if ((headsetState & headset) != (prevHeadsetState & headset)) {
    int device;
    int state;
    if ((headsetState & headset) != 0) {
      state=1;
    }
 else {
      state=0;
    }
    if (headset == BIT_HEADSET) {
      device=AudioManager.DEVICE_OUT_WIRED_HEADSET;
    }
 else     if (headset == BIT_HEADSET_NO_MIC) {
      device=AudioManager.DEVICE_OUT_WIRED_HEADPHONE;
    }
 else     if (headset == BIT_USB_HEADSET_ANLG) {
      device=AudioManager.DEVICE_OUT_ANLG_DOCK_HEADSET;
    }
 else     if (headset == BIT_USB_HEADSET_DGTL) {
      device=AudioManager.DEVICE_OUT_DGTL_DOCK_HEADSET;
    }
 else     if (headset == BIT_HDMI_AUDIO) {
      device=AudioManager.DEVICE_OUT_AUX_DIGITAL;
    }
 else {
      Slog.e(TAG,"setDeviceState() invalid headset type: " + headset);
      return;
    }
    if (LOG)     Slog.v(TAG,"device " + headsetName + ((state == 1) ? " connected" : " disconnected"));
    mAudioManager.setWiredDeviceConnectionState(device,state,headsetName);
  }
}
