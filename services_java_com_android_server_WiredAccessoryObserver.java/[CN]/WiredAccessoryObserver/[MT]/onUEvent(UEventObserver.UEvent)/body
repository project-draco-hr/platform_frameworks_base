{
  if (LOG)   Slog.v(TAG,"Headset UEVENT: " + event.toString());
  try {
    if ((event.get("SWITCH_NAME")).equals("usb_audio")) {
      if (Integer.parseInt(event.get("SWITCH_STATE")) == 1) {
        switchState=((mHeadsetState & (BIT_HEADSET | BIT_HEADSET_NO_MIC | BIT_USB_HEADSET_DGTL)) | (Integer.parseInt(event.get("SWITCH_STATE")) << 2));
      }
 else       if (Integer.parseInt(event.get("SWITCH_STATE")) == 2) {
        switchState=((mHeadsetState & (BIT_HEADSET | BIT_HEADSET_NO_MIC | BIT_USB_HEADSET_ANLG)) | (Integer.parseInt(event.get("SWITCH_STATE")) << 3));
      }
 else       switchState=(mHeadsetState & (BIT_HEADSET | BIT_HEADSET_NO_MIC));
    }
 else {
      switchState=((mHeadsetState & (BIT_USB_HEADSET_ANLG | BIT_USB_HEADSET_DGTL)) | (Integer.parseInt(event.get("SWITCH_STATE"))));
    }
    update(event.get("SWITCH_NAME"),switchState);
  }
 catch (  NumberFormatException e) {
    Slog.e(TAG,"Could not parse switch state from event " + event);
  }
}
