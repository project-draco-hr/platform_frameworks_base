{
synchronized (mLock) {
    char[] buffer=new char[1024];
    mPrevHeadsetState=mHeadsetState;
    if (LOG)     Slog.v(TAG,"init()");
    for (int i=0; i < mUEventInfo.size(); ++i) {
      UEventInfo uei=mUEventInfo.get(i);
      try {
        int curState;
        FileReader file=new FileReader(uei.getSwitchStatePath());
        int len=file.read(buffer,0,1024);
        file.close();
        curState=Integer.valueOf((new String(buffer,0,len)).trim());
        if (curState > 0) {
          updateStateLocked(uei.getDevPath(),uei.getDevName(),curState);
        }
      }
 catch (      FileNotFoundException e) {
        Slog.w(TAG,uei.getSwitchStatePath() + " not found while attempting to determine initial switch state");
      }
catch (      Exception e) {
        Slog.e(TAG,"",e);
      }
    }
  }
  for (int i=0; i < mUEventInfo.size(); ++i) {
    UEventInfo uei=mUEventInfo.get(i);
    startObserving("DEVPATH=" + uei.getDevPath());
  }
}
