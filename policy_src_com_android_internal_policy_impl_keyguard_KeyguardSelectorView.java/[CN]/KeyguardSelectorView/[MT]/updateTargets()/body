{
  int currentUserHandle=mLockPatternUtils.getCurrentUser();
  boolean disabledByAdmin=mLockPatternUtils.getDevicePolicyManager().getCameraDisabled(null,currentUserHandle);
  final KeyguardUpdateMonitor monitor=KeyguardUpdateMonitor.getInstance(getContext());
  boolean disabledBySimState=monitor.isSimLocked();
  boolean cameraTargetPresent=isTargetPresent(com.android.internal.R.drawable.ic_lockscreen_camera);
  boolean searchTargetPresent=isTargetPresent(com.android.internal.R.drawable.ic_action_assist_generic);
  if (disabledByAdmin) {
    Log.v(TAG,"Camera disabled by Device Policy");
  }
 else   if (disabledBySimState) {
    Log.v(TAG,"Camera disabled by Sim State");
  }
  boolean searchActionAvailable=((SearchManager)mContext.getSystemService(Context.SEARCH_SERVICE)).getAssistIntent(mContext,UserHandle.USER_CURRENT) != null;
  mCameraDisabled=disabledByAdmin || disabledBySimState || !cameraTargetPresent;
  mSearchDisabled=disabledBySimState || !searchActionAvailable || !searchTargetPresent;
  updateResources();
}
