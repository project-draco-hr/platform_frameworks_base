{
  final int widthMode=MeasureSpec.getMode(widthMeasureSpec);
  setFillViewport(widthMode == MeasureSpec.EXACTLY);
  final int childCount=getChildCount();
  if (childCount > 1 && (widthMode == MeasureSpec.EXACTLY || widthMode == MeasureSpec.AT_MOST)) {
    if (childCount > 2) {
      mMaxTabWidth=(int)(MeasureSpec.getSize(widthMeasureSpec) * 0.4f);
    }
 else {
      mMaxTabWidth=MeasureSpec.getSize(widthMeasureSpec) / 2;
    }
  }
 else {
    mMaxTabWidth=-1;
  }
  super.onMeasure(widthMeasureSpec,heightMeasureSpec);
}
