{
  super(context,attrs);
  if (DEBUG)   Log.e(TAG,"KeyguardHostView()");
  mLockPatternUtils=new LockPatternUtils(context);
  mUserId=mLockPatternUtils.getCurrentUser();
  DevicePolicyManager dpm=(DevicePolicyManager)mContext.getSystemService(Context.DEVICE_POLICY_SERVICE);
  if (dpm != null) {
    mDisabledFeatures=getDisabledFeatures(dpm);
    mCameraDisabled=dpm.getCameraDisabled(null);
  }
  mSafeModeEnabled=LockPatternUtils.isSafeModeEnabled();
  Context userContext=null;
  try {
    final String packageName="system";
    userContext=mContext.createPackageContextAsUser(packageName,0,new UserHandle(mUserId));
  }
 catch (  NameNotFoundException e) {
    e.printStackTrace();
    userContext=context;
  }
  mAppWidgetHost=new AppWidgetHost(userContext,APPWIDGET_HOST_ID,mOnClickHandler,Looper.myLooper());
  cleanupAppWidgetIds();
  mAppWidgetManager=AppWidgetManager.getInstance(userContext);
  mSecurityModel=new KeyguardSecurityModel(context);
  mViewStateManager=new KeyguardViewStateManager(this);
  mUserSetupCompleted=Settings.Secure.getIntForUser(mContext.getContentResolver(),Settings.Secure.USER_SETUP_COMPLETE,0,UserHandle.USER_CURRENT) != 0;
  getInitialTransportState();
  if (mSafeModeEnabled) {
    Log.v(TAG,"Keyguard widgets disabled by safe mode");
  }
  if ((mDisabledFeatures & DevicePolicyManager.KEYGUARD_DISABLE_WIDGETS_ALL) != 0) {
    Log.v(TAG,"Keyguard widgets disabled by DPM");
  }
  if ((mDisabledFeatures & DevicePolicyManager.KEYGUARD_DISABLE_SECURE_CAMERA) != 0) {
    Log.v(TAG,"Keyguard secure camera disabled by DPM");
  }
}
