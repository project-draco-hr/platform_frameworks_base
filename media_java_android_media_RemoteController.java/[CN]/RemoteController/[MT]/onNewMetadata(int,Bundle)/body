{
synchronized (mGenLock) {
    if (mClientGenerationIdCurrent != genId) {
      return;
    }
  }
  final OnClientUpdateListener l;
  final MetadataEditor metadataEditor;
  final long editableKeys=metadata.getLong(String.valueOf(MediaMetadataEditor.KEY_EDITABLE_MASK),0);
  if (editableKeys != 0) {
    metadata.remove(String.valueOf(MediaMetadataEditor.KEY_EDITABLE_MASK));
  }
synchronized (mInfoLock) {
    l=mOnClientUpdateListener;
    if ((mMetadataEditor != null) && (mMetadataEditor.mEditorMetadata != null)) {
      if (mMetadataEditor.mEditorMetadata != metadata) {
        mMetadataEditor.mEditorMetadata.putAll(metadata);
      }
    }
 else {
      mMetadataEditor=new MetadataEditor(metadata,editableKeys);
    }
    metadataEditor=mMetadataEditor;
  }
  if (l != null) {
    l.onClientMetadataUpdate(metadataEditor);
  }
}
