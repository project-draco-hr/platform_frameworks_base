{
  if (!MediaFocusControl.isMediaKeyCode(keyEvent.getKeyCode())) {
    Log.e(TAG,"Cannot use sendMediaKeyEvent() for a non-media key event");
    return ERROR_BAD_VALUE;
  }
  boolean registered=false;
  final PendingIntent pi;
synchronized (mInfoLock) {
    registered=mIsRegistered;
    pi=mClientPendingIntentCurrent;
  }
  if (registered) {
    if (pi != null) {
      Intent intent=new Intent(Intent.ACTION_MEDIA_BUTTON);
      intent.putExtra(Intent.EXTRA_KEY_EVENT,keyEvent);
      try {
        pi.send(mContext,0,intent);
      }
 catch (      CanceledException e) {
        Log.e(TAG,"Error sending intent for media button down: ",e);
        return ERROR;
      }
    }
 else {
      Log.i(TAG,"No-op when sending key click, no receiver right now");
      return ERROR;
    }
  }
 else {
    mAudioManager.dispatchMediaKeyEvent(keyEvent);
  }
  return SUCCESS;
}
