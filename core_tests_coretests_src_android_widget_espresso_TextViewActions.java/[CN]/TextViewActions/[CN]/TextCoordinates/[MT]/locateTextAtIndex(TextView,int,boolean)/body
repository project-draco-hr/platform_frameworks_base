{
  if (index < 0 || index > textView.getText().length()) {
    throw new StringIndexOutOfBoundsException(index);
  }
  final Layout layout=textView.getLayout();
  final int line=layout.getLineForOffset(index);
  return convertToScreenCoordinates(textView,(primary ? layout.getPrimaryHorizontal(index) : layout.getSecondaryHorizontal(index)),layout.getLineTop(line));
}
