{
  final int currentOffset=mHandleType == Handle.SELECTION_START ? mTextView.getSelectionStart() : mTextView.getSelectionEnd();
  final Layout layout=mTextView.getLayout();
  final int currentLine=layout.getLineForOffset(currentOffset);
  final int targetLine=layout.getLineForOffset(mIndex);
  final float[] currentCoordinates=(new TextCoordinates(currentOffset)).calculateCoordinates(mTextView);
  final float[] targetCoordinates=(new TextCoordinates(mIndex)).calculateCoordinates(mTextView);
  final Rect bounds=new Rect();
  view.getBoundsOnScreen(bounds);
  final float diffX=bounds.centerX() - currentCoordinates[0];
  final float verticalOffset=bounds.height() * 0.7f;
  float diffY=bounds.top + verticalOffset - currentCoordinates[1];
  if (currentLine > targetLine) {
    diffY-=mTextView.getLineHeight() * LINE_SLOP_MULTIPLIER;
  }
 else   if (currentLine < targetLine) {
    diffY+=mTextView.getLineHeight() * LINE_SLOP_MULTIPLIER;
  }
  return new float[]{targetCoordinates[0] + diffX,targetCoordinates[1] + diffY};
}
