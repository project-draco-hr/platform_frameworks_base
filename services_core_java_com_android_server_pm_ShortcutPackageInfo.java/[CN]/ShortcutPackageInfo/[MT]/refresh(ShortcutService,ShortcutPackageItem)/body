{
  if (mIsShadow) {
    s.wtf("Attempted to refresh package info for shadow package " + pkg.getPackageName() + ", user="+ pkg.getOwnerUserId());
    return;
  }
  final PackageInfo pi=s.getPackageInfoWithSignatures(pkg.getPackageName(),pkg.getPackageUserId());
  if (pi == null) {
    Slog.w(TAG,"Package not found: " + pkg.getPackageName());
    return;
  }
  mVersionCode=pi.versionCode;
  mSigHashes=BackupUtils.hashSignatureArray(pi.signatures);
}
