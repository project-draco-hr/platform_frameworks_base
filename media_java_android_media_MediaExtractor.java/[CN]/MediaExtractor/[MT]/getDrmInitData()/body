{
  Map<String,Object> formatMap=getFileFormatNative();
  if (formatMap == null) {
    return null;
  }
  if (formatMap.containsKey("pssh")) {
    Map<UUID,byte[]> psshMap=getPsshInfo();
    final Map<UUID,DrmInitData.SchemeInitData> initDataMap=new HashMap<UUID,DrmInitData.SchemeInitData>();
    for (    Map.Entry<UUID,byte[]> e : psshMap.entrySet()) {
      UUID uuid=e.getKey();
      byte[] data=e.getValue();
      initDataMap.put(uuid,new DrmInitData.SchemeInitData("cenc",data));
    }
    return new DrmInitData(){
      public SchemeInitData get(      UUID schemeUuid){
        return initDataMap.get(schemeUuid);
      }
    }
;
  }
 else {
    int numTracks=getTrackCount();
    for (int i=0; i < numTracks; ++i) {
      Map<String,Object> trackFormatMap=getTrackFormatNative(i);
      if (!trackFormatMap.containsKey("crypto-key")) {
        continue;
      }
      ByteBuffer buf=(ByteBuffer)trackFormatMap.get("crypto-key");
      buf.rewind();
      final byte[] data=new byte[buf.remaining()];
      buf.get(data);
      return new DrmInitData(){
        public SchemeInitData get(        UUID schemeUuid){
          return new DrmInitData.SchemeInitData("webm",data);
        }
      }
;
    }
  }
  return null;
}
