{
  if (pm == null) {
    throw new IllegalArgumentException("pm must not be null");
  }
  if (mKeyCharacterMap == null) {
    KeyboardLayoutDescriptor d=parseKeyboardLayoutDescriptor(mDescriptor);
    if (d == null) {
      Log.e(TAG,"Could not load key character map '" + mDescriptor + "' because the descriptor could not be parsed.");
      return null;
    }
    CharSequence cs=pm.getText(d.packageName,mKeyCharacterMapResId,null);
    if (cs == null) {
      Log.e(TAG,"Could not load key character map '" + mDescriptor + "' because its associated resource could not be loaded.");
      return null;
    }
    try {
      mKeyCharacterMap=KeyCharacterMap.load(cs);
    }
 catch (    UnavailableException ex) {
      Log.e(TAG,"Could not load key character map '" + mDescriptor + "' due to an error while parsing.",ex);
      return null;
    }
  }
  return mKeyCharacterMap;
}
