{
  if (mInputDevicesChangedListener == null) {
    final InputDevicesChangedListener listener=new InputDevicesChangedListener();
    try {
      mIm.registerInputDevicesChangedListener(listener);
    }
 catch (    RemoteException ex) {
      throw new RuntimeException("Could not get register input device changed listener",ex);
    }
    mInputDevicesChangedListener=listener;
  }
  if (mInputDevices == null) {
    final int[] ids;
    try {
      ids=mIm.getInputDeviceIds();
    }
 catch (    RemoteException ex) {
      throw new RuntimeException("Could not get input device ids.",ex);
    }
    mInputDevices=new SparseArray<InputDevice>();
    for (int i=0; i < ids.length; i++) {
      mInputDevices.put(ids[i],null);
    }
  }
}
