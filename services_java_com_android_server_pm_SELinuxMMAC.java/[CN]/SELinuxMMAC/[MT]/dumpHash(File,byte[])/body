{
  FileOutputStream fos=null;
  File tmp=null;
  try {
    tmp=File.createTempFile("seapp_hash",".journal",file.getParentFile());
    tmp.setReadable(true);
    fos=new FileOutputStream(tmp);
    fos.write(content);
    fos.getFD().sync();
    if (!tmp.renameTo(file)) {
      throw new IOException("Failure renaming " + file.getCanonicalPath());
    }
  }
  finally {
    if (tmp != null) {
      tmp.delete();
    }
    IoUtils.closeQuietly(fos);
  }
}
