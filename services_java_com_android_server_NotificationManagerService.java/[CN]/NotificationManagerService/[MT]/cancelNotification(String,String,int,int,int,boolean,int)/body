{
  EventLog.writeEvent(EventLogTags.NOTIFICATION_CANCEL,pkg,id,tag,userId,mustHaveFlags,mustNotHaveFlags);
synchronized (mNotificationList) {
    int index=indexOfNotificationLocked(pkg,tag,id,userId);
    if (index >= 0) {
      NotificationRecord r=mNotificationList.get(index);
      if ((r.notification.flags & mustHaveFlags) != mustHaveFlags) {
        return;
      }
      if ((r.notification.flags & mustNotHaveFlags) != 0) {
        return;
      }
      mNotificationList.remove(index);
      cancelNotificationLocked(r,sendDelete);
      updateLightsLocked();
    }
  }
}
