{
  if (mAdbEnabled && mBatteryPlugged == BatteryManager.BATTERY_PLUGGED_USB) {
    if (!mAdbNotificationShown) {
      NotificationManager notificationManager=(NotificationManager)mContext.getSystemService(Context.NOTIFICATION_SERVICE);
      if (notificationManager != null) {
        Resources r=mContext.getResources();
        CharSequence title=r.getText(com.android.internal.R.string.adb_active_notification_title);
        CharSequence message=r.getText(com.android.internal.R.string.adb_active_notification_message);
        if (mAdbNotification == null) {
          mAdbNotification=new Notification();
          mAdbNotification.icon=com.android.internal.R.drawable.stat_sys_warning;
          mAdbNotification.when=0;
          mAdbNotification.flags=Notification.FLAG_ONGOING_EVENT;
          mAdbNotification.tickerText=title;
          mAdbNotification.defaults|=Notification.DEFAULT_SOUND;
        }
        Intent intent=new Intent(Settings.ACTION_APPLICATION_DEVELOPMENT_SETTINGS);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
        intent.setComponent(new ComponentName("com.android.settings","com.android.settings.DevelopmentSettings"));
        PendingIntent pi=PendingIntent.getActivity(mContext,0,intent,0);
        mAdbNotification.setLatestEventInfo(mContext,title,message,pi);
        mAdbNotificationShown=true;
        notificationManager.notify(com.android.internal.R.string.adb_active_notification_title,mAdbNotification);
      }
    }
  }
 else   if (mAdbNotificationShown) {
    NotificationManager notificationManager=(NotificationManager)mContext.getSystemService(Context.NOTIFICATION_SERVICE);
    if (notificationManager != null) {
      mAdbNotificationShown=false;
      notificationManager.cancel(com.android.internal.R.string.adb_active_notification_title);
    }
  }
}
