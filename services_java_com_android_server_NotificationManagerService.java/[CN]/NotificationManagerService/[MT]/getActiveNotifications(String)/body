{
  mContext.enforceCallingOrSelfPermission(android.Manifest.permission.ACCESS_NOTIFICATIONS,"NotificationManagerService");
  StatusBarNotification[] tmp=null;
  int userId=UserHandle.getCallingUserId();
  int uid=Binder.getCallingUid();
  if (mAppOps.noteOpNoThrow(AppOpsManager.OP_ACCESS_NOTIFICATIONS,uid,callingPkg) == AppOpsManager.MODE_ALLOWED) {
synchronized (mNotificationList) {
      tmp=new StatusBarNotification[mNotificationList.size()];
      final int N=mNotificationList.size();
      for (int i=0; i < N; i++) {
        tmp[i]=mNotificationList.get(i).sbn;
      }
    }
  }
  return tmp;
}
