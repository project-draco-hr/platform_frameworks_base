{
synchronized (mBlockedPackages) {
    FileOutputStream outfile=null;
    try {
      outfile=mPolicyFile.startWrite();
      XmlSerializer out=new FastXmlSerializer();
      out.setOutput(outfile,"utf-8");
      out.startDocument(null,true);
      out.startTag(null,TAG_BODY);
{
        out.attribute(null,ATTR_VERSION,String.valueOf(DB_VERSION));
        out.startTag(null,TAG_BLOCKED_PKGS);
{
          for (          String pkg : mBlockedPackages) {
            out.startTag(null,TAG_PACKAGE);
{
              out.attribute(null,ATTR_NAME,pkg);
            }
            out.endTag(null,TAG_PACKAGE);
          }
        }
        out.endTag(null,TAG_BLOCKED_PKGS);
      }
      out.endTag(null,TAG_BODY);
      out.endDocument();
      mPolicyFile.finishWrite(outfile);
    }
 catch (    IOException e) {
      if (outfile != null) {
        mPolicyFile.failWrite(outfile);
      }
    }
  }
}
