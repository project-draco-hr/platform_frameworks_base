{
  EventLog.writeEvent(EVENT_LOG_CANCEL_ALL,pkg,mustHaveFlags);
synchronized (mNotificationList) {
    final int N=mNotificationList.size();
    boolean canceledSomething=false;
    for (int i=N - 1; i >= 0; --i) {
      NotificationRecord r=mNotificationList.get(i);
      if ((r.notification.flags & mustHaveFlags) != mustHaveFlags) {
        continue;
      }
      if ((r.notification.flags & mustNotHaveFlags) != 0) {
        continue;
      }
      if (!r.pkg.equals(pkg)) {
        continue;
      }
      mNotificationList.remove(i);
      cancelNotificationLocked(r);
      canceledSomething=true;
    }
    if (canceledSomething) {
      updateLightsLocked();
    }
  }
}
