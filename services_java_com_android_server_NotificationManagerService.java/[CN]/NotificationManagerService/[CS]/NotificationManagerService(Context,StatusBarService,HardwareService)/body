{
  super();
  mContext=context;
  mHardware=hardware;
  mAm=ActivityManagerNative.getDefault();
  mSound=new AsyncPlayer(TAG);
  mSound.setUsesWakeLock(context);
  mToastQueue=new ArrayList<ToastRecord>();
  mNotificationList=new ArrayList<NotificationRecord>();
  mHandler=new WorkerHandler();
  mStatusBarService=statusBar;
  statusBar.setNotificationCallbacks(mNotificationCallbacks);
  if (0 != Settings.Secure.getInt(mContext.getContentResolver(),Settings.Secure.DEVICE_PROVISIONED,0)) {
    mDisabledNotifications=AudioManager.STREAM_NOTIFICATION;
  }
  IntentFilter filter=new IntentFilter();
  filter.addAction(Intent.ACTION_BATTERY_CHANGED);
  filter.addAction(Intent.ACTION_PACKAGE_REMOVED);
  filter.addAction(Intent.ACTION_PACKAGE_RESTARTED);
  mContext.registerReceiver(mIntentReceiver,filter);
  mSettingsObserver=new SettingsObserver(mHandler);
  mSettingsObserver.observe();
}
