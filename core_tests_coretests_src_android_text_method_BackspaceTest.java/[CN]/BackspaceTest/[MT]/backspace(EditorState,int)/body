{
  mActivity.runOnUiThread(new Runnable(){
    public void run(){
      mTextView.setText(state.mText,BufferType.EDITABLE);
      mTextView.setKeyListener(mKeyListener);
      mTextView.setSelection(state.mSelectionStart,state.mSelectionEnd);
    }
  }
);
  mInstrumentation.waitForIdleSync();
  assertTrue(mTextView.hasWindowFocus());
  final KeyEvent keyEvent=getKey(KeyEvent.KEYCODE_DEL,modifiers);
  mActivity.runOnUiThread(new Runnable(){
    public void run(){
      mTextView.onKeyDown(keyEvent.getKeyCode(),keyEvent);
    }
  }
);
  mInstrumentation.waitForIdleSync();
  state.mText=mTextView.getText();
  state.mSelectionStart=mTextView.getSelectionStart();
  state.mSelectionEnd=mTextView.getSelectionEnd();
}
