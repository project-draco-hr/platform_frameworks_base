{
  if (triggerAtMillis < 0) {
    triggerAtMillis=0;
  }
  ListenerWrapper recipientWrapper=null;
  if (listener != null) {
synchronized (AlarmManager.class) {
      if (sWrappers == null) {
        sWrappers=new WeakHashMap<OnAlarmListener,WeakReference<ListenerWrapper>>();
      }
      WeakReference<ListenerWrapper> wrapperRef=sWrappers.get(listener);
      if (wrapperRef == null || (recipientWrapper=wrapperRef.get()) == null) {
        recipientWrapper=new ListenerWrapper(listener);
        wrapperRef=new WeakReference<ListenerWrapper>(recipientWrapper);
        sWrappers.put(listener,wrapperRef);
      }
    }
    final Handler handler=(targetHandler != null) ? targetHandler : mMainThreadHandler;
    recipientWrapper.setHandler(handler);
  }
  try {
    mService.set(mPackageName,type,triggerAtMillis,windowMillis,intervalMillis,flags,operation,recipientWrapper,listenerTag,workSource,alarmClock);
  }
 catch (  RemoteException ex) {
    throw ex.rethrowFromSystemServer();
  }
}
