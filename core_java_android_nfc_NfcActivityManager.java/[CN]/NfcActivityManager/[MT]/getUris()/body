{
  Uri[] uris;
  NfcAdapter.CreateBeamUrisCallback callback;
synchronized (NfcActivityManager.this) {
    NfcActivityState state=findResumedActivityState();
    if (state == null)     return null;
    uris=state.uris;
    callback=state.uriCallback;
  }
  if (callback != null) {
    uris=callback.createBeamUris(mDefaultEvent);
    if (uris != null) {
      for (      Uri uri : uris) {
        if (uri == null) {
          Log.e(TAG,"Uri not allowed to be null.");
          return null;
        }
        String scheme=uri.getScheme();
        if (scheme == null || (!scheme.equalsIgnoreCase("file") && !scheme.equalsIgnoreCase("content"))) {
          Log.e(TAG,"Uri needs to have " + "either scheme file or scheme content");
          return null;
        }
      }
    }
    return uris;
  }
 else {
    return uris;
  }
}
