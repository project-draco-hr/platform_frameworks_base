{
  boolean serviceCallbackNeeded=state.ndefMessageCallback != null || state.onNdefPushCompleteCallback != null;
  try {
    NfcAdapter.sService.setForegroundNdefPush(state.resumed ? state.ndefMessage : null,state.resumed && serviceCallbackNeeded ? this : null);
  }
 catch (  RemoteException e) {
    mAdapter.attemptDeadServiceRecovery(e);
  }
}
