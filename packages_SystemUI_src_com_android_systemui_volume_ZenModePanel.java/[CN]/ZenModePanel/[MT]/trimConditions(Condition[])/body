{
  if (conditions == null || conditions.length <= mMaxOptionalConditions) {
    return conditions;
  }
  int found=-1;
  for (int i=0; i < conditions.length; i++) {
    final Condition c=conditions[i];
    if (mSessionExitCondition != null && sameConditionId(mSessionExitCondition,c)) {
      found=i;
      break;
    }
  }
  final Condition[] rt=Arrays.copyOf(conditions,mMaxOptionalConditions);
  if (found >= mMaxOptionalConditions) {
    rt[mMaxOptionalConditions - 1]=conditions[found];
  }
  return rt;
}
