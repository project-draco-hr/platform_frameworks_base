{
  mController=controller;
  mCountdownConditionSupported=mController.isCountdownConditionSupported();
  final int countdownDelta=mCountdownConditionSupported ? 2 : 0;
  final int minConditions=1 + countdownDelta;
  for (int i=0; i < minConditions; i++) {
    mZenConditions.addView(mInflater.inflate(R.layout.zen_mode_condition,this,false));
  }
  mSessionZen=getSelectedZen(-1);
  handleUpdateManualRule(mController.getManualRule());
  if (DEBUG)   Log.d(mTag,"init mExitCondition=" + mExitCondition);
  hideAllConditions();
  mController.addCallback(mZenCallback);
}
