{
  super(context,0);
  final List<RootItem> libraries=new ArrayList<>();
  final List<RootItem> clouds=new ArrayList<>();
  final List<RootItem> locals=new ArrayList<>();
  for (  RootInfo root : roots) {
    RootItem item=new RootItem(root);
switch (root.derivedType) {
case RootInfo.TYPE_LOCAL:
      locals.add(item);
    break;
case RootInfo.TYPE_CLOUD:
  clouds.add(item);
break;
default :
libraries.add(item);
break;
}
}
final RootComparator comp=new RootComparator();
Collections.sort(libraries,comp);
Collections.sort(locals,comp);
Collections.sort(clouds,comp);
addAll(libraries);
add(new SpacerItem());
addAll(locals);
addAll(clouds);
if (includeApps != null) {
final PackageManager pm=context.getPackageManager();
final List<ResolveInfo> infos=pm.queryIntentActivities(includeApps,PackageManager.MATCH_DEFAULT_ONLY);
final List<AppItem> apps=new ArrayList<>();
for (ResolveInfo info : infos) {
if (!context.getPackageName().equals(info.activityInfo.packageName)) {
apps.add(new AppItem(info));
}
}
if (apps.size() > 0) {
add(new SpacerItem());
addAll(apps);
}
}
}
