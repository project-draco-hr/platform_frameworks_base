{
  super(context,0);
  final List<RootItem> libraries=new ArrayList<>();
  final List<RootItem> others=new ArrayList<>();
  for (  final RootInfo root : roots) {
    final RootItem item=new RootItem(root);
    if (root.isLibrary()) {
      if (DEBUG)       Log.d(TAG,"Adding " + root + " as library.");
      libraries.add(item);
    }
 else {
      if (DEBUG)       Log.d(TAG,"Adding " + root + " as non-library.");
      others.add(item);
    }
  }
  final RootComparator comp=new RootComparator();
  Collections.sort(libraries,comp);
  Collections.sort(others,comp);
  addAll(libraries);
  add(new SpacerItem());
  addAll(others);
  if (includeApps != null) {
    final PackageManager pm=context.getPackageManager();
    final List<ResolveInfo> infos=pm.queryIntentActivities(includeApps,PackageManager.MATCH_DEFAULT_ONLY);
    final List<AppItem> apps=new ArrayList<>();
    for (    ResolveInfo info : infos) {
      if (!context.getPackageName().equals(info.activityInfo.packageName)) {
        apps.add(new AppItem(info));
      }
    }
    if (apps.size() > 0) {
      add(new SpacerItem());
      addAll(apps);
    }
  }
}
