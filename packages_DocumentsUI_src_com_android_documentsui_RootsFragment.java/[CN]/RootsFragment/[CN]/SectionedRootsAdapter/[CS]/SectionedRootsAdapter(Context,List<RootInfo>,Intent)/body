{
  mServices=new RootsAdapter(context,R.string.root_type_service);
  mShortcuts=new RootsAdapter(context,R.string.root_type_shortcut);
  mDevices=new RootsAdapter(context,R.string.root_type_device);
  mDevicesAdvanced=new RootsAdapter(context,R.string.root_type_device);
  mApps=new AppsAdapter(context);
  for (  RootInfo root : roots) {
    Log.d(TAG,"Found rootType=" + root.rootType);
switch (root.rootType) {
case Root.ROOT_TYPE_SERVICE:
      mServices.add(root);
    break;
case Root.ROOT_TYPE_SHORTCUT:
  mShortcuts.add(root);
break;
case Root.ROOT_TYPE_DEVICE:
mDevicesAdvanced.add(root);
if ((root.flags & Root.FLAG_ADVANCED) == 0) {
mDevices.add(root);
}
break;
}
}
if (includeApps != null) {
final PackageManager pm=context.getPackageManager();
final List<ResolveInfo> infos=pm.queryIntentActivities(includeApps,PackageManager.MATCH_DEFAULT_ONLY);
for (ResolveInfo info : infos) {
if (!context.getPackageName().equals(info.activityInfo.packageName)) {
mApps.add(info);
}
}
}
final RootComparator comp=new RootComparator();
mServices.sort(comp);
mShortcuts.sort(comp);
mDevices.sort(comp);
mDevicesAdvanced.sort(comp);
}
