{
  mServices=new RootsAdapter(context,R.string.root_type_service);
  mShortcuts=new RootsAdapter(context,R.string.root_type_shortcut);
  mDevices=new RootsAdapter(context,R.string.root_type_device);
  mApps=new AppsAdapter(context);
  for (  RootInfo root : roots) {
switch (root.rootType) {
case Root.ROOT_TYPE_SERVICE:
      mServices.add(root);
    break;
case Root.ROOT_TYPE_SHORTCUT:
  mShortcuts.add(root);
break;
case Root.ROOT_TYPE_DEVICE:
mDevices.add(root);
break;
}
}
if (includeApps != null) {
final PackageManager pm=context.getPackageManager();
final List<ResolveInfo> infos=pm.queryIntentActivities(includeApps,PackageManager.MATCH_DEFAULT_ONLY);
for (ResolveInfo info : infos) {
if (!context.getPackageName().equals(info.activityInfo.packageName)) {
mApps.add(info);
}
}
}
final RootComparator comp=new RootComparator();
mServices.sort(comp);
mShortcuts.sort(comp);
mDevices.sort(comp);
if (mServices.getCount() > 0) {
addSection(mServices);
}
if (mShortcuts.getCount() > 0) {
addSection(mShortcuts);
}
if (mDevices.getCount() > 0) {
addSection(mDevices);
}
if (mApps.getCount() > 0) {
addSection(mApps);
}
}
