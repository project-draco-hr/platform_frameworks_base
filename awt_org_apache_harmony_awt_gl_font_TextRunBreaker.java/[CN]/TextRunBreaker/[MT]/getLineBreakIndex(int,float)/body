{
  int breakIndex;
  TextRunSegment s=null;
  for (int segmentIndex=logical2segment[start]; segmentIndex < runSegments.size(); segmentIndex++) {
    s=runSegments.get(segmentIndex);
    breakIndex=s.getCharIndexFromAdvance(maxAdvance,start);
    if (breakIndex < s.getEnd()) {
      return breakIndex;
    }
    maxAdvance-=s.getAdvanceDelta(start,s.getEnd());
    start=s.getEnd();
  }
  return s.getEnd();
}
