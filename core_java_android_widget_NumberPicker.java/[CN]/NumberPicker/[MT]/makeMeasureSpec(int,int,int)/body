{
  final int size=MeasureSpec.getSize(measureSpec);
  if (size < minValue) {
    throw new IllegalArgumentException("Available space is less than min size: " + size + " < "+ minValue);
  }
  final int mode=MeasureSpec.getMode(measureSpec);
switch (mode) {
case MeasureSpec.EXACTLY:
    return measureSpec;
case MeasureSpec.AT_MOST:
  return MeasureSpec.makeMeasureSpec(Math.min(size,maxValue),MeasureSpec.EXACTLY);
case MeasureSpec.UNSPECIFIED:
return MeasureSpec.makeMeasureSpec(maxValue,MeasureSpec.EXACTLY);
default :
throw new IllegalArgumentException("Unknown measure mode: " + mode);
}
}
