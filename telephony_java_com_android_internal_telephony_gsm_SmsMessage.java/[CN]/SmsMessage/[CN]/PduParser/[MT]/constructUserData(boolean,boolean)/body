{
  int offset=cur;
  int userDataLength=pdu[offset++] & 0xff;
  int headerSeptets=0;
  if (hasUserDataHeader) {
    int userDataHeaderLength=pdu[offset++] & 0xff;
    byte[] udh=new byte[userDataHeaderLength];
    System.arraycopy(pdu,offset,udh,0,userDataHeaderLength);
    userDataHeader=SmsHeader.fromByteArray(udh);
    offset+=userDataHeaderLength;
    int headerBits=(userDataHeaderLength + 1) * 8;
    headerSeptets=headerBits / 7;
    headerSeptets+=(headerBits % 7) > 0 ? 1 : 0;
    mUserDataSeptetPadding=(headerSeptets * 7) - headerBits;
  }
  userData=new byte[pdu.length - offset];
  System.arraycopy(pdu,offset,userData,0,userData.length);
  cur=offset;
  if (dataInSeptets) {
    return userDataLength - headerSeptets;
  }
 else {
    return userData.length;
  }
}
