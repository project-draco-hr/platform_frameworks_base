{
  SmsHeader.PortAddrs portAddrs=new SmsHeader.PortAddrs();
  portAddrs.destPort=destinationPort;
  portAddrs.origPort=0;
  portAddrs.areEightBits=false;
  SmsHeader smsHeader=new SmsHeader();
  smsHeader.portAddrs=portAddrs;
  byte[] smsHeaderData=SmsHeader.toByteArray(smsHeader);
  if ((data.length + smsHeaderData.length + 1) > MAX_USER_DATA_BYTES) {
    Log.e(LOG_TAG,"SMS data message may only contain " + (MAX_USER_DATA_BYTES - smsHeaderData.length - 1) + " bytes");
    return null;
  }
  SubmitPdu ret=new SubmitPdu();
  ByteArrayOutputStream bo=getSubmitPduHead(scAddress,destinationAddress,(byte)0x41,statusReportRequested,ret);
  bo.write(0x04);
  bo.write(data.length + smsHeaderData.length + 1);
  bo.write(smsHeaderData.length);
  bo.write(smsHeaderData,0,smsHeaderData.length);
  bo.write(data,0,data.length);
  ret.encodedMessage=bo.toByteArray();
  return ret;
}
