{
  super(context);
  mConfig=RecentsConfiguration.getInstance();
  mStack=stack;
  mStack.setCallbacks(this);
  mScroller=new OverScroller(context);
  mTouchHandler=new TaskStackViewTouchHandler(context,this);
  mViewPool=new ViewPool<TaskView,Task>(context,this);
  mInflater=LayoutInflater.from(context);
  mDozeTrigger=new DozeTrigger(mConfig.taskBarDismissDozeDelaySeconds,new Runnable(){
    @Override public void run(){
      int childCount=getChildCount();
      for (int i=0; i < childCount; i++) {
        TaskView tv=(TaskView)getChildAt(i);
        tv.startNoUserInteractionAnimation();
      }
    }
  }
);
  mHwLayersTrigger=new ReferenceCountedTrigger(getContext(),new Runnable(){
    @Override public void run(){
      int childCount=getChildCount();
      for (int i=0; i < childCount; i++) {
        TaskView tv=(TaskView)getChildAt(i);
        tv.enableHwLayers();
      }
    }
  }
,new Runnable(){
    @Override public void run(){
      int childCount=getChildCount();
      for (int i=0; i < childCount; i++) {
        TaskView tv=(TaskView)getChildAt(i);
        tv.disableHwLayers();
      }
    }
  }
,new Runnable(){
    @Override public void run(){
      new Throwable("Invalid hw layers ref count").printStackTrace();
      Console.logError(getContext(),"Invalid HW layers ref count");
    }
  }
);
}
