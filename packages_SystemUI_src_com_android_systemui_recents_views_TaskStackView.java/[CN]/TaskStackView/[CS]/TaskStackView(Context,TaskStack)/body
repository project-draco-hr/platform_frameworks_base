{
  super(context);
  setStack(stack);
  mConfig=RecentsConfiguration.getInstance();
  mViewPool=new ViewPool<TaskView,Task>(context,this);
  mInflater=LayoutInflater.from(context);
  mLayoutAlgorithm=new TaskStackViewLayoutAlgorithm(mConfig);
  mFilterAlgorithm=new TaskStackViewFilterAlgorithm(mConfig,this,mViewPool);
  mStackScroller=new TaskStackViewScroller(context,mConfig,mLayoutAlgorithm);
  mStackScroller.setCallbacks(this);
  mTouchHandler=new TaskStackViewTouchHandler(context,this,mConfig,mStackScroller);
  mUIDozeTrigger=new DozeTrigger(mConfig.taskBarDismissDozeDelaySeconds,new Runnable(){
    @Override public void run(){
      List<TaskView> taskViews=getTaskViews();
      int taskViewCount=taskViews.size();
      for (int i=0; i < taskViewCount; i++) {
        TaskView tv=taskViews.get(i);
        tv.startNoUserInteractionAnimation();
      }
    }
  }
);
}
