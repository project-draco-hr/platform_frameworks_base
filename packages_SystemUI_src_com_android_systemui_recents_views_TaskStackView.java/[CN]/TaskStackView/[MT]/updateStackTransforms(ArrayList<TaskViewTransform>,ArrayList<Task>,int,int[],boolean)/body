{
  int taskTransformCount=taskTransforms.size();
  int taskCount=tasks.size();
  int firstVisibleIndex=-1;
  int lastVisibleIndex=-1;
  if (taskTransformCount < taskCount) {
    for (int i=taskTransformCount; i < taskCount; i++) {
      taskTransforms.add(new TaskViewTransform());
    }
  }
 else   if (taskTransformCount > taskCount) {
    taskTransforms.subList(0,taskCount);
  }
  for (int i=0; i < taskCount; i++) {
    TaskViewTransform transform=mStackAlgorithm.getStackTransform(i,stackScroll,taskTransforms.get(i));
    if (transform.visible) {
      if (firstVisibleIndex < 0) {
        firstVisibleIndex=i;
      }
      lastVisibleIndex=i;
    }
    if (boundTranslationsToRect) {
      transform.translationY=Math.min(transform.translationY,mStackAlgorithm.mRect.bottom);
    }
  }
  if (visibleRangeOut != null) {
    visibleRangeOut[0]=firstVisibleIndex;
    visibleRangeOut[1]=lastVisibleIndex;
  }
}
