{
  List<TaskView> taskViews=getTaskViews();
  TaskView tmpTv=null;
  TaskView prevVisibleTv=null;
  int taskViewCount=taskViews.size();
  for (int i=0; i < taskViewCount; i++) {
    TaskView tv=taskViews.get(i);
    TaskView frontTv=null;
    int clipBottom=0;
    if (isIgnoredTask(tv.getTask())) {
      if (prevVisibleTv != null) {
        tv.setTranslationZ(Math.max(tv.getTranslationZ(),prevVisibleTv.getTranslationZ() + 0.1f));
      }
    }
    if (i < (taskViewCount - 1) && tv.shouldClipViewInStack()) {
      for (int j=i + 1; j < taskViewCount; j++) {
        tmpTv=taskViews.get(j);
        if (tmpTv.shouldClipViewInStack()) {
          frontTv=tmpTv;
          break;
        }
      }
      if (frontTv != null) {
        float taskBottom=tv.getBottom();
        float frontTaskTop=frontTv.getTop();
        if (frontTaskTop < taskBottom) {
          clipBottom=(int)(taskBottom - frontTaskTop) - mTaskCornerRadiusPx;
        }
      }
    }
    tv.getViewBounds().setClipBottom(clipBottom);
    tv.mThumbnailView.updateThumbnailVisibility(clipBottom - tv.getPaddingBottom());
    prevVisibleTv=tv;
  }
  mTaskViewsClipDirty=false;
}
