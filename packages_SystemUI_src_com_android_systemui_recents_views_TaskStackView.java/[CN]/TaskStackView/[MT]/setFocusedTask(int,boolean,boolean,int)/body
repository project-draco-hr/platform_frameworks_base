{
  int newFocusedTaskIndex=mStack.getTaskCount() > 0 ? Utilities.clamp(focusTaskIndex,0,mStack.getTaskCount() - 1) : -1;
  final Task newFocusedTask=(newFocusedTaskIndex != -1) ? mStack.getStackTasks().get(newFocusedTaskIndex) : null;
  if (mFocusedTask != null) {
    if (timerIndicatorDuration > 0) {
      final TaskView tv=getChildViewForTask(mFocusedTask);
      if (tv != null) {
        tv.getHeaderView().cancelFocusTimerIndicator();
      }
    }
    resetFocusedTask(mFocusedTask);
  }
  boolean willScroll=false;
  mFocusedTask=newFocusedTask;
  if (newFocusedTask != null) {
    if (timerIndicatorDuration > 0) {
      final TaskView tv=getChildViewForTask(mFocusedTask);
      if (tv != null) {
        tv.getHeaderView().startFocusTimerIndicator(timerIndicatorDuration);
      }
 else {
        mStartTimerIndicatorDuration=timerIndicatorDuration;
      }
    }
    if (scrollToTask) {
      if (!mEnterAnimationComplete) {
        cancelAllTaskViewAnimations();
      }
      mLayoutAlgorithm.clearUnfocusedTaskOverrides();
      willScroll=mAnimationHelper.startScrollToFocusedTaskAnimation(newFocusedTask,requestViewFocus);
    }
 else {
      TaskView newFocusedTaskView=getChildViewForTask(newFocusedTask);
      if (newFocusedTaskView != null) {
        newFocusedTaskView.setFocusedState(true,requestViewFocus);
      }
    }
  }
  return willScroll;
}
