{
  int movement=0;
  int childCount=getChildCount();
  for (int i=0; i < childCount; i++) {
    TaskView tv=(TaskView)getChildAt(i);
    Task task=tv.getTask();
    int taskIndex=tasks.indexOf(task);
    TaskViewTransform toTransform;
    boolean willBeInvisible=taskIndex < 0 || !taskTransforms.get(taskIndex).visible;
    if (willBeInvisible) {
      if (taskIndex < 0) {
        toTransform=curTaskTransforms.get(curTasks.indexOf(task));
      }
 else {
        toTransform=new TaskViewTransform(taskTransforms.get(taskIndex));
      }
      tv.prepareTaskTransformForFilterTaskVisible(toTransform);
      childrenToRemoveOut.add(tv);
    }
 else {
      toTransform=taskTransforms.get(taskIndex);
      movement=Math.max(movement,Math.abs(toTransform.translationY - (int)tv.getTranslationY()));
    }
    childViewTransformsOut.put(tv,new Pair(0,toTransform));
  }
  return Utilities.calculateTranslationAnimationDuration(movement,config.filteringCurrentViewsMinAnimDuration);
}
