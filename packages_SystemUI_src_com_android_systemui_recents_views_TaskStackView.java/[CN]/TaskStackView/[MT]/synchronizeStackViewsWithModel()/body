{
  if (Console.Enabled) {
    Console.log(Constants.Log.TaskStack.SynchronizeViewsWithModel,"[TaskStackView|synchronizeViewsWithModel]","mStackViewsDirty: " + mStackViewsDirty,Console.AnsiYellow);
  }
  if (mStackViewsDirty) {
    ArrayList<Task> tasks=mStack.getTasks();
    int stackScroll=getStackScroll();
    int[] visibleRange=mTmpVisibleRange;
    updateStackTransforms(mCurrentTaskTransforms,tasks,stackScroll,visibleRange,false);
    TaskViewTransform tmpTransform=new TaskViewTransform();
    TaskStack.GroupTaskIndex gti=new TaskStack.GroupTaskIndex();
    HashMap<Task,TaskView> taskChildViewMap=getTaskChildViewMap();
    int childCount=getChildCount();
    for (int i=childCount - 1; i >= 0; i--) {
      TaskView tv=(TaskView)getChildAt(i);
      Task task=tv.getTask();
      int taskIndex=mStack.indexOfTask(task);
      if (taskIndex < visibleRange[1] || taskIndex > visibleRange[0]) {
        taskChildViewMap.remove(task);
        mViewPool.returnViewToPool(tv);
      }
    }
    boolean isValidVisibleRange=visibleRange[0] != -1 && visibleRange[1] != -1;
    for (int i=visibleRange[0]; isValidVisibleRange && i >= visibleRange[1]; i--) {
      Task task=tasks.get(i);
      TaskViewTransform transform=mCurrentTaskTransforms.get(i);
      TaskView tv=taskChildViewMap.get(task);
      int taskIndex=mStack.indexOfTask(task);
      if (tv == null) {
        tv=mViewPool.pickUpViewFromPool(task,task);
        if (mStackViewsAnimationDuration > 0) {
          if (transform.t < 0) {
            tmpTransform=mStackAlgorithm.getStackTransform(tasks.get(0),stackScroll,tmpTransform);
          }
 else {
            tmpTransform=mStackAlgorithm.getStackTransform(tasks.get(Math.min(tasks.size() - 1,visibleRange[0] + 1)),stackScroll,tmpTransform);
          }
          tv.updateViewPropertiesToTaskTransform(tmpTransform,0);
        }
      }
      tv.updateViewPropertiesToTaskTransform(mCurrentTaskTransforms.get(taskIndex),mStackViewsAnimationDuration);
    }
    if (Console.Enabled) {
      Console.log(Constants.Log.TaskStack.SynchronizeViewsWithModel,"  [TaskStackView|viewChildren]","" + getChildCount());
    }
    mStackViewsAnimationDuration=0;
    mStackViewsDirty=false;
  }
}
