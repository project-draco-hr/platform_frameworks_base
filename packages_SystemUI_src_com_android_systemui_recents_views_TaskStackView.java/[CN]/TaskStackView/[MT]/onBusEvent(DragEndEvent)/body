{
  if (event.dropTarget instanceof TaskStack.DockState) {
    return;
  }
  boolean isFreeformTask=event.task.isFreeformTask();
  boolean hasChangedStacks=(!isFreeformTask && event.dropTarget == mFreeformWorkspaceDropTarget) || (isFreeformTask && event.dropTarget == mStackDropTarget);
  event.postAnimationTrigger.increment();
  if (hasChangedStacks) {
    if (event.dropTarget == mFreeformWorkspaceDropTarget) {
      mStack.moveTaskToStack(event.task,FREEFORM_WORKSPACE_STACK_ID);
    }
 else     if (event.dropTarget == mStackDropTarget) {
      mStack.moveTaskToStack(event.task,FULLSCREEN_WORKSPACE_STACK_ID);
    }
    updateLayout(true);
    event.postAnimationTrigger.addLastDecrementRunnable(new Runnable(){
      @Override public void run(){
        SystemServicesProxy ssp=Recents.getSystemServices();
        ssp.moveTaskToStack(event.task.key.id,event.task.key.stackId);
      }
    }
);
  }
  event.taskView.animate().withEndAction(event.postAnimationTrigger.decrementAsRunnable());
  requestSynchronizeStackViewsWithModel(250);
}
