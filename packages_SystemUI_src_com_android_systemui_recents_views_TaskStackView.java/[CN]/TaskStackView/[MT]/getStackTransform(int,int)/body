{
  TaskViewTransform transform=new TaskViewTransform();
  if (indexInStack < 0)   return transform;
  int numPeekCards=Constants.Values.TaskStackView.StackPeekNumCards;
  float overlapHeight=Constants.Values.TaskStackView.StackOverlapPct * mTaskRect.height();
  float peekHeight=Constants.Values.TaskStackView.StackPeekHeightPct * mStackRect.height();
  float t=((indexInStack * overlapHeight) - stackScroll) / overlapHeight;
  float boundedT=Math.max(t,-(numPeekCards + 1));
  float minScale=Constants.Values.TaskStackView.StackPeekMinScale;
  float scaleRange=1f - minScale;
  float scaleInc=scaleRange / numPeekCards;
  float scale=Math.max(minScale,Math.min(1f,1f + (boundedT * scaleInc)));
  float scaleYOffset=((1f - scale) * mTaskRect.height()) / 2;
  transform.scale=scale;
  if (boundedT < 0f) {
    transform.translationY=(int)((Math.max(-numPeekCards,boundedT) / numPeekCards) * peekHeight - scaleYOffset);
  }
 else {
    transform.translationY=(int)(boundedT * overlapHeight - scaleYOffset);
  }
  transform.rect.set(mTaskRect);
  if (t < -(numPeekCards + 1)) {
    transform.visible=false;
  }
 else {
    transform.rect.offset(0,transform.translationY);
    Utilities.scaleRectAboutCenter(transform.rect,transform.scale);
    transform.visible=Rect.intersects(mRect,transform.rect);
  }
  transform.t=t;
  return transform;
}
