{
  if (taskIndex == mFocusedTaskIndex)   return;
  if (0 <= taskIndex && taskIndex < mStack.getTaskCount()) {
    mFocusedTaskIndex=taskIndex;
    Task t=mStack.getTasks().get(taskIndex);
    TaskView tv=getChildViewForTask(t);
    Runnable postScrollRunnable=null;
    if (tv != null) {
      tv.setFocusedTask(animateFocusedState);
    }
 else {
      postScrollRunnable=new Runnable(){
        @Override public void run(){
          Task t=mStack.getTasks().get(mFocusedTaskIndex);
          TaskView tv=getChildViewForTask(t);
          if (tv != null) {
            tv.setFocusedTask(animateFocusedState);
          }
        }
      }
;
    }
    if (scrollToNewPosition) {
      float newScroll=mLayoutAlgorithm.getStackScrollForTask(t) - 0.5f;
      newScroll=mStackScroller.getBoundedStackScroll(newScroll);
      mStackScroller.animateScroll(mStackScroller.getStackScroll(),newScroll,postScrollRunnable);
    }
 else {
      if (postScrollRunnable != null) {
        postScrollRunnable.run();
      }
    }
  }
}
