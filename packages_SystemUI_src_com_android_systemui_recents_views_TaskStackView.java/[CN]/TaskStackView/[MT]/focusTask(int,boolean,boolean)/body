{
  if (taskIndex == mFocusedTaskIndex)   return;
  if (0 <= taskIndex && taskIndex < mStack.getTaskCount()) {
    mFocusedTaskIndex=taskIndex;
    mPrevAccessibilityFocusedIndex=taskIndex;
    final Task t=mStack.getTasks().get(mFocusedTaskIndex);
    Runnable postScrollRunnable=new Runnable(){
      @Override public void run(){
        TaskView tv=getChildViewForTask(t);
        if (tv != null) {
          tv.setFocusedTask(animateFocusedState);
          tv.requestAccessibilityFocus();
        }
      }
    }
;
    if (scrollToNewPosition) {
      float newScroll=mLayoutAlgorithm.getStackScrollForTask(t) - 0.5f;
      newScroll=mStackScroller.getBoundedStackScroll(newScroll);
      mStackScroller.animateScroll(mStackScroller.getStackScroll(),newScroll,postScrollRunnable);
    }
 else {
      if (postScrollRunnable != null) {
        postScrollRunnable.run();
      }
    }
  }
}
