{
  RecentsConfiguration config=RecentsConfiguration.getInstance();
  mRect.set(0,0,width,height);
  mStackRect.set(mRect);
  mStackRect.bottom-=config.systemInsets.bottom;
  int smallestDimension=Math.min(width,height);
  int padding=(int)(Constants.Values.TaskStackView.StackPaddingPct * smallestDimension / 2f);
  mStackRect.inset(padding,padding);
  mStackRectSansPeek.set(mStackRect);
  mStackRectSansPeek.top+=Constants.Values.TaskStackView.StackPeekHeightPct * mStackRect.height();
  if (RecentsConfiguration.getInstance().layoutVerticalStack) {
    int minHeight=(int)(mStackRect.height() - (Constants.Values.TaskStackView.StackPeekHeightPct * mStackRect.height()));
    int size=Math.min(minHeight,Math.min(mStackRect.width(),mStackRect.height()));
    int centerX=mStackRect.centerX();
    mTaskRect.set(centerX - size / 2,mStackRectSansPeek.top,centerX + size / 2,mStackRectSansPeek.top + size);
  }
 else {
    int size=Math.min(mStackRect.width(),mStackRect.height());
    int centerY=mStackRect.centerY();
    mTaskRect.set(mStackRectSansPeek.top,centerY - size / 2,mStackRectSansPeek.top + size,centerY + size / 2);
  }
  updateMinMaxScroll(false);
}
