{
  if (!removedTask.isFreeformTask()) {
    TaskView tv=getChildViewForTask(removedTask);
    if (tv != null) {
      mViewPool.returnViewToPool(tv);
    }
    Task anchorTask=null;
    float prevAnchorTaskScroll=0;
    boolean pullStackForward=stack.getTaskCount() > 0;
    if (pullStackForward) {
      anchorTask=mStack.getFrontMostTask();
      prevAnchorTaskScroll=mLayoutAlgorithm.getStackScrollForTask(anchorTask);
    }
    updateMinMaxScroll(true);
    if (wasFrontMostTask) {
      mStackScroller.setStackScroll(mLayoutAlgorithm.mMaxScrollP);
    }
 else     if (pullStackForward) {
      float anchorTaskScroll=mLayoutAlgorithm.getStackScrollForTask(anchorTask);
      mStackScroller.setStackScroll(mStackScroller.getStackScroll() + (anchorTaskScroll - prevAnchorTaskScroll) / 2);
      mStackScroller.boundScroll();
    }
    requestSynchronizeStackViewsWithModel(200);
  }
 else {
    TaskView tv=getChildViewForTask(removedTask);
    if (tv != null) {
      mViewPool.returnViewToPool(tv);
    }
    updateMinMaxScroll(true);
    requestSynchronizeStackViewsWithModel(200);
  }
  if (newFrontMostTask != null) {
    TaskView frontTv=getChildViewForTask(newFrontMostTask);
    if (frontTv != null) {
      frontTv.onTaskBound(newFrontMostTask);
      frontTv.fadeInActionButton(0,getResources().getInteger(R.integer.recents_task_enter_from_app_duration));
    }
  }
  if (mStack.getTaskCount() == 0) {
    boolean shouldFinishActivity=true;
    if (mStack.hasFilteredTasks()) {
      mStack.unfilterTasks();
      shouldFinishActivity=(mStack.getTaskCount() == 0);
    }
    if (shouldFinishActivity) {
      mCb.onAllTaskViewsDismissed(null);
    }
  }
}
