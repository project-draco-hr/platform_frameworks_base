{
  mTmpTaskViews.clear();
  mTmpTaskViews.addAll(getTaskViews());
  mTmpTaskViews.addAll(mViewPool.getViews());
  int taskViewCount=mTmpTaskViews.size();
  for (int i=0; i < taskViewCount; i++) {
    TaskView tv=mTmpTaskViews.get(i);
    if (tv.getBackground() != null) {
      tv.getBackground().getPadding(mTmpRect);
    }
 else {
      mTmpRect.setEmpty();
    }
    Rect taskRect=mLayoutAlgorithm.mTaskRect;
    tv.layout(taskRect.left - mTmpRect.left,taskRect.top - mTmpRect.top,taskRect.right + mTmpRect.right,taskRect.bottom + mTmpRect.bottom);
  }
  if (mAwaitingFirstLayout) {
    mAwaitingFirstLayout=false;
    onFirstLayout();
  }
  if (changed) {
    if (mStackScroller.isScrollOutOfBounds()) {
      mStackScroller.boundScroll();
    }
    requestSynchronizeStackViewsWithModel();
    synchronizeStackViewsWithModel();
    requestUpdateStackViewsClip();
    clipTaskViews(true);
  }
}
