{
  if (Console.Enabled) {
    Console.log(Constants.Log.UI.MeasureAndLayout,"[TaskStackView|layout]","" + new Rect(left,top,right,bottom),Console.AnsiGreen);
  }
  if (Constants.Log.UI.MeasureAndLayout) {
    Console.log("  [TaskStack|fullRect] " + mRect);
    Console.log("  [TaskStack|stackRect] " + mStackRect);
    Console.log("  [TaskStack|stackRectSansPeek] " + mStackRectSansPeek);
    Console.log("  [TaskStack|taskRect] " + mTaskRect);
  }
  int childCount=getChildCount();
  for (int i=0; i < childCount; i++) {
    TaskView t=(TaskView)getChildAt(i);
    t.layout(mTaskRect.left,mStackRectSansPeek.top,mTaskRect.right,mStackRectSansPeek.top + mTaskRect.height());
  }
  if (mAwaitingFirstLayout) {
    RecentsConfiguration config=RecentsConfiguration.getInstance();
    if (config.launchedFromAltTab) {
      focusTask(Math.max(0,mStack.getTaskCount() - 2),false);
    }
    if (config.launchedWithThumbnailAnimation) {
      TaskView tv=(TaskView)getChildAt(getChildCount() - 1);
      if (tv != null) {
        tv.prepareAnimateOnEnterRecents();
      }
    }
    mAwaitingFirstLayout=false;
    if (mStartEnterAnimationRequestedAfterLayout) {
      startOnEnterAnimation();
    }
  }
}
