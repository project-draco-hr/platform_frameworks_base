{
  SystemServicesProxy ssp=Recents.getSystemServices();
  Task task=tv.getTask();
  int taskIndex=mStack.indexOfTask(task);
  boolean taskWasFocused=tv.isFocusedTask();
  resetFocusedTask();
  tv.announceForAccessibility(getContext().getString(R.string.accessibility_recents_item_dismissed,tv.getTask().activityLabel));
  mStack.removeTask(task);
  if (taskWasFocused || ssp.isTouchExplorationEnabled()) {
    RecentsConfiguration config=Recents.getConfiguration();
    RecentsActivityLaunchState launchState=config.getLaunchState();
    boolean isFreeformTask=taskIndex > 0 ? mStack.getTasks().get(taskIndex - 1).isFreeformTask() : false;
    setFocusedTask(taskIndex - 1,!isFreeformTask,launchState.launchedWithAltTab);
  }
}
