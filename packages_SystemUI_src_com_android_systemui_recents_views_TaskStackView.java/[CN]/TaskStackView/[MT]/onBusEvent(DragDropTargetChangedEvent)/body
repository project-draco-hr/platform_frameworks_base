{
  AnimationProps animation=new AnimationProps(250,Interpolators.FAST_OUT_SLOW_IN);
  boolean ignoreTaskOverrides=false;
  if (event.dropTarget instanceof TaskStack.DockState) {
    final TaskStack.DockState dockState=(TaskStack.DockState)event.dropTarget;
    Rect systemInsets=new Rect(mStableLayoutAlgorithm.mSystemInsets);
    int height=getMeasuredHeight();
    height-=systemInsets.bottom;
    systemInsets.bottom=0;
    mStackBounds.set(dockState.getDockedTaskStackBounds(mDisplayRect,getMeasuredWidth(),height,mDividerSize,systemInsets,mLayoutAlgorithm,getResources(),mWindowRect));
    mLayoutAlgorithm.setSystemInsets(systemInsets);
    mLayoutAlgorithm.initialize(mDisplayRect,mWindowRect,mStackBounds,TaskStackLayoutAlgorithm.StackState.getStackStateForStack(mStack));
    updateLayoutAlgorithm(true);
    ignoreTaskOverrides=true;
  }
 else {
    mWindowRect.set(mStableWindowRect);
    mStackBounds.set(mStableStackBounds);
    removeIgnoreTask(event.task);
    mLayoutAlgorithm.setSystemInsets(mStableLayoutAlgorithm.mSystemInsets);
    mLayoutAlgorithm.initialize(mDisplayRect,mWindowRect,mStackBounds,TaskStackLayoutAlgorithm.StackState.getStackStateForStack(mStack));
    updateLayoutAlgorithm(true);
    addIgnoreTask(event.task);
  }
  relayoutTaskViews(animation,ignoreTaskOverrides);
}
