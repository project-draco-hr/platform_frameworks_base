{
  if (taskIndex != -1) {
    List<TaskView> taskViews=getTaskViews();
    boolean foundTaskView=false;
    int taskViewCount=taskViews.size();
    for (int i=0; i < taskViewCount; i++) {
      Task tvTask=taskViews.get(i).getTask();
      if (tvTask == task) {
        foundTaskView=true;
      }
 else       if (taskIndex < mStack.indexOfStackTask(tvTask)) {
        if (foundTaskView) {
          return i - 1;
        }
 else {
          return i;
        }
      }
    }
  }
  return -1;
}
