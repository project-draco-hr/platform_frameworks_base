{
  ArrayList<Task> tasks=new ArrayList<>(mStack.getStackTasks());
  mAnimationHelper.startDeleteAllTasksAnimation(getTaskViews(),event.getAnimationTrigger());
  event.addPostAnimationCallback(new Runnable(){
    @Override public void run(){
      announceForAccessibility(getContext().getString(R.string.accessibility_recents_all_items_dismissed));
      mStack.removeAllTasks();
      for (int i=tasks.size() - 1; i >= 0; i--) {
        EventBus.getDefault().send(new DeleteTaskDataEvent(tasks.get(i)));
      }
      MetricsLogger.action(getContext(),MetricsEvent.OVERVIEW_DISMISS_ALL);
    }
  }
);
}
