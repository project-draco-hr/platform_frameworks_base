{
  String name;
  int userId=-1;
  int flags=0;
  String opt;
  while ((opt=nextOption()) != null) {
    if ("--profileOf".equals(opt)) {
      String optionData=nextOptionData();
      if (optionData == null || !isNumber(optionData)) {
        System.err.println("Error: no USER_ID specified");
        showUsage();
        return;
      }
 else {
        userId=Integer.parseInt(optionData);
      }
    }
 else     if ("--managed".equals(opt)) {
      flags|=UserInfo.FLAG_MANAGED_PROFILE;
    }
 else {
      System.err.println("Error: unknown option " + opt);
      showUsage();
      return;
    }
  }
  String arg=nextArg();
  if (arg == null) {
    System.err.println("Error: no user name specified.");
    return;
  }
  name=arg;
  try {
    UserInfo info=null;
    if (userId < 0) {
      info=mUm.createUser(name,flags);
    }
 else {
      info=mUm.createProfileForUser(name,flags,userId);
    }
    if (info != null) {
      System.out.println("Success: created user id " + info.id);
    }
 else {
      System.err.println("Error: couldn't create User.");
    }
  }
 catch (  RemoteException e) {
    System.err.println(e.toString());
    System.err.println(PM_NOT_RUNNING_ERR);
  }
}
