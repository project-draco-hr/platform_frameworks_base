{
  try {
    String opt;
    while ((opt=nextOption()) != null) {
      if (opt.equals("-l")) {
      }
 else       if (opt.equals("-lf")) {
        showApplicationPackage=true;
      }
 else       if (opt.equals("-f")) {
        showApplicationPackage=true;
      }
 else {
        System.err.println("Error: Unknown option: " + opt);
        showUsage();
        return;
      }
    }
  }
 catch (  RuntimeException ex) {
    System.err.println("Error: " + ex.toString());
    showUsage();
    return;
  }
  try {
    List<PackageInfo> packages=mPm.getInstalledPackages(0);
    int count=packages.size();
    for (int p=0; p < count; p++) {
      PackageInfo info=packages.get(p);
      System.out.print("package:");
      if (showApplicationPackage) {
        System.out.print(info.applicationInfo.sourceDir);
        System.out.print("=");
      }
      System.out.println(info.packageName);
    }
  }
 catch (  RemoteException e) {
  }
}
