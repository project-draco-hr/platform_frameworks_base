{
  boolean foundHeld=false;
  boolean foundActive=false;
  for (int i=0; i < calls.length; i++) {
    CallInfo c=calls[i];
    if (c != null && c.state == CallInfo.State.ACTIVE) {
      calls[i]=null;
      foundActive=true;
    }
  }
  if (!foundActive) {
    for (int i=0; i < calls.length; i++) {
      CallInfo c=calls[i];
      if (c != null && (c.state == CallInfo.State.DIALING || c.state == CallInfo.State.ALERTING)) {
        calls[i]=null;
        foundActive=true;
      }
    }
  }
  for (int i=0; i < calls.length; i++) {
    CallInfo c=calls[i];
    if (c != null && c.state == CallInfo.State.HOLDING) {
      c.state=CallInfo.State.ACTIVE;
      foundHeld=true;
    }
  }
  if (foundHeld) {
    return true;
  }
  for (int i=0; i < calls.length; i++) {
    CallInfo c=calls[i];
    if (c != null && c.isRinging()) {
      c.state=CallInfo.State.ACTIVE;
      return true;
    }
  }
  return true;
}
