{
  if (mDescriptor != -1) {
    long alarmSeconds, alarmNanoseconds;
    if (when < 0) {
      alarmSeconds=0;
      alarmNanoseconds=0;
    }
 else {
      alarmSeconds=when / 1000;
      alarmNanoseconds=(when % 1000) * 1000 * 1000;
    }
    set(mDescriptor,type,alarmSeconds,alarmNanoseconds);
  }
 else {
    Message msg=Message.obtain();
    msg.what=ALARM_EVENT;
    mHandler.removeMessages(ALARM_EVENT);
    mHandler.sendMessageAtTime(msg,when);
  }
}
