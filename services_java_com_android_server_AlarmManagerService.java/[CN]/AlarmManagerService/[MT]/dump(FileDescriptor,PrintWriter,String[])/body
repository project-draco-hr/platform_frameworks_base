{
  if (mContext.checkCallingOrSelfPermission(android.Manifest.permission.DUMP) != PackageManager.PERMISSION_GRANTED) {
    pw.println("Permission Denial: can't dump AlarmManager from from pid=" + Binder.getCallingPid() + ", uid="+ Binder.getCallingUid());
    return;
  }
synchronized (mLock) {
    pw.println("Current Alarm Manager state:");
    if (mRtcWakeupAlarms.size() > 0 || mRtcAlarms.size() > 0) {
      pw.println(" ");
      pw.print("  Realtime wakeup (now=");
      pw.print(System.currentTimeMillis());
      pw.println("):");
      if (mRtcWakeupAlarms.size() > 0) {
        dumpAlarmList(pw,mRtcWakeupAlarms,"  ","RTC_WAKEUP");
      }
      if (mRtcAlarms.size() > 0) {
        dumpAlarmList(pw,mRtcAlarms,"  ","RTC");
      }
    }
    if (mElapsedRealtimeWakeupAlarms.size() > 0 || mElapsedRealtimeAlarms.size() > 0) {
      pw.println(" ");
      pw.print("  Elapsed realtime wakeup (now=");
      pw.print(SystemClock.elapsedRealtime());
      pw.println("):");
      if (mElapsedRealtimeWakeupAlarms.size() > 0) {
        dumpAlarmList(pw,mElapsedRealtimeWakeupAlarms,"  ","ELAPSED_WAKEUP");
      }
      if (mElapsedRealtimeAlarms.size() > 0) {
        dumpAlarmList(pw,mElapsedRealtimeAlarms,"  ","ELAPSED");
      }
    }
    pw.println(" ");
    pw.print("  Broadcast ref count: ");
    pw.println(mBroadcastRefCount);
    pw.println(" ");
    pw.println("  Alarm Stats:");
    for (    Map.Entry<String,BroadcastStats> be : mBroadcastStats.entrySet()) {
      BroadcastStats bs=be.getValue();
      pw.print("  ");
      pw.println(be.getKey());
      pw.print("    ");
      pw.print(bs.aggregateTime);
      pw.print("ms running, ");
      pw.print(bs.numWakeup);
      pw.println(" wakeups");
      for (      Map.Entry<Intent.FilterComparison,FilterStats> fe : bs.filterStats.entrySet()) {
        pw.print("    ");
        pw.print(fe.getValue().count);
        pw.print(" alarms: ");
        pw.println(fe.getKey().getIntent().toShortString(true,false));
      }
    }
  }
}
