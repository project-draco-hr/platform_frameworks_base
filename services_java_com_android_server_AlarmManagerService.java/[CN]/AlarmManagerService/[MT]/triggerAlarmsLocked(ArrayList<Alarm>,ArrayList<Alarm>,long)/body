{
  Iterator<Alarm> it=alarmList.iterator();
  ArrayList<Alarm> repeats=new ArrayList<Alarm>();
  while (it.hasNext()) {
    Alarm alarm=it.next();
    if (localLOGV)     Slog.v(TAG,"Checking active alarm when=" + alarm.when + " "+ alarm);
    if (alarm.when > now) {
      break;
    }
    if (localLOGV && now - alarm.when > LATE_ALARM_THRESHOLD) {
      Slog.v(TAG,"alarm is late! alarm time: " + alarm.when + " now: "+ now+ " delay (in seconds): "+ (now - alarm.when) / 1000);
    }
    if (localLOGV)     Slog.v(TAG,"Alarm triggering: " + alarm);
    alarm.count=1;
    if (alarm.repeatInterval > 0) {
      alarm.count+=(now - alarm.when) / alarm.repeatInterval;
    }
    triggerList.add(alarm);
    it.remove();
    if (alarm.repeatInterval > 0) {
      repeats.add(alarm);
    }
  }
  it=repeats.iterator();
  while (it.hasNext()) {
    Alarm alarm=it.next();
    alarm.when+=alarm.count * alarm.repeatInterval;
    addAlarmLocked(alarm);
  }
  if (alarmList.size() > 0) {
    setLocked(alarmList.get(0));
  }
}
