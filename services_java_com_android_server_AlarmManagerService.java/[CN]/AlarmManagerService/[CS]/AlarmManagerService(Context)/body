{
  mContext=context;
  mDescriptor=init();
  PowerManager pm=(PowerManager)context.getSystemService(Context.POWER_SERVICE);
  mWakeLock=pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,TAG);
  mTimeTickSender=PendingIntent.getBroadcast(context,0,new Intent(Intent.ACTION_TIME_TICK).addFlags(Intent.FLAG_RECEIVER_REGISTERED_ONLY),0);
  Intent intent=new Intent(Intent.ACTION_DATE_CHANGED);
  intent.addFlags(Intent.FLAG_RECEIVER_REPLACE_PENDING);
  mDateChangeSender=PendingIntent.getBroadcast(context,0,intent,0);
  mClockReceiver=new ClockReceiver();
  mClockReceiver.scheduleTimeTickEvent();
  mClockReceiver.scheduleDateChangedEvent();
  mUninstallReceiver=new UninstallReceiver();
  if (mDescriptor != -1) {
    mWaitThread.start();
  }
 else {
    Log.w(TAG,"Failed to open alarm driver. Falling back to a handler.");
  }
}
