{
synchronized (mLock) {
    String action=intent.getAction();
    String pkgList[]=null;
    if (Intent.ACTION_QUERY_PACKAGE_RESTART.equals(action)) {
      pkgList=intent.getStringArrayExtra(Intent.EXTRA_PACKAGES);
      for (      String packageName : pkgList) {
        if (lookForPackageLocked(packageName)) {
          setResultCode(Activity.RESULT_OK);
          return;
        }
      }
      return;
    }
 else     if (Intent.ACTION_EXTERNAL_APPLICATIONS_UNAVAILABLE.equals(action)) {
      pkgList=intent.getStringArrayExtra(Intent.EXTRA_CHANGED_PACKAGE_LIST);
    }
 else {
      Uri data=intent.getData();
      if (data != null) {
        String pkg=data.getSchemeSpecificPart();
        if (pkg != null) {
          pkgList=new String[]{pkg};
        }
      }
    }
    if (pkgList != null && (pkgList.length > 0)) {
      for (      String pkg : pkgList) {
        removeLocked(pkg);
        mBroadcastStats.remove(pkg);
      }
    }
  }
}
