{
  checkCertainPackageUsedAfterWebViewPreparation(initialPackage,packages);
  mWebViewUpdateServiceImpl.changeProviderAndSetting(finalPackage);
  Mockito.verify(mTestSystemImpl).onWebViewProviderChanged(Mockito.argThat(new IsPackageInfoWithName(finalPackage)));
  mWebViewUpdateServiceImpl.notifyRelroCreationCompleted();
  WebViewProviderResponse secondResponse=mWebViewUpdateServiceImpl.waitForAndGetProvider();
  assertEquals(WebViewFactory.LIBLOAD_SUCCESS,secondResponse.status);
  assertEquals(finalPackage,secondResponse.packageInfo.packageName);
  Mockito.verify(mTestSystemImpl).killPackageDependents(Mockito.eq(initialPackage));
}
