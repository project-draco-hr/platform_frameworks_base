{
  String firstPackage="first";
  String secondPackage="second";
  WebViewProviderInfo[] packages=new WebViewProviderInfo[]{new WebViewProviderInfo(firstPackage,"",true,false,null),new WebViewProviderInfo(secondPackage,"",true,false,null)};
  checkCertainPackageUsedAfterWebViewBootPreparation(firstPackage,packages);
  if (replaced) {
    mTestSystemImpl.setPackageInfo(createPackageInfo(firstPackage,true,false,true));
    mWebViewUpdateServiceImpl.packageStateChanged(firstPackage,WebViewUpdateService.PACKAGE_ADDED_REPLACED,0);
  }
 else {
    mTestSystemImpl.removePackageInfo(firstPackage);
    mWebViewUpdateServiceImpl.packageStateChanged(firstPackage,WebViewUpdateService.PACKAGE_REMOVED,0);
  }
  checkPreparationPhasesForPackage(secondPackage,1);
  Mockito.verify(mTestSystemImpl,Mockito.never()).killPackageDependents(Mockito.anyObject());
}
