{
  String primaryPackage="primary";
  String fallbackPackage="fallback";
  WebViewProviderInfo[] packages=new WebViewProviderInfo[]{new WebViewProviderInfo(primaryPackage,"",true,false,null),new WebViewProviderInfo(fallbackPackage,"",true,true,null)};
  setupWithPackages(packages,fallbackLogicEnabled);
  setEnabledAndValidPackageInfos(packages);
  int newUser=100;
  mWebViewUpdateServiceImpl.handleNewUser(newUser);
  if (fallbackLogicEnabled) {
    Mockito.verify(mTestSystemImpl).enablePackageForUser(Mockito.eq(fallbackPackage),Mockito.eq(false),Mockito.eq(newUser));
  }
 else {
    Mockito.verify(mTestSystemImpl,Mockito.never()).enablePackageForUser(Mockito.anyObject(),Matchers.anyBoolean(),Matchers.anyInt());
  }
}
