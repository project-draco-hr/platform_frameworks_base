{
  String chosenPackage="chosenPackage";
  String nonChosenPackage="non-chosenPackage";
  WebViewProviderInfo[] packages=new WebViewProviderInfo[]{new WebViewProviderInfo(chosenPackage,"",true,false,null),new WebViewProviderInfo(nonChosenPackage,"",true,false,null)};
  setupWithPackages(packages);
  mTestSystemImpl.setPackageInfo(createPackageInfo(nonChosenPackage,true,true,true));
  mTestSystemImpl.updateUserSetting(null,chosenPackage);
  runWebViewBootPreparationOnMainSync();
  Mockito.verify(mTestSystemImpl).updateUserSetting(Mockito.anyObject(),Mockito.eq(nonChosenPackage));
  assertEquals(nonChosenPackage,mTestSystemImpl.getUserChosenWebViewProvider(null));
  checkPreparationPhasesForPackage(nonChosenPackage,1);
}
