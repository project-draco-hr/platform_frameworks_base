{
  String firstPackage="first";
  String secondPackage="second";
  WebViewProviderInfo[] packages=new WebViewProviderInfo[]{new WebViewProviderInfo(firstPackage,"",true,false,null),new WebViewProviderInfo(secondPackage,"",true,false,null)};
  checkCertainPackageUsedAfterWebViewBootPreparation(firstPackage,packages);
  mWebViewUpdateServiceImpl.changeProviderAndSetting(secondPackage);
  checkPreparationPhasesForPackage(secondPackage,1);
  mTestSystemImpl.setPackageInfo(createPackageInfo(secondPackage,true,false,true));
  mWebViewUpdateServiceImpl.packageStateChanged(secondPackage,WebViewUpdateService.PACKAGE_ADDED,0);
  checkPreparationPhasesForPackage(firstPackage,2);
  mTestSystemImpl.setPackageInfo(createPackageInfo(secondPackage,true,true,true));
  mWebViewUpdateServiceImpl.packageStateChanged(secondPackage,WebViewUpdateService.PACKAGE_ADDED,0);
  checkPreparationPhasesForPackage(secondPackage,2);
}
