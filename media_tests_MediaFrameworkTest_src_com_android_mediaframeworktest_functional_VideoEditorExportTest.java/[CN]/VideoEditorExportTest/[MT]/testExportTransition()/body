{
  final String videoItemFilename1=INPUT_FILE_PATH + "H263_profile0_176x144_15fps_256kbps_AACLC_32kHz_128kbps_s_0_26.3gp";
  final String imageItemFilename1=INPUT_FILE_PATH + "IMG_1600x1200.jpg";
  final String videoItemFilename2=INPUT_FILE_PATH + "H264_BP_640x480_12.5fps_256kbps_AACLC_16khz_24kbps_s_0_26.mp4";
  final String videoItemFilename3=INPUT_FILE_PATH + "MPEG4_SP_720x480_30fps_280kbps_AACLC_48kHz_96kbps_s_0_21.mp4";
  final String imageItemFilename2=INPUT_FILE_PATH + "IMG_176x144.jpg";
  final String imageItemFilename3=INPUT_FILE_PATH + "IMG_640x480.jpg";
  final String outFilename=mVideoEditorHelper.createRandomFile(mVideoEditor.getPath() + "/") + ".3gp";
  final String maskFilename=INPUT_FILE_PATH + "TransitionSpiral_QVGA.jpg";
  final MediaVideoItem mediaItem1=mVideoEditorHelper.createMediaItem(mVideoEditor,"m1",videoItemFilename1,MediaItem.RENDERING_MODE_BLACK_BORDER);
  mediaItem1.setExtractBoundaries(2000,7000);
  mVideoEditor.addMediaItem(mediaItem1);
  final TransitionAlpha transition1=mVideoEditorHelper.createTAlpha("transition1",null,mediaItem1,2000,Transition.BEHAVIOR_LINEAR,maskFilename,50,true);
  mVideoEditor.addTransition(transition1);
  final MediaImageItem mediaItem2=mVideoEditorHelper.createMediaItem(mVideoEditor,"m2",imageItemFilename1,8000,MediaItem.RENDERING_MODE_BLACK_BORDER);
  mVideoEditor.addMediaItem(mediaItem2);
  final MediaVideoItem mediaItem3=mVideoEditorHelper.createMediaItem(mVideoEditor,"m3",videoItemFilename2,MediaItem.RENDERING_MODE_BLACK_BORDER);
  mediaItem3.setExtractBoundaries(0,8000);
  mVideoEditor.addMediaItem(mediaItem3);
  final TransitionSliding transition2And3=mVideoEditorHelper.createTSliding("transition2",mediaItem2,mediaItem3,4000,Transition.BEHAVIOR_MIDDLE_FAST,TransitionSliding.DIRECTION_RIGHT_OUT_LEFT_IN);
  mVideoEditor.addTransition(transition2And3);
  final MediaVideoItem mediaItem4=mVideoEditorHelper.createMediaItem(mVideoEditor,"m4",videoItemFilename3,MediaItem.RENDERING_MODE_BLACK_BORDER);
  mVideoEditor.addMediaItem(mediaItem4);
  mediaItem4.setExtractBoundaries(0,8000);
  final TransitionCrossfade transition3And4=mVideoEditorHelper.createTCrossFade("transition3",mediaItem3,mediaItem4,3500,Transition.BEHAVIOR_MIDDLE_SLOW);
  mVideoEditor.addTransition(transition3And4);
  final MediaImageItem mediaItem5=mVideoEditorHelper.createMediaItem(mVideoEditor,"m5",imageItemFilename2,7000,MediaItem.RENDERING_MODE_BLACK_BORDER);
  mVideoEditor.addMediaItem(mediaItem5);
  final TransitionFadeBlack transition4And5=mVideoEditorHelper.createTFadeBlack("transition4",mediaItem4,mediaItem5,3500,Transition.BEHAVIOR_SPEED_DOWN);
  mVideoEditor.addTransition(transition4And5);
  final MediaImageItem mediaItem6=mVideoEditorHelper.createMediaItem(mVideoEditor,"m6",imageItemFilename3,3000,MediaItem.RENDERING_MODE_BLACK_BORDER);
  mVideoEditor.addMediaItem(mediaItem6);
  final TransitionSliding transition5And6=mVideoEditorHelper.createTSliding("transition5",mediaItem5,mediaItem6,1000,Transition.BEHAVIOR_SPEED_UP,TransitionSliding.DIRECTION_LEFT_OUT_RIGHT_IN);
  mVideoEditor.addTransition(transition5And6);
  final TransitionSliding transition6=mVideoEditorHelper.createTSliding("transition6",mediaItem6,null,1000,Transition.BEHAVIOR_SPEED_UP,TransitionSliding.DIRECTION_TOP_OUT_BOTTOM_IN);
  mVideoEditor.addTransition(transition6);
  mVideoEditor.generatePreview(new MediaProcessingProgressListener(){
    public void onProgress(    Object item,    int action,    int progress){
    }
  }
);
  try {
    final int[] progressUpdate=new int[100];
    mVideoEditor.export(outFilename,MediaProperties.HEIGHT_720,MediaProperties.BITRATE_800K,new ExportProgressListener(){
      int i=0;
      public void onProgress(      VideoEditor ve,      String outFileName,      int progress){
        progressUpdate[i++]=progress;
      }
    }
);
    mVideoEditorHelper.checkProgressCBValues(progressUpdate);
  }
 catch (  Exception e) {
    assertTrue("Error in Export" + e.toString(),false);
  }
  final long storyBoardDuration=mediaItem1.getTimelineDuration() + mediaItem2.getTimelineDuration() + mediaItem3.getTimelineDuration() - transition2And3.getDuration() + mediaItem4.getTimelineDuration() - transition3And4.getDuration() + mediaItem5.getTimelineDuration() - transition4And5.getDuration() + mediaItem6.getTimelineDuration() - transition5And6.getDuration();
  mVideoEditorHelper.validateExport(mVideoEditor,outFilename,MediaProperties.HEIGHT_720,0,storyBoardDuration,MediaProperties.VCODEC_H264BP,MediaProperties.ACODEC_AAC_LC);
  mVideoEditorHelper.checkDeleteExistingFile(outFilename);
}
