{
  final boolean hasHardwareCanvas=c.isHardwareAccelerated() && c instanceof HardwareCanvas;
  if (mHasHardwareCanvas != hasHardwareCanvas) {
    mHasHardwareCanvas=hasHardwareCanvas;
    if (!hasHardwareCanvas) {
      endHardwareAnimations();
    }
  }
  if (hasHardwareCanvas) {
    final HardwareCanvas hw=(HardwareCanvas)c;
    startPendingAnimation(hw,p);
    if (mHardwareAnimator != null) {
      return drawHardware(hw);
    }
  }
  return drawSoftware(c,p);
}
