{
synchronized (sLock) {
    if (mIsWifiOnly == null) {
      PackageManager pkgMgr=context.getPackageManager();
      mIsWifiOnly=Boolean.valueOf(!pkgMgr.hasSystemFeature(PackageManager.FEATURE_TELEPHONY) && pkgMgr.hasSystemFeature(PackageManager.FEATURE_WIFI));
      String deviceType=mIsWifiOnly ? "wifi-only" : "telephony";
      Log.d("ConnectivityManagerTest",String.format("detected a %s device",deviceType));
    }
  }
  return mIsWifiOnly;
}
