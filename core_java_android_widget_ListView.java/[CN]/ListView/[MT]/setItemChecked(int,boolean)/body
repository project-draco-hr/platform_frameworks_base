{
  if (mChoiceMode == CHOICE_MODE_NONE) {
    return;
  }
  if (mChoiceMode == CHOICE_MODE_MULTIPLE) {
    mCheckStates.put(position,value);
    if (mCheckedIdStates != null && mAdapter.hasStableIds()) {
      if (value) {
        mCheckedIdStates.put(mAdapter.getItemId(position),Boolean.TRUE);
      }
 else {
        mCheckedIdStates.delete(mAdapter.getItemId(position));
      }
    }
  }
 else {
    boolean updateIds=mCheckedIdStates != null && mAdapter.hasStableIds();
    if (value || isItemChecked(position)) {
      mCheckStates.clear();
      if (updateIds) {
        mCheckedIdStates.clear();
      }
    }
    if (value) {
      mCheckStates.put(position,true);
      if (updateIds) {
        mCheckedIdStates.put(mAdapter.getItemId(position),Boolean.TRUE);
      }
    }
  }
  if (!mInLayout && !mBlockLayoutRequests) {
    mDataChanged=true;
    rememberSyncState();
    requestLayout();
  }
}
