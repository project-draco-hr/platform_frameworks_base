{
  final int dividerHeight=mDividerHeight;
  if (dividerHeight > 0 && mDivider != null) {
    final Rect bounds=mTempRect;
    bounds.left=mPaddingLeft;
    bounds.right=mRight - mLeft - mPaddingRight;
    final int count=getChildCount();
    int i;
    if (mStackFromBottom) {
      int top;
      int listTop=mListPadding.top;
      for (i=0; i < count; ++i) {
        View child=getChildAt(i);
        top=child.getTop();
        if (top > listTop) {
          bounds.top=top - dividerHeight;
          bounds.bottom=top;
          drawDivider(canvas,bounds,i - 1);
        }
      }
    }
 else {
      int bottom;
      int listBottom=getHeight() - mListPadding.bottom;
      for (i=0; i < count; ++i) {
        View child=getChildAt(i);
        bottom=child.getBottom();
        if (bottom < listBottom) {
          bounds.top=bottom;
          bounds.bottom=bottom + dividerHeight;
          drawDivider(canvas,bounds,i);
        }
      }
    }
  }
  super.dispatchDraw(canvas);
}
