{
  if (mChoiceMode != CHOICE_MODE_NONE && mCheckStates != null && mAdapter != null) {
    final SparseBooleanArray states=mCheckStates;
    final int count=states.size();
    final long[] ids=new long[count];
    final ListAdapter adapter=mAdapter;
    for (int i=0; i < count; i++) {
      ids[i]=adapter.getItemId(states.keyAt(i));
    }
    return ids;
  }
  return new long[0];
}
