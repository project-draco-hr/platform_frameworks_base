{
  if (!isValidPacket(packet))   return;
  if ((packet instanceof DhcpAckPacket)) {
    DhcpResults results=packet.toDhcpResults();
    if (results != null) {
      mDhcpLease=results;
      mOffer=null;
      Log.d(TAG,"Confirmed lease: " + mDhcpLease);
      setDhcpLeaseExpiry(packet);
      notifySuccess();
      transitionTo(mConfiguringInterfaceState);
    }
  }
 else   if (packet instanceof DhcpNakPacket) {
    Log.d(TAG,"Received NAK, returning to INIT");
    mOffer=null;
    transitionTo(mDhcpInitState);
  }
}
