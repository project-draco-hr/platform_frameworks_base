{
  if (!isValidPacket(packet))   return;
  if ((packet instanceof DhcpAckPacket)) {
    DhcpResults results=packet.toDhcpResults();
    if (results != null) {
      mDhcpLease=results;
      Log.d(TAG,"Confirmed lease: " + mDhcpLease);
      mDhcpLeaseExpiry=SystemClock.elapsedRealtime() + mDhcpLease.leaseDuration * 1000;
      mOffer=null;
      transitionTo(mDhcpBoundState);
    }
  }
 else   if (packet instanceof DhcpNakPacket) {
    Log.d(TAG,"Received NAK, returning to INIT");
    mOffer=null;
    transitionTo(mDhcpInitState);
  }
}
