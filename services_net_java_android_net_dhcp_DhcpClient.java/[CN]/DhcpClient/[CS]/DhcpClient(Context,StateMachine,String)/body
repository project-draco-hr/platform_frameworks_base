{
  super(TAG);
  mContext=context;
  mController=controller;
  mIfaceName=iface;
  addState(mStoppedState);
  addState(mDhcpState);
  addState(mDhcpInitState,mDhcpState);
  addState(mWaitBeforeStartState,mDhcpState);
  addState(mDhcpSelectingState,mDhcpState);
  addState(mDhcpRequestingState,mDhcpState);
  addState(mDhcpHaveAddressState,mDhcpState);
  addState(mDhcpBoundState,mDhcpHaveAddressState);
  addState(mWaitBeforeRenewalState,mDhcpHaveAddressState);
  addState(mDhcpRenewingState,mDhcpHaveAddressState);
  addState(mDhcpRebindingState,mDhcpHaveAddressState);
  addState(mDhcpInitRebootState,mDhcpState);
  addState(mDhcpRebootingState,mDhcpState);
  setInitialState(mStoppedState);
  IBinder b=ServiceManager.getService(Context.NETWORKMANAGEMENT_SERVICE);
  mNMService=INetworkManagementService.Stub.asInterface(b);
  mRandom=new Random();
  mKickAlarm=makeWakeupMessage("KICK",CMD_KICK);
  mTimeoutAlarm=makeWakeupMessage("TIMEOUT",CMD_TIMEOUT);
  mRenewAlarm=makeWakeupMessage("RENEW",CMD_RENEW_DHCP);
  mOneshotTimeoutAlarm=makeWakeupMessage("ONESHOT_TIMEOUT",CMD_ONESHOT_TIMEOUT);
}
