{
  super(TAG);
  mContext=context;
  mController=controller;
  mIfaceName=iface;
  addState(mStoppedState);
  addState(mDhcpState);
  addState(mDhcpInitState,mDhcpState);
  addState(mWaitBeforeStartState,mDhcpState);
  addState(mDhcpSelectingState,mDhcpState);
  addState(mDhcpRequestingState,mDhcpState);
  addState(mDhcpHaveAddressState,mDhcpState);
  addState(mDhcpBoundState,mDhcpHaveAddressState);
  addState(mWaitBeforeRenewalState,mDhcpHaveAddressState);
  addState(mDhcpRenewingState,mDhcpHaveAddressState);
  addState(mDhcpRebindingState,mDhcpHaveAddressState);
  addState(mDhcpInitRebootState,mDhcpState);
  addState(mDhcpRebootingState,mDhcpState);
  setInitialState(mStoppedState);
  mAlarmManager=(AlarmManager)mContext.getSystemService(Context.ALARM_SERVICE);
  IBinder b=ServiceManager.getService(Context.NETWORKMANAGEMENT_SERVICE);
  mNMService=INetworkManagementService.Stub.asInterface(b);
  mRandom=new Random();
  mKickIntent=createStateMachineCommandIntent("KICK",CMD_KICK);
  mTimeoutIntent=createStateMachineCommandIntent("TIMEOUT",CMD_TIMEOUT);
  mRenewIntent=createStateMachineCommandIntent("RENEW",DhcpStateMachine.CMD_RENEW_DHCP);
  mOneshotTimeoutIntent=createStateMachineCommandIntent("ONESHOT_TIMEOUT",CMD_ONESHOT_TIMEOUT);
}
