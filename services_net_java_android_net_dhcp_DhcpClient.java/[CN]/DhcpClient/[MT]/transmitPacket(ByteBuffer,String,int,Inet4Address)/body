{
  try {
    if (encap == DhcpPacket.ENCAP_L2) {
      if (DBG)       Log.d(TAG,"Broadcasting " + description);
      Os.sendto(mPacketSock,buf.array(),0,buf.limit(),0,mInterfaceBroadcastAddr);
    }
 else     if (encap == DhcpPacket.ENCAP_BOOTP && to.equals(INADDR_BROADCAST)) {
      if (DBG)       Log.d(TAG,"Broadcasting " + description);
      Os.sendto(mUdpSock,buf,0,to,DhcpPacket.DHCP_SERVER);
    }
 else {
      if (DBG)       Log.d(TAG,String.format("Unicasting %s to %s",description,Os.getpeername(mUdpSock)));
      Os.write(mUdpSock,buf);
    }
  }
 catch (  ErrnoException|IOException e) {
    Log.e(TAG,"Can't send packet: ",e);
    return false;
  }
  return true;
}
