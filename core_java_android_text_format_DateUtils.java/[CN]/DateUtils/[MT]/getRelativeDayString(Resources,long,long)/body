{
  Locale locale=r.getConfiguration().locale;
  if (locale == null) {
    locale=Locale.getDefault();
  }
  Time startTime=new Time();
  startTime.set(day);
  int startDay=Time.getJulianDay(day,startTime.gmtoff);
  Time currentTime=new Time();
  currentTime.set(today);
  int currentDay=Time.getJulianDay(today,currentTime.gmtoff);
  int days=Math.abs(currentDay - startDay);
  boolean past=(today > day);
  if (days == 1) {
    if (past) {
      return LocaleData.get(locale).yesterday;
    }
 else {
      return LocaleData.get(locale).tomorrow;
    }
  }
 else   if (days == 0) {
    return LocaleData.get(locale).today;
  }
  int resId;
  if (past) {
    resId=com.android.internal.R.plurals.num_days_ago;
  }
 else {
    resId=com.android.internal.R.plurals.in_num_days;
  }
  String format=r.getQuantityString(resId,days);
  return String.format(format,days);
}
