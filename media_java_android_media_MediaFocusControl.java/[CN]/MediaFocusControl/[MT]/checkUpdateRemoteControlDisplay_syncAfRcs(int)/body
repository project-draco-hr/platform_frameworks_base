{
  if (mRCStack.isEmpty() || mFocusStack.isEmpty()) {
    clearRemoteControlDisplay_syncAfRcs();
    return;
  }
  FocusRequester af=null;
  try {
    for (int index=mFocusStack.size() - 1; index >= 0; index--) {
      FocusRequester fr=mFocusStack.elementAt(index);
      if ((fr.getStreamType() == AudioManager.STREAM_MUSIC) || (fr.getGainRequest() == AudioManager.AUDIOFOCUS_GAIN)) {
        af=fr;
        break;
      }
    }
  }
 catch (  ArrayIndexOutOfBoundsException e) {
    Log.e(TAG,"Wrong index accessing audio focus stack when updating RCD: " + e);
    af=null;
  }
  if (af == null) {
    clearRemoteControlDisplay_syncAfRcs();
    return;
  }
  if (!af.hasSamePackage(mRCStack.peek().mCallingPackageName)) {
    clearRemoteControlDisplay_syncAfRcs();
    return;
  }
  if (!af.hasSameUid(mRCStack.peek().mCallingUid)) {
    clearRemoteControlDisplay_syncAfRcs();
    return;
  }
  updateRemoteControlDisplay_syncAfRcs(infoChangedFlags);
}
