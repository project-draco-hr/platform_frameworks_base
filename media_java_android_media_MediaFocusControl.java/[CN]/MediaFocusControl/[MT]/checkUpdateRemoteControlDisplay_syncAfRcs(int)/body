{
  if (mRCStack.isEmpty() || mFocusStack.isEmpty()) {
    clearRemoteControlDisplay_syncAfRcs();
    return;
  }
  FocusStackEntry af=null;
  try {
    for (int index=mFocusStack.size() - 1; index >= 0; index--) {
      FocusStackEntry fse=mFocusStack.elementAt(index);
      if ((fse.mStreamType == AudioManager.STREAM_MUSIC) || (fse.mFocusGainRequest == AudioManager.AUDIOFOCUS_GAIN)) {
        af=fse;
        break;
      }
    }
  }
 catch (  ArrayIndexOutOfBoundsException e) {
    Log.e(TAG,"Wrong index accessing audio focus stack when updating RCD: " + e);
    af=null;
  }
  if (af == null) {
    clearRemoteControlDisplay_syncAfRcs();
    return;
  }
  if ((mRCStack.peek().mCallingPackageName != null) && (af.mPackageName != null) && !(mRCStack.peek().mCallingPackageName.compareTo(af.mPackageName) == 0)) {
    clearRemoteControlDisplay_syncAfRcs();
    return;
  }
  if (mRCStack.peek().mCallingUid != af.mCallingUid) {
    clearRemoteControlDisplay_syncAfRcs();
    return;
  }
  updateRemoteControlDisplay_syncAfRcs(infoChangedFlags);
}
