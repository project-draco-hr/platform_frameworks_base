{
  String action=intent.getAction();
  if (action.equals(Intent.ACTION_PACKAGE_REMOVED) || action.equals(Intent.ACTION_PACKAGE_DATA_CLEARED)) {
    if (!intent.getBooleanExtra(Intent.EXTRA_REPLACING,false)) {
      String packageName=intent.getData().getSchemeSpecificPart();
      if (packageName != null) {
        cleanupMediaButtonReceiverForPackage(packageName,true);
      }
    }
  }
 else   if (action.equals(Intent.ACTION_PACKAGE_ADDED) || action.equals(Intent.ACTION_PACKAGE_CHANGED)) {
    String packageName=intent.getData().getSchemeSpecificPart();
    if (packageName != null) {
      cleanupMediaButtonReceiverForPackage(packageName,false);
    }
  }
}
