{
  super.setUp();
  mMockWm=mock(WifiManager.class);
  mMockTm=mock(TelephonyManager.class);
  mMockSm=mock(SubscriptionManager.class);
  mMockCm=mock(ConnectivityManager.class);
  mMockSubDefaults=mock(SubscriptionDefaults.class);
  mNetCapabilities=new NetworkCapabilities();
  when(mMockCm.isNetworkSupported(ConnectivityManager.TYPE_MOBILE)).thenReturn(true);
  when(mMockCm.getDefaultNetworkCapabilitiesForUser(0)).thenReturn(new NetworkCapabilities[]{mNetCapabilities});
  mSignalStrength=mock(SignalStrength.class);
  mServiceState=mock(ServiceState.class);
  mConfig=new Config();
  mConfig.hspaDataDistinguishable=true;
  mCallbackHandler=mock(CallbackHandler.class);
  mNetworkController=new NetworkControllerImpl(mContext,mMockCm,mMockTm,mMockWm,mMockSm,mConfig,Looper.getMainLooper(),mCallbackHandler,mock(AccessPointControllerImpl.class),mock(MobileDataControllerImpl.class),mMockSubDefaults);
  setupNetworkController();
  mNetworkController.addSignalCallback(null);
  mNetworkController.addEmergencyListener(null);
}
