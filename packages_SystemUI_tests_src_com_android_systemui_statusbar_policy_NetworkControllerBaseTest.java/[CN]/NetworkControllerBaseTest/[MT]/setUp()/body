{
  super.setUp();
  System.setProperty("dexmaker.dexcache",mContext.getCacheDir().getPath());
  Thread.currentThread().setContextClassLoader(getClass().getClassLoader());
  mMockWm=mock(WifiManager.class);
  mMockTm=mock(TelephonyManager.class);
  mMockSm=mock(SubscriptionManager.class);
  mMockCm=mock(ConnectivityManager.class);
  mNetCapabilities=new NetworkCapabilities();
  when(mMockCm.isNetworkSupported(ConnectivityManager.TYPE_MOBILE)).thenReturn(true);
  when(mMockCm.getDefaultNetworkCapabilitiesForUser(0)).thenReturn(new NetworkCapabilities[]{mNetCapabilities});
  mSignalStrength=mock(SignalStrength.class);
  mServiceState=mock(ServiceState.class);
  mConfig=new Config();
  mConfig.hspaDataDistinguishable=true;
  mNetworkController=new NetworkControllerImpl(mContext,mMockCm,mMockTm,mMockWm,mMockSm,mConfig,mock(AccessPointControllerImpl.class),mock(MobileDataControllerImpl.class));
  setupNetworkController();
}
