{
  if (sDb == null) {
    File dir=new File(Environment.getDataDirectory(),"test_results");
    String dbName="TestHarness.db";
    File file=new File(dir,dbName);
    sDb=SQLiteDatabase.openOrCreateDatabase(file.getPath(),null);
    if (sDb.getVersion() == 0) {
      int code=FileUtils.setPermissions(file.getPath(),FileUtils.S_IRUSR | FileUtils.S_IWUSR | FileUtils.S_IRGRP| FileUtils.S_IWGRP| FileUtils.S_IROTH| FileUtils.S_IWOTH,-1,-1);
      if (code != 0) {
        Log.w("TestRecorder","Set permissions for " + file.getPath() + " returned = "+ code);
      }
      try {
        sDb.execSQL("CREATE TABLE IF NOT EXISTS tests (_id INT PRIMARY KEY," + "name TEXT," + "result TEXT,"+ "exception TEXT,"+ "started INTEGER,"+ "finished INTEGER,"+ "time INTEGER,"+ "iterations INTEGER,"+ "allocations INTEGER,"+ "parent INTEGER);");
        sDb.setVersion(DATABASE_VERSION);
      }
 catch (      Exception e) {
        Log.e("TestRecorder","failed to create table 'tests'",e);
        sDb=null;
      }
    }
  }
  return sDb;
}
