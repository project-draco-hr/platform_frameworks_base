{
  WindowManager.LayoutParams lp;
  int pixelFormat;
  pixelFormat=PixelFormat.TRANSLUCENT;
  lp=mExpandedDialog.getWindow().getAttributes();
  lp.x=0;
  lp.y=0;
  lp.type=WindowManager.LayoutParams.TYPE_STATUS_BAR_SUB_PANEL;
  lp.flags=0 | WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN | WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS| WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL| WindowManager.LayoutParams.FLAG_DITHER| WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE;
  if (ActivityManager.isHighEndGfx(mDisplay)) {
    lp.flags|=WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED;
  }
  lp.format=pixelFormat;
  lp.gravity=Gravity.TOP | Gravity.FILL_HORIZONTAL;
  lp.setTitle("StatusBarExpanded");
  mExpandedParams=lp;
  updateExpandedSize();
  mExpandedDialog.getWindow().setFormat(pixelFormat);
  mExpandedDialog.getWindow().requestFeature(Window.FEATURE_NO_TITLE);
  mExpandedDialog.setContentView(mExpandedWindowView,new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,ViewGroup.LayoutParams.MATCH_PARENT));
  mExpandedDialog.getWindow().setBackgroundDrawable(null);
}
