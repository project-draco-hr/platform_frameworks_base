{
  Log.d(TAG,"Trying to toggle lock-to-app");
  try {
    IActivityManager activityManager=ActivityManagerNative.getDefault();
    if (activityManager.isInLockTaskMode()) {
      activityManager.stopLockTaskModeOnCurrent();
    }
 else {
      try {
        boolean lockToAppEnabled=Settings.System.getInt(mContext.getContentResolver(),Settings.System.LOCK_TO_APP_ENABLED) != 0;
        if (lockToAppEnabled) {
          activityManager.startLockTaskModeOnCurrent();
        }
      }
 catch (      SettingNotFoundException e) {
      }
    }
  }
 catch (  RemoteException e) {
    Log.d(TAG,"Unable to toggle Lock-to-app",e);
  }
}
