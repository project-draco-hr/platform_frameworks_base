{
  if (state != mState && mVisible && (state == StatusBarState.SHADE_LOCKED || (state == StatusBarState.SHADE && isGoingToNotificationShade()))) {
    clearNotificationEffects();
  }
  if (state == StatusBarState.KEYGUARD) {
    removeRemoteInputEntriesKeptUntilCollapsed();
  }
  mState=state;
  mGroupManager.setStatusBarState(state);
  mFalsingManager.setStatusBarState(state);
  mStatusBarWindowManager.setStatusBarState(state);
  updateDozing();
}
