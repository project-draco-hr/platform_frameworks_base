{
  if (state != mState && mVisible && (state == StatusBarState.SHADE_LOCKED || (state == StatusBarState.SHADE && isGoingToNotificationShade()))) {
    clearNotificationEffects();
  }
  mState=state;
  mGroupManager.setStatusBarState(state);
  mLockedPhoneAnalytics.setStatusBarState(state);
  mStatusBarWindowManager.setStatusBarState(state);
  updateDozing();
}
