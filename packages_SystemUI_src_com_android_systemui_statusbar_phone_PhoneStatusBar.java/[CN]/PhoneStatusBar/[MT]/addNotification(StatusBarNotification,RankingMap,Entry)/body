{
  if (DEBUG)   Log.d(TAG,"addNotification key=" + notification.getKey());
  if (mUseHeadsUp && shouldInterrupt(notification)) {
    if (DEBUG)     Log.d(TAG,"launching notification in heads up mode");
    Entry interruptionCandidate=oldEntry;
    if (interruptionCandidate == null) {
      final StatusBarIconView iconView=createIcon(notification);
      if (iconView == null) {
        return;
      }
      interruptionCandidate=new Entry(notification,iconView);
    }
    ViewGroup holder=mHeadsUpNotificationView.getHolder();
    if (inflateViewsForHeadsUp(interruptionCandidate,holder)) {
      mHeadsUpNotificationView.showNotification(interruptionCandidate);
      return;
    }
  }
  Entry shadeEntry=createNotificationViews(notification);
  if (shadeEntry == null) {
    return;
  }
  if (notification.getNotification().fullScreenIntent != null) {
    awakenDreams();
    if (DEBUG)     Log.d(TAG,"Notification has fullScreenIntent; sending fullScreenIntent");
    try {
      EventLog.writeEvent(EventLogTags.SYSUI_FULLSCREEN_NOTIFICATION,notification.getKey());
      notification.getNotification().fullScreenIntent.send();
    }
 catch (    PendingIntent.CanceledException e) {
    }
  }
  addNotificationViews(shadeEntry,ranking);
  setAreThereNotifications();
}
