{
  if (inPinnedMode) {
    mStatusBarWindowManager.setHeadsUpShowing(true);
  }
 else {
    Runnable endRunnable=new Runnable(){
      @Override public void run(){
        if (!mHeadsUpManager.hasPinnedHeadsUp()) {
          mStatusBarWindowManager.setHeadsUpShowing(false);
        }
      }
    }
;
    if (!mNotificationPanel.isFullyCollapsed()) {
      endRunnable.run();
    }
 else {
      mStackScroller.runAfterAnimationFinished(endRunnable);
    }
  }
}
