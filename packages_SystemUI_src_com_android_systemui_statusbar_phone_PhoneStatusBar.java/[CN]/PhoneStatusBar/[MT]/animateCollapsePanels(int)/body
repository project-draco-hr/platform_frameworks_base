{
  if (SPEW) {
    Log.d(TAG,"animateCollapse():" + " mExpandedVisible=" + mExpandedVisible + " flags="+ flags);
  }
  releaseFocus();
  if ((flags & CommandQueue.FLAG_EXCLUDE_RECENTS_PANEL) == 0) {
    mHandler.removeMessages(MSG_CLOSE_RECENTS_PANEL);
    mHandler.sendEmptyMessage(MSG_CLOSE_RECENTS_PANEL);
  }
  if ((flags & CommandQueue.FLAG_EXCLUDE_SEARCH_PANEL) == 0) {
    mHandler.removeMessages(MSG_CLOSE_SEARCH_PANEL);
    mHandler.sendEmptyMessage(MSG_CLOSE_SEARCH_PANEL);
  }
  mStatusBarWindow.cancelExpandHelper();
  mStatusBarView.collapseAllPanels(true);
}
