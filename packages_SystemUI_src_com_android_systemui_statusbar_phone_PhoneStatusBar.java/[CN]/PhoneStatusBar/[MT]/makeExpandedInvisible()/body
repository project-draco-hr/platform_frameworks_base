{
  if (SPEW)   Log.d(TAG,"makeExpandedInvisible: mExpandedVisible=" + mExpandedVisible + " mExpandedVisible="+ mExpandedVisible);
  if (!mExpandedVisible || mStatusBarWindow == null) {
    return;
  }
  mStatusBarView.collapseAllPanels(false);
  if (mHasFlipSettings) {
    if (mFlipSettingsViewAnim != null)     mFlipSettingsViewAnim.cancel();
    if (mScrollViewAnim != null)     mScrollViewAnim.cancel();
    if (mSettingsButtonAnim != null)     mSettingsButtonAnim.cancel();
    if (mNotificationButtonAnim != null)     mNotificationButtonAnim.cancel();
    if (mClearButtonAnim != null)     mClearButtonAnim.cancel();
    mNotificationScroller.setScaleX(1f);
    mNotificationScroller.setVisibility(View.VISIBLE);
    mSettingsButton.setAlpha(1f);
    mSettingsButton.setVisibility(View.VISIBLE);
    mNotificationPanel.setVisibility(View.GONE);
    mFlipSettingsView.setVisibility(View.GONE);
    mNotificationButton.setVisibility(View.GONE);
    setAreThereNotifications();
  }
  mExpandedVisible=false;
  if (!ENABLE_NOTIFICATION_STACK) {
    ((NotificationRowLayout)mPile).setLayoutTransitionsEnabled(false);
  }
  if (mNavigationBarView != null)   mNavigationBarView.setSlippery(false);
  visibilityChanged(false);
  mStatusBarWindowManager.setStatusBarExpanded(false);
  if ((mDisabled & StatusBarManager.DISABLE_NOTIFICATION_ICONS) == 0) {
    setNotificationIconVisibility(true,com.android.internal.R.anim.fade_in);
  }
  dismissPopups();
  if (mPostCollapseCleanup != null) {
    mPostCollapseCleanup.run();
    mPostCollapseCleanup=null;
  }
  setInteracting(StatusBarManager.WINDOW_STATUS_BAR,false);
}
