{
  final int oldMode=barMode(oldVis,transientFlag,transparentFlag);
  final int newMode=barMode(newVis,transientFlag,transparentFlag);
  if (oldMode == newMode) {
    return -1;
  }
  final boolean animate=windowState == StatusBarManager.WINDOW_STATE_SHOWING;
  transitions.transitionTo(newMode,animate);
  return newMode;
}
