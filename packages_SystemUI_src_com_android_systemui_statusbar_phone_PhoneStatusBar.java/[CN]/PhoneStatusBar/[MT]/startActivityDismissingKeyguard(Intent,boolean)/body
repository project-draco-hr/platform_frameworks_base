{
  if (onlyProvisioned && !isDeviceProvisioned())   return;
  final boolean keyguardShowing=mStatusBarKeyguardViewManager.isShowing();
  dismissKeyguardThenExecute(new OnDismissAction(){
    @Override public boolean onDismiss(){
      AsyncTask.execute(new Runnable(){
        public void run(){
          try {
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);
            mContext.startActivityAsUser(intent,new UserHandle(UserHandle.USER_CURRENT));
            if (keyguardShowing) {
              mWindowManagerService.overridePendingAppTransition(null,0,0,null);
            }
          }
 catch (          RemoteException e) {
          }
        }
      }
);
      animateCollapsePanels();
      return DELAY_DISMISS_TO_ACTIVITY_LAUNCH;
    }
  }
);
}
