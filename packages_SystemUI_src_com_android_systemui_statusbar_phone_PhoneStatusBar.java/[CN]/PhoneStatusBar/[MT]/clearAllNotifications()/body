{
  int numChildren=mStackScroller.getChildCount();
  final ArrayList<View> viewsToHide=new ArrayList<View>(numChildren);
  for (int i=0; i < numChildren; i++) {
    final View child=mStackScroller.getChildAt(i);
    if (mStackScroller.canChildBeDismissed(child)) {
      if (child.getVisibility() == View.VISIBLE) {
        viewsToHide.add(child);
      }
    }
  }
  if (viewsToHide.isEmpty()) {
    animateCollapsePanels(CommandQueue.FLAG_EXCLUDE_NONE);
    return;
  }
  addPostCollapseAction(new Runnable(){
    @Override public void run(){
      try {
        mBarService.onClearAllNotifications(mCurrentUserId);
      }
 catch (      Exception ex) {
      }
    }
  }
);
  performDismissAllAnimations(viewsToHide);
}
