{
  if (!mShowCarrierInPanel)   return;
  if (DEBUG) {
    Slog.d(TAG,String.format("pileh=%d scrollh=%d carrierh=%d",mPile.getHeight(),mScrollView.getHeight(),mCarrierLabelHeight));
  }
  final boolean emergencyCallsShownElsewhere=mEmergencyCallLabel != null;
  final boolean makeVisible=!(emergencyCallsShownElsewhere && mNetworkController.isEmergencyOnly()) && mPile.getHeight() < (mNotificationPanel.getHeight() - mCarrierLabelHeight - mNotificationHeaderHeight);
  if (force || mCarrierLabelVisible != makeVisible) {
    mCarrierLabelVisible=makeVisible;
    if (DEBUG) {
      Slog.d(TAG,"making carrier label " + (makeVisible ? "visible" : "invisible"));
    }
    mCarrierLabel.animate().cancel();
    if (makeVisible) {
      mCarrierLabel.setVisibility(View.VISIBLE);
    }
    mCarrierLabel.animate().alpha(makeVisible ? 1f : 0f).setDuration(150).setListener(makeVisible ? null : new AnimatorListenerAdapter(){
      @Override public void onAnimationEnd(      Animator animation){
        if (!mCarrierLabelVisible) {
          mCarrierLabel.setVisibility(View.INVISIBLE);
          mCarrierLabel.setAlpha(0f);
        }
      }
    }
).start();
  }
}
