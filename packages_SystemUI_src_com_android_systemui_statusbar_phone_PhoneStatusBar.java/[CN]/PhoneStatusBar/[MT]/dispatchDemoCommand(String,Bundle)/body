{
  if (!mDemoModeAllowed) {
    mDemoModeAllowed=Settings.Global.getInt(mContext.getContentResolver(),"sysui_demo_allowed",0) != 0;
  }
  if (!mDemoModeAllowed)   return;
  if (command.equals(COMMAND_ENTER)) {
    mDemoMode=true;
  }
 else   if (command.equals(COMMAND_EXIT)) {
    mDemoMode=false;
    checkBarModes();
  }
 else   if (!mDemoMode) {
    dispatchDemoCommand(COMMAND_ENTER,new Bundle());
  }
  boolean modeChange=command.equals(COMMAND_ENTER) || command.equals(COMMAND_EXIT);
  if ((modeChange || command.equals(COMMAND_VOLUME)) && mVolumeComponent != null) {
    mVolumeComponent.dispatchDemoCommand(command,args);
  }
  if (modeChange || command.equals(COMMAND_CLOCK)) {
    dispatchDemoCommandToView(command,args,R.id.clock);
  }
  if (modeChange || command.equals(COMMAND_BATTERY)) {
    dispatchDemoCommandToView(command,args,R.id.battery);
  }
  if (modeChange || command.equals(COMMAND_STATUS)) {
    if (mDemoStatusIcons == null) {
      mDemoStatusIcons=new DemoStatusIcons(mStatusIcons,mIconSize);
    }
    mDemoStatusIcons.dispatchDemoCommand(command,args);
  }
  if (mNetworkController != null && (modeChange || command.equals(COMMAND_NETWORK))) {
    mNetworkController.dispatchDemoCommand(command,args);
  }
  if (modeChange || command.equals(COMMAND_NOTIFICATIONS)) {
    View notifications=mStatusBarView == null ? null : mStatusBarView.findViewById(R.id.notification_icon_area);
    if (notifications != null) {
      String visible=args.getString("visible");
      int vis=mDemoMode && "false".equals(visible) ? View.INVISIBLE : View.VISIBLE;
      notifications.setVisibility(vis);
    }
  }
  if (command.equals(COMMAND_BARS)) {
    String mode=args.getString("mode");
    int barMode="opaque".equals(mode) ? MODE_OPAQUE : "translucent".equals(mode) ? MODE_TRANSLUCENT : "semi-transparent".equals(mode) ? MODE_SEMI_TRANSPARENT : "transparent".equals(mode) ? MODE_TRANSPARENT : "warning".equals(mode) ? MODE_WARNING : -1;
    if (barMode != -1) {
      boolean animate=true;
      if (mStatusBarView != null) {
        mStatusBarView.getBarTransitions().transitionTo(barMode,animate);
      }
      if (mNavigationBarView != null) {
        mNavigationBarView.getBarTransitions().transitionTo(barMode,animate);
      }
    }
  }
}
