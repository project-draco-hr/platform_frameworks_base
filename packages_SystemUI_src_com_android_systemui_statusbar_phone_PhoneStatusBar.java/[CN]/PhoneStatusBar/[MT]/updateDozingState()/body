{
  if (mState != StatusBarState.KEYGUARD && !mNotificationPanel.isDozing()) {
    return;
  }
  boolean animate=!mDozing && mDozeScrimController.isPulsing();
  mNotificationPanel.setDozing(mDozing,animate);
  mStackScroller.setDark(mDozing,animate,mScreenOnTouchLocation);
  mScrimController.setDozing(mDozing);
  mDozeScrimController.setDozing(mDozing,animate);
}
