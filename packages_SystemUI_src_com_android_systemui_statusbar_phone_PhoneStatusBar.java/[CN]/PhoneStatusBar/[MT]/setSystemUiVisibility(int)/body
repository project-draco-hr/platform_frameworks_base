{
  final int old=mSystemUiVisibility;
  final int diff=vis ^ old;
  if (diff != 0) {
    mSystemUiVisibility=vis;
    if (0 != (diff & View.SYSTEM_UI_FLAG_LOW_PROFILE)) {
      final boolean lightsOut=(0 != (vis & View.SYSTEM_UI_FLAG_LOW_PROFILE));
      if (lightsOut) {
        animateCollapse();
      }
      if (mNavigationBarView != null) {
        mNavigationBarView.setLowProfile(lightsOut);
      }
    }
    notifyUiVisibilityChanged();
  }
}
