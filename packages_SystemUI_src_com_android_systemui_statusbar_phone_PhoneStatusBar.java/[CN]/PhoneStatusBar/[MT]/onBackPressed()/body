{
  if (mState == StatusBarState.KEYGUARD || mState == StatusBarState.SHADE_LOCKED) {
    if (mStatusBarKeyguardViewManager.onBackPressed()) {
      return true;
    }
    if (mNotificationPanel.isQsExpanded()) {
      mNotificationPanel.animateCloseQs();
      return true;
    }
    return false;
  }
 else {
    if (mNotificationPanel.isQsExpanded()) {
      mNotificationPanel.animateCloseQs();
    }
 else {
      animateCollapsePanels();
    }
    return true;
  }
}
