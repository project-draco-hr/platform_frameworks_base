{
  final int old=mDisabled;
  final int diff=state ^ old;
  mDisabled=state;
  if (DEBUG) {
    Slog.d(TAG,String.format("disable: 0x%08x -> 0x%08x (diff: 0x%08x)",old,state,diff));
  }
  StringBuilder flagdbg=new StringBuilder();
  flagdbg.append("disable: < ");
  flagdbg.append(((state & StatusBarManager.DISABLE_EXPAND) != 0) ? "EXPAND" : "expand");
  flagdbg.append(((diff & StatusBarManager.DISABLE_EXPAND) != 0) ? "* " : " ");
  flagdbg.append(((state & StatusBarManager.DISABLE_NOTIFICATION_ICONS) != 0) ? "ICONS" : "icons");
  flagdbg.append(((diff & StatusBarManager.DISABLE_NOTIFICATION_ICONS) != 0) ? "* " : " ");
  flagdbg.append(((state & StatusBarManager.DISABLE_NOTIFICATION_ALERTS) != 0) ? "ALERTS" : "alerts");
  flagdbg.append(((diff & StatusBarManager.DISABLE_NOTIFICATION_ALERTS) != 0) ? "* " : " ");
  flagdbg.append(((state & StatusBarManager.DISABLE_NOTIFICATION_TICKER) != 0) ? "TICKER" : "ticker");
  flagdbg.append(((diff & StatusBarManager.DISABLE_NOTIFICATION_TICKER) != 0) ? "* " : " ");
  flagdbg.append(((state & StatusBarManager.DISABLE_SYSTEM_INFO) != 0) ? "SYSTEM_INFO" : "system_info");
  flagdbg.append(((diff & StatusBarManager.DISABLE_SYSTEM_INFO) != 0) ? "* " : " ");
  flagdbg.append(((state & StatusBarManager.DISABLE_BACK) != 0) ? "BACK" : "back");
  flagdbg.append(((diff & StatusBarManager.DISABLE_BACK) != 0) ? "* " : " ");
  flagdbg.append(((state & StatusBarManager.DISABLE_HOME) != 0) ? "HOME" : "home");
  flagdbg.append(((diff & StatusBarManager.DISABLE_HOME) != 0) ? "* " : " ");
  flagdbg.append(((state & StatusBarManager.DISABLE_RECENT) != 0) ? "RECENT" : "recent");
  flagdbg.append(((diff & StatusBarManager.DISABLE_RECENT) != 0) ? "* " : " ");
  flagdbg.append(((state & StatusBarManager.DISABLE_CLOCK) != 0) ? "CLOCK" : "clock");
  flagdbg.append(((diff & StatusBarManager.DISABLE_CLOCK) != 0) ? "* " : " ");
  flagdbg.append(((state & StatusBarManager.DISABLE_SEARCH) != 0) ? "SEARCH" : "search");
  flagdbg.append(((diff & StatusBarManager.DISABLE_SEARCH) != 0) ? "* " : " ");
  flagdbg.append(">");
  Slog.d(TAG,flagdbg.toString());
  if ((diff & StatusBarManager.DISABLE_SYSTEM_INFO) != 0) {
    mSystemIconArea.animate().cancel();
    if ((state & StatusBarManager.DISABLE_SYSTEM_INFO) != 0) {
      mSystemIconArea.animate().alpha(0f).translationY(mNaturalBarHeight * 0.5f).setDuration(175).setInterpolator(new DecelerateInterpolator(1.5f)).setListener(mMakeIconsInvisible).start();
    }
 else {
      mSystemIconArea.setVisibility(View.VISIBLE);
      mSystemIconArea.animate().alpha(1f).translationY(0).setStartDelay(0).setInterpolator(new DecelerateInterpolator(1.5f)).setDuration(175).start();
    }
  }
  if ((diff & StatusBarManager.DISABLE_CLOCK) != 0) {
    boolean show=(state & StatusBarManager.DISABLE_CLOCK) == 0;
    showClock(show);
  }
  if ((diff & StatusBarManager.DISABLE_EXPAND) != 0) {
    if ((state & StatusBarManager.DISABLE_EXPAND) != 0) {
      animateCollapsePanels();
    }
  }
  if ((diff & (StatusBarManager.DISABLE_HOME | StatusBarManager.DISABLE_RECENT | StatusBarManager.DISABLE_BACK| StatusBarManager.DISABLE_SEARCH)) != 0) {
    if (mNavigationBarView != null)     mNavigationBarView.setDisabledFlags(state);
    if ((state & StatusBarManager.DISABLE_RECENT) != 0) {
      mHandler.removeMessages(MSG_CLOSE_RECENTS_PANEL);
      mHandler.sendEmptyMessage(MSG_CLOSE_RECENTS_PANEL);
    }
  }
  if ((diff & StatusBarManager.DISABLE_NOTIFICATION_ICONS) != 0) {
    if ((state & StatusBarManager.DISABLE_NOTIFICATION_ICONS) != 0) {
      if (mTicking) {
        haltTicker();
      }
      mNotificationIcons.animate().alpha(0f).translationY(mNaturalBarHeight * 0.5f).setDuration(175).setInterpolator(new DecelerateInterpolator(1.5f)).setListener(mMakeIconsInvisible).start();
    }
 else {
      mNotificationIcons.setVisibility(View.VISIBLE);
      mNotificationIcons.animate().alpha(1f).translationY(0).setStartDelay(0).setInterpolator(new DecelerateInterpolator(1.5f)).setDuration(175).start();
    }
  }
 else   if ((diff & StatusBarManager.DISABLE_NOTIFICATION_TICKER) != 0) {
    if (mTicking && (state & StatusBarManager.DISABLE_NOTIFICATION_TICKER) != 0) {
      haltTicker();
    }
  }
}
