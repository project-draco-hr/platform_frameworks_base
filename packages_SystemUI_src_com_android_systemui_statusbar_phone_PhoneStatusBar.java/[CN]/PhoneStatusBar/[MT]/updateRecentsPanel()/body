{
  boolean visible=false;
  if (mRecentsPanel != null) {
    visible=mRecentsPanel.getVisibility() == View.VISIBLE;
    WindowManagerImpl.getDefault().removeView(mRecentsPanel);
  }
  LinearLayout tmpRoot=new LinearLayout(mContext);
  mRecentsPanel=(RecentsPanelView)LayoutInflater.from(mContext).inflate(R.layout.status_bar_recent_panel,tmpRoot,false);
  mRecentsPanel.setOnTouchListener(new TouchOutsideListener(MSG_CLOSE_RECENTS_PANEL,mRecentsPanel));
  mRecentsPanel.setVisibility(View.GONE);
  WindowManager.LayoutParams lp=getRecentsLayoutParams(mRecentsPanel.getLayoutParams());
  WindowManagerImpl.getDefault().addView(mRecentsPanel,lp);
  mRecentsPanel.setBar(this);
  if (visible) {
    mRecentsPanel.setVisibility(View.VISIBLE);
    mRecentsPanel.show(true,false);
  }
}
