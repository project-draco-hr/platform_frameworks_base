{
  if (mState == StatusBarState.KEYGUARD) {
    mKeyguardStatusView.setVisibility(View.VISIBLE);
    mKeyguardIndicationController.setVisible(true);
    mNotificationPanel.resetViews();
    mKeyguardUserSwitcher.setKeyguard(true);
  }
 else {
    mKeyguardStatusView.setVisibility(View.GONE);
    mKeyguardIndicationController.setVisible(false);
    mKeyguardUserSwitcher.setKeyguard(false);
  }
  if (mState == StatusBarState.KEYGUARD || mState == StatusBarState.SHADE_LOCKED) {
    mKeyguardBottomArea.setVisibility(View.VISIBLE);
    mScrimController.setKeyguardShowing(true);
  }
 else {
    mKeyguardBottomArea.setVisibility(View.GONE);
    mScrimController.setKeyguardShowing(false);
  }
  mNotificationPanel.setBarState(mState);
  updateDozingState();
  updateStackScrollerState();
  updatePublicMode();
  updateNotifications();
  checkBarModes();
  updateCarrierLabelVisibility(false);
  updateMediaMetaData(false);
  mKeyguardMonitor.notifyKeyguardState(mStatusBarKeyguardViewManager.isShowing(),mStatusBarKeyguardViewManager.isSecure());
}
