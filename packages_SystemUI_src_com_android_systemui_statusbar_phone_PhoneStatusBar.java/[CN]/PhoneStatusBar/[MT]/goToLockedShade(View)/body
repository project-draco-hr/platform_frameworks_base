{
  ExpandableNotificationRow row=null;
  if (expandView instanceof ExpandableNotificationRow) {
    row=(ExpandableNotificationRow)expandView;
    row.setUserExpanded(true);
  }
  boolean fullShadeNeedsBouncer=!userAllowsPrivateNotificationsInPublic(mCurrentUserId) || !mShowLockscreenNotifications || mFalsingManager.shouldEnforceBouncer();
  if (isLockscreenPublicMode() && fullShadeNeedsBouncer) {
    mLeaveOpenOnKeyguardHide=true;
    showBouncer();
    mDraggedDownRow=row;
  }
 else {
    mNotificationPanel.animateToFullShade(0);
    setBarState(StatusBarState.SHADE_LOCKED);
    updateKeyguardState(false,false);
    if (row != null) {
      row.setUserLocked(false);
    }
  }
}
