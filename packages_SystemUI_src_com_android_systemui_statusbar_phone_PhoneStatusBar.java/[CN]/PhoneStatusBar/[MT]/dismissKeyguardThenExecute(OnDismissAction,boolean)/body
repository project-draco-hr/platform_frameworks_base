{
  if (mStatusBarKeyguardViewManager.isShowing()) {
    if (UnlockMethodCache.getInstance(mContext).isMethodInsecure() && mNotificationPanel.isLaunchTransitionRunning() && !afterKeyguardGone) {
      action.onDismiss();
      mNotificationPanel.setLaunchTransitionEndRunnable(new Runnable(){
        @Override public void run(){
          mStatusBarKeyguardViewManager.dismiss();
        }
      }
);
    }
 else {
      mStatusBarKeyguardViewManager.dismissWithAction(action,afterKeyguardGone);
    }
  }
 else {
    action.onDismiss();
  }
}
