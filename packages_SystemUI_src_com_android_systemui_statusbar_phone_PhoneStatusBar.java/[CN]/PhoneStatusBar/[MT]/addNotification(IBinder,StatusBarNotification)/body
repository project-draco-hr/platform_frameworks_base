{
  if (DEBUG)   Log.d(TAG,"addNotification score=" + notification.getScore());
  StatusBarIconView iconView=addNotificationViews(key,notification);
  if (iconView == null)   return;
  if (mUseHeadsUp && shouldInterrupt(notification)) {
    if (DEBUG)     Log.d(TAG,"launching notification in heads up mode");
    PendingIntent contentIntent=notification.getNotification().contentIntent;
    final View.OnClickListener listener=(contentIntent != null) ? new NotificationClicker(contentIntent,notification.getPackageName(),notification.getTag(),notification.getId()) : null;
    if (mHeadsUpNotificationView.applyContent(notification.getNotification(),listener)) {
      mCurrentlyInterruptingNotification=notification;
      mHandler.sendEmptyMessage(MSG_SHOW_HEADS_UP);
      mHandler.removeMessages(MSG_HIDE_HEADS_UP);
      if (HEADS_UP_DECAY_MS > 0) {
        mHandler.sendEmptyMessageDelayed(MSG_HIDE_HEADS_UP,HEADS_UP_DECAY_MS);
      }
    }
  }
 else   if (notification.getNotification().fullScreenIntent != null) {
    awakenDreams();
    if (DEBUG)     Log.d(TAG,"Notification has fullScreenIntent; sending fullScreenIntent");
    try {
      notification.getNotification().fullScreenIntent.send();
    }
 catch (    PendingIntent.CanceledException e) {
    }
  }
 else {
    if (mCurrentlyInterruptingNotification == null) {
      tick(null,notification,true);
    }
  }
  setAreThereNotifications();
  updateExpandedViewPos(EXPANDED_LEAVE_ALONE);
}
