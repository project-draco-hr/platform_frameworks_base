{
  mShapes.clear();
  double metricValues[]=new double[data.frames.length];
  if (data.frames.length == 0) {
    return;
  }
  for (int metricIndex=0; metricIndex < Metrics.length; metricIndex++) {
    int lastBar=0;
    for (int frameIndex=0; frameIndex < data.frames.length; frameIndex++) {
      TileData frame[]=data.frames[frameIndex];
      int newBar=(frame[0].top + frame[0].bottom) / 2;
      MetricGen s=Metrics[metricIndex];
      double absoluteValue=s.getValue(frame);
      double relativeValue=absoluteValue / s.getMax();
      relativeValue=Math.min(1,relativeValue);
      relativeValue=Math.max(0,relativeValue);
      int rightPos=(int)(-BAR_WIDTH * metricIndex);
      int leftPos=(int)(-BAR_WIDTH * (metricIndex + relativeValue));
      ShapeDrawable graphBar=new ShapeDrawable();
      graphBar.getPaint().setColor(Color.BLUE);
      graphBar.setBounds(leftPos,lastBar,rightPos,newBar);
      mShapes.add(graphBar);
      metricValues[frameIndex]=absoluteValue;
      lastBar=newBar;
    }
    Arrays.sort(metricValues);
    for (int statIndex=0; statIndex < Stats.length; statIndex++) {
      mStats[metricIndex][statIndex]=Stats[statIndex].getValue(metricValues);
    }
    mSingleStats=data.singleStats;
  }
}
