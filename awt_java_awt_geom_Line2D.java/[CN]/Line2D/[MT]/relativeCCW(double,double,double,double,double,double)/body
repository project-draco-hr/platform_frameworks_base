{
  x2-=x1;
  y2-=y1;
  px-=x1;
  py-=y1;
  double t=px * y2 - py * x2;
  if (t == 0.0) {
    t=px * x2 + py * y2;
    if (t > 0.0) {
      px-=x2;
      py-=y2;
      t=px * x2 + py * y2;
      if (t < 0.0) {
        t=0.0;
      }
    }
  }
  return t < 0.0 ? -1 : (t > 0.0 ? 1 : 0);
}
