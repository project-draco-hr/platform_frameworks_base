{
  if (!hasSavedSurface()) {
    return;
  }
  mAnimatingWithSavedSurface=true;
  int numInteresting=0;
  int numDrawn=0;
  for (int i=allAppWindows.size() - 1; i >= 0; i--) {
    WindowState w=allAppWindows.get(i);
    if (w.hasSavedSurface()) {
      w.restoreSavedSurface();
    }
    if (w != startingWindow && !w.mAppDied && (!mAppAnimator.freezingScreen || !w.mAppFreezing)) {
      numInteresting++;
      if (w.isDrawnLw()) {
        numDrawn++;
      }
    }
  }
  allDrawn|=(numInteresting > 0) && (numInteresting == numDrawn);
  if (DEBUG_APP_TRANSITIONS || DEBUG_ANIM)   Slog.d(TAG,"restoreSavedSurfaces: " + appWindowToken + " allDrawn="+ allDrawn);
}
