{
  if (mDialog == null) {
    @SuppressLint("InflateParams") final View view=View.inflate(context,R.layout.dialog_bugreport_info,null);
    mInfoName=(EditText)view.findViewById(R.id.name);
    mInfoTitle=(EditText)view.findViewById(R.id.title);
    mInfoDescription=(EditText)view.findViewById(R.id.description);
    mInfoName.setOnFocusChangeListener(new OnFocusChangeListener(){
      @Override public void onFocusChange(      View v,      boolean hasFocus){
        if (hasFocus) {
          return;
        }
        sanitizeName();
      }
    }
);
    mDialog=new AlertDialog.Builder(context).setView(view).setTitle(context.getString(R.string.bugreport_info_dialog_title)).setCancelable(false).setPositiveButton(context.getString(com.android.internal.R.string.ok),null).setNegativeButton(context.getString(com.android.internal.R.string.cancel),new DialogInterface.OnClickListener(){
      @Override public void onClick(      DialogInterface dialog,      int id){
        if (!mTempName.equals(mSavedName)) {
          setBugreportNameProperty(mPid,mSavedName);
        }
      }
    }
).create();
    mDialog.getWindow().setAttributes(new WindowManager.LayoutParams(WindowManager.LayoutParams.TYPE_SYSTEM_DIALOG));
  }
  mSavedName=mTempName=name;
  mPid=pid;
  if (!TextUtils.isEmpty(name)) {
    mInfoName.setText(name);
  }
  if (!TextUtils.isEmpty(title)) {
    mInfoTitle.setText(title);
  }
  if (!TextUtils.isEmpty(description)) {
    mInfoDescription.setText(description);
  }
  mDialog.show();
  if (mOkButton == null) {
    mOkButton=mDialog.getButton(DialogInterface.BUTTON_POSITIVE);
    mOkButton.setOnClickListener(new View.OnClickListener(){
      @Override public void onClick(      View view){
        sanitizeName();
        final String name=mInfoName.getText().toString();
        final String title=mInfoTitle.getText().toString();
        final String description=mInfoDescription.getText().toString();
        updateBugreportInfo(mPid,name,title,description);
        mDialog.dismiss();
      }
    }
);
  }
}
