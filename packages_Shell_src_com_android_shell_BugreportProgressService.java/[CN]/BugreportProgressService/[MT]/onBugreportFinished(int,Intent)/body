{
  final File bugreportFile=getFileExtra(intent,EXTRA_BUGREPORT);
  if (bugreportFile == null) {
    Log.wtf(TAG,"Missing " + EXTRA_BUGREPORT + " on intent "+ intent);
    return;
  }
  mInfoDialog.onBugreportFinished(pid);
  BugreportInfo info=getInfo(pid);
  if (info == null) {
    Log.v(TAG,"Creating info for untracked pid " + pid);
    info=new BugreportInfo(mContext,pid);
    mProcesses.put(pid,info);
  }
  info.renameScreenshots(mScreenshotsDir);
  info.bugreportFile=bugreportFile;
  final File screenshot=getFileExtra(intent,EXTRA_SCREENSHOT);
  if (screenshot != null) {
    info.addScreenshot(screenshot);
  }
  info.finished=true;
  final Configuration conf=mContext.getResources().getConfiguration();
  if ((conf.uiMode & Configuration.UI_MODE_TYPE_MASK) != Configuration.UI_MODE_TYPE_WATCH) {
    triggerLocalNotification(mContext,info);
  }
}
