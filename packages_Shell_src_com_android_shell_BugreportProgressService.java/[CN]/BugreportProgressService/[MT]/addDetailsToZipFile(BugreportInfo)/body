{
  final File dir=info.bugreportFile.getParentFile();
  final File tmpZip=new File(dir,"tmp-" + info.bugreportFile.getName());
  Log.d(TAG,"Writing temporary zip file (" + tmpZip + ")");
  try (ZipFile oldZip=new ZipFile(info.bugreportFile);ZipOutputStream zos=new ZipOutputStream(new FileOutputStream(tmpZip))){
    Enumeration<? extends ZipEntry> entries=oldZip.entries();
    while (entries.hasMoreElements()) {
      final ZipEntry entry=entries.nextElement();
      final String entryName=entry.getName();
      if (!entry.isDirectory()) {
        addEntry(zos,entryName,entry.getTime(),oldZip.getInputStream(entry));
      }
 else {
        Log.w(TAG,"skipping directory entry: " + entryName);
      }
    }
    addEntry(zos,"title.txt",info.title);
    addEntry(zos,"description.txt",info.description);
  }
 catch (  IOException e) {
    Log.e(TAG,"exception zipping file " + tmpZip,e);
    return;
  }
  if (!tmpZip.renameTo(info.bugreportFile)) {
    Log.e(TAG,"Could not rename " + tmpZip + " to "+ info.bugreportFile);
  }
}
