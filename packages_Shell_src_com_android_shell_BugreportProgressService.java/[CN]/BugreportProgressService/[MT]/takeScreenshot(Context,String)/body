{
  final ProcessBuilder screencap=new ProcessBuilder().command("/system/bin/screencap","-p",screenshotFile);
  Log.d(TAG,"Taking screenshot using " + screencap.command());
  try {
    final int exitValue=screencap.start().waitFor();
    if (exitValue == 0) {
      ((Vibrator)context.getSystemService(Context.VIBRATOR_SERVICE)).vibrate(150);
      return true;
    }
    Log.e(TAG,"screencap (" + screencap.command() + ") failed: "+ exitValue);
  }
 catch (  IOException e) {
    Log.e(TAG,"screencap (" + screencap.command() + ") failed",e);
  }
catch (  InterruptedException e) {
    Log.w(TAG,"Thread interrupted while screencap still running");
    Thread.currentThread().interrupt();
  }
  return false;
}
