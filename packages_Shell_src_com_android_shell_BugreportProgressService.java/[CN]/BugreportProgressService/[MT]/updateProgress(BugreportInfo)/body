{
  if (info.max <= 0 || info.progress < 0) {
    Log.e(TAG,"Invalid progress values for " + info);
    return;
  }
  final Context context=getApplicationContext();
  final NumberFormat nf=NumberFormat.getPercentInstance();
  nf.setMinimumFractionDigits(2);
  nf.setMaximumFractionDigits(2);
  final String percentText=nf.format((double)info.progress / info.max);
  final Action cancelAction=new Action.Builder(null,context.getString(com.android.internal.R.string.cancel),newCancelIntent(context,info)).build();
  final Intent infoIntent=new Intent(context,BugreportProgressService.class);
  infoIntent.setAction(INTENT_BUGREPORT_INFO_LAUNCH);
  infoIntent.putExtra(EXTRA_PID,info.pid);
  final Action infoAction=new Action.Builder(null,context.getString(R.string.bugreport_info_action),PendingIntent.getService(context,info.pid,infoIntent,PendingIntent.FLAG_UPDATE_CURRENT)).build();
  final String title=context.getString(R.string.bugreport_in_progress_title);
  final String name=info.name != null ? info.name : context.getString(R.string.bugreport_unnamed);
  final Notification notification=new Notification.Builder(context).setSmallIcon(com.android.internal.R.drawable.stat_sys_adb).setContentTitle(title).setTicker(title).setContentText(name).setContentInfo(percentText).setProgress(info.max,info.progress,false).setOngoing(true).setLocalOnly(true).setColor(context.getColor(com.android.internal.R.color.system_notification_accent_color)).addAction(infoAction).addAction(cancelAction).build();
  NotificationManager.from(context).notify(TAG,info.pid,notification);
}
