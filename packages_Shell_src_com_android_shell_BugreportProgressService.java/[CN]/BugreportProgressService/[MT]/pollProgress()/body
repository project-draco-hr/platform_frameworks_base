{
synchronized (mProcesses) {
    if (mProcesses.size() == 0) {
      Log.d(TAG,"No process to poll progress.");
    }
    for (int i=0; i < mProcesses.size(); i++) {
      final int pid=mProcesses.keyAt(i);
      final String progressKey=DUMPSTATE_PREFIX + pid + PROGRESS_SUFFIX;
      final int progress=SystemProperties.getInt(progressKey,0);
      if (progress == 0) {
        Log.v(TAG,"System property " + progressKey + " is not set yet");
        continue;
      }
      final int max=SystemProperties.getInt(DUMPSTATE_PREFIX + pid + MAX_SUFFIX,0);
      final BugreportInfo info=mProcesses.valueAt(i);
      final boolean maxChanged=max > 0 && max != info.max;
      final boolean progressChanged=progress > 0 && progress != info.progress;
      if (progressChanged || maxChanged) {
        if (progressChanged) {
          if (DEBUG)           Log.v(TAG,"Updating progress for PID " + pid + " from "+ info.progress+ " to "+ progress);
          info.progress=progress;
        }
        if (maxChanged) {
          Log.i(TAG,"Updating max progress for PID " + pid + " from "+ info.max+ " to "+ max);
          info.max=max;
        }
        info.lastUpdate=System.currentTimeMillis();
        updateProgress(info);
      }
 else {
        long inactiveTime=System.currentTimeMillis() - info.lastUpdate;
        if (inactiveTime >= INACTIVITY_TIMEOUT) {
          Log.w(TAG,"No progress update for process " + pid + " since "+ info.getFormattedLastUpdate());
          stopProgress(info.pid,null);
        }
      }
    }
    return true;
  }
}
