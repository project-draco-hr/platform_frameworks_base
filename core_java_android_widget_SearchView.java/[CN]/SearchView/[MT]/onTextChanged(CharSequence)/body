{
  CharSequence text=mQueryTextView.getText();
  boolean hasText=!TextUtils.isEmpty(text);
  if (isSubmitButtonEnabled()) {
    mSubmitButton.setVisibility(hasText ? VISIBLE : GONE);
    requestLayout();
    invalidate();
  }
  updateVoiceButton(!hasText);
  updateCloseButton();
  if (mOnQueryChangeListener != null) {
    mOnQueryChangeListener.onQueryTextChanged(newText.toString());
  }
}
