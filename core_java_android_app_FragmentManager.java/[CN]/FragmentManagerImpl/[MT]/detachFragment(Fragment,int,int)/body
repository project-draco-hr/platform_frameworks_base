{
  if (DEBUG)   Log.v(TAG,"detach: " + fragment);
  if (!fragment.mDetached) {
    fragment.mDetached=true;
    if (fragment.mAdded) {
      if (mAdded != null) {
        if (DEBUG)         Log.v(TAG,"remove from detach: " + fragment);
        mAdded.remove(fragment);
      }
      if (fragment.mHasMenu && fragment.mMenuVisible) {
        mNeedMenuInvalidate=true;
      }
      fragment.mAdded=false;
      moveToState(fragment,Fragment.CREATED,transition,transitionStyle,false);
    }
  }
}
