{
  if (DEBUG)   Log.v(TAG,"detach: " + fragment);
  if (!fragment.mDetached) {
    fragment.mDetached=true;
    if (fragment.mAdded) {
      mAdded.remove(fragment);
      if (fragment.mHasMenu) {
        mNeedMenuInvalidate=true;
      }
      fragment.mAdded=false;
      fragment.mRemoving=true;
      moveToState(fragment,Fragment.CREATED,transition,transitionStyle);
    }
  }
}
