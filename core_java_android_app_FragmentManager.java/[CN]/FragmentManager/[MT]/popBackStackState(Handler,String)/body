{
  if (mBackStack == null) {
    return false;
  }
  if (name == null) {
    int last=mBackStack.size() - 1;
    if (last < 0) {
      return false;
    }
    final BackStackEntry bss=mBackStack.remove(last);
    handler.post(new Runnable(){
      public void run(){
        bss.popFromBackStack();
        moveToState(mCurState,reverseTransit(bss.getTransition()),bss.getTransitionStyle(),true);
      }
    }
);
  }
 else {
    int index=mBackStack.size() - 1;
    while (index >= 0) {
      BackStackEntry bss=mBackStack.get(index);
      if (name.equals(bss.getName())) {
        break;
      }
    }
    if (index < 0 || index == mBackStack.size() - 1) {
      return false;
    }
    final ArrayList<BackStackEntry> states=new ArrayList<BackStackEntry>();
    for (int i=mBackStack.size() - 1; i > index; i--) {
      states.add(mBackStack.remove(i));
    }
    handler.post(new Runnable(){
      public void run(){
        for (int i=0; i < states.size(); i++) {
          states.get(i).popFromBackStack();
        }
        moveToState(mCurState,true);
      }
    }
);
  }
  return true;
}
