{
  if (Float.compare(mDragProgress,progress) == 0) {
    return;
  }
  if ((mDragProgress == 0 && progress > 0) || (mDragProgress == 1.0f && progress < 1.0f)) {
    mSummaryContent.setLayerType(View.LAYER_TYPE_HARDWARE,null);
    mDraggableContent.setLayerType(View.LAYER_TYPE_HARDWARE,null);
    mMoreOptionsContainer.setLayerType(View.LAYER_TYPE_HARDWARE,null);
  }
  if ((mDragProgress > 0 && progress == 0) || (mDragProgress < 1.0f && progress == 1.0f)) {
    mSummaryContent.setLayerType(View.LAYER_TYPE_NONE,null);
    mDraggableContent.setLayerType(View.LAYER_TYPE_NONE,null);
    mMoreOptionsContainer.setLayerType(View.LAYER_TYPE_NONE,null);
  }
  mDragProgress=progress;
  mSummaryContent.setAlpha(progress);
  final float inverseAlpha=1.0f - progress;
  mOptionsContainer.setAlpha(inverseAlpha);
  mMoreOptionsContainer.setAlpha(inverseAlpha);
  mEmbeddedContentScrim.setBackgroundColor(computeScrimColor());
  if (progress == 0) {
    if (mOptionsStateChangeListener != null) {
      mOptionsStateChangeListener.onOptionsOpened();
    }
    mSummaryContent.setVisibility(View.GONE);
    mEmbeddedContentScrim.setOnClickListener(this);
    mExpandCollapseIcon.setBackgroundResource(R.drawable.ic_expand_less);
  }
 else {
    mSummaryContent.setVisibility(View.VISIBLE);
  }
  if (progress == 1.0f) {
    if (mOptionsStateChangeListener != null) {
      mOptionsStateChangeListener.onOptionsClosed();
    }
    if (mMoreOptionsContainer.getVisibility() != View.GONE) {
      mMoreOptionsContainer.setVisibility(View.INVISIBLE);
    }
    mDraggableContent.setVisibility(View.INVISIBLE);
    mEmbeddedContentScrim.setOnClickListener(null);
    mEmbeddedContentScrim.setClickable(false);
    mExpandCollapseIcon.setBackgroundResource(R.drawable.ic_expand_more);
  }
 else {
    if (mMoreOptionsContainer.getVisibility() != View.GONE) {
      mMoreOptionsContainer.setVisibility(View.VISIBLE);
    }
    mDraggableContent.setVisibility(View.VISIBLE);
  }
}
