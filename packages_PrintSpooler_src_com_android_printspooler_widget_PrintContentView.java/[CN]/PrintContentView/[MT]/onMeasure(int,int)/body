{
  final boolean wasOpened=isOptionsOpened();
  measureChild(mStaticContent,widthMeasureSpec,heightMeasureSpec);
  if (mSummaryContent.getVisibility() != View.GONE) {
    measureChild(mSummaryContent,widthMeasureSpec,heightMeasureSpec);
  }
  measureChild(mDynamicContent,widthMeasureSpec,heightMeasureSpec);
  measureChild(mPrintButton,widthMeasureSpec,heightMeasureSpec);
  mClosedOptionsOffsetY=mSummaryContent.getMeasuredHeight() - mDraggableContent.getMeasuredHeight();
  if (mCurrentOptionsOffsetY == Integer.MIN_VALUE) {
    mCurrentOptionsOffsetY=mClosedOptionsOffsetY;
  }
  final int heightSize=MeasureSpec.getSize(heightMeasureSpec);
  ViewGroup.LayoutParams params=mEmbeddedContentContainer.getLayoutParams();
  params.height=heightSize - mStaticContent.getMeasuredHeight() - mSummaryContent.getMeasuredHeight()- mDynamicContent.getMeasuredHeight() + mDraggableContent.getMeasuredHeight();
  if (mOldDraggableHeight != mDraggableContent.getMeasuredHeight()) {
    if (mOldDraggableHeight != 0) {
      mCurrentOptionsOffsetY=wasOpened ? 0 : mClosedOptionsOffsetY;
    }
    mOldDraggableHeight=mDraggableContent.getMeasuredHeight();
  }
  final int hostHeightMeasureSpec=MeasureSpec.makeMeasureSpec(MeasureSpec.UNSPECIFIED,0);
  measureChild(mEmbeddedContentContainer,widthMeasureSpec,hostHeightMeasureSpec);
  setMeasuredDimension(resolveSize(MeasureSpec.getSize(widthMeasureSpec),widthMeasureSpec),resolveSize(heightSize,heightMeasureSpec));
}
