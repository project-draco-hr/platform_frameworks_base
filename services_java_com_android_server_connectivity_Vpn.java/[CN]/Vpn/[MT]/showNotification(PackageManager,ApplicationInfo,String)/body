{
  NotificationManager nm=(NotificationManager)mContext.getSystemService(Context.NOTIFICATION_SERVICE);
  if (nm != null) {
    Drawable icon=app.loadIcon(pm);
    Bitmap bitmap=null;
    if (icon.getIntrinsicWidth() > 0 && icon.getIntrinsicHeight() > 0) {
      int width=mContext.getResources().getDimensionPixelSize(android.R.dimen.notification_large_icon_width);
      int height=mContext.getResources().getDimensionPixelSize(android.R.dimen.notification_large_icon_height);
      icon.setBounds(0,0,width,height);
      bitmap=Bitmap.createBitmap(width,height,Bitmap.Config.ARGB_8888);
      icon.draw(new Canvas(bitmap));
    }
    String label=app.loadLabel(pm).toString();
    if (session == null) {
      session=label;
    }
    Intent intent=new Intent();
    intent.setClassName("com.android.vpndialogs","com.android.vpndialogs.ManageDialog");
    intent.putExtra("packageName",mPackageName);
    intent.putExtra("interfaceName",mInterfaceName);
    intent.putExtra("session",session);
    intent.putExtra("startTime",android.os.SystemClock.elapsedRealtime());
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);
    long identity=Binder.clearCallingIdentity();
    Notification notification=new Notification.Builder(mContext).setSmallIcon(R.drawable.vpn_connected).setLargeIcon(bitmap).setTicker(mContext.getString(R.string.vpn_ticker,label)).setContentTitle(mContext.getString(R.string.vpn_title,label)).setContentText(mContext.getString(R.string.vpn_text,session)).setContentIntent(PendingIntent.getActivity(mContext,0,intent,0)).setDefaults(Notification.DEFAULT_ALL).setOngoing(true).getNotification();
    nm.notify(R.drawable.vpn_connected,notification);
    Binder.restoreCallingIdentity(identity);
  }
}
