{
  long now=SystemClock.elapsedRealtime();
  if (mTimer == -1) {
    mTimer=now;
    Thread.sleep(1);
  }
 else   if (now - mTimer <= 30000) {
    Thread.sleep(yield ? 200 : 1);
  }
 else {
    mInfo.state=LegacyVpnInfo.STATE_TIMEOUT;
    throw new IllegalStateException("Time is up");
  }
}
