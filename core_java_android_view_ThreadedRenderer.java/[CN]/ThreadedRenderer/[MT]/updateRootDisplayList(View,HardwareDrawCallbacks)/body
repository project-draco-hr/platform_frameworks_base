{
  view.mPrivateFlags|=View.PFLAG_DRAWN;
  view.mRecreateDisplayList=(view.mPrivateFlags & View.PFLAG_INVALIDATED) == View.PFLAG_INVALIDATED;
  view.mPrivateFlags&=~View.PFLAG_INVALIDATED;
  Trace.traceBegin(Trace.TRACE_TAG_VIEW,"getDisplayList");
  HardwareCanvas canvas=mRootNode.start(mWidth,mHeight);
  try {
    canvas.save();
    callbacks.onHardwarePreDraw(canvas);
    canvas.drawRenderNode(view.getDisplayList());
    callbacks.onHardwarePostDraw(canvas);
    canvas.restore();
  }
  finally {
    mRootNode.end(canvas);
    Trace.traceEnd(Trace.TRACE_TAG_VIEW);
  }
  view.mRecreateDisplayList=false;
}
