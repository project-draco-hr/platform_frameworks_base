{
  Trace.traceBegin(Trace.TRACE_TAG_VIEW,"Record View#draw()");
  updateViewTreeDisplayList(view);
  if (mRootNodeNeedsUpdate || !mRootNode.isValid()) {
    DisplayListCanvas canvas=mRootNode.start(mSurfaceWidth,mSurfaceHeight);
    try {
      final int saveCount=canvas.save();
      canvas.translate(mInsetLeft,mInsetTop);
      callbacks.onHardwarePreDraw(canvas);
      canvas.insertReorderBarrier();
      canvas.drawRenderNode(view.updateDisplayListIfDirty());
      canvas.insertInorderBarrier();
      callbacks.onHardwarePostDraw(canvas);
      canvas.restoreToCount(saveCount);
      mRootNodeNeedsUpdate=false;
    }
  finally {
      mRootNode.end(canvas);
    }
  }
  Trace.traceEnd(Trace.TRACE_TAG_VIEW);
}
