{
  if (state != null) {
    final Iterator<String> i=state.keySet().iterator();
    while (i.hasNext()) {
      try {
        final String id=i.next();
        final Bundle astate=state.getBundle(id);
        LocalActivityRecord r=mActivities.get(id);
        if (r != null) {
          r.instanceState=astate;
        }
 else {
          r=new LocalActivityRecord(id,null);
          r.instanceState=astate;
          mActivities.put(id,r);
          mActivityArray.add(r);
        }
      }
 catch (      Exception e) {
        Log.e(TAG,"Exception thrown when restoring LocalActivityManager state",e);
      }
    }
  }
  mCurState=CREATED;
}
