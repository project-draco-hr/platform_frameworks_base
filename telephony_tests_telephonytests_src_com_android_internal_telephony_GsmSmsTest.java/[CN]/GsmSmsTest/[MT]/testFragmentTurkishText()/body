{
  boolean isGsmPhone=(TelephonyManager.getDefault().getPhoneType() == TelephonyManager.PHONE_TYPE_GSM);
  int[] oldTables=GsmAlphabet.getEnabledSingleShiftTables();
  int[] turkishTable={1};
  GsmAlphabet.setEnabledSingleShiftTables(turkishTable);
  String text="????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????" + "??????????????????????????????????";
  SmsMessageBase.TextEncodingDetails ted=SmsMessage.calculateLength(text,false);
  assertEquals(1,ted.msgCount);
  assertEquals(154,ted.codeUnitCount);
  assertEquals(1,ted.codeUnitSize);
  assertEquals(0,ted.languageTable);
  assertEquals(1,ted.languageShiftTable);
  if (isGsmPhone) {
    ArrayList<String> fragments=android.telephony.SmsMessage.fragmentText(text);
    assertEquals(1,fragments.size());
    assertEquals(text,fragments.get(0));
    assertEquals(77,fragments.get(0).length());
  }
  text="????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????" + "????????????????????????????????????";
  ted=SmsMessage.calculateLength(text,false);
  assertEquals(2,ted.msgCount);
  assertEquals(156,ted.codeUnitCount);
  assertEquals(1,ted.codeUnitSize);
  assertEquals(0,ted.languageTable);
  assertEquals(1,ted.languageShiftTable);
  if (isGsmPhone) {
    ArrayList<String> fragments=android.telephony.SmsMessage.fragmentText(text);
    assertEquals(2,fragments.size());
    assertEquals(text,fragments.get(0) + fragments.get(1));
    assertEquals(74,fragments.get(0).length());
    assertEquals(4,fragments.get(1).length());
  }
  text="????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????" + "????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????" + "????????????????????????????????????????????????????????????";
  ted=SmsMessage.calculateLength(text,false);
  assertEquals(3,ted.msgCount);
  assertEquals(320,ted.codeUnitCount);
  assertEquals(1,ted.codeUnitSize);
  assertEquals(0,ted.languageTable);
  assertEquals(1,ted.languageShiftTable);
  if (isGsmPhone) {
    ArrayList<String> fragments=android.telephony.SmsMessage.fragmentText(text);
    assertEquals(3,fragments.size());
    assertEquals(text,fragments.get(0) + fragments.get(1) + fragments.get(2));
    assertEquals(74,fragments.get(0).length());
    assertEquals(74,fragments.get(1).length());
    assertEquals(12,fragments.get(2).length());
  }
  GsmAlphabet.setEnabledSingleShiftTables(oldTables);
}
