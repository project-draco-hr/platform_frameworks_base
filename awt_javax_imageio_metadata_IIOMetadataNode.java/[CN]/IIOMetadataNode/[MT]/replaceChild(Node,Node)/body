{
  if (newChild == null) {
    throw new IllegalArgumentException("newChild == null!");
  }
  IIOMetadataNode newIIOChild=(IIOMetadataNode)newChild;
  IIOMetadataNode oldIIOChild=(IIOMetadataNode)oldChild;
  IIOMetadataNode next=oldIIOChild.nextSibling;
  IIOMetadataNode previous=oldIIOChild.previousSibling;
  newIIOChild.parent=this;
  newIIOChild.nextSibling=next;
  newIIOChild.previousSibling=previous;
  if (lastChild == oldIIOChild) {
    lastChild=newIIOChild;
  }
  if (firstChild == oldIIOChild) {
    firstChild=newIIOChild;
  }
  if (next != null) {
    next.previousSibling=newIIOChild;
  }
  if (previous != null) {
    previous.nextSibling=newIIOChild;
  }
  oldIIOChild.parent=null;
  oldIIOChild.nextSibling=next;
  oldIIOChild.previousSibling=previous;
  return oldIIOChild;
}
