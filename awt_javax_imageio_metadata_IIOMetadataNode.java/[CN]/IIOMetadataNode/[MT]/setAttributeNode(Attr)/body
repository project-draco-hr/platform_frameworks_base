{
  Element owner=newAttr.getOwnerElement();
  if (owner != null) {
    if (owner == this) {
      return null;
    }
 else {
      throw new DOMException(DOMException.INUSE_ATTRIBUTE_ERR,"Attribute is already in use");
    }
  }
  String name=newAttr.getName();
  Attr oldAttr=getAttributeNode(name);
  if (oldAttr != null) {
    removeAttributeNode(oldAttr);
  }
  IIOMetadataAttr iioAttr;
  if (newAttr instanceof IIOMetadataAttr) {
    iioAttr=(IIOMetadataAttr)newAttr;
    iioAttr.setOwnerElement(this);
  }
 else {
    iioAttr=new IIOMetadataAttr(name,newAttr.getValue(),this);
  }
  attrs.list.add(iioAttr);
  return oldAttr;
}
