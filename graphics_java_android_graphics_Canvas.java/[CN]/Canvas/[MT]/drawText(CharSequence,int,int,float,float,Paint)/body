{
  if ((start | end | (end - start)| (text.length() - end)) < 0) {
    throw new IndexOutOfBoundsException();
  }
  if (text instanceof String || text instanceof SpannedString || text instanceof SpannableString) {
    native_drawText(mNativeCanvasWrapper,text.toString(),start,end,x,y,paint.mBidiFlags,paint.mNativePaint,paint.mNativeTypeface);
  }
 else   if (text instanceof GraphicsOperations) {
    ((GraphicsOperations)text).drawText(this,start,end,x,y,paint);
  }
 else {
    char[] buf=TemporaryBuffer.obtain(end - start);
    TextUtils.getChars(text,start,end,buf,0);
    native_drawText(mNativeCanvasWrapper,buf,0,end - start,x,y,paint.mBidiFlags,paint.mNativePaint,paint.mNativeTypeface);
    TemporaryBuffer.recycle(buf);
  }
}
