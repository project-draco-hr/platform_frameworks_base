{
  if (isHardwareAccelerated()) {
    throw new RuntimeException("Can't set a bitmap device on a HW accelerated canvas");
  }
  if (bitmap == null) {
    native_setBitmap(mNativeCanvasWrapper,null);
    mDensity=Bitmap.DENSITY_NONE;
  }
 else {
    if (!bitmap.isMutable()) {
      throw new IllegalStateException();
    }
    throwIfCannotDraw(bitmap);
    native_setBitmap(mNativeCanvasWrapper,bitmap);
    mDensity=bitmap.mDensity;
  }
  mBitmap=bitmap;
}
