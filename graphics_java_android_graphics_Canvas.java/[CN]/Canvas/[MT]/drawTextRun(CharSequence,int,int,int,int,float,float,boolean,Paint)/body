{
  if (text == null) {
    throw new NullPointerException("text is null");
  }
  if (paint == null) {
    throw new NullPointerException("paint is null");
  }
  if ((start | end | end - start | text.length() - end) < 0) {
    throw new IndexOutOfBoundsException();
  }
  if (text instanceof String || text instanceof SpannedString || text instanceof SpannableString) {
    native_drawTextRun(mNativeCanvasWrapper,text.toString(),start,end,contextStart,contextEnd,x,y,isRtl,paint.mNativePaint,paint.mNativeTypeface);
  }
 else   if (text instanceof GraphicsOperations) {
    ((GraphicsOperations)text).drawTextRun(this,start,end,contextStart,contextEnd,x,y,isRtl,paint);
  }
 else {
    int contextLen=contextEnd - contextStart;
    int len=end - start;
    char[] buf=TemporaryBuffer.obtain(contextLen);
    TextUtils.getChars(text,contextStart,contextEnd,buf,0);
    native_drawTextRun(mNativeCanvasWrapper,buf,start - contextStart,len,0,contextLen,x,y,isRtl,paint.mNativePaint,paint.mNativeTypeface);
    TemporaryBuffer.recycle(buf);
  }
}
