{
  if (!bitmap.isMutable()) {
    throw new IllegalStateException("Immutable bitmap passed to Canvas constructor");
  }
  throwIfCannotDraw(bitmap);
  mNativeCanvasWrapper=initRaster(bitmap);
  mFinalizer=sRegistry.registerNativeAllocation(this,mNativeCanvasWrapper);
  mBitmap=bitmap;
  mDensity=bitmap.mDensity;
}
