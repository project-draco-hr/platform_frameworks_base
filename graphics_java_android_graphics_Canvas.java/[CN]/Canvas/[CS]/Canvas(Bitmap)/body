{
  if (!bitmap.isMutable()) {
    throw new IllegalStateException("Immutable bitmap passed to Canvas constructor");
  }
  throwIfRecycled(bitmap);
  mNativeCanvas=initRaster(bitmap.ni());
  mBitmap=bitmap;
  final int density=bitmap.mDensity;
  mDensity=density == Bitmap.DENSITY_NONE ? DisplayMetrics.DENSITY_DEFAULT : density;
}
