{
  if (mPreviewThread != null) {
    throw new IllegalStateException("Previewing is in progress");
  }
  if (mMediaItems.contains(mediaItem)) {
    throw new IllegalArgumentException("Media item already exists: " + mediaItem.getId());
  }
  final int mediaItemsCount=mMediaItems.size();
  if (mediaItemsCount > 0) {
    removeTransitionAfter(mediaItemsCount - 1);
  }
  mMediaItems.add(mediaItem);
  computeTimelineDuration();
}
