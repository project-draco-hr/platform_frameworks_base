{
  super.draw(canvas);
  if (mForeground != null) {
    final Drawable foreground=mForeground;
    if (mForegroundBoundsChanged) {
      mForegroundBoundsChanged=false;
      final Rect selfBounds=mSelfBounds;
      final Rect overlayBounds=mOverlayBounds;
      final int w=mRight - mLeft;
      final int h=mBottom - mTop;
      if (mForegroundInPadding) {
        selfBounds.set(0,0,w,h);
      }
 else {
        selfBounds.set(mPaddingLeft,mPaddingTop,w - mPaddingRight,h - mPaddingBottom);
      }
      final int layoutDirection=getResolvedLayoutDirection();
      Gravity.apply(mForegroundGravity,foreground.getIntrinsicWidth(),foreground.getIntrinsicHeight(),selfBounds,overlayBounds,layoutDirection);
      foreground.setBounds(overlayBounds);
    }
    foreground.draw(canvas);
  }
}
