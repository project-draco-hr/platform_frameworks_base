{
  final BatteryStats.ControllerActivityCounter counter=u.getBluetoothControllerActivity();
  if (counter == null) {
    return;
  }
  final long idleTimeMs=counter.getIdleTimeCounter().getCountLocked(statsType);
  final long rxTimeMs=counter.getRxTimeCounter().getCountLocked(statsType);
  final long txTimeMs=counter.getTxTimeCounters()[0].getCountLocked(statsType);
  final long totalTimeMs=idleTimeMs + txTimeMs + rxTimeMs;
  double powerMah=counter.getPowerCounter().getCountLocked(statsType) / (double)(1000 * 60 * 60);
  if (powerMah == 0) {
    powerMah=((idleTimeMs * mIdleMa) + (rxTimeMs * mRxMa) + (txTimeMs * mTxMa)) / (1000 * 60 * 60);
  }
  app.bluetoothPowerMah=powerMah;
  app.bluetoothRunningTimeMs=totalTimeMs;
  app.btRxBytes=u.getNetworkActivityBytes(BatteryStats.NETWORK_BT_RX_DATA,statsType);
  app.btTxBytes=u.getNetworkActivityBytes(BatteryStats.NETWORK_BT_TX_DATA,statsType);
  mAppTotalPowerMah+=powerMah;
  mAppTotalTimeMs+=totalTimeMs;
}
