{
  final long idleTimeMs=stats.getBluetoothControllerActivity(BatteryStats.CONTROLLER_IDLE_TIME,statsType);
  final long txTimeMs=stats.getBluetoothControllerActivity(BatteryStats.CONTROLLER_TX_TIME,statsType);
  final long rxTimeMs=stats.getBluetoothControllerActivity(BatteryStats.CONTROLLER_RX_TIME,statsType);
  final long totalTimeMs=idleTimeMs + txTimeMs + rxTimeMs;
  double powerMah=stats.getBluetoothControllerActivity(BatteryStats.CONTROLLER_POWER_DRAIN,statsType) / (double)(1000 * 60 * 60);
  if (powerMah == 0) {
    powerMah=((idleTimeMs * mIdleMa) + (rxTimeMs * mRxMa) + (txTimeMs * mTxMa)) / (1000 * 60 * 60);
  }
  if (DEBUG && powerMah != 0) {
    Log.d(TAG,"Bluetooth active: time=" + (totalTimeMs) + " power="+ BatteryStatsHelper.makemAh(powerMah));
  }
  app.usagePowerMah=powerMah;
  app.usageTimeMs=totalTimeMs;
}
