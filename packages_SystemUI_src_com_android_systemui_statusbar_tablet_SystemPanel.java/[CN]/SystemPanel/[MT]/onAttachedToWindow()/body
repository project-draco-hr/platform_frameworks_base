{
  TextView settingsButton=(TextView)findViewById(R.id.settings_button);
  settingsButton.setOnClickListener(new View.OnClickListener(){
    public void onClick(    View v){
      getContext().startActivity(new Intent(android.provider.Settings.ACTION_SETTINGS).setFlags(Intent.FLAG_ACTIVITY_NEW_TASK));
      mBar.animateCollapse();
    }
  }
);
  mBrightnessButton=(ImageButton)findViewById(R.id.brightness);
  mBrightnessButton.setOnClickListener(new View.OnClickListener(){
    public void onClick(    View v){
      rotateBrightness();
    }
  }
);
  mSoundButton=(ImageButton)findViewById(R.id.sound);
  mSoundButton.setOnClickListener(new View.OnClickListener(){
    public void onClick(    View v){
      setSilentMode(!getSilentMode());
      mSoundButton.setAlpha(getSilentMode() ? 0x7F : 0xFF);
    }
  }
);
  mOrientationButton=(ImageButton)findViewById(R.id.orientation);
  mOrientationButton.setOnClickListener(new View.OnClickListener(){
    public void onClick(    View v){
      Toast.makeText(getContext(),"Orientation control not implemented; please adjust neck angle.",Toast.LENGTH_SHORT).show();
    }
  }
);
  mAirplaneButton=(ImageButton)findViewById(R.id.airplane);
  mAirplaneButton.setAlpha(mAirplaneMode ? 0xFF : 0x7F);
  mAirplaneButton.setOnClickListener(new View.OnClickListener(){
    public void onClick(    View v){
      boolean newMode=!getAirplaneMode();
      Toast.makeText(getContext(),"Attempting to turn " + (newMode ? "on" : "off") + " airplane mode (flaky).",Toast.LENGTH_SHORT).show();
      setAirplaneMode(newMode);
    }
  }
);
  mGpsButton=(ImageButton)findViewById(R.id.gps);
  mGpsButton.setOnClickListener(new View.OnClickListener(){
    public void onClick(    View v){
      toggleGps();
      refreshGps();
    }
  }
);
  mBluetoothButton=(ImageButton)findViewById(R.id.bluetooth);
  mBluetoothButton.setOnClickListener(new View.OnClickListener(){
    public void onClick(    View v){
      toggleBluetooth();
      refreshBluetooth();
    }
  }
);
  IntentFilter filter=new IntentFilter();
  filter.addAction(AudioManager.RINGER_MODE_CHANGED_ACTION);
  filter.addAction(Intent.ACTION_BATTERY_CHANGED);
  filter.addAction(WifiManager.WIFI_STATE_CHANGED_ACTION);
  filter.addAction(WifiManager.SUPPLICANT_STATE_CHANGED_ACTION);
  filter.addAction(WifiManager.NETWORK_STATE_CHANGED_ACTION);
  filter.addAction(WifiManager.RSSI_CHANGED_ACTION);
  filter.addAction(TelephonyIntents.ACTION_SIM_STATE_CHANGED);
  filter.addAction(BluetoothAdapter.ACTION_STATE_CHANGED);
  getContext().registerReceiver(mReceiver,filter);
  mBatteryMeter=(ImageView)findViewById(R.id.battery_meter);
  mBatteryMeter.setImageResource(R.drawable.sysbar_battery);
  mBatteryMeter.setImageLevel(0);
  mSignalMeter=(ImageView)findViewById(R.id.signal_meter);
  mBatteryMeter.setImageResource(R.drawable.sysbar_signal);
  mBatteryMeter.setImageLevel(0);
  mBatteryText=(TextView)findViewById(R.id.battery_info);
  mSignalText=(TextView)findViewById(R.id.signal_info);
  refreshSignalMeters();
  refreshBluetooth();
  refreshGps();
}
