{
  List<AccessibilityServiceInfo> result=null;
synchronized (mLock) {
    final int resolvedUserId=mSecurityPolicy.resolveCallingUserIdEnforcingPermissionsLocked(userId);
    result=mEnabledServicesForFeedbackTempList;
    result.clear();
    List<Service> services=getUserStateLocked(resolvedUserId).mServices;
    while (feedbackType != 0) {
      final int feedbackTypeBit=(1 << Integer.numberOfTrailingZeros(feedbackType));
      feedbackType&=~feedbackTypeBit;
      final int serviceCount=services.size();
      for (int i=0; i < serviceCount; i++) {
        Service service=services.get(i);
        if ((service.mFeedbackType & feedbackTypeBit) != 0) {
          result.add(service.mAccessibilityServiceInfo);
        }
      }
    }
  }
  return result;
}
