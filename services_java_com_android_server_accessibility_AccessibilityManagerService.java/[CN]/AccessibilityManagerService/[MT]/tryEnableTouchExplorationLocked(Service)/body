{
  UserState userState=getUserStateLocked(service.mUserId);
  if (!userState.mIsTouchExplorationEnabled && service.mRequestTouchExplorationMode && service.canReceiveEvents()) {
    final boolean canToggleTouchExploration=userState.mTouchExplorationGrantedServices.contains(service.mComponentName);
    if (!service.mIsAutomation && !canToggleTouchExploration) {
      showEnableTouchExplorationDialog(service);
    }
 else {
      Settings.Secure.putIntForUser(mContext.getContentResolver(),Settings.Secure.TOUCH_EXPLORATION_ENABLED,1,userState.mUserId);
    }
  }
}
