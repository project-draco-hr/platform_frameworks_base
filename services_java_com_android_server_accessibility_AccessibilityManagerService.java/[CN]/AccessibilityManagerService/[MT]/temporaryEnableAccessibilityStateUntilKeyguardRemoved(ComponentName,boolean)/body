{
  mSecurityPolicy.enforceCallingPermission(Manifest.permission.TEMPORARY_ENABLE_ACCESSIBILITY,TEMPORARY_ENABLE_ACCESSIBILITY_UNTIL_KEYGUARD_REMOVED);
  try {
    if (!mWindowManagerService.isKeyguardLocked()) {
      return;
    }
  }
 catch (  RemoteException re) {
    return;
  }
synchronized (mLock) {
    UserState userState=getCurrentUserStateLocked();
    mTempStateChangeForCurrentUserMemento.initialize(mCurrentUserId,getCurrentUserStateLocked());
    userState.mIsAccessibilityEnabled=true;
    userState.mIsTouchExplorationEnabled=touchExplorationEnabled;
    userState.mIsDisplayMagnificationEnabled=false;
    userState.mEnabledServices.clear();
    userState.mEnabledServices.add(service);
    userState.mTouchExplorationGrantedServices.clear();
    userState.mTouchExplorationGrantedServices.add(service);
    performServiceManagementLocked(userState);
    scheduleUpdateInputFilter(userState);
    scheduleSendStateToClientsLocked(userState);
  }
}
