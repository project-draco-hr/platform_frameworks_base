{
  if (!service.mRequestTouchExplorationMode) {
    return;
  }
  UserState userState=getUserStateLocked(service.mUserId);
  if (!userState.mIsTouchExplorationEnabled) {
    return;
  }
  final int serviceCount=userState.mServices.size();
  for (int i=0; i < serviceCount; i++) {
    Service other=userState.mServices.get(i);
    if (other != service) {
      if (service.mResolveInfo.serviceInfo.applicationInfo.targetSdkVersion <= Build.VERSION_CODES.JELLY_BEAN_MR1) {
        if (other.mRequestTouchExplorationMode && userState.mTouchExplorationGrantedServices.contains(service.mComponentName)) {
          return;
        }
      }
 else {
        if (other.mRequestTouchExplorationMode && (service.mIsAutomation || mContext.getPackageManager().checkPermission(android.Manifest.permission.CAN_REQUEST_TOUCH_EXPLORATION_MODE,service.mComponentName.getPackageName()) == PackageManager.PERMISSION_GRANTED)) {
          return;
        }
      }
    }
  }
  Settings.Secure.putIntForUser(mContext.getContentResolver(),Settings.Secure.TOUCH_EXPLORATION_ENABLED,0,userState.mUserId);
}
