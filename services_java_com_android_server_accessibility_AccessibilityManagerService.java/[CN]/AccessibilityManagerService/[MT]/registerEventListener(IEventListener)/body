{
  mSecurityPolicy.enforceCallingPermission(Manifest.permission.RETRIEVE_WINDOW_CONTENT,FUNCTION_REGISTER_EVENT_LISTENER);
  ComponentName componentName=new ComponentName("foo.bar","FakeAccessibilityService");
synchronized (mLock) {
    Service oldService=mComponentNameToServiceMap.get(componentName);
    if (oldService != null) {
      tryRemoveServiceLocked(oldService);
    }
  }
  AccessibilityServiceInfo accessibilityServiceInfo=new AccessibilityServiceInfo();
  accessibilityServiceInfo.eventTypes=AccessibilityEvent.TYPES_ALL_MASK;
  accessibilityServiceInfo.feedbackType=AccessibilityServiceInfo.FEEDBACK_GENERIC;
  Service service=new Service(componentName,accessibilityServiceInfo,true);
  service.onServiceConnected(componentName,listener.asBinder());
  return service;
}
