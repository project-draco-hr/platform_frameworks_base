{
  WindowManagerService wm=(WindowManagerService)ServiceManager.getService(Context.WINDOW_SERVICE);
  if (mIsEnabled) {
    final boolean hasSpokenFeedbackServices=!getEnabledAccessibilityServiceList(AccessibilityServiceInfo.FEEDBACK_SPOKEN).isEmpty();
    if (hasSpokenFeedbackServices) {
      if (mHasInputFilter) {
        return;
      }
      if (mInputFilter == null) {
        mInputFilter=new AccessibilityInputFilter(mContext);
      }
      wm.setInputFilter(mInputFilter);
      mHasInputFilter=true;
    }
 else {
      if (mHasInputFilter) {
        wm.setInputFilter(null);
        mHasInputFilter=false;
      }
    }
  }
 else {
    if (mHasInputFilter) {
      wm.setInputFilter(null);
      mHasInputFilter=false;
    }
  }
}
