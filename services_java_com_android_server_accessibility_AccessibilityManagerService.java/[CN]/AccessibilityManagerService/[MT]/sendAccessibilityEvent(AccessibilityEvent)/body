{
  final int eventType=event.getEventType();
  if (eventType == AccessibilityEvent.TYPE_VIEW_HOVER_ENTER && mTouchExplorationGestureStarted) {
    mTouchExplorationGestureStarted=false;
    AccessibilityEvent gestureStartEvent=AccessibilityEvent.obtain(AccessibilityEvent.TYPE_TOUCH_EXPLORATION_GESTURE_START);
    sendAccessibilityEvent(gestureStartEvent);
  }
synchronized (mLock) {
    if (mSecurityPolicy.canDispatchAccessibilityEvent(event)) {
      mSecurityPolicy.updateActiveWindowAndEventSourceLocked(event);
      notifyAccessibilityServicesDelayedLocked(event,false);
      notifyAccessibilityServicesDelayedLocked(event,true);
    }
    if (mHasInputFilter && mInputFilter != null) {
      mMainHandler.obtainMessage(MSG_SEND_ACCESSIBILITY_EVENT_TO_INPUT_FILTER,AccessibilityEvent.obtain(event)).sendToTarget();
    }
    event.recycle();
    mHandledFeedbackTypes=0;
  }
  if (eventType == AccessibilityEvent.TYPE_VIEW_HOVER_EXIT && mTouchExplorationGestureEnded) {
    mTouchExplorationGestureEnded=false;
    AccessibilityEvent gestureEndEvent=AccessibilityEvent.obtain(AccessibilityEvent.TYPE_TOUCH_EXPLORATION_GESTURE_END);
    sendAccessibilityEvent(gestureEndEvent);
  }
  return (OWN_PROCESS_ID != Binder.getCallingPid());
}
