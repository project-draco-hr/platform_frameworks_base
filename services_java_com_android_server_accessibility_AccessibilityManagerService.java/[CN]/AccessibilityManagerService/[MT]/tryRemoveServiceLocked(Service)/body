{
  UserState userState=getUserStateLocked(service.mUserId);
  final boolean removed=userState.mServices.remove(service);
  if (!removed) {
    return false;
  }
  userState.mComponentNameToServiceMap.remove(service.mComponentName);
  service.unlinkToOwnDeath();
  service.dispose();
  scheduleUpdateInputFilter(userState);
  tryDisableTouchExplorationLocked(service);
  tryDisableEnhancedWebAccessibilityLocked(service);
  return removed;
}
