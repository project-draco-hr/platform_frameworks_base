{
  final boolean removed=mServices.remove(service);
  if (!removed) {
    return false;
  }
  mComponentNameToServiceMap.remove(service.mComponentName);
  mHandler.removeMessages(service.mId);
  service.unlinkToOwnDeath();
  service.dispose();
  updateInputFilterLocked();
  return removed;
}
