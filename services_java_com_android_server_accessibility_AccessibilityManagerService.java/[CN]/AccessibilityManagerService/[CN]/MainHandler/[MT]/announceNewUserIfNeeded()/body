{
synchronized (mLock) {
    UserState userState=getCurrentUserStateLocked();
    if (userState.mIsAccessibilityEnabled) {
      UserManager userManager=(UserManager)mContext.getSystemService(Context.USER_SERVICE);
      String message=mContext.getString(R.string.user_switched,userManager.getUserInfo(mCurrentUserId).name);
      AccessibilityEvent event=AccessibilityEvent.obtain(AccessibilityEvent.TYPE_ANNOUNCEMENT);
      event.getText().add(message);
      event.setWindowId(mSecurityPolicy.getRetrievalAllowingWindowLocked());
      sendAccessibilityEvent(event,mCurrentUserId);
    }
  }
}
