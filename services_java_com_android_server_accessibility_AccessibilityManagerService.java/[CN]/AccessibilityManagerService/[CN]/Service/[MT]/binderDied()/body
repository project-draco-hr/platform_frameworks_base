{
synchronized (mLock) {
    if (!isInitializedLocked()) {
      return;
    }
    mKeyEventDispatcher.flush();
    UserState userState=getUserStateLocked(mUserId);
    removeServiceLocked(this,userState);
    resetLocked();
    if (mIsAutomation) {
      userState.mInstalledServices.remove(mAccessibilityServiceInfo);
      userState.mEnabledServices.remove(mComponentName);
      userState.destroyUiAutomationService();
    }
    onUserStateChangedLocked(userState);
  }
}
