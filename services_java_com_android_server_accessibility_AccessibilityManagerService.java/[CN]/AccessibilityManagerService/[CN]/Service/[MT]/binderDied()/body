{
synchronized (mLock) {
    UserState userState=getUserStateLocked(mUserId);
    removeServiceLocked(this,userState);
    dispose();
    if (mIsAutomation) {
      userState.mInstalledServices.remove(mAccessibilityServiceInfo);
      userState.mEnabledServices.remove(mComponentName);
      userState.mUiAutomationService=null;
      userState.mUiAutomationServiceClient=null;
    }
    onUserStateChangedLocked(userState);
  }
}
