{
  final long token=Binder.clearCallingIdentity();
  final long downTime=SystemClock.uptimeMillis();
  KeyEvent down=KeyEvent.obtain(downTime,downTime,KeyEvent.ACTION_DOWN,keyCode,0,0,KeyCharacterMap.VIRTUAL_KEYBOARD,0,KeyEvent.FLAG_FROM_SYSTEM,InputDevice.SOURCE_KEYBOARD,null);
  InputManager.getInstance().injectInputEvent(down,InputManager.INJECT_INPUT_EVENT_MODE_ASYNC);
  down.recycle();
  final long upTime=SystemClock.uptimeMillis();
  KeyEvent up=KeyEvent.obtain(downTime,upTime,KeyEvent.ACTION_UP,keyCode,0,0,KeyCharacterMap.VIRTUAL_KEYBOARD,0,KeyEvent.FLAG_FROM_SYSTEM,InputDevice.SOURCE_KEYBOARD,null);
  InputManager.getInstance().injectInputEvent(up,InputManager.INJECT_INPUT_EVENT_MODE_ASYNC);
  up.recycle();
  Binder.restoreCallingIdentity(token);
}
