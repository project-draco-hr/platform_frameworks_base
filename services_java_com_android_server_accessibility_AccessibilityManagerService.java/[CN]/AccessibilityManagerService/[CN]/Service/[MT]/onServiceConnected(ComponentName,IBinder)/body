{
  final int connectionId;
synchronized (mLock) {
    connectionId=mId;
    mService=service;
    mServiceInterface=IAccessibilityServiceClient.Stub.asInterface(service);
    UserState userState=getUserStateLocked(mUserId);
    addServiceLocked(this,userState);
    if (!userState.mBindingServices.contains(mComponentName)) {
      binderDied();
    }
 else {
      userState.mBindingServices.remove(mComponentName);
      onUserStateChangedLocked(userState);
    }
  }
  try {
    mServiceInterface.setConnection(this,connectionId);
  }
 catch (  RemoteException re) {
    Slog.w(LOG_TAG,"Error while setting connection for service: " + service,re);
  }
}
