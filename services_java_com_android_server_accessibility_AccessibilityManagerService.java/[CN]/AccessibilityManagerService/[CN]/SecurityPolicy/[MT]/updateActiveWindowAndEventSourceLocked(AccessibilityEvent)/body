{
  final int windowId=event.getWindowId();
  final int eventType=event.getEventType();
switch (eventType) {
case AccessibilityEvent.TYPE_WINDOW_STATE_CHANGED:
{
      if (getFocusedWindowId() == windowId) {
        mActiveWindowId=windowId;
      }
    }
  break;
case AccessibilityEvent.TYPE_VIEW_HOVER_ENTER:
case AccessibilityEvent.TYPE_VIEW_HOVER_EXIT:
{
  mActiveWindowId=windowId;
}
break;
case AccessibilityEvent.TYPE_TOUCH_EXPLORATION_GESTURE_END:
{
mActiveWindowId=getFocusedWindowId();
}
break;
}
if ((eventType & RETRIEVAL_ALLOWING_EVENT_TYPES) == 0) {
event.setSource(null);
}
}
