{
  enforceStatusBarService();
  Slog.i(TAG,"registerStatusBar bar=" + bar);
  mBar=bar;
synchronized (mIcons) {
    iconList.copyFrom(mIcons);
  }
synchronized (mNotifications) {
    for (    Map.Entry<IBinder,StatusBarNotification> e : mNotifications.entrySet()) {
      notificationKeys.add(e.getKey());
      notifications.add(e.getValue());
    }
  }
synchronized (mLock) {
    switches[0]=gatherDisableActionsLocked();
    switches[1]=mSystemUiVisibility;
    switches[2]=mMenuVisible ? 1 : 0;
    switches[3]=mImeWindowVis;
    switches[4]=mImeBackDisposition;
    binders.add(mImeToken);
  }
  switches[5]=mWindowManager.isHardKeyboardAvailable() ? 1 : 0;
  switches[6]=mWindowManager.isHardKeyboardEnabled() ? 1 : 0;
}
