{
  if (SPEW) {
    Slog.d(TAG,"manageDisableList userId=" + userId + " what=0x"+ Integer.toHexString(what)+ " pkg="+ pkg);
  }
  final int N=mDisableRecords.size();
  DisableRecord tok=null;
  int i;
  for (i=0; i < N; i++) {
    DisableRecord t=mDisableRecords.get(i);
    if (t.token == token) {
      tok=t;
      break;
    }
  }
  if (what == 0 || !token.isBinderAlive()) {
    if (tok != null) {
      mDisableRecords.remove(i);
      tok.token.unlinkToDeath(tok,0);
    }
  }
 else {
    if (tok == null) {
      tok=new DisableRecord();
      tok.userId=userId;
      try {
        token.linkToDeath(tok,0);
      }
 catch (      RemoteException ex) {
        return;
      }
      mDisableRecords.add(tok);
    }
    tok.what=what;
    tok.token=token;
    tok.pkg=pkg;
  }
}
