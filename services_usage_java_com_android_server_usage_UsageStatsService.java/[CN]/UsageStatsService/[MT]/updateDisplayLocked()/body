{
  boolean screenOn=mDisplayManager.getDisplay(Display.DEFAULT_DISPLAY).getState() == Display.STATE_ON;
  if (screenOn == mScreenOn)   return;
  mScreenOn=screenOn;
  long now=SystemClock.elapsedRealtime();
  if (mScreenOn) {
    mLastScreenOnEventRealtime=now;
  }
 else {
    mScreenOnTime+=now - mLastScreenOnEventRealtime;
    writeScreenOnTimeLocked(mScreenOnTime);
  }
}
