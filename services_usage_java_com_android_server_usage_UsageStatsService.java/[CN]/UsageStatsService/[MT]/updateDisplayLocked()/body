{
  boolean screenOn=mDisplayManager.getDisplay(Display.DEFAULT_DISPLAY).getState() == Display.STATE_ON;
  if (screenOn == mScreenOn)   return;
  mScreenOn=screenOn;
  long now=System.currentTimeMillis();
  if (mScreenOn) {
    mScreenOnSystemTimeSnapshot=now;
  }
 else {
    mScreenOnTime+=now - mScreenOnSystemTimeSnapshot;
    writeScreenOnTimeLocked(mScreenOnTime);
  }
}
