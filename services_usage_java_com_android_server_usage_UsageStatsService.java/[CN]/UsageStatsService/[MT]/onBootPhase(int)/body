{
  if (phase == PHASE_SYSTEM_SERVICES_READY) {
    SettingsObserver settingsObserver=new SettingsObserver(mHandler);
    settingsObserver.registerObserver();
    settingsObserver.updateSettings();
    mAppWidgetManager=getContext().getSystemService(AppWidgetManager.class);
    mDeviceIdleController=IDeviceIdleController.Stub.asInterface(ServiceManager.getService(DeviceIdleController.SERVICE_NAME));
    mBatteryStats=IBatteryStats.Stub.asInterface(ServiceManager.getService(BatteryStats.SERVICE_NAME));
    mDisplayManager=(DisplayManager)getContext().getSystemService(Context.DISPLAY_SERVICE);
    mPowerManager=getContext().getSystemService(PowerManager.class);
    mScreenOnSystemTimeSnapshot=System.currentTimeMillis();
synchronized (this) {
      mScreenOnTime=readScreenOnTimeLocked();
    }
    mDisplayManager.registerDisplayListener(mDisplayListener,null);
synchronized (this) {
      updateDisplayLocked();
    }
  }
 else   if (phase == PHASE_BOOT_COMPLETED) {
    setAppIdleParoled(getContext().getSystemService(BatteryManager.class).isCharging());
  }
}
