{
synchronized (mDeathHandlers) {
    if (state) {
      if (mMuteCount == 0) {
        try {
          if (mICallback != null) {
            mICallback.linkToDeath(this,0);
          }
          mDeathHandlers.add(this);
          if (muteCount() == 0) {
            AudioSystem.setMasterMute(true);
            mVolumePanel.postMasterMuteChanged(AudioManager.FLAG_SHOW_UI);
          }
        }
 catch (        RemoteException e) {
          binderDied();
          mDeathHandlers.notify();
          return;
        }
      }
 else {
        Log.w(TAG,"master volume was already muted by this client");
      }
      mMuteCount++;
    }
 else {
      if (mMuteCount == 0) {
        Log.e(TAG,"unexpected unmute for master volume");
      }
 else {
        mMuteCount--;
        if (mMuteCount == 0) {
          mDeathHandlers.remove(this);
          if (mICallback != null) {
            mICallback.unlinkToDeath(this,0);
          }
          if (muteCount() == 0) {
            AudioSystem.setMasterMute(false);
            mVolumePanel.postMasterMuteChanged(AudioManager.FLAG_SHOW_UI);
          }
        }
      }
    }
    mDeathHandlers.notify();
  }
}
