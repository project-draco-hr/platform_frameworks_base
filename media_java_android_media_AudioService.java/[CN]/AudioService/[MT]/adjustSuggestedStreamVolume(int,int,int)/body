{
  int streamType;
  if ((flags & AudioManager.FLAG_FORCE_STREAM) != 0) {
    streamType=suggestedStreamType;
  }
 else {
    streamType=getActiveStreamType(suggestedStreamType);
  }
  if ((flags & AudioManager.FLAG_PLAY_SOUND) != 0 && ((STREAM_VOLUME_ALIAS[streamType] != AudioSystem.STREAM_RING) || (mKeyguardManager != null && mKeyguardManager.isKeyguardLocked()))) {
    flags&=~AudioManager.FLAG_PLAY_SOUND;
  }
  adjustStreamVolume(streamType,direction,flags);
}
