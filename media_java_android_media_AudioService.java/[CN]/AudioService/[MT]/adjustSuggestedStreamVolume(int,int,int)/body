{
  int streamType;
  if (mVolumeControlStream != -1) {
    streamType=mVolumeControlStream;
  }
 else {
    streamType=getActiveStreamType(suggestedStreamType);
  }
  if ((flags & AudioManager.FLAG_PLAY_SOUND) != 0 && ((STREAM_VOLUME_ALIAS[streamType] != AudioSystem.STREAM_RING) || (mKeyguardManager != null && mKeyguardManager.isKeyguardLocked()))) {
    flags&=~AudioManager.FLAG_PLAY_SOUND;
  }
  adjustStreamVolume(streamType,direction,flags);
}
