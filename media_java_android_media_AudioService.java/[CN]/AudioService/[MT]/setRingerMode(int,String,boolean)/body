{
  if (mUseFixedVolume || isPlatformTelevision()) {
    return;
  }
  if (caller == null || caller.length() == 0) {
    throw new IllegalArgumentException("Bad caller: " + caller);
  }
  ensureValidRingerMode(ringerMode);
  if ((ringerMode == AudioManager.RINGER_MODE_VIBRATE) && !mHasVibrator) {
    ringerMode=AudioManager.RINGER_MODE_SILENT;
  }
  final int ringerModeInternal=getRingerModeInternal();
  final int ringerModeExternal=getRingerModeExternal();
  if (external) {
    setRingerModeExt(ringerMode);
    if (mRingerModeDelegate != null) {
      ringerMode=mRingerModeDelegate.onSetRingerModeExternal(ringerModeExternal,ringerMode,caller,ringerModeInternal);
    }
    if (ringerMode != ringerModeInternal) {
      setRingerModeInt(ringerMode,true);
    }
  }
 else {
    if (ringerMode != ringerModeInternal) {
      setRingerModeInt(ringerMode,true);
    }
    if (mRingerModeDelegate != null) {
      ringerMode=mRingerModeDelegate.onSetRingerModeInternal(ringerModeInternal,ringerMode,caller,ringerModeExternal);
    }
    setRingerModeExt(ringerMode);
  }
}
