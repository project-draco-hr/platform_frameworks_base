{
  if (!checkAudioSettingsPermission("setSpeakerphoneOn()")) {
    return;
  }
  if (on) {
    if (mForcedUseForComm == AudioSystem.FORCE_BT_SCO) {
      sendMsg(mAudioHandler,MSG_SET_FORCE_USE,SENDMSG_QUEUE,AudioSystem.FOR_RECORD,AudioSystem.FORCE_NONE,null,0);
    }
    mForcedUseForComm=AudioSystem.FORCE_SPEAKER;
  }
 else   if (mForcedUseForComm == AudioSystem.FORCE_SPEAKER) {
    mForcedUseForComm=AudioSystem.FORCE_NONE;
  }
  sendMsg(mAudioHandler,MSG_SET_FORCE_USE,SENDMSG_QUEUE,AudioSystem.FOR_COMMUNICATION,mForcedUseForComm,null,0);
}
