{
  if (!isValidMediaKeyEvent(keyEvent)) {
    Log.e(TAG,"not dispatching invalid media key event " + keyEvent);
    return;
  }
synchronized (mRingingLock) {
    if (mIsRinging || (getMode() == AudioSystem.MODE_IN_CALL) || (getMode() == AudioSystem.MODE_IN_COMMUNICATION)|| (getMode() == AudioSystem.MODE_RINGTONE)) {
      return;
    }
  }
  if (isValidVoiceInputKeyCode(keyEvent.getKeyCode())) {
    filterVoiceInputKeyEvent(keyEvent,needWakeLock);
  }
 else {
    dispatchMediaKeyEvent(keyEvent,needWakeLock);
  }
}
