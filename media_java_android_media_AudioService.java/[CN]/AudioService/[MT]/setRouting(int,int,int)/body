{
  if (!checkAudioSettingsPermission("setRouting()")) {
    return;
  }
synchronized (mSettingsLock) {
    if ((mRoutes[mode] & mask) != (routes & mask)) {
      AudioSystem.setRouting(mode,routes,mask);
      mRoutes[mode]=(mRoutes[mode] & ~mask) | (routes & mask);
    }
    int streamType=getActiveStreamType(AudioManager.USE_DEFAULT_STREAM_TYPE);
    int index=mStreamStates[streamType].mIndex;
    syncRingerAndNotificationStreamVolume(streamType,index,true);
    setStreamVolumeInt(streamType,index,true);
  }
}
