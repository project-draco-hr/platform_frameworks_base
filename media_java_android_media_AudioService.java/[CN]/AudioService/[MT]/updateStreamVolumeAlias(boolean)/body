{
  int dtmfStreamAlias;
  if (mVoiceCapable) {
    mStreamVolumeAlias=STREAM_VOLUME_ALIAS;
    dtmfStreamAlias=AudioSystem.STREAM_RING;
  }
 else {
    mStreamVolumeAlias=STREAM_VOLUME_ALIAS_NON_VOICE;
    dtmfStreamAlias=AudioSystem.STREAM_MUSIC;
  }
  if (isInCommunication()) {
    dtmfStreamAlias=AudioSystem.STREAM_VOICE_CALL;
    mRingerModeAffectedStreams&=~(1 << AudioSystem.STREAM_DTMF);
  }
 else {
    mRingerModeAffectedStreams|=(1 << AudioSystem.STREAM_DTMF);
  }
  mStreamVolumeAlias[AudioSystem.STREAM_DTMF]=dtmfStreamAlias;
  if (updateVolumes) {
    mStreamStates[AudioSystem.STREAM_DTMF].setAllIndexes(mStreamStates[dtmfStreamAlias]);
    setRingerModeInt(getRingerMode(),false);
    sendMsg(mAudioHandler,MSG_SET_ALL_VOLUMES,SENDMSG_QUEUE,0,0,mStreamStates[AudioSystem.STREAM_DTMF],0);
  }
}
