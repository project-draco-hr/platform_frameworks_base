{
synchronized (mConnectedDevices) {
    boolean isConnected=(mConnectedDevices.containsKey(device) && (params.isEmpty() || mConnectedDevices.get(device).equals(params)));
    if (isConnected && !connected) {
      AudioSystem.setDeviceConnectionState(device,AudioSystem.DEVICE_STATE_UNAVAILABLE,mConnectedDevices.get(device));
      mConnectedDevices.remove(device);
      return true;
    }
 else     if (!isConnected && connected) {
      AudioSystem.setDeviceConnectionState(device,AudioSystem.DEVICE_STATE_AVAILABLE,params);
      mConnectedDevices.put(new Integer(device),params);
      return true;
    }
  }
  return false;
}
