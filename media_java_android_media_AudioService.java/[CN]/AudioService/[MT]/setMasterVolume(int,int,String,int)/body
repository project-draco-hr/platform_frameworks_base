{
  if (mUseFixedVolume) {
    return;
  }
  if (mAppOps.noteOp(AppOpsManager.OP_AUDIO_MASTER_VOLUME,uid,callingPackage) != AppOpsManager.MODE_ALLOWED) {
    return;
  }
  if (volume < 0) {
    volume=0;
  }
 else   if (volume > MAX_MASTER_VOLUME) {
    volume=MAX_MASTER_VOLUME;
  }
  doSetMasterVolume((float)volume / MAX_MASTER_VOLUME,flags);
}
