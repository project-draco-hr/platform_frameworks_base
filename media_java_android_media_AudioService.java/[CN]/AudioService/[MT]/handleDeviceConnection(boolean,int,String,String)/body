{
  Slog.i(TAG,"handleDeviceConnection(" + connect + " dev:"+ Integer.toHexString(device)+ " address:"+ address+ " name:"+ deviceName+ ")");
synchronized (mConnectedDevices) {
    boolean isConnected=(mConnectedDevices.containsKey(device) && (address.isEmpty() || mConnectedDevices.get(device).equals(address)));
    if (isConnected && !connect) {
      AudioSystem.setDeviceConnectionState(device,AudioSystem.DEVICE_STATE_UNAVAILABLE,address,deviceName);
      mConnectedDevices.remove(device);
      return true;
    }
 else     if (!isConnected && connect) {
      AudioSystem.setDeviceConnectionState(device,AudioSystem.DEVICE_STATE_AVAILABLE,address,deviceName);
      mConnectedDevices.put(new Integer(device),address);
      return true;
    }
  }
  return false;
}
