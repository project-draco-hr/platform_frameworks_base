{
  ensureValidDirection(direction);
  int volume=Math.round(AudioSystem.getMasterVolume() * MAX_MASTER_VOLUME);
  int delta=0;
  if (direction == AudioManager.ADJUST_RAISE) {
    delta=mMasterVolumeRamp[1];
    for (int i=mMasterVolumeRamp.length - 1; i > 1; i-=2) {
      if (volume >= mMasterVolumeRamp[i - 1]) {
        delta=mMasterVolumeRamp[i];
        break;
      }
    }
  }
 else   if (direction == AudioManager.ADJUST_LOWER) {
    int length=mMasterVolumeRamp.length;
    delta=-mMasterVolumeRamp[length - 1];
    for (int i=2; i < length; i+=2) {
      if (volume <= mMasterVolumeRamp[i]) {
        delta=-mMasterVolumeRamp[i - 1];
        break;
      }
    }
  }
  setMasterVolume(volume + delta,flags);
}
