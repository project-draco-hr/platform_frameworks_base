{
  boolean adjustVolumeIndex=true;
  int newRingerMode=mRingerMode;
  int uiIndex=(oldIndex + 5) / 10;
  if (mRingerMode == AudioManager.RINGER_MODE_NORMAL) {
    if ((direction == AudioManager.ADJUST_LOWER) && (uiIndex <= 1)) {
      if (mPrevVolDirection != AudioManager.ADJUST_LOWER) {
        newRingerMode=System.getInt(mContentResolver,System.VIBRATE_IN_SILENT,1) == 1 ? AudioManager.RINGER_MODE_VIBRATE : AudioManager.RINGER_MODE_SILENT;
      }
      if (uiIndex == 0 || (mPrevVolDirection == AudioManager.ADJUST_LOWER && mVoiceCapable && streamType == AudioSystem.STREAM_RING)) {
        adjustVolumeIndex=false;
      }
    }
  }
 else {
    if (direction == AudioManager.ADJUST_RAISE) {
      newRingerMode=AudioManager.RINGER_MODE_NORMAL;
    }
    adjustVolumeIndex=false;
  }
  if (newRingerMode != mRingerMode) {
    setRingerMode(newRingerMode);
  }
  mPrevVolDirection=direction;
  return adjustVolumeIndex;
}
