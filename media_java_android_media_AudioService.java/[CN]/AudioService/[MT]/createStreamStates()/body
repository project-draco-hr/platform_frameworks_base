{
  int numStreamTypes=AudioSystem.getNumStreamTypes();
  VolumeStreamState[] streams=mStreamStates=new VolumeStreamState[numStreamTypes];
  for (int i=0; i < numStreamTypes; i++) {
    streams[i]=new VolumeStreamState(System.VOLUME_SETTINGS[mStreamVolumeAlias[i]],i);
  }
  for (int i=0; i < numStreamTypes; i++) {
    int device=getDeviceForStream(i);
    if (mStreamVolumeAlias[i] != i) {
      int index=rescaleIndex(streams[i].getIndex(device,false),mStreamVolumeAlias[i],i);
synchronized (streams[i]) {
        streams[i].mIndex.put(device,streams[i].getValidIndex(index));
        streams[i].applyDeviceVolume(device);
        index=rescaleIndex(streams[i].getIndex(device,true),mStreamVolumeAlias[i],i);
        streams[i].mLastAudibleIndex.put(device,streams[i].getValidIndex(index));
      }
    }
  }
}
