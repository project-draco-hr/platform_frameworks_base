{
  if (!checkAudioSettingsPermission("setMode()")) {
    return;
  }
  if (mode < AudioSystem.MODE_CURRENT || mode >= AudioSystem.NUM_MODES) {
    return;
  }
  IBinder newModeOwner=null;
synchronized (mSetModeDeathHandlers) {
    if (mode == AudioSystem.MODE_CURRENT) {
      mode=mMode;
    }
    newModeOwner=setModeInt(mode,cb,Binder.getCallingPid());
  }
  if (newModeOwner != null) {
    disconnectBluetoothSco(newModeOwner);
  }
}
