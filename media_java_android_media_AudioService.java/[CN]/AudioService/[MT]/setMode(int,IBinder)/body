{
  if (!checkAudioSettingsPermission("setMode()")) {
    return;
  }
  if (mode < AudioSystem.MODE_CURRENT || mode >= AudioSystem.NUM_MODES) {
    return;
  }
  int newModeOwnerPid=0;
synchronized (mSetModeDeathHandlers) {
    if (mode == AudioSystem.MODE_CURRENT) {
      mode=mMode;
    }
    newModeOwnerPid=setModeInt(mode,cb,Binder.getCallingPid());
  }
  if (newModeOwnerPid != 0) {
    disconnectBluetoothSco(newModeOwnerPid);
  }
}
