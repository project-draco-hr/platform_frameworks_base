{
  if (mHdmiTvClient == null) {
    Log.w(TAG,"Only Hdmi-Cec enabled TV device supports system audio mode.");
    return AudioSystem.DEVICE_NONE;
  }
  if (on && !checkHdmiSystemAudioOutput(device)) {
    return AudioSystem.DEVICE_NONE;
  }
synchronized (mHdmiTvClient) {
    if (on) {
      mHdmiSystemAudioOutputDevice=device;
    }
    if (mHdmiSystemAudioSupported == on) {
      return AudioSystem.getDevicesForStream(AudioSystem.STREAM_MUSIC);
    }
    mHdmiSystemAudioSupported=on;
    updateHdmiSystemAudioVolumeLocked(on);
  }
  return AudioSystem.getDevicesForStream(AudioSystem.STREAM_MUSIC);
}
