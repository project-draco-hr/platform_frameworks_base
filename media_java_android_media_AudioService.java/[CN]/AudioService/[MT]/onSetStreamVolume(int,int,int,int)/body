{
  if (((flags & AudioManager.FLAG_ALLOW_RINGER_MODES) != 0) || (mStreamVolumeAlias[streamType] == getMasterStreamType())) {
    int newRingerMode;
    if (index == 0) {
      newRingerMode=mHasVibrator ? AudioManager.RINGER_MODE_VIBRATE : AudioManager.RINGER_MODE_SILENT;
      setStreamVolumeInt(mStreamVolumeAlias[streamType],index,device,false,true);
    }
 else {
      newRingerMode=AudioManager.RINGER_MODE_NORMAL;
    }
    setRingerMode(newRingerMode);
  }
  setStreamVolumeInt(mStreamVolumeAlias[streamType],index,device,false,true);
}
