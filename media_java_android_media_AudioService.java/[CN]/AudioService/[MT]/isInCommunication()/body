{
  boolean isOffhook=false;
  if (mVoiceCapable) {
    try {
      ITelephony phone=ITelephony.Stub.asInterface(ServiceManager.checkService("phone"));
      if (phone != null)       isOffhook=phone.isOffhook();
    }
 catch (    RemoteException e) {
      Log.w(TAG,"Couldn't connect to phone service",e);
    }
  }
  return (isOffhook || getMode() == AudioManager.MODE_IN_COMMUNICATION);
}
