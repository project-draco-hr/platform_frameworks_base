{
  Intent intent=new Intent();
  intent.putExtra("state",state);
  intent.putExtra("name",name);
  intent.addFlags(Intent.FLAG_RECEIVER_REGISTERED_ONLY);
  if (device == AudioSystem.DEVICE_OUT_WIRED_HEADSET) {
    intent.setAction(Intent.ACTION_HEADSET_PLUG);
    intent.putExtra("microphone",1);
  }
 else   if (device == AudioSystem.DEVICE_OUT_WIRED_HEADPHONE) {
    intent.setAction(Intent.ACTION_HEADSET_PLUG);
    intent.putExtra("microphone",0);
  }
 else   if (device == AudioSystem.DEVICE_OUT_ANLG_DOCK_HEADSET) {
    intent.setAction(Intent.ACTION_ANALOG_AUDIO_DOCK_PLUG);
  }
 else   if (device == AudioSystem.DEVICE_OUT_DGTL_DOCK_HEADSET) {
    intent.setAction(Intent.ACTION_DIGITAL_AUDIO_DOCK_PLUG);
  }
 else   if (device == AudioSystem.DEVICE_OUT_AUX_DIGITAL) {
    intent.setAction(Intent.ACTION_HDMI_AUDIO_PLUG);
  }
  ActivityManagerNative.broadcastStickyIntent(intent,null);
}
