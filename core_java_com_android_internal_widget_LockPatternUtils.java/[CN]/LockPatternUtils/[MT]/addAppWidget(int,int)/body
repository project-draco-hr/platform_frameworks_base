{
  int[] widgets=getAppWidgets();
  if (widgets == null) {
    return false;
  }
  if (index < 0 || index > widgets.length) {
    return false;
  }
  int[] newWidgets=new int[widgets.length + 1];
  for (int i=0, j=0; i < newWidgets.length; i++) {
    if (index == i) {
      newWidgets[i]=widgetId;
      i++;
    }
    if (i < newWidgets.length) {
      newWidgets[i]=widgets[j];
      j++;
    }
  }
  writeAppWidgets(newWidgets);
  return true;
}
