{
  if (Process.myUid() == Process.SYSTEM_UID) {
    try {
      return ActivityManagerNative.getDefault().getCurrentUser().id;
    }
 catch (    RemoteException re) {
      return mCurrentUserId;
    }
  }
 else {
    throw new SecurityException("Only the system process can get the current user");
  }
}
