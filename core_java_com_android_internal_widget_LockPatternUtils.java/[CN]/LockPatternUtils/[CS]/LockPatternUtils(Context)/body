{
  mContext=context;
  mContentResolver=context.getContentResolver();
  if (sLockPatternFilename == null) {
    String dataSystemDirectory=android.os.Environment.getDataDirectory().getAbsolutePath() + SYSTEM_DIRECTORY;
    sLockPatternFilename=dataSystemDirectory + LOCK_PATTERN_FILE;
    sLockPasswordFilename=dataSystemDirectory + LOCK_PASSWORD_FILE;
    sHaveNonZeroPatternFile.set(new File(sLockPatternFilename).length() > 0);
    sHaveNonZeroPasswordFile.set(new File(sLockPasswordFilename).length() > 0);
    int fileObserverMask=FileObserver.CLOSE_WRITE | FileObserver.DELETE | FileObserver.MOVED_TO| FileObserver.CREATE;
    sPasswordObserver=new FileObserver(dataSystemDirectory,fileObserverMask){
      @Override public void onEvent(      int event,      String path){
        if (LOCK_PATTERN_FILE.equals(path)) {
          Log.d(TAG,"lock pattern file changed");
          sHaveNonZeroPatternFile.set(new File(sLockPatternFilename).length() > 0);
        }
 else         if (LOCK_PASSWORD_FILE.equals(path)) {
          Log.d(TAG,"lock password file changed");
          sHaveNonZeroPasswordFile.set(new File(sLockPasswordFilename).length() > 0);
        }
      }
    }
;
    sPasswordObserver.startWatching();
  }
}
