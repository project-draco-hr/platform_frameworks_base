{
  mIsMergeCancelled=false;
  if (serverDiffs != null) {
    if (!mDb.isDbLockedByCurrentThread()) {
      throw new IllegalStateException("this must be called from within a DB transaction");
    }
    mergeServerDiffs(context,account,serverDiffs,syncResult);
    notifyChanges();
  }
  if (result != null) {
    findLocalChanges(result,temporaryInstanceFactory,account,syncResult);
  }
  if (Log.isLoggable(TAG,Log.VERBOSE))   Log.v(TAG,"merge complete");
}
