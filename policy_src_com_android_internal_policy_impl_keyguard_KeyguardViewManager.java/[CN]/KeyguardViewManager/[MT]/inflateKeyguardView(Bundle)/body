{
  View v=mKeyguardHost.findViewById(R.id.keyguard_host_view);
  if (v != null) {
    mKeyguardHost.removeView(v);
  }
  Slog.d(TAG,"inflateKeyguardView: b/7094175 mContext.config=" + mContext.getResources().getConfiguration());
  final LayoutInflater inflater=LayoutInflater.from(mContext);
  View view=inflater.inflate(R.layout.keyguard_host_view,mKeyguardHost,true);
  mKeyguardView=(KeyguardHostView)view.findViewById(R.id.keyguard_host_view);
  mKeyguardView.setLockPatternUtils(mLockPatternUtils);
  mKeyguardView.setViewMediatorCallback(mViewMediatorCallback);
  if (mViewMediatorCallback != null) {
    KeyguardPasswordView kpv=(KeyguardPasswordView)mKeyguardView.findViewById(R.id.keyguard_password_view);
    if (kpv != null) {
      mViewMediatorCallback.setNeedsInput(kpv.needsInput());
    }
  }
  if (options != null) {
    if (options.getBoolean(LockPatternUtils.KEYGUARD_SHOW_USER_SWITCHER)) {
      mKeyguardView.goToUserSwitcher();
    }
    if (options.getBoolean(LockPatternUtils.KEYGUARD_SHOW_SECURITY_CHALLENGE)) {
      mKeyguardView.showNextSecurityScreenIfPresent();
    }
    int widgetToShow=options.getInt(LockPatternUtils.KEYGUARD_SHOW_APPWIDGET,AppWidgetManager.INVALID_APPWIDGET_ID);
    if (widgetToShow != AppWidgetManager.INVALID_APPWIDGET_ID) {
      mKeyguardView.goToWidget(widgetToShow);
    }
  }
}
