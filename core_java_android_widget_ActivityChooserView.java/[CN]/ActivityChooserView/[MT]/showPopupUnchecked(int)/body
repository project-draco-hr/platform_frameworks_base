{
  mAdapter.setMaxActivityCount(maxActivityCount);
  if (mIsSelectingDefaultActivity) {
    if (mAdapter.getActivityCount() > 0) {
      mListHeaderViewTitle.setText(mListHeaderViewTitleSelectDefault);
    }
 else {
      mListHeaderViewTitle.setText(mListHeaderViewTitleNoActivities);
    }
    mAdapter.setHeaderView(mListHeaderView);
  }
 else {
    mAdapter.setHeaderView(null);
  }
  if (mAdapter.getActivityCount() > maxActivityCount + 1) {
    mAdapter.setFooterView(mListFooterView);
  }
 else {
    mAdapter.setFooterView(null);
  }
  if (!mIsAttachedToWindow || mIsShowingAlertDialog) {
    AlertDialog alertDialog=getAlertDilalog();
    if (!alertDialog.isShowing()) {
      alertDialog.setCustomTitle(this);
      alertDialog.show();
      mIsShowingAlertDialog=true;
    }
  }
 else {
    ListPopupWindow popupWindow=getListPopupWindow();
    if (!popupWindow.isShowing()) {
      popupWindow.setContentWidth(mAdapter.measureContentWidth());
      popupWindow.show();
      mIsShowingPopuWindow=true;
    }
  }
}
