{
  boolean result=false;
  String msg="test5_4ParameterChangedListener()";
  mEffect=null;
  AudioEffect effect2=null;
  try {
    createListenerLooper(false,false,true);
synchronized (lock) {
      try {
        lock.wait(1000);
      }
 catch (      Exception e) {
        Log.e(TAG,"Looper creation: wait was interrupted.");
      }
    }
    assertTrue(mInitialized);
    effect2=new AudioEffect(AudioEffect.EFFECT_TYPE_EQUALIZER,AudioEffect.EFFECT_TYPE_NULL,1,0);
    assertNotNull(msg + ": could not create AudioEffect",effect2);
synchronized (lock) {
      try {
        mParameterChanged=-1;
        effect2.setParameter(Equalizer.PARAM_CURRENT_PRESET,(short)0);
        lock.wait(1000);
      }
 catch (      Exception e) {
        Log.e(TAG,"Create second effect: wait was interrupted.");
      }
    }
    assertEquals(msg + ": parameter change not received",Equalizer.PARAM_CURRENT_PRESET,mParameterChanged);
    result=true;
  }
 catch (  IllegalArgumentException e) {
    msg=msg.concat(": Equalizer not found");
    loge(msg,": Equalizer not found");
  }
catch (  UnsupportedOperationException e) {
    msg=msg.concat(": Effect library not loaded");
    loge(msg,": Effect library not loaded");
  }
catch (  Exception e) {
    loge(msg,"Could not create media player:" + e);
  }
 finally {
    terminateListenerLooper();
    if (effect2 != null) {
      effect2.release();
    }
  }
  assertTrue(msg,result);
}
