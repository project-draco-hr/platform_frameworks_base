{
  new ListenerThread(control,enable,parameter){
    @Override public void run(){
      Looper.prepare();
      mLooper=Looper.myLooper();
      mEffect=new AudioEffect(AudioEffect.EFFECT_TYPE_EQUALIZER,AudioEffect.EFFECT_TYPE_NULL,0,0);
      assertNotNull("could not create AudioEffect",mEffect);
      if (mControl) {
        mEffect.setControlStatusListener(new AudioEffect.OnControlStatusChangeListener(){
          public void onControlStatusChange(          AudioEffect effect,          boolean controlGranted){
synchronized (lock) {
              if (effect == mEffect) {
                mHasControl=controlGranted;
                lock.notify();
              }
            }
          }
        }
);
      }
      if (mEnable) {
        mEffect.setEnableStatusListener(new AudioEffect.OnEnableStatusChangeListener(){
          public void onEnableStatusChange(          AudioEffect effect,          boolean enabled){
synchronized (lock) {
              if (effect == mEffect) {
                mIsEnabled=enabled;
                lock.notify();
              }
            }
          }
        }
);
      }
      if (mParameter) {
        mEffect.setParameterListener(new AudioEffect.OnParameterChangeListener(){
          public void onParameterChange(          AudioEffect effect,          int status,          byte[] param,          byte[] value){
synchronized (lock) {
              if (effect == mEffect) {
                mParameterChanged=byteArrayToInt(param);
                lock.notify();
              }
            }
          }
        }
);
      }
synchronized (lock) {
        mInitialized=true;
        lock.notify();
      }
      Looper.loop();
    }
  }
.start();
}
