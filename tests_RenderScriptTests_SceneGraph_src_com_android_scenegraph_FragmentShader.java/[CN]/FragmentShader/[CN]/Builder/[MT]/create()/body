{
  if (mShader.mPerShaderConstants != null) {
    mBuilder.addConstant(mShader.mPerShaderConstants);
  }
  if (mShader.mPerObjConstants != null) {
    mBuilder.addConstant(mShader.mPerObjConstants);
  }
  for (int i=0; i < mShader.mTextureTypes.size(); i++) {
    mBuilder.addTexture(mShader.mTextureTypes.get(i),mShader.mTextureNames.get(i));
  }
  for (int i=0; i < mShader.mShaderTextureTypes.size(); i++) {
    mBuilder.addTexture(mShader.mShaderTextureTypes.get(i),mShader.mShaderTextureNames.get(i));
  }
  mShader.mProgram=mBuilder.create();
  return mShader;
}
