{
synchronized (this) {
    Callback cb=mModeWatchers.remove(callback.asBinder());
    if (cb != null) {
      cb.unlinkToDeath();
      for (int i=0; i < mOpModeWatchers.size(); i++) {
        ArrayList<Callback> cbs=mOpModeWatchers.valueAt(i);
        cbs.remove(cb);
        if (cbs.size() <= 0) {
          mOpModeWatchers.removeAt(i);
        }
      }
      if (mPackageModeWatchers.size() > 0) {
        Iterator<ArrayList<Callback>> it=mPackageModeWatchers.values().iterator();
        while (it.hasNext()) {
          ArrayList<Callback> cbs=it.next();
          cbs.remove(cb);
          if (cbs.size() <= 0) {
            it.remove();
          }
        }
      }
    }
  }
}
