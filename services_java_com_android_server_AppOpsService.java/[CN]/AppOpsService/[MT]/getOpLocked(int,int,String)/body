{
  HashMap<String,Ops> pkgOps=mUidOps.get(uid);
  if (pkgOps == null) {
    pkgOps=new HashMap<String,Ops>();
    mUidOps.put(uid,pkgOps);
  }
  Ops ops=pkgOps.get(packageName);
  if (ops == null) {
    final long ident=Binder.clearCallingIdentity();
    try {
      int pkgUid=-1;
      try {
        pkgUid=mContext.getPackageManager().getPackageUid(packageName,UserHandle.getUserId(uid));
      }
 catch (      NameNotFoundException e) {
      }
      if (pkgUid != uid) {
        Slog.w(TAG,"Bad call: specified package " + packageName + " under uid "+ uid+ " but it is really "+ pkgUid);
        return null;
      }
    }
  finally {
      Binder.restoreCallingIdentity(ident);
    }
    ops=new Ops(packageName);
    pkgOps.put(packageName,ops);
  }
  Op op=ops.get(code);
  if (op == null) {
    op=new Op(code);
    ops.put(code,op);
  }
  return op;
}
