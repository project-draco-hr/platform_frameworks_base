{
  final Uri enabledPrintServicesUri=Settings.Secure.getUriFor(Settings.Secure.ENABLED_PRINT_SERVICES);
  ContentObserver observer=new ContentObserver(BackgroundThread.getHandler()){
    @Override public void onChange(    boolean selfChange,    Uri uri,    int userId){
      if (enabledPrintServicesUri.equals(uri)) {
synchronized (mLock) {
          if (userId != UserHandle.USER_ALL) {
            UserState userState=getOrCreateUserStateLocked(userId);
            userState.updateIfNeededLocked();
          }
 else {
            final int userCount=mUserStates.size();
            for (int i=0; i < userCount; i++) {
              UserState userState=mUserStates.valueAt(i);
              userState.updateIfNeededLocked();
            }
          }
        }
      }
    }
  }
;
  mContext.getContentResolver().registerContentObserver(enabledPrintServicesUri,false,observer,UserHandle.USER_ALL);
}
