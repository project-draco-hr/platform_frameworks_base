{
  if (mContext.checkCallingOrSelfPermission(Manifest.permission.DUMP) != PackageManager.PERMISSION_GRANTED) {
    pw.println("Permission Denial: can't dump PrintManager from from pid=" + Binder.getCallingPid() + ", uid="+ Binder.getCallingUid());
    return;
  }
synchronized (mLock) {
    final long identity=Binder.clearCallingIdentity();
    try {
      pw.println("PRINT MANAGER STATE (dumpsys print)");
      final int userStateCount=mUserStates.size();
      for (int i=0; i < userStateCount; i++) {
        UserState userState=mUserStates.valueAt(i);
        userState.dump(fd,pw,"");
        pw.println();
      }
    }
  finally {
      Binder.restoreCallingIdentity(identity);
    }
  }
}
