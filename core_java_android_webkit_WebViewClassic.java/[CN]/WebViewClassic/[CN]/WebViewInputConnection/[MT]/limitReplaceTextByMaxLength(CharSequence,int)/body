{
  if (mMaxLength > 0) {
    Editable editable=getEditable();
    int maxReplace=mMaxLength - editable.length() + numReplaced;
    if (maxReplace < text.length()) {
      maxReplace=Math.max(maxReplace,0);
      text=text.subSequence(0,maxReplace);
    }
  }
  return text;
}
