{
  if (DebugFlags.WEB_VIEW) {
    Log.v(LOGTAG,"keyDown at " + System.currentTimeMillis() + "keyCode="+ keyCode+ ", "+ event+ ", unicode="+ event.getUnicodeChar());
  }
  if (mIsCaretSelection) {
    selectionDone();
  }
  if (mBlockWebkitViewMessages) {
    return false;
  }
  if (event.isCtrlPressed()) {
    return false;
  }
  if (mNativeClass == 0) {
    return false;
  }
  if (AUTO_REDRAW_HACK && (keyCode == KeyEvent.KEYCODE_CALL)) {
    mAutoRedraw=!mAutoRedraw;
    if (mAutoRedraw) {
      invalidate();
    }
    return true;
  }
  if (event.isSystem() || mCallbackProxy.uiOverrideKeyEvent(event)) {
    return false;
  }
  if (isAccessibilityEnabled() && getAccessibilityInjector().handleKeyEventIfNecessary(event)) {
    return true;
  }
  if (keyCode == KeyEvent.KEYCODE_PAGE_UP) {
    if (event.hasNoModifiers()) {
      pageUp(false);
      return true;
    }
 else     if (event.hasModifiers(KeyEvent.META_ALT_ON)) {
      pageUp(true);
      return true;
    }
  }
  if (keyCode == KeyEvent.KEYCODE_PAGE_DOWN) {
    if (event.hasNoModifiers()) {
      pageDown(false);
      return true;
    }
 else     if (event.hasModifiers(KeyEvent.META_ALT_ON)) {
      pageDown(true);
      return true;
    }
  }
  if (keyCode == KeyEvent.KEYCODE_MOVE_HOME && event.hasNoModifiers()) {
    pageUp(true);
    return true;
  }
  if (keyCode == KeyEvent.KEYCODE_MOVE_END && event.hasNoModifiers()) {
    pageDown(true);
    return true;
  }
  if (keyCode >= KeyEvent.KEYCODE_DPAD_UP && keyCode <= KeyEvent.KEYCODE_DPAD_RIGHT) {
    switchOutDrawHistory();
  }
  if (isEnterActionKey(keyCode)) {
    switchOutDrawHistory();
    if (event.getRepeatCount() == 0) {
      if (mSelectingText) {
        return true;
      }
      mGotCenterDown=true;
      mPrivateHandler.sendMessageDelayed(mPrivateHandler.obtainMessage(LONG_PRESS_CENTER),LONG_PRESS_TIMEOUT);
    }
  }
  if (getSettings().getNavDump()) {
switch (keyCode) {
case KeyEvent.KEYCODE_4:
      dumpDisplayTree();
    break;
case KeyEvent.KEYCODE_5:
case KeyEvent.KEYCODE_6:
  dumpDomTree(keyCode == KeyEvent.KEYCODE_5);
break;
case KeyEvent.KEYCODE_7:
case KeyEvent.KEYCODE_8:
dumpRenderTree(keyCode == KeyEvent.KEYCODE_7);
break;
}
}
sendKeyEvent(event);
return true;
}
