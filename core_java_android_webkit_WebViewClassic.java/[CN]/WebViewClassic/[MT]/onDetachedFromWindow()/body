{
  clearHelpers();
  mZoomManager.dismissZoomPicker();
  if (mWebView.hasWindowFocus())   setActive(false);
  final ViewTreeObserver treeObserver=mWebView.getViewTreeObserver();
  if (mGlobalLayoutListener != null) {
    treeObserver.removeGlobalOnLayoutListener(mGlobalLayoutListener);
    mGlobalLayoutListener=null;
  }
  if (mScrollChangedListener != null) {
    treeObserver.removeOnScrollChangedListener(mScrollChangedListener);
    mScrollChangedListener=null;
  }
  removeAccessibilityApisFromJavaScript();
  updateHwAccelerated();
  int drawGLFunction=nativeGetDrawGLFunction(mNativeClass);
  ViewRootImpl viewRoot=mWebView.getViewRootImpl();
  Log.d(LOGTAG,String.format("onDetachedFromWindow, drawGLFunction %x,  viewroot == null %b, isHWAccel %b",drawGLFunction,(viewRoot == null),mWebView.isHardwareAccelerated()));
  if (mWebView.isHardwareAccelerated()) {
    if (drawGLFunction != 0 && viewRoot != null) {
      viewRoot.detachFunctor(drawGLFunction);
    }
  }
}
