{
  FocusTransitionDrawable transition=null;
  if (shouldAnimateTo(hit)) {
    transition=new FocusTransitionDrawable(this);
  }
  Rect[] rects=hit != null ? hit.mTouchRects : null;
  if (!mTouchHighlightRegion.isEmpty()) {
    mWebView.invalidate(mTouchHighlightRegion.getBounds());
    if (transition != null) {
      transition.mPreviousRegion=new Region(mTouchHighlightRegion);
    }
    mTouchHighlightRegion.setEmpty();
  }
  if (rects != null) {
    mTouchHightlightPaint.setColor(hit.mTapHighlightColor);
    for (    Rect rect : rects) {
      Rect viewRect=contentToViewRect(rect);
      if (viewRect.width() < getWidth() >> 1 || viewRect.height() < getHeight() >> 1) {
        mTouchHighlightRegion.union(viewRect);
      }
 else       if (DebugFlags.WEB_VIEW) {
        Log.d(LOGTAG,"Skip the huge selection rect:" + viewRect);
      }
    }
    mWebView.invalidate(mTouchHighlightRegion.getBounds());
    if (transition != null && transition.mPreviousRegion != null) {
      transition.mNewRegion=new Region(mTouchHighlightRegion);
      mFocusTransition=transition;
      ObjectAnimator animator=ObjectAnimator.ofFloat(mFocusTransition,"progress",1f);
      animator.start();
    }
  }
}
