{
  if (DebugFlags.MEASURE_PAGE_SWAP_FPS) {
    long now=System.currentTimeMillis();
    long diff=now - mLastSwapTime;
    mAverageSwapFps=((1000.0 / diff) + mAverageSwapFps) / 2;
    Log.d(LOGTAG,"page swap fps: " + mAverageSwapFps);
    mLastSwapTime=now;
  }
  mWebViewCore.resumeWebKitDraw();
  if (notifyAnimationStarted) {
    mWebViewCore.sendMessage(EventHub.NOTIFY_ANIMATION_STARTED);
  }
  if (mWebView instanceof PageSwapDelegate) {
    ((PageSwapDelegate)mWebView).onPageSwapOccurred(notifyAnimationStarted);
  }
  if (mPictureListener != null) {
    Picture picture=mContext.getApplicationInfo().targetSdkVersion < Build.VERSION_CODES.JELLY_BEAN_MR2 ? capturePicture() : null;
    if (DebugFlags.TRACE_CALLBACK)     Log.d(CallbackProxy.LOGTAG,"onNewPicture");
    mPictureListener.onNewPicture(getWebView(),picture);
  }
}
