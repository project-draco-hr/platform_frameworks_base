{
  final ScaleGestureDetector detector=mZoomManager.getMultiTouchGestureDetector();
  float x=ev.getX();
  float y=ev.getY();
  if (detector != null) {
    detector.onTouchEvent(ev);
    if (detector.isInProgress()) {
      mLastTouchTime=ev.getEventTime();
      x=detector.getFocusX();
      y=detector.getFocusY();
      mWebView.cancelLongPress();
      mPrivateHandler.removeMessages(SWITCH_TO_LONGPRESS);
      if (!mZoomManager.supportsPanDuringZoom()) {
        return;
      }
      mTouchMode=TOUCH_DRAG_MODE;
      if (mVelocityTracker == null) {
        mVelocityTracker=VelocityTracker.obtain();
      }
    }
  }
  int action=ev.getActionMasked();
  if (action == MotionEvent.ACTION_POINTER_DOWN) {
    cancelTouch();
    action=MotionEvent.ACTION_DOWN;
  }
 else   if (action == MotionEvent.ACTION_POINTER_UP) {
    mLastTouchX=Math.round(x);
    mLastTouchY=Math.round(y);
  }
 else   if (action == MotionEvent.ACTION_MOVE) {
    if (x < 0 || y < 0) {
      return;
    }
  }
  handleTouchEventCommon(ev,action,Math.round(x),Math.round(y));
}
