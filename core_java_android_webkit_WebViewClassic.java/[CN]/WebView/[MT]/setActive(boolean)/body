{
  if (active) {
    if (hasFocus()) {
      mDrawCursorRing=!inEditingMode();
      setFocusControllerActive(true);
    }
 else {
      mDrawCursorRing=false;
      if (!inEditingMode()) {
        setFocusControllerActive(false);
      }
    }
  }
 else {
    if (!mZoomManager.isZoomPickerVisible()) {
      mDrawCursorRing=false;
    }
    mKeysPressed.clear();
    mPrivateHandler.removeMessages(SWITCH_TO_LONGPRESS);
    mTouchMode=TOUCH_DONE_MODE;
    setFocusControllerActive(false);
  }
  invalidate();
}
