{
  if (Looper.getMainLooper().getThread() == Thread.currentThread()) {
    throw new RuntimeException("This method cannot be called in app's main thread");
  }
  final ConditionVariable cv=new ConditionVariable();
  cv.close();
  ServiceConnection c=new ServiceConnection(){
    public synchronized void onServiceConnected(    ComponentName className,    IBinder binder){
      Log.v("BinderHelper","service connected!");
      mBinder=binder;
      cv.open();
      mContext.unbindService(this);
    }
    public void onServiceDisconnected(    ComponentName className){
      cv.open();
      mContext.unbindService(this);
    }
  }
;
  if (mContext.bindService(new Intent(mClass.getName()),c,0)) {
    cv.block(4500);
  }
  return mBinder;
}
