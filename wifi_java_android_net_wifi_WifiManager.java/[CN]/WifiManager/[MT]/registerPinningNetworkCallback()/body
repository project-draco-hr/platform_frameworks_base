{
  initConnectivityManager();
synchronized (sCM) {
    if (mNetworkCallback == null) {
      NetworkRequest request=new NetworkRequest.Builder().addTransportType(NetworkCapabilities.TRANSPORT_WIFI).removeCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET).build();
      mNetworkCallback=new PinningNetworkCallback();
      try {
        sCM.registerNetworkCallback(request,mNetworkCallback);
      }
 catch (      SecurityException e) {
        Log.d(TAG,"Failed to register network callback",e);
      }
    }
  }
}
