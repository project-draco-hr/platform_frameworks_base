{
synchronized (sThreadRefLock) {
    if (++sThreadRefCount == 1) {
      Messenger messenger=getWifiServiceMessenger();
      if (messenger == null) {
        sAsyncChannel=null;
        return;
      }
      sHandlerThread=new HandlerThread("WifiManager");
      sAsyncChannel=new AsyncChannel();
      sConnected=new CountDownLatch(1);
      sHandlerThread.start();
      Handler handler=new ServiceHandler(sHandlerThread.getLooper());
      sAsyncChannel.connect(mContext,handler,messenger);
      try {
        sConnected.await();
      }
 catch (      InterruptedException e) {
        Log.e(TAG,"interrupted wait at init");
      }
    }
  }
}
