{
  if (newState != Renderer.STATE_ERROR) {
    mPlaybackState.setErrorMessage(null);
  }
  long position=-1;
  if (mRenderer != null) {
    position=mRenderer.getSeekPosition();
  }
switch (newState) {
case Renderer.STATE_ENDED:
case Renderer.STATE_STOPPED:
    mPlaybackState.setState(PlaybackState.STATE_STOPPED,position,0);
  break;
case Renderer.STATE_INIT:
case Renderer.STATE_PREPARING:
mPlaybackState.setState(PlaybackState.STATE_BUFFERING,position,0);
break;
case Renderer.STATE_ERROR:
mPlaybackState.setState(PlaybackState.STATE_ERROR,position,0);
break;
case Renderer.STATE_PAUSED:
mPlaybackState.setState(PlaybackState.STATE_PAUSED,position,0);
break;
case Renderer.STATE_PLAYING:
mPlaybackState.setState(PlaybackState.STATE_PLAYING,position,1);
break;
default :
mPlaybackState.setState(PlaybackState.STATE_ERROR,position,0);
mPlaybackState.setErrorMessage("unkown state");
break;
}
mPerformer.setPlaybackState(mPlaybackState);
if (mListener != null) {
mListener.onPlayStateChanged(mPlaybackState);
}
}
