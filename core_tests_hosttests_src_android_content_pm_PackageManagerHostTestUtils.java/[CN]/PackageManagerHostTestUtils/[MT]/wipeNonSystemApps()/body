{
  String allInstalledPackages=executeShellCommand("pm list packages -f");
  BufferedReader outputReader=new BufferedReader(new StringReader(allInstalledPackages));
  String currentLine=null;
  while ((currentLine=outputReader.readLine()) != null) {
    if (currentLine.contains("/system/")) {
      continue;
    }
    String packageName=currentLine.substring(currentLine.indexOf('=') + 1);
    mDevice.uninstallPackage(packageName);
  }
  executeShellCommand(String.format("rm %s*",SDCARD_APP_PATH,"*"));
  executeShellCommand(String.format("rm %s*",DEVICE_APP_PATH,"*"));
  executeShellCommand(String.format("rm %s*",APP_PRIVATE_PATH,"*"));
}
