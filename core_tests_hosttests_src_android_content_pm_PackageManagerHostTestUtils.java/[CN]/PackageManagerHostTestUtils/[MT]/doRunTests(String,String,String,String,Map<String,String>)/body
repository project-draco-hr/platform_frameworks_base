{
  RemoteAndroidTestRunner testRunner=new RemoteAndroidTestRunner(pkgName,runnerName,mDevice);
  if (className != null && methodName != null) {
    testRunner.setMethodName(className,methodName);
  }
  if (params != null) {
    for (    Entry<String,String> argPair : params.entrySet()) {
      testRunner.addInstrumentationArg(argPair.getKey(),argPair.getValue());
    }
  }
  CollectingTestRunListener listener=new CollectingTestRunListener();
  try {
    testRunner.run(listener);
  }
 catch (  IOException ioe) {
    Log.w(LOG_TAG,"encountered IOException " + ioe);
  }
  return listener;
}
