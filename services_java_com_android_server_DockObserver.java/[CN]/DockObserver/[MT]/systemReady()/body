{
synchronized (this) {
    KeyguardManager keyguardManager=(KeyguardManager)mContext.getSystemService(Context.KEYGUARD_SERVICE);
    mKeyguardLock=keyguardManager.newKeyguardLock(TAG);
    final boolean enableCarMode=mDockState == Intent.EXTRA_DOCK_STATE_CAR;
    if (enableCarMode) {
      try {
        setCarMode(enableCarMode);
      }
 catch (      RemoteException e) {
        Log.w(TAG,"Unable to change car mode.",e);
      }
    }
    if (mDockState != Intent.EXTRA_DOCK_STATE_UNDOCKED) {
      update();
    }
    mSystemReady=true;
    mHandler.sendEmptyMessage(MSG_ENABLE_LOCATION_UPDATES);
  }
}
