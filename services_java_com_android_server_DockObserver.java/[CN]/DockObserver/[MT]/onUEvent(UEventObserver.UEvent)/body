{
  if (Log.isLoggable(TAG,Log.VERBOSE)) {
    Log.v(TAG,"Dock UEVENT: " + event.toString());
  }
synchronized (this) {
    try {
      int newState=Integer.parseInt(event.get("SWITCH_STATE"));
      if (newState != mDockState) {
        mPreviousDockState=mDockState;
        mDockState=newState;
        boolean carModeEnabled=mDockState == Intent.EXTRA_DOCK_STATE_CAR;
        if (mCarModeEnabled != carModeEnabled) {
          try {
            setCarMode(carModeEnabled);
          }
 catch (          RemoteException e1) {
            Log.w(TAG,"Unable to change car mode.",e1);
          }
        }
        if (mSystemReady) {
          if (mPreviousDockState != Intent.EXTRA_DOCK_STATE_DESK || mDockState != Intent.EXTRA_DOCK_STATE_UNDOCKED) {
            mPowerManager.userActivityWithForce(SystemClock.uptimeMillis(),false,true);
          }
          update();
        }
      }
    }
 catch (    NumberFormatException e) {
      Log.e(TAG,"Could not parse switch state from event " + event);
    }
  }
}
