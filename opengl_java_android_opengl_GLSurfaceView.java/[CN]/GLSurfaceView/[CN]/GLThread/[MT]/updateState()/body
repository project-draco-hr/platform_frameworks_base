{
  final boolean wasAbleToDraw=isAbleToDraw();
  if (!isReadyToDraw()) {
    return;
  }
  if (!mHaveEglSurface || mSizeChanged) {
    boolean reportSurfaceCreated=false;
    if (!mHaveEglContext) {
      mEglHelper.initialize();
      mHaveEglContext=true;
      reportSurfaceCreated=true;
    }
    mGLContext=(GL10)mEglHelper.createGL();
    mHaveEglSurface=mEglHelper.createSurface();
    mEglSurfaceIsBad=!mHaveEglSurface;
    mSizeChanged=false;
    GLSurfaceView view=mGLSurfaceViewWeakRef.get();
    if (view != null) {
      if (reportSurfaceCreated) {
        if (LOG_RENDERER) {
          Log.d(TAG,"onSurfaceCreated");
        }
        view.mRenderer.onSurfaceCreated(mGLContext,mEglHelper.mEglConfig);
      }
      if (LOG_RENDERER) {
        Log.d(TAG,"onSurfaceChanged(" + mWidth + ", "+ mHeight+ ")");
      }
      view.mRenderer.onSurfaceChanged(mGLContext,mWidth,mHeight);
    }
  }
  if (!wasAbleToDraw && isAbleToDraw()) {
    if (mRenderMode == RENDERMODE_CONTINUOUSLY) {
      requestRender();
    }
  }
  if (LOG_THREADS) {
    Log.d(TAG,"waiting tid=" + getId() + " mHaveEglContext: "+ mHaveEglContext+ " mHaveEglSurface: "+ mHaveEglSurface+ " mPaused: "+ mPaused+ " mHasSurface: "+ mHasSurface+ " mSurfaceIsBad: "+ mEglSurfaceIsBad+ " mWidth: "+ mWidth+ " mHeight: "+ mHeight+ " mRenderMode: "+ mRenderMode);
  }
}
