{
  if (mBarState == newState) {
    return;
  }
  boolean prohibitedBefore=areGroupsProhibited();
  mBarState=newState;
  boolean nowProhibited=areGroupsProhibited();
  if (nowProhibited != prohibitedBefore) {
    if (nowProhibited) {
      for (      NotificationGroup group : mGroupMap.values()) {
        if (group.expanded) {
          setGroupExpanded(group,false);
        }
      }
    }
    mListener.onGroupsProhibitedChanged();
  }
}
