{
  if (mAm == null)   return null;
  if (Constants.DebugFlags.App.EnableSystemServicesProxy) {
    ArrayList<ActivityManager.RecentTaskInfo> tasks=new ArrayList<ActivityManager.RecentTaskInfo>();
    int count=Math.min(numTasks,Constants.DebugFlags.App.SystemServicesProxyMockTaskCount);
    for (int i=0; i < count; i++) {
      int packageIndex=i % Constants.DebugFlags.App.SystemServicesProxyMockPackageCount;
      ComponentName cn=new ComponentName("com.android.test" + packageIndex,"com.android.test" + i + ".Activity");
      ActivityManager.RecentTaskInfo rti=new ActivityManager.RecentTaskInfo();
      rti.id=rti.persistentId=i;
      rti.baseIntent=new Intent();
      rti.baseIntent.setComponent(cn);
      rti.description=rti.activityLabel="" + i + " - "+ Long.toString(Math.abs(new Random().nextLong()),36);
      if (i % 2 == 0) {
        rti.activityIcon=Bitmap.createBitmap(mDummyIcon);
      }
      tasks.add(rti);
    }
    return tasks;
  }
  return mAm.getRecentTasksForUser(numTasks,ActivityManager.RECENT_IGNORE_UNAVAILABLE | ActivityManager.RECENT_INCLUDE_PROFILES,userId);
}
