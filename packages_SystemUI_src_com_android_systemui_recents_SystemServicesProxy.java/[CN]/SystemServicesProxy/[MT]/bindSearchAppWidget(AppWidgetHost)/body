{
  if (mAwm == null)   return null;
  ComponentName globalSearchActivity=mSm.getGlobalSearchActivity();
  if (globalSearchActivity == null)   return null;
  ActivityInfo searchActivityInfo=getActivityInfo(globalSearchActivity);
  if (searchActivityInfo == null)   return null;
  String key="com.android.recents.search_widget_provider";
  ComponentName searchWidgetCn=null;
  Bundle searchMetaData=searchActivityInfo.metaData;
  String searchWidgetProvider=searchMetaData.getString(key,"");
  if (searchWidgetProvider.length() != 0) {
    searchWidgetCn=ComponentName.unflattenFromString(searchWidgetProvider);
  }
 else {
    return null;
  }
  List<AppWidgetProviderInfo> widgets=mAwm.getInstalledProviders();
  AppWidgetProviderInfo searchWidgetInfo=null;
  for (  AppWidgetProviderInfo info : widgets) {
    if (info.provider.equals(searchWidgetCn)) {
      searchWidgetInfo=info;
      break;
    }
  }
  if (searchWidgetInfo == null)   return null;
  int searchWidgetId=host.allocateAppWidgetId();
  Bundle opts=new Bundle();
  opts.putInt(AppWidgetManager.OPTION_APPWIDGET_HOST_CATEGORY,AppWidgetProviderInfo.WIDGET_CATEGORY_RECENTS);
  if (!mAwm.bindAppWidgetIdIfAllowed(searchWidgetId,searchWidgetInfo.provider,opts)) {
    return null;
  }
  return new Pair<Integer,AppWidgetProviderInfo>(searchWidgetId,searchWidgetInfo);
}
