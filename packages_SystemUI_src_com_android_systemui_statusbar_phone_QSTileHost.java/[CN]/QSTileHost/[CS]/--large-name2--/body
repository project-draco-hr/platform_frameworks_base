{
  mContext=context;
  mStatusBar=statusBar;
  mBluetooth=bluetooth;
  mLocation=location;
  mRotation=rotation;
  mNetwork=network;
  mZen=zen;
  mHotspot=hotspot;
  mCast=cast;
  mFlashlight=flashlight;
  mUserSwitcherController=userSwitcher;
  mKeyguard=keyguard;
  mSecurity=security;
  final HandlerThread ht=new HandlerThread(QSTileHost.class.getSimpleName());
  ht.start();
  mLooper=ht.getLooper();
  mUserTracker=new CurrentUserTracker(mContext){
    @Override public void onUserSwitched(    int newUserId){
      recreateTiles();
      for (      QSTile<?> tile : mTiles.values()) {
        tile.userSwitch(newUserId);
      }
      mSecurity.onUserSwitched(newUserId);
      mObserver.register();
    }
  }
;
  recreateTiles();
  mUserTracker.startTracking();
  mObserver.register();
}
