{
  if (isCancelled()) {
    params.finisher.run();
    params.clearImage();
    params.clearContext();
    return;
  }
  if (params.result > 0) {
    GlobalScreenshot.notifyScreenshotError(params.context,mNotificationManager);
  }
 else {
    Resources r=params.context.getResources();
    Intent launchIntent=new Intent(Intent.ACTION_VIEW);
    launchIntent.setDataAndType(params.imageUri,"image/png");
    launchIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    final long now=System.currentTimeMillis();
    mNotificationBuilder.setContentTitle(r.getString(R.string.screenshot_saved_title)).setContentText(r.getString(R.string.screenshot_saved_text)).setContentIntent(PendingIntent.getActivity(params.context,0,launchIntent,0)).setWhen(now).setAutoCancel(true).setColor(r.getColor(com.android.internal.R.color.system_notification_accent_color));
    ;
    mPublicNotificationBuilder.setContentTitle(r.getString(R.string.screenshot_saved_title)).setContentText(r.getString(R.string.screenshot_saved_text)).setContentIntent(PendingIntent.getActivity(params.context,0,launchIntent,0)).setWhen(now).setAutoCancel(true).setColor(r.getColor(com.android.internal.R.color.system_notification_accent_color));
    mNotificationBuilder.setPublicVersion(mPublicNotificationBuilder.build());
    Notification n=mNotificationBuilder.build();
    n.flags&=~Notification.FLAG_NO_CLEAR;
    mNotificationManager.notify(mNotificationId,n);
  }
  params.finisher.run();
  params.clearContext();
}
