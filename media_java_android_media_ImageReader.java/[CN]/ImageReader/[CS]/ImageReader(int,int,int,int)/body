{
  mWidth=width;
  mHeight=height;
  mFormat=format;
  mMaxImages=maxImages;
  if (width < 1 || height < 1) {
    throw new IllegalArgumentException("The image dimensions must be positive");
  }
  if (mMaxImages < 1) {
    throw new IllegalArgumentException("Maximum outstanding image count must be at least 1");
  }
  mNumPlanes=getNumPlanesFromFormat();
  nativeInit(new WeakReference<ImageReader>(this),width,height,format,maxImages);
  mSurface=nativeGetSurface();
}
