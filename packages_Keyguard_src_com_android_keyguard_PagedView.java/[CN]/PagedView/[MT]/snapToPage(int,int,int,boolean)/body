{
  if (mPageSwapIndex != -1 && whichPage == mPageSwapIndex) {
    mNextPage=mPageWarpIndex;
    if (DEBUG_WARP)     Log.v(TAG,"snapToPage(" + whichPage + ") : reset mPageSwapIndex");
  }
 else {
    mNextPage=whichPage;
  }
  if (mPageWarpIndex != -1) {
    animateWarpPageOffScreen();
    resetPageWarp();
  }
  notifyPageSwitching(whichPage);
  View focusedChild=getFocusedChild();
  if (focusedChild != null && whichPage != mCurrentPage && focusedChild == getPageAt(mCurrentPage)) {
    focusedChild.clearFocus();
  }
  pageBeginMoving();
  awakenScrollBars(duration);
  if (immediate) {
    duration=0;
  }
 else   if (duration == 0) {
    duration=Math.abs(delta);
  }
  if (!mScroller.isFinished())   mScroller.abortAnimation();
  mScroller.startScroll(mUnboundedScrollX,0,delta,0,duration);
  notifyPageSwitched();
  if (immediate) {
    computeScroll();
  }
  mForceScreenScrolled=true;
  invalidate();
}
