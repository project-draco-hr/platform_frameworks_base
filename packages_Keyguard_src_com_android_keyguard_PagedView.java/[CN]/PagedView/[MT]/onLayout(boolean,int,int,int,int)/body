{
  if (!mIsDataReady || getChildCount() == 0) {
    return;
  }
  if (DEBUG)   Log.d(TAG,"PagedView.onLayout()");
  final int childCount=getChildCount();
  int offsetX=getViewportOffsetX();
  int offsetY=getViewportOffsetY();
  mViewport.offset(offsetX,offsetY);
  int childLeft=offsetX + getRelativeChildOffset(0);
  for (int i=0; i < childCount; i++) {
    final View child=getPageAt(i);
    int childTop=offsetY + getPaddingTop();
    if (child.getVisibility() != View.GONE) {
      final int childWidth=getScaledMeasuredWidth(child);
      final int childHeight=child.getMeasuredHeight();
      if (DEBUG)       Log.d(TAG,"\tlayout-child" + i + ": "+ childLeft+ ", "+ childTop);
      child.layout(childLeft,childTop,childLeft + child.getMeasuredWidth(),childTop + childHeight);
      childLeft+=childWidth + mPageSpacing;
    }
  }
  if (mFirstLayout && mCurrentPage >= 0 && mCurrentPage < getChildCount()) {
    setHorizontalScrollBarEnabled(false);
    updateCurrentPageScroll();
    setHorizontalScrollBarEnabled(true);
    mFirstLayout=false;
  }
  if (mPageSwapIndex != -1) {
    if (DEBUG_WARP)     Log.v(TAG,"onLayout: swapping pages");
    swapPages(mPageSwapIndex,getPageCount() - 1);
  }
}
