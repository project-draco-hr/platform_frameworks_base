{
  if (reboot) {
    Log.i(TAG,"Rebooting, reason: " + reason);
    PowerManagerService.lowLevelReboot(reason);
    Log.e(TAG,"Reboot failed, will attempt shutdown instead");
    reason=null;
  }
 else   if (SHUTDOWN_VIBRATE_MS > 0 && context != null) {
    Vibrator vibrator=new SystemVibrator(context);
    try {
      vibrator.vibrate(SHUTDOWN_VIBRATE_MS,VIBRATION_ATTRIBUTES);
    }
 catch (    Exception e) {
      Log.w(TAG,"Failed to vibrate during shutdown.",e);
    }
    try {
      Thread.sleep(SHUTDOWN_VIBRATE_MS);
    }
 catch (    InterruptedException unused) {
    }
  }
  Log.i(TAG,"Performing low-level shutdown...");
  PowerManagerService.lowLevelShutdown(reason);
}
