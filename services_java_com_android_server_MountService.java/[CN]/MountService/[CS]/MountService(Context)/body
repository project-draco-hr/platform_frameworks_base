{
  mContext=context;
  mPms=(PackageManagerService)ServiceManager.getService("package");
  mContext.registerReceiver(mBroadcastReceiver,new IntentFilter(Intent.ACTION_BOOT_COMPLETED),null,null);
  mHandlerThread=new HandlerThread("MountService");
  mHandlerThread.start();
  mHandler=new MountServiceHandler(mHandlerThread.getLooper());
  mObbActionHandler=new ObbActionHandler(mHandlerThread.getLooper());
  if ("simulator".equals(SystemProperties.get("ro.product.device"))) {
    mReady=true;
    mUmsEnabling=true;
    return;
  }
  mConnector=new NativeDaemonConnector(this,"vold",10,"VoldConnector");
  mReady=false;
  Thread thread=new Thread(mConnector,NativeDaemonConnector.class.getName());
  thread.start();
}
