{
  ArrayList<String> rsp;
  try {
    rsp=mConnector.doCommand("share status " + method);
  }
 catch (  NativeDaemonConnectorException ex) {
    Slog.e(TAG,"Failed to determine whether share method " + method + " is available.");
    return false;
  }
  for (  String line : rsp) {
    String[] tok=line.split(" ");
    if (tok.length < 3) {
      Slog.e(TAG,"Malformed response to share status " + method);
      return false;
    }
    int code;
    try {
      code=Integer.parseInt(tok[0]);
    }
 catch (    NumberFormatException nfe) {
      Slog.e(TAG,String.format("Error parsing code %s",tok[0]));
      return false;
    }
    if (code == VoldResponseCode.ShareStatusResult) {
      if (tok[2].equals("available"))       return true;
      return false;
    }
 else {
      Slog.e(TAG,String.format("Unexpected response code %d",code));
      return false;
    }
  }
  Slog.e(TAG,"Got an empty response");
  return false;
}
