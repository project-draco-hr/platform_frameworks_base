{
  String cmd=String.format("volume shared %s %s",path,method);
  ArrayList<String> rsp;
  try {
    rsp=mConnector.doCommand(cmd);
  }
 catch (  NativeDaemonConnectorException ex) {
    Slog.e(TAG,"Failed to read response to volume shared " + path + " "+ method);
    return false;
  }
  for (  String line : rsp) {
    String[] tok=line.split(" ");
    if (tok.length < 3) {
      Slog.e(TAG,"Malformed response to volume shared " + path + " "+ method+ " command");
      return false;
    }
    int code;
    try {
      code=Integer.parseInt(tok[0]);
    }
 catch (    NumberFormatException nfe) {
      Slog.e(TAG,String.format("Error parsing code %s",tok[0]));
      return false;
    }
    if (code == VoldResponseCode.ShareEnabledResult) {
      return "enabled".equals(tok[2]);
    }
 else {
      Slog.e(TAG,String.format("Unexpected response code %d",code));
      return false;
    }
  }
  Slog.e(TAG,"Got an empty response");
  return false;
}
