{
  waitForReady();
  warnOnNotMounted();
synchronized (mObbMountSet) {
    if (mObbMountSet.contains(filename)) {
      return StorageResultCode.OperationFailedStorageMounted;
    }
  }
  final int callerUid=Binder.getCallingUid();
  ObbInfo obbInfo=ObbScanner.getObbInfo(filename);
  if (!isUidOwnerOfPackage(obbInfo.packageName,callerUid)) {
    throw new IllegalArgumentException("Caller package does not match OBB file");
  }
  if (key == null) {
    key="none";
  }
  int rc=StorageResultCode.OperationSucceeded;
  String cmd=String.format("obb mount %s %s %d",filename,key,callerUid);
  try {
    mConnector.doCommand(cmd);
  }
 catch (  NativeDaemonConnectorException e) {
    int code=e.getCode();
    if (code != VoldResponseCode.OpFailedStorageBusy) {
      rc=StorageResultCode.OperationFailedInternalError;
    }
  }
  if (rc == StorageResultCode.OperationSucceeded) {
synchronized (mObbMountSet) {
      mObbMountSet.add(filename);
    }
  }
  return rc;
}
