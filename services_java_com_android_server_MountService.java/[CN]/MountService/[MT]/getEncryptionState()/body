{
  mContext.enforceCallingOrSelfPermission(Manifest.permission.CRYPT_KEEPER,"no permission to access the crypt keeper");
  waitForReady();
  try {
    ArrayList<String> rsp=mConnector.doCommand("cryptfs cryptocomplete");
    String[] tokens=rsp.get(0).split(" ");
    if (tokens == null || tokens.length != 2) {
      Slog.w(TAG,"Unexpected result from cryptfs cryptocomplete");
      return ENCRYPTION_STATE_ERROR_UNKNOWN;
    }
    return Integer.parseInt(tokens[1]);
  }
 catch (  NumberFormatException e) {
    Slog.w(TAG,"Unable to parse result from cryptfs cryptocomplete");
    return ENCRYPTION_STATE_ERROR_UNKNOWN;
  }
catch (  NativeDaemonConnectorException e) {
    Slog.w(TAG,"Error in communicating with cryptfs in validating");
    return ENCRYPTION_STATE_ERROR_UNKNOWN;
  }
}
