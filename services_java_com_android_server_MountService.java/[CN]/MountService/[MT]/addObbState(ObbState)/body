{
synchronized (mObbMounts) {
    final IBinder binder=obbState.getBinder();
    List<ObbState> obbStates=mObbMounts.get(binder);
    final boolean unique;
    if (obbStates == null) {
      obbStates=new ArrayList<ObbState>();
      mObbMounts.put(binder,obbStates);
      unique=true;
    }
 else {
      unique=obbStates.contains(obbState);
    }
    if (unique) {
      obbStates.add(obbState);
      try {
        obbState.link();
      }
 catch (      RemoteException e) {
        obbStates.remove(obbState);
        if (obbStates.isEmpty()) {
          mObbMounts.remove(binder);
        }
        throw e;
      }
    }
    mObbPathToStateMap.put(obbState.filename,obbState);
    final int uid=obbState.callerUid;
    final Integer uidUsage=mObbUidUsage.get(uid);
    if (uidUsage == null) {
      mObbUidUsage.put(uid,1);
    }
 else {
      mObbUidUsage.put(uid,uidUsage + 1);
    }
  }
}
