{
  waitForReady();
  warnOnNotMounted();
  ObbInfo obbInfo=ObbScanner.getObbInfo(filename);
  if (!isCallerOwnerOfPackage(obbInfo.packageName)) {
    throw new IllegalArgumentException("Caller package does not match OBB file");
  }
  try {
    ArrayList<String> rsp=mConnector.doCommand(String.format("obb path %s",filename));
    String[] tok=rsp.get(0).split(" ");
    int code=Integer.parseInt(tok[0]);
    if (code != VoldResponseCode.AsecPathResult) {
      throw new IllegalStateException(String.format("Unexpected response code %d",code));
    }
    return tok[1];
  }
 catch (  NativeDaemonConnectorException e) {
    int code=e.getCode();
    if (code == VoldResponseCode.OpFailedStorageNotFound) {
      throw new IllegalArgumentException(String.format("OBB '%s' not found",filename));
    }
 else {
      throw new IllegalStateException(String.format("Unexpected response code %d",code));
    }
  }
}
