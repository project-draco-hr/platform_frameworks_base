{
  validatePermission(android.Manifest.permission.ASEC_RENAME);
  waitForReady();
  warnOnNotMounted();
synchronized (mAsecMountSet) {
    if (mAsecMountSet.contains(oldId) || mAsecMountSet.contains(newId)) {
      return StorageResultCode.OperationFailedStorageMounted;
    }
  }
  int rc=StorageResultCode.OperationSucceeded;
  String cmd=String.format("asec rename %s %s",oldId,newId);
  try {
    mConnector.doCommand(cmd);
  }
 catch (  NativeDaemonConnectorException e) {
    rc=StorageResultCode.OperationFailedInternalError;
  }
  if (rc == StorageResultCode.OperationSucceeded) {
synchronized (mAsecMountSet) {
      if (!mAsecMountSet.contains(newId)) {
        mAsecMountSet.add(newId);
      }
    }
  }
  return rc;
}
