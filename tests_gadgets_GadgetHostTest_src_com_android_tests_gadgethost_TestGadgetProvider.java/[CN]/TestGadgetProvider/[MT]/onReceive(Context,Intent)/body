{
  String action=intent.getAction();
  Log.d(TAG,"intent=" + intent);
  if (GadgetManager.ACTION_GADGET_ENABLED.equals(action)) {
    Log.d(TAG,"ENABLED");
  }
 else   if (GadgetManager.ACTION_GADGET_DISABLED.equals(action)) {
    Log.d(TAG,"DISABLED");
  }
 else   if (GadgetManager.ACTION_GADGET_UPDATE.equals(action)) {
    Log.d(TAG,"UPDATE");
    Bundle extras=intent.getExtras();
    int[] gadgetIds=extras.getIntArray(GadgetManager.EXTRA_GADGET_IDS);
    SharedPreferences prefs=context.getSharedPreferences(TestGadgetProvider.PREFS_NAME,0);
    String prefix=prefs.getString(PREF_PREFIX_KEY,"hai");
    GadgetManager gm=GadgetManager.getInstance(context);
    RemoteViews views=new RemoteViews(context.getPackageName(),R.layout.test_gadget);
    views.setTextViewText(R.id.oh_hai_text,prefix + ": " + SystemClock.elapsedRealtime());
    if (false) {
      gm.updateGadget(gadgetIds,views);
    }
 else {
      gm.updateGadget(new ComponentName("com.android.tests.gadgethost","com.android.tests.gadgethost.TestGadgetProvider"),views);
    }
  }
}
