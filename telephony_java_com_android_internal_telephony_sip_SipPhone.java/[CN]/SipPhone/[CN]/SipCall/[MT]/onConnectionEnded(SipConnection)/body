{
  if (state != State.DISCONNECTED) {
    boolean allConnectionsDisconnected=true;
    for (    Connection c : connections) {
      if (c.getState() != State.DISCONNECTED) {
        allConnectionsDisconnected=false;
        break;
      }
    }
    if (allConnectionsDisconnected)     setState(State.DISCONNECTED);
  }
  notifyDisconnectP(conn);
}
