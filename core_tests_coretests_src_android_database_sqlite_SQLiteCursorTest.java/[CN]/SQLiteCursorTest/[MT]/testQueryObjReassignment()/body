{
  mDatabase.enableWriteAheadLogging();
  DatabaseConnectionPool pool=mDatabase.mConnectionPool;
  pool.setMaxPoolSize(5);
  SQLiteCursor cursor=(SQLiteCursor)mDatabase.rawQuery("select * from " + TABLE_NAME,null);
  assertNotNull(cursor);
  SQLiteDatabase db=cursor.getDatabase();
  assertTrue(db.mConnectionNum > 0);
  assertFalse(mDatabase.equals(db));
  assertEquals(mDatabase,db.mParentConnObj);
  assertTrue(pool.getConnectionList().contains(db));
  assertTrue(db.isOpen());
  cursor.requery();
  SQLiteDatabase dbAgain=cursor.getDatabase();
  assertEquals(db,dbAgain);
  mDatabase.disableWriteAheadLogging();
  assertFalse(db.isOpen());
  assertNull(mDatabase.mConnectionPool);
  cursor.requery();
  SQLiteDatabase db1=cursor.getDatabase();
  assertTrue(db1.mConnectionNum == 0);
  assertEquals(mDatabase,db1);
  assertNull(mDatabase.mConnectionPool);
  assertTrue(db1.isOpen());
  assertFalse(mDatabase.equals(db));
  mDatabase.enableWriteAheadLogging();
  cursor.requery();
  db=cursor.getDatabase();
  assertTrue(db.mConnectionNum > 0);
  assertFalse(mDatabase.equals(db));
  assertEquals(mDatabase,db.mParentConnObj);
  assertTrue(mDatabase.mConnectionPool.getConnectionList().contains(db));
  assertTrue(db.isOpen());
}
