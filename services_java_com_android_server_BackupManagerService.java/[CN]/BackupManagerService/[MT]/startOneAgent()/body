{
  while (true) {
    BackupRequest request;
synchronized (mQueueLock) {
      int queueSize=mBackupQueue.size();
      Log.d(TAG,"mBackupQueue.size=" + queueSize);
      if (queueSize == 0) {
        mBackupQueue=null;
        if (mPendingBackups.size() > 0) {
          mBackupHandler.sendEmptyMessageDelayed(MSG_RUN_BACKUP,COLLECTION_INTERVAL);
        }
        return;
      }
      request=mBackupQueue.get(0);
    }
    Log.d(TAG,"starting agent for " + request);
    int mode=(request.fullBackup) ? IApplicationThread.BACKUP_MODE_FULL : IApplicationThread.BACKUP_MODE_INCREMENTAL;
    try {
      if (mActivityManager.bindBackupAgent(request.appInfo,mode)) {
        Log.d(TAG,"awaiting agent for " + request);
        return;
      }
    }
 catch (    RemoteException e) {
    }
catch (    SecurityException ex) {
      Log.d(TAG,"error in bind",ex);
    }
  }
}
