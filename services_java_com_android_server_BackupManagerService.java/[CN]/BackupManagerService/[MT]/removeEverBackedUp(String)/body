{
  if (DEBUG)   Log.v(TAG,"Removing backed-up knowledge of " + packageName + ", new set:");
  if (mEverStoredStream != null) {
synchronized (mEverStoredApps) {
      File tempKnownFile=new File(mBaseStateDir,"processed.new");
      try {
        mEverStoredStream.close();
        RandomAccessFile known=new RandomAccessFile(tempKnownFile,"rw");
        mEverStoredApps.remove(packageName);
        for (        String s : mEverStoredApps) {
          known.writeUTF(s);
          if (DEBUG)           Log.v(TAG,"    " + s);
        }
        known.close();
        tempKnownFile.renameTo(mEverStored);
        mEverStoredStream=new RandomAccessFile(mEverStored,"rwd");
      }
 catch (      IOException e) {
        Log.w(TAG,"Error rewriting backed-up set; halting log");
        mEverStoredStream=null;
        mEverStoredApps.clear();
        tempKnownFile.delete();
        mEverStored.delete();
      }
    }
  }
}
