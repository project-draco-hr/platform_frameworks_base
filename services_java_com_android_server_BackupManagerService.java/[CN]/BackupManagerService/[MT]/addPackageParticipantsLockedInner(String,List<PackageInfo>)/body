{
  if (DEBUG) {
    Log.v(TAG,"Adding " + targetPkgs.size() + " backup participants:");
    for (    PackageInfo p : targetPkgs) {
      Log.v(TAG,"    " + p + " agent="+ p.applicationInfo.backupAgentName+ " uid="+ p.applicationInfo.uid+ " killAfterRestore="+ (((p.applicationInfo.flags & ApplicationInfo.FLAG_KILL_AFTER_RESTORE) != 0) ? "true" : "false")+ " restoreNeedsApplication="+ (((p.applicationInfo.flags & ApplicationInfo.FLAG_RESTORE_NEEDS_APPLICATION) != 0) ? "true" : "false"));
    }
  }
  for (  PackageInfo pkg : targetPkgs) {
    if (packageName == null || pkg.packageName.equals(packageName)) {
      int uid=pkg.applicationInfo.uid;
      HashSet<ApplicationInfo> set=mBackupParticipants.get(uid);
      if (set == null) {
        set=new HashSet<ApplicationInfo>();
        mBackupParticipants.put(uid,set);
      }
      set.add(pkg.applicationInfo);
      if (!mEverStoredApps.contains(pkg.packageName)) {
        if (DEBUG)         Log.i(TAG,"New app " + pkg.packageName + " never backed up; scheduling");
        try {
          dataChanged(pkg.packageName);
        }
 catch (        RemoteException e) {
        }
      }
    }
  }
}
