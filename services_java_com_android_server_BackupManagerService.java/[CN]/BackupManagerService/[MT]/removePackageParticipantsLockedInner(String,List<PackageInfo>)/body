{
  if (DEBUG) {
    Slog.v(TAG,"removePackageParticipantsLockedInner (" + packageName + ") removing "+ agents.size()+ " entries");
    for (    PackageInfo p : agents) {
      Slog.v(TAG,"    - " + p);
    }
  }
  for (  PackageInfo pkg : agents) {
    if (packageName == null || pkg.packageName.equals(packageName)) {
      int uid=pkg.applicationInfo.uid;
      HashSet<ApplicationInfo> set=mBackupParticipants.get(uid);
      if (set != null) {
        for (        ApplicationInfo entry : set) {
          if (entry.packageName.equals(pkg.packageName)) {
            set.remove(entry);
            removeEverBackedUp(pkg.packageName);
            break;
          }
        }
        if (set.size() == 0) {
          mBackupParticipants.delete(uid);
        }
      }
    }
  }
}
