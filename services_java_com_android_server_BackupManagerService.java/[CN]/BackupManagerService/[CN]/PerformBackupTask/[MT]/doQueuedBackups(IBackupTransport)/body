{
  for (  BackupRequest request : mQueue) {
    Slog.d(TAG,"starting agent for backup of " + request);
    PackageInfo pkg;
    try {
      pkg=mPackageManager.getPackageInfo(request.packageName,0);
    }
 catch (    NameNotFoundException e) {
      Slog.d(TAG,"Package does not exist; skipping");
      continue;
    }
    IBackupAgent agent=null;
    try {
      mWakelock.setWorkSource(new WorkSource(pkg.applicationInfo.uid));
      agent=bindToAgentSynchronous(pkg.applicationInfo,IApplicationThread.BACKUP_MODE_INCREMENTAL);
      if (agent != null) {
        int result=processOneBackup(request.packageName,agent,transport);
        if (result != BackupConstants.TRANSPORT_OK)         return result;
      }
    }
 catch (    SecurityException ex) {
      Slog.d(TAG,"error in bind/backup",ex);
    }
 finally {
      try {
        mActivityManager.unbindBackupAgent(pkg.applicationInfo);
      }
 catch (      RemoteException e) {
      }
    }
  }
  mWakelock.setWorkSource(null);
  return BackupConstants.TRANSPORT_OK;
}
