{
  int err=-1;
  try {
    err=mTransport.startSession();
  }
 catch (  Exception e) {
    Log.e(TAG,"Error starting transport for restore");
    e.printStackTrace();
  }
  if (err == 0) {
    try {
      RestoreSet[] images=mTransport.getAvailableRestoreSets();
      if (images.length > 0) {
        mImage=images[0];
        PackageInfo[] packages=mTransport.getAppSet(mImage.token);
        HashSet<PackageInfo> appsToRestore=new HashSet<PackageInfo>();
        for (        PackageInfo pkg : packages) {
          PackageInfo app=isRestorable(pkg);
          if (app != null) {
            appsToRestore.add(app);
          }
        }
        doQueuedRestores(appsToRestore);
      }
    }
 catch (    RemoteException e) {
    }
    try {
      mTransport.endSession();
    }
 catch (    Exception e) {
      Log.e(TAG,"Error ending transport for restore");
      e.printStackTrace();
    }
  }
}
