{
  if (mAgent != null) {
    try {
      mActivityManager.unbindBackupAgent(app);
      if (app.uid != Process.SYSTEM_UID && !app.packageName.equals("com.android.backupconfirm")) {
        if (DEBUG)         Slog.d(TAG,"Killing host process");
        mActivityManager.killApplicationProcess(app.processName,app.uid);
      }
 else {
        if (DEBUG)         Slog.d(TAG,"Not killing after full restore");
      }
    }
 catch (    RemoteException e) {
      Slog.d(TAG,"Lost app trying to shut down");
    }
    mAgent=null;
  }
}
