{
  for (  BackupRequest request : mQueue) {
    Log.d(TAG,"starting agent for backup of " + request);
    if (mPackageManager.checkPermission(android.Manifest.permission.BACKUP_DATA,request.appInfo.packageName) != PackageManager.PERMISSION_GRANTED) {
      Log.w(TAG,"Skipping backup of unprivileged package " + request.appInfo.packageName);
      continue;
    }
    IBackupAgent agent=null;
    int mode=(request.fullBackup) ? IApplicationThread.BACKUP_MODE_FULL : IApplicationThread.BACKUP_MODE_INCREMENTAL;
    try {
      agent=bindToAgentSynchronous(request.appInfo,mode);
      if (agent != null) {
        processOneBackup(request,agent,transport,false);
      }
      mActivityManager.unbindBackupAgent(request.appInfo);
    }
 catch (    SecurityException ex) {
      Log.d(TAG,"error in bind/backup",ex);
    }
catch (    RemoteException e) {
      Log.v(TAG,"bind/backup threw");
      e.printStackTrace();
    }
  }
}
