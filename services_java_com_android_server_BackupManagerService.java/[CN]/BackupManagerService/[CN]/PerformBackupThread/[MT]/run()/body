{
  if (DEBUG)   Log.v(TAG,"Beginning backup of " + mQueue.size() + " targets");
  IBackupTransport transport=null;
switch (mTransport) {
case BackupManager.TRANSPORT_ADB:
    if (DEBUG)     Log.v(TAG,"Initializing adb transport");
  transport=new AdbTransport();
break;
case BackupManager.TRANSPORT_GOOGLE:
if (DEBUG) Log.v(TAG,"Initializing Google transport");
transport=new GoogleTransport();
break;
default :
Log.e(TAG,"Perform backup with unknown transport " + mTransport);
return;
}
try {
transport.startSession();
}
 catch (Exception e) {
Log.e(TAG,"Error starting backup session");
e.printStackTrace();
return;
}
doQueuedBackups(transport);
try {
transport.endSession();
}
 catch (Exception e) {
Log.e(TAG,"Error ending transport");
e.printStackTrace();
}
}
