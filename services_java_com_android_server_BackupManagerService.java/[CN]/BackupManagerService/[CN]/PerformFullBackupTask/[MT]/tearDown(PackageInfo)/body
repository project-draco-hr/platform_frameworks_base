{
  if (pkg != null) {
    final ApplicationInfo app=pkg.applicationInfo;
    if (app != null) {
      try {
        mActivityManager.unbindBackupAgent(app);
        if (app.uid != Process.SYSTEM_UID) {
          if (DEBUG)           Slog.d(TAG,"Backup complete, killing host process");
          mActivityManager.killApplicationProcess(app.processName,app.uid);
        }
 else {
          if (DEBUG)           Slog.d(TAG,"Not killing after restore: " + app.processName);
        }
      }
 catch (      RemoteException e) {
        Slog.d(TAG,"Lost app trying to shut down");
      }
    }
  }
}
