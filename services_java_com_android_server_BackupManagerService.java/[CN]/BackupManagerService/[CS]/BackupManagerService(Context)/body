{
  mContext=context;
  mPackageManager=context.getPackageManager();
  mActivityManager=ActivityManagerNative.getDefault();
  mStateDir=new File(Environment.getDataDirectory(),"backup");
  mStateDir.mkdirs();
  mDataDir=Environment.getDownloadCacheDirectory();
  mJournalDir=new File(mStateDir,"pending");
  mJournalDir.mkdirs();
  makeJournalLocked();
synchronized (mBackupParticipants) {
    addPackageParticipantsLocked(null);
  }
  mTransportId=BackupManager.TRANSPORT_LOCAL;
  mTransport=createTransport(mTransportId);
  parseLeftoverJournals();
  IntentFilter filter=new IntentFilter();
  filter.addAction(Intent.ACTION_PACKAGE_ADDED);
  filter.addAction(Intent.ACTION_PACKAGE_REMOVED);
  filter.addDataScheme("package");
  mContext.registerReceiver(mBroadcastReceiver,filter);
}
