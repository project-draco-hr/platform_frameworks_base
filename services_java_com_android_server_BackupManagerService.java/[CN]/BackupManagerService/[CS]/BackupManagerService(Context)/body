{
  mContext=context;
  mPackageManager=context.getPackageManager();
  File dataDir=Environment.getDataDirectory();
  mStateDir=new File(dataDir,"backup");
  mStateDir.mkdirs();
  List<ResolveInfo> services=mPackageManager.queryIntentServices(new Intent(BackupService.SERVICE_ACTION),0);
  if (DEBUG) {
    Log.v(TAG,"Backup participants: " + services.size());
    for (    ResolveInfo ri : services) {
      Log.v(TAG,"    " + ri + " : "+ ri.filter);
    }
  }
  for (  ResolveInfo ri : services) {
    int uid=ri.serviceInfo.applicationInfo.uid;
    HashSet<ServiceInfo> set=mBackupParticipants.get(uid);
    if (set == null) {
      set=new HashSet<ServiceInfo>();
      mBackupParticipants.put(uid,set);
    }
    set.add(ri.serviceInfo);
  }
}
