{
  long now=SystemClock.uptimeMillis();
  injectKeyEvent(new KeyEvent(now,now,KeyEvent.ACTION_DOWN,keyCode,0,0,KeyCharacterMap.VIRTUAL_KEYBOARD,0,0,InputDevice.SOURCE_KEYBOARD));
  if (longpress) {
    injectKeyEvent(new KeyEvent(now,now,KeyEvent.ACTION_DOWN,keyCode,1,0,KeyCharacterMap.VIRTUAL_KEYBOARD,0,KeyEvent.FLAG_LONG_PRESS,InputDevice.SOURCE_KEYBOARD));
  }
  injectKeyEvent(new KeyEvent(now,now,KeyEvent.ACTION_UP,keyCode,0,0,KeyCharacterMap.VIRTUAL_KEYBOARD,0,0,InputDevice.SOURCE_KEYBOARD));
}
