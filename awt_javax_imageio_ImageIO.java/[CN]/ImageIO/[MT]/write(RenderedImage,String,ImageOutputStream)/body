{
  if (im == null) {
    throw new IllegalArgumentException("image cannot be NULL");
  }
  if (formatName == null) {
    throw new IllegalArgumentException("format name cannot be NULL");
  }
  if (output == null) {
    throw new IllegalArgumentException("output cannot be NULL");
  }
  Iterator<ImageWriter> it=getImageWriters(ImageTypeSpecifier.createFromRenderedImage(im),formatName);
  if (it.hasNext()) {
    ImageWriter writer=it.next();
    writer.setOutput(output);
    writer.write(im);
    output.flush();
    writer.dispose();
    return true;
  }
  return false;
}
