{
  if (stream == null) {
    throw new IllegalArgumentException("stream == null!");
  }
  Iterator<ImageReader> imageReaders=getImageReaders(stream);
  if (!imageReaders.hasNext()) {
    return null;
  }
  ImageReader reader=imageReaders.next();
  reader.setInput(stream,false,true);
  BufferedImage res=reader.read(0);
  reader.dispose();
  try {
    stream.close();
  }
 catch (  IOException e) {
  }
  return res;
}
