{
  if (output == null) {
    throw new IllegalArgumentException("output destination cannot be NULL");
  }
  Iterator<ImageOutputStreamSpi> it=registry.getServiceProviders(ImageOutputStreamSpi.class,true);
  while (it.hasNext()) {
    ImageOutputStreamSpi spi=it.next();
    if (spi.getOutputClass().isInstance(output)) {
      return spi.createOutputStreamInstance(output);
    }
  }
  return null;
}
