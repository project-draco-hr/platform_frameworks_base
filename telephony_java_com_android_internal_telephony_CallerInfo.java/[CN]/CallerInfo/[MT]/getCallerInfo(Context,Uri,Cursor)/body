{
  CallerInfo info=new CallerInfo();
  info.photoResource=0;
  info.phoneLabel=null;
  info.numberType=0;
  info.numberLabel=null;
  info.cachedPhoto=null;
  info.isCachedPhotoCurrent=false;
  info.contactExists=false;
  if (VDBG)   Log.v(TAG,"construct callerInfo from cursor");
  if (cursor != null) {
    if (cursor.moveToFirst()) {
      int columnIndex;
      columnIndex=cursor.getColumnIndex(PhoneLookup.DISPLAY_NAME);
      if (columnIndex != -1) {
        info.name=cursor.getString(columnIndex);
      }
      columnIndex=cursor.getColumnIndex(PhoneLookup.NUMBER);
      if (columnIndex != -1) {
        info.phoneNumber=cursor.getString(columnIndex);
      }
      columnIndex=cursor.getColumnIndex(PhoneLookup.NORMALIZED_NUMBER);
      if (columnIndex != -1) {
        info.nomalizedNumber=cursor.getString(columnIndex);
      }
      columnIndex=cursor.getColumnIndex(PhoneLookup.LABEL);
      if (columnIndex != -1) {
        int typeColumnIndex=cursor.getColumnIndex(PhoneLookup.TYPE);
        if (typeColumnIndex != -1) {
          info.numberType=cursor.getInt(typeColumnIndex);
          info.numberLabel=cursor.getString(columnIndex);
          info.phoneLabel=Phone.getDisplayLabel(context,info.numberType,info.numberLabel).toString();
        }
      }
      columnIndex=-1;
      String url=contactRef.toString();
      if (url.startsWith("content://com.android.contacts/data/phones")) {
        if (VDBG)         Log.v(TAG,"URL path starts with 'data/phones' using RawContacts.CONTACT_ID");
        columnIndex=cursor.getColumnIndex(RawContacts.CONTACT_ID);
      }
 else       if (url.startsWith("content://com.android.contacts/phone_lookup")) {
        if (VDBG)         Log.v(TAG,"URL path starts with 'phone_lookup' using PhoneLookup._ID");
        columnIndex=cursor.getColumnIndex(PhoneLookup._ID);
      }
 else {
        Log.e(TAG,"Bad contact URL '" + url + "'");
      }
      if (columnIndex != -1) {
        info.person_id=cursor.getLong(columnIndex);
      }
 else {
        Log.e(TAG,"person_id column missing for " + contactRef);
      }
      columnIndex=cursor.getColumnIndex(PhoneLookup.CUSTOM_RINGTONE);
      if ((columnIndex != -1) && (cursor.getString(columnIndex) != null)) {
        info.contactRingtoneUri=Uri.parse(cursor.getString(columnIndex));
      }
 else {
        info.contactRingtoneUri=null;
      }
      columnIndex=cursor.getColumnIndex(PhoneLookup.SEND_TO_VOICEMAIL);
      info.shouldSendToVoicemail=(columnIndex != -1) && ((cursor.getInt(columnIndex)) == 1);
      info.contactExists=true;
    }
    cursor.close();
  }
  info.needUpdate=false;
  info.name=normalize(info.name);
  info.contactRefUri=contactRef;
  return info;
}
