{
  int numSharedElements=sharedElementNames.size();
  Context context=getWindow().getContext();
  int[] parentLoc=new int[2];
  getDecor().getLocationOnScreen(parentLoc);
  for (int i=0; i < numSharedElements; i++) {
    String name=sharedElementNames.get(i);
    Bundle sharedElementBundle=state.getBundle(name);
    if (sharedElementBundle != null) {
      Bitmap bitmap=sharedElementBundle.getParcelable(KEY_BITMAP);
      ImageView imageView=new ImageView(context);
      imageView.setId(com.android.internal.R.id.shared_element);
      imageView.setScaleType(ImageView.ScaleType.CENTER);
      imageView.setImageBitmap(bitmap);
      imageView.setViewName(name);
      setSharedElementState(imageView,name,state,parentLoc);
      if (mTargetSharedNames.contains(name)) {
        accepted.add(imageView);
      }
 else {
        rejected.add(imageView);
      }
    }
  }
}
