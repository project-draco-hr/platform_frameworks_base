{
  sharedElements.retainAll(mAllSharedElementNames);
  if (mListener != null) {
    mListener.onMapSharedElements(mAllSharedElementNames,sharedElements);
  }
  mSharedElementNames.addAll(sharedElements.keySet());
  mSharedElements.addAll(sharedElements.values());
  if (getViewsTransition() != null && mTransitioningViews != null) {
    ViewGroup decorView=getDecor();
    if (decorView != null) {
      decorView.captureTransitioningViews(mTransitioningViews);
    }
    mTransitioningViews.removeAll(mSharedElements);
  }
  setEpicenter();
}
