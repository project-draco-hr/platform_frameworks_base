{
  final View decor=getDecor();
  final ViewRootImpl viewRoot=decor == null ? null : decor.getViewRootImpl();
  if (viewRoot != null) {
    viewRoot.setPausedForTransition(true);
  }
  sharedElements.retainAll(mAllSharedElementNames);
  if (mListener != null) {
    mListener.onMapSharedElements(mAllSharedElementNames,sharedElements);
  }
  setSharedElements(sharedElements);
  if (getViewsTransition() != null && mTransitioningViews != null) {
    ViewGroup decorView=getDecor();
    if (decorView != null) {
      decorView.captureTransitioningViews(mTransitioningViews);
    }
    mTransitioningViews.removeAll(mSharedElements);
  }
  setEpicenter();
}
