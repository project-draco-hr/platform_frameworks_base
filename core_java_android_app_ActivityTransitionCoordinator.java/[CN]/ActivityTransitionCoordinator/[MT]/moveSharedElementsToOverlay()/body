{
  if (mWindow == null || !mWindow.getSharedElementsUseOverlay()) {
    return;
  }
  setSharedElementMatrices();
  int numSharedElements=mSharedElements.size();
  ViewGroup decor=getDecor();
  if (decor != null) {
    boolean moveWithParent=moveSharedElementWithParent();
    Matrix tempMatrix=new Matrix();
    for (int i=0; i < numSharedElements; i++) {
      View view=mSharedElements.get(i);
      tempMatrix.reset();
      mSharedElementParentMatrices.get(i).invert(tempMatrix);
      GhostView.addGhost(view,decor,tempMatrix);
      ViewGroup parent=(ViewGroup)view.getParent();
      if (moveWithParent && !isInTransitionGroup(parent,decor)) {
        GhostViewListeners listener=new GhostViewListeners(view,parent,decor);
        parent.getViewTreeObserver().addOnPreDrawListener(listener);
        mGhostViewListeners.add(listener);
      }
    }
  }
}
