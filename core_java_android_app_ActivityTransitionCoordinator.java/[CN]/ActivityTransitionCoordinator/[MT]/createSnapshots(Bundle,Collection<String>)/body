{
  int numSharedElements=names.size();
  ArrayList<View> snapshots=new ArrayList<View>(numSharedElements);
  if (numSharedElements == 0) {
    return snapshots;
  }
  Context context=getWindow().getContext();
  int[] decorLoc=new int[2];
  ViewGroup decorView=getDecor();
  if (decorView != null) {
    decorView.getLocationOnScreen(decorLoc);
  }
  Matrix tempMatrix=new Matrix();
  for (  String name : names) {
    Bundle sharedElementBundle=state.getBundle(name);
    View snapshot=null;
    if (sharedElementBundle != null) {
      Parcelable parcelable=sharedElementBundle.getParcelable(KEY_SNAPSHOT);
      if (parcelable != null && mListener != null) {
        snapshot=mListener.onCreateSnapshotView(context,parcelable);
      }
      if (snapshot != null) {
        setSharedElementState(snapshot,name,state,tempMatrix,null,decorLoc);
      }
    }
    snapshots.add(snapshot);
  }
  return snapshots;
}
