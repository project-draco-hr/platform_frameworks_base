{
  final View decorView=getDecorView();
  if (decorView == null) {
    throw new IllegalStateException("can't observe a Window without an attached view");
  }
  if (fso == null) {
    throw new NullPointerException("FrameStatsObserver cannot be null");
  }
  if (fso.isRegistered()) {
    throw new IllegalStateException("FrameStatsObserver already registered on a Window.");
  }
  decorView.addFrameStatsObserver(fso);
}
