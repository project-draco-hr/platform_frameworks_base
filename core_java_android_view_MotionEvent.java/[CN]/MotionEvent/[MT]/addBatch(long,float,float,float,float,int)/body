{
  int[] states=mStateSamples;
  float[] data=mDataSamples;
  long[] times=mTimeSamples;
  final int NP=mNumPointers;
  final int NS=mNumSamples;
  final int NI=NP * NS;
  final int ND=NI * NUM_SAMPLE_DATA;
  if (states.length < (NI + NP)) {
    final int NEW_NI=NP * (NS + BASE_AVAIL_SAMPLES);
    int[] newState=new int[NEW_NI];
    System.arraycopy(states,0,newState,0,NI);
    mStateSamples=states=newState;
    final int NEW_ND=NEW_NI * NUM_SAMPLE_DATA;
    float[] newData=new float[NEW_ND];
    System.arraycopy(data,0,newData,0,ND);
    mDataSamples=data=newData;
  }
  if (times.length <= NS) {
    final int NEW_NS=NS + BASE_AVAIL_SAMPLES;
    long[] newHistoryTimes=new long[NEW_NS];
    System.arraycopy(times,0,newHistoryTimes,0,NS);
    mTimeSamples=times=newHistoryTimes;
  }
  times[NS]=times[0];
  times[0]=eventTime;
  final int pos=NS * NUM_SAMPLE_DATA;
  data[pos + SAMPLE_X]=data[SAMPLE_X];
  data[pos + SAMPLE_Y]=data[SAMPLE_Y];
  data[pos + SAMPLE_PRESSURE]=data[SAMPLE_PRESSURE];
  data[pos + SAMPLE_SIZE]=data[SAMPLE_SIZE];
  data[SAMPLE_X]=x;
  data[SAMPLE_Y]=y;
  data[SAMPLE_PRESSURE]=pressure;
  data[SAMPLE_SIZE]=size;
  mNumSamples=NS + 1;
  mRawX=x;
  mRawY=y;
  mMetaState|=metaState;
}
