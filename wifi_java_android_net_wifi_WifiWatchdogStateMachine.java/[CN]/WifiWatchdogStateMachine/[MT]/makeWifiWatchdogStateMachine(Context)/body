{
  ContentResolver contentResolver=context.getContentResolver();
  ConnectivityManager cm=(ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
  sWifiOnly=(cm.isNetworkSupported(ConnectivityManager.TYPE_MOBILE) == false);
  if (Settings.Secure.getString(contentResolver,Settings.Secure.WIFI_WATCHDOG_ON) == null && sWifiOnly) {
    log("Disabling watchog for wi-fi only device");
    putSettingsBoolean(contentResolver,Settings.Secure.WIFI_WATCHDOG_ON,false);
  }
  WifiWatchdogStateMachine wwsm=new WifiWatchdogStateMachine(context);
  wwsm.start();
  return wwsm;
}
