{
  mBroadcastReceiver=new BroadcastReceiver(){
    @Override public void onReceive(    Context context,    Intent intent){
      String action=intent.getAction();
      if (action.equals(WifiManager.NETWORK_STATE_CHANGED_ACTION)) {
        sendMessage(EVENT_NETWORK_STATE_CHANGE,intent);
      }
 else       if (action.equals(WifiManager.RSSI_CHANGED_ACTION)) {
        obtainMessage(EVENT_RSSI_CHANGE,mNetEventCounter,intent.getIntExtra(WifiManager.EXTRA_NEW_RSSI,-200)).sendToTarget();
      }
 else       if (action.equals(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION)) {
        sendMessage(EVENT_SCAN_RESULTS_AVAILABLE);
      }
 else       if (action.equals(WifiManager.WIFI_STATE_CHANGED_ACTION)) {
        sendMessage(EVENT_WIFI_RADIO_STATE_CHANGE,intent.getIntExtra(WifiManager.EXTRA_WIFI_STATE,WifiManager.WIFI_STATE_UNKNOWN));
      }
    }
  }
;
  mIntentFilter=new IntentFilter();
  mIntentFilter.addAction(WifiManager.NETWORK_STATE_CHANGED_ACTION);
  mIntentFilter.addAction(WifiManager.WIFI_STATE_CHANGED_ACTION);
  mIntentFilter.addAction(WifiManager.RSSI_CHANGED_ACTION);
  mIntentFilter.addAction(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION);
}
