{
  HttpURLConnection urlConnection=null;
  try {
    URL url=new URL(mWalledGardenUrl);
    urlConnection=(HttpURLConnection)url.openConnection();
    urlConnection.setInstanceFollowRedirects(false);
    urlConnection.setConnectTimeout(WALLED_GARDEN_SOCKET_TIMEOUT_MS);
    urlConnection.setReadTimeout(WALLED_GARDEN_SOCKET_TIMEOUT_MS);
    urlConnection.setUseCaches(false);
    urlConnection.getInputStream();
    return urlConnection.getResponseCode() != 204;
  }
 catch (  IOException e) {
    if (DBG) {
      log("Walled garden check - probably not a portal: exception " + e);
    }
    return false;
  }
 finally {
    if (urlConnection != null) {
      urlConnection.disconnect();
    }
  }
}
