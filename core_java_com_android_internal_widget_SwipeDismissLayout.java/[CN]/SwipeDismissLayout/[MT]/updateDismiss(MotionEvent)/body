{
  float deltaX=ev.getRawX() - mDownX;
  if (!mDismissed) {
    mVelocityTracker.addMovement(ev);
    mVelocityTracker.computeCurrentVelocity(1000);
    float velocityX=mVelocityTracker.getXVelocity();
    float absVelocityX=Math.abs(velocityX);
    float absVelocityY=Math.abs(mVelocityTracker.getYVelocity());
    if (deltaX > getWidth() / 2) {
      mDismissed=true;
    }
 else     if (absVelocityX >= mMinFlingVelocity && absVelocityX <= mMaxFlingVelocity && absVelocityY < absVelocityX / 2 && velocityX > 0 && deltaX > 0) {
      mDismissed=true;
    }
  }
  if (mDismissed && mSwiping) {
    if (deltaX < getWidth() / 2) {
      mDismissed=false;
    }
  }
}
