{
  final ContentResolver cr=mContext.getContentResolver();
  int wifiState=mWifiManager.getWifiState();
  if (enabled && ((wifiState == WifiManager.WIFI_STATE_ENABLING) || (wifiState == WifiManager.WIFI_STATE_ENABLED))) {
    mWifiManager.setWifiEnabled(false);
    Settings.Global.putInt(cr,Settings.Global.WIFI_SAVED_STATE,1);
  }
  mWifiManager.setWifiApEnabled(null,enabled);
  if (!enabled) {
    if (Settings.Global.getInt(cr,Settings.Global.WIFI_SAVED_STATE,0) == 1) {
      mWifiManager.setWifiEnabled(true);
      Settings.Global.putInt(cr,Settings.Global.WIFI_SAVED_STATE,0);
    }
  }
}
