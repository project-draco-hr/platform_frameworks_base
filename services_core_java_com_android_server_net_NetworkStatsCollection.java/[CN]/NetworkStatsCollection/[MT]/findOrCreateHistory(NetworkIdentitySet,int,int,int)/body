{
  final Key key=new Key(ident,uid,set,tag);
  final NetworkStatsHistory existing=mStats.get(key);
  NetworkStatsHistory updated=null;
  if (existing == null) {
    updated=new NetworkStatsHistory(mBucketDuration,10);
  }
 else   if (existing.getBucketDuration() != mBucketDuration) {
    updated=new NetworkStatsHistory(existing,mBucketDuration);
  }
  if (updated != null) {
    mStats.put(key,updated);
    return updated;
  }
 else {
    return existing;
  }
}
