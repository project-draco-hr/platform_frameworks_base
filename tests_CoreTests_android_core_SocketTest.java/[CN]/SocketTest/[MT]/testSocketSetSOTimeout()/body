{
  Socket sock=new Socket();
  int timeout=5000;
  long start=System.currentTimeMillis();
  try {
    sock.connect(new InetSocketAddress(NON_EXISTING_ADDRESS,80),timeout);
  }
 catch (  SocketTimeoutException e) {
    long delay=System.currentTimeMillis() - start;
    if (Math.abs(delay - timeout) > 1000) {
      fail("timeout was not accurate. expected: " + timeout + " actual: "+ delay+ " miliseconds.");
    }
  }
 finally {
    try {
      sock.close();
    }
 catch (    IOException ioe) {
    }
  }
}
