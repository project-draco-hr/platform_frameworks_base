{
  try {
    client=new Socket();
    new Thread(){
      @Override public void run(){
        try {
          client.connect(new InetSocketAddress(PACKAGE_DROPPING_ADDRESS,1357));
        }
 catch (        Exception ex) {
          error=ex;
        }
        connected=true;
      }
    }
.start();
    Thread.sleep(1000);
    Assert.assertNull("Connect must not fail immediately. Maybe try different address.",error);
    Assert.assertFalse("Connect must not succeed. Maybe try different address.",connected);
    client.close();
    Thread.sleep(1000);
    if (error == null) {
      fail("Socket connect still ongoing");
    }
 else     if (!(error instanceof SocketException)) {
      fail("Socket connect interrupted with wrong error: " + error.toString());
    }
  }
 catch (  Exception ex) {
    throw new RuntimeException(ex);
  }
}
