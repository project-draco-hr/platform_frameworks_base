{
  String[] dnsServers=mDefaultDnsServers;
  final Collection<InetAddress> dnses=lp.getDnsServers();
  if (dnses != null && !dnses.isEmpty()) {
    dnsServers=NetworkUtils.makeStrings(dnses);
  }
  if (VDBG) {
    Log.d(TAG,"Setting DNS forwarders: Network=" + network + ", dnsServers="+ Arrays.toString(dnsServers));
  }
  try {
    mNMService.setDnsForwarders(network,dnsServers);
  }
 catch (  Exception e) {
    Log.e(TAG,"Setting DNS forwarders failed!");
    transitionTo(mSetDnsForwardersErrorState);
  }
}
