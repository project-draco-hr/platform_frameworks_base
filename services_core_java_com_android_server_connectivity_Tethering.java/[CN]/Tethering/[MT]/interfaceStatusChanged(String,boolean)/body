{
  if (VDBG)   Log.d(TAG,"interfaceStatusChanged " + iface + ", "+ up);
synchronized (mPublicSync) {
    int interfaceType=ifaceNameToType(iface);
    if (interfaceType == ConnectivityManager.TETHERING_INVALID) {
      return;
    }
    TetherInterfaceStateMachine sm=mIfaces.get(iface);
    if (up) {
      if (sm == null) {
        sm=new TetherInterfaceStateMachine(iface,mLooper,interfaceType,mNMService,mStatsService,this);
        mIfaces.put(iface,sm);
        sm.start();
      }
    }
 else {
      if (interfaceType == ConnectivityManager.TETHERING_USB) {
        if (VDBG)         Log.d(TAG,"ignore interface down for " + iface);
      }
 else       if (sm != null) {
        sm.sendMessage(TetherInterfaceStateMachine.CMD_INTERFACE_DOWN);
        mIfaces.remove(iface);
      }
    }
  }
}
