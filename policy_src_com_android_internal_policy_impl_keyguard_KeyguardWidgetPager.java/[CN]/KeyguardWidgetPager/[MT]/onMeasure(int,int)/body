{
  mLastWidthMeasureSpec=widthMeasureSpec;
  mLastHeightMeasureSpec=heightMeasureSpec;
  int maxChallengeTop=-1;
  View parent=(View)getParent();
  boolean challengeShowing=false;
  if (parent.getParent() instanceof SlidingChallengeLayout) {
    SlidingChallengeLayout scl=(SlidingChallengeLayout)parent.getParent();
    int top=scl.getMaxChallengeTop();
    maxChallengeTop=top - getPaddingTop();
    challengeShowing=scl.isChallengeShowing();
    int count=getChildCount();
    for (int i=0; i < count; i++) {
      KeyguardWidgetFrame frame=getWidgetPageAt(i);
      frame.setMaxChallengeTop(maxChallengeTop);
      if (challengeShowing && i == mCurrentPage && !mHasMeasure) {
        frame.shrinkWidget();
      }
    }
  }
  super.onMeasure(widthMeasureSpec,heightMeasureSpec);
  mHasMeasure=true;
}
