{
  int left=getPaddingStart();
  int childCount=getChildCount();
  int ownHeight=getHeight() - getPaddingTop() - getPaddingBottom();
  for (int i=0; i < childCount; i++) {
    View child=getChildAt(i);
    if (child.getVisibility() == GONE) {
      continue;
    }
    int childHeight=child.getMeasuredHeight();
    MarginLayoutParams params=(MarginLayoutParams)child.getLayoutParams();
    left+=params.getMarginStart();
    int right=left + child.getMeasuredWidth();
    int top=(int)(getPaddingTop() + (ownHeight - childHeight) / 2.0f);
    int bottom=top + childHeight;
    int layoutLeft=left;
    int layoutRight=right;
    if (child == mProfileBadge) {
      int paddingEnd=getPaddingEnd();
      if (mShowWorkBadgeAtEnd) {
        paddingEnd=mContentEndMargin;
      }
      layoutRight=getWidth() - paddingEnd;
      layoutLeft=layoutRight - child.getMeasuredWidth();
    }
    if (getLayoutDirection() == LAYOUT_DIRECTION_RTL) {
      int ltrLeft=layoutLeft;
      layoutLeft=getWidth() - layoutRight;
      layoutRight=getWidth() - ltrLeft;
    }
    child.layout(layoutLeft,top,layoutRight,bottom);
    left=right + params.getMarginEnd();
  }
  updateTouchListener();
}
