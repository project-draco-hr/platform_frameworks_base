{
  if (DEBUG)   Slog.v(TAG,"settingsRestored");
  boolean success=false;
synchronized (mLock) {
    loadSettingsLocked();
    if (mNextWallpaperComponent != null && !mNextWallpaperComponent.equals(mImageWallpaperComponent)) {
      try {
        bindWallpaperComponentLocked(mNextWallpaperComponent,false);
      }
 catch (      IllegalArgumentException e) {
        bindWallpaperComponentLocked(null,false);
      }
      success=true;
    }
 else {
      if ("".equals(mName)) {
        if (DEBUG)         Slog.v(TAG,"settingsRestored: name is empty");
        success=true;
      }
 else {
        if (DEBUG)         Slog.v(TAG,"settingsRestored: attempting to restore named resource");
        success=restoreNamedResourceLocked();
      }
      if (DEBUG)       Slog.v(TAG,"settingsRestored: success=" + success);
      if (success) {
        bindWallpaperComponentLocked(null,false);
      }
    }
  }
  if (!success) {
    Slog.e(TAG,"Failed to restore wallpaper: '" + mName + "'");
    mName="";
    WALLPAPER_FILE.delete();
  }
synchronized (mLock) {
    saveSettingsLocked();
  }
}
