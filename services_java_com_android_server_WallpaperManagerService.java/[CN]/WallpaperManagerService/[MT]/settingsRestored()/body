{
  if (DEBUG)   Log.v(TAG,"settingsRestored");
  boolean success=false;
synchronized (mLock) {
    loadSettingsLocked();
    if (mNextWallpaperComponent != null && !mNextWallpaperComponent.equals(mImageWallpaperComponent)) {
      bindWallpaperComponentLocked(null);
      success=true;
    }
 else {
      if ("".equals(mName)) {
        if (DEBUG)         Log.v(TAG,"settingsRestored: name is empty");
        success=true;
      }
 else {
        if (DEBUG)         Log.v(TAG,"settingsRestored: attempting to restore named resource");
        success=restoreNamedResourceLocked();
      }
      if (DEBUG)       Log.v(TAG,"settingsRestored: success=" + success);
      if (success) {
        bindWallpaperComponentLocked(mImageWallpaperComponent);
      }
    }
  }
  if (!success) {
    Log.e(TAG,"Failed to restore wallpaper: '" + mName + "'");
    mName="";
    WALLPAPER_FILE.delete();
  }
  saveSettingsLocked();
}
