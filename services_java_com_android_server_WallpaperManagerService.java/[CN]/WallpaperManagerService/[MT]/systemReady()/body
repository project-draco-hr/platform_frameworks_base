{
  if (DEBUG)   Slog.v(TAG,"systemReady");
  WallpaperData wallpaper=mWallpaperMap.get(UserHandle.USER_OWNER);
  switchWallpaper(wallpaper);
  wallpaper.wallpaperObserver=new WallpaperObserver(wallpaper);
  wallpaper.wallpaperObserver.startWatching();
  IntentFilter userFilter=new IntentFilter();
  userFilter.addAction(Intent.ACTION_USER_SWITCHED);
  userFilter.addAction(Intent.ACTION_USER_REMOVED);
  mContext.registerReceiver(new BroadcastReceiver(){
    @Override public void onReceive(    Context context,    Intent intent){
      String action=intent.getAction();
      if (Intent.ACTION_USER_SWITCHED.equals(action)) {
        switchUser(intent.getIntExtra(Intent.EXTRA_USER_HANDLE,0));
      }
 else       if (Intent.ACTION_USER_REMOVED.equals(action)) {
        removeUser(intent.getIntExtra(Intent.EXTRA_USER_HANDLE,0));
      }
    }
  }
,userFilter);
}
