{
  if (mContext.checkCallingOrSelfPermission(android.Manifest.permission.DUMP) != PackageManager.PERMISSION_GRANTED) {
    pw.println("Permission Denial: can't dump wallpaper service from from pid=" + Binder.getCallingPid() + ", uid="+ Binder.getCallingUid());
    return;
  }
synchronized (mLock) {
    pw.println("Current Wallpaper Service state:");
    pw.print("  mWidth=");
    pw.print(mWidth);
    pw.print(" mHeight=");
    pw.println(mHeight);
    pw.print("  mName=");
    pw.println(mName);
    pw.print("  mWallpaperComponent=");
    pw.println(mWallpaperComponent);
    if (mWallpaperConnection != null) {
      WallpaperConnection conn=mWallpaperConnection;
      pw.print("  Wallpaper connection ");
      pw.print(conn);
      pw.println(":");
      pw.print("    mInfo.component=");
      pw.println(conn.mInfo.getComponent());
      pw.print("    mToken=");
      pw.println(conn.mToken);
      pw.print("    mService=");
      pw.println(conn.mService);
      pw.print("    mEngine=");
      pw.println(conn.mEngine);
      pw.print("    mLastDiedTime=");
      pw.println(mLastDiedTime - SystemClock.uptimeMillis());
    }
  }
}
