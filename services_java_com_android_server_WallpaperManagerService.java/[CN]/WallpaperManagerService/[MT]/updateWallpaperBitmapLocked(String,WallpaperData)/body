{
  if (name == null)   name="";
  try {
    File dir=getWallpaperDir(wallpaper.userId);
    if (!dir.exists()) {
      dir.mkdir();
      FileUtils.setPermissions(dir.getPath(),FileUtils.S_IRWXU | FileUtils.S_IRWXG | FileUtils.S_IXOTH,-1,-1);
    }
    ParcelFileDescriptor fd=ParcelFileDescriptor.open(new File(dir,WALLPAPER),MODE_CREATE | MODE_READ_WRITE);
    wallpaper.name=name;
    return fd;
  }
 catch (  FileNotFoundException e) {
    Slog.w(TAG,"Error setting wallpaper",e);
  }
  return null;
}
