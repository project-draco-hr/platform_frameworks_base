{
synchronized (mLock) {
    for (int i=0; i < mWallpaperMap.size(); i++) {
      WallpaperData wallpaper=mWallpaperMap.valueAt(i);
      if (wallpaper.wallpaperComponent != null && wallpaper.wallpaperComponent.getPackageName().equals(packageName)) {
        wallpaper.wallpaperUpdating=false;
        ComponentName comp=wallpaper.wallpaperComponent;
        clearWallpaperComponentLocked(wallpaper);
        if (wallpaper.userId == mCurrentUserId && !bindWallpaperComponentLocked(comp,false,false,wallpaper,null)) {
          Slog.w(TAG,"Wallpaper no longer available; reverting to default");
          clearWallpaperLocked(false,wallpaper.userId,null);
        }
      }
    }
  }
}
