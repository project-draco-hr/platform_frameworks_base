{
  boolean changed=false;
synchronized (mLock) {
    if (mWallpaperComponent != null) {
      int change=isPackageDisappearing(mWallpaperComponent.getPackageName());
      if (change == PACKAGE_PERMANENT_CHANGE || change == PACKAGE_TEMPORARY_CHANGE) {
        changed=true;
        if (doit) {
          Log.w(TAG,"Wallpaper uninstalled, removing: " + mWallpaperComponent);
          clearWallpaperLocked();
        }
      }
    }
    if (mNextWallpaperComponent != null) {
      int change=isPackageDisappearing(mNextWallpaperComponent.getPackageName());
      if (change == PACKAGE_PERMANENT_CHANGE || change == PACKAGE_TEMPORARY_CHANGE) {
        mNextWallpaperComponent=null;
      }
    }
    if (mWallpaperComponent != null && isPackageModified(mWallpaperComponent.getPackageName())) {
      try {
        mContext.getPackageManager().getServiceInfo(mWallpaperComponent,0);
      }
 catch (      NameNotFoundException e) {
        Log.w(TAG,"Wallpaper component gone, removing: " + mWallpaperComponent);
        clearWallpaperLocked();
      }
    }
    if (mNextWallpaperComponent != null && isPackageModified(mNextWallpaperComponent.getPackageName())) {
      try {
        mContext.getPackageManager().getServiceInfo(mNextWallpaperComponent,0);
      }
 catch (      NameNotFoundException e) {
        mNextWallpaperComponent=null;
      }
    }
  }
  return changed;
}
