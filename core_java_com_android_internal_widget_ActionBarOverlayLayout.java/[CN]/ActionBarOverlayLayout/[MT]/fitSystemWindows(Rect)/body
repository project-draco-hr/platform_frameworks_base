{
  pullChildren();
  final int vis=getWindowSystemUiVisibility();
  final boolean stable=(vis & SYSTEM_UI_FLAG_LAYOUT_STABLE) != 0;
  boolean changed=applyInsets(mActionBarTop,insets,true,true,false,true);
  if (mActionBarBottom != null) {
    changed|=applyInsets(mActionBarBottom,insets,true,false,true,true);
  }
  int topSpace=0;
  if (stable || mActionBarTop.getVisibility() == VISIBLE) {
    topSpace=mActionBarHeight;
  }
  if (mActionBar != null && mActionBar.hasNonEmbeddedTabs()) {
    View tabs=mContainerView.getTabContainer();
    if (tabs != null && (stable || tabs.getVisibility() == VISIBLE)) {
      topSpace+=mActionBarHeight;
    }
  }
  int bottomSpace=0;
  if (mActionView.isSplitActionBar()) {
    if ((mActionBarBottom != null && (stable || mActionBarBottom.getVisibility() == VISIBLE))) {
      bottomSpace=mActionBarHeight;
    }
  }
  boolean res=computeFitSystemWindows(insets,mLocalInsets);
  if (!mOverlayMode && !stable) {
    mLocalInsets.top+=topSpace;
    mLocalInsets.bottom+=bottomSpace;
  }
 else {
    insets.top+=topSpace;
    insets.bottom+=bottomSpace;
  }
  changed|=applyInsets(mContent,mLocalInsets,true,true,true,true);
  if (changed) {
    requestLayout();
  }
  super.fitSystemWindows(insets);
  return true;
}
