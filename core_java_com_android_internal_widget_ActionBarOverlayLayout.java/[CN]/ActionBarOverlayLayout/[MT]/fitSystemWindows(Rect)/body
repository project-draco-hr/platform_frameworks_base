{
  pullChildren();
  final int vis=getWindowSystemUiVisibility();
  final boolean stable=(vis & SYSTEM_UI_FLAG_LAYOUT_STABLE) != 0;
  boolean changed=applyInsets(mActionBarTop,insets,true,true,false,true);
  if (mActionBarBottom != null) {
    changed|=applyInsets(mActionBarBottom,insets,true,false,true,true);
  }
  if ((vis & SYSTEM_UI_LAYOUT_FLAGS) == 0) {
    changed|=applyInsets(mContent,insets,true,true,true,true);
    insets.set(0,0,0,0);
  }
 else {
    changed|=applyInsets(mContent,mZeroRect,true,true,true,true);
  }
  if (stable || mActionBarTop.getVisibility() == VISIBLE) {
    insets.top+=mActionBarHeight;
  }
  if (mActionBar != null && mActionBar.hasNonEmbeddedTabs()) {
    View tabs=mContainerView.getTabContainer();
    if (stable || (tabs != null && tabs.getVisibility() == VISIBLE)) {
      insets.top+=mActionBarHeight;
    }
  }
  if (mActionView.isSplitActionBar()) {
    if (stable || (mActionBarBottom != null && mActionBarBottom.getVisibility() == VISIBLE)) {
      insets.bottom+=mActionBarHeight;
    }
  }
  if (changed) {
    requestLayout();
  }
  return super.fitSystemWindows(insets);
}
