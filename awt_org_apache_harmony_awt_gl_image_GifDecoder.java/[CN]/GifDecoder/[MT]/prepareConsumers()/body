{
  GifLogicalScreen gls=gifDataStream.logicalScreen;
  setDimensions(gls.logicalScreenWidth,gls.logicalScreenHeight);
  setProperties(properties);
  currBlock=gifDataStream.graphicBlocks.get(0);
  if (forceRGB) {
    setColorModel(ColorModel.getRGBdefault());
  }
 else {
    setColorModel(gls.globalColorTable.getColorModel(currBlock.transparentColor));
  }
  if (forceRGB) {
    int fillColor=0xFF000000;
    if (gls.backgroundColor != IMPOSSIBLE_VALUE) {
      fillColor=gls.backgroundColor;
    }
    Arrays.fill(getScreenRGBBuffer(),fillColor);
  }
 else {
    int fillColor=0;
    if (gls.backgroundColor != IMPOSSIBLE_VALUE) {
      fillColor=gls.backgroundColor;
    }
 else {
      fillColor=gls.globalColorTable.cm.getTransparentPixel();
    }
    screenBuffer=new byte[gls.logicalScreenHeight * gls.logicalScreenWidth];
    Arrays.fill(screenBuffer,(byte)fillColor);
  }
  setHints(interlacedHints);
}
