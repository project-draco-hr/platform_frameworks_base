{
  DhcpInfo dhcpInfo=new DhcpInfo();
  LinkProperties linkProperties=getLinkProperties(netId);
  if (linkProperties != null) {
    Iterator<LinkAddress> iter=linkProperties.getLinkAddresses().iterator();
    if (iter.hasNext()) {
      try {
        LinkAddress linkAddress=iter.next();
        dhcpInfo.ipAddress=NetworkUtils.inetAddressToInt(linkAddress.getAddress());
        dhcpInfo.gateway=NetworkUtils.inetAddressToInt(linkProperties.getGateway());
        dhcpInfo.netmask=NetworkUtils.prefixLengthToNetmaskInt(linkAddress.getNetworkPrefixLength());
        Iterator<InetAddress> dnsIterator=linkProperties.getDnses().iterator();
        dhcpInfo.dns1=NetworkUtils.inetAddressToInt(dnsIterator.next());
        if (dnsIterator.hasNext()) {
          dhcpInfo.dns2=NetworkUtils.inetAddressToInt(dnsIterator.next());
        }
      }
 catch (      IllegalArgumentException e1) {
        Log.e(TAG,"IPv6 address cannot be handled " + e1);
      }
catch (      NullPointerException e2) {
        Log.e(TAG,"Invalid partial IP configuration " + e2);
      }
    }
  }
  return dhcpInfo;
}
