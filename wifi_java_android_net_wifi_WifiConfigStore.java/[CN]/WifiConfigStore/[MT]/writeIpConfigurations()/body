{
  StringBuilder builder=new StringBuilder();
  BufferedWriter out=null;
  builder.append(IPCONFIG_FILE_VERSION);
  builder.append("\n");
synchronized (sConfiguredNetworks) {
    for (    WifiConfiguration config : sConfiguredNetworks.values()) {
      if (config.ipAssignment == WifiConfiguration.IpAssignment.STATIC) {
        builder.append("id=" + configKey(config));
        builder.append(":");
        builder.append("ip=" + config.ipConfig.ipAddress);
        builder.append(":");
        builder.append("gateway=" + config.ipConfig.gateway);
        builder.append(":");
        builder.append("netmask=" + config.ipConfig.netmask);
        builder.append(":");
        builder.append("dns1=" + config.ipConfig.dns1);
        builder.append(":");
        builder.append("dns2=" + config.ipConfig.dns2);
        builder.append("\n");
      }
    }
  }
  try {
    out=new BufferedWriter(new FileWriter(ipConfigFile),builder.length());
    out.write(builder.toString());
  }
 catch (  IOException e) {
    Log.e(TAG,"Error writing data file");
    return;
  }
 finally {
    if (out != null) {
      try {
        out.close();
      }
 catch (      Exception e) {
      }
    }
  }
}
