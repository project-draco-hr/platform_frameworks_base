{
  boolean newNetwork=(newConfig.networkId == INVALID_NETWORK_ID);
  boolean writeConfigToFile=false;
  if (newConfig.ipAssignment != IpAssignment.UNASSIGNED) {
    if (newNetwork || (currentConfig.ipAssignment != newConfig.ipAssignment) || (currentConfig.ipConfig.ipAddress != newConfig.ipConfig.ipAddress)|| (currentConfig.ipConfig.gateway != newConfig.ipConfig.gateway)|| (currentConfig.ipConfig.netmask != newConfig.ipConfig.netmask)|| (currentConfig.ipConfig.dns1 != newConfig.ipConfig.dns1)|| (currentConfig.ipConfig.dns2 != newConfig.ipConfig.dns2)) {
      currentConfig.ipAssignment=newConfig.ipAssignment;
      currentConfig.ipConfig=newConfig.ipConfig;
      writeConfigToFile=true;
    }
  }
  if (newConfig.proxySettings != ProxySettings.UNASSIGNED) {
    InetSocketAddress newSockAddr=newConfig.proxyProperties.getSocketAddress();
    String newExclusionList=newConfig.proxyProperties.getExclusionList();
    InetSocketAddress currentSockAddr=currentConfig.proxyProperties.getSocketAddress();
    String currentExclusionList=currentConfig.proxyProperties.getExclusionList();
    boolean socketAddressDiffers=false;
    boolean exclusionListDiffers=false;
    if (newSockAddr != null && currentSockAddr != null) {
      socketAddressDiffers=!currentSockAddr.equals(newSockAddr);
    }
 else     if (newSockAddr != null || currentSockAddr != null) {
      socketAddressDiffers=true;
    }
    if (newExclusionList != null && currentExclusionList != null) {
      exclusionListDiffers=currentExclusionList.equals(newExclusionList);
    }
 else     if (newExclusionList != null || currentExclusionList != null) {
      exclusionListDiffers=true;
    }
    if (newNetwork || (currentConfig.proxySettings != newConfig.proxySettings) || socketAddressDiffers|| exclusionListDiffers) {
      currentConfig.proxySettings=newConfig.proxySettings;
      currentConfig.proxyProperties=newConfig.proxyProperties;
      Log.d(TAG,"proxy change SSID = " + currentConfig.SSID + " proxyProperties: "+ currentConfig.proxyProperties.toString());
      writeConfigToFile=true;
    }
  }
  if (writeConfigToFile) {
    writeIpAndProxyConfigurations();
    sendConfigChangeBroadcast();
  }
}
