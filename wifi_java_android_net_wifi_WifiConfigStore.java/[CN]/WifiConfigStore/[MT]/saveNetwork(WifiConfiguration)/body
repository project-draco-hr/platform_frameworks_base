{
  boolean newNetwork=(config.networkId == INVALID_NETWORK_ID);
  NetworkUpdateResult result=addOrUpdateNetworkNative(config);
  int netId=result.getNetworkId();
  if (newNetwork && netId != INVALID_NETWORK_ID) {
    WifiNative.enableNetwork(netId,false);
    sConfiguredNetworks.get(netId).status=Status.ENABLED;
  }
  WifiNative.saveConfig();
  sendConfiguredNetworksChangedBroadcast();
  return result;
}
