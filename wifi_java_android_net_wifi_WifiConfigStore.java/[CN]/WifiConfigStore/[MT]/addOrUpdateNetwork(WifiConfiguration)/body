{
  if (VDBG)   localLog("addOrUpdateNetwork",config.networkId);
  NetworkUpdateResult result=addOrUpdateNetworkNative(config);
  if (result.getNetworkId() != WifiConfiguration.INVALID_NETWORK_ID) {
    sendConfiguredNetworksChangedBroadcast(mConfiguredNetworks.get(result.getNetworkId()),result.isNewNetwork ? WifiManager.CHANGE_REASON_ADDED : WifiManager.CHANGE_REASON_CONFIG_CHANGE);
  }
  return result.getNetworkId();
}
