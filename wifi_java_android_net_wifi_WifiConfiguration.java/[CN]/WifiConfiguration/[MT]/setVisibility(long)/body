{
  if (scanResultCache == null) {
    visibility=null;
    return null;
  }
  Visibility status=new Visibility();
  long now_ms=System.currentTimeMillis();
  for (  ScanResult result : scanResultCache.values()) {
    if (result.seen == 0)     continue;
    if (result.is5GHz()) {
      status.num5=status.num5 + 1;
    }
 else     if (result.is24GHz()) {
      status.num24=status.num24 + 1;
    }
    if ((now_ms - result.seen) > age)     continue;
    if (result.is5GHz()) {
      if (result.level > status.rssi5) {
        status.rssi5=result.level;
        status.age5=result.seen;
        status.BSSID5=result.BSSID;
      }
    }
 else     if (result.is24GHz()) {
      if (result.level > status.rssi24) {
        status.rssi24=result.level;
        status.age24=result.seen;
        status.BSSID24=result.BSSID;
      }
    }
  }
  visibility=status;
  return status;
}
