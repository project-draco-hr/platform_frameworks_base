{
  ArrayList<DashboardTile> tiles=new ArrayList<>();
  UserManager userManager=UserManager.get(context);
  for (  UserHandle user : userManager.getUserProfiles()) {
    getTilesForAction(context,user,SETTINGS_ACTION,cache,null,tiles,true);
    getTilesForAction(context,user,EXTRA_SETTINGS_ACTION,cache,null,tiles,false);
    getTilesForAction(context,user,OPERATOR_SETTINGS,cache,OPERATOR_DEFAULT_CATEGORY,tiles,false);
    getTilesForAction(context,user,MANUFACTURER_SETTINGS,cache,MANUFACTURER_DEFAULT_CATEGORY,tiles,false);
  }
  HashMap<String,DashboardCategory> categoryMap=new HashMap<>();
  for (  DashboardTile tile : tiles) {
    DashboardCategory category=categoryMap.get(tile.category);
    if (category == null) {
      category=createCategory(context,tile.category);
      if (category == null) {
        Log.w(LOG_TAG,"Couldn't find category " + tile.category);
        continue;
      }
      categoryMap.put(category.key,category);
    }
    category.addTile(tile);
  }
  ArrayList<DashboardCategory> categories=new ArrayList<>(categoryMap.values());
  for (  DashboardCategory category : categories) {
    Collections.sort(category.tiles,TILE_COMPARATOR);
  }
  Collections.sort(categories,CATEGORY_COMPARATOR);
  return categories;
}
