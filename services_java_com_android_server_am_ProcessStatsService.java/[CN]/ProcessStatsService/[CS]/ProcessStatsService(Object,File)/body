{
  mLock=lock;
  mBaseDir=file;
  mBaseDir.mkdirs();
  mProcessStats=new ProcessStats(true);
  updateFile();
  SystemProperties.addChangeCallback(new Runnable(){
    @Override public void run(){
synchronized (mLock) {
        if (mProcessStats.evaluateSystemProperties(false)) {
          mProcessStats.mFlags|=ProcessStats.FLAG_SYSPROPS;
          writeStateLocked(true,true);
          mProcessStats.evaluateSystemProperties(true);
        }
      }
    }
  }
);
}
