{
  super(context,attrs,defStyleAttr,defStyleRes);
  initImageView();
  final TypedArray a=context.obtainStyledAttributes(attrs,R.styleable.ImageView,defStyleAttr,defStyleRes);
  final Drawable d=a.getDrawable(R.styleable.ImageView_src);
  if (d != null) {
    setImageDrawable(d);
  }
  mBaselineAlignBottom=a.getBoolean(R.styleable.ImageView_baselineAlignBottom,false);
  mBaseline=a.getDimensionPixelSize(R.styleable.ImageView_baseline,-1);
  setAdjustViewBounds(a.getBoolean(R.styleable.ImageView_adjustViewBounds,false));
  setMaxWidth(a.getDimensionPixelSize(R.styleable.ImageView_maxWidth,Integer.MAX_VALUE));
  setMaxHeight(a.getDimensionPixelSize(R.styleable.ImageView_maxHeight,Integer.MAX_VALUE));
  final int index=a.getInt(R.styleable.ImageView_scaleType,-1);
  if (index >= 0) {
    setScaleType(sScaleTypeArray[index]);
  }
  if (a.hasValue(R.styleable.ImageView_tint)) {
    mDrawableTintList=a.getColorStateList(R.styleable.ImageView_tint);
    mHasDrawableTint=true;
    mDrawableTintMode=PorterDuff.Mode.SRC_ATOP;
    mHasDrawableTintMode=true;
  }
  if (a.hasValue(R.styleable.ImageView_tintMode)) {
    mDrawableTintMode=Drawable.parseTintMode(a.getInt(R.styleable.ImageView_tintMode,-1),mDrawableTintMode);
    mHasDrawableTintMode=true;
  }
  applyImageTint();
  final int alpha=a.getInt(R.styleable.ImageView_drawableAlpha,255);
  if (alpha != 255) {
    setImageAlpha(alpha);
  }
  mCropToPadding=a.getBoolean(R.styleable.ImageView_cropToPadding,false);
  a.recycle();
}
