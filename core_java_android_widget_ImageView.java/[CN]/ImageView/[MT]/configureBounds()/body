{
  if (mDrawable == null || !mHaveFrame) {
    return;
  }
  final int dwidth=mDrawableWidth;
  final int dheight=mDrawableHeight;
  final int vwidth=getWidth() - mPaddingLeft - mPaddingRight;
  final int vheight=getHeight() - mPaddingTop - mPaddingBottom;
  final boolean fits=(dwidth < 0 || vwidth == dwidth) && (dheight < 0 || vheight == dheight);
  if (dwidth <= 0 || dheight <= 0 || ScaleType.FIT_XY == mScaleType) {
    mDrawable.setBounds(0,0,vwidth,vheight);
    mDrawMatrix=null;
  }
 else {
    mDrawable.setBounds(0,0,dwidth,dheight);
    if (ScaleType.MATRIX == mScaleType) {
      if (mMatrix.isIdentity()) {
        mDrawMatrix=null;
      }
 else {
        mDrawMatrix=mMatrix;
      }
    }
 else     if (fits) {
      mDrawMatrix=null;
    }
 else     if (ScaleType.CENTER == mScaleType) {
      mDrawMatrix=mMatrix;
      mDrawMatrix.setTranslate(Math.round((vwidth - dwidth) * 0.5f),Math.round((vheight - dheight) * 0.5f));
    }
 else     if (ScaleType.CENTER_CROP == mScaleType) {
      mDrawMatrix=mMatrix;
      float scale;
      float dx=0, dy=0;
      if (dwidth * vheight > vwidth * dheight) {
        scale=(float)vheight / (float)dheight;
        dx=(vwidth - dwidth * scale) * 0.5f;
      }
 else {
        scale=(float)vwidth / (float)dwidth;
        dy=(vheight - dheight * scale) * 0.5f;
      }
      mDrawMatrix.setScale(scale,scale);
      mDrawMatrix.postTranslate(Math.round(dx),Math.round(dy));
    }
 else     if (ScaleType.CENTER_INSIDE == mScaleType) {
      mDrawMatrix=mMatrix;
      float scale;
      float dx;
      float dy;
      if (dwidth <= vwidth && dheight <= vheight) {
        scale=1.0f;
      }
 else {
        scale=Math.min((float)vwidth / (float)dwidth,(float)vheight / (float)dheight);
      }
      dx=Math.round((vwidth - dwidth * scale) * 0.5f);
      dy=Math.round((vheight - dheight * scale) * 0.5f);
      mDrawMatrix.setScale(scale,scale);
      mDrawMatrix.postTranslate(dx,dy);
    }
 else {
      mTempSrc.set(0,0,dwidth,dheight);
      mTempDst.set(0,0,vwidth,vheight);
      mDrawMatrix=mMatrix;
      mDrawMatrix.setRectToRect(mTempSrc,mTempDst,scaleTypeToScaleToFit(mScaleType));
    }
  }
}
