{
  if (d != mRecycleableBitmapDrawable && mRecycleableBitmapDrawable != null) {
    mRecycleableBitmapDrawable.setBitmap(null);
  }
  if (mDrawable != null) {
    if (mDrawable.isVisible()) {
      mDrawable.setVisible(false,false);
    }
    mDrawable.setCallback(null);
    unscheduleDrawable(mDrawable);
  }
  mDrawable=d;
  if (d != null) {
    d.setCallback(this);
    d.setLayoutDirection(getLayoutDirection());
    if (d.isStateful()) {
      d.setState(getDrawableState());
    }
    if (isAttachedToWindow()) {
      d.setVisible(getWindowVisibility() == VISIBLE && isShown(),true);
    }
    d.setLevel(mLevel);
    mDrawableWidth=d.getIntrinsicWidth();
    mDrawableHeight=d.getIntrinsicHeight();
    applyImageTint();
    applyColorMod();
    configureBounds();
  }
 else {
    mDrawableWidth=mDrawableHeight=-1;
  }
}
