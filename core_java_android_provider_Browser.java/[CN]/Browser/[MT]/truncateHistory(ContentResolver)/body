{
  Cursor c=null;
  try {
    c=cr.query(BOOKMARKS_URI,TRUNCATE_HISTORY_PROJECTION,"bookmark = 0",null,BookmarkColumns.DATE);
    if (c.moveToFirst() && c.getCount() >= MAX_HISTORY_COUNT) {
      for (int i=0; i < TRUNCATE_N_OLDEST; i++) {
        cr.delete(BOOKMARKS_URI,"_id = " + c.getInt(TRUNCATE_HISTORY_PROJECTION_ID_INDEX),null);
        if (!c.moveToNext())         break;
      }
    }
  }
 catch (  IllegalStateException e) {
    Log.e(LOGTAG,"truncateHistory",e);
  }
 finally {
    if (c != null)     c.close();
  }
}
