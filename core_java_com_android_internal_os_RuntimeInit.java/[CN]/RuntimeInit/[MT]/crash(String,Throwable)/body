{
  if (mApplicationObject != null) {
    byte[] crashData=null;
    try {
      Log.e(TAG,Log.getStackTraceString(t));
      crashData=marshallException(tag,t);
      if (crashData == null) {
        throw new NullPointerException("Can't marshall crash data");
      }
    }
 catch (    Throwable t2) {
      try {
        Log.e(TAG,"Error reporting crash: " + Log.getStackTraceString(t2));
      }
 catch (      Throwable t3) {
      }
    }
    try {
      String msg=t.getMessage();
      if (msg == null) {
        msg=t.toString();
      }
      IActivityManager am=ActivityManagerNative.getDefault();
      try {
        int res=am.handleApplicationError(mApplicationObject,0,tag,msg,t.toString(),crashData);
        if (res == 1) {
          Debug.waitForDebugger();
          return;
        }
      }
 catch (      RemoteException e) {
      }
    }
 catch (    Throwable t2) {
      try {
        Log.e(TAG,"Error reporting crash: " + Log.getStackTraceString(t2));
      }
 catch (      Throwable t3) {
      }
    }
 finally {
      Process.killProcess(Process.myPid());
      System.exit(10);
    }
  }
 else {
    try {
      Log.e(TAG,"*** EXCEPTION IN SYSTEM PROCESS.  System will crash.");
      Log.e(tag,Log.getStackTraceString(t));
      reportException(tag,t,true);
    }
 catch (    Throwable t2) {
    }
 finally {
      Process.killProcess(Process.myPid());
      System.exit(10);
    }
  }
}
