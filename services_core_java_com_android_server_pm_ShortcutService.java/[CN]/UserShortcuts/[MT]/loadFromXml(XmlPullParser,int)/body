{
  final UserShortcuts ret=new UserShortcuts(userId);
  final int outerDepth=parser.getDepth();
  int type;
  while ((type=parser.next()) != XmlPullParser.END_DOCUMENT && (type != XmlPullParser.END_TAG || parser.getDepth() > outerDepth)) {
    if (type != XmlPullParser.START_TAG) {
      continue;
    }
    final int depth=parser.getDepth();
    final String tag=parser.getName();
switch (tag) {
case TAG_LAUNCHER:
{
        ret.mLauncherComponent=ShortcutService.parseComponentNameAttribute(parser,ATTR_VALUE);
        continue;
      }
case PackageShortcuts.TAG_ROOT:
{
      final PackageShortcuts shortcuts=PackageShortcuts.loadFromXml(parser,userId);
      ret.getPackages().put(shortcuts.mPackageName,shortcuts);
      continue;
    }
case LauncherShortcuts.TAG_ROOT:
{
    final LauncherShortcuts shortcuts=LauncherShortcuts.loadFromXml(parser,userId);
    ret.getLaunchers().put(shortcuts.mPackageName,shortcuts);
    continue;
  }
}
throw ShortcutService.throwForInvalidTag(depth,tag);
}
return ret;
}
