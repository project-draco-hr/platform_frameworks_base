{
  Preconditions.checkNotNull(shortcut,"shortcut");
synchronized (mLock) {
    getLauncherShortcutsLocked(callingPackage,userId,launcherUserId).attemptToRestoreIfNeededAndSave(ShortcutService.this);
    final ShortcutInfo shortcutInfo=getPackageShortcutsLocked(shortcut.getPackageName(),userId).findShortcutById(shortcut.getId());
    return (shortcutInfo != null && shortcutInfo.hasIconResource()) ? shortcutInfo.getIconResourceId() : 0;
  }
}
