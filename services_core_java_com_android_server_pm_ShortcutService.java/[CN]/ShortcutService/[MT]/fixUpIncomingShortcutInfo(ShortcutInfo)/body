{
  Preconditions.checkNotNull(shortcut,"Null shortcut detected");
  if (shortcut.getActivityComponent() != null) {
    Preconditions.checkState(shortcut.getPackageName().equals(shortcut.getActivityComponent().getPackageName()),"Activity package name mismatch");
  }
  shortcut.enforceMandatoryFields();
  final Intent intent=shortcut.getIntent();
  final Bundle intentExtras=intent.getExtras();
  if (intentExtras != null && intentExtras.size() > 0) {
    intent.replaceExtras((Bundle)null);
    shortcut.setIntentPersistableExtras(new PersistableBundle(intentExtras));
  }
  shortcut.setIcon(null);
  shortcut.setFlags(0);
}
