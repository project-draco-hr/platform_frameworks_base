{
  verifyCaller(packageName,userId);
synchronized (mLock) {
    final PackageShortcuts ps=getPackageShortcutsLocked(packageName,userId);
    if (!ps.tryApiCall(this)) {
      return false;
    }
    fixUpIncomingShortcutInfo(newShortcut);
    newShortcut.addFlags(ShortcutInfo.FLAG_DYNAMIC);
    ps.updateShortcutWithCapping(this,newShortcut);
  }
  userPackageChanged(packageName,userId);
  return true;
}
