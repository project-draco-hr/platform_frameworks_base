{
  final long now=injectCurrentTimeMillis();
  final long prevLastResetTime=mRawLastResetTime;
  if (mRawLastResetTime == 0) {
    mRawLastResetTime=now;
  }
 else   if (now < mRawLastResetTime) {
    if (isClockValid(now)) {
      mRawLastResetTime=now;
    }
  }
 else {
    while ((mRawLastResetTime + mResetInterval) <= now) {
      mRawLastResetTime+=mResetInterval;
    }
  }
  if (prevLastResetTime != mRawLastResetTime) {
    scheduleSaveBaseState();
  }
}
