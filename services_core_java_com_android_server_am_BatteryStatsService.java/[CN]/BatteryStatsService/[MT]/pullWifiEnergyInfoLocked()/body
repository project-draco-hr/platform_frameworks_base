{
  if (mWifiManager == null) {
    mWifiManager=IWifiManager.Stub.asInterface(ServiceManager.getService(Context.WIFI_SERVICE));
    if (mWifiManager == null) {
      return null;
    }
  }
  try {
    WifiActivityEnergyInfo info=mWifiManager.reportActivityInfo();
    if (info != null && info.isValid()) {
      final WifiActivityEnergyInfo result=mLastInfo;
      result.mTimestamp=info.getTimeStamp();
      result.mStackState=info.getStackState();
      result.mControllerTxTimeMs=info.getControllerTxTimeMillis() - mLastInfo.mControllerTxTimeMs;
      result.mControllerRxTimeMs=info.getControllerRxTimeMillis() - mLastInfo.mControllerRxTimeMs;
      result.mControllerIdleTimeMs=info.getControllerIdleTimeMillis() - mLastInfo.mControllerIdleTimeMs;
      result.mControllerEnergyUsed=info.getControllerEnergyUsed() - mLastInfo.mControllerEnergyUsed;
      mLastInfo=info;
      return result;
    }
  }
 catch (  RemoteException e) {
  }
  return null;
}
