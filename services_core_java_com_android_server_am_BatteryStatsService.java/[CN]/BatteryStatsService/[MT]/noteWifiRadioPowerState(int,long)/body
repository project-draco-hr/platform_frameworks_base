{
  enforceCallingPermission();
synchronized (mStats) {
    if (mStats.isOnBattery()) {
      final String type=(powerState == DataConnectionRealTimeInfo.DC_POWER_STATE_HIGH || powerState == DataConnectionRealTimeInfo.DC_POWER_STATE_MEDIUM) ? "active" : "inactive";
      mHandler.scheduleSync("wifi-data: " + type,BatteryStatsImpl.ExternalStatsSync.UPDATE_WIFI);
    }
    mStats.noteWifiRadioPowerState(powerState,tsNanos);
  }
}
