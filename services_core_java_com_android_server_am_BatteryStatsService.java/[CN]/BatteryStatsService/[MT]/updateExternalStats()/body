{
synchronized (mExternalStatsLock) {
    final WifiActivityEnergyInfo wifiEnergyInfo=pullWifiEnergyInfoLocked();
    final BluetoothActivityEnergyInfo bluetoothEnergyInfo=pullBluetoothEnergyInfoLocked();
synchronized (mStats) {
      mStats.updateKernelWakelocksLocked();
      mStats.updateMobileRadioStateLocked(SystemClock.elapsedRealtime());
      mStats.updateWifiStateLocked(wifiEnergyInfo);
      mStats.updateBluetoothStateLocked(bluetoothEnergyInfo);
    }
  }
}
