{
switch (msg.what) {
case MSG_SYNC_EXTERNAL_STATS:
    final int updateFlags;
synchronized (this) {
    removeMessages(MSG_SYNC_EXTERNAL_STATS);
    updateFlags=mUpdateFlags;
    mUpdateFlags=0;
  }
updateExternalStats((String)msg.obj,updateFlags);
break;
case MSG_WRITE_TO_DISK:
updateExternalStats("write",UPDATE_ALL);
synchronized (mStats) {
mStats.writeAsyncLocked();
}
break;
}
}
