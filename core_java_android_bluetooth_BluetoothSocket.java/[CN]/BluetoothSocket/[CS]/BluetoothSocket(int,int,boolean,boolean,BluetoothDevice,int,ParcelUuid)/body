{
  if (type == BluetoothSocket.TYPE_RFCOMM && uuid == null && fd == -1) {
    if (port < 1 || port > MAX_RFCOMM_CHANNEL) {
      throw new IOException("Invalid RFCOMM channel: " + port);
    }
  }
  if (uuid == null) {
    mPort=port;
    mSdp=null;
  }
 else {
    mSdp=new SdpHelper(device,uuid);
    mPort=-1;
  }
  mType=type;
  mAuth=auth;
  mEncrypt=encrypt;
  mDevice=device;
  if (device == null) {
    mAddress=null;
  }
 else {
    mAddress=device.getAddress();
  }
  if (fd == -1) {
    initSocketNative();
  }
 else {
    initSocketFromFdNative(fd);
  }
  mInputStream=new BluetoothInputStream(this);
  mOutputStream=new BluetoothOutputStream(this);
  mSocketState=SocketState.INIT;
  mLock=new ReentrantReadWriteLock();
}
