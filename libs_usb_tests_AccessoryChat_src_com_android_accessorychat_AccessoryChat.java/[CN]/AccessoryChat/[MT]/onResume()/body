{
  super.onResume();
  Intent intent=getIntent();
  Log.d(TAG,"intent: " + intent);
  UsbAccessory[] accessories=mUsbManager.getAccessoryList();
  UsbAccessory accessory=(accessories == null ? null : accessories[0]);
  if (accessory != null) {
    if (mUsbManager.hasPermission(accessory)) {
      openAccessory(accessory);
    }
 else {
synchronized (mUsbReceiver) {
        if (!mPermissionRequestPending) {
          mUsbManager.requestPermission(accessory,mPermissionIntent);
          mPermissionRequestPending=true;
        }
      }
    }
  }
 else {
    Log.d(TAG,"mAccessory is null");
  }
}
