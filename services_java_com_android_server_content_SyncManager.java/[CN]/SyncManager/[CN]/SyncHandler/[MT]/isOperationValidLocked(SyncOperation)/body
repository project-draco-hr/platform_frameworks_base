{
  final boolean isLoggable=Log.isLoggable(TAG,Log.VERBOSE);
  int targetUid;
  int state;
  final SyncStorageEngine.EndPoint target=op.target;
  boolean syncEnabled=mSyncStorageEngine.getMasterSyncAutomatically(target.userId);
  if (target.target_provider) {
    AccountAndUser[] accounts=mRunningAccounts;
    if (!containsAccountAndUser(accounts,target.account,target.userId)) {
      if (isLoggable) {
        Log.v(TAG,"    Dropping sync operation: account doesn't exist.");
      }
      return false;
    }
    state=getIsSyncable(target.account,target.userId,target.provider);
    if (state == 0) {
      if (isLoggable) {
        Log.v(TAG,"    Dropping sync operation: isSyncable == 0.");
      }
      return false;
    }
    syncEnabled=syncEnabled && mSyncStorageEngine.getSyncAutomatically(target.account,target.userId,target.provider);
    final RegisteredServicesCache.ServiceInfo<SyncAdapterType> syncAdapterInfo;
    syncAdapterInfo=mSyncAdapters.getServiceInfo(SyncAdapterType.newKey(target.provider,target.account.type),target.userId);
    if (syncAdapterInfo != null) {
      targetUid=syncAdapterInfo.uid;
    }
 else {
      if (isLoggable) {
        Log.v(TAG,"    Dropping sync operation: No sync adapter registered" + "for: " + target);
      }
      return false;
    }
  }
 else   if (target.target_service) {
    state=getIsTargetServiceActive(target.service,target.userId);
    if (state == 0) {
      if (isLoggable) {
        Log.v(TAG,"    Dropping sync operation: isActive == 0.");
      }
      return false;
    }
    try {
      targetUid=mContext.getPackageManager().getServiceInfo(target.service,0).applicationInfo.uid;
    }
 catch (    PackageManager.NameNotFoundException e) {
      if (isLoggable) {
        Log.v(TAG,"    Dropping sync operation: No service registered for: " + target.service);
      }
      return false;
    }
  }
 else {
    Log.e(TAG,"Unknown target for Sync Op: " + target);
    return false;
  }
  final boolean ignoreSystemConfiguration=op.extras.getBoolean(ContentResolver.SYNC_EXTRAS_IGNORE_SETTINGS,false) || (state < 0);
  if (!syncEnabled && !ignoreSystemConfiguration) {
    if (isLoggable) {
      Log.v(TAG,"    Dropping sync operation: disallowed by settings/network.");
    }
    return false;
  }
  final NetworkInfo networkInfo=getConnectivityManager().getActiveNetworkInfoForUid(targetUid);
  final boolean uidNetworkConnected=networkInfo != null && networkInfo.isConnected();
  if (!uidNetworkConnected && !ignoreSystemConfiguration) {
    if (isLoggable) {
      Log.v(TAG,"    Dropping sync operation: disallowed by settings/network.");
    }
    return false;
  }
  if (op.isNotAllowedOnMetered() && getConnectivityManager().isActiveNetworkMetered() && !ignoreSystemConfiguration) {
    if (isLoggable) {
      Log.v(TAG,"    Dropping sync operation: not allowed on metered network.");
    }
    return false;
  }
  return true;
}
