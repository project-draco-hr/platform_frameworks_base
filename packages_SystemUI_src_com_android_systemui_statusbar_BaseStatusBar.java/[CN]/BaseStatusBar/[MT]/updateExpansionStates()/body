{
  int N=mNotificationData.size();
  for (int i=0; i < N; i++) {
    NotificationData.Entry entry=mNotificationData.get(i);
    if (!entry.row.isUserLocked()) {
      if (i == (N - 1)) {
        if (DEBUG)         Log.d(TAG,"expanding top notification at " + i);
        entry.row.setSystemExpanded(true);
      }
 else {
        if (!entry.row.isUserExpanded()) {
          if (DEBUG)           Log.d(TAG,"collapsing notification at " + i);
          entry.row.setSystemExpanded(false);
        }
 else {
          if (DEBUG)           Log.d(TAG,"ignoring user-modified notification at " + i);
        }
      }
    }
 else {
      if (DEBUG)       Log.d(TAG,"ignoring notification being held by user at " + i);
    }
  }
}
