{
  Notification notification=sbn.getNotification();
  boolean isNoisy=(notification.defaults & Notification.DEFAULT_SOUND) != 0 || (notification.defaults & Notification.DEFAULT_VIBRATE) != 0 || notification.sound != null || notification.vibrate != null;
  boolean isHighPriority=sbn.getScore() >= INTERRUPTION_THRESHOLD;
  boolean isFullscreen=notification.fullScreenIntent != null;
  boolean isAllowed=notification.extras.getInt(Notification.EXTRA_AS_HEADS_UP,Notification.HEADS_UP_ALLOWED) != Notification.HEADS_UP_NEVER;
  boolean interrupt=(isFullscreen || (isHighPriority && isNoisy)) && isAllowed && mPowerManager.isScreenOn()&& !mKeyguardManager.isKeyguardLocked();
  try {
    interrupt=interrupt && !mDreamManager.isDreaming();
  }
 catch (  RemoteException e) {
    Log.d(TAG,"failed to query dream manager",e);
  }
  if (DEBUG)   Log.d(TAG,"interrupt: " + interrupt);
  return interrupt;
}
