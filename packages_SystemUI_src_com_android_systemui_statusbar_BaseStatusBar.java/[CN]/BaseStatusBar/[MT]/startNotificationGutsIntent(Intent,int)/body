{
  final boolean keyguardShowing=mStatusBarKeyguardViewManager.isShowing();
  dismissKeyguardThenExecute(new OnDismissAction(){
    @Override public boolean onDismiss(){
      AsyncTask.execute(new Runnable(){
        public void run(){
          try {
            if (keyguardShowing) {
              ActivityManagerNative.getDefault().keyguardWaitingForActivityDrawn();
            }
            TaskStackBuilder.create(mContext).addNextIntentWithParentStack(intent).startActivities(getActivityOptions(),new UserHandle(UserHandle.getUserId(appUid)));
            overrideActivityPendingAppTransition(keyguardShowing);
          }
 catch (          RemoteException e) {
          }
        }
      }
);
      animateCollapsePanels(CommandQueue.FLAG_EXCLUDE_RECENTS_PANEL,true);
      return true;
    }
  }
,false);
}
