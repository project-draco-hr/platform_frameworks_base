{
  int version=0;
  try {
    ApplicationInfo info=mContext.getPackageManager().getApplicationInfo(sbn.getPackageName(),0);
    version=info.targetSdkVersion;
  }
 catch (  NameNotFoundException ex) {
    Log.e(TAG,"Failed looking up ApplicationInfo for " + sbn.getPackageName(),ex);
  }
  if (entry.expanded.getId() != com.android.internal.R.id.status_bar_latest_event_content) {
    if (version >= Build.VERSION_CODES.GINGERBREAD && version < Build.VERSION_CODES.L) {
      entry.row.setShowingLegacyBackground(true);
      entry.legacy=true;
    }
  }
 else {
    final int color=sbn.getNotification().color;
    if (isMediaNotification(entry)) {
      entry.row.setTintColor(color);
    }
  }
  if (entry.icon != null) {
    if (version >= Build.VERSION_CODES.L) {
      entry.icon.setColorFilter(mContext.getResources().getColor(android.R.color.white));
    }
 else {
      entry.icon.setColorFilter(null);
    }
  }
}
