{
  int n=mNotificationData.size();
  for (int i=0; i < n; i++) {
    NotificationData.Entry entry=mNotificationData.get(i);
    if (mOnKeyguard) {
      entry.row.setExpanded(false);
    }
 else {
      if (!entry.row.isUserLocked()) {
        boolean top=(i == n - 1);
        entry.row.setExpanded(top || entry.row.isUserExpanded());
      }
    }
    entry.row.setDimmed(mOnKeyguard);
    entry.row.setLocked(mOnKeyguard);
  }
}
