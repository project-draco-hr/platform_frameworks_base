{
  row.inflateGuts();
  final StatusBarNotification sbn=row.getStatusBarNotification();
  PackageManager pmUser=getPackageManagerForUser(mContext,sbn.getUser().getIdentifier());
  row.setTag(sbn.getPackageName());
  final NotificationGuts guts=row.getGuts();
  final String pkg=sbn.getPackageName();
  String appname=pkg;
  Drawable pkgicon=null;
  int appUid=-1;
  try {
    final ApplicationInfo info=pmUser.getApplicationInfo(pkg,PackageManager.GET_UNINSTALLED_PACKAGES | PackageManager.GET_DISABLED_COMPONENTS);
    if (info != null) {
      appname=String.valueOf(pmUser.getApplicationLabel(info));
      pkgicon=pmUser.getApplicationIcon(info);
      appUid=info.uid;
    }
  }
 catch (  NameNotFoundException e) {
    pkgicon=pmUser.getDefaultActivityIcon();
  }
  ((ImageView)row.findViewById(android.R.id.icon)).setImageDrawable(pkgicon);
  ((TextView)row.findViewById(R.id.pkgname)).setText(appname);
  final View settingsButton=guts.findViewById(R.id.more_settings);
  if (appUid >= 0) {
    final int appUidF=appUid;
    settingsButton.setOnClickListener(new View.OnClickListener(){
      public void onClick(      View v){
        MetricsLogger.action(mContext,MetricsEvent.ACTION_NOTE_INFO);
        startAppNotificationSettingsActivity(pkg,appUidF);
      }
    }
);
  }
 else {
    settingsButton.setVisibility(View.GONE);
  }
  row.findViewById(R.id.done).setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      guts.saveImportance(sbn);
      int[] rowLocation=new int[2];
      int[] doneLocation=new int[2];
      row.getLocationOnScreen(rowLocation);
      v.getLocationOnScreen(doneLocation);
      final int centerX=v.getWidth() / 2;
      final int centerY=v.getHeight() / 2;
      final int x=doneLocation[0] - rowLocation[0] + centerX;
      final int y=doneLocation[1] - rowLocation[1] + centerY;
      dismissPopups(x,y);
    }
  }
);
  guts.bindImportance(sbn,row,mNotificationData.getImportance(sbn.getKey()));
}
