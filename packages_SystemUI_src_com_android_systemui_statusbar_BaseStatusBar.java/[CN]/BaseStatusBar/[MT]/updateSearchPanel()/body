{
  boolean visible=false;
  if (mSearchPanelView != null) {
    visible=mSearchPanelView.isShowing();
    WindowManagerImpl.getDefault().removeView(mSearchPanelView);
  }
  LinearLayout tmpRoot=new LinearLayout(mContext);
  mSearchPanelView=(SearchPanelView)LayoutInflater.from(mContext).inflate(R.layout.status_bar_search_panel,tmpRoot,false);
  mSearchPanelView.setOnTouchListener(new TouchOutsideListener(MSG_CLOSE_SEARCH_PANEL,mSearchPanelView));
  mSearchPanelView.setVisibility(View.GONE);
  WindowManager.LayoutParams lp=getSearchLayoutParams(mSearchPanelView.getLayoutParams());
  WindowManagerImpl.getDefault().addView(mSearchPanelView,lp);
  mSearchPanelView.setBar(this);
  if (visible) {
    mSearchPanelView.show(true,false);
  }
}
