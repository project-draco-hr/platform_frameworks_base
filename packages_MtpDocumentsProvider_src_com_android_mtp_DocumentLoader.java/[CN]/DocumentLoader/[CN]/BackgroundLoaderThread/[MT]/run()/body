{
  Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
  while (!Thread.interrupted()) {
    final LoaderTask task=getNextTaskOrReleaseBackgroundThread();
    if (task == null) {
      return;
    }
    try {
      final MtpObjectInfo[] objectInfos=loadDocuments(mMtpManager,task.mIdentifier.mDeviceId,task.getUnloadedObjectHandles(NUM_LOADING_ENTRIES));
      task.fillDocuments(objectInfos);
      final boolean shouldNotify=task.mLastNotified.getTime() < new Date().getTime() - NOTIFY_PERIOD_MS || task.getState() != LoaderTask.STATE_LOADING;
      if (shouldNotify) {
        task.notify(mResolver);
      }
    }
 catch (    IOException exception) {
      task.setError(exception);
    }
  }
}
