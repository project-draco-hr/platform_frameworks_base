{
  try {
    InputStream input=openRead();
    XmlPullParser parser=Xml.newPullParser();
    parser.setInput(input,null);
    int type;
    while ((type=parser.next()) != XmlPullParser.END_DOCUMENT) {
      if (type != XmlPullParser.START_TAG) {
        continue;
      }
      String tag=parser.getName();
      if (tag.equals(TAG_DEVICE_OWNER)) {
        String name=parser.getAttributeValue(null,ATTR_NAME);
        String packageName=parser.getAttributeValue(null,ATTR_PACKAGE);
        mDeviceOwner=new OwnerInfo(name,packageName);
      }
 else       if (tag.equals(TAG_PROFILE_OWNER)) {
        String profileOwnerPackageName=parser.getAttributeValue(null,ATTR_PACKAGE);
        String profileOwnerName=parser.getAttributeValue(null,ATTR_NAME);
        String profileOwnerComponentStr=parser.getAttributeValue(null,ATTR_COMPONENT_NAME);
        int userId=Integer.parseInt(parser.getAttributeValue(null,ATTR_USERID));
        OwnerInfo profileOwnerInfo=null;
        if (profileOwnerComponentStr != null) {
          ComponentName admin=ComponentName.unflattenFromString(profileOwnerComponentStr);
          if (admin != null) {
            profileOwnerInfo=new OwnerInfo(profileOwnerName,admin);
          }
 else {
            Slog.e(TAG,"Error parsing device-owner file. Bad component name " + profileOwnerComponentStr);
          }
        }
        if (profileOwnerInfo == null) {
          profileOwnerInfo=new OwnerInfo(profileOwnerName,profileOwnerPackageName);
        }
        mProfileOwners.put(userId,profileOwnerInfo);
      }
 else {
        throw new XmlPullParserException("Unexpected tag in device owner file: " + tag);
      }
    }
    input.close();
  }
 catch (  XmlPullParserException xppe) {
    Slog.e(TAG,"Error parsing device-owner file\n" + xppe);
  }
catch (  IOException ioe) {
    Slog.e(TAG,"IO Exception when reading device-owner file\n" + ioe);
  }
}
