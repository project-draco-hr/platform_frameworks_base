{
  app.wifiRxPackets=u.getNetworkActivityPackets(BatteryStats.NETWORK_WIFI_RX_DATA,statsType);
  app.wifiTxPackets=u.getNetworkActivityPackets(BatteryStats.NETWORK_WIFI_TX_DATA,statsType);
  app.wifiRxBytes=u.getNetworkActivityBytes(BatteryStats.NETWORK_WIFI_RX_DATA,statsType);
  app.wifiTxBytes=u.getNetworkActivityBytes(BatteryStats.NETWORK_WIFI_TX_DATA,statsType);
  final double wifiPacketPower=(app.wifiRxPackets + app.wifiTxPackets) * mWifiPowerPerPacket;
  app.wifiRunningTimeMs=u.getWifiRunningTime(rawRealtimeUs,statsType) / 1000;
  mTotalAppWifiRunningTimeMs+=app.wifiRunningTimeMs;
  final double wifiLockPower=(app.wifiRunningTimeMs * mWifiPowerOn) / (1000 * 60 * 60);
  final long wifiScanTimeMs=u.getWifiScanTime(rawRealtimeUs,statsType) / 1000;
  final double wifiScanPower=(wifiScanTimeMs * mWifiPowerScan) / (1000 * 60 * 60);
  double wifiBatchScanPower=0;
  for (int bin=0; bin < BatteryStats.Uid.NUM_WIFI_BATCHED_SCAN_BINS; bin++) {
    final long batchScanTimeMs=u.getWifiBatchedScanTime(bin,rawRealtimeUs,statsType) / 1000;
    final double batchScanPower=(batchScanTimeMs * mWifiPowerBatchScan) / (1000 * 60 * 60);
    wifiBatchScanPower+=batchScanPower;
  }
  app.wifiPowerMah=wifiPacketPower + wifiLockPower + wifiScanPower+ wifiBatchScanPower;
  if (DEBUG && app.wifiPowerMah != 0) {
    Log.d(TAG,"UID " + u.getUid() + ": power="+ BatteryStatsHelper.makemAh(app.wifiPowerMah));
  }
}
