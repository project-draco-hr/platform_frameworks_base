{
  View square1=mActivity.findViewById(R.id.square1);
  Fade fadeOut=new Fade(Fade.MODE_OUT);
  TransitionLatch latch=setVisibilityInTransition(fadeOut,R.id.square1,View.INVISIBLE);
  assertTrue(latch.startLatch.await(200,TimeUnit.MILLISECONDS));
  assertEquals(View.VISIBLE,square1.getVisibility());
  Thread.sleep(100);
  assertFalse(square1.getTransitionAlpha() == 0 || square1.getTransitionAlpha() == 1);
  assertTrue(latch.endLatch.await(400,TimeUnit.MILLISECONDS));
  assertEquals(1.0f,square1.getTransitionAlpha());
  assertEquals(View.INVISIBLE,square1.getVisibility());
  Fade fadeIn=new Fade(Fade.MODE_IN);
  latch=setVisibilityInTransition(fadeIn,R.id.square1,View.VISIBLE);
  assertTrue(latch.startLatch.await(200,TimeUnit.MILLISECONDS));
  assertEquals(View.VISIBLE,square1.getVisibility());
  Thread.sleep(100);
  final float transitionAlpha=square1.getTransitionAlpha();
  assertTrue("expecting transitionAlpha to be between 0 and 1. Was " + transitionAlpha,transitionAlpha > 0 && transitionAlpha < 1);
  assertTrue(latch.endLatch.await(400,TimeUnit.MILLISECONDS));
  assertEquals(1.0f,square1.getTransitionAlpha());
  assertEquals(View.VISIBLE,square1.getVisibility());
}
