{
  Application application=ActivityThread.currentApplication();
  if (application == null) {
    throw new IllegalStateException("Failed to obtain application Context from ActivityThread");
  }
  return application;
}
