{
  resetTestStatus();
  if (!Intent.ACTION_VIEW.equals(intent.getAction())) {
    return;
  }
  mTotalTestCount=intent.getIntExtra(TOTAL_TEST_COUNT,mTotalTestCount);
  mCurrentTestNumber=intent.getIntExtra(CURRENT_TEST_NUMBER,mCurrentTestNumber);
  mTestUrl=intent.getStringExtra(TEST_URL);
  if (mTestUrl == null) {
    mUiAutoTestPath=intent.getStringExtra(UI_AUTO_TEST);
    if (mUiAutoTestPath != null) {
      beginUiAutoTest();
    }
    return;
  }
  mResultFile=intent.getStringExtra(RESULT_FILE);
  mTimeoutInMillis=intent.getIntExtra(TIMEOUT_IN_MILLIS,0);
  mGetDrawtime=intent.getBooleanExtra(GET_DRAW_TIME,false);
  mSaveImagePath=intent.getStringExtra(SAVE_IMAGE);
  mStopOnRefError=intent.getBooleanExtra(STOP_ON_REF_ERROR,false);
  setTitle("Test " + mCurrentTestNumber + " of "+ mTotalTestCount);
  float ratio=(float)mCurrentTestNumber / mTotalTestCount;
  int progress=(int)(ratio * Window.PROGRESS_END);
  getWindow().setFeatureInt(Window.FEATURE_PROGRESS,progress);
  Log.v(LOGTAG,"  Loading " + mTestUrl);
  if (mTestUrl.contains("/dumpAsText/")) {
    dumpAsText(false);
  }
  mWebView.loadUrl(mTestUrl);
  if (mTimeoutInMillis > 0) {
    Message m=mHandler.obtainMessage(MSG_TIMEOUT);
    mHandler.sendMessageDelayed(m,mTimeoutInMillis);
  }
}
