{
  try {
    Trace.traceBegin(RenderScript.TRACE_TAG,"syncAll");
switch (srcLocation) {
case USAGE_GRAPHICS_TEXTURE:
case USAGE_SCRIPT:
      if ((mUsage & USAGE_SHARED) != 0) {
        copyFrom(mBitmap);
      }
    break;
case USAGE_GRAPHICS_CONSTANTS:
case USAGE_GRAPHICS_VERTEX:
  break;
case USAGE_SHARED:
if ((mUsage & USAGE_SHARED) != 0) {
  copyTo(mBitmap);
}
break;
default :
throw new RSIllegalArgumentException("Source must be exactly one usage type.");
}
mRS.validate();
mRS.nAllocationSyncAll(getIDSafe(),srcLocation);
}
  finally {
Trace.traceEnd(RenderScript.TRACE_TAG);
}
}
