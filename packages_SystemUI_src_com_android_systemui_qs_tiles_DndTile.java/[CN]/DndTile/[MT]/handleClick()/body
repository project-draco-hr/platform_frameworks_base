{
  if (mController.isVolumeRestricted()) {
    mHost.collapsePanels();
    SysUIToast.makeText(mContext,mContext.getString(com.android.internal.R.string.error_message_change_not_allowed),Toast.LENGTH_LONG).show();
    return;
  }
  mDisable.setAllowAnimation(true);
  mDisableTotalSilence.setAllowAnimation(true);
  MetricsLogger.action(mContext,getMetricsCategory(),!mState.value);
  if (mState.value) {
    mController.setZen(Global.ZEN_MODE_OFF,null,TAG);
  }
 else {
    int zen=Prefs.getInt(mContext,Prefs.Key.DND_FAVORITE_ZEN,Global.ZEN_MODE_ALARMS);
    mController.setZen(zen,null,TAG);
    showDetail(true);
  }
}
