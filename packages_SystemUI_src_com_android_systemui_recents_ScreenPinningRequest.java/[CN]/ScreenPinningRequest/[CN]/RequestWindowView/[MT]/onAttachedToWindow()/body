{
  DisplayMetrics metrics=new DisplayMetrics();
  mWindowManager.getDefaultDisplay().getMetrics(metrics);
  float density=metrics.density;
  boolean isLandscape=isLandscapePhone(mContext);
  inflateView(isLandscape);
  int bgColor=mContext.getResources().getColor(R.color.screen_pinning_request_window_bg);
  if (ActivityManager.isHighEndGfx()) {
    mLayout.setAlpha(0f);
    if (isLandscape) {
      mLayout.setTranslationX(OFFSET_DP * density);
    }
 else {
      mLayout.setTranslationY(OFFSET_DP * density);
    }
    mLayout.animate().alpha(1f).translationX(0).translationY(0).setDuration(300).setInterpolator(new DecelerateInterpolator()).start();
    mColorAnim=ValueAnimator.ofObject(new ArgbEvaluator(),0,bgColor);
    mColorAnim.addUpdateListener(new ValueAnimator.AnimatorUpdateListener(){
      @Override public void onAnimationUpdate(      ValueAnimator animation){
        final int c=(Integer)animation.getAnimatedValue();
        mColor.setColor(c);
      }
    }
);
    mColorAnim.setDuration(1000);
    mColorAnim.start();
  }
 else {
    mColor.setColor(bgColor);
  }
  IntentFilter filter=new IntentFilter(Intent.ACTION_CONFIGURATION_CHANGED);
  filter.addAction(Intent.ACTION_USER_SWITCHED);
  filter.addAction(Intent.ACTION_SCREEN_OFF);
  mContext.registerReceiver(mReceiver,filter);
}
