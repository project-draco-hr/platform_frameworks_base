{
  if (listening && !mRegistered) {
    if (DEBUG)     Log.d(TAG,"Registering receiver");
    final IntentFilter filter=new IntentFilter();
    filter.addAction(WifiManager.WIFI_STATE_CHANGED_ACTION);
    filter.addAction(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION);
    filter.addAction(WifiManager.NETWORK_IDS_CHANGED_ACTION);
    filter.addAction(WifiManager.SUPPLICANT_STATE_CHANGED_ACTION);
    filter.addAction(WifiManager.CONFIGURED_NETWORKS_CHANGED_ACTION);
    filter.addAction(WifiManager.LINK_CONFIGURATION_CHANGED_ACTION);
    filter.addAction(WifiManager.NETWORK_STATE_CHANGED_ACTION);
    filter.addAction(WifiManager.RSSI_CHANGED_ACTION);
    mContext.registerReceiver(this,filter);
    mRegistered=true;
  }
 else   if (!listening && mRegistered) {
    if (DEBUG)     Log.d(TAG,"Unregistering receiver");
    mContext.unregisterReceiver(this);
    mRegistered=false;
  }
}
