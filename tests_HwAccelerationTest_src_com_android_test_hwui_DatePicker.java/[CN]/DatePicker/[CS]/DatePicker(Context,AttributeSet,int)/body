{
  super(context,attrs,defStyle);
  ContextThemeWrapper themed=new ContextThemeWrapper(context,com.android.internal.R.style.Theme_Holo_Light_Dialog_Alert);
  LayoutInflater inflater=(LayoutInflater)themed.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
  inflater.inflate(R.layout.date_picker,this,true);
  mDayPicker=(NumberPicker)findViewById(R.id.day);
  mDayPicker.setFormatter(NumberPicker.getTwoDigitFormatter());
  mDayPicker.setOnLongPressUpdateInterval(100);
  mDayPicker.setOnValueChangedListener(new NumberPicker.OnValueChangeListener(){
    public void onValueChange(    NumberPicker picker,    int oldVal,    int newVal){
      mDay=newVal;
      notifyDateChanged();
    }
  }
);
  mMonthPicker=(NumberPicker)findViewById(R.id.month);
  mMonthPicker.setFormatter(NumberPicker.getTwoDigitFormatter());
  DateFormatSymbols dfs=new DateFormatSymbols();
  String[] months=dfs.getShortMonths();
  if (months[0].startsWith("1")) {
    for (int i=0; i < months.length; i++) {
      months[i]=String.valueOf(i + 1);
    }
    mMonthPicker.setMinValue(1);
    mMonthPicker.setMaxValue(12);
  }
 else {
    mMonthPicker.setMinValue(1);
    mMonthPicker.setMaxValue(12);
    mMonthPicker.setDisplayedValues(months);
  }
  mMonthPicker.setOnLongPressUpdateInterval(200);
  mMonthPicker.setOnValueChangedListener(new NumberPicker.OnValueChangeListener(){
    public void onValueChange(    NumberPicker picker,    int oldVal,    int newVal){
      mMonth=newVal - 1;
      adjustMaxDay();
      notifyDateChanged();
      updateDaySpinner();
    }
  }
);
  mYearPicker=(NumberPicker)findViewById(R.id.year);
  mYearPicker.setOnLongPressUpdateInterval(100);
  mYearPicker.setOnValueChangedListener(new NumberPicker.OnValueChangeListener(){
    public void onValueChange(    NumberPicker picker,    int oldVal,    int newVal){
      mYear=newVal;
      adjustMaxDay();
      notifyDateChanged();
      updateDaySpinner();
    }
  }
);
  mYearToggle=(CheckBox)findViewById(R.id.yearToggle);
  mYearToggle.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener(){
    @Override public void onCheckedChanged(    CompoundButton buttonView,    boolean isChecked){
      mHasYear=isChecked;
      adjustMaxDay();
      notifyDateChanged();
      updateSpinners();
    }
  }
);
  TypedArray a=context.obtainStyledAttributes(attrs,com.android.internal.R.styleable.DatePicker);
  int mStartYear=a.getInt(com.android.internal.R.styleable.DatePicker_startYear,DEFAULT_START_YEAR);
  int mEndYear=a.getInt(com.android.internal.R.styleable.DatePicker_endYear,DEFAULT_END_YEAR);
  mYearPicker.setMinValue(mStartYear);
  mYearPicker.setMaxValue(mEndYear);
  a.recycle();
  Calendar cal=Calendar.getInstance();
  init(cal.get(Calendar.YEAR),cal.get(Calendar.MONTH),cal.get(Calendar.DAY_OF_MONTH),null);
  reorderPickers(months);
  if (!isEnabled()) {
    setEnabled(false);
  }
}
