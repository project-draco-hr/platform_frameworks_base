{
synchronized (mJobs) {
    int idleCount=0;
    int backoffCount=0;
    int connectivityCount=0;
    List<JobStatus> runnableJobs=new ArrayList<JobStatus>();
    for (    JobStatus job : mJobs.getJobs()) {
      if (isReadyToBeExecutedLocked(job)) {
        if (job.getNumFailures() > 0) {
          backoffCount++;
        }
        if (job.hasIdleConstraint()) {
          idleCount++;
        }
        if (job.hasConnectivityConstraint() || job.hasUnmeteredConstraint()) {
          connectivityCount++;
        }
        runnableJobs.add(job);
      }
 else       if (isReadyToBeCancelledLocked(job)) {
        stopJobOnServiceContextLocked(job);
      }
    }
    if (backoffCount > 0 || idleCount >= MIN_IDLE_COUNT || connectivityCount >= MIN_CONNECTIVITY_COUNT || runnableJobs.size() >= MIN_READY_JOBS_COUNT) {
      for (      JobStatus job : runnableJobs) {
        mPendingJobs.add(job);
      }
    }
  }
}
