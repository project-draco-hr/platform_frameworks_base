{
  Log.d(TAG,"handleServiceConnected()");
  if (!mBoundToService) {
    Log.d(TAG,"Dropping startUi() in handleServiceConnected() because no longer bound");
    return;
  }
  try {
    mService.registerCallback(mFaceUnlockCallback);
  }
 catch (  RemoteException e) {
    Log.e(TAG,"Caught exception connecting to Face Unlock: " + e.toString());
    mService=null;
    mBoundToService=false;
    mIsRunning=false;
    return;
  }
  if (mFaceUnlockView != null) {
    IBinder windowToken=mFaceUnlockView.getWindowToken();
    if (windowToken != null) {
      mKeyguardScreenCallback.pokeWakelock();
      int[] position;
      position=new int[2];
      mFaceUnlockView.getLocationInWindow(position);
      startUi(windowToken,position[0],position[1],mFaceUnlockView.getWidth(),mFaceUnlockView.getHeight());
    }
 else {
      Log.e(TAG,"windowToken is null in handleServiceConnected()");
    }
  }
}
