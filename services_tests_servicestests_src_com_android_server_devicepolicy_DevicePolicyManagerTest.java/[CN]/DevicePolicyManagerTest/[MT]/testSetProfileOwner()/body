{
  setAsProfileOwner(admin1);
  dpm.removeActiveAdmin(admin1);
  assertTrue(dpm.isAdminActive(admin1));
  setUpPackageManagerForAdmin(admin2,DpmMockContext.CALLER_UID);
  dpm.setActiveAdmin(admin2,true,DpmMockContext.CALLER_USER_HANDLE);
  try {
    dpm.setDeviceOwner(admin2,"owner-name",DpmMockContext.CALLER_USER_HANDLE);
    fail("IllegalStateException not thrown");
  }
 catch (  IllegalStateException expected) {
    assertTrue("Message was: " + expected.getMessage(),expected.getMessage().contains("already has a profile owner"));
  }
}
