{
  setDeviceOwner();
  when(mContext.ipackageManager.hasSystemFeature(PackageManager.FEATURE_MANAGED_USERS,0)).thenReturn(true);
  when(mContext.userManagerForMock.isSplitSystemUser()).thenReturn(true);
  when(mContext.userManager.canAddMoreManagedProfiles(DpmMockContext.CALLER_USER_HANDLE,true)).thenReturn(true);
  setUserSetupCompleteForUser(false,DpmMockContext.CALLER_USER_HANDLE);
  mContext.binder.callingUid=DpmMockContext.CALLER_UID;
  assertProvisioningAllowed(DevicePolicyManager.ACTION_PROVISION_MANAGED_PROFILE,true);
}
