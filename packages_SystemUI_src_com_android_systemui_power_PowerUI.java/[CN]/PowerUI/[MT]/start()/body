{
  mLowBatteryAlertCloseLevel=mContext.getResources().getInteger(com.android.internal.R.integer.config_lowBatteryCloseWarningLevel);
  mLowBatteryReminderLevels[0]=mContext.getResources().getInteger(com.android.internal.R.integer.config_lowBatteryWarningLevel);
  mLowBatteryReminderLevels[1]=mContext.getResources().getInteger(com.android.internal.R.integer.config_criticalBatteryWarningLevel);
  final PowerManager pm=(PowerManager)mContext.getSystemService(Context.POWER_SERVICE);
  mScreenOffTime=pm.isScreenOn() ? -1 : SystemClock.elapsedRealtime();
  mWarnings=new PowerDialogWarnings(mContext);
  IntentFilter filter=new IntentFilter();
  filter.addAction(Intent.ACTION_BATTERY_CHANGED);
  filter.addAction(Intent.ACTION_SCREEN_OFF);
  filter.addAction(Intent.ACTION_SCREEN_ON);
  mContext.registerReceiver(mIntentReceiver,filter,null,mHandler);
}
