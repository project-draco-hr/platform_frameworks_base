{
  checkState();
  if (isNdef != true) {
    isNdef=isNdef();
    if (isNdef != true) {
      throw new NfcException("Tag is not NDEF compliant");
    }
  }
  try {
    boolean isSuccess=mService.write(mHandle,msg);
    if (!isSuccess) {
      throw new IOException("NDEF write failed");
    }
  }
 catch (  RemoteException e) {
    Log.e(TAG,"RemoteException in write(): ",e);
  }
}
