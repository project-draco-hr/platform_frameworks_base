{
  boolean wasDreaming=mIsDreaming;
  if (!isTest) {
    if (!wasDreaming && isDreaming) {
      if (DEBUG)       Slog.v(TAG,"Firing ACTION_DREAMING_STARTED");
      mContext.sendBroadcast(mDreamingStartedIntent);
    }
 else     if (wasDreaming && !isDreaming) {
      if (DEBUG)       Slog.v(TAG,"Firing ACTION_DREAMING_STOPPED");
      mContext.sendBroadcast(mDreamingStoppedIntent);
    }
  }
  mIsDreaming=isDreaming;
}
