{
  if (DEBUG_FILE)   Log.v(TAG,"Writing new " + mAccountInfoFile.getBaseFile());
  FileOutputStream fos=null;
  try {
    fos=mAccountInfoFile.startWrite();
    XmlSerializer out=new FastXmlSerializer();
    out.setOutput(fos,"utf-8");
    out.startDocument(null,true);
    out.setFeature("http://xmlpull.org/v1/doc/features.html#indent-output",true);
    out.startTag(null,"accounts");
    if (!mMasterSyncAutomatically) {
      out.attribute(null,"listen-for-tickles","false");
    }
    final int N=mAuthorities.size();
    for (int i=0; i < N; i++) {
      AuthorityInfo authority=mAuthorities.get(i);
      out.startTag(null,"authority");
      out.attribute(null,"id",Integer.toString(authority.ident));
      out.attribute(null,"account",authority.account.mName);
      out.attribute(null,"type",authority.account.mType);
      out.attribute(null,"authority",authority.authority);
      if (!authority.enabled) {
        out.attribute(null,"enabled","false");
      }
      out.endTag(null,"authority");
    }
    out.endTag(null,"accounts");
    out.endDocument();
    mAccountInfoFile.finishWrite(fos);
  }
 catch (  java.io.IOException e1) {
    Log.w(TAG,"Error writing accounts",e1);
    if (fos != null) {
      mAccountInfoFile.failWrite(fos);
    }
  }
}
