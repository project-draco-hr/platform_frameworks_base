{
  HashSet<Account> currentAccounts=Sets.newHashSet(accounts);
  SQLiteDatabase db=mOpenHelper.getWritableDatabase();
  Cursor cursor=db.query("stats",STATS_ACCOUNT_PROJECTION,null,null,Sync.Stats.ACCOUNT + "," + Sync.Stats.ACCOUNT_TYPE,null,null);
  try {
    while (cursor.moveToNext()) {
      String accountName=cursor.getString(0);
      String accountType=cursor.getString(1);
      final Account account=new Account(accountName,accountType);
      if (!currentAccounts.contains(account)) {
        String where=Sync.Stats.ACCOUNT + "=? AND " + Sync.Stats.ACCOUNT_TYPE+ "=?";
        int numDeleted;
        numDeleted=db.delete("stats",where,new String[]{account.mName,account.mType});
        if (Config.LOGD) {
          Log.d(TAG,"deleted " + numDeleted + " records from stats table"+ " for account "+ account);
        }
      }
    }
  }
  finally {
    cursor.close();
  }
}
