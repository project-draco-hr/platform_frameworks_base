{
  if (oldVersion == 9) {
    Log.w(TAG,"Upgrading database from version " + oldVersion + " to "+ newVersion+ ", which will preserve old data");
    db.execSQL("ALTER TABLE status ADD COLUMN initialFailureTime INTEGER");
    oldVersion++;
  }
  if (oldVersion == 10) {
    Log.w(TAG,"Upgrading database from version " + oldVersion + " to "+ newVersion+ ", which will preserve old data");
    db.execSQL("ALTER TABLE pending ADD COLUMN account_type TEXT");
    db.execSQL("ALTER TABLE stats ADD COLUMN account_type TEXT");
    db.execSQL("ALTER TABLE active ADD COLUMN account_type TEXT");
    db.execSQL("UPDATE pending SET account_type='com.google.GAIA'");
    db.execSQL("UPDATE stats SET account_type='com.google.GAIA'");
    db.execSQL("UPDATE active SET account_type='com.google.GAIA'");
    oldVersion++;
  }
  if (oldVersion == newVersion) {
    return;
  }
  Log.w(TAG,"Upgrading database from version " + oldVersion + " to "+ newVersion+ ", which will destroy all old data");
  db.execSQL("DROP TABLE IF EXISTS pending");
  db.execSQL("DROP TABLE IF EXISTS stats");
  db.execSQL("DROP TABLE IF EXISTS history");
  db.execSQL("DROP TABLE IF EXISTS settings");
  db.execSQL("DROP TABLE IF EXISTS active");
  db.execSQL("DROP TABLE IF EXISTS status");
  onCreate(db);
}
