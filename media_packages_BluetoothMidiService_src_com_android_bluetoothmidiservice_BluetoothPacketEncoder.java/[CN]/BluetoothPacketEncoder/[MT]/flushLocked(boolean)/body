{
  if (mWritePending && !canBlock) {
    return;
  }
  while (mWritePending && mAccumulatedBytes > 0) {
    try {
      mLock.wait();
    }
 catch (    InterruptedException e) {
      continue;
    }
  }
  if (mAccumulatedBytes > 0) {
    mPacketReceiver.writePacket(mAccumulationBuffer,mAccumulatedBytes);
    mAccumulatedBytes=0;
    mPacketTimestamp=0;
    mRunningStatus=0;
    mWritePending=true;
  }
}
