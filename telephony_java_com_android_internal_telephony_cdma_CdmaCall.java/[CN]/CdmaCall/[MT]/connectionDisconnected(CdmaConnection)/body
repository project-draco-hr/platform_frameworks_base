{
  if (state != State.DISCONNECTED) {
    boolean hasOnlyDisconnectedConnections=true;
    for (int i=0, s=connections.size(); i < s; i++) {
      if (connections.get(i).getState() != State.DISCONNECTED) {
        hasOnlyDisconnectedConnections=false;
        break;
      }
    }
    if (hasOnlyDisconnectedConnections) {
      state=State.DISCONNECTED;
    }
  }
}
