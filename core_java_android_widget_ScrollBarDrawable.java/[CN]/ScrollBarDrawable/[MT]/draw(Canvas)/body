{
  final boolean vertical=mVertical;
  final int extent=mExtent;
  final int range=mRange;
  boolean drawTrack=true;
  boolean drawThumb=true;
  if (extent <= 0 || range <= extent) {
    drawTrack=vertical ? mAlwaysDrawVerticalTrack : mAlwaysDrawHorizontalTrack;
    drawThumb=false;
  }
  final Rect r=getBounds();
  if (canvas.quickReject(r.left,r.top,r.right,r.bottom,Canvas.EdgeType.AA)) {
    return;
  }
  if (drawTrack) {
    drawTrack(canvas,r,vertical);
  }
  if (drawThumb) {
    final int size=vertical ? r.height() : r.width();
    final int thickness=vertical ? r.width() : r.height();
    final int minLength=thickness * 2;
    int length=Math.round((float)size * extent / range);
    if (length < minLength) {
      length=minLength;
    }
    int offset=Math.round((float)(size - length) * mOffset / (range - extent));
    if (offset > size - length) {
      offset=size - length;
    }
    drawThumb(canvas,r,offset,length,vertical);
  }
}
