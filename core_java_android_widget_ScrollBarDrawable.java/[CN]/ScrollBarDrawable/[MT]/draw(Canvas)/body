{
  final boolean vertical=mVertical;
  final int extent=mExtent;
  final int range=mRange;
  boolean drawTrack=true;
  boolean drawThumb=true;
  if (extent <= 0 || range <= extent) {
    drawTrack=vertical ? mAlwaysDrawVerticalTrack : mAlwaysDrawHorizontalTrack;
    drawThumb=false;
  }
  Rect r=getBounds();
  if (drawTrack) {
    drawTrack(canvas,r,vertical);
  }
  if (drawThumb) {
    int size=vertical ? r.height() : r.width();
    int thickness=vertical ? r.width() : r.height();
    int length=Math.round((float)size * extent / range);
    int offset=Math.round((float)(size - length) * mOffset / (range - extent));
    int minLength=thickness * 2;
    if (length < minLength) {
      length=minLength;
    }
    if (offset + length > size) {
      offset=size - length;
    }
    drawThumb(canvas,r,offset,length,vertical);
  }
}
