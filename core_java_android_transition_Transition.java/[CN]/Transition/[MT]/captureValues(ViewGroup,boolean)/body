{
  clearValues(start);
  if (mTargetIds.size() > 0 || mTargets.size() > 0) {
    if (mTargetIds.size() > 0) {
      for (int i=0; i < mTargetIds.size(); ++i) {
        int id=mTargetIds.get(i);
        View view=sceneRoot.findViewById(id);
        if (view != null) {
          TransitionValues values=new TransitionValues();
          values.view=view;
          if (start) {
            captureStartValues(values);
          }
 else {
            captureEndValues(values);
          }
          if (start) {
            mStartValues.viewValues.put(view,values);
            if (id >= 0) {
              mStartValues.idValues.put(id,values);
            }
          }
 else {
            mEndValues.viewValues.put(view,values);
            if (id >= 0) {
              mEndValues.idValues.put(id,values);
            }
          }
        }
      }
    }
    if (mTargets.size() > 0) {
      for (int i=0; i < mTargets.size(); ++i) {
        View view=mTargets.get(i);
        if (view != null) {
          TransitionValues values=new TransitionValues();
          values.view=view;
          if (start) {
            captureStartValues(values);
          }
 else {
            captureEndValues(values);
          }
          if (start) {
            mStartValues.viewValues.put(view,values);
          }
 else {
            mEndValues.viewValues.put(view,values);
          }
        }
      }
    }
  }
 else {
    captureHierarchy(sceneRoot,start);
  }
}
