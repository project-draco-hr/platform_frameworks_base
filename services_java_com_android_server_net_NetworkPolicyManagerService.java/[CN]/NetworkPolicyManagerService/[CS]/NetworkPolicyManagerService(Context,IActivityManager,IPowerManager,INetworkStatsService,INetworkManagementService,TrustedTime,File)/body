{
  mContext=checkNotNull(context,"missing context");
  mActivityManager=checkNotNull(activityManager,"missing activityManager");
  mPowerManager=checkNotNull(powerManager,"missing powerManager");
  mNetworkStats=checkNotNull(networkStats,"missing networkStats");
  mNetworkManagement=checkNotNull(networkManagement,"missing networkManagementService");
  mTime=checkNotNull(time,"missing TrustedTime");
  mHandlerThread=new HandlerThread(TAG);
  mHandlerThread.start();
  mHandler=new Handler(mHandlerThread.getLooper(),mHandlerCallback);
  mPolicyFile=new AtomicFile(new File(systemDir,"netpolicy.xml"));
}
