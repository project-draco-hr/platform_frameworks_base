{
  final int uidPolicy=getUidPolicy(uid);
  final boolean uidForeground=isUidForegroundL(uid);
  int uidRules=RULE_ALLOW_ALL;
  if (!uidForeground && (uidPolicy & POLICY_REJECT_PAID_BACKGROUND) != 0) {
    uidRules=RULE_REJECT_PAID;
  }
  mUidRules.put(uid,uidRules);
  final int length=mListeners.beginBroadcast();
  for (int i=0; i < length; i++) {
    final INetworkPolicyListener listener=mListeners.getBroadcastItem(i);
    if (listener != null) {
      try {
        listener.onRulesChanged(uid,uidRules);
      }
 catch (      RemoteException e) {
      }
    }
  }
  mListeners.finishBroadcast();
}
