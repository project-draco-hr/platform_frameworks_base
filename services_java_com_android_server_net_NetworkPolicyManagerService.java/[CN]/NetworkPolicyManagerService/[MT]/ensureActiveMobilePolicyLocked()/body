{
  if (LOGV)   Slog.v(TAG,"ensureActiveMobilePolicyLocked()");
  if (mSuppressDefaultPolicy)   return;
  final String subscriberId=getActiveSubscriberId();
  final NetworkIdentity probeIdent=new NetworkIdentity(TYPE_MOBILE,TelephonyManager.NETWORK_TYPE_UNKNOWN,subscriberId,false);
  boolean mobileDefined=false;
  for (  NetworkPolicy policy : mNetworkPolicy.values()) {
    if (policy.template.matches(probeIdent)) {
      mobileDefined=true;
    }
  }
  if (!mobileDefined) {
    Slog.i(TAG,"no policy for active mobile network; generating default policy");
    final long warningBytes=mContext.getResources().getInteger(com.android.internal.R.integer.config_networkPolicyDefaultWarning) * MB_IN_BYTES;
    final Time time=new Time(Time.TIMEZONE_UTC);
    time.setToNow();
    final int cycleDay=time.monthDay;
    final NetworkTemplate template=buildTemplateMobileAll(subscriberId);
    mNetworkPolicy.put(template,new NetworkPolicy(template,cycleDay,warningBytes,LIMIT_DISABLED,SNOOZE_NEVER,true));
    writePolicyLocked();
  }
}
