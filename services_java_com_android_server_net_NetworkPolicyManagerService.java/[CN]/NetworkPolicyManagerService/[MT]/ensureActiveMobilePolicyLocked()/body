{
  if (LOGV)   Slog.v(TAG,"ensureActiveMobilePolicyLocked()");
  final String subscriberId=getActiveSubscriberId();
  final NetworkIdentity probeIdent=new NetworkIdentity(TYPE_MOBILE,TelephonyManager.NETWORK_TYPE_UNKNOWN,subscriberId);
  boolean mobileDefined=false;
  for (  NetworkPolicy policy : mNetworkPolicy) {
    if (policy.template.matches(probeIdent)) {
      mobileDefined=true;
    }
  }
  if (!mobileDefined) {
    Slog.i(TAG,"no policy for active mobile network; generating default policy");
    final Time time=new Time(Time.TIMEZONE_UTC);
    time.setToNow();
    final int cycleDay=time.monthDay;
    final NetworkTemplate template=new NetworkTemplate(MATCH_MOBILE_ALL,subscriberId);
    mNetworkPolicy.add(new NetworkPolicy(template,cycleDay,4 * GB_IN_BYTES,LIMIT_DISABLED));
    writePolicyLocked();
  }
}
