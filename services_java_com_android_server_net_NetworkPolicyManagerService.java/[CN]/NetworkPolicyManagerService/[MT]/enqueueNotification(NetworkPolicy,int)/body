{
  final String tag=buildNotificationTag(policy,type);
  final Notification.Builder builder=new Notification.Builder(mContext);
  builder.setOnlyAlertOnce(true);
  builder.setOngoing(true);
  final Resources res=mContext.getResources();
switch (type) {
case TYPE_WARNING:
{
      final String title=res.getString(R.string.data_usage_warning_title);
      final String body=res.getString(R.string.data_usage_warning_body,Formatter.formatFileSize(mContext,policy.warningBytes));
      builder.setSmallIcon(R.drawable.ic_menu_info_details);
      builder.setTicker(title);
      builder.setContentTitle(title);
      builder.setContentText(body);
      builder.setContentIntent(PendingIntent.getActivity(mContext,0,new Intent(ACTION_DATA_USAGE_WARNING),PendingIntent.FLAG_UPDATE_CURRENT));
      break;
    }
case TYPE_LIMIT:
{
    final String title;
    final String body=res.getString(R.string.data_usage_limit_body);
switch (policy.networkTemplate) {
case TEMPLATE_MOBILE_3G_LOWER:
      title=res.getString(R.string.data_usage_3g_limit_title);
    break;
case TEMPLATE_MOBILE_4G:
  title=res.getString(R.string.data_usage_4g_limit_title);
break;
default :
title=res.getString(R.string.data_usage_mobile_limit_title);
break;
}
builder.setSmallIcon(com.android.internal.R.drawable.ic_menu_block);
builder.setTicker(title);
builder.setContentTitle(title);
builder.setContentText(body);
builder.setContentIntent(PendingIntent.getActivity(mContext,0,new Intent(ACTION_DATA_USAGE_LIMIT),PendingIntent.FLAG_UPDATE_CURRENT));
break;
}
}
try {
final String packageName=mContext.getPackageName();
final int[] idReceived=new int[1];
mNotifManager.enqueueNotificationWithTag(packageName,tag,0x0,builder.getNotification(),idReceived);
}
 catch (RemoteException e) {
Slog.w(TAG,"problem during enqueueNotification: " + e);
}
}
