{
  mContext.enforceCallingOrSelfPermission(MANAGE_NETWORK_POLICY,TAG);
  final long currentTime=currentTimeMillis(true);
synchronized (mRulesLock) {
    final NetworkPolicy policy=mNetworkPolicy.get(template);
    if (policy == null) {
      throw new IllegalArgumentException("unable to find policy for " + template);
    }
    policy.lastSnooze=currentTime;
    updateNetworkEnabledLocked();
    updateNetworkRulesLocked();
    updateNotificationsLocked();
    writePolicyLocked();
  }
}
