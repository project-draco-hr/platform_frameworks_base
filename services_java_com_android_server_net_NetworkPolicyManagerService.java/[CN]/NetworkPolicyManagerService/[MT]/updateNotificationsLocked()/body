{
  if (LOGV)   Slog.v(TAG,"updateNotificationsLocked()");
  if (mTime.getCacheAge() > TIME_CACHE_MAX_AGE) {
    mTime.forceRefresh();
  }
  final long currentTime=mTime.hasCache() ? mTime.currentTimeMillis() : System.currentTimeMillis();
  for (  NetworkPolicy policy : mNetworkPolicy) {
    final long start=computeLastCycleBoundary(currentTime,policy);
    final long end=currentTime;
    final long total;
    try {
      final NetworkStats stats=mNetworkStats.getSummaryForNetwork(policy.template,start,end);
      total=stats.rx[0] + stats.tx[0];
    }
 catch (    RemoteException e) {
      Slog.w(TAG,"problem reading summary for template " + policy.template);
      continue;
    }
    if (policy.limitBytes != LIMIT_DISABLED && total >= policy.limitBytes) {
      cancelNotification(policy,TYPE_WARNING);
      enqueueNotification(policy,TYPE_LIMIT);
    }
 else {
      cancelNotification(policy,TYPE_LIMIT);
      if (policy.warningBytes != WARNING_DISABLED && total >= policy.warningBytes) {
        enqueueNotification(policy,TYPE_WARNING);
      }
 else {
        cancelNotification(policy,TYPE_WARNING);
      }
    }
  }
}
