{
  String pkgList[]=null;
  String action=intent.getAction();
  boolean immediateGc=false;
  if (Intent.ACTION_EXTERNAL_APPLICATIONS_UNAVAILABLE.equals(action)) {
    pkgList=intent.getStringArrayExtra(Intent.EXTRA_CHANGED_PACKAGE_LIST);
    immediateGc=true;
  }
 else {
    Uri data=intent.getData();
    if (data != null) {
      String ssp=data.getSchemeSpecificPart();
      if (ssp != null) {
        pkgList=new String[]{ssp};
      }
    }
  }
  if (pkgList != null && (pkgList.length > 0)) {
    boolean needCleanup=false;
    boolean hasPkgInfo=false;
    for (    String ssp : pkgList) {
synchronized (sSync) {
        Iterator<ResourceName> it=sIconCache.keySet().iterator();
        while (it.hasNext()) {
          ResourceName nm=it.next();
          if (nm.packageName.equals(ssp)) {
            it.remove();
            needCleanup=true;
          }
        }
        it=sStringCache.keySet().iterator();
        while (it.hasNext()) {
          ResourceName nm=it.next();
          if (nm.packageName.equals(ssp)) {
            it.remove();
            needCleanup=true;
          }
        }
      }
      if (!hasPkgInfo) {
        hasPkgInfo=ActivityThread.currentActivityThread().hasPackageInfo(ssp);
      }
    }
    if (needCleanup || hasPkgInfo) {
      if (immediateGc) {
        Runtime.getRuntime().gc();
      }
 else {
        ActivityThread.currentActivityThread().scheduleGcIdler();
      }
    }
  }
}
