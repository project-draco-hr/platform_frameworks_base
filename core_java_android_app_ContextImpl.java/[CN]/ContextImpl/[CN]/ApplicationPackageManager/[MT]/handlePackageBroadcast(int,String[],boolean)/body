{
  boolean immediateGc=false;
  if (cmd == IApplicationThread.EXTERNAL_STORAGE_UNAVAILABLE) {
    immediateGc=true;
  }
  if (pkgList != null && (pkgList.length > 0)) {
    boolean needCleanup=false;
    for (    String ssp : pkgList) {
synchronized (sSync) {
        if (sIconCache.size() > 0) {
          Iterator<ResourceName> it=sIconCache.keySet().iterator();
          while (it.hasNext()) {
            ResourceName nm=it.next();
            if (nm.packageName.equals(ssp)) {
              it.remove();
              needCleanup=true;
            }
          }
        }
        if (sStringCache.size() > 0) {
          Iterator<ResourceName> it=sStringCache.keySet().iterator();
          while (it.hasNext()) {
            ResourceName nm=it.next();
            if (nm.packageName.equals(ssp)) {
              it.remove();
              needCleanup=true;
            }
          }
        }
      }
    }
    if (needCleanup || hasPkgInfo) {
      if (immediateGc) {
        Runtime.getRuntime().gc();
      }
 else {
        ActivityThread.currentActivityThread().scheduleGcIdler();
      }
    }
  }
}
