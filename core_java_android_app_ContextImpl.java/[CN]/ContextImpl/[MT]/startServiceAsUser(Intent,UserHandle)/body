{
  try {
    if (service.getComponent() == null && service.getPackage() == null) {
      if (getApplicationInfo().targetSdkVersion >= Build.VERSION_CODES.KEY_LIME_PIE) {
        IllegalArgumentException ex=new IllegalArgumentException("Service Intent must be explicit: " + service);
        Log.e(TAG,"This will become an error",ex);
      }
    }
    service.prepareToLeaveProcess();
    ComponentName cn=ActivityManagerNative.getDefault().startService(mMainThread.getApplicationThread(),service,service.resolveTypeIfNeeded(getContentResolver()),user.getIdentifier());
    if (cn != null) {
      if (cn.getPackageName().equals("!")) {
        throw new SecurityException("Not allowed to start service " + service + " without permission "+ cn.getClassName());
      }
 else       if (cn.getPackageName().equals("!!")) {
        throw new SecurityException("Unable to start service " + service + ": "+ cn.getClassName());
      }
    }
    return cn;
  }
 catch (  RemoteException e) {
    return null;
  }
}
