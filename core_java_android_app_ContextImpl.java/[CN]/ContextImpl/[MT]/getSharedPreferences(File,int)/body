{
  SharedPreferencesImpl sp;
synchronized (ContextImpl.class) {
    final ArrayMap<File,SharedPreferencesImpl> cache=getSharedPreferencesCacheLocked();
    sp=cache.get(file);
    if (sp == null) {
      sp=new SharedPreferencesImpl(file,mode);
      cache.put(file,sp);
      return sp;
    }
  }
  if ((mode & Context.MODE_MULTI_PROCESS) != 0 || getApplicationInfo().targetSdkVersion < android.os.Build.VERSION_CODES.HONEYCOMB) {
    sp.startReloadIfChangedUnexpectedly();
  }
  return sp;
}
