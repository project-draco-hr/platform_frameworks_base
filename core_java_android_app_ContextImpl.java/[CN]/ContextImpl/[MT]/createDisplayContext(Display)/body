{
  if (display == null) {
    throw new IllegalArgumentException("display must not be null");
  }
  int displayId=display.getDisplayId();
  ContextImpl context=new ContextImpl();
  context.init(mPackageInfo,null,mMainThread);
  context.mDisplay=display;
  DisplayAdjustments daj=getDisplayAdjustments(displayId);
  context.mResources=mResourcesManager.getTopLevelResources(mPackageInfo.getResDir(),displayId,null,daj.getCompatibilityInfo(),null);
  return context;
}
