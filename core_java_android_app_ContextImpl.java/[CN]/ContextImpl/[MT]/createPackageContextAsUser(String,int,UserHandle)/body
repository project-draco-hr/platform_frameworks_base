{
  if (packageName.equals("system") || packageName.equals("android")) {
    final ContextImpl context=new ContextImpl(mMainThread.getSystemContext());
    context.mBasePackageName=mBasePackageName;
    return context;
  }
  LoadedApk pi=mMainThread.getPackageInfo(packageName,mResources.getCompatibilityInfo(),flags,user.getIdentifier());
  if (pi != null) {
    ContextImpl c=new ContextImpl();
    c.mRestricted=(flags & CONTEXT_RESTRICTED) == CONTEXT_RESTRICTED;
    c.init(pi,null,mMainThread,mResources,mBasePackageName,user);
    if (c.mResources != null) {
      return c;
    }
  }
  throw new PackageManager.NameNotFoundException("Application package " + packageName + " not found");
}
