{
  LoadedApk pi=mMainThread.getPackageInfo(application,mResources.getCompatibilityInfo(),flags | CONTEXT_REGISTER_PACKAGE);
  if (pi != null) {
    ContextImpl c=new ContextImpl(this,mMainThread,pi,mActivityToken,new UserHandle(UserHandle.getUserId(application.uid)),flags,mDisplay,null,Display.INVALID_DISPLAY);
    if (c.mResources != null) {
      return c;
    }
  }
  throw new PackageManager.NameNotFoundException("Application package " + application.packageName + " not found");
}
