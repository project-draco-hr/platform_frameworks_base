{
  if (mPackageInfo != null) {
    File res=null;
    if (isCredentialEncryptedStorage()) {
      res=mPackageInfo.getCredentialEncryptedDataDirFile();
    }
 else     if (isDeviceEncryptedStorage()) {
      res=mPackageInfo.getDeviceEncryptedDataDirFile();
    }
 else {
      res=mPackageInfo.getDataDirFile();
    }
    if (res != null) {
      return res;
    }
 else {
      throw new RuntimeException("No data directory found for package " + getPackageName());
    }
  }
 else {
    throw new RuntimeException("No package details found for package " + getPackageName());
  }
}
