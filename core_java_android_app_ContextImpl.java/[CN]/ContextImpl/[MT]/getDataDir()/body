{
  if (mPackageInfo != null) {
    File res=null;
    if (isCredentialProtectedStorage()) {
      res=mPackageInfo.getCredentialProtectedDataDirFile();
    }
 else     if (isDeviceProtectedStorage()) {
      res=mPackageInfo.getDeviceProtectedDataDirFile();
    }
 else {
      res=mPackageInfo.getDataDirFile();
    }
    if (res != null) {
      return res;
    }
 else {
      throw new RuntimeException("No data directory found for package " + getPackageName());
    }
  }
 else {
    throw new RuntimeException("No package details found for package " + getPackageName());
  }
}
