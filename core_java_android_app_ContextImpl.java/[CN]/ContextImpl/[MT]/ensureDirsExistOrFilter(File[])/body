{
  File[] result=new File[dirs.length];
  for (int i=0; i < dirs.length; i++) {
    File dir=dirs[i];
    if (!dir.exists()) {
      if (!dir.mkdirs()) {
        final IMountService mount=IMountService.Stub.asInterface(ServiceManager.getService("mount"));
        int res=-1;
        try {
          res=mount.mkdirs(getPackageName(),dir.getAbsolutePath());
        }
 catch (        RemoteException e) {
        }
        if (res != 0) {
          Log.w(TAG,"Failed to ensure directory: " + dir);
          dir=null;
        }
      }
    }
    result[i]=dir;
  }
  return result;
}
