{
  if (mPreviewPopup.isShowing()) {
    mPreviewPopup.dismiss();
  }
  mHandler.removeMessages(MSG_REPEAT);
  mHandler.removeMessages(MSG_LONGPRESS);
  mHandler.removeMessages(MSG_SHOW_PREVIEW);
  dismissPopupKeyboard();
  mBuffer=null;
  mCanvas=null;
  mMiniKeyboardCache.clear();
}
