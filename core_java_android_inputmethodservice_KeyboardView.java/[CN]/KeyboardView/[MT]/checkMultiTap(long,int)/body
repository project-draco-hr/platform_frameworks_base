{
  if (keyIndex == NOT_A_KEY)   return;
  Key key=mKeys[keyIndex];
  if (key.codes.length > 1) {
    mInMultiTap=true;
    if (eventTime < mLastTapTime + MULTITAP_INTERVAL && keyIndex == mLastSentIndex) {
      mTapCount=(mTapCount + 1) % key.codes.length;
      return;
    }
 else {
      mTapCount=-1;
      return;
    }
  }
  if (eventTime > mLastTapTime + MULTITAP_INTERVAL || keyIndex != mLastSentIndex) {
    resetMultiTap();
  }
}
