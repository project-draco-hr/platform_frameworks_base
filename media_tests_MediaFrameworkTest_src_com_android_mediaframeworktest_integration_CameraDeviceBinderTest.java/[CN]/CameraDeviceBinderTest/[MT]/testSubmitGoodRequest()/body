{
  CameraMetadata metadata=new CameraMetadata();
  assertTrue(metadata.isEmpty());
  CaptureRequest request=new CaptureRequest();
  assertTrue(request.isEmpty());
  int status=mCameraUser.createDefaultRequest(TEMPLATE_PREVIEW,metadata);
  assertEquals(CameraBinderTestUtils.NO_ERROR,status);
  assertFalse(metadata.isEmpty());
  request.swap(metadata);
  assertFalse(request.isEmpty());
  assertTrue(metadata.isEmpty());
  SurfaceTexture surfaceTexture=new SurfaceTexture(0);
  surfaceTexture.setDefaultBufferSize(640,480);
  Surface surface=new Surface(surfaceTexture);
  int streamId=mCameraUser.createStream(10,20,30,surface);
  assertEquals(0,streamId);
  request.addTarget(surface);
  int requestId1;
  requestId1=mCameraUser.submitRequest(request,false);
  assertTrue("Request IDs should be non-negative",requestId1 >= 0);
  int requestId2=mCameraUser.submitRequest(request,false);
  assertTrue("Request IDs should be non-negative",requestId2 >= 0);
  assertNotSame("Request IDs should be unique for multiple requests",requestId1,requestId2);
  surface.release();
  request.close();
  metadata.close();
}
