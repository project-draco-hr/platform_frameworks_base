{
  super.setUp();
  System.setProperty("dexmaker.dexcache",getContext().getCacheDir().toString());
  mUtils=new CameraBinderTestUtils(getContext());
  mCameraId=MediaFrameworkIntegrationTestRunner.mCameraId;
  ICameraDeviceCallbacks.Stub dummyCallbacks=new DummyCameraDeviceCallbacks();
  String clientPackageName=getContext().getPackageName();
  mMockCb=spy(dummyCallbacks);
  BinderHolder holder=new BinderHolder();
  mUtils.getCameraService().connectDevice(mMockCb,mCameraId,clientPackageName,CameraBinderTestUtils.USE_CALLING_UID,holder);
  mCameraUser=ICameraDeviceUser.Stub.asInterface(holder.getBinder());
  assertNotNull(String.format("Camera %s was null",mCameraId),mCameraUser);
  mHandlerThread=new HandlerThread(TAG);
  mHandlerThread.start();
  mHandler=new Handler(mHandlerThread.getLooper());
  createDefaultSurface();
  Log.v(TAG,String.format("Camera %s connected",mCameraId));
}
