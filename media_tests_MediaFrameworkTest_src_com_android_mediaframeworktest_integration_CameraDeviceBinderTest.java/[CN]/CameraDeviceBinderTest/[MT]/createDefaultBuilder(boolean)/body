{
  CameraMetadataNative metadata=new CameraMetadataNative();
  assertTrue(metadata.isEmpty());
  int status=mCameraUser.createDefaultRequest(TEMPLATE_PREVIEW,metadata);
  assertEquals(CameraBinderTestUtils.NO_ERROR,status);
  assertFalse(metadata.isEmpty());
  CaptureRequest.Builder request=new CaptureRequest.Builder(metadata,false,CameraCaptureSession.SESSION_ID_NONE);
  assertFalse(request.isEmpty());
  assertFalse(metadata.isEmpty());
  if (needStream) {
    int streamId=mCameraUser.createStream(mOutputConfiguration);
    assertEquals(0,streamId);
    request.addTarget(mSurface);
  }
  return request;
}
