{
  CameraMetadata metadata=new CameraMetadata();
  assertTrue(metadata.isEmpty());
  CaptureRequest request=new CaptureRequest();
  assertTrue(request.isEmpty());
  int status=mCameraUser.createDefaultRequest(TEMPLATE_PREVIEW,metadata);
  assertEquals(CameraBinderTestUtils.NO_ERROR,status);
  assertFalse(metadata.isEmpty());
  request.swap(metadata);
  assertFalse(request.isEmpty());
  assertTrue(metadata.isEmpty());
  if (needStream) {
    int streamId=mCameraUser.createStream(10,20,30,mSurface);
    assertEquals(0,streamId);
    request.addTarget(mSurface);
  }
  return request;
}
