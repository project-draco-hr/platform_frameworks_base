{
  CaptureRequest.Builder builder=createDefaultBuilder(false);
  CaptureRequest request1=builder.build();
  try {
    SubmitInfo requestInfo=mCameraUser.submitRequest(request1,false);
    fail("Exception expected");
  }
 catch (  ServiceSpecificException e) {
    assertEquals("Expected submitRequest to throw ServiceSpecificException with BAD_VALUE " + "since we had 0 surface targets set.",ICameraService.ERROR_ILLEGAL_ARGUMENT,e.errorCode);
  }
  builder.addTarget(mSurface);
  CaptureRequest request2=builder.build();
  try {
    SubmitInfo requestInfo=mCameraUser.submitRequest(request2,false);
    fail("Exception expected");
  }
 catch (  ServiceSpecificException e) {
    assertEquals("Expected submitRequest to throw ILLEGAL_ARGUMENT " + "ServiceSpecificException since the target wasn't registered with createStream.",ICameraService.ERROR_ILLEGAL_ARGUMENT,e.errorCode);
  }
}
