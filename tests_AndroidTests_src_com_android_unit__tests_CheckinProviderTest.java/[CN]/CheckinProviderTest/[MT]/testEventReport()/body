{
  long start=System.currentTimeMillis();
  ContentResolver r=getContext().getContentResolver();
  Checkin.logEvent(r,Checkin.Events.Tag.TEST,"Test Value");
  Cursor c=r.query(Checkin.Events.CONTENT_URI,null,Checkin.Events.TAG + "=?",new String[]{Checkin.Events.Tag.TEST.toString()},null);
  long id=-1;
  while (c.moveToNext()) {
    String tag=c.getString(c.getColumnIndex(Checkin.Events.TAG));
    String value=c.getString(c.getColumnIndex(Checkin.Events.VALUE));
    long date=c.getLong(c.getColumnIndex(Checkin.Events.DATE));
    assertEquals(Checkin.Events.Tag.TEST.toString(),tag);
    if ("Test Value".equals(value) && date >= start) {
      assertTrue(id < 0);
      id=c.getInt(c.getColumnIndex(Checkin.Events._ID));
    }
  }
  assertTrue(id > 0);
  int rows=r.delete(ContentUris.withAppendedId(Checkin.Events.CONTENT_URI,id),null,null);
  assertEquals(1,rows);
  c.requery();
  while (c.moveToNext()) {
    long date=c.getLong(c.getColumnIndex(Checkin.Events.DATE));
    assertTrue(date < start);
  }
  c.close();
}
