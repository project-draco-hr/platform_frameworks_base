{
  try {
    if (mViewRoot == null) {
      return new SceneResult("Layout has not been inflated!");
    }
    int w_spec, h_spec;
    int renderScreenWidth=mParams.getScreenWidth();
    int renderScreenHeight=mParams.getScreenHeight();
    if (mParams.getRenderFullSize()) {
      w_spec=MeasureSpec.makeMeasureSpec(renderScreenWidth,MeasureSpec.UNSPECIFIED);
      h_spec=MeasureSpec.makeMeasureSpec(renderScreenHeight - mScreenOffset,MeasureSpec.UNSPECIFIED);
      mViewRoot.measure(w_spec,h_spec);
      int neededWidth=mViewRoot.getChildAt(0).getMeasuredWidth();
      if (neededWidth > renderScreenWidth) {
        renderScreenWidth=neededWidth;
      }
      int neededHeight=mViewRoot.getChildAt(0).getMeasuredHeight();
      if (neededHeight > renderScreenHeight - mScreenOffset) {
        renderScreenHeight=neededHeight + mScreenOffset;
      }
    }
    w_spec=MeasureSpec.makeMeasureSpec(renderScreenWidth,MeasureSpec.EXACTLY);
    h_spec=MeasureSpec.makeMeasureSpec(renderScreenHeight - mScreenOffset,MeasureSpec.EXACTLY);
    mViewRoot.measure(w_spec,h_spec);
    mViewRoot.layout(0,mScreenOffset,renderScreenWidth,renderScreenHeight);
    mImage=new BufferedImage(renderScreenWidth,renderScreenHeight - mScreenOffset,BufferedImage.TYPE_INT_ARGB);
    if (mParams.isCustomBackgroundEnabled()) {
      Graphics2D gc=mImage.createGraphics();
      gc.setColor(new Color(mParams.getCustomBackgroundColor(),true));
      gc.fillRect(0,0,renderScreenWidth,renderScreenHeight - mScreenOffset);
      gc.dispose();
    }
    Bitmap bitmap=Bitmap_Delegate.createBitmap(mImage,Density.getEnum(mParams.getDensity()));
    Canvas canvas=new Canvas(bitmap);
    Canvas_Delegate canvasDelegate=Canvas_Delegate.getDelegate(canvas);
    canvasDelegate.setLogger(mParams.getLogger());
    mViewRoot.draw(canvas);
    canvasDelegate.dispose();
    mViewInfo=visit(((ViewGroup)mViewRoot).getChildAt(0),mContext);
    return SceneResult.SUCCESS;
  }
 catch (  Throwable e) {
    Throwable t=e;
    while (t.getCause() != null) {
      t=t.getCause();
    }
    mParams.getLogger().error(t);
    return new SceneResult("Unknown error during inflation.",t);
  }
}
