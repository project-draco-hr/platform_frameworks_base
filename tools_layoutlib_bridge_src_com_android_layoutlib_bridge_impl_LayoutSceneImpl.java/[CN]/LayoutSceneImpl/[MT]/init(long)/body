{
  SceneResult result=acquireLock(timeout);
  if (result != null) {
    return result;
  }
  DisplayMetrics metrics=new DisplayMetrics();
  metrics.densityDpi=mParams.getDensity();
  metrics.density=mParams.getDensity() / (float)DisplayMetrics.DENSITY_DEFAULT;
  metrics.scaledDensity=metrics.density;
  metrics.widthPixels=mParams.getScreenWidth();
  metrics.heightPixels=mParams.getScreenHeight();
  metrics.xdpi=mParams.getXdpi();
  metrics.ydpi=mParams.getYdpi();
  Map<IStyleResourceValue,IStyleResourceValue> styleParentMap=new HashMap<IStyleResourceValue,IStyleResourceValue>();
  mCurrentTheme=computeStyleMaps(mParams.getThemeName(),mParams.getIsProjectTheme(),mParams.getProjectResources().get(BridgeConstants.RES_STYLE),mParams.getFrameworkResources().get(BridgeConstants.RES_STYLE),styleParentMap);
  mContext=new BridgeContext(mParams.getProjectKey(),metrics,mCurrentTheme,mParams.getProjectResources(),mParams.getFrameworkResources(),styleParentMap,mParams.getProjectCallback(),mParams.getLogger());
  sCurrentContext=mContext;
  mContext.initResources();
  mWindowBackground=null;
  mScreenOffset=0;
  if (mCurrentTheme != null && mParams.isCustomBackgroundEnabled() == false) {
    mWindowBackground=mContext.findItemInStyle(mCurrentTheme,"windowBackground");
    mWindowBackground=mContext.resolveResValue(mWindowBackground);
    mScreenOffset=getScreenOffset(mParams.getFrameworkResources(),mCurrentTheme,mContext);
  }
  mInflater=new BridgeInflater(mContext,mParams.getProjectCallback());
  mContext.setBridgeInflater(mInflater);
  mInflater.setFactory2(mContext);
  mBlockParser=new BridgeXmlBlockParser(mParams.getLayoutDescription(),mContext,false);
  return SceneStatus.SUCCESS.getResult();
}
