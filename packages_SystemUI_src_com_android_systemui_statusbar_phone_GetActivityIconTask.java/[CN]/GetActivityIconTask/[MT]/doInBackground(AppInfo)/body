{
  if (params.length != 1) {
    throw new IllegalArgumentException("Expected one parameter");
  }
  AppInfo appInfo=params[0];
  try {
    IPackageManager mPM=AppGlobals.getPackageManager();
    ActivityInfo ai=mPM.getActivityInfo(appInfo.getComponentName(),0,appInfo.getUser().getIdentifier());
    if (ai == null) {
      Slog.w(TAG,"Icon not found for " + appInfo);
      return null;
    }
    Drawable unbadgedIcon=ai.loadIcon(mPackageManager);
    return mPackageManager.getUserBadgedIcon(unbadgedIcon,appInfo.getUser());
  }
 catch (  RemoteException e) {
    Slog.w(TAG,"Icon not found for " + appInfo,e);
    return null;
  }
}
