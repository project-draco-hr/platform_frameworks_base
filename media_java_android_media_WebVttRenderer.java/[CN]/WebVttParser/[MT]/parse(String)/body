{
  boolean trailingCR=false;
  mBuffer=(mBuffer + s.replace("\0","\ufffd")).replace("\r\n","\n");
  if (mBuffer.endsWith("\r")) {
    trailingCR=true;
    mBuffer=mBuffer.substring(0,mBuffer.length() - 1);
  }
  String[] lines=mBuffer.split("[\r\n]");
  for (int i=0; i < lines.length - 1; i++) {
    mPhase.parse(lines[i]);
  }
  mBuffer=lines[lines.length - 1];
  if (trailingCR)   mBuffer+="\r";
}
