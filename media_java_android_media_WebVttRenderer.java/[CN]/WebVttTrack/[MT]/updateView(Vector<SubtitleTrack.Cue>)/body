{
  if (!mVisible) {
    return;
  }
  if (DEBUG && mTimeProvider != null) {
    try {
      Log.d(TAG,"at " + (mTimeProvider.getCurrentTimeUs(false,true) / 1000) + " ms the active cues are:");
    }
 catch (    IllegalStateException e) {
      Log.d(TAG,"at (illegal state) the active cues are:");
    }
  }
  StringBuilder text=new StringBuilder();
  StringBuilder lineBuilder=new StringBuilder();
  for (  Cue o : activeCues) {
    TextTrackCue cue=(TextTrackCue)o;
    if (DEBUG)     Log.d(TAG,cue.toString());
    for (    TextTrackCueSpan[] line : cue.mLines) {
      for (      TextTrackCueSpan span : line) {
        if (!span.mEnabled) {
          continue;
        }
        lineBuilder.append(span.mText);
      }
      if (lineBuilder.length() > 0) {
        text.append(lineBuilder.toString()).append("\n");
        lineBuilder.delete(0,lineBuilder.length());
      }
    }
  }
  if (mTextView != null) {
    if (DEBUG)     Log.d(TAG,"updating to " + text.toString());
    mTextView.setText(text.toString());
    mTextView.postInvalidate();
  }
}
