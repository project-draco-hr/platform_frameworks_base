{
  mBound=bind;
  if (bind) {
    if (mBindTryCount == MAX_BIND_RETRIES) {
      startPackageListening();
      return;
    }
    if (!checkComponentState()) {
      return;
    }
    if (DEBUG)     Log.d(TAG,"Binding service " + mIntent + " "+ mUser);
    mBindTryCount++;
    try {
      mIsBound=mContext.bindServiceAsUser(mIntent,this,Context.BIND_AUTO_CREATE | Context.BIND_FOREGROUND_SERVICE_WHILE_AWAKE,mUser);
    }
 catch (    SecurityException e) {
      Log.e(TAG,"Failed to bind to service",e);
      mIsBound=false;
    }
  }
 else {
    if (DEBUG)     Log.d(TAG,"Unbinding service " + mIntent + " "+ mUser);
    mBindTryCount=0;
    mWrapper=null;
    if (mIsBound) {
      mContext.unbindService(this);
      mIsBound=false;
    }
  }
}
