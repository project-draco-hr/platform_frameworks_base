{
  shouldRunInMainThread(false);
synchronized (mSyncObject) {
    mCommandDone=false;
    Message msg=mHandler.obtainMessage(command);
    msg.obj=arg;
    mHandler.sendMessage(msg);
    long end=System.currentTimeMillis() + timeout;
    while (!mCommandDone) {
      if (System.currentTimeMillis() >= end) {
        throw new RuntimeException("Timeout executing command: " + command);
      }
      try {
        mSyncObject.wait(timeout);
      }
 catch (      InterruptedException e) {
        throw new RuntimeException(e);
      }
    }
  }
  return mJsResult;
}
