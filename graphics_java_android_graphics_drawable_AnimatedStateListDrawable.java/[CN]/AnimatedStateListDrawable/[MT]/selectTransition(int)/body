{
  if (toIndex == mAnimToIndex) {
    return true;
  }
  if (mAnim != null) {
    if (toIndex == mAnimToIndex) {
      return true;
    }
 else     if (toIndex == mAnimFromIndex) {
      mAnim.reverse();
      mAnimFromIndex=mAnimToIndex;
      mAnimToIndex=toIndex;
      return true;
    }
    mAnim.cancel();
    mAnim=null;
  }
  mAnimFromIndex=-1;
  mAnimToIndex=-1;
  final AnimatedStateListState state=mState;
  final int fromIndex=getCurrentIndex();
  final int fromId=state.getKeyframeIdAt(fromIndex);
  final int toId=state.getKeyframeIdAt(toIndex);
  if (toId == 0 || fromId == 0) {
    return false;
  }
  final int transitionIndex=state.indexOfTransition(fromId,toId);
  if (transitionIndex < 0 || !selectDrawable(transitionIndex)) {
    return false;
  }
  final Drawable d=getCurrent();
  if (d instanceof AnimationDrawable) {
    final boolean reversed=mState.isTransitionReversed(fromId,toId);
    mAnim=getAnimationDrawableAnimator((AnimationDrawable)d,reversed);
    mAnim.start();
  }
 else   if (d instanceof Animatable) {
    ((Animatable)d).start();
  }
 else {
    return false;
  }
  mAnimFromIndex=fromIndex;
  mAnimToIndex=toIndex;
  return true;
}
