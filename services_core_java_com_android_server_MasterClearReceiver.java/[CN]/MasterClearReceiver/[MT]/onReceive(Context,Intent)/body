{
  if (intent.getAction().equals(Intent.ACTION_REMOTE_INTENT)) {
    if (!"google.com".equals(intent.getStringExtra("from"))) {
      Slog.w(TAG,"Ignoring master clear request -- not from trusted server.");
      return;
    }
  }
  final boolean shutdown=intent.getBooleanExtra("shutdown",false);
  Slog.w(TAG,"!!! FACTORY RESET !!!");
  Thread thr=new Thread("Reboot"){
    @Override public void run(){
      try {
        RecoverySystem.rebootWipeUserData(context,shutdown);
        Log.wtf(TAG,"Still running after master clear?!");
      }
 catch (      IOException e) {
        Slog.e(TAG,"Can't perform master clear/factory reset",e);
      }
catch (      SecurityException e) {
        Slog.e(TAG,"Can't perform master clear/factory reset",e);
      }
    }
  }
;
  thr.start();
}
