{
  int ret;
  ret=charToGsm.get(c,-1);
  if (ret == -1) {
    ret=charToGsmExtended.get(c,-1);
    if (ret == -1) {
      if (throwException) {
        throw new EncodeException(c);
      }
 else {
        return sGsmSpaceChar;
      }
    }
 else {
      return GSM_EXTENDED_ESCAPE;
    }
  }
  return ret;
}
