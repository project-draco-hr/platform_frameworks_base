{
  if (!mDozing)   return 0;
  final long now=System.currentTimeMillis();
  if (DEBUG)   Log.d(TAG,"pulse delayed=" + delayed + " mPulseEndTime="+ mPulseEndTime+ " now="+ now);
  if (mPulseEndTime != 0 && mPulseEndTime > now)   return mPulseEndTime - now;
  final long delay=delayed ? mDozeParameters.getPulseStartDelay() : 0;
  mScrimInFront.postDelayed(mPulseIn,delay);
  mPulseEndTime=now + delay + mDozeParameters.getPulseDuration();
  return mPulseEndTime - now;
}
