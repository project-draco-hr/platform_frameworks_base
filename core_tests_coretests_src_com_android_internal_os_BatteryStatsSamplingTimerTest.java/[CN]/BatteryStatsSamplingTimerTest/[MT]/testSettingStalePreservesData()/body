{
  final MockClocks clocks=new MockClocks();
  final BatteryStatsImpl.SamplingTimer timer=new BatteryStatsImpl.SamplingTimer(clocks,Mockito.mock(BatteryStatsImpl.TimeBase.class));
  timer.onTimeStarted(100,100,100);
  timer.update(10,1);
  timer.update(20,2);
  assertEquals(1,timer.getCountLocked(BatteryStats.STATS_SINCE_CHARGED));
  assertEquals(10,timer.getTotalTimeLocked(200,BatteryStats.STATS_SINCE_CHARGED));
  timer.endSample();
  assertEquals(1,timer.getCountLocked(BatteryStats.STATS_SINCE_CHARGED));
  assertEquals(10,timer.getTotalTimeLocked(200,BatteryStats.STATS_SINCE_CHARGED));
  timer.onTimeStopped(200,200,200);
  assertEquals(1,timer.getCountLocked(BatteryStats.STATS_SINCE_CHARGED));
  assertEquals(10,timer.getTotalTimeLocked(200,BatteryStats.STATS_SINCE_CHARGED));
}
