{
  super.onCreate(icicle);
  mUsbManager=(UsbManager)getSystemService(Context.USB_SERVICE);
  AlertDialog.Builder dialogBuilder=new AlertDialog.Builder(this);
  dialogBuilder.setTitle(getString(R.string.usb_preference_title));
  LayoutInflater inflater=(LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
  View buttonView=inflater.inflate(R.layout.usb_preference_buttons,null);
  dialogBuilder.setView(buttonView);
  mMtpPtpButton=(Button)buttonView.findViewById(R.id.mtp_ptp_button);
  mInstallerCdButton=(Button)buttonView.findViewById(R.id.installer_cd_button);
  mMtpPtpButton.setOnClickListener(this);
  mInstallerCdButton.setOnClickListener(this);
  mPtpActive=mUsbManager.isFunctionEnabled(UsbManager.USB_FUNCTION_PTP);
  if (mPtpActive) {
    mMtpPtpButton.setText(R.string.use_mtp_button_title);
  }
  mInstallerImagePath=getString(com.android.internal.R.string.config_isoImagePath);
  if (!(new File(mInstallerImagePath)).exists()) {
    mInstallerCdButton.setVisibility(View.GONE);
  }
  mDialog=dialogBuilder.show();
}
