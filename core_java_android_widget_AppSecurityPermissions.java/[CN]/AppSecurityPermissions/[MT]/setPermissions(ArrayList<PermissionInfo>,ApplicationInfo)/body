{
  mDangerousMap=new HashMap<String,String>();
  mNormalMap=new HashMap<String,String>();
  mGroupLabelCache=new HashMap<String,String>();
  mGroupLabelCache.put(mDefaultGrpName,mDefaultGrpLabel);
  if (permList != null) {
    for (    PermissionInfo pInfo : permList) {
      if (!isDisplayablePermission(pInfo)) {
        continue;
      }
      String grpName=(pInfo.group == null) ? mDefaultGrpName : pInfo.group;
      HashMap<String,String> permInfoMap=(pInfo.protectionLevel == PermissionInfo.PROTECTION_DANGEROUS) ? mDangerousMap : mNormalMap;
      if (getGroupLabel(grpName) == null) {
        continue;
      }
      CharSequence permDesc=pInfo.loadLabel(mPm);
      String grpDesc=permInfoMap.get(grpName);
      permInfoMap.put(grpName,formatPermissions(grpDesc,permDesc));
      if (localLOGV)       Log.i(TAG,pInfo.name + "    :  " + permDesc+ "    :    "+ grpName);
    }
  }
  mCurrentState=State.NO_PERMS;
  if (mDangerousMap.size() > 0) {
    mCurrentState=(mNormalMap.size() > 0) ? State.BOTH : State.DANGEROUS_ONLY;
  }
 else   if (mNormalMap.size() > 0) {
    mCurrentState=State.NORMAL_ONLY;
  }
  if (localLOGV)   Log.i(TAG,"mCurrentState=" + mCurrentState);
  showPermissions();
}
