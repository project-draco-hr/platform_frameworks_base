{
  out.startTag(null,ZEN_TAG);
  out.attribute(null,ZEN_ATT_VERSION,Integer.toString(XML_VERSION));
  out.startTag(null,ALLOW_TAG);
  out.attribute(null,ALLOW_ATT_CALLS,Boolean.toString(allowCalls));
  out.attribute(null,ALLOW_ATT_MESSAGES,Boolean.toString(allowMessages));
  out.attribute(null,ALLOW_ATT_EVENTS,Boolean.toString(allowEvents));
  out.attribute(null,ALLOW_ATT_FROM,Integer.toString(allowFrom));
  out.endTag(null,ALLOW_TAG);
  out.startTag(null,SLEEP_TAG);
  if (sleepMode != null) {
    out.attribute(null,SLEEP_ATT_MODE,sleepMode);
  }
  out.attribute(null,SLEEP_ATT_START_HR,Integer.toString(sleepStartHour));
  out.attribute(null,SLEEP_ATT_START_MIN,Integer.toString(sleepStartMinute));
  out.attribute(null,SLEEP_ATT_END_HR,Integer.toString(sleepEndHour));
  out.attribute(null,SLEEP_ATT_END_MIN,Integer.toString(sleepEndMinute));
  out.endTag(null,SLEEP_TAG);
  if (conditionComponents != null && conditionIds != null && conditionComponents.length == conditionIds.length) {
    for (int i=0; i < conditionComponents.length; i++) {
      out.startTag(null,CONDITION_TAG);
      out.attribute(null,CONDITION_ATT_COMPONENT,conditionComponents[i].flattenToString());
      out.attribute(null,CONDITION_ATT_ID,conditionIds[i].toString());
      out.endTag(null,CONDITION_TAG);
    }
  }
  if (exitCondition != null && exitConditionComponent != null) {
    out.startTag(null,EXIT_CONDITION_TAG);
    out.attribute(null,EXIT_CONDITION_ATT_COMPONENT,exitConditionComponent.flattenToString());
    writeConditionXml(exitCondition,out);
    out.endTag(null,EXIT_CONDITION_TAG);
  }
  out.endTag(null,ZEN_TAG);
}
