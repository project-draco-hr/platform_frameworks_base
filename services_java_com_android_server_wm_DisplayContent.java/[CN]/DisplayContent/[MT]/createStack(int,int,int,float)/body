{
  TaskStack newStack=null;
  if (mStackBoxes.isEmpty()) {
    StackBox newBox=new StackBox(this,new Rect(0,0,mDisplayInfo.logicalWidth,mDisplayInfo.logicalHeight));
    mStackBoxes.add(newBox);
    newStack=new TaskStack(stackId,newBox);
    newBox.mStack=newStack;
  }
 else {
    int stackBoxNdx;
    for (stackBoxNdx=mStackBoxes.size() - 1; stackBoxNdx >= 0; --stackBoxNdx) {
      final StackBox box=mStackBoxes.get(stackBoxNdx);
      if (position == StackBox.TASK_STACK_GOES_OVER || position == StackBox.TASK_STACK_GOES_UNDER) {
        final TaskStack stack=box.mStack;
        if (stack != null && stack.mStackId == relativeStackId) {
          final int offset=position == StackBox.TASK_STACK_GOES_OVER ? 1 : 0;
          StackBox newBox=new StackBox(this,box.mBounds);
          newStack=new TaskStack(stackId,newBox);
          newBox.mStack=newStack;
          mStackBoxes.add(stackBoxNdx + offset,newBox);
          break;
        }
      }
 else {
        newStack=box.split(stackId,relativeStackId,position,weight);
        if (newStack != null) {
          break;
        }
      }
    }
    if (stackBoxNdx >= 0) {
      throw new IllegalArgumentException("createStack: stackId " + stackId + " not found.");
    }
  }
  return newStack;
}
