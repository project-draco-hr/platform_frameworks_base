{
  mTmpTasks.clear();
  final int numUserStacks=mUserStacks.size();
  for (int i=0; i < numUserStacks; ++i) {
    UserStacks userStacks=mUserStacks.valueAt(i);
    ArrayList<TaskStack> stacks=userStacks.mSavedStackHistory;
    final int numStacks=stacks.size();
    for (int stackNdx=0; stackNdx < numStacks; ++stackNdx) {
      TaskStack stack=stacks.get(stackNdx);
      if (stack != mHomeStack) {
        if (WindowManagerService.DEBUG_LAYERS)         Slog.i(TAG,"getTasks: mStackHistory=" + mStackHistory);
        mTmpTasks.addAll(stack.getTasks());
      }
    }
  }
  final int numStacks=mStackHistory.size();
  for (int stackNdx=0; stackNdx < numStacks; ++stackNdx) {
    mTmpTasks.addAll(mStackHistory.get(stackNdx).getTasks());
  }
  if (WindowManagerService.DEBUG_LAYERS)   Slog.i(TAG,"getTasks: mStackHistory=" + mStackHistory);
  return mTmpTasks;
}
