{
  Intent intent=getIntent();
  Parcelable targetParcelable=intent.getParcelableExtra(Intent.EXTRA_INTENT);
  if (!(targetParcelable instanceof Intent)) {
    Log.w("UsbResolverActivity","Target is not an intent: " + targetParcelable);
    finish();
    return;
  }
  Intent target=(Intent)targetParcelable;
  ArrayList<ResolveInfo> rList=intent.getParcelableArrayListExtra(EXTRA_RESOLVE_INFOS);
  CharSequence title=getResources().getText(com.android.internal.R.string.chooseUsbActivity);
  super.onCreate(savedInstanceState,target,title,null,rList,true,true);
  mDevice=(UsbDevice)target.getParcelableExtra(UsbManager.EXTRA_DEVICE);
  if (mDevice != null) {
    mDisconnectedReceiver=new UsbDisconnectedReceiver(this,mDevice);
  }
 else {
    mAccessory=(UsbAccessory)target.getParcelableExtra(UsbManager.EXTRA_ACCESSORY);
    if (mAccessory == null) {
      Log.e(TAG,"no device or accessory");
      finish();
      return;
    }
    mDisconnectedReceiver=new UsbDisconnectedReceiver(this,mAccessory);
  }
}
