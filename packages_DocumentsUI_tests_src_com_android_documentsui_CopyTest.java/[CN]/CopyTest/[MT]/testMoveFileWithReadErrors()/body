{
  String srcPath="/test0.txt";
  Uri testFile=mStorage.createFile(SRC,srcPath,"text/plain","The five boxing wizards jump quickly".getBytes());
  assertDstFileCountEquals(0);
  mStorage.simulateReadErrorsForFile(testFile);
  Intent moveIntent=createCopyIntent(Lists.newArrayList(testFile));
  moveIntent.putExtra(CopyService.EXTRA_TRANSFER_MODE,CopyService.TRANSFER_MODE_MOVE);
  startService(moveIntent);
  try {
    mResolver.waitForChanges(4);
  }
 catch (  TimeoutException e) {
    return;
  }
 finally {
    assertDstFileCountEquals(0);
    assertExists(SRC,srcPath);
  }
  fail("Extra file operations were detected");
}
