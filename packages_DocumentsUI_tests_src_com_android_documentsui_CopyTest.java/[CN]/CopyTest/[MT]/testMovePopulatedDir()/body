{
  String testContent[]={"The five boxing wizards jump quickly","The quick brown fox jumps over the lazy dog","Jackdaws love my big sphinx of quartz"};
  String srcDir="/testdir";
  String srcFiles[]={srcDir + "/test0.txt",srcDir + "/test1.txt",srcDir + "/test2.txt"};
  Uri testDir=mStorage.createFile(SRC,srcDir,DocumentsContract.Document.MIME_TYPE_DIR,null);
  mStorage.createFile(SRC,srcFiles[0],"text/plain",testContent[0].getBytes());
  mStorage.createFile(SRC,srcFiles[1],"text/plain",testContent[1].getBytes());
  mStorage.createFile(SRC,srcFiles[2],"text/plain",testContent[2].getBytes());
  Intent moveIntent=createCopyIntent(Lists.newArrayList(testDir));
  moveIntent.putExtra(CopyService.EXTRA_TRANSFER_MODE,CopyService.TRANSFER_MODE_MOVE);
  startService(moveIntent);
  mResolver.waitForChanges(11);
  File dst=mStorage.getFile(DST,srcDir);
  assertTrue(dst.isDirectory());
  for (int i=0; i < testContent.length; ++i) {
    byte[] dstContent=readFile(DST,srcFiles[i]);
    MoreAsserts.assertEquals("Copied file contents differ",testContent[i].getBytes(),dstContent);
  }
  assertDoesNotExist(SRC,srcDir);
  for (  String srcFile : srcFiles) {
    assertDoesNotExist(SRC,srcFile);
  }
}
