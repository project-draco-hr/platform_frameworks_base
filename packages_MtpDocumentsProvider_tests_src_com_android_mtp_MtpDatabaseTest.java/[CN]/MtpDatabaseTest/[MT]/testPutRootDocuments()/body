{
  mDatabase.getMapper().startAddingDocuments("deviceDocId");
  mDatabase.getMapper().putRootDocuments("deviceDocId",resources,new MtpRoot[]{new MtpRoot(0,1,"Device","Storage",1000,2000,""),new MtpRoot(0,2,"Device","Storage",2000,4000,""),new MtpRoot(0,3,"Device","/@#%&<>Storage",3000,6000,"")});
{
    final Cursor cursor=mDatabase.queryRootDocuments(COLUMN_NAMES);
    assertEquals(3,cursor.getCount());
    cursor.moveToNext();
    assertEquals(1,getInt(cursor,COLUMN_DOCUMENT_ID));
    assertEquals(0,getInt(cursor,COLUMN_DEVICE_ID));
    assertEquals(1,getInt(cursor,COLUMN_STORAGE_ID));
    assertTrue(isNull(cursor,COLUMN_OBJECT_HANDLE));
    assertEquals(DocumentsContract.Document.MIME_TYPE_DIR,getString(cursor,COLUMN_MIME_TYPE));
    assertEquals("Device Storage",getString(cursor,COLUMN_DISPLAY_NAME));
    assertTrue(isNull(cursor,COLUMN_SUMMARY));
    assertTrue(isNull(cursor,COLUMN_LAST_MODIFIED));
    assertEquals(R.drawable.ic_root_mtp,getInt(cursor,COLUMN_ICON));
    assertEquals(0,getInt(cursor,COLUMN_FLAGS));
    assertEquals(1000,getInt(cursor,COLUMN_SIZE));
    assertEquals(MtpDatabaseConstants.DOCUMENT_TYPE_STORAGE,getInt(cursor,COLUMN_DOCUMENT_TYPE));
    cursor.moveToNext();
    assertEquals(2,getInt(cursor,COLUMN_DOCUMENT_ID));
    assertEquals("Device Storage",getString(cursor,COLUMN_DISPLAY_NAME));
    cursor.moveToNext();
    assertEquals(3,getInt(cursor,COLUMN_DOCUMENT_ID));
    assertEquals("Device /@#%&<>Storage",getString(cursor,COLUMN_DISPLAY_NAME));
    cursor.close();
  }
{
    final Cursor cursor=mDatabase.queryRoots(new String[]{Root.COLUMN_ROOT_ID,Root.COLUMN_FLAGS,Root.COLUMN_ICON,Root.COLUMN_TITLE,Root.COLUMN_SUMMARY,Root.COLUMN_DOCUMENT_ID,Root.COLUMN_AVAILABLE_BYTES,Root.COLUMN_CAPACITY_BYTES});
    assertEquals(3,cursor.getCount());
    cursor.moveToNext();
    assertEquals(1,cursor.getInt(0));
    assertEquals(Root.FLAG_SUPPORTS_IS_CHILD | Root.FLAG_SUPPORTS_CREATE,cursor.getInt(1));
    assertEquals(R.drawable.ic_root_mtp,cursor.getInt(2));
    assertEquals("Device Storage",cursor.getString(3));
    assertTrue(cursor.isNull(4));
    assertEquals(1,cursor.getInt(5));
    assertEquals(1000,cursor.getInt(6));
    assertEquals(2000,cursor.getInt(7));
    cursor.moveToNext();
    assertEquals(2,cursor.getInt(0));
    assertEquals(Root.FLAG_SUPPORTS_IS_CHILD | Root.FLAG_SUPPORTS_CREATE,cursor.getInt(1));
    assertEquals(R.drawable.ic_root_mtp,cursor.getInt(2));
    assertEquals("Device Storage",cursor.getString(3));
    assertTrue(cursor.isNull(4));
    assertEquals(2,cursor.getInt(5));
    assertEquals(2000,cursor.getInt(6));
    assertEquals(4000,cursor.getInt(7));
    cursor.moveToNext();
    assertEquals(3,cursor.getInt(0));
    assertEquals(Root.FLAG_SUPPORTS_IS_CHILD | Root.FLAG_SUPPORTS_CREATE,cursor.getInt(1));
    assertEquals(R.drawable.ic_root_mtp,cursor.getInt(2));
    assertEquals("Device /@#%&<>Storage",cursor.getString(3));
    assertTrue(cursor.isNull(4));
    assertEquals(3,cursor.getInt(5));
    assertEquals(3000,cursor.getInt(6));
    assertEquals(6000,cursor.getInt(7));
    cursor.close();
  }
}
