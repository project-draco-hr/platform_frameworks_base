{
  mDatabase.getMapper().startAddingDocuments("deviceDocId");
  mDatabase.getMapper().putStorageDocuments("deviceDocId",resources,new MtpRoot[]{new MtpRoot(0,100,"Device","Storage A",0,0,"")});
  mDatabase.getMapper().stopAddingDocuments("deviceDocId");
  mDatabase.getMapper().startAddingDocuments("1");
  mDatabase.getMapper().putChildDocuments(0,"1",new MtpObjectInfo[]{createDocument(200,"dir",MtpConstants.FORMAT_ASSOCIATION,1024)});
  mDatabase.getMapper().stopAddingDocuments("1");
  mDatabase.getMapper().startAddingDocuments("2");
  mDatabase.getMapper().putChildDocuments(0,"2",new MtpObjectInfo[]{createDocument(200,"note.txt",MtpConstants.FORMAT_TEXT,1024)});
  mDatabase.getMapper().stopAddingDocuments("2");
  mDatabase.deleteDocument("2");
{
    final Cursor cursor=mDatabase.queryChildDocuments(strings(Document.COLUMN_DOCUMENT_ID),"1");
    assertEquals(0,cursor.getCount());
    cursor.close();
  }
{
    final Cursor cursor=mDatabase.queryDocument("3",strings(Document.COLUMN_DOCUMENT_ID));
    assertEquals(0,cursor.getCount());
    cursor.close();
  }
}
