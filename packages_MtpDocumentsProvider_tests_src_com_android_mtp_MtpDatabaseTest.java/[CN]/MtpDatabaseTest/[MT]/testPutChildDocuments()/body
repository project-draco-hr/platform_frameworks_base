{
  addTestDevice();
  addTestStorage("1");
  mDatabase.getMapper().startAddingDocuments("2");
  mDatabase.getMapper().putChildDocuments(0,"2",OPERATIONS_SUPPORTED,new MtpObjectInfo[]{createDocument(100,"note.txt",MtpConstants.FORMAT_TEXT,1024),createDocument(101,"image.jpg",MtpConstants.FORMAT_EXIF_JPEG,2 * 1024 * 1024),createDocument(102,"music.mp3",MtpConstants.FORMAT_MP3,3 * 1024 * 1024)},new long[]{1024L,2L * 1024L * 1024L,3L * 1024L * 1024L});
  final Cursor cursor=mDatabase.queryChildDocuments(COLUMN_NAMES,"2");
  assertEquals(3,cursor.getCount());
  cursor.moveToNext();
  assertEquals(3,getInt(cursor,COLUMN_DOCUMENT_ID));
  assertEquals(0,getInt(cursor,COLUMN_DEVICE_ID));
  assertEquals(0,getInt(cursor,COLUMN_STORAGE_ID));
  assertEquals(100,getInt(cursor,COLUMN_OBJECT_HANDLE));
  assertEquals("text/plain",getString(cursor,COLUMN_MIME_TYPE));
  assertEquals("note.txt",getString(cursor,COLUMN_DISPLAY_NAME));
  assertTrue(isNull(cursor,COLUMN_SUMMARY));
  assertTrue(isNull(cursor,COLUMN_LAST_MODIFIED));
  assertTrue(isNull(cursor,COLUMN_ICON));
  assertEquals(COLUMN_FLAGS,DocumentsContract.Document.FLAG_SUPPORTS_DELETE | DocumentsContract.Document.FLAG_SUPPORTS_WRITE,cursor.getInt(9));
  assertEquals(1024,getInt(cursor,COLUMN_SIZE));
  assertEquals(MtpDatabaseConstants.DOCUMENT_TYPE_OBJECT,getInt(cursor,COLUMN_DOCUMENT_TYPE));
  cursor.moveToNext();
  assertEquals(4,getInt(cursor,COLUMN_DOCUMENT_ID));
  assertEquals(0,getInt(cursor,COLUMN_DEVICE_ID));
  assertEquals(0,getInt(cursor,COLUMN_STORAGE_ID));
  assertEquals(101,getInt(cursor,COLUMN_OBJECT_HANDLE));
  assertEquals("image/jpeg",getString(cursor,COLUMN_MIME_TYPE));
  assertEquals("image.jpg",getString(cursor,COLUMN_DISPLAY_NAME));
  assertTrue(isNull(cursor,COLUMN_SUMMARY));
  assertTrue(isNull(cursor,COLUMN_LAST_MODIFIED));
  assertTrue(isNull(cursor,COLUMN_ICON));
  assertEquals(COLUMN_FLAGS,DocumentsContract.Document.FLAG_SUPPORTS_DELETE | DocumentsContract.Document.FLAG_SUPPORTS_WRITE,cursor.getInt(9));
  assertEquals(2 * 1024 * 1024,getInt(cursor,COLUMN_SIZE));
  assertEquals(MtpDatabaseConstants.DOCUMENT_TYPE_OBJECT,getInt(cursor,COLUMN_DOCUMENT_TYPE));
  cursor.moveToNext();
  assertEquals(5,getInt(cursor,COLUMN_DOCUMENT_ID));
  assertEquals(0,getInt(cursor,COLUMN_DEVICE_ID));
  assertEquals(0,getInt(cursor,COLUMN_STORAGE_ID));
  assertEquals(102,getInt(cursor,COLUMN_OBJECT_HANDLE));
  assertEquals("audio/mpeg",getString(cursor,COLUMN_MIME_TYPE));
  assertEquals("music.mp3",getString(cursor,COLUMN_DISPLAY_NAME));
  assertTrue(isNull(cursor,COLUMN_SUMMARY));
  assertTrue(isNull(cursor,COLUMN_LAST_MODIFIED));
  assertTrue(isNull(cursor,COLUMN_ICON));
  assertEquals(COLUMN_FLAGS,DocumentsContract.Document.FLAG_SUPPORTS_DELETE | DocumentsContract.Document.FLAG_SUPPORTS_WRITE,cursor.getInt(9));
  assertEquals(3 * 1024 * 1024,getInt(cursor,COLUMN_SIZE));
  assertEquals(MtpDatabaseConstants.DOCUMENT_TYPE_OBJECT,getInt(cursor,COLUMN_DOCUMENT_TYPE));
  cursor.close();
}
