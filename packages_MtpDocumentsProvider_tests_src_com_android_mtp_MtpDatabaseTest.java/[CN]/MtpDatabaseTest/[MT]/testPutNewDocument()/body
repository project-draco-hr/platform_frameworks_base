{
  mDatabase.getMapper().startAddingDocuments(null);
  mDatabase.getMapper().putRootDocuments(0,resources,new MtpRoot[]{new MtpRoot(0,100,"Device","Storage A",0,0,"")});
  mDatabase.getMapper().stopAddingDocuments(null);
  assertEquals("2",mDatabase.putNewDocument(0,"1",createDocument(200,"note.txt",MtpConstants.FORMAT_TEXT,1024)));
{
    final Cursor cursor=mDatabase.queryChildDocuments(strings(Document.COLUMN_DOCUMENT_ID),"1");
    assertEquals(1,cursor.getCount());
    cursor.moveToNext();
    assertEquals("2",cursor.getString(0));
    cursor.close();
  }
  mDatabase.getMapper().clearMapping();
  mDatabase.getMapper().startAddingDocuments("1");
  mDatabase.putNewDocument(0,"1",createDocument(201,"note.txt",MtpConstants.FORMAT_TEXT,1024));
  mDatabase.getMapper().stopAddingDocuments("1");
{
    final Cursor cursor=mDatabase.queryChildDocuments(strings(Document.COLUMN_DOCUMENT_ID),"1");
    assertEquals(1,cursor.getCount());
    cursor.moveToNext();
    assertEquals("3",cursor.getString(0));
    cursor.close();
  }
}
