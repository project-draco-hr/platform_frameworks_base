{
  activity.setCallback(new TestShellCallback(){
    public void finished(){
synchronized (LoadTestsAutoTest.this) {
        mFinished=true;
        LoadTestsAutoTest.this.notifyAll();
      }
    }
    public void timedOut(    String url){
    }
  }
);
  mFinished=false;
  Intent intent=new Intent(Intent.ACTION_VIEW);
  intent.setClass(activity,TestShellActivity.class);
  intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
  intent.putExtra(TestShellActivity.TEST_URL,url);
  intent.putExtra(TestShellActivity.TIMEOUT_IN_MILLIS,timeout);
  intent.putExtra(TestShellActivity.RESULT_FILE,LOAD_TEST_RESULT);
  intent.putExtra(TestShellActivity.GET_DRAW_TIME,getDrawTime);
  if (saveImagePath != null)   intent.putExtra(TestShellActivity.SAVE_IMAGE,saveImagePath);
  activity.startActivity(intent);
synchronized (this) {
    while (!mFinished) {
      try {
        this.wait();
      }
 catch (      InterruptedException e) {
      }
    }
  }
}
