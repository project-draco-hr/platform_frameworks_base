{
  boolean invalidateSelf=false;
  final GradientState s=mGradientState;
  final ColorStateList stateList=s.mColorStateList;
  if (stateList != null) {
    final int newColor=stateList.getColorForState(stateSet,0);
    final int oldColor=mFillPaint.getColor();
    if (oldColor != newColor) {
      mFillPaint.setColor(newColor);
      invalidateSelf|=true;
    }
  }
  final ColorStateList strokeStateList=s.mStrokeColorStateList;
  if (strokeStateList != null) {
    final int newColor=stateList.getColorForState(stateSet,0);
    final int oldColor=mStrokePaint.getColor();
    if (oldColor != newColor) {
      mStrokePaint.setColor(newColor);
      invalidateSelf|=true;
    }
  }
  if (invalidateSelf) {
    invalidateSelf();
    return true;
  }
  return false;
}
