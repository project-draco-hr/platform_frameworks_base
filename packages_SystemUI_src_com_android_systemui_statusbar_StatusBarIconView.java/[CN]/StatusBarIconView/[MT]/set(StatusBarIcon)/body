{
  final boolean iconEquals=mIcon != null && streq(mIcon.iconPackage,icon.iconPackage) && mIcon.iconId == icon.iconId;
  final boolean levelEquals=iconEquals && mIcon.iconLevel == icon.iconLevel;
  final boolean visibilityEquals=mIcon != null && mIcon.visible == icon.visible;
  if (!iconEquals) {
    Drawable drawable=getIcon(icon);
    if (drawable == null) {
      Slog.w(PhoneStatusBarService.TAG,"No icon for slot " + mSlot);
      return false;
    }
    setImageDrawable(drawable);
  }
  if (!levelEquals) {
    setImageLevel(icon.iconLevel);
  }
  if (!visibilityEquals) {
    setVisibility(icon.visible ? VISIBLE : GONE);
  }
  mIcon=icon.clone();
  return true;
}
