{
  Resources r=null;
  if (icon.iconPackage != null) {
    try {
      int userId=icon.user.getIdentifier();
      if (userId == UserHandle.USER_ALL) {
        userId=UserHandle.USER_OWNER;
      }
      r=context.getPackageManager().getResourcesForApplicationAsUser(icon.iconPackage,userId);
    }
 catch (    PackageManager.NameNotFoundException ex) {
      Log.e(TAG,"Icon package not found: " + icon.iconPackage);
      return null;
    }
  }
 else {
    r=context.getResources();
  }
  if (icon.iconId == 0) {
    return null;
  }
  try {
    return r.getDrawable(icon.iconId);
  }
 catch (  RuntimeException e) {
    Log.w(TAG,"Icon not found in " + (icon.iconPackage != null ? icon.iconId : "<system>") + ": "+ Integer.toHexString(icon.iconId));
  }
  return null;
}
