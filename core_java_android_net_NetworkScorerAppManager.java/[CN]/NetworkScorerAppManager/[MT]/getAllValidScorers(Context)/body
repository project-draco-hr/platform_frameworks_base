{
  if (UserHandle.getCallingUserId() != UserHandle.USER_SYSTEM) {
    return Collections.emptyList();
  }
  List<NetworkScorerAppData> scorers=new ArrayList<>();
  PackageManager pm=context.getPackageManager();
  List<ResolveInfo> receivers=pm.queryBroadcastReceiversAsUser(SCORE_INTENT,0,UserHandle.USER_SYSTEM);
  for (  ResolveInfo receiver : receivers) {
    final ActivityInfo receiverInfo=receiver.activityInfo;
    if (receiverInfo == null) {
      continue;
    }
    if (!permission.BROADCAST_NETWORK_PRIVILEGED.equals(receiverInfo.permission)) {
      continue;
    }
    if (pm.checkPermission(permission.SCORE_NETWORKS,receiverInfo.packageName) != PackageManager.PERMISSION_GRANTED) {
      continue;
    }
    String configurationActivityClassName=null;
    Intent intent=new Intent(NetworkScoreManager.ACTION_CUSTOM_ENABLE);
    intent.setPackage(receiverInfo.packageName);
    List<ResolveInfo> configActivities=pm.queryIntentActivities(intent,0);
    if (configActivities != null && !configActivities.isEmpty()) {
      ActivityInfo activityInfo=configActivities.get(0).activityInfo;
      if (activityInfo != null) {
        configurationActivityClassName=activityInfo.name;
      }
    }
    String scoringServiceClassName=null;
    Intent serviceIntent=new Intent(NetworkScoreManager.ACTION_SCORE_NETWORKS);
    serviceIntent.setPackage(receiverInfo.packageName);
    ResolveInfo resolveServiceInfo=pm.resolveService(serviceIntent,0);
    if (resolveServiceInfo != null && resolveServiceInfo.serviceInfo != null) {
      scoringServiceClassName=resolveServiceInfo.serviceInfo.name;
    }
    scorers.add(new NetworkScorerAppData(receiverInfo.packageName,receiverInfo.applicationInfo.uid,receiverInfo.loadLabel(pm),configurationActivityClassName,scoringServiceClassName));
  }
  return scorers;
}
