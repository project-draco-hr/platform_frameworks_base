{
  InputMethodManager imm=InputMethodManager.peekInstance();
  if (imm != null && imm.isActive(this)) {
    Spannable sp=(Spannable)getText();
    int candStart=EditableInputConnection.getComposingSpanStart(sp);
    int candEnd=EditableInputConnection.getComposingSpanEnd(sp);
    imm.updateSelection(this,selStart,selEnd,candStart,candEnd);
  }
  if (!mFromWebKit && !mFromFocusChange && !mFromSetInputType&& mWebView != null) {
    if (DebugFlags.WEB_TEXT_VIEW) {
      Log.v(LOGTAG,"onSelectionChanged selStart=" + selStart + " selEnd="+ selEnd);
    }
    mWebView.setSelection(selStart,selEnd);
  }
}
