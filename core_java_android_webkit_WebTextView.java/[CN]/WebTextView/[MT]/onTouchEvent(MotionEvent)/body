{
  int initialScrollX=-1;
  int initialScrollY=-1;
  int selectionStart=-1;
  int selectionEnd=-1;
  int action=event.getAction();
  if (action == MotionEvent.ACTION_MOVE) {
    Spannable buffer=getText();
    initialScrollX=Touch.getInitialScrollX(this,buffer);
    initialScrollY=Touch.getInitialScrollY(this,buffer);
    selectionStart=Selection.getSelectionStart(buffer);
    selectionEnd=Selection.getSelectionEnd(buffer);
  }
  super.onTouchEvent(event);
switch (action) {
case MotionEvent.ACTION_DOWN:
    mDragStartX=event.getX();
  mDragStartY=event.getY();
mDragStartTime=event.getEventTime();
mDragSent=false;
break;
case MotionEvent.ACTION_MOVE:
if (mScrollX != initialScrollX || mScrollY != initialScrollY) {
return true;
}
if (Selection.getSelectionStart(getText()) != selectionStart || Selection.getSelectionEnd(getText()) != selectionEnd) {
return true;
}
if (mWebView != null) {
if (!mDragSent) {
mWebView.initiateTextFieldDrag(mDragStartX,mDragStartY,mDragStartTime);
mDragSent=true;
}
return mWebView.textFieldDrag(event);
}
return false;
case MotionEvent.ACTION_UP:
case MotionEvent.ACTION_CANCEL:
if (mWebView != null && mDragSent) {
mWebView.onTouchEvent(event);
}
break;
default :
break;
}
return true;
}
