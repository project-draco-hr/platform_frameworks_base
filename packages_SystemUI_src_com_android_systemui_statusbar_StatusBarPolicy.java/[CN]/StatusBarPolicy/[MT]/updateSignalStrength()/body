{
  int iconLevel=-1;
  int[] iconList;
  if (mServiceState == null || (!hasService() && !mServiceState.isEmergencyOnly())) {
    if (Settings.System.getInt(mContext.getContentResolver(),Settings.System.AIRPLANE_MODE_ON,0) == 1) {
      mPhoneSignalIconId=R.drawable.stat_sys_signal_flightmode;
    }
 else {
      mPhoneSignalIconId=R.drawable.stat_sys_signal_null;
    }
    mService.setIcon("phone_signal",mPhoneSignalIconId,0);
    return;
  }
  if (!isCdma()) {
    int asu=mSignalStrength.getGsmSignalStrength();
    if (asu <= 2 || asu == 99)     iconLevel=0;
 else     if (asu >= 12)     iconLevel=4;
 else     if (asu >= 8)     iconLevel=3;
 else     if (asu >= 5)     iconLevel=2;
 else     iconLevel=1;
    if (mPhone.isNetworkRoaming()) {
      iconList=sSignalImages_r[mInetCondition];
    }
 else {
      iconList=sSignalImages[mInetCondition];
    }
  }
 else {
    iconList=sSignalImages[mInetCondition];
    boolean alwaysUseCdmaRssi=mContext.getResources().getBoolean(com.android.internal.R.bool.config_alwaysUseCdmaRssi);
    if ((mPhoneState == TelephonyManager.CALL_STATE_IDLE) && isEvdo() && !alwaysUseCdmaRssi) {
      iconLevel=getEvdoLevel();
      if (false) {
        Slog.d(TAG,"use Evdo level=" + iconLevel + " to replace Cdma Level="+ getCdmaLevel());
      }
    }
 else {
      iconLevel=getCdmaLevel();
    }
  }
  mPhoneSignalIconId=iconList[iconLevel];
  mService.setIcon("phone_signal",mPhoneSignalIconId,0);
}
