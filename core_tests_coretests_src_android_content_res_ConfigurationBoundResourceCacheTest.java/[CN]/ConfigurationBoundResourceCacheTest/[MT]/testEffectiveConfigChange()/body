{
  TypedValue changingValue=new TypedValue();
  long key=4L;
  final Resources res=getActivity().getResources();
  res.getValue(R.dimen.resource_cache_test_orientation_dependent,changingValue,true);
  float changingDim=TypedValue.complexToDimension(changingValue.data,res.getDisplayMetrics());
  mCache.put(key,getActivity().getTheme(),new DummyFloatConstantState(changingDim,changingValue.changingConfigurations));
  final Configuration cfg=res.getConfiguration();
  Configuration newCnf=new Configuration(cfg);
  newCnf.orientation=cfg.orientation == Configuration.ORIENTATION_LANDSCAPE ? Configuration.ORIENTATION_PORTRAIT : Configuration.ORIENTATION_LANDSCAPE;
  int changes=calcConfigChanges(res,newCnf);
  assertEquals(changingDim,mCache.getInstance(key,res,getActivity().getTheme()));
  mCache.onConfigurationChange(changes);
  assertNull(mCache.get(key,getActivity().getTheme()));
}
