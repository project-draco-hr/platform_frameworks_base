{
  TypedValue staticValue=new TypedValue();
  long key=3L;
  final Resources res=getActivity().getResources();
  res.getValue(R.dimen.resource_cache_test_generic,staticValue,true);
  float staticDim=TypedValue.complexToDimension(staticValue.data,res.getDisplayMetrics());
  mCache.put(key,getActivity().getTheme(),new DummyFloatConstantState(staticDim,staticValue.changingConfigurations));
  final Configuration cfg=res.getConfiguration();
  Configuration newCnf=new Configuration(cfg);
  newCnf.orientation=cfg.orientation == Configuration.ORIENTATION_LANDSCAPE ? Configuration.ORIENTATION_PORTRAIT : Configuration.ORIENTATION_LANDSCAPE;
  int changes=calcConfigChanges(res,newCnf);
  assertEquals(staticDim,mCache.getInstance(key,res,getActivity().getTheme()));
  mCache.onConfigurationChange(changes);
  assertEquals(staticDim,mCache.getInstance(key,res,getActivity().getTheme()));
}
