{
  Canvas canvas=mSurfaceHolder.lockCanvas();
  Bitmap bitmap=image.toBitmap();
  Rect sourceRect=new Rect(0,0,bitmap.getWidth(),bitmap.getHeight());
  Rect surfaceRect=mSurfaceHolder.getSurfaceFrame();
  RectF targetRect=getTargetRect(sourceRect,surfaceRect);
  canvas.drawColor(Color.BLACK);
  if (targetRect.width() > 0 && targetRect.height() > 0) {
    canvas.scale(surfaceRect.width(),surfaceRect.height());
    canvas.drawBitmap(bitmap,sourceRect,targetRect,new Paint());
  }
  mSurfaceHolder.unlockCanvasAndPost(canvas);
}
