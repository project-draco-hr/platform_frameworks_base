{
  Log.d(LOG_TAG,"scrollSwipe (" + downX + ", "+ downY+ ", "+ upX+ ", "+ upY+ ", "+ steps+ ")");
  Runnable command=new Runnable(){
    @Override public void run(){
      swipe(downX,downY,upX,upY,steps);
    }
  }
;
  ArrayList<AccessibilityEvent> events=new ArrayList<AccessibilityEvent>();
  runAndWaitForEvents(command,new EventCollectingPredicate(AccessibilityEvent.TYPE_VIEW_SCROLLED,events),Configurator.getInstance().getScrollAcknowledgmentTimeout());
  AccessibilityEvent event=getLastMatchingEvent(events,AccessibilityEvent.TYPE_VIEW_SCROLLED);
  if (event == null) {
    recycleAccessibilityEvents(events);
    return false;
  }
  boolean foundEnd=false;
  if (event.getFromIndex() != -1 && event.getToIndex() != -1 && event.getItemCount() != -1) {
    foundEnd=event.getFromIndex() == 0 || (event.getItemCount() - 1) == event.getToIndex();
    Log.d(LOG_TAG,"scrollSwipe reached scroll end: " + foundEnd);
  }
 else   if (event.getScrollX() != -1 && event.getScrollY() != -1) {
    if (downX == upX) {
      foundEnd=event.getScrollY() == 0 || event.getScrollY() == event.getMaxScrollY();
      Log.d(LOG_TAG,"Vertical scrollSwipe reached scroll end: " + foundEnd);
    }
 else     if (downY == upY) {
      foundEnd=event.getScrollX() == 0 || event.getScrollX() == event.getMaxScrollX();
      Log.d(LOG_TAG,"Horizontal scrollSwipe reached scroll end: " + foundEnd);
    }
  }
  recycleAccessibilityEvents(events);
  return !foundEnd;
}
