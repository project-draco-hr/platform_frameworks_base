{
  if (isOpaque()) {
    throw new UnsupportedOperationException(NOT_HIERARCHICAL);
  }
  if (key == null) {
    throw new NullPointerException("key");
  }
  final String query=getEncodedQuery();
  if (query == null) {
    return null;
  }
  final String encodedKey=encode(key,null);
  final int length=query.length();
  int start=0;
  do {
    int nextAmpersand=query.indexOf('&',start);
    int end=nextAmpersand != -1 ? nextAmpersand : length;
    int separator=query.indexOf('=',start);
    if (separator > end || separator == -1) {
      separator=end;
    }
    if (separator - start == encodedKey.length() && query.regionMatches(start,encodedKey,0,encodedKey.length())) {
      if (separator == end) {
        return "";
      }
 else {
        return decode(query.substring(separator + 1,end));
      }
    }
    if (nextAmpersand != -1) {
      start=nextAmpersand + 1;
    }
 else {
      break;
    }
  }
 while (true);
  return null;
}
