{
  int xOffset=0;
  if (!compatibilityInfo.isConfiguredExpandable()) {
    int defaultWidth;
    int defaultHeight;
switch (orientation) {
case Configuration.ORIENTATION_LANDSCAPE:
{
        defaultWidth=(int)(CompatibilityInfo.DEFAULT_PORTRAIT_HEIGHT * density);
        defaultHeight=(int)(CompatibilityInfo.DEFAULT_PORTRAIT_WIDTH * density);
        break;
      }
case Configuration.ORIENTATION_PORTRAIT:
case Configuration.ORIENTATION_SQUARE:
default :
{
      defaultWidth=(int)(CompatibilityInfo.DEFAULT_PORTRAIT_WIDTH * density);
      defaultHeight=(int)(CompatibilityInfo.DEFAULT_PORTRAIT_HEIGHT * density);
      break;
    }
case Configuration.ORIENTATION_UNDEFINED:
{
    return;
  }
}
if (defaultWidth == widthPixels && defaultHeight == heightPixels) {
compatibilityInfo.setExpandable(true);
}
 else {
compatibilityInfo.setExpandable(false);
if (defaultWidth < widthPixels) {
  xOffset=((widthPixels - defaultWidth) / 2);
  widthPixels=defaultWidth;
}
if (defaultHeight < heightPixels) {
  heightPixels=defaultHeight;
}
}
}
compatibilityInfo.setVisibleRect(xOffset,widthPixels,heightPixels);
if (compatibilityInfo.isScalingRequired()) {
float invertedRatio=compatibilityInfo.applicationInvertedScale;
density*=invertedRatio;
scaledDensity*=invertedRatio;
xdpi*=invertedRatio;
ydpi*=invertedRatio;
widthPixels*=invertedRatio;
heightPixels*=invertedRatio;
}
}
