{
  final Bundle args=getArguments();
  ComponentName name=args.getParcelable(NAME_KEY);
switch (which) {
case TOGGLE_PIN_INDEX:
    SharedPreferences sp=ChooserActivity.getPinnedSharedPrefs(getContext());
  final String key=name.flattenToString();
boolean currentVal=sp.getBoolean(name.flattenToString(),false);
if (currentVal) {
sp.edit().remove(key).apply();
}
 else {
sp.edit().putBoolean(key,true).apply();
}
getActivity().recreate();
break;
case APP_INFO_INDEX:
Intent in=new Intent().setAction(Settings.ACTION_APPLICATION_DETAILS_SETTINGS).setData(Uri.fromParts("package",name.getPackageName(),null)).addFlags(Intent.FLAG_ACTIVITY_NEW_DOCUMENT);
startActivity(in);
break;
}
dismiss();
}
