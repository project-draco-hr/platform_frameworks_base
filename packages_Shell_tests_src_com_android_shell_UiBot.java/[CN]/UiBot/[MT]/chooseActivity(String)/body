{
  boolean gotIt=mDevice.wait(Until.hasObject(By.text(name)),mTimeout);
  if (gotIt) {
    Log.v(TAG,"Found activity " + name + ", it's not default action");
    UiObject activityChooser=getVisibleObject(name);
    click(activityChooser,"activity chooser");
  }
 else {
    String text=String.format("Share with %s",name);
    Log.v(TAG,"Didn't find activity " + name + ", assuming it's the default action and search for '"+ text+ "'");
    gotIt=mDevice.wait(Until.hasObject(By.text(text)),mTimeout);
    assertTrue("did not find text '" + text + "'",gotIt);
  }
  gotIt=mDevice.wait(Until.hasObject(By.res("android","button_once")),mTimeout);
  assertTrue("'Just Once' button not visible yet",gotIt);
  UiObject justOnce=mDevice.findObject(new UiSelector().resourceId("android:id/button_once"));
  assertTrue("'Just Once' button not found",justOnce.exists());
  click(justOnce,"Just Once");
}
