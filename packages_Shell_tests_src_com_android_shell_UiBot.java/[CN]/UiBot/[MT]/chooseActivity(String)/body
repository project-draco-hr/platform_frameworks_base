{
  String shareText=String.format("Share with %s",name);
  boolean gotIt=mDevice.wait(Until.hasObject(By.text(shareText)),mTimeout);
  if (gotIt) {
    Log.v(TAG,"Found activity " + name + ", it's the default action");
  }
 else {
    Log.v(TAG,"Activity " + name + " is not default action");
    UiScrollable activitiesList=new UiScrollable(new UiSelector().scrollable(true));
    UiObject activity;
    try {
      activitiesList.scrollForward();
      activity=getVisibleObject(name);
    }
 catch (    UiObjectNotFoundException e) {
      throw new IllegalStateException("didn't find activity '" + name + "' on activities chooser",e);
    }
    click(activity,name);
  }
  gotIt=mDevice.wait(Until.hasObject(By.res("android","button_once")),mTimeout);
  assertTrue("'Just Once' button not visible yet",gotIt);
  UiObject justOnce=mDevice.findObject(new UiSelector().resourceId("android:id/button_once"));
  assertTrue("'Just Once' button not found",justOnce.exists());
  click(justOnce,"Just Once");
}
