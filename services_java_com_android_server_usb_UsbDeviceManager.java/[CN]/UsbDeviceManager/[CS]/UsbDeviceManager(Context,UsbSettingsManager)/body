{
  mContext=context;
  mContentResolver=context.getContentResolver();
  mSettingsManager=settingsManager;
  PackageManager pm=mContext.getPackageManager();
  mHasUsbAccessory=pm.hasSystemFeature(PackageManager.FEATURE_USB_ACCESSORY);
synchronized (mLock) {
    init();
    mAdbEnabled="1".equals(SystemProperties.get("persist.service.adb.enable"));
    Settings.Secure.putInt(mContentResolver,Settings.Secure.ADB_ENABLED,mAdbEnabled ? 1 : 0);
    mContentResolver.registerContentObserver(Settings.Secure.getUriFor(Settings.Secure.ADB_ENABLED),false,new AdbSettingsObserver());
    if (mConfiguration >= 0) {
      mUEventObserver.startObserving(USB_CONNECTED_MATCH);
      mUEventObserver.startObserving(USB_CONFIGURATION_MATCH);
      mUEventObserver.startObserving(USB_FUNCTIONS_MATCH);
    }
  }
}
