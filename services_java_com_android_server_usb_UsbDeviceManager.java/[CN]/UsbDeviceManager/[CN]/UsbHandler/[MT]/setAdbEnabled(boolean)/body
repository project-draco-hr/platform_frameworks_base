{
  if (enable != mAdbEnabled) {
    mAdbEnabled=enable;
    String functions;
    if (enable) {
      functions=addFunction(mCurrentFunctions,UsbManager.USB_FUNCTION_ADB);
      mDefaultFunctions=addFunction(mDefaultFunctions,UsbManager.USB_FUNCTION_ADB);
    }
 else {
      functions=removeFunction(mCurrentFunctions,UsbManager.USB_FUNCTION_ADB);
      mDefaultFunctions=removeFunction(mDefaultFunctions,UsbManager.USB_FUNCTION_ADB);
    }
    SystemProperties.set("persist.sys.usb.config",mDefaultFunctions);
    setCurrentFunctions(functions);
    updateAdbNotification(mAdbEnabled && mConnected);
  }
}
