{
  if (!mCurrentFunctions.equals(functions)) {
    if (!setUsbConfig("none") || !setUsbConfig(functions)) {
      Log.e(TAG,"Failed to switch USB configuration to " + functions);
      setUsbConfig(mCurrentFunctions);
    }
 else {
      mCurrentFunctions=functions;
    }
  }
}
