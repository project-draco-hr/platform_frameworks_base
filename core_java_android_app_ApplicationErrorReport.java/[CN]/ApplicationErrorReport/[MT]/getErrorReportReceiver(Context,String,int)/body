{
  int enabled=Settings.Secure.getInt(context.getContentResolver(),Settings.Secure.SEND_ACTION_APP_ERROR,0);
  if (enabled == 0) {
    return null;
  }
  PackageManager pm=context.getPackageManager();
  String candidate=pm.getInstallerPackageName(packageName);
  ComponentName result=getErrorReportReceiver(pm,packageName,candidate);
  if (result != null) {
    return result;
  }
  if ((appFlags & ApplicationInfo.FLAG_SYSTEM) != 0) {
    candidate=SystemProperties.get(SYSTEM_APPS_ERROR_RECEIVER_PROPERTY);
    result=getErrorReportReceiver(pm,packageName,candidate);
    if (result != null) {
      return result;
    }
  }
  candidate=SystemProperties.get(DEFAULT_ERROR_RECEIVER_PROPERTY);
  return getErrorReportReceiver(pm,packageName,candidate);
}
