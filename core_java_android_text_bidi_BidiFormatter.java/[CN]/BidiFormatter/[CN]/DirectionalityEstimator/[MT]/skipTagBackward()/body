{
  int initialCharIndex=charIndex;
  while (charIndex > 0) {
    lastChar=text.charAt(--charIndex);
    if (lastChar == '<') {
      return Character.DIRECTIONALITY_WHITESPACE;
    }
    if (lastChar == '>') {
      break;
    }
    if (lastChar == '"' || lastChar == '\'') {
      char quote=lastChar;
      while (charIndex > 0 && (lastChar=text.charAt(--charIndex)) != quote) {
      }
    }
  }
  charIndex=initialCharIndex;
  lastChar='>';
  return Character.DIRECTIONALITY_OTHER_NEUTRALS;
}
