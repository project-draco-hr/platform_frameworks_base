{
  try {
    LayoutTransition previousTransition=previousParent.getLayoutTransition();
    if (previousTransition != null) {
      previousTransition.addTransitionListener(new TransitionListener(){
        private int mChangeDisappearingCount=0;
        public void startTransition(        LayoutTransition transition,        ViewGroup container,        View view,        int transitionType){
          if (transitionType == LayoutTransition.CHANGE_DISAPPEARING) {
            mChangeDisappearingCount++;
          }
        }
        public void endTransition(        LayoutTransition transition,        ViewGroup container,        View view,        int transitionType){
          if (transitionType == LayoutTransition.CHANGE_DISAPPEARING) {
            mChangeDisappearingCount--;
          }
          if (transitionType == LayoutTransition.CHANGE_DISAPPEARING && mChangeDisappearingCount == 0) {
            if (params != null) {
              newParent.addView(movedView,index,params);
            }
 else {
              newParent.addView(movedView,index);
            }
          }
        }
      }
);
      previousParent.removeView(movedView);
      return SUCCESS.createResult();
    }
 else {
      previousParent.removeView(movedView);
      if (params != null) {
        newParent.addView(movedView,index,params);
      }
 else {
        newParent.addView(movedView,index);
      }
      return SUCCESS.createResult();
    }
  }
 catch (  UnsupportedOperationException e) {
    return ERROR_VIEWGROUP_NO_CHILDREN.createResult();
  }
}
