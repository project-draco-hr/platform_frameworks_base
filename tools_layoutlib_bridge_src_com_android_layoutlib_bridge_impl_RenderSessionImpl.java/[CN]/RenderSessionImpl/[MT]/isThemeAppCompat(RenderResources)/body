{
  if (mIsThemeAppCompat == null) {
    StyleResourceValue defaultTheme=resources.getDefaultTheme();
    boolean isThemeAppCompat=false;
    for (int i=0; i < 50; i++) {
      if (defaultTheme == null) {
        break;
      }
      if (defaultTheme.getName().startsWith("Theme.AppCompat")) {
        isThemeAppCompat=true;
        break;
      }
      defaultTheme=resources.getParent(defaultTheme);
    }
    mIsThemeAppCompat=isThemeAppCompat;
  }
  return mIsThemeAppCompat;
}
