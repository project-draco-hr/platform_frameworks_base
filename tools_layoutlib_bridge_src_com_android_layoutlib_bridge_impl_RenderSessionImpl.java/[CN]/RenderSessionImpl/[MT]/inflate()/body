{
  checkLock();
  try {
    SessionParams params=getParams();
    HardwareConfig hardwareConfig=params.getHardwareConfig();
    BridgeContext context=getContext();
    boolean isRtl=Bridge.isLocaleRtl(params.getLocale());
    int layoutDirection=isRtl ? View.LAYOUT_DIRECTION_RTL : View.LAYOUT_DIRECTION_LTR;
    ActionBarLayout actionBar=null;
    ViewGroup backgroundView=null;
    if (mWindowIsFloating || params.isForceNoDecor()) {
      backgroundView=mViewRoot=mContentRoot=new FrameLayout(context);
      mViewRoot.setLayoutDirection(layoutDirection);
    }
 else {
      if (hasSoftwareButtons() && mNavigationBarOrientation == LinearLayout.VERTICAL) {
        LinearLayout topLayout=new LinearLayout(context);
        topLayout.setLayoutDirection(layoutDirection);
        mViewRoot=topLayout;
        topLayout.setOrientation(LinearLayout.HORIZONTAL);
        try {
          NavigationBar navigationBar=createNavigationBar(context,hardwareConfig.getDensity(),isRtl,params.isRtlSupported());
          topLayout.addView(navigationBar);
        }
 catch (        XmlPullParserException e) {
        }
      }
      LinearLayout topLayout=new LinearLayout(context);
      topLayout.setOrientation(LinearLayout.VERTICAL);
      topLayout.setLayoutDirection(layoutDirection);
      if (mViewRoot == null) {
        mViewRoot=topLayout;
      }
 else {
        int topLayoutWidth=params.getHardwareConfig().getScreenWidth() - mNavigationBarSize;
        LinearLayout.LayoutParams layoutParams=new LinearLayout.LayoutParams(topLayoutWidth,LayoutParams.MATCH_PARENT);
        topLayout.setLayoutParams(layoutParams);
        if (isRtl && params.isRtlSupported()) {
          mViewRoot.addView(topLayout);
        }
 else {
          mViewRoot.addView(topLayout,0);
        }
      }
      if (mStatusBarSize > 0) {
        try {
          StatusBar statusBar=createStatusBar(context,hardwareConfig.getDensity(),layoutDirection,params.isRtlSupported());
          topLayout.addView(statusBar);
        }
 catch (        XmlPullParserException e) {
        }
      }
      LinearLayout backgroundLayout=new LinearLayout(context);
      backgroundView=backgroundLayout;
      backgroundLayout.setOrientation(LinearLayout.VERTICAL);
      LinearLayout.LayoutParams layoutParams=new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT,0);
      layoutParams.weight=1;
      backgroundLayout.setLayoutParams(layoutParams);
      topLayout.addView(backgroundLayout);
      if (mActionBarSize > 0) {
        try {
          actionBar=createActionBar(context,params);
          backgroundLayout.addView(actionBar);
          actionBar.createMenuPopup();
          mContentRoot=actionBar.getContentRoot();
        }
 catch (        XmlPullParserException e) {
        }
      }
 else       if (mTitleBarSize > 0) {
        try {
          TitleBar titleBar=createTitleBar(context,hardwareConfig.getDensity(),params.getAppLabel());
          backgroundLayout.addView(titleBar);
        }
 catch (        XmlPullParserException e) {
        }
      }
      if (mContentRoot == null) {
        mContentRoot=new FrameLayout(context);
        layoutParams=new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT,0);
        layoutParams.weight=1;
        mContentRoot.setLayoutParams(layoutParams);
        backgroundLayout.addView(mContentRoot);
      }
      if (mNavigationBarOrientation == LinearLayout.HORIZONTAL && mNavigationBarSize > 0) {
        try {
          NavigationBar navigationBar=createNavigationBar(context,hardwareConfig.getDensity(),isRtl,params.isRtlSupported());
          topLayout.addView(navigationBar);
        }
 catch (        XmlPullParserException e) {
        }
      }
    }
    Fragment_Delegate.setProjectCallback(params.getProjectCallback());
    View view=mInflater.inflate(mBlockParser,mContentRoot);
    context.popParser();
    Fragment_Delegate.setProjectCallback(null);
    AttachInfo_Accessor.setAttachInfo(mViewRoot);
    postInflateProcess(view,params.getProjectCallback());
    if (mWindowBackground != null && backgroundView != null) {
      Drawable d=ResourceHelper.getDrawable(mWindowBackground,context);
      backgroundView.setBackground(d);
    }
    return SUCCESS.createResult();
  }
 catch (  PostInflateException e) {
    return ERROR_INFLATION.createResult(e.getMessage(),e);
  }
catch (  Throwable e) {
    Throwable t=e;
    while (t.getCause() != null) {
      t=t.getCause();
    }
    return ERROR_INFLATION.createResult(t.getMessage(),t);
  }
}
