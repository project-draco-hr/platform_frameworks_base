{
  checkLock();
  try {
    SessionParams params=getParams();
    HardwareConfig hardwareConfig=params.getHardwareConfig();
    BridgeContext context=getContext();
    ViewGroup backgroundView=null;
    if (mWindowIsFloating || params.isForceNoDecor()) {
      backgroundView=mViewRoot=mContentRoot=new FrameLayout(context);
    }
 else {
      if (hasSoftwareButtons() && mNavigationBarOrientation == LinearLayout.VERTICAL) {
        LinearLayout topLayout=new LinearLayout(context);
        mViewRoot=topLayout;
        topLayout.setOrientation(LinearLayout.HORIZONTAL);
        try {
          NavigationBar navigationBar=new NavigationBar(context,hardwareConfig.getDensity(),LinearLayout.VERTICAL);
          navigationBar.setLayoutParams(new LinearLayout.LayoutParams(mNavigationBarSize,LayoutParams.MATCH_PARENT));
          topLayout.addView(navigationBar);
        }
 catch (        XmlPullParserException e) {
        }
      }
      LinearLayout topLayout=new LinearLayout(context);
      topLayout.setOrientation(LinearLayout.VERTICAL);
      if (mViewRoot == null) {
        mViewRoot=topLayout;
      }
 else {
        LinearLayout.LayoutParams layoutParams=new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.MATCH_PARENT);
        layoutParams.weight=1;
        topLayout.setLayoutParams(layoutParams);
        mViewRoot.addView(topLayout,0);
      }
      if (mStatusBarSize > 0) {
        try {
          StatusBar systemBar=new StatusBar(context,hardwareConfig.getDensity());
          systemBar.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT,mStatusBarSize));
          topLayout.addView(systemBar);
        }
 catch (        XmlPullParserException e) {
        }
      }
      LinearLayout backgroundLayout=new LinearLayout(context);
      backgroundView=backgroundLayout;
      backgroundLayout.setOrientation(LinearLayout.VERTICAL);
      LinearLayout.LayoutParams layoutParams=new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT,0);
      layoutParams.weight=1;
      backgroundLayout.setLayoutParams(layoutParams);
      topLayout.addView(backgroundLayout);
      if (mActionBarSize > 0) {
        try {
          FakeActionBar actionBar=new FakeActionBar(context,hardwareConfig.getDensity(),params.getAppLabel(),params.getAppIcon());
          actionBar.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT,mActionBarSize));
          backgroundLayout.addView(actionBar);
        }
 catch (        XmlPullParserException e) {
        }
      }
 else       if (mTitleBarSize > 0) {
        try {
          TitleBar titleBar=new TitleBar(context,hardwareConfig.getDensity(),params.getAppLabel());
          titleBar.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT,mTitleBarSize));
          backgroundLayout.addView(titleBar);
        }
 catch (        XmlPullParserException e) {
        }
      }
      mContentRoot=new FrameLayout(context);
      layoutParams=new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT,0);
      layoutParams.weight=1;
      mContentRoot.setLayoutParams(layoutParams);
      backgroundLayout.addView(mContentRoot);
      if (mNavigationBarOrientation == LinearLayout.HORIZONTAL && mNavigationBarSize > 0) {
        try {
          CustomBar navigationBar;
          if (hardwareConfig.getScreenSize() == ScreenSize.XLARGE) {
            navigationBar=new TabletSystemBar(context,hardwareConfig.getDensity());
          }
 else {
            navigationBar=new NavigationBar(context,hardwareConfig.getDensity(),LinearLayout.HORIZONTAL);
          }
          navigationBar.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT,mNavigationBarSize));
          topLayout.addView(navigationBar);
        }
 catch (        XmlPullParserException e) {
        }
      }
    }
    Fragment_Delegate.setProjectCallback(params.getProjectCallback());
    View view=mInflater.inflate(mBlockParser,mContentRoot);
    context.popParser();
    Fragment_Delegate.setProjectCallback(null);
    AttachInfo_Accessor.setAttachInfo(mViewRoot);
    postInflateProcess(view,params.getProjectCallback());
    if (mWindowBackground != null && backgroundView != null) {
      Drawable d=ResourceHelper.getDrawable(mWindowBackground,context);
      backgroundView.setBackground(d);
    }
    return SUCCESS.createResult();
  }
 catch (  PostInflateException e) {
    return ERROR_INFLATION.createResult(e.getMessage(),e);
  }
catch (  Throwable e) {
    Throwable t=e;
    while (t.getCause() != null) {
      t=t.getCause();
    }
    return ERROR_INFLATION.createResult(t.getMessage(),t);
  }
}
