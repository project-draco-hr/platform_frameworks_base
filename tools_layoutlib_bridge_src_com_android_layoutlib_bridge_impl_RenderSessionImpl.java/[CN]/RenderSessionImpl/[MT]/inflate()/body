{
  checkLock();
  try {
    SessionParams params=getParams();
    BridgeContext context=getContext();
    if (mWindowIsFloating || params.isForceNoDecor()) {
      mViewRoot=mContentRoot=new FrameLayout(context);
    }
 else {
      LinearLayout topLayout=new LinearLayout(context);
      mViewRoot=topLayout;
      topLayout.setOrientation(LinearLayout.VERTICAL);
      if (mStatusBarSize > 0) {
        try {
          PhoneSystemBar systemBar=new PhoneSystemBar(context,params.getDensity());
          systemBar.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT,mStatusBarSize));
          topLayout.addView(systemBar);
        }
 catch (        XmlPullParserException e) {
        }
      }
      if (mActionBarSize > 0) {
        try {
          FakeActionBar actionBar=new FakeActionBar(context,params.getDensity(),params.getAppLabel(),params.getAppIcon());
          actionBar.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT,mActionBarSize));
          topLayout.addView(actionBar);
        }
 catch (        XmlPullParserException e) {
        }
      }
 else       if (mTitleBarSize > 0) {
        try {
          TitleBar titleBar=new TitleBar(context,params.getDensity(),params.getAppLabel());
          titleBar.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT,mTitleBarSize));
          topLayout.addView(titleBar);
        }
 catch (        XmlPullParserException e) {
        }
      }
      mContentRoot=new FrameLayout(context);
      LinearLayout.LayoutParams layoutParams=new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT);
      layoutParams.weight=1;
      mContentRoot.setLayoutParams(layoutParams);
      topLayout.addView(mContentRoot);
      if (mSystemBarSize > 0) {
        try {
          TabletSystemBar systemBar=new TabletSystemBar(context,params.getDensity());
          systemBar.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT,mSystemBarSize));
          topLayout.addView(systemBar);
        }
 catch (        XmlPullParserException e) {
        }
      }
    }
    Fragment_Delegate.setProjectCallback(params.getProjectCallback());
    View view=mInflater.inflate(mBlockParser,mContentRoot);
    Fragment_Delegate.setProjectCallback(null);
    AttachInfo info=new AttachInfo(new BridgeWindowSession(),new BridgeWindow(),new Handler(),null);
    info.mHasWindowFocus=true;
    info.mWindowVisibility=View.VISIBLE;
    info.mInTouchMode=false;
    info.mHardwareAccelerated=false;
    mViewRoot.dispatchAttachedToWindow(info,0);
    postInflateProcess(view,params.getProjectCallback());
    if (mWindowBackground != null) {
      Drawable d=ResourceHelper.getDrawable(mWindowBackground,context);
      mContentRoot.setBackgroundDrawable(d);
    }
    return SUCCESS.createResult();
  }
 catch (  PostInflateException e) {
    return ERROR_INFLATION.createResult(e.getMessage(),e);
  }
catch (  Throwable e) {
    Throwable t=e;
    while (t.getCause() != null) {
      t=t.getCause();
    }
    return ERROR_INFLATION.createResult(t.getMessage(),t);
  }
}
