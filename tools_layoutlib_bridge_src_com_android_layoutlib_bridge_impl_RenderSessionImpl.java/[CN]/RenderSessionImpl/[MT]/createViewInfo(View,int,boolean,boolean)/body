{
  if (view == null) {
    return null;
  }
  ViewParent parent=view.getParent();
  ViewInfo result;
  if (isContentFrame) {
    int scrollX=parent != null ? ((View)parent).getScrollX() : 0;
    int scrollY=parent != null ? ((View)parent).getScrollY() : 0;
    result=new ViewInfo(view.getClass().getName(),getContext().getViewKey(view),-scrollX + view.getLeft(),-scrollY + view.getTop() + offset,-scrollX + view.getRight(),-scrollY + view.getBottom() + offset,view,view.getLayoutParams());
  }
 else {
    SystemViewInfo r=new SystemViewInfo(view.getClass().getName(),getViewKey(view),view.getLeft(),view.getTop(),view.getRight(),view.getBottom(),view,view.getLayoutParams());
    result=r;
    if (view instanceof ListMenuItemView) {
      r.setViewType(ViewType.ACTION_BAR_OVERFLOW_MENU);
    }
 else {
      ViewGroup.LayoutParams lp=view.getLayoutParams();
      if (lp instanceof ActionMenuView.LayoutParams && ((ActionMenuView.LayoutParams)lp).isOverflowButton) {
        r.setViewType(ViewType.ACTION_BAR_OVERFLOW);
      }
 else {
        while (parent != mViewRoot && parent instanceof ViewGroup) {
          if (parent instanceof ActionMenuView) {
            r.setViewType(ViewType.ACTION_BAR_MENU);
            break;
          }
          parent=parent.getParent();
        }
      }
    }
  }
  if (setExtendedInfo) {
    MarginLayoutParams marginParams=null;
    LayoutParams params=view.getLayoutParams();
    if (params instanceof MarginLayoutParams) {
      marginParams=(MarginLayoutParams)params;
    }
    result.setExtendedInfo(view.getBaseline(),marginParams != null ? marginParams.leftMargin : 0,marginParams != null ? marginParams.topMargin : 0,marginParams != null ? marginParams.rightMargin : 0,marginParams != null ? marginParams.bottomMargin : 0);
  }
  return result;
}
