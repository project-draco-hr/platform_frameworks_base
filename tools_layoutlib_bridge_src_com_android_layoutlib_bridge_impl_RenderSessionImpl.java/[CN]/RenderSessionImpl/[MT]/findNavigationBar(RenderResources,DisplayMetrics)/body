{
  if (hasSoftwareButtons() && mWindowIsFloating == false) {
    mNavigationBarSize=48;
    HardwareConfig hardwareConfig=getParams().getHardwareConfig();
    boolean barOnBottom=true;
    if (hardwareConfig.getOrientation() == ScreenOrientation.LANDSCAPE) {
      int shortSize=hardwareConfig.getScreenHeight();
      int shortSizeDp=shortSize * DisplayMetrics.DENSITY_DEFAULT / hardwareConfig.getDensity().getDpiValue();
      if (shortSizeDp < 600) {
        barOnBottom=false;
      }
 else {
        barOnBottom=true;
      }
    }
    if (barOnBottom) {
      mNavigationBarOrientation=LinearLayout.HORIZONTAL;
    }
 else {
      mNavigationBarOrientation=LinearLayout.VERTICAL;
    }
    ResourceValue value=resources.getFrameworkResource(ResourceType.DIMEN,barOnBottom ? "navigation_bar_height" : "navigation_bar_width");
    if (value != null) {
      TypedValue typedValue=ResourceHelper.getValue("navigation_bar_height",value.getValue(),true);
      if (typedValue != null) {
        mNavigationBarSize=(int)typedValue.getDimension(metrics);
      }
    }
  }
}
