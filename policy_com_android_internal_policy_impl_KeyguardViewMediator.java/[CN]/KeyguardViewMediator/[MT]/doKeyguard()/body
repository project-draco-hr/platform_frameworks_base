{
synchronized (this) {
    if (!mExternallyEnabled) {
      if (DEBUG)       Log.d(TAG,"doKeyguard: not showing because externally disabled");
      return;
    }
    if (mKeyguardViewManager.isShowing()) {
      if (DEBUG)       Log.d(TAG,"doKeyguard: not showing because it is already showing");
      return;
    }
    final boolean provisioned=mUpdateMonitor.isDeviceProvisioned();
    final SimCard.State state=mUpdateMonitor.getSimState();
    final boolean lockedOrMissing=state.isPinLocked() || (state == SimCard.State.ABSENT);
    if (!lockedOrMissing && !provisioned) {
      if (DEBUG)       Log.d(TAG,"doKeyguard: not showing because device isn't provisioned" + " and the sim is not locked or missing");
      return;
    }
    if (DEBUG)     Log.d(TAG,"doKeyguard: showing the lock screen");
    showLocked();
  }
}
