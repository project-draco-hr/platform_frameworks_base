{
  final Vpn vpn=new MockVpn(primaryUser.id);
  final UidRange user=UidRange.createForUser(primaryUser.id);
  final String[] packages={PKGS[0],PKGS[1],PKGS[2]};
  final Set<UidRange> allow=vpn.createUserAndRestrictedProfilesRanges(primaryUser.id,Arrays.asList(packages),null);
  assertEquals(new ArraySet<>(Arrays.asList(new UidRange[]{new UidRange(user.start + PKG_UIDS[0],user.start + PKG_UIDS[0]),new UidRange(user.start + PKG_UIDS[1],user.start + PKG_UIDS[2])})),allow);
  final Set<UidRange> disallow=vpn.createUserAndRestrictedProfilesRanges(primaryUser.id,null,Arrays.asList(packages));
  assertEquals(new ArraySet<>(Arrays.asList(new UidRange[]{new UidRange(user.start,user.start + PKG_UIDS[0] - 1),new UidRange(user.start + PKG_UIDS[0] + 1,user.start + PKG_UIDS[1] - 1),new UidRange(user.start + PKG_UIDS[2] + 1,user.stop)})),disallow);
}
