{
  if (mDesiredPowerState && cm.getRadioState() == CommandsInterface.RadioState.RADIO_OFF) {
    cm.setRadioPower(true,null);
  }
 else   if (!mDesiredPowerState && cm.getRadioState().isOn()) {
    DataConnectionTracker dcTracker=phone.mDataConnection;
    if (!dcTracker.isDataConnectionAsDesired()) {
      EventLog.writeEvent(TelephonyEventLog.EVENT_LOG_DATA_STATE_RADIO_OFF,dcTracker.getStateInString(),dcTracker.getAnyDataEnabled() ? 1 : 0);
    }
    powerOffRadioSafely();
  }
}
