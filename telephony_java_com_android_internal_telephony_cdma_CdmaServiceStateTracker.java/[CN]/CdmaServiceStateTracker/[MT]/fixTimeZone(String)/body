{
  TimeZone zone=null;
  String zoneName=SystemProperties.get(TIMEZONE_PROPERTY);
  if (DBG) {
    log("fixTimeZone zoneName='" + zoneName + "' mZoneOffset="+ mZoneOffset+ " mZoneDst="+ mZoneDst+ " iso-cc='"+ isoCountryCode+ "' iso-cc-idx="+ Arrays.binarySearch(GMT_COUNTRY_CODES,isoCountryCode));
  }
  if ((mZoneOffset == 0) && (mZoneDst == false) && (zoneName != null)&& (zoneName.length() > 0)&& (Arrays.binarySearch(GMT_COUNTRY_CODES,isoCountryCode) < 0)) {
    zone=TimeZone.getDefault();
    long tzOffset;
    tzOffset=zone.getOffset(System.currentTimeMillis());
    if (getAutoTime()) {
      setAndBroadcastNetworkSetTime(System.currentTimeMillis() - tzOffset);
    }
 else {
      mSavedTime=mSavedTime - tzOffset;
    }
    if (DBG)     log("fixTimeZone: using default TimeZone");
  }
 else   if (isoCountryCode.equals("")) {
    zone=getNitzTimeZone(mZoneOffset,mZoneDst,mZoneTime);
    if (DBG)     log("fixTimeZone: using NITZ TimeZone");
  }
 else {
    zone=TimeUtils.getTimeZone(mZoneOffset,mZoneDst,mZoneTime,isoCountryCode);
    if (DBG)     log("fixTimeZone: using getTimeZone(off, dst, time, iso)");
  }
  mNeedFixZone=false;
  if (zone != null) {
    log("fixTimeZone: zone != null zone.getID=" + zone.getID());
    if (getAutoTimeZone()) {
      setAndBroadcastNetworkSetTimeZone(zone.getID());
    }
 else {
      log("fixTimeZone: zone == null");
    }
    saveNitzTimeZone(zone.getID());
  }
}
