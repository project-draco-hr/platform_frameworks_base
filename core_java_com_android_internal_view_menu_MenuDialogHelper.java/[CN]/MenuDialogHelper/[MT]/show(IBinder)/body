{
  final MenuBuilder menu=mMenu;
  mAdapter=menu.getMenuAdapter(MenuBuilder.TYPE_DIALOG);
  final AlertDialog.Builder builder=new AlertDialog.Builder(menu.getContext()).setAdapter(mAdapter,this);
  final View headerView=menu.getHeaderView();
  if (headerView != null) {
    builder.setCustomTitle(headerView);
  }
 else {
    builder.setIcon(menu.getHeaderIcon()).setTitle(menu.getHeaderTitle());
  }
  builder.setOnKeyListener(this);
  mDialog=builder.create();
  WindowManager.LayoutParams lp=mDialog.getWindow().getAttributes();
  lp.type=WindowManager.LayoutParams.TYPE_APPLICATION_PANEL;
  if (windowToken != null) {
    lp.token=windowToken;
  }
  mDialog.show();
}
