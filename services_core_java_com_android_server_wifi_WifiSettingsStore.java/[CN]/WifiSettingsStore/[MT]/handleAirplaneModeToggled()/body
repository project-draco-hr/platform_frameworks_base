{
  if (!isAirplaneSensitive()) {
    return false;
  }
  mAirplaneModeOn=getPersistedAirplaneModeOn();
  if (mAirplaneModeOn) {
    if (mPersistWifiState == WIFI_ENABLED) {
      persistWifiState(WIFI_DISABLED_AIRPLANE_ON);
    }
  }
 else {
    if (testAndClearWifiSavedState() || mPersistWifiState == WIFI_ENABLED_AIRPLANE_OVERRIDE) {
      persistWifiState(WIFI_ENABLED);
    }
  }
  return true;
}
