{
  StringBuilder sb=new StringBuilder(320);
  int[] values={0,0,0,SmsMessage.ENCODING_7BIT};
  int startPos=0;
  int asciiCharsLen=sAsciiChars.length();
  for (int i=0; i < sTestLengthCount; i++) {
    int len=sSeptetTestLengths[i];
    assertTrue(sb.length() <= len);
    while (sb.length() < len) {
      int addCount=len - sb.length();
      int endPos=(asciiCharsLen - startPos > addCount) ? (startPos + addCount) : asciiCharsLen;
      sb.append(sAsciiChars,startPos,endPos);
      startPos=(endPos == asciiCharsLen) ? 0 : endPos;
    }
    assertEquals(len,sb.length());
    String testStr=sb.toString();
    values[0]=sTestMsgCounts[i];
    values[1]=len;
    values[2]=sSeptetUnitsRemaining[i];
    callGsmLengthMethods(testStr,false,values);
    callGsmLengthMethods(testStr,true,values);
    callCdmaLengthMethods(testStr,false,values);
    callCdmaLengthMethods(testStr,true,values);
  }
}
