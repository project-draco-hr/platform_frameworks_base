{
  final Bundle opts=new Bundle();
  opts.putParcelable(EXTRA_THUMBNAIL_SIZE,size);
  AssetFileDescriptor afd=null;
  try {
    afd=resolver.openTypedAssetFileDescriptor(documentUri,"image/*",opts);
    final FileDescriptor fd=afd.getFileDescriptor();
    final BitmapFactory.Options bitmapOpts=new BitmapFactory.Options();
    bitmapOpts.inJustDecodeBounds=true;
    BitmapFactory.decodeFileDescriptor(fd,null,bitmapOpts);
    final int widthSample=bitmapOpts.outWidth / size.x;
    final int heightSample=bitmapOpts.outHeight / size.y;
    bitmapOpts.inJustDecodeBounds=false;
    bitmapOpts.inSampleSize=Math.min(widthSample,heightSample);
    return BitmapFactory.decodeFileDescriptor(fd,null,bitmapOpts);
  }
 catch (  IOException e) {
    Log.w(TAG,"Failed to load thumbnail for " + documentUri + ": "+ e);
    return null;
  }
 finally {
    IoUtils.closeQuietly(afd);
  }
}
