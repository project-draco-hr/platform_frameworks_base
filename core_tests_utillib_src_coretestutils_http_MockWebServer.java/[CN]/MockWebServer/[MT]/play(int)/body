{
  final ServerSocket ss=new ServerSocket(portNumber);
  ss.setReuseAddress(true);
  port=ss.getLocalPort();
  submitCallable(new Callable<Void>(){
    public Void call() throws Exception {
      int count=0;
      while (true) {
        if (count > 0 && responseQueue.isEmpty()) {
          ss.close();
          executor.shutdown();
          return null;
        }
        serveConnection(ss.accept());
        count++;
      }
    }
  }
);
}
