{
  if (responseQueue.isEmpty()) {
    throw new IllegalStateException("Unexpected request: " + request);
  }
  return responseQueue.take();
}
