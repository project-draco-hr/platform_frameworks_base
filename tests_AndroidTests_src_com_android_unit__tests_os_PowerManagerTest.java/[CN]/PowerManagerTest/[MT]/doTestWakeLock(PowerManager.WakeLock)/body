{
  wl.acquire();
  assertTrue(wl.isHeld());
  wl.release();
  assertFalse(wl.isHeld());
  wl.setReferenceCounted(true);
  wl.acquire();
  assertTrue(wl.isHeld());
  wl.acquire();
  assertTrue(wl.isHeld());
  wl.release();
  assertTrue(wl.isHeld());
  wl.release();
  assertFalse(wl.isHeld());
  wl.setReferenceCounted(false);
  wl.acquire();
  assertTrue(wl.isHeld());
  wl.acquire();
  assertTrue(wl.isHeld());
  wl.release();
  assertFalse(wl.isHeld());
}
