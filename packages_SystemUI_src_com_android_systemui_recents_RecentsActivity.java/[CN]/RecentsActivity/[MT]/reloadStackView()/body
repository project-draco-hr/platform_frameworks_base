{
  RecentsTaskLoader loader=Recents.getTaskLoader();
  RecentsTaskLoadPlan loadPlan=RecentsImpl.consumeInstanceLoadPlan();
  if (loadPlan == null) {
    loadPlan=loader.createLoadPlan(this);
  }
  RecentsConfiguration config=Recents.getConfiguration();
  RecentsActivityLaunchState launchState=config.getLaunchState();
  if (!loadPlan.hasTasks()) {
    loader.preloadTasks(loadPlan,launchState.launchedToTaskId,launchState.launchedFromHome);
  }
  RecentsTaskLoadPlan.Options loadOpts=new RecentsTaskLoadPlan.Options();
  loadOpts.runningTaskId=launchState.launchedToTaskId;
  loadOpts.numVisibleTasks=launchState.launchedNumVisibleTasks;
  loadOpts.numVisibleTaskThumbnails=launchState.launchedNumVisibleThumbnails;
  loader.loadTasks(this,loadPlan,loadOpts);
  TaskStack stack=loadPlan.getTaskStack();
  mRecentsView.onReload(mIsVisible,stack.getTaskCount() == 0);
  mRecentsView.updateStack(stack);
  boolean animateNavBarScrim=!launchState.launchedViaDockGesture;
  updateNavBarScrim(animateNavBarScrim,null);
  boolean wasLaunchedByAm=!launchState.launchedFromHome && !launchState.launchedFromApp;
  if (wasLaunchedByAm) {
    EventBus.getDefault().send(new EnterRecentsWindowAnimationCompletedEvent());
  }
  if (launchState.launchedWithAltTab) {
    MetricsLogger.count(this,"overview_trigger_alttab",1);
  }
 else {
    MetricsLogger.count(this,"overview_trigger_nav_btn",1);
  }
  if (launchState.launchedFromApp) {
    Task launchTarget=stack.getLaunchTarget();
    int launchTaskIndexInStack=launchTarget != null ? stack.indexOfStackTask(launchTarget) : 0;
    MetricsLogger.count(this,"overview_source_app",1);
    MetricsLogger.histogram(this,"overview_source_app_index",launchTaskIndexInStack);
  }
 else {
    MetricsLogger.count(this,"overview_source_home",1);
  }
  int taskCount=mRecentsView.getStack().getTaskCount();
  MetricsLogger.histogram(this,"overview_task_count",taskCount);
  mIsVisible=true;
}
