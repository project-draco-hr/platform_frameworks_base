{
  super.onResume();
  RecentsTaskLoader loader=Recents.getTaskLoader();
  RecentsTaskLoadPlan loadPlan=RecentsImpl.consumeInstanceLoadPlan();
  if (loadPlan == null) {
    loadPlan=loader.createLoadPlan(this);
  }
  RecentsConfiguration config=Recents.getConfiguration();
  RecentsActivityLaunchState launchState=config.getLaunchState();
  if (!loadPlan.hasTasks()) {
    loader.preloadTasks(loadPlan,launchState.launchedToTaskId,launchState.launchedFromHome);
  }
  RecentsTaskLoadPlan.Options loadOpts=new RecentsTaskLoadPlan.Options();
  loadOpts.runningTaskId=launchState.launchedToTaskId;
  loadOpts.numVisibleTasks=launchState.launchedNumVisibleTasks;
  loadOpts.numVisibleTaskThumbnails=launchState.launchedNumVisibleThumbnails;
  loader.loadTasks(this,loadPlan,loadOpts);
  TaskStack stack=loadPlan.getTaskStack();
  mRecentsView.onResume(mIsVisible,false,stack);
  Task launchTarget=stack.getLaunchTarget();
  int taskCount=stack.getTaskCount();
  int launchTaskIndexInStack=launchTarget != null ? stack.indexOfStackTask(launchTarget) : 0;
  boolean hasNavBarScrim=(taskCount > 0) && !config.hasTransposedNavBar;
  boolean animateNavBarScrim=!launchState.launchedWhileDocking;
  mScrimViews.prepareEnterRecentsAnimation(hasNavBarScrim,animateNavBarScrim);
  boolean wasLaunchedByAm=!launchState.launchedFromHome && !launchState.launchedFromApp;
  if (launchState.launchedHasConfigurationChanged || wasLaunchedByAm) {
    EventBus.getDefault().send(new EnterRecentsWindowAnimationCompletedEvent());
  }
  mRecentsView.getViewTreeObserver().addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener(){
    @Override public boolean onPreDraw(){
      mRecentsView.getViewTreeObserver().removeOnPreDrawListener(this);
      EventBus.getDefault().post(new RecentsDrawnEvent());
      return true;
    }
  }
);
  if (launchState.launchedWithAltTab) {
    MetricsLogger.count(this,"overview_trigger_alttab",1);
  }
 else {
    MetricsLogger.count(this,"overview_trigger_nav_btn",1);
  }
  if (launchState.launchedFromApp) {
    MetricsLogger.count(this,"overview_source_app",1);
    MetricsLogger.histogram(this,"overview_source_app_index",launchTaskIndexInStack);
  }
 else {
    MetricsLogger.count(this,"overview_source_home",1);
  }
  MetricsLogger.histogram(this,"overview_task_count",taskCount);
  mIsVisible=true;
}
