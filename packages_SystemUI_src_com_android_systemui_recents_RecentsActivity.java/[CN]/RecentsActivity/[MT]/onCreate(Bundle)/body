{
  super.onCreate(savedInstanceState);
  EventBus.getDefault().register(this,EVENT_BUS_PRIORITY);
  RecentsTaskLoader.initialize(this);
  SystemServicesProxy ssp=RecentsTaskLoader.getInstance().getSystemServicesProxy();
  mConfig=RecentsConfiguration.initialize(this,ssp);
  mConfig.update(this,ssp,ssp.getWindowRect());
  mPackageMonitor=new RecentsPackageMonitor();
  mAppWidgetHost=new RecentsAppWidgetHost(this,Constants.Values.App.AppWidgetHostId);
  setContentView(R.layout.recents);
  mRecentsView=(RecentsView)findViewById(R.id.recents_view);
  mRecentsView.setCallbacks(this);
  mRecentsView.setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_STABLE | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION);
  mEmptyViewStub=(ViewStub)findViewById(R.id.empty_view_stub);
  mScrimViews=new SystemBarScrimViews(this);
  mSearchWidgetInfo=ssp.getOrBindSearchAppWidget(this,mAppWidgetHost);
  IntentFilter filter=new IntentFilter();
  filter.addAction(Intent.ACTION_SCREEN_OFF);
  filter.addAction(SearchManager.INTENT_GLOBAL_SEARCH_ACTIVITY_CHANGED);
  registerReceiver(mSystemBroadcastReceiver,filter);
}
