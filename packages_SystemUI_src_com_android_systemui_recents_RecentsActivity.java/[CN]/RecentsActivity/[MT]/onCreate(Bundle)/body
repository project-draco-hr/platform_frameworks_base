{
  super.onCreate(savedInstanceState);
  RecentsTaskLoader.initialize(this);
  mConfig=RecentsConfiguration.reinitialize(this,RecentsTaskLoader.getInstance().getSystemServicesProxy());
  mAppWidgetHost=new RecentsAppWidgetHost(this,Constants.Values.App.AppWidgetHostId);
  setContentView(R.layout.recents);
  mRecentsView=(RecentsView)findViewById(R.id.recents_view);
  mRecentsView.setCallbacks(this);
  mRecentsView.setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_STABLE | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION);
  mEmptyViewStub=(ViewStub)findViewById(R.id.empty_view_stub);
  mDebugOverlayStub=(ViewStub)findViewById(R.id.debug_overlay_stub);
  mScrimViews=new SystemBarScrimViews(this,mConfig);
  inflateDebugOverlay();
  bindSearchBarAppWidget();
  updateRecentsTasks(getIntent());
  IntentFilter filter=new IntentFilter();
  filter.addAction(Intent.ACTION_SCREEN_OFF);
  filter.addAction(SearchManager.INTENT_GLOBAL_SEARCH_ACTIVITY_CHANGED);
  registerReceiver(mSystemBroadcastReceiver,filter);
  try {
    Utilities.setShadowProperty("ambientRatio",String.valueOf(1.5f));
  }
 catch (  IllegalAccessException e) {
    e.printStackTrace();
  }
catch (  InvocationTargetException e) {
    e.printStackTrace();
  }
  if (savedInstanceState != null) {
    mConfig.updateOnConfigurationChange();
    onConfigurationChange();
  }
  if (mConfig.searchBarAppWidgetId >= 0) {
    final WeakReference<RecentsAppWidgetHost.RecentsAppWidgetHostCallbacks> callback=new WeakReference<RecentsAppWidgetHost.RecentsAppWidgetHostCallbacks>(this);
    mRecentsView.post(new Runnable(){
      @Override public void run(){
        RecentsAppWidgetHost.RecentsAppWidgetHostCallbacks cb=callback.get();
        if (cb != null) {
          mAppWidgetHost.startListening(cb);
        }
      }
    }
);
  }
}
