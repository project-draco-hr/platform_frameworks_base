{
  RecentsTaskLoader loader=Recents.getTaskLoader();
  RecentsTaskLoadPlan plan=RecentsImpl.consumeInstanceLoadPlan();
  if (plan == null) {
    plan=loader.createLoadPlan(this);
  }
  RecentsConfiguration config=Recents.getConfiguration();
  RecentsActivityLaunchState launchState=config.getLaunchState();
  if (!plan.hasTasks()) {
    loader.preloadTasks(plan,-1,launchState.launchedFromHome);
  }
  RecentsTaskLoadPlan.Options loadOpts=new RecentsTaskLoadPlan.Options();
  loadOpts.runningTaskId=launchState.launchedToTaskId;
  loadOpts.numVisibleTasks=launchState.launchedNumVisibleTasks;
  loadOpts.numVisibleTaskThumbnails=launchState.launchedNumVisibleThumbnails;
  loader.loadTasks(this,plan,loadOpts);
  TaskStack stack=plan.getTaskStack();
  mRecentsView.setTaskStack(stack);
  Task launchTarget=stack.getLaunchTarget();
  int taskCount=stack.getTaskCount();
  int launchTaskIndexInStack=launchTarget != null ? stack.indexOfStackTask(launchTarget) : 0;
  boolean hasNavBarScrim=(taskCount > 0) && !config.hasTransposedNavBar;
  boolean animateNavBarScrim=!launchState.launchedWhileDocking;
  mScrimViews.prepareEnterRecentsAnimation(hasNavBarScrim,animateNavBarScrim);
  if (launchState.launchedWithAltTab) {
    MetricsLogger.count(this,"overview_trigger_alttab",1);
  }
 else {
    MetricsLogger.count(this,"overview_trigger_nav_btn",1);
  }
  if (launchState.launchedFromApp) {
    MetricsLogger.count(this,"overview_source_app",1);
    MetricsLogger.histogram(this,"overview_source_app_index",launchTaskIndexInStack);
  }
 else {
    MetricsLogger.count(this,"overview_source_home",1);
  }
  MetricsLogger.histogram(this,"overview_task_count",taskCount);
}
