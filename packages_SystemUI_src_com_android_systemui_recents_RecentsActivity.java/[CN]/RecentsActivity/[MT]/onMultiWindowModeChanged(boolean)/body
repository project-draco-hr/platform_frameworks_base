{
  super.onMultiWindowModeChanged(isInMultiWindowMode);
  RecentsConfiguration config=Recents.getConfiguration();
  RecentsActivityLaunchState launchState=config.getLaunchState();
  RecentsTaskLoader loader=Recents.getTaskLoader();
  RecentsTaskLoadPlan loadPlan=loader.createLoadPlan(this);
  loader.preloadTasks(loadPlan,-1,false);
  RecentsTaskLoadPlan.Options loadOpts=new RecentsTaskLoadPlan.Options();
  loadOpts.numVisibleTasks=launchState.launchedNumVisibleTasks;
  loadOpts.numVisibleTaskThumbnails=launchState.launchedNumVisibleThumbnails;
  loader.loadTasks(this,loadPlan,loadOpts);
  TaskStack stack=loadPlan.getTaskStack();
  int numStackTasks=stack.getStackTaskCount();
  boolean showDeferredAnimation=numStackTasks > 0;
  EventBus.getDefault().send(new ConfigurationChangedEvent(true,false,false,numStackTasks > 0));
  EventBus.getDefault().send(new MultiWindowStateChangedEvent(isInMultiWindowMode,showDeferredAnimation,stack));
}
