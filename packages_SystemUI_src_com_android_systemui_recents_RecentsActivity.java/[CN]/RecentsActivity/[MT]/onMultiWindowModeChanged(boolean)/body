{
  super.onMultiWindowModeChanged(isInMultiWindowMode);
  EventBus.getDefault().send(new ConfigurationChangedEvent(true,false));
  if (mRecentsView != null) {
    RecentsConfiguration config=Recents.getConfiguration();
    RecentsActivityLaunchState launchState=config.getLaunchState();
    RecentsTaskLoader loader=Recents.getTaskLoader();
    RecentsTaskLoadPlan loadPlan=loader.createLoadPlan(this);
    loader.preloadTasks(loadPlan,-1,false);
    RecentsTaskLoadPlan.Options loadOpts=new RecentsTaskLoadPlan.Options();
    loadOpts.numVisibleTasks=launchState.launchedNumVisibleTasks;
    loadOpts.numVisibleTaskThumbnails=launchState.launchedNumVisibleThumbnails;
    loader.loadTasks(this,loadPlan,loadOpts);
    mRecentsView.updateStack(loadPlan.getTaskStack());
  }
  EventBus.getDefault().send(new MultiWindowStateChangedEvent(isInMultiWindowMode));
}
