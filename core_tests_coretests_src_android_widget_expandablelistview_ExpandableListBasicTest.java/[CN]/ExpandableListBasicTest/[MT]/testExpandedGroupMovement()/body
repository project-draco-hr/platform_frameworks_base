{
  mListUtil.arrowScrollToSelectedPosition(0);
  sendKeys(KeyEvent.KEYCODE_DPAD_CENTER);
  getInstrumentation().waitForIdleSync();
  assertTrue("Group did not expand",mListView.isGroupExpanded(0));
  getInstrumentation().waitForIdleSync();
  assertTrue("Group did not expand",mListView.isGroupExpanded(0));
  List<MyGroup> groups=mActivity.getGroups();
  MyGroup insertedGroup=new MyGroup(1);
  groups.add(0,insertedGroup);
  assertTrue("Adapter is not an instance of the base adapter",mAdapter instanceof BaseExpandableListAdapter);
  final BaseExpandableListAdapter adapter=(BaseExpandableListAdapter)mAdapter;
  mActivity.runOnUiThread(new Runnable(){
    public void run(){
      adapter.notifyDataSetChanged();
    }
  }
);
  getInstrumentation().waitForIdleSync();
  assertTrue("The expanded state didn't stay with the proper group",mListView.isGroupExpanded(1));
  assertFalse("The expanded state was given to the inserted group",mListView.isGroupExpanded(0));
}
