{
  dest.writeInt(mEventCount);
  dest.writeInt(mIndex);
  if (mEventCount > 0) {
    dest.writeStringArray(mStringPool);
    if (mEventsToWrite != null) {
      Parcel p=Parcel.obtain();
      try {
        p.setDataPosition(0);
        for (int i=0; i < mEventCount; i++) {
          final Event event=mEventsToWrite.get(i);
          writeEventToParcel(event,p,flags);
        }
        final int listByteLength=p.dataPosition();
        dest.writeInt(listByteLength);
        dest.writeInt(0);
        dest.appendFrom(p,0,listByteLength);
      }
  finally {
        p.recycle();
      }
    }
 else     if (mParcel != null) {
      dest.writeInt(mParcel.dataSize());
      dest.writeInt(mParcel.dataPosition());
      dest.appendFrom(mParcel,0,mParcel.dataSize());
    }
 else {
      throw new IllegalStateException("Either mParcel or mEventsToWrite must not be null");
    }
  }
}
