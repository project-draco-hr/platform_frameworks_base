{
  Resources res=context.getResources();
  TypedValue typedValue=new TypedValue();
  res.getValue(R.dimen.status_bar_icon_scale_factor,typedValue,true);
  float iconScaleFactor=typedValue.getFloat();
  int batteryHeight=res.getDimensionPixelSize(R.dimen.status_bar_battery_icon_height);
  int batteryWidth=res.getDimensionPixelSize(R.dimen.status_bar_battery_icon_width);
  int marginBottom=res.getDimensionPixelSize(R.dimen.battery_margin_bottom);
  LinearLayout.LayoutParams scaledLayoutParams=new LinearLayout.LayoutParams((int)(batteryWidth * iconScaleFactor),(int)(batteryHeight * iconScaleFactor));
  scaledLayoutParams.setMarginsRelative(0,0,0,marginBottom);
  mBatteryMeterView.setLayoutParams(scaledLayoutParams);
  mBatteryMeterViewKeyguard.setLayoutParams(scaledLayoutParams);
}
