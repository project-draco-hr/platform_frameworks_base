{
  mNanManager=new WeakReference<>(mgr);
  mIsPublish=isPublish;
  mOriginalCallback=originalCallback;
  mClientId=clientId;
  if (VDBG) {
    Log.v(TAG,"WifiNanDiscoverySessionCallbackProxy ctor: isPublish=" + isPublish);
  }
  mHandler=new Handler(looper){
    @Override public void handleMessage(    Message msg){
      if (DBG)       Log.d(TAG,"What=" + msg.what + ", msg="+ msg);
      if (mNanManager.get() == null) {
        Log.w(TAG,"WifiNanDiscoverySessionCallbackProxy: handleMessage post GC");
        return;
      }
switch (msg.what) {
case CALLBACK_SESSION_STARTED:
        onProxySessionStarted(msg.arg1);
      break;
case CALLBACK_SESSION_CONFIG_SUCCESS:
    mOriginalCallback.onSessionConfigUpdated();
  break;
case CALLBACK_SESSION_CONFIG_FAIL:
mOriginalCallback.onSessionConfigFailed();
if (mSession == null) {
mNanManager.clear();
}
break;
case CALLBACK_SESSION_TERMINATED:
onProxySessionTerminated(msg.arg1);
break;
case CALLBACK_MATCH:
mOriginalCallback.onServiceDiscovered(Integer.valueOf(msg.arg1),msg.getData().getByteArray(MESSAGE_BUNDLE_KEY_MESSAGE),msg.getData().getByteArray(MESSAGE_BUNDLE_KEY_MESSAGE2));
break;
case CALLBACK_MESSAGE_SEND_SUCCESS:
mOriginalCallback.onMessageSent(msg.arg1);
break;
case CALLBACK_MESSAGE_SEND_FAIL:
mOriginalCallback.onMessageSendFailed(msg.arg1);
break;
case CALLBACK_MESSAGE_RECEIVED:
mOriginalCallback.onMessageReceived(Integer.valueOf(msg.arg1),(byte[])msg.obj);
break;
}
}
}
;
}
