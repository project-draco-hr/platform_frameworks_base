{
  if (VDBG)   Log.v(TAG,"publish(): data='" + publishData + "', settings="+ publishSettings);
  if (publishSettings.mPublishType == PublishSettings.PUBLISH_TYPE_UNSOLICITED && publishData.mRxFilterLength != 0) {
    throw new IllegalArgumentException("Invalid publish data & settings: UNSOLICITED " + "publishes (active) can't have an Rx filter");
  }
  if (publishSettings.mPublishType == PublishSettings.PUBLISH_TYPE_SOLICITED && publishData.mTxFilterLength != 0) {
    throw new IllegalArgumentException("Invalid publish data & settings: SOLICITED " + "publishes (passive) can't have a Tx filter");
  }
  if (listener == null) {
    throw new IllegalArgumentException("Invalid listener - must not be null");
  }
  int sessionId;
  try {
    sessionId=mService.createSession(listener.callback,events);
    if (DBG)     Log.d(TAG,"publish: session created - sessionId=" + sessionId);
    mService.publish(sessionId,publishData,publishSettings);
  }
 catch (  RemoteException e) {
    Log.w(TAG,"createSession/publish RemoteException: " + e);
    return null;
  }
  return new WifiNanPublishSession(this,sessionId);
}
