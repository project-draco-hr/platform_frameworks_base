{
  if (VDBG) {
    Log.v(TAG,"subscribe(): data='" + subscribeData + "', settings="+ subscribeSettings);
  }
  if (subscribeSettings.mSubscribeType == SubscribeSettings.SUBSCRIBE_TYPE_ACTIVE && subscribeData.mRxFilterLength != 0) {
    throw new IllegalArgumentException("Invalid subscribe data & settings: ACTIVE subscribes can't have an Rx filter");
  }
  if (subscribeSettings.mSubscribeType == SubscribeSettings.SUBSCRIBE_TYPE_PASSIVE && subscribeData.mTxFilterLength != 0) {
    throw new IllegalArgumentException("Invalid subscribe data & settings: PASSIVE subscribes can't have a Tx filter");
  }
  int sessionId;
  try {
    sessionId=mService.createSession(mClientId,listener.callback,events);
    if (DBG)     Log.d(TAG,"subscribe: session created - sessionId=" + sessionId);
    mService.subscribe(mClientId,sessionId,subscribeData,subscribeSettings);
  }
 catch (  RemoteException e) {
    throw e.rethrowFromSystemServer();
  }
  return new WifiNanSubscribeSession(this,sessionId);
}
