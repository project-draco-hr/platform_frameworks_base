{
  if (mDbg)   mSm.log("completeConstruction: E");
  int maxDepth=0;
  for (  StateInfo si : mStateInfo.values()) {
    int depth=0;
    for (StateInfo i=si; i != null; depth++) {
      i=i.parentStateInfo;
    }
    if (maxDepth < depth) {
      maxDepth=depth;
    }
  }
  if (mDbg)   mSm.log("completeConstruction: maxDepth=" + maxDepth);
  mStateStack=new StateInfo[maxDepth];
  mTempStateStack=new StateInfo[maxDepth];
  setupInitialStateStack();
  sendMessageAtFrontOfQueue(obtainMessage(SM_INIT_CMD,mSmHandlerObj));
  if (mDbg)   mSm.log("completeConstruction: X");
}
