{
  if (mDbg)   Log.d(TAG,"completeConstruction: E");
  int maxDepth=0;
  for (  StateInfo si : mStateInfo.values()) {
    int depth=0;
    for (StateInfo i=si; i != null; depth++) {
      i=i.parentStateInfo;
    }
    if (maxDepth < depth) {
      maxDepth=depth;
    }
  }
  if (mDbg)   Log.d(TAG,"completeConstruction: maxDepth=" + maxDepth);
  mStateStack=new StateInfo[maxDepth];
  mTempStateStack=new StateInfo[maxDepth];
  setupInitialStateStack();
  mIsConstructionCompleted=true;
  mMsg=obtainMessage(SM_INIT_CMD);
  invokeEnterMethods(0);
  performTransitions();
  if (mDbg)   Log.d(TAG,"completeConstruction: X");
}
