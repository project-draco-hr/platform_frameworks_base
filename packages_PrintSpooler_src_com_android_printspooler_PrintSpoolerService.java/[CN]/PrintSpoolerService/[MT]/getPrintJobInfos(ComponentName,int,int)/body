{
  List<PrintJobInfo> foundPrintJobs=null;
synchronized (mLock) {
    final int printJobCount=mPrintJobs.size();
    for (int i=0; i < printJobCount; i++) {
      PrintJobInfo printJob=mPrintJobs.get(i);
      PrinterId printerId=printJob.getPrinterId();
      final boolean sameComponent=(componentName == null || (printerId != null && componentName.equals(printerId.getServiceName())));
      final boolean sameAppId=appId == PrintManager.APP_ID_ANY || printJob.getAppId() == appId;
      final boolean sameState=(state == printJob.getState()) || (state == PrintJobInfo.STATE_ANY) || (state == PrintJobInfo.STATE_ANY_VISIBLE_TO_CLIENTS && isStateVisibleToUser(printJob.getState()))|| (state == PrintJobInfo.STATE_ANY_ACTIVE && isActiveState(printJob.getState()))|| (state == PrintJobInfo.STATE_ANY_SCHEDULED && isScheduledState(printJob.getState()));
      if (sameComponent && sameAppId && sameState) {
        if (foundPrintJobs == null) {
          foundPrintJobs=new ArrayList<PrintJobInfo>();
        }
        foundPrintJobs.add(printJob);
      }
    }
  }
  return foundPrintJobs;
}
