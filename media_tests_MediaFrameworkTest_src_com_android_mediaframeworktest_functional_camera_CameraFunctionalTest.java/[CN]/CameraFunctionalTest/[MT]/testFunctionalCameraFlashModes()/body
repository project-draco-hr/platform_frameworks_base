{
  try {
    SurfaceHolder surfaceHolder=MediaFrameworkTest.mSurfaceView.getHolder();
    Parameters params=mCameraTestHelper.getCameraParameters();
    List<String> supportedFlashModes=params.getSupportedFlashModes();
    assertNotNull("No flash modes supported",supportedFlashModes);
    for (int i=0; i < supportedFlashModes.size(); i++) {
      runOnLooper(new Runnable(){
        @Override public void run(){
          mCameraTestHelper.setupCameraTest();
        }
      }
);
      Log.v(TAG,"Setting flash mode to " + supportedFlashModes.get(i));
      params.setFlashMode(supportedFlashModes.get(i));
      mCameraTestHelper.setParameters(params);
      mCameraTestHelper.startCameraPreview(surfaceHolder);
      mCameraTestHelper.capturePhoto();
    }
    mCameraTestHelper.cleanupTestImages();
  }
 catch (  Exception e) {
    Log.e(TAG,e.toString());
    fail("Camera flash mode test Exception");
  }
}
