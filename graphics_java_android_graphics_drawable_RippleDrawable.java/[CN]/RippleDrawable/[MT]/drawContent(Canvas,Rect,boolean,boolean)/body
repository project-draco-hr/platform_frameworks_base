{
  final ChildDrawable[] array=mLayerState.mChildren;
  final int count=mLayerState.mNum;
  boolean needsLayer=false;
  if (hasRipples && !hasMask) {
    for (int i=0; i < count; i++) {
      if (array[i].mDrawable.getOpacity() != PixelFormat.OPAQUE) {
        needsLayer=true;
        break;
      }
    }
  }
  if (needsLayer) {
    canvas.saveLayer(bounds.left,bounds.top,bounds.right,bounds.bottom,getMaskingPaint(SRC_OVER));
  }
  for (int i=0; i < count; i++) {
    if (array[i].mId != R.id.mask) {
      array[i].mDrawable.draw(canvas);
    }
  }
  return needsLayer;
}
