{
  final RippleState state=mState;
  state.mChangingConfigurations|=a.getChangingConfigurations();
  state.mTouchThemeAttrs=a.extractThemeAttrs();
  final ColorStateList color=a.getColorStateList(R.styleable.RippleDrawable_color);
  if (color != null) {
    mState.mColor=color;
  }
  if (state.mTouchThemeAttrs == null && mState.mColor == null) {
    throw new XmlPullParserException(a.getPositionDescription() + ": <ripple> requires a valid color attribute");
  }
}
