{
  final boolean changed=super.onStateChange(stateSet);
  boolean enabled=false;
  boolean pressed=false;
  boolean focused=false;
  boolean hovered=false;
  for (  int state : stateSet) {
    if (state == R.attr.state_enabled) {
      enabled=true;
    }
 else     if (state == R.attr.state_focused) {
      focused=true;
    }
 else     if (state == R.attr.state_pressed) {
      pressed=true;
    }
 else     if (state == R.attr.state_hovered) {
      hovered=true;
    }
  }
  setRippleActive(enabled && pressed);
  setBackgroundActive(hovered || focused || (enabled && pressed),focused || hovered);
  return changed;
}
