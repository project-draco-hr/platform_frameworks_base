{
  mStacks=ssp.getAllStackInfos();
  mTargetStackIndex.value=-1;
  CharSequence[] stackNames=getAllStacksDescriptions(mStacks,mTaskToMove.key.stackId,mTargetStackIndex);
  builder.setTitle("Move Task to Stack");
  builder.setSingleChoiceItems(stackNames,mTargetStackIndex.value,new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      mTargetStackIndex.value=which;
    }
  }
);
  builder.setPositiveButton("Move Task",new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      if (mTargetStackIndex.value != -1) {
        ActivityManager.StackInfo toStack=mStacks.valueAt(mTargetStackIndex.value);
        if (toStack.stackId != mTaskToMove.key.stackId) {
          ssp.moveTaskToStack(mTaskToMove.key.id,toStack.stackId,true);
          mTaskToMove.setStackId(toStack.stackId);
        }
      }
    }
  }
);
  builder.setNegativeButton("Cancel",new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      dismiss();
    }
  }
);
}
