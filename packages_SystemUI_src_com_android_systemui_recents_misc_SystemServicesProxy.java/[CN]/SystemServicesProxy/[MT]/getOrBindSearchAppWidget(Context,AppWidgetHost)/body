{
  int searchWidgetId=Prefs.getInt(context,Prefs.Key.SEARCH_APP_WIDGET_ID,-1);
  AppWidgetProviderInfo searchWidgetInfo=mAwm.getAppWidgetInfo(searchWidgetId);
  AppWidgetProviderInfo resolvedSearchWidgetInfo=resolveSearchAppWidget();
  if (searchWidgetInfo != null && resolvedSearchWidgetInfo != null && searchWidgetInfo.provider.equals(resolvedSearchWidgetInfo.provider)) {
    if (Prefs.getString(context,Prefs.Key.SEARCH_APP_WIDGET_PACKAGE,null) == null) {
      Prefs.putString(context,Prefs.Key.SEARCH_APP_WIDGET_PACKAGE,searchWidgetInfo.provider.getPackageName());
    }
    return searchWidgetInfo;
  }
  if (searchWidgetId != -1) {
    host.deleteAppWidgetId(searchWidgetId);
  }
  if (resolvedSearchWidgetInfo != null) {
    Pair<Integer,AppWidgetProviderInfo> widgetInfo=bindSearchAppWidget(host,resolvedSearchWidgetInfo);
    if (widgetInfo != null) {
      Prefs.putInt(context,Prefs.Key.SEARCH_APP_WIDGET_ID,widgetInfo.first);
      Prefs.putString(context,Prefs.Key.SEARCH_APP_WIDGET_PACKAGE,widgetInfo.second.provider.getPackageName());
      return widgetInfo.second;
    }
  }
  Prefs.remove(context,Prefs.Key.SEARCH_APP_WIDGET_ID);
  Prefs.remove(context,Prefs.Key.SEARCH_APP_WIDGET_PACKAGE);
  return null;
}
