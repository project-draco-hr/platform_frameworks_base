{
  try {
    final DrmConvertedStatus status=mClient.closeConvertSession(mSessionId);
    if (status.statusCode == STATUS_OK) {
      mOutput.seek(status.offset);
      mOutput.write(status.convertedData);
    }
 else {
      throw new IOException("Unexpected DRM status: " + status.statusCode);
    }
  }
  finally {
    try {
      mOutput.getFD().sync();
    }
  finally {
      mOutput.close();
      mOutput=null;
    }
  }
}
