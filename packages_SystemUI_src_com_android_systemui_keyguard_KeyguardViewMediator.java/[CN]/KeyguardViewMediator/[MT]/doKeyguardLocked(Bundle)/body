{
  if (!mExternallyEnabled) {
    if (DEBUG)     Log.d(TAG,"doKeyguard: not showing because externally disabled");
    return;
  }
  if (mStatusBarKeyguardViewManager.isShowing()) {
    if (DEBUG)     Log.d(TAG,"doKeyguard: not showing because it is already showing");
    return;
  }
  final boolean requireSim=!SystemProperties.getBoolean("keyguard.no_require_sim",false);
  final boolean provisioned=mUpdateMonitor.isDeviceProvisioned();
  final IccCardConstants.State state=mUpdateMonitor.getSimState();
  final boolean lockedOrMissing=state.isPinLocked() || ((state == IccCardConstants.State.ABSENT || state == IccCardConstants.State.PERM_DISABLED) && requireSim);
  if (!lockedOrMissing && !provisioned) {
    if (DEBUG)     Log.d(TAG,"doKeyguard: not showing because device isn't provisioned" + " and the sim is not locked or missing");
    return;
  }
  if (!mUserManager.isUserSwitcherEnabled() && mLockPatternUtils.isLockScreenDisabled() && !lockedOrMissing) {
    if (DEBUG)     Log.d(TAG,"doKeyguard: not showing because lockscreen is off");
    return;
  }
  if (mLockPatternUtils.checkVoldPassword()) {
    if (DEBUG)     Log.d(TAG,"Not showing lock screen since just decrypted");
    mShowing=false;
    hideLocked();
    return;
  }
  if (DEBUG)   Log.d(TAG,"doKeyguard: showing the lock screen");
  showLocked(options);
}
