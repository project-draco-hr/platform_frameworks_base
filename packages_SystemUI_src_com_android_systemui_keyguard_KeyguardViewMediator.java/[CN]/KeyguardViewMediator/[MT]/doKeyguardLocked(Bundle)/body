{
  if (!mExternallyEnabled) {
    if (DEBUG)     Log.d(TAG,"doKeyguard: not showing because externally disabled");
    return;
  }
  if (mStatusBarKeyguardViewManager.isShowing()) {
    if (DEBUG)     Log.d(TAG,"doKeyguard: not showing because it is already showing");
    return;
  }
  final boolean requireSim=!SystemProperties.getBoolean("keyguard.no_require_sim",false);
  final boolean absent=mUpdateMonitor.getNextSubIdForState(IccCardConstants.State.ABSENT) != SubscriptionManager.INVALID_SUB_ID;
  final boolean disabled=mUpdateMonitor.getNextSubIdForState(IccCardConstants.State.PERM_DISABLED) != SubscriptionManager.INVALID_SUB_ID;
  final boolean lockedOrMissing=mUpdateMonitor.isSimPinSecure() || ((absent || disabled) && requireSim);
  if (!lockedOrMissing && shouldWaitForProvisioning()) {
    if (DEBUG)     Log.d(TAG,"doKeyguard: not showing because device isn't provisioned" + " and the sim is not locked or missing");
    return;
  }
  if (mLockPatternUtils.isLockScreenDisabled() && !lockedOrMissing) {
    if (DEBUG)     Log.d(TAG,"doKeyguard: not showing because lockscreen is off");
    return;
  }
  if (mLockPatternUtils.checkVoldPassword()) {
    if (DEBUG)     Log.d(TAG,"Not showing lock screen since just decrypted");
    mShowing=false;
    hideLocked();
    return;
  }
  if (DEBUG)   Log.d(TAG,"doKeyguard: showing the lock screen");
  showLocked(options);
}
