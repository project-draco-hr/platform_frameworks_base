{
  final ContentResolver cr=mContext.getContentResolver();
  long displayTimeout=Settings.System.getInt(cr,SCREEN_OFF_TIMEOUT,KEYGUARD_DISPLAY_TIMEOUT_DELAY_DEFAULT);
  final long lockAfterTimeout=Settings.Secure.getInt(cr,Settings.Secure.LOCK_SCREEN_LOCK_AFTER_TIMEOUT,KEYGUARD_LOCK_AFTER_DELAY_DEFAULT);
  final long policyTimeout=mLockPatternUtils.getDevicePolicyManager().getMaximumTimeToLock(null,KeyguardUpdateMonitor.getCurrentUser());
  long timeout;
  if (policyTimeout > 0) {
    displayTimeout=Math.max(displayTimeout,0);
    timeout=Math.min(policyTimeout - displayTimeout,lockAfterTimeout);
  }
 else {
    timeout=lockAfterTimeout;
  }
  return timeout;
}
