{
  final NetworkStats delta=computeStatsDelta(mLastDetailPoll,detail);
  final long timeStart=currentTime - delta.elapsedRealtime;
  final long maxHistory=mDetailMaxHistory.get();
  for (  int uid : delta.getUniqueUids()) {
    final int index=delta.findIndex(IFACE_ALL,uid);
    final long rx=delta.rx[index];
    final long tx=delta.tx[index];
    final NetworkStatsHistory history=findOrCreateDetailLocked(uid);
    history.recordData(timeStart,currentTime,rx,tx);
    history.removeBucketsBefore(currentTime - maxHistory);
  }
  mLastDetailPoll=detail;
}
