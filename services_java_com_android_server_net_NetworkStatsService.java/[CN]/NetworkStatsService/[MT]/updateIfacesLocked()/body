{
  if (LOGV)   Slog.v(TAG,"updateIfacesLocked()");
  performPollLocked(false,false);
  final NetworkState[] states;
  try {
    states=mConnManager.getAllNetworkState();
  }
 catch (  RemoteException e) {
    Slog.w(TAG,"problem reading network state");
    return;
  }
  mActiveIfaces.clear();
  for (  NetworkState state : states) {
    if (state.networkInfo.isConnected()) {
      final String iface=state.linkProperties.getInterfaceName();
      NetworkIdentitySet ident=mActiveIfaces.get(iface);
      if (ident == null) {
        ident=new NetworkIdentitySet();
        mActiveIfaces.put(iface,ident);
      }
      ident.add(NetworkIdentity.buildNetworkIdentity(mContext,state));
    }
  }
}
