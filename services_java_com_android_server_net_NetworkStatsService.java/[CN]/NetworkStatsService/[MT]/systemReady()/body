{
synchronized (mStatsLock) {
    readNetworkDevStatsLocked();
    readNetworkXtStatsLocked();
  }
  final IntentFilter connFilter=new IntentFilter(CONNECTIVITY_ACTION_IMMEDIATE);
  mContext.registerReceiver(mConnReceiver,connFilter,CONNECTIVITY_INTERNAL,mHandler);
  final IntentFilter tetherFilter=new IntentFilter(ACTION_TETHER_STATE_CHANGED);
  mContext.registerReceiver(mTetherReceiver,tetherFilter,CONNECTIVITY_INTERNAL,mHandler);
  final IntentFilter pollFilter=new IntentFilter(ACTION_NETWORK_STATS_POLL);
  mContext.registerReceiver(mPollReceiver,pollFilter,READ_NETWORK_USAGE_HISTORY,mHandler);
  final IntentFilter removedFilter=new IntentFilter(ACTION_UID_REMOVED);
  mContext.registerReceiver(mRemovedReceiver,removedFilter,null,mHandler);
  final IntentFilter shutdownFilter=new IntentFilter(ACTION_SHUTDOWN);
  mContext.registerReceiver(mShutdownReceiver,shutdownFilter);
  try {
    mNetworkManager.registerObserver(mAlertObserver);
  }
 catch (  RemoteException e) {
  }
  mTeleManager.listen(mPhoneListener,LISTEN_DATA_CONNECTION_STATE);
  registerPollAlarmLocked();
  registerGlobalAlert();
  bootstrapStats();
  mDropBox=(DropBoxManager)mContext.getSystemService(Context.DROPBOX_SERVICE);
}
