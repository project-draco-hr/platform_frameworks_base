{
  if (mSettings.getEnabled()) {
    try {
      mNetworkManager.setBandwidthControlEnabled(true);
    }
 catch (    RemoteException e) {
      Slog.e(TAG,"problem enabling bandwidth controls",e);
    }
  }
 else {
    Slog.w(TAG,"detailed network stats disabled");
  }
synchronized (mStatsLock) {
    readNetworkStatsLocked();
  }
  final IntentFilter connFilter=new IntentFilter(CONNECTIVITY_ACTION);
  mContext.registerReceiver(mConnReceiver,connFilter,CONNECTIVITY_INTERNAL,mHandler);
  final IntentFilter pollFilter=new IntentFilter(ACTION_NETWORK_STATS_POLL);
  mContext.registerReceiver(mPollReceiver,pollFilter,READ_NETWORK_USAGE_HISTORY,mHandler);
  final IntentFilter removedFilter=new IntentFilter(ACTION_UID_REMOVED);
  mContext.registerReceiver(mRemovedReceiver,removedFilter,null,mHandler);
  final IntentFilter shutdownFilter=new IntentFilter(ACTION_SHUTDOWN);
  mContext.registerReceiver(mShutdownReceiver,shutdownFilter);
  try {
    registerPollAlarmLocked();
  }
 catch (  RemoteException e) {
    Slog.w(TAG,"unable to register poll alarm");
  }
}
