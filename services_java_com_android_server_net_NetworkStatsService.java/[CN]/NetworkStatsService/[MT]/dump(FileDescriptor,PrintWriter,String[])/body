{
  mContext.enforceCallingOrSelfPermission(DUMP,TAG);
  final HashSet<String> argSet=new HashSet<String>();
  for (  String arg : args) {
    argSet.add(arg);
  }
synchronized (mStatsLock) {
    if (argSet.contains("generate")) {
      generateRandomLocked();
      pw.println("Generated stub stats");
      return;
    }
    if (argSet.contains("poll")) {
      performPollLocked();
      pw.println("Forced poll");
      return;
    }
    pw.println("Active interfaces:");
    for (    String iface : mActiveIface.keySet()) {
      final InterfaceIdentity ident=mActiveIface.get(iface);
      pw.print("  iface=");
      pw.print(iface);
      pw.print(" ident=");
      pw.println(ident.toString());
    }
    pw.println("Known historical stats:");
    for (    InterfaceIdentity ident : mSummaryStats.keySet()) {
      final NetworkStatsHistory stats=mSummaryStats.get(ident);
      pw.print("  ident=");
      pw.println(ident.toString());
      stats.dump("    ",pw);
    }
    if (argSet.contains("detail")) {
      pw.println("Known detail stats:");
      for (int i=0; i < mDetailStats.size(); i++) {
        final int uid=mDetailStats.keyAt(i);
        final NetworkStatsHistory stats=mDetailStats.valueAt(i);
        pw.print("  UID=");
        pw.println(uid);
        stats.dump("    ",pw);
      }
    }
  }
}
