{
  final HashSet<String> unknownIface=Sets.newHashSet();
  final NetworkStats delta=computeStatsDelta(mLastPollNetworkXtSnapshot,networkXtSnapshot,false);
  final long timeStart=currentTime - delta.getElapsedRealtime();
  NetworkStats.Entry entry=null;
  for (int i=0; i < delta.size(); i++) {
    entry=delta.getValues(i,entry);
    final NetworkIdentitySet ident=mActiveIfaces.get(entry.iface);
    if (ident == null) {
      unknownIface.add(entry.iface);
      continue;
    }
    final NetworkStatsHistory history=findOrCreateNetworkXtStatsLocked(ident);
    history.recordData(timeStart,currentTime,entry);
  }
  mLastPollNetworkXtSnapshot=networkXtSnapshot;
  if (LOGD && unknownIface.size() > 0) {
    Slog.w(TAG,"unknown xt interfaces " + unknownIface + ", ignoring those stats");
  }
}
