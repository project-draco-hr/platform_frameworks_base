{
  final long end=mTime.hasCache() ? mTime.currentTimeMillis() : System.currentTimeMillis();
  final long start=end - (4 * HOUR_IN_MILLIS);
  NetworkTemplate template=null;
  NetworkStats.Entry ifaceTotal=null;
  NetworkStats.Entry uidTotal=null;
  template=buildTemplateMobileAll(getActiveSubscriberId(mContext));
  ifaceTotal=getSummaryForNetwork(template,start,end).getTotal(ifaceTotal);
  uidTotal=getSummaryForAllUid(template,start,end,false).getTotal(uidTotal);
  EventLogTags.writeNetstatsMobileSample(ifaceTotal.rxBytes,ifaceTotal.txBytes,ifaceTotal.rxPackets,ifaceTotal.txPackets,uidTotal.rxBytes,uidTotal.txBytes,uidTotal.rxPackets,uidTotal.txPackets);
  template=buildTemplateWifi();
  ifaceTotal=getSummaryForNetwork(template,start,end).getTotal(ifaceTotal);
  uidTotal=getSummaryForAllUid(template,start,end,false).getTotal(uidTotal);
  EventLogTags.writeNetstatsWifiSample(ifaceTotal.rxBytes,ifaceTotal.txBytes,ifaceTotal.rxPackets,ifaceTotal.txPackets,uidTotal.rxBytes,uidTotal.txBytes,uidTotal.rxPackets,uidTotal.txPackets);
}
