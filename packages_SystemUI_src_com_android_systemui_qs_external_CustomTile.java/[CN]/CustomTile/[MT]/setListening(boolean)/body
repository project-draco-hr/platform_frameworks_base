{
  if (mListening == listening)   return;
  mListening=listening;
  try {
    if (listening) {
      setTileIcon();
      refreshState();
      if (!mServiceManager.isActiveTile()) {
        mServiceManager.setBindRequested(true);
        mService.onStartListening();
      }
    }
 else {
      mService.onStopListening();
      if (mIsTokenGranted && !mIsShowingDialog) {
        try {
          if (DEBUG)           Log.d(TAG,"Removing token");
          mWindowManager.removeWindowToken(mToken);
        }
 catch (        RemoteException e) {
        }
        mIsTokenGranted=false;
      }
      mIsShowingDialog=false;
      mServiceManager.setBindRequested(false);
    }
  }
 catch (  RemoteException e) {
  }
}
