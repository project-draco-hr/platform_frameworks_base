{
  final int[] result=new int[mDevices.size()];
  int count=0;
  for (int i=0; i < mDevices.size(); i++) {
    final MtpDeviceRecord device=mDevices.valueAt(i);
    if (device.opened) {
      result[count++]=device.deviceId;
    }
  }
  return Arrays.copyOf(result,count);
}
