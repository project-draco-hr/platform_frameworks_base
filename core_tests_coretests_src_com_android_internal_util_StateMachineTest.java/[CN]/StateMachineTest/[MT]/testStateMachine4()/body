{
  StateMachine4 sm4=new StateMachine4("sm4");
  sm4.start();
  if (sm4.isDbg())   Log.d(TAG,"testStateMachine4 E");
synchronized (sm4) {
    sm4.sendMessage(TEST_CMD_1);
    sm4.sendMessage(TEST_CMD_2);
    try {
      sm4.wait();
    }
 catch (    InterruptedException e) {
      Log.e(TAG,"testStateMachine4: exception while waiting " + e.getMessage());
    }
  }
  assertTrue(sm4.getProcessedMessagesSize() == 2);
  ProcessedMessageInfo pmi;
  pmi=sm4.getProcessedMessageInfo(0);
  assertEquals(TEST_CMD_1,pmi.getWhat());
  assertEquals(sm4.mChildState1,pmi.getState());
  assertEquals(sm4.mChildState1,pmi.getOriginalState());
  pmi=sm4.getProcessedMessageInfo(1);
  assertEquals(TEST_CMD_2,pmi.getWhat());
  assertEquals(sm4.mParentState,pmi.getState());
  assertEquals(sm4.mChildState2,pmi.getOriginalState());
  if (sm4.isDbg())   Log.d(TAG,"testStateMachine4 X");
}
