{
  if (DBG)   Log.d(TAG,"testHsm1 E");
  Hsm1 sm=Hsm1.makeHsm1();
  sm.sendMessage(Hsm1.CMD_1);
  sm.sendMessage(Hsm1.CMD_2);
synchronized (sm) {
    try {
      sm.wait();
    }
 catch (    InterruptedException e) {
      Log.e(TAG,"testHsm1: exception while waiting " + e.getMessage());
    }
  }
  assertEquals(7,sm.getProcessedMessagesCount());
  ProcessedMessageInfo pmi=sm.getProcessedMessageInfo(0);
  assertEquals(Hsm1.CMD_1,pmi.getWhat());
  assertEquals(sm.mS1,pmi.getState());
  assertEquals(sm.mS1,pmi.getOriginalState());
  pmi=sm.getProcessedMessageInfo(1);
  assertEquals(Hsm1.CMD_2,pmi.getWhat());
  assertEquals(sm.mP1,pmi.getState());
  assertEquals(sm.mS1,pmi.getOriginalState());
  pmi=sm.getProcessedMessageInfo(2);
  assertEquals(Hsm1.CMD_2,pmi.getWhat());
  assertEquals(sm.mS2,pmi.getState());
  assertEquals(sm.mS2,pmi.getOriginalState());
  pmi=sm.getProcessedMessageInfo(3);
  assertEquals(Hsm1.CMD_3,pmi.getWhat());
  assertEquals(sm.mS2,pmi.getState());
  assertEquals(sm.mS2,pmi.getOriginalState());
  pmi=sm.getProcessedMessageInfo(4);
  assertEquals(Hsm1.CMD_3,pmi.getWhat());
  assertEquals(sm.mP2,pmi.getState());
  assertEquals(sm.mP2,pmi.getOriginalState());
  pmi=sm.getProcessedMessageInfo(5);
  assertEquals(Hsm1.CMD_4,pmi.getWhat());
  assertEquals(sm.mP2,pmi.getState());
  assertEquals(sm.mP2,pmi.getOriginalState());
  pmi=sm.getProcessedMessageInfo(6);
  assertEquals(Hsm1.CMD_5,pmi.getWhat());
  assertEquals(sm.mP2,pmi.getState());
  assertEquals(sm.mP2,pmi.getOriginalState());
  if (DBG)   Log.d(TAG,"testStateMachineSharedThread X");
}
