{
  final Context context=mContext;
  final Resources res=context.getResources();
  final int barHeight=res.getDimensionPixelSize(com.android.internal.R.dimen.status_bar_height);
  mNotificationPanel=(NotificationPanel)View.inflate(context,R.layout.sysbar_panel_notifications,null);
  mNotificationPanel.setVisibility(View.GONE);
  mNotificationPanel.setOnTouchListener(new TouchOutsideListener(MSG_CLOSE_NOTIFICATION_PANEL,mNotificationPanel));
  mStatusBarView.setIgnoreChildren(0,mNotificationTrigger,mNotificationPanel);
  WindowManager.LayoutParams lp=new WindowManager.LayoutParams(512,ViewGroup.LayoutParams.WRAP_CONTENT,WindowManager.LayoutParams.TYPE_STATUS_BAR_PANEL,WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN | WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM,PixelFormat.TRANSLUCENT);
  lp.gravity=Gravity.BOTTOM | Gravity.RIGHT;
  lp.setTitle("NotificationPanel");
  lp.windowAnimations=com.android.internal.R.style.Animation_SlidingCard;
  WindowManagerImpl.getDefault().addView(mNotificationPanel,lp);
  mNotificationPeekWindow=(NotificationPanel)View.inflate(context,R.layout.sysbar_panel_notification_peek,null);
  mNotificationPeekRow=(ViewGroup)mNotificationPeekWindow.findViewById(R.id.content);
  mNotificationPeekWindow.setVisibility(View.GONE);
  mNotificationPeekWindow.setOnTouchListener(new TouchOutsideListener(MSG_CLOSE_NOTIFICATION_PANEL,mNotificationPeekWindow));
  mNotificationPeekScrubRight=new LayoutTransition();
  mNotificationPeekScrubRight.setAnimator(LayoutTransition.APPEARING,ObjectAnimator.ofInt(null,"left",-512,0));
  mNotificationPeekScrubRight.setAnimator(LayoutTransition.DISAPPEARING,ObjectAnimator.ofInt(null,"left",-512,0));
  mNotificationPeekScrubRight.setDuration(500);
  mNotificationPeekScrubLeft=new LayoutTransition();
  mNotificationPeekScrubLeft.setAnimator(LayoutTransition.APPEARING,ObjectAnimator.ofInt(null,"left",512,0));
  mNotificationPeekScrubLeft.setAnimator(LayoutTransition.DISAPPEARING,ObjectAnimator.ofInt(null,"left",512,0));
  mNotificationPeekScrubLeft.setDuration(500);
  lp=new WindowManager.LayoutParams(512,ViewGroup.LayoutParams.WRAP_CONTENT,WindowManager.LayoutParams.TYPE_STATUS_BAR_PANEL,WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN | WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM,PixelFormat.TRANSLUCENT);
  lp.gravity=Gravity.BOTTOM | Gravity.RIGHT;
  lp.setTitle("NotificationPeekWindow");
  lp.windowAnimations=com.android.internal.R.style.Animation_Toast;
  WindowManagerImpl.getDefault().addView(mNotificationPeekWindow,lp);
  mSystemPanel=(SystemPanel)View.inflate(context,R.layout.sysbar_panel_system,null);
  mSystemPanel.setVisibility(View.GONE);
  mSystemPanel.setOnTouchListener(new TouchOutsideListener(MSG_CLOSE_SYSTEM_PANEL,mSystemPanel));
  mStatusBarView.setIgnoreChildren(1,mSystemInfo,mSystemPanel);
  lp=new WindowManager.LayoutParams(800,ViewGroup.LayoutParams.WRAP_CONTENT,WindowManager.LayoutParams.TYPE_STATUS_BAR_PANEL,WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN | WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM,PixelFormat.TRANSLUCENT);
  lp.gravity=Gravity.BOTTOM | Gravity.CENTER_HORIZONTAL;
  lp.setTitle("SystemPanel");
  lp.windowAnimations=com.android.internal.R.style.Animation_SlidingCard;
  WindowManagerImpl.getDefault().addView(mSystemPanel,lp);
  mSystemPanel.setBar(this);
  if (USE_2D_RECENTS) {
    mRecentsPanel=(RecentAppsPanel)View.inflate(context,R.layout.sysbar_panel_recent,null);
    mRecentsPanel.setVisibility(View.GONE);
    mRecentsPanel.setOnTouchListener(new TouchOutsideListener(MSG_CLOSE_RECENTS_PANEL,mRecentsPanel));
    mStatusBarView.setIgnoreChildren(2,mRecentButton,mRecentsPanel);
    lp=new WindowManager.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,ViewGroup.LayoutParams.WRAP_CONTENT,WindowManager.LayoutParams.TYPE_STATUS_BAR_PANEL,WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN | WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM,PixelFormat.TRANSLUCENT);
    lp.gravity=Gravity.BOTTOM | Gravity.LEFT;
    lp.setTitle("RecentsPanel");
    lp.windowAnimations=com.android.internal.R.style.Animation_SlidingCard;
    WindowManagerImpl.getDefault().addView(mRecentsPanel,lp);
    mRecentsPanel.setBar(this);
  }
}
