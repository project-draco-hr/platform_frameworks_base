{
  if (DEBUG)   Slog.d(TAG,"addNotification(" + key + " -> "+ notification+ ")");
  addNotificationViews(key,notification);
  boolean immersive=false;
  try {
    immersive=ActivityManagerNative.getDefault().isTopActivityImmersive();
    Slog.d(TAG,"Top activity is " + (immersive ? "immersive" : "not immersive"));
  }
 catch (  RemoteException ex) {
  }
  if (immersive) {
  }
 else   if (notification.notification.fullScreenIntent != null) {
    Slog.d(TAG,"Notification has fullScreenIntent and activity is not immersive;" + " sending fullScreenIntent");
    try {
      notification.notification.fullScreenIntent.send();
    }
 catch (    PendingIntent.CanceledException e) {
    }
  }
 else {
    tick(notification);
  }
  setAreThereNotifications();
}
