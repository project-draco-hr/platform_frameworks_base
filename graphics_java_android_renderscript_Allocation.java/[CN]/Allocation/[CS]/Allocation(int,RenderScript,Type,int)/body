{
  super(id,rs);
  if ((usage & ~(USAGE_SCRIPT | USAGE_GRAPHICS_TEXTURE | USAGE_GRAPHICS_VERTEX| USAGE_GRAPHICS_CONSTANTS| USAGE_GRAPHICS_RENDER_TARGET| USAGE_IO_INPUT| USAGE_IO_OUTPUT| USAGE_SHARED)) != 0) {
    throw new RSIllegalArgumentException("Unknown usage specified.");
  }
  if ((usage & USAGE_IO_INPUT) != 0) {
    mWriteAllowed=false;
    if ((usage & ~(USAGE_IO_INPUT | USAGE_GRAPHICS_TEXTURE | USAGE_SCRIPT)) != 0) {
      throw new RSIllegalArgumentException("Invalid usage combination.");
    }
  }
  mType=t;
  mUsage=usage;
  mSize=mType.getCount() * mType.getElement().getBytesSize();
  if (t != null) {
    updateCacheInfo(t);
  }
  try {
    RenderScript.registerNativeAllocation.invoke(RenderScript.sRuntime,mSize);
  }
 catch (  Exception e) {
    Log.e(RenderScript.LOG_TAG,"Couldn't invoke registerNativeAllocation:" + e);
    throw new RSRuntimeException("Couldn't invoke registerNativeAllocation:" + e);
  }
}
