{
  rs.validate();
  InputStream is=null;
  try {
    final TypedValue value=new TypedValue();
    is=res.openRawResource(id,value);
    int asset=((AssetManager.AssetInputStream)is).getAssetInt();
    int aId=rs.nAllocationCreateFromAssetStream(dstFmt.getID(),genMips,asset);
    if (aId == 0) {
      throw new RSRuntimeException("Load failed.");
    }
    Allocation alloc=new Allocation(aId,rs,null);
    alloc.updateFromNative();
    return alloc;
  }
  finally {
    if (is != null) {
      try {
        is.close();
      }
 catch (      IOException e) {
      }
    }
  }
}
