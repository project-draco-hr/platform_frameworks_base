{
synchronized (mBufferLock) {
    invalidateByteBuffer(mCachedInputBuffers,index);
    mDequeuedInputBuffers.remove(index);
  }
  try {
    native_queueInputBuffer(index,offset,size,presentationTimeUs,flags);
  }
 catch (  CryptoException|IllegalStateException e) {
    revalidateByteBuffer(mCachedInputBuffers,index);
    throw e;
  }
}
