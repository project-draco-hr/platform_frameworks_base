{
  ByteBuffer newBuffer=getBuffer(true,index);
synchronized (mBufferLock) {
    if (updateDequeuedByteBuffer(mDequeuedInputBuffers,index,newBuffer)) {
      updateDequeuedImage(mDequeuedInputImages,index,null);
      invalidateByteBuffer(mCachedInputBuffers,index);
      return newBuffer;
    }
  }
  return null;
}
