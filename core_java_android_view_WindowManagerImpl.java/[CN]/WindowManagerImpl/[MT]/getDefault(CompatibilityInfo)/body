{
  if (compatInfo == null || (!compatInfo.isScalingRequired() && compatInfo.supportsScreen())) {
    return sWindowManager;
  }
synchronized (sLock) {
    WindowManager wm=sCompatWindowManagers.get(compatInfo);
    if (wm == null) {
      wm=new CompatModeWrapper(sWindowManager,compatInfo);
      sCompatWindowManagers.put(compatInfo,wm);
    }
    return wm;
  }
}
