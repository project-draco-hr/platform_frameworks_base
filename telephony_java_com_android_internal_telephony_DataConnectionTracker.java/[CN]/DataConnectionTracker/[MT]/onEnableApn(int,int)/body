{
  if (DBG) {
    log("EVENT_APN_ENABLE_REQUEST apnId=" + apnId + ", apnType="+ apnIdToType(apnId)+ ", enabled="+ enabled+ ", dataEnabled = "+ dataEnabled[apnId]+ ", enabledCount = "+ enabledCount+ ", isApnTypeActive = "+ isApnTypeActive(apnIdToType(apnId)));
  }
  if (enabled == ENABLED) {
synchronized (this) {
      if (!dataEnabled[apnId]) {
        dataEnabled[apnId]=true;
        enabledCount++;
      }
    }
    String type=apnIdToType(apnId);
    if (!isApnTypeActive(type)) {
      mRequestedApnType=type;
      onEnableNewApn();
    }
 else {
      notifyApnIdUpToCurrent(Phone.REASON_APN_SWITCHED,apnId);
    }
  }
 else {
    boolean didDisable=false;
synchronized (this) {
      if (dataEnabled[apnId]) {
        dataEnabled[apnId]=false;
        enabledCount--;
        didDisable=true;
      }
    }
    if (didDisable) {
      if (enabledCount == 0) {
        onCleanUpConnection(true,apnId,Phone.REASON_DATA_DISABLED);
      }
      notifyApnIdDisconnected(Phone.REASON_DATA_DISABLED,apnId);
      if (dataEnabled[APN_DEFAULT_ID] == true && !isApnTypeActive(Phone.APN_TYPE_DEFAULT)) {
        mRequestedApnType=Phone.APN_TYPE_DEFAULT;
        onEnableNewApn();
      }
    }
  }
}
