{
  boolean prevEnabled=getAnyDataEnabled();
  if (mInternalDataEnabled != enable) {
synchronized (this) {
      mInternalDataEnabled=enable;
    }
    if (prevEnabled != getAnyDataEnabled()) {
      if (!prevEnabled) {
        resetAllRetryCounts();
        onTrySetupData(Phone.REASON_DATA_ENABLED);
      }
 else {
        cleanUpAllConnections();
      }
    }
  }
}
