{
  final MtpDevice device=getDevice(deviceId);
synchronized (device) {
    final int[] storageIds=device.getStorageIds();
    if (storageIds == null) {
      throw new IOException("Failed to obtain storage IDs.");
    }
    final MtpRoot[] results=new MtpRoot[storageIds.length];
    for (int i=0; i < storageIds.length; i++) {
      results[i]=new MtpRoot(device.getDeviceId(),device.getDeviceInfo().getModel(),device.getStorageInfo(storageIds[i]));
    }
    return results;
  }
}
