{
  if (!mBar.isDeviceProvisioned())   return;
  mBar.animateCollapsePanels(CommandQueue.FLAG_EXCLUDE_SEARCH_PANEL);
  final Intent intent=((SearchManager)mContext.getSystemService(Context.SEARCH_SERVICE)).getAssistIntent(mContext,true,UserHandle.USER_CURRENT);
  if (intent == null)   return;
  try {
    final ActivityOptions opts=ActivityOptions.makeCustomAnimation(mContext,R.anim.search_launch_enter,R.anim.search_launch_exit);
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    AsyncTask.execute(new Runnable(){
      @Override public void run(){
        mContext.startActivityAsUser(intent,opts.toBundle(),new UserHandle(UserHandle.USER_CURRENT));
      }
    }
);
  }
 catch (  ActivityNotFoundException e) {
    Log.w(TAG,"Activity not found for " + intent.getAction());
  }
}
