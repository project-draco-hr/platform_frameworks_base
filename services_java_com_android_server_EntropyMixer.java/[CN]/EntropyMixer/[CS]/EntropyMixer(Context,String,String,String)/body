{
  if (randomDevice == null) {
    throw new NullPointerException("randomDevice");
  }
  if (hwRandomDevice == null) {
    throw new NullPointerException("hwRandomDevice");
  }
  if (entropyFile == null) {
    throw new NullPointerException("entropyFile");
  }
  this.randomDevice=randomDevice;
  this.hwRandomDevice=hwRandomDevice;
  this.entropyFile=entropyFile;
  loadInitialEntropy();
  addDeviceSpecificEntropy();
  addHwRandomEntropy();
  writeEntropy();
  scheduleEntropyWriter();
  IntentFilter broadcastFilter=new IntentFilter(Intent.ACTION_SHUTDOWN);
  broadcastFilter.addAction(Intent.ACTION_POWER_CONNECTED);
  broadcastFilter.addAction(Intent.ACTION_REBOOT);
  context.registerReceiver(mBroadcastReceiver,broadcastFilter);
}
