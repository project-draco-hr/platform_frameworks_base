{
  mHistoryBaseTime=in.readLong();
  mHistoryBuffer.setDataSize(0);
  mHistoryBuffer.setDataPosition(0);
  int bufSize=in.readInt();
  int curPos=in.dataPosition();
  if (bufSize >= (MAX_MAX_HISTORY_BUFFER * 3)) {
    Slog.w(TAG,"File corrupt: history data buffer too large " + bufSize);
  }
 else   if ((bufSize & ~3) != bufSize) {
    Slog.w(TAG,"File corrupt: history data buffer not aligned " + bufSize);
  }
 else {
    if (DEBUG_HISTORY)     Slog.i(TAG,"***************** READING NEW HISTORY: " + bufSize + " bytes at "+ curPos);
    mHistoryBuffer.appendFrom(in,curPos,bufSize);
    in.setDataPosition(curPos + bufSize);
  }
  long oldnow=SystemClock.elapsedRealtime() - (5 * 60 * 1000);
  if (oldnow > 0) {
    mHistoryBaseTime-=oldnow;
  }
}
