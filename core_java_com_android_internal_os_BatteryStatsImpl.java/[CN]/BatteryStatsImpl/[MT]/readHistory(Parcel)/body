{
  mHistory=mHistoryEnd=mHistoryCache=null;
  mHistoryBaseTime=0;
  long time;
  while (in.dataAvail() > 0 && (time=in.readLong()) >= 0) {
    HistoryItem rec=new HistoryItem(time,in);
    addHistoryRecordLocked(rec);
    if (rec.time > mHistoryBaseTime) {
      mHistoryBaseTime=rec.time;
    }
  }
  long oldnow=SystemClock.elapsedRealtime() - (5 * 60 * 100);
  if (oldnow > 0) {
    mHistoryBaseTime-=oldnow;
  }
}
