{
  IWifiManager wifiManager=IWifiManager.Stub.asInterface(ServiceManager.getService(Context.WIFI_SERVICE));
  if (wifiManager == null) {
    return;
  }
  WifiActivityEnergyInfo info;
  try {
    info=wifiManager.reportActivityInfo();
  }
 catch (  RemoteException e) {
    return;
  }
  if (info == null || !info.isValid() || !mOnBatteryInternal) {
    return;
  }
  mWifiActivityCounters[CONTROLLER_RX_TIME].addCountLocked(info.getControllerRxTimeMillis());
  mWifiActivityCounters[CONTROLLER_TX_TIME].addCountLocked(info.getControllerTxTimeMillis());
  mWifiActivityCounters[CONTROLLER_IDLE_TIME].addCountLocked(info.getControllerIdleTimeMillis());
  mWifiActivityCounters[CONTROLLER_ENERGY].addCountLocked(info.getControllerEnergyUsed());
}
