{
  if (!mHaveBatteryLevel || !mRecordingHistory) {
    return;
  }
  if (mNumHistoryItems >= MAX_HISTORY_ITEMS) {
    if (mHistoryEnd != null && mHistoryEnd.batteryLevel == mHistoryCur.batteryLevel) {
      return;
    }
  }
  addHistoryRecordLocked(curTime,HistoryItem.CMD_UPDATE);
}
