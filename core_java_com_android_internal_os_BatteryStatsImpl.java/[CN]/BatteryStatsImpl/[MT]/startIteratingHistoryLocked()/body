{
  if (DEBUG_HISTORY)   Slog.i(TAG,"ITERATING: buff size=" + mHistoryBuffer.dataSize() + " pos="+ mHistoryBuffer.dataPosition());
  if (mHistoryBuffer.dataSize() <= 0) {
    return false;
  }
  mHistoryBuffer.setDataPosition(0);
  mReadOverflow=false;
  mIteratingHistory=true;
  mReadHistoryStrings=new String[mHistoryTagPool.size()];
  mReadHistoryUids=new int[mHistoryTagPool.size()];
  mReadHistoryChars=0;
  for (  HashMap.Entry<HistoryTag,Integer> ent : mHistoryTagPool.entrySet()) {
    final HistoryTag tag=ent.getKey();
    final int idx=ent.getValue();
    mReadHistoryStrings[idx]=tag.string;
    mReadHistoryUids[idx]=tag.uid;
    mReadHistoryChars+=tag.string.length() + 1;
  }
  return true;
}
