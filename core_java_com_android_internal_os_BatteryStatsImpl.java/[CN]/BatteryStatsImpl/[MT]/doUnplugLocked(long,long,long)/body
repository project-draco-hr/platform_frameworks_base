{
  NetworkStats.Entry entry=null;
  final NetworkStats uidStats=getNetworkStatsDetailGroupedByUid();
  final int size=uidStats.size();
  for (int i=0; i < size; i++) {
    entry=uidStats.getValues(i,entry);
    final Uid u=mUidStats.get(entry.uid);
    if (u == null)     continue;
    u.mStartedTcpBytesReceived=entry.rxBytes;
    u.mStartedTcpBytesSent=entry.txBytes;
    u.mTcpBytesReceivedAtLastUnplug=u.mCurrentTcpBytesReceived;
    u.mTcpBytesSentAtLastUnplug=u.mCurrentTcpBytesSent;
  }
  for (int i=mUnpluggables.size() - 1; i >= 0; i--) {
    mUnpluggables.get(i).unplug(elapsedRealtime,batteryUptime,batteryRealtime);
  }
  final NetworkStats ifaceStats=getNetworkStatsSummary();
  entry=ifaceStats.getTotal(entry,mMobileIfaces);
  doDataUnplug(mMobileDataRx,entry.rxBytes);
  doDataUnplug(mMobileDataTx,entry.txBytes);
  entry=ifaceStats.getTotal(entry);
  doDataUnplug(mTotalDataRx,entry.rxBytes);
  doDataUnplug(mTotalDataTx,entry.txBytes);
  mRadioDataStart=getCurrentRadioDataUptime();
  mRadioDataUptime=0;
  mBluetoothPingStart=getCurrentBluetoothPingCount();
  mBluetoothPingCount=0;
}
