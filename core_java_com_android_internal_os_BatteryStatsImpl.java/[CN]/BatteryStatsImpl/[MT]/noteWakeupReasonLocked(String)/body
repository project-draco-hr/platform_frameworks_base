{
  final long elapsedRealtime=mClocks.elapsedRealtime();
  final long uptime=mClocks.uptimeMillis();
  if (DEBUG_HISTORY)   Slog.v(TAG,"Wakeup reason \"" + reason + "\": "+ Integer.toHexString(mHistoryCur.states));
  aggregateLastWakeupUptimeLocked(uptime);
  mHistoryCur.wakeReasonTag=mHistoryCur.localWakeReasonTag;
  mHistoryCur.wakeReasonTag.string=reason;
  mHistoryCur.wakeReasonTag.uid=0;
  mLastWakeupReason=reason;
  mLastWakeupUptimeMs=uptime;
  addHistoryRecordLocked(elapsedRealtime,uptime);
}
