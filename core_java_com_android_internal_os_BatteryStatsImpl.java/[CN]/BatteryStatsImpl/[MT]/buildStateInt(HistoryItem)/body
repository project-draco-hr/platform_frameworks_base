{
  int plugType=0;
  if ((h.batteryPlugType & BatteryManager.BATTERY_PLUGGED_AC) != 0) {
    plugType=1;
  }
 else   if ((h.batteryPlugType & BatteryManager.BATTERY_PLUGGED_USB) != 0) {
    plugType=2;
  }
 else   if ((h.batteryPlugType & BatteryManager.BATTERY_PLUGGED_WIRELESS) != 0) {
    plugType=3;
  }
  return ((h.batteryStatus & STATE_BATTERY_STATUS_MASK) << STATE_BATTERY_STATUS_SHIFT) | ((h.batteryHealth & STATE_BATTERY_HEALTH_MASK) << STATE_BATTERY_HEALTH_SHIFT) | ((plugType & STATE_BATTERY_PLUG_MASK) << STATE_BATTERY_PLUG_SHIFT)| (h.states & (~STATE_BATTERY_MASK));
}
