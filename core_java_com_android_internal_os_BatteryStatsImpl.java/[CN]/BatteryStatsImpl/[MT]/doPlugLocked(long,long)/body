{
  for (int iu=mUidStats.size() - 1; iu >= 0; iu--) {
    Uid u=mUidStats.valueAt(iu);
    if (u.mStartedTcpBytesReceived >= 0) {
      u.mCurrentTcpBytesReceived=u.computeCurrentTcpBytesReceived();
      u.mStartedTcpBytesReceived=-1;
    }
    if (u.mStartedTcpBytesSent >= 0) {
      u.mCurrentTcpBytesSent=u.computeCurrentTcpBytesSent();
      u.mStartedTcpBytesSent=-1;
    }
  }
  for (int i=mUnpluggables.size() - 1; i >= 0; i--) {
    mUnpluggables.get(i).plug(batteryUptime,batteryRealtime);
  }
  doDataPlug(mMobileDataRx,TrafficStats.getMobileRxBytes());
  doDataPlug(mMobileDataTx,TrafficStats.getMobileTxBytes());
  doDataPlug(mTotalDataRx,TrafficStats.getTotalRxBytes());
  doDataPlug(mTotalDataTx,TrafficStats.getTotalTxBytes());
  mRadioDataUptime=getRadioDataUptime();
  mRadioDataStart=-1;
  mBluetoothPingCount=getBluetoothPingCount();
  mBluetoothPingStart=-1;
}
