{
  int bin;
  if (!signalStrength.isGsm()) {
    int dBm=signalStrength.getCdmaDbm();
    if (dBm >= -75)     bin=SIGNAL_STRENGTH_GREAT;
 else     if (dBm >= -85)     bin=SIGNAL_STRENGTH_GOOD;
 else     if (dBm >= -95)     bin=SIGNAL_STRENGTH_MODERATE;
 else     if (dBm >= -100)     bin=SIGNAL_STRENGTH_POOR;
 else     bin=SIGNAL_STRENGTH_NONE_OR_UNKNOWN;
  }
 else {
    int asu=signalStrength.getGsmSignalStrength();
    if (asu < 0 || asu >= 99)     bin=SIGNAL_STRENGTH_NONE_OR_UNKNOWN;
 else     if (asu >= 16)     bin=SIGNAL_STRENGTH_GREAT;
 else     if (asu >= 8)     bin=SIGNAL_STRENGTH_GOOD;
 else     if (asu >= 4)     bin=SIGNAL_STRENGTH_MODERATE;
 else     bin=SIGNAL_STRENGTH_POOR;
  }
  updateAllPhoneStateLocked(mPhoneServiceStateRaw,mPhoneSimStateRaw,bin);
}
