{
  for (int iu=mUidStats.size() - 1; iu >= 0; iu--) {
    Uid u=mUidStats.valueAt(iu);
    u.mStartedTcpBytesReceived=TrafficStats.getUidRxBytes(u.mUid);
    u.mStartedTcpBytesSent=TrafficStats.getUidTxBytes(u.mUid);
    u.mTcpBytesReceivedAtLastUnplug=u.mCurrentTcpBytesReceived;
    u.mTcpBytesSentAtLastUnplug=u.mCurrentTcpBytesSent;
  }
  for (int i=mUnpluggables.size() - 1; i >= 0; i--) {
    mUnpluggables.get(i).unplug(batteryUptime,batteryRealtime);
  }
  doDataUnplug(mMobileDataRx,TrafficStats.getMobileRxBytes());
  doDataUnplug(mMobileDataTx,TrafficStats.getMobileTxBytes());
  doDataUnplug(mTotalDataRx,TrafficStats.getTotalRxBytes());
  doDataUnplug(mTotalDataTx,TrafficStats.getTotalTxBytes());
  mRadioDataStart=getCurrentRadioDataUptime();
  mRadioDataUptime=0;
  mBluetoothPingStart=getCurrentBluetoothPingCount();
  mBluetoothPingCount=0;
}
