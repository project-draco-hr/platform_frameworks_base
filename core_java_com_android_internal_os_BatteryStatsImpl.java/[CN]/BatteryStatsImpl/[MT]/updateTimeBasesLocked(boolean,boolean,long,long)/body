{
  mOnBatteryTimeBase.setRunning(unplugged,uptime,realtime);
  boolean unpluggedScreenOff=unplugged && screenOff;
  if (unpluggedScreenOff != mOnBatteryScreenOffTimeBase.isRunning()) {
    updateKernelWakelocksLocked();
    requestWakelockCpuUpdate();
    if (!unpluggedScreenOff) {
      mDistributeWakelockCpu=true;
    }
    mOnBatteryScreenOffTimeBase.setRunning(unpluggedScreenOff,uptime,realtime);
  }
}
