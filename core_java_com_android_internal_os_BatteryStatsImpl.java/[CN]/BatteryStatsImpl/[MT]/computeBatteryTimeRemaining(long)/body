{
  if (!mOnBattery) {
    return -1;
  }
  int discharge=(getLowDischargeAmountSinceCharge() + getHighDischargeAmountSinceCharge()) / 2;
  if (discharge < 2) {
    return -1;
  }
  long duration=computeBatteryRealtime(curTime,STATS_SINCE_CHARGED);
  if (duration < 1000 * 1000) {
    return -1;
  }
  long usPerLevel=duration / discharge;
  return usPerLevel * mCurrentBatteryLevel;
}
