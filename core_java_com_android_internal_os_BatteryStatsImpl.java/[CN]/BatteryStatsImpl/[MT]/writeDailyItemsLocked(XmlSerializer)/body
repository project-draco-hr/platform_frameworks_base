{
  StringBuilder sb=new StringBuilder(64);
  out.startDocument(null,true);
  out.startTag(null,"daily-items");
  for (int i=0; i < mDailyItems.size(); i++) {
    final DailyItem dit=mDailyItems.get(i);
    out.startTag(null,"item");
    out.attribute(null,"start",Long.toString(dit.mStartTime));
    out.attribute(null,"end",Long.toString(dit.mEndTime));
    writeDailyLevelSteps(out,"dis",dit.mDischargeSteps,sb);
    writeDailyLevelSteps(out,"chg",dit.mChargeSteps,sb);
    if (dit.mPackageChanges != null) {
      for (int j=0; j < dit.mPackageChanges.size(); j++) {
        PackageChange pc=dit.mPackageChanges.get(j);
        if (pc.mUpdate) {
          out.startTag(null,"upd");
          out.attribute(null,"pkg",pc.mPackageName);
          out.attribute(null,"ver",Integer.toString(pc.mVersionCode));
          out.endTag(null,"upd");
        }
 else {
          out.startTag(null,"rem");
          out.attribute(null,"pkg",pc.mPackageName);
          out.endTag(null,"rem");
        }
      }
    }
    out.endTag(null,"item");
  }
  out.endTag(null,"daily-items");
  out.endDocument();
}
