{
  for (int i=0; i < HistoryItem.EVENT_COUNT; i++) {
    HashMap<String,SparseBooleanArray> active=mActiveEvents[i];
    if (active == null) {
      continue;
    }
    for (    HashMap.Entry<String,SparseBooleanArray> ent : active.entrySet()) {
      SparseBooleanArray uids=ent.getValue();
      for (int j=0; j < uids.size(); j++) {
        if (uids.valueAt(j)) {
          addHistoryEventLocked(elapsedRealtimeMs,uptimeMs,i,ent.getKey(),uids.keyAt(j));
        }
      }
    }
  }
}
