{
  long val;
  if (which == STATS_LAST) {
    val=mLastTotalTime;
  }
 else {
    val=computeRunTimeLocked(now);
    if (which != STATS_UNPLUGGED) {
      val+=mTotalTimeAtLastUnplug;
    }
    if ((which == STATS_CURRENT) || (which == STATS_UNPLUGGED)) {
      val-=mLoadedTotalTime;
    }
  }
  return val;
}
