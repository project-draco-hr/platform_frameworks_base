{
  if (DEBUG)   Log.d(TAG,"Downloading XTRA data from " + url);
  AndroidHttpClient client=null;
  try {
    if (DEBUG)     Log.d(TAG,"XTRA user agent: " + mUserAgent);
    client=AndroidHttpClient.newInstance(mUserAgent);
    HttpUriRequest req=new HttpGet(url);
    if (isProxySet) {
      HttpHost proxy=new HttpHost(proxyHost,proxyPort);
      ConnRouteParams.setDefaultProxy(req.getParams(),proxy);
    }
    req.addHeader("Accept","*/*, application/vnd.wap.mms-message, application/vnd.wap.sic");
    req.addHeader("x-wap-profile","http://www.openmobilealliance.org/tech/profiles/UAPROF/ccppschema-20021212#");
    HttpResponse response=client.execute(req);
    StatusLine status=response.getStatusLine();
    if (status.getStatusCode() != 200) {
      if (DEBUG)       Log.d(TAG,"HTTP error: " + status.getReasonPhrase());
      return null;
    }
    HttpEntity entity=response.getEntity();
    byte[] body=null;
    if (entity != null) {
      try {
        if (entity.getContentLength() > 0) {
          body=new byte[(int)entity.getContentLength()];
          DataInputStream dis=new DataInputStream(entity.getContent());
          try {
            dis.readFully(body);
          }
  finally {
            try {
              dis.close();
            }
 catch (            IOException e) {
              Log.e(TAG,"Unexpected IOException.",e);
            }
          }
        }
      }
  finally {
        if (entity != null) {
          entity.consumeContent();
        }
      }
    }
    return body;
  }
 catch (  Exception e) {
    if (DEBUG)     Log.d(TAG,"error " + e);
  }
 finally {
    if (client != null) {
      client.close();
    }
  }
  return null;
}
