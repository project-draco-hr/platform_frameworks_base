{
  String entry=mPasswordEntry.getText().toString();
  boolean wrongPassword=true;
  if (mLockPatternUtils.checkPassword(entry)) {
    mCallback.reportSuccessfulUnlockAttempt();
    KeyStore.getInstance().password(entry);
    mCallback.dismiss(true);
    wrongPassword=false;
  }
 else   if (entry.length() > MINIMUM_PASSWORD_LENGTH_BEFORE_REPORT) {
    mCallback.reportFailedUnlockAttempt();
    if (0 == (mCallback.getFailedAttempts() % LockPatternUtils.FAILED_ATTEMPTS_BEFORE_TIMEOUT)) {
      long deadline=mLockPatternUtils.setLockoutAttemptDeadline();
      handleAttemptLockout(deadline);
    }
  }
  mNavigationManager.setMessage(wrongPassword ? (mIsAlpha ? R.string.kg_wrong_password : R.string.kg_wrong_pin) : 0);
  mPasswordEntry.setText("");
}
