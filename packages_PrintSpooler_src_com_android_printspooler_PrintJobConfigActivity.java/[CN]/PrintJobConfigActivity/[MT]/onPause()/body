{
  if (isFinishing()) {
    if (mController != null && mController.hasStarted()) {
      mController.finish();
    }
    if (mEditor != null && mEditor.isPrintConfirmed() && mController != null && mController.isFinished()) {
      mSpoolerProvider.getSpooler().setPrintJobState(mPrintJobId,PrintJobInfo.STATE_QUEUED,null);
    }
 else {
      mSpoolerProvider.getSpooler().setPrintJobState(mPrintJobId,PrintJobInfo.STATE_CANCELED,null);
    }
    if (mGeneratingPrintJobDialog != null) {
      mGeneratingPrintJobDialog.dismiss();
      mGeneratingPrintJobDialog=null;
    }
    mIPrintDocumentAdapter.unlinkToDeath(mDeathRecipient,0);
    mSpoolerProvider.destroy();
  }
  super.onPause();
}
