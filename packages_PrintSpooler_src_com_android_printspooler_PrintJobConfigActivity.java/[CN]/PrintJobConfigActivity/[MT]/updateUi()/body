{
  final int selectedIndex=mDestinationSpinner.getSelectedItemPosition();
  PrinterInfo printer=mDestinationSpinnerAdapter.getItem(selectedIndex).value;
  printer.getDefaults(mPrintAttributes);
  mCopiesEditText.setText(String.valueOf(Math.max(mPrintAttributes.getCopies(),MIN_COPIES)));
  mCopiesEditText.selectAll();
  mMediaSizeSpinnerAdapter.clear();
  List<MediaSize> mediaSizes=printer.getMediaSizes();
  final int mediaSizeCount=mediaSizes.size();
  for (int i=0; i < mediaSizeCount; i++) {
    MediaSize mediaSize=mediaSizes.get(i);
    mMediaSizeSpinnerAdapter.add(new SpinnerItem<MediaSize>(mediaSize,mediaSize.getLabel()));
  }
  final int selectedMediaSizeIndex=mediaSizes.indexOf(mPrintAttributes.getMediaSize());
  mMediaSizeSpinner.setOnItemSelectedListener(null);
  mMediaSizeSpinner.setSelection(selectedMediaSizeIndex);
  final int colorModes=printer.getColorModes();
  mColorModeSpinnerAdapter.clear();
  String[] colorModeLabels=getResources().getStringArray(R.array.color_mode_labels);
  int remainingColorModes=colorModes;
  while (remainingColorModes != 0) {
    final int colorBitOffset=Integer.numberOfTrailingZeros(remainingColorModes);
    final int colorMode=1 << colorBitOffset;
    remainingColorModes&=~colorMode;
    mColorModeSpinnerAdapter.add(new SpinnerItem<Integer>(colorMode,colorModeLabels[colorBitOffset]));
  }
  final int selectedColorModeIndex=Integer.numberOfTrailingZeros((colorModes & mPrintAttributes.getColorMode()));
  mColorModeSpinner.setSelection(selectedColorModeIndex);
  final int orientations=printer.getOrientations();
  mOrientationSpinnerAdapter.clear();
  String[] orientationLabels=getResources().getStringArray(R.array.orientation_labels);
  int remainingOrientations=orientations;
  while (remainingOrientations != 0) {
    final int orientationBitOffset=Integer.numberOfTrailingZeros(remainingOrientations);
    final int orientation=1 << orientationBitOffset;
    remainingOrientations&=~orientation;
    mOrientationSpinnerAdapter.add(new SpinnerItem<Integer>(orientation,orientationLabels[orientationBitOffset]));
  }
  final int selectedOrientationIndex=Integer.numberOfTrailingZeros((orientations & mPrintAttributes.getOrientation()));
  mOrientationSpinner.setSelection(selectedOrientationIndex);
}
