{
  if (!mStarted) {
    return;
  }
  mPrintSpooler.setPrintJobAttributes(mPrintJobId,mPrintAttributes);
  mRemotePrintAdapter.layout(new PrintAttributes.Builder().create(),mPrintAttributes,new LayoutResultCallback(){
    @Override public void onLayoutFinished(    PrintDocumentInfo info,    boolean changed){
      mPrintDocumentInfo=info;
      mPrintSpooler.setPrintJobPrintDocumentInfo(mPrintJobId,info);
      final List<PageRange> pages=new ArrayList<PageRange>();
      pages.add(PageRange.ALL_PAGES);
      mRemotePrintAdapter.write(pages,new WriteResultCallback(){
        @Override public void onWriteFinished(        List<PageRange> pages){
          updatePrintPreview(mRemotePrintAdapter.getFile());
        }
        @Override public void onWriteFailed(        CharSequence error){
          Log.e(LOG_TAG,"Error write layout: " + error);
          finishActivity(Activity.RESULT_CANCELED);
        }
      }
);
    }
    @Override public void onLayoutFailed(    CharSequence error){
      Log.e(LOG_TAG,"Error during layout: " + error);
      finishActivity(Activity.RESULT_CANCELED);
    }
  }
,new Bundle());
}
