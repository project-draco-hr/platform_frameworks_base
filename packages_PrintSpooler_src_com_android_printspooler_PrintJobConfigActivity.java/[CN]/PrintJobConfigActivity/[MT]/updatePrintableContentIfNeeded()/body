{
  if (!mStarted) {
    return;
  }
  mPrintSpooler.setPrintJobAttributes(mPrintJobId,mCurrPrintAttributes);
  mRemotePrintAdapter.cancel();
  mHandler.removeMessages(MyHandler.MSG_ON_LAYOUT_FINISHED);
  mHandler.removeMessages(MyHandler.MSG_ON_LAYOUT_FAILED);
  mRemotePrintAdapter.layout(mOldPrintAttributes,mCurrPrintAttributes,new LayoutResultCallback(){
    @Override public void onLayoutFinished(    PrintDocumentInfo info,    boolean changed){
      mHandler.obtainMessage(MyHandler.MSG_ON_LAYOUT_FINISHED,changed ? 1 : 0,0,info).sendToTarget();
    }
    @Override public void onLayoutFailed(    CharSequence error){
      mHandler.obtainMessage(MyHandler.MSG_ON_LAYOUT_FAILED,error).sendToTarget();
    }
  }
,new Bundle());
}
