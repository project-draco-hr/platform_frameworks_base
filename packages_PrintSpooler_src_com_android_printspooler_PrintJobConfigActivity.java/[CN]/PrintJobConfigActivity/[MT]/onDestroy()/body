{
  mPrinterDiscoverySessionObserver.close();
  mPrinterDiscoverySessionObserver.destroy();
  mPrinterDiscoverySessionObserver=null;
  if (mController.hasStarted()) {
    mController.finish();
  }
  if (mEditor.isPrintConfirmed() && mController.isFinished()) {
    mSpooler.setPrintJobState(mPrintJobId,PrintJobInfo.STATE_QUEUED,null);
  }
 else {
    mSpooler.setPrintJobState(mPrintJobId,PrintJobInfo.STATE_CANCELED,null);
  }
  mIPrintDocumentAdapter.unlinkToDeath(mDeathRecipient,0);
  if (mGeneratingPrintJobDialog != null) {
    mGeneratingPrintJobDialog.dismiss();
    mGeneratingPrintJobDialog=null;
  }
  super.onDestroy();
}
