{
  if (mRequestCounter.get() != sequence) {
    return;
  }
  if (isCancelled()) {
    if (mEditor.isDone()) {
      PrintJobConfigActivity.this.finish();
    }
    return;
  }
  mControllerState=CONTROLLER_STATE_WRITE_COMPLETED;
  File file=mSpoolerProvider.getSpooler().generateFileForPrintJob(mPrintJobId);
  mDocument.info.setDataSize(file.length());
  mSpoolerProvider.getSpooler().setPrintJobPrintDocumentInfoNoPersistence(mPrintJobId,mDocument.info);
  mDocument.pages=PageRangeUtils.normalize(pages);
  if (DEBUG) {
    Log.i(LOG_TAG,"Requested: " + Arrays.toString(mRequestedPages) + " and got: "+ Arrays.toString(mDocument.pages));
  }
  updatePrintJobPages(mDocument.pages,mRequestedPages);
  if (mEditor.isDone()) {
    requestCreatePdfFileOrFinish();
  }
}
