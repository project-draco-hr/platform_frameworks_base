{
  PrintAttributes attributes=mTempPrintAttributes;
  attributes.copyFrom(mCurrPrintAttributes);
  if (document.getOrientation() == PrintAttributes.ORIENTATION_LANDSCAPE) {
    if (attributes.getOrientation() == PrintAttributes.ORIENTATION_LANDSCAPE) {
      attributes.setOrientation(PrintAttributes.ORIENTATION_PORTRAIT);
    }
 else {
      attributes.setOrientation(PrintAttributes.ORIENTATION_LANDSCAPE);
    }
  }
  Margins documentMargins=document.getMargins();
  if (documentMargins.getLeftMils() != 0 || documentMargins.getTopMils() != 0 || documentMargins.getRightMils() != 0 || documentMargins.getBottomMils() != 0) {
    Margins oldMargins=attributes.getMargins();
    attributes.setMargins(new Margins(oldMargins.getLeftMils() - documentMargins.getLeftMils(),oldMargins.getTopMils() - documentMargins.getTopMils(),oldMargins.getRightMils() - documentMargins.getRightMils(),oldMargins.getBottomMils() - documentMargins.getBottomMils()));
  }
  PrintSpoolerService.peekInstance().setPrintJobAttributesNoPersistence(mPrintJobId,attributes);
}
