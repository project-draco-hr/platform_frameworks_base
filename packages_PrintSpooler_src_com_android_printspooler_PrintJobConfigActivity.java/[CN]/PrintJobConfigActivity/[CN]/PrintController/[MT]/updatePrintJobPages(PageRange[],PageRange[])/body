{
  if (Arrays.equals(writtenPages,requestedPages)) {
    mSpoolerProvider.getSpooler().setPrintJobPagesNoPersistence(mPrintJobId,ALL_PAGES_ARRAY);
  }
 else   if (Arrays.equals(writtenPages,ALL_PAGES_ARRAY)) {
    mSpoolerProvider.getSpooler().setPrintJobPagesNoPersistence(mPrintJobId,requestedPages);
  }
 else   if (PageRangeUtils.contains(writtenPages,requestedPages)) {
    final int offset=-writtenPages[0].getStart();
    PageRange[] offsetPages=Arrays.copyOf(requestedPages,requestedPages.length);
    PageRangeUtils.offset(offsetPages,offset);
    mSpoolerProvider.getSpooler().setPrintJobPagesNoPersistence(mPrintJobId,offsetPages);
  }
 else   if (Arrays.equals(requestedPages,ALL_PAGES_ARRAY) && writtenPages.length == 1 && writtenPages[0].getStart() == 0 && writtenPages[0].getEnd() == mDocument.info.getPageCount() - 1) {
    mSpoolerProvider.getSpooler().setPrintJobPagesNoPersistence(mPrintJobId,writtenPages);
  }
 else {
    mControllerState=CONTROLLER_STATE_FAILED;
    Log.e(LOG_TAG,"Received invalid pages from the app");
    mEditor.showUi(Editor.UI_ERROR,null);
  }
}
