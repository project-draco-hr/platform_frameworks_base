{
  final ViewGroup contentContainer=(ViewGroup)findViewById(R.id.content_container);
  final View hidingView=contentContainer.getChildAt(0);
  final View showingView=getLayoutInflater().inflate(showLayoutId,null,false);
  AutoCancellingAnimator.animate(hidingView).alpha(0.0f).withLayer().withEndAction(new Runnable(){
    @Override public void run(){
      hidingView.setVisibility(View.INVISIBLE);
      showingView.setMinimumWidth(contentContainer.getWidth());
      showingView.setAlpha(0.0f);
      final int widthSpec=MeasureSpec.makeMeasureSpec(contentContainer.getWidth(),MeasureSpec.UNSPECIFIED);
      final int heightSpec=MeasureSpec.makeMeasureSpec(contentContainer.getHeight(),MeasureSpec.UNSPECIFIED);
      showingView.measure(widthSpec,heightSpec);
      final float scaleY=(float)showingView.getMeasuredHeight() / (float)contentContainer.getHeight();
      AutoCancellingAnimator.animate(contentContainer).scaleY(scaleY).withLayer().withEndAction(new Runnable(){
        @Override public void run(){
          contentContainer.removeAllViews();
          contentContainer.setScaleY(1.0f);
          contentContainer.addView(showingView);
          AutoCancellingAnimator.animate(showingView).withLayer().alpha(1.0f).withEndAction(new Runnable(){
            @Override public void run(){
              postAnimateCommand.run();
            }
          }
);
        }
      }
);
    }
  }
);
}
