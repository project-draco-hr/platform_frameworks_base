{
  if (hasErrors()) {
    return null;
  }
  if (mRangeOptionsSpinner.getSelectedItemPosition() > 0) {
    List<PageRange> pageRanges=new ArrayList<PageRange>();
    mStringCommaSplitter.setString(mPageRangeEditText.getText().toString());
    while (mStringCommaSplitter.hasNext()) {
      String range=mStringCommaSplitter.next().trim();
      final int dashIndex=range.indexOf('-');
      final int fromIndex;
      final int toIndex;
      if (dashIndex > 0) {
        fromIndex=Integer.parseInt(range.substring(0,dashIndex)) - 1;
        toIndex=(dashIndex < range.length() - 1) ? Integer.parseInt(range.substring(dashIndex + 1,range.length())) - 1 : fromIndex;
      }
 else {
        fromIndex=toIndex=Integer.parseInt(range) - 1;
      }
      PageRange pageRange=new PageRange(Math.min(fromIndex,toIndex),Math.max(fromIndex,toIndex));
      pageRanges.add(pageRange);
    }
    PageRange[] pageRangesArray=new PageRange[pageRanges.size()];
    pageRanges.toArray(pageRangesArray);
    return PageRangeUtils.normalize(pageRangesArray);
  }
  return ALL_PAGES_ARRAY;
}
