{
  boolean animateThumbToNewAngle=false;
  int totalDeltaAngle;
  totalDeltaAngle=getDelta(mPreviousCallbackTickAngle,touchAngle,useDirection,ccw);
  if (totalDeltaAngle >= mFuzzyTickDelta || totalDeltaAngle <= -mFuzzyTickDelta) {
    if (!useDirection) {
      ccw=totalDeltaAngle > 0;
    }
    int oldTouchAngle=touchAngle;
    if (ccw && mThumbCcwBound != Integer.MIN_VALUE) {
      int deltaCcwBoundAndTouch=getDelta(mThumbCcwBound,touchAngle,useDirection,true);
      if (deltaCcwBoundAndTouch >= mTickDelta / 2) {
        int deltaPreviousCbAndTouch=getDelta(mPreviousCallbackTickAngle,touchAngle,useDirection,true);
        if (deltaPreviousCbAndTouch >= deltaCcwBoundAndTouch) {
          touchAngle=mThumbCcwBound;
          ccw=false;
        }
      }
    }
 else     if (!ccw && mThumbCwBound != Integer.MIN_VALUE) {
      int deltaCwBoundAndTouch=getDelta(mThumbCwBound,touchAngle,useDirection,false);
      if (deltaCwBoundAndTouch <= -mTickDelta / 2) {
        int deltaPreviousCbAndTouch=getDelta(mPreviousCallbackTickAngle,touchAngle,useDirection,false);
        if (deltaPreviousCbAndTouch <= deltaCwBoundAndTouch) {
          touchAngle=mThumbCwBound;
          ccw=true;
        }
      }
    }
    if (touchAngle != oldTouchAngle) {
      totalDeltaAngle=getDelta(mPreviousCallbackTickAngle,touchAngle,useDirection,ccw);
      animateThumbToNewAngle=true;
      setMode(MODE_IGNORE_UNTIL_TOUCHES_THUMB);
    }
    if (mEnforceMaxAbsJump) {
      if (totalDeltaAngle <= -MAX_ABS_JUMP_DELTA_ANGLE) {
        totalDeltaAngle=-MAX_ABS_JUMP_DELTA_ANGLE;
        animateThumbToNewAngle=true;
      }
 else       if (totalDeltaAngle >= MAX_ABS_JUMP_DELTA_ANGLE) {
        totalDeltaAngle=MAX_ABS_JUMP_DELTA_ANGLE;
        animateThumbToNewAngle=true;
      }
    }
    int deltaLevels=Math.round((float)totalDeltaAngle / mTickDelta);
    if (deltaLevels != 0) {
      boolean canStillZoom=mCallback.onZoomRingThumbDragged(deltaLevels,mThumbDragStartAngle,touchAngle);
      if (mVibration) {
        performHapticFeedback(HapticFeedbackConstants.ZOOM_RING_TICK,HapticFeedbackConstants.FLAG_IGNORE_GLOBAL_SETTING | HapticFeedbackConstants.FLAG_IGNORE_VIEW_SETTING);
      }
      mPreviousCallbackTickAngle=getValidAngle(mPreviousCallbackTickAngle + (deltaLevels * mTickDelta));
    }
  }
  if (DRAW_TRAIL) {
    int deltaAngle=getDelta(mThumbAngle,touchAngle,useDirection,ccw);
    mAcculumalatedTrailAngle+=Math.toDegrees(deltaAngle / (double)RADIAN_INT_MULTIPLIER);
  }
  if (animateThumbToNewAngle) {
    if (useDirection) {
      setThumbAngleAnimated(touchAngle,0,ccw);
    }
 else {
      setThumbAngleAnimated(touchAngle,0);
    }
  }
 else {
    setThumbAngleAuto(touchAngle,useDirection,ccw);
  }
}
