{
  mTaskViewRect.set(0,0,width,height);
  boolean showTitle=true;
  boolean showMoveIcon=true;
  boolean showDismissIcon=true;
  int rightInset=width - getMeasuredWidth();
  if (mTask != null && mTask.isFreeformTask()) {
    int appIconWidth=mIconView.getMeasuredWidth();
    int titleWidth=(int)mTitleView.getPaint().measureText(mTask.title);
    int dismissWidth=mDismissButton.getMeasuredWidth();
    int moveTaskWidth=mMoveTaskButton != null ? mMoveTaskButton.getMeasuredWidth() : 0;
    showTitle=width >= (appIconWidth + dismissWidth + moveTaskWidth+ titleWidth);
    showMoveIcon=width >= (appIconWidth + dismissWidth + moveTaskWidth);
    showDismissIcon=width >= (appIconWidth + dismissWidth);
  }
  mTitleView.setVisibility(showTitle ? View.VISIBLE : View.INVISIBLE);
  if (mMoveTaskButton != null) {
    mMoveTaskButton.setVisibility(showMoveIcon ? View.VISIBLE : View.INVISIBLE);
    mMoveTaskButton.setTranslationX(rightInset);
  }
  mDismissButton.setVisibility(showDismissIcon ? View.VISIBLE : View.INVISIBLE);
  mDismissButton.setTranslationX(rightInset);
  setLeftTopRightBottom(0,0,width,getMeasuredHeight());
}
