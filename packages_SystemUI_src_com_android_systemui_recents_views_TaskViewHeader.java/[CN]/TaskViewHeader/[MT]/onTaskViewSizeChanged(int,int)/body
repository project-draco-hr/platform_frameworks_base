{
  mTaskViewRect.set(0,0,width,height);
  boolean updateMoveTaskButton=mMoveTaskButton.getVisibility() != View.GONE;
  int appIconWidth=mIconView.getMeasuredWidth();
  int activityDescWidth=mTitleView.getMeasuredWidth();
  int dismissIconWidth=mDismissButton.getMeasuredWidth();
  int moveTaskIconWidth=mMoveTaskButton.getVisibility() == View.VISIBLE ? mMoveTaskButton.getMeasuredWidth() : 0;
  if (width < (appIconWidth + dismissIconWidth)) {
    mTitleView.setVisibility(View.INVISIBLE);
    if (updateMoveTaskButton) {
      mMoveTaskButton.setVisibility(View.INVISIBLE);
    }
    mDismissButton.setVisibility(View.INVISIBLE);
  }
 else   if (width < (appIconWidth + dismissIconWidth + moveTaskIconWidth)) {
    mTitleView.setVisibility(View.INVISIBLE);
    if (updateMoveTaskButton) {
      mMoveTaskButton.setVisibility(View.INVISIBLE);
    }
    mDismissButton.setVisibility(View.VISIBLE);
  }
 else   if (width < (appIconWidth + dismissIconWidth + moveTaskIconWidth+ activityDescWidth)) {
    mTitleView.setVisibility(View.INVISIBLE);
    if (updateMoveTaskButton) {
      mMoveTaskButton.setVisibility(View.VISIBLE);
    }
    mDismissButton.setVisibility(View.VISIBLE);
  }
 else {
    mTitleView.setVisibility(View.VISIBLE);
    if (updateMoveTaskButton) {
      mMoveTaskButton.setVisibility(View.VISIBLE);
    }
    mDismissButton.setVisibility(View.VISIBLE);
  }
  if (updateMoveTaskButton) {
    mMoveTaskButton.setTranslationX(width - getMeasuredWidth());
  }
  mDismissButton.setTranslationX(width - getMeasuredWidth());
  invalidate();
}
