{
  int uid=Binder.getCallingUid();
  if (type != MidiDeviceInfo.TYPE_VIRTUAL && uid != Process.SYSTEM_UID) {
    throw new SecurityException("only system can create non-virtual devices");
  }
synchronized (mDevicesByInfo) {
    return addDeviceLocked(type,numInputPorts,numOutputPorts,inputPortNames,outputPortNames,properties,server,null,false,uid);
  }
}
