{
  int userHandle=UserHandle.getUserId(uid);
  final int restrictionSetCount=mOpUserRestrictions.size();
  for (int i=0; i < restrictionSetCount; i++) {
    SparseArray<boolean[]> perUserRestrictions=mOpUserRestrictions.valueAt(i);
    boolean[] opRestrictions=perUserRestrictions.get(userHandle);
    if (opRestrictions != null && opRestrictions[code]) {
      if (AppOpsManager.opAllowSystemBypassRestriction(code)) {
synchronized (this) {
          Ops ops=getOpsLocked(uid,packageName,true);
          if ((ops != null) && ops.isPrivileged) {
            return false;
          }
        }
      }
      return true;
    }
  }
  return false;
}
