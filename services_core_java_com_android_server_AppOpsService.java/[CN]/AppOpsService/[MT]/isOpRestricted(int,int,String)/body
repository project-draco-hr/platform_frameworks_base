{
  int userHandle=UserHandle.getUserId(uid);
  boolean[] opRestrictions=mOpRestrictions.get(userHandle);
  if ((opRestrictions != null) && opRestrictions[code]) {
    if (AppOpsManager.opAllowSystemBypassRestriction(code)) {
synchronized (this) {
        Ops ops=getOpsLocked(uid,packageName,true);
        if ((ops != null) && ops.isPrivileged) {
          return false;
        }
      }
    }
    if (userHandle == UserHandle.USER_OWNER) {
      if (uid != mDeviceOwnerUid) {
        return true;
      }
    }
 else {
      if (uid != mProfileOwnerUids.get(userHandle,-1)) {
        return true;
      }
    }
  }
  return false;
}
