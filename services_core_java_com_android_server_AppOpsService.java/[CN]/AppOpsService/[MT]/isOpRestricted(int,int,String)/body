{
  int userHandle=UserHandle.getUserId(uid);
  final int restrictionSetCount=mOpUserRestrictions.size();
  for (int i=0; i < restrictionSetCount; i++) {
    ClientRestrictionState restrictionState=mOpUserRestrictions.valueAt(i);
    if (restrictionState.hasRestriction(code,packageName,userHandle)) {
      if (AppOpsManager.opAllowSystemBypassRestriction(code)) {
synchronized (this) {
          Ops ops=getOpsRawLocked(uid,packageName,true);
          if ((ops != null) && ops.isPrivileged) {
            return false;
          }
        }
      }
      return true;
    }
  }
  return false;
}
