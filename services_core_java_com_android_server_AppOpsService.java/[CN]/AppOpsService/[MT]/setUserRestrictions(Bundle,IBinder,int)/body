{
  checkSystemUid("setUserRestrictions");
  Preconditions.checkNotNull(restrictions);
  Preconditions.checkNotNull(token);
  final boolean[] opRestrictions=getOrCreateUserRestrictionsForToken(token,userHandle);
  for (int i=0; i < opRestrictions.length; ++i) {
    String restriction=AppOpsManager.opToRestriction(i);
    final boolean restricted=restriction != null && restrictions.getBoolean(restriction,false);
    setUserRestrictionNoCheck(i,restricted,token,userHandle);
  }
}
