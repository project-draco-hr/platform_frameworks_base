{
  verifyIncomingUid(uid);
  verifyIncomingOp(code);
synchronized (this) {
    if (isOpRestricted(uid,code,packageName)) {
      return AppOpsManager.MODE_IGNORED;
    }
    Op op=getOpLocked(AppOpsManager.opToSwitch(code),uid,packageName,false);
    if (op == null) {
      return AppOpsManager.opToDefaultMode(code);
    }
    return op.mode;
  }
}
