{
  ArrayList<AppOpsManager.OpEntry> resOps=null;
  if (ops == null) {
    resOps=new ArrayList<AppOpsManager.OpEntry>();
    for (int j=0; j < pkgOps.size(); j++) {
      Op curOp=pkgOps.valueAt(j);
      resOps.add(new AppOpsManager.OpEntry(curOp.op,curOp.mode,curOp.time,curOp.rejectTime,curOp.duration,curOp.proxyUid,curOp.proxyPackageName));
    }
  }
 else {
    for (int j=0; j < ops.length; j++) {
      Op curOp=pkgOps.get(ops[j]);
      if (curOp != null) {
        if (resOps == null) {
          resOps=new ArrayList<AppOpsManager.OpEntry>();
        }
        resOps.add(new AppOpsManager.OpEntry(curOp.op,curOp.mode,curOp.time,curOp.rejectTime,curOp.duration,curOp.proxyUid,curOp.proxyPackageName));
      }
    }
  }
  return resOps;
}
