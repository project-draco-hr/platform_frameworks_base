{
  userId=UserHandle.USER_CURRENT;
  opStr=null;
  modeStr=null;
  for (String argument; (argument=getNextArg()) != null; ) {
    if ("--user".equals(argument)) {
      userId=UserHandle.parseUserArg(getNextArgRequired());
    }
 else {
      if (opStr == null) {
        opStr=argument;
      }
 else       if (modeStr == null) {
        modeStr=argument;
        break;
      }
    }
  }
  if (opStr == null) {
    err.println("Error: Operation not specified.");
    return -1;
  }
  op=strOpToOp(opStr,err);
  if (op < 0) {
    return -1;
  }
  if (modeStr != null) {
    if ((mode=strModeToMode(modeStr,err)) < 0) {
      return -1;
    }
  }
 else {
    mode=defMode;
  }
  return 0;
}
