{
  ArrayList<Key<?>> keyList=new ArrayList<Key<?>>();
  Field[] fields=type.getDeclaredFields();
  for (  Field field : fields) {
    if (field.getType().isAssignableFrom(Key.class) && (field.getModifiers() & Modifier.PUBLIC) != 0) {
      Key<?> key;
      try {
        key=(Key<?>)field.get(instance);
      }
 catch (      IllegalAccessException e) {
        throw new AssertionError("Can't get IllegalAccessException",e);
      }
catch (      IllegalArgumentException e) {
        throw new AssertionError("Can't get IllegalArgumentException",e);
      }
      if (instance == null || instance.get(key) != null) {
        keyList.add(key);
      }
    }
  }
  return keyList;
}
