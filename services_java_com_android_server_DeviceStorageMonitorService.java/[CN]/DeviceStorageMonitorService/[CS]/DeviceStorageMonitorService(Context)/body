{
  mLastReportedFreeMemTime=0;
  mContext=context;
  mContentResolver=mContext.getContentResolver();
  mDataFileStats=new StatFs(DATA_PATH);
  mSystemFileStats=new StatFs(SYSTEM_PATH);
  mCacheFileStats=new StatFs(CACHE_PATH);
  mTotalMemory=((long)mDataFileStats.getBlockCount() * mDataFileStats.getBlockSize()) / 100L;
  mStorageLowIntent=new Intent(Intent.ACTION_DEVICE_STORAGE_LOW);
  mStorageLowIntent.addFlags(Intent.FLAG_RECEIVER_REGISTERED_ONLY_BEFORE_BOOT);
  mStorageOkIntent=new Intent(Intent.ACTION_DEVICE_STORAGE_OK);
  mStorageOkIntent.addFlags(Intent.FLAG_RECEIVER_REGISTERED_ONLY_BEFORE_BOOT);
  mStorageFullIntent=new Intent(Intent.ACTION_DEVICE_STORAGE_FULL);
  mStorageFullIntent.addFlags(Intent.FLAG_RECEIVER_REGISTERED_ONLY_BEFORE_BOOT);
  mStorageNotFullIntent=new Intent(Intent.ACTION_DEVICE_STORAGE_NOT_FULL);
  mStorageNotFullIntent.addFlags(Intent.FLAG_RECEIVER_REGISTERED_ONLY_BEFORE_BOOT);
  mMemLowThreshold=getMemThreshold();
  mMemFullThreshold=getMemFullThreshold();
  checkMemory(true);
  mCacheFileDeletedObserver=new CacheFileDeletedObserver();
  mCacheFileDeletedObserver.startWatching();
}
