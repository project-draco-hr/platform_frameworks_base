{
  try {
    mDataFileStats.restat(DATA_PATH);
    mFreeMem=(long)mDataFileStats.getAvailableBlocks() * mDataFileStats.getBlockSize();
  }
 catch (  IllegalArgumentException e) {
  }
  String debugFreeMem=SystemProperties.get("debug.freemem");
  if (!"".equals(debugFreeMem)) {
    mFreeMem=Long.parseLong(debugFreeMem);
  }
  long freeMemLogInterval=Settings.Global.getLong(mContentResolver,Settings.Global.SYS_FREE_STORAGE_LOG_INTERVAL,DEFAULT_FREE_STORAGE_LOG_INTERVAL_IN_MINUTES) * 60 * 1000;
  long currTime=SystemClock.elapsedRealtime();
  if ((mLastReportedFreeMemTime == 0) || (currTime - mLastReportedFreeMemTime) >= freeMemLogInterval) {
    mLastReportedFreeMemTime=currTime;
    long mFreeSystem=-1, mFreeCache=-1;
    try {
      mSystemFileStats.restat(SYSTEM_PATH);
      mFreeSystem=(long)mSystemFileStats.getAvailableBlocks() * mSystemFileStats.getBlockSize();
    }
 catch (    IllegalArgumentException e) {
    }
    try {
      mCacheFileStats.restat(CACHE_PATH);
      mFreeCache=(long)mCacheFileStats.getAvailableBlocks() * mCacheFileStats.getBlockSize();
    }
 catch (    IllegalArgumentException e) {
    }
    EventLog.writeEvent(EventLogTags.FREE_STORAGE_LEFT,mFreeMem,mFreeSystem,mFreeCache);
  }
  long threshold=Settings.Global.getLong(mContentResolver,Settings.Global.DISK_FREE_CHANGE_REPORTING_THRESHOLD,DEFAULT_DISK_FREE_CHANGE_REPORTING_THRESHOLD);
  long delta=mFreeMem - mLastReportedFreeMem;
  if (delta > threshold || delta < -threshold) {
    mLastReportedFreeMem=mFreeMem;
    EventLog.writeEvent(EventLogTags.FREE_STORAGE_CHANGED,mFreeMem);
  }
}
