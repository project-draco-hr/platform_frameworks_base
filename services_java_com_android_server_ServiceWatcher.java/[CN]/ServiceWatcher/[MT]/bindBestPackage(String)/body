{
  Intent intent=new Intent(mAction);
  if (justCheckThisPackage != null) {
    intent.setPackage(justCheckThisPackage);
  }
  List<ResolveInfo> rInfos=mPm.queryIntentServices(new Intent(mAction),PackageManager.GET_META_DATA);
  int bestVersion=Integer.MIN_VALUE;
  String bestPackage=null;
  for (  ResolveInfo rInfo : rInfos) {
    String packageName=rInfo.serviceInfo.packageName;
    try {
      PackageInfo pInfo;
      pInfo=mPm.getPackageInfo(packageName,PackageManager.GET_SIGNATURES);
      if (!isSignatureMatch(pInfo.signatures)) {
        Log.w(mTag,packageName + " resolves service " + mAction+ ", but has wrong signature, ignoring");
        continue;
      }
    }
 catch (    NameNotFoundException e) {
      Log.wtf(mTag,e);
      continue;
    }
    int version=0;
    if (rInfo.serviceInfo.metaData != null) {
      version=rInfo.serviceInfo.metaData.getInt(EXTRA_VERSION,0);
    }
    if (version > mVersion) {
      bestVersion=version;
      bestPackage=packageName;
    }
  }
  if (D)   Log.d(mTag,String.format("bindBestPackage %s found %d, %s",(justCheckThisPackage == null ? "" : "(" + justCheckThisPackage + ") "),rInfos.size(),(bestPackage == null ? "no new best package" : "new best packge: " + bestPackage)));
  if (bestPackage != null) {
    bindToPackage(bestPackage,bestVersion);
    return true;
  }
  return false;
}
