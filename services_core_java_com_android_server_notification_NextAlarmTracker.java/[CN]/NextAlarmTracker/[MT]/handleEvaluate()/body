{
  final AlarmClockInfo nextAlarm=mAlarmManager.getNextAlarmClock(mCurrentUserId);
  final long triggerTime=getEarlyTriggerTime(nextAlarm);
  final long now=System.currentTimeMillis();
  final boolean alarmUpcoming=triggerTime > now;
  final boolean booted=isDoneWaitingAfterBoot(now);
  if (DEBUG)   Slog.d(TAG,"handleEvaluate nextAlarm=" + formatAlarmDebug(triggerTime) + " alarmUpcoming="+ alarmUpcoming+ " booted="+ booted);
  fireEvaluate(nextAlarm,triggerTime,booted);
  if (!booted) {
    final long recheckTime=(mBootCompleted > 0 ? mBootCompleted : now) + WAIT_AFTER_BOOT;
    rescheduleAlarm(recheckTime);
    return;
  }
  if (alarmUpcoming) {
    rescheduleAlarm(triggerTime);
  }
}
