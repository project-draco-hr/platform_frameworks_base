{
  try {
    if (isPukCommand()) {
      String oldPinOrPuk=sia;
      String newPin=sib;
      int pinLen=newPin.length();
      if (isRegister()) {
        if (!newPin.equals(sic)) {
          handlePasswordError(com.android.internal.R.string.mismatchPin);
        }
 else         if (pinLen < 4 || pinLen > 8) {
          handlePasswordError(com.android.internal.R.string.invalidPin);
        }
 else {
          phone.mCM.supplyIccPuk(oldPinOrPuk,newPin,obtainMessage(EVENT_SET_COMPLETE,this));
        }
      }
 else {
        throw new RuntimeException("Invalid or Unsupported MMI Code");
      }
    }
 else {
      throw new RuntimeException("Invalid or Unsupported MMI Code");
    }
  }
 catch (  RuntimeException exc) {
    state=State.FAILED;
    message=context.getText(com.android.internal.R.string.mmiError);
    phone.onMMIDone(this);
  }
}
