{
  final int vCenter=(b - t) / 2;
  final boolean isLayoutRtl=isLayoutRtl();
  final int layoutDirection=getLayoutDirection();
  final int width=getWidth();
  int upOffset=0;
  if (mUpView.getVisibility() != GONE) {
    final LayoutParams upLp=(LayoutParams)mUpView.getLayoutParams();
    upLp.onResolveLayoutDirection(layoutDirection);
    final int upHeight=mUpView.getMeasuredHeight();
    final int upWidth=mUpView.getMeasuredWidth();
    upOffset=upLp.leftMargin + upWidth + upLp.rightMargin;
    final int upTop=vCenter - upHeight / 2;
    final int upBottom=upTop + upHeight;
    final int upRight;
    final int upLeft;
    if (isLayoutRtl) {
      upRight=width;
      upLeft=upRight - upWidth;
      r-=upOffset;
    }
 else {
      upRight=upWidth;
      upLeft=0;
      l+=upOffset;
    }
    mUpView.layout(upLeft,upTop,upRight,upBottom);
  }
  final LayoutParams iconLp=(LayoutParams)mIconView.getLayoutParams();
  iconLp.onResolveLayoutDirection(layoutDirection);
  final int iconHeight=mIconView.getMeasuredHeight();
  final int iconWidth=mIconView.getMeasuredWidth();
  final int hCenter=(r - l) / 2;
  final int iconTop=Math.max(iconLp.topMargin,vCenter - iconHeight / 2);
  final int iconBottom=iconTop + iconHeight;
  final int iconLeft;
  final int iconRight;
  int marginStart=iconLp.getMarginStart();
  final int delta=Math.max(marginStart,hCenter - iconWidth / 2);
  if (isLayoutRtl) {
    iconRight=width - upOffset - delta;
    iconLeft=iconRight - iconWidth;
  }
 else {
    iconLeft=upOffset + delta;
    iconRight=iconLeft + iconWidth;
  }
  mIconView.layout(iconLeft,iconTop,iconRight,iconBottom);
}
