{
  final int flagsChanged=options ^ mDisplayOptions;
  mDisplayOptions=options;
  if ((flagsChanged & ActionBar.DISPLAY_DISABLE_HOME) != 0) {
    final boolean disableHome=(options & ActionBar.DISPLAY_DISABLE_HOME) != 0;
    mHomeLayout.setEnabled(!disableHome);
  }
  if ((flagsChanged & DISPLAY_RELAYOUT_MASK) != 0) {
    final boolean showHome=(options & ActionBar.DISPLAY_SHOW_HOME) != 0;
    final int vis=showHome ? VISIBLE : GONE;
    mHomeLayout.setVisibility(vis);
    if ((flagsChanged & ActionBar.DISPLAY_HOME_AS_UP) != 0) {
      mHomeLayout.setUp((options & ActionBar.DISPLAY_HOME_AS_UP) != 0);
    }
    if ((flagsChanged & ActionBar.DISPLAY_USE_LOGO) != 0) {
      final boolean logoVis=mLogo != null && (options & ActionBar.DISPLAY_USE_LOGO) != 0;
      mHomeLayout.setIcon(logoVis ? mLogo : mIcon);
    }
    if ((flagsChanged & ActionBar.DISPLAY_SHOW_TITLE) != 0) {
      if ((options & ActionBar.DISPLAY_SHOW_TITLE) != 0) {
        initTitle();
      }
 else {
        removeView(mTitleLayout);
      }
    }
    if ((flagsChanged & (ActionBar.DISPLAY_HOME_AS_UP | ActionBar.DISPLAY_SHOW_HOME)) != 0) {
      final boolean homeAsUp=(options & ActionBar.DISPLAY_HOME_AS_UP) != 0;
      final boolean titleUp=homeAsUp && !showHome;
      mTitleUpView.setVisibility(titleUp ? VISIBLE : GONE);
      mTitleLayout.setEnabled(titleUp);
    }
    if ((flagsChanged & ActionBar.DISPLAY_SHOW_CUSTOM) != 0 && mCustomNavView != null) {
      if ((options & ActionBar.DISPLAY_SHOW_CUSTOM) != 0) {
        addView(mCustomNavView);
      }
 else {
        removeView(mCustomNavView);
      }
    }
    requestLayout();
  }
 else {
    invalidate();
  }
  if ((options & ActionBar.DISPLAY_DISABLE_HOME) != 0) {
    mHomeLayout.setContentDescription(null);
  }
 else   if ((options & ActionBar.DISPLAY_HOME_AS_UP) != 0) {
    mHomeLayout.setContentDescription(mContext.getResources().getText(R.string.action_bar_up_description));
  }
 else {
    mHomeLayout.setContentDescription(mContext.getResources().getText(R.string.action_bar_home_description));
  }
}
