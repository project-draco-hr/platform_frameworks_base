{
  final int flagsChanged=options ^ mDisplayOptions;
  mDisplayOptions=options;
  if ((flagsChanged & ActionBar.DISPLAY_DISABLE_HOME) != 0) {
    final boolean disableHome=(options & ActionBar.DISPLAY_DISABLE_HOME) != 0;
    mHomeLayout.setEnabled(!disableHome);
  }
  if ((flagsChanged & DISPLAY_RELAYOUT_MASK) != 0) {
    final int vis=(options & ActionBar.DISPLAY_SHOW_HOME) != 0 ? VISIBLE : GONE;
    mHomeLayout.setVisibility(vis);
    if ((flagsChanged & ActionBar.DISPLAY_HOME_AS_UP) != 0) {
      mHomeAsUpView.setVisibility((options & ActionBar.DISPLAY_HOME_AS_UP) != 0 ? VISIBLE : GONE);
    }
    if ((flagsChanged & ActionBar.DISPLAY_USE_LOGO) != 0) {
      final boolean logoVis=mLogo != null && (options & ActionBar.DISPLAY_USE_LOGO) != 0;
      mIconView.setImageDrawable(logoVis ? mLogo : mIcon);
    }
    if ((flagsChanged & ActionBar.DISPLAY_SHOW_TITLE) != 0) {
      if ((options & ActionBar.DISPLAY_SHOW_TITLE) != 0) {
        initTitle();
      }
 else {
        removeView(mTitleLayout);
      }
    }
    if ((flagsChanged & ActionBar.DISPLAY_SHOW_CUSTOM) != 0 && mCustomNavView != null) {
      if ((options & ActionBar.DISPLAY_SHOW_CUSTOM) != 0) {
        addView(mCustomNavView);
      }
 else {
        removeView(mCustomNavView);
      }
    }
    requestLayout();
  }
 else {
    invalidate();
  }
}
