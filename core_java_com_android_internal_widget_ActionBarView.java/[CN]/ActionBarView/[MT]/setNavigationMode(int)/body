{
  final int oldMode=mNavigationMode;
  if (mode != oldMode) {
switch (oldMode) {
case ActionBar.NAVIGATION_MODE_STANDARD:
      if (mTitleLayout != null) {
        removeView(mTitleLayout);
        mTitleLayout=null;
        mTitleView=null;
        mSubtitleView=null;
      }
    break;
case ActionBar.NAVIGATION_MODE_DROPDOWN_LIST:
  if (mSpinner != null) {
    removeView(mSpinner);
    mSpinner=null;
  }
break;
case ActionBar.NAVIGATION_MODE_CUSTOM:
if (mCustomNavView != null) {
removeView(mCustomNavView);
mCustomNavView=null;
}
break;
case ActionBar.NAVIGATION_MODE_TABS:
if (mTabLayout != null) {
removeView(mTabScrollView);
mTabLayout=null;
mTabScrollView=null;
}
}
switch (mode) {
case ActionBar.NAVIGATION_MODE_STANDARD:
initTitle();
break;
case ActionBar.NAVIGATION_MODE_DROPDOWN_LIST:
mSpinner=new Spinner(mContext,null,com.android.internal.R.attr.dropDownSpinnerStyle);
mSpinner.setOnItemSelectedListener(mNavItemSelectedListener);
addView(mSpinner);
break;
case ActionBar.NAVIGATION_MODE_CUSTOM:
addView(mCustomNavView);
break;
case ActionBar.NAVIGATION_MODE_TABS:
mTabScrollView=new HorizontalScrollView(getContext());
mTabLayout=new LinearLayout(getContext(),null,com.android.internal.R.attr.actionBarTabBarStyle);
mTabScrollView.addView(mTabLayout);
addView(mTabScrollView);
break;
}
mNavigationMode=mode;
requestLayout();
}
}
