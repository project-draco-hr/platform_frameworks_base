{
  final int oldMode=mNavigationMode;
  if (mode != oldMode) {
switch (oldMode) {
case ActionBar.NAVIGATION_MODE_LIST:
      if (mSpinner != null) {
        removeView(mSpinner);
      }
    break;
case ActionBar.NAVIGATION_MODE_TABS:
  if (mTabLayout != null) {
    removeView(mTabScrollView);
  }
}
switch (mode) {
case ActionBar.NAVIGATION_MODE_LIST:
mSpinner=new Spinner(mContext,null,com.android.internal.R.attr.actionDropDownStyle);
mSpinner.setAdapter(mSpinnerAdapter);
mSpinner.setOnItemSelectedListener(mNavItemSelectedListener);
addView(mSpinner);
break;
case ActionBar.NAVIGATION_MODE_TABS:
ensureTabsExist();
addView(mTabScrollView);
break;
}
mNavigationMode=mode;
requestLayout();
}
}
