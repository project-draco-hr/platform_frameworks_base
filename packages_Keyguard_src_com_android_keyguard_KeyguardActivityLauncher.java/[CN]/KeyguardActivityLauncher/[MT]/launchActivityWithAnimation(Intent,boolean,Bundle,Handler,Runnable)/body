{
  LockPatternUtils lockPatternUtils=getLockPatternUtils();
  intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_CLEAR_TOP);
  boolean isSecure=lockPatternUtils.isSecure();
  if (!isSecure || showsWhileLocked) {
    if (!isSecure) {
      dismissKeyguardOnNextActivity();
    }
    try {
      if (DEBUG)       Log.d(TAG,String.format("Starting activity for intent %s at %s",intent,SystemClock.uptimeMillis()));
      startActivityForCurrentUser(intent,animation,worker,onStarted);
    }
 catch (    ActivityNotFoundException e) {
      Log.w(TAG,"Activity not found for intent + " + intent.getAction());
    }
  }
 else {
    KeyguardSecurityCallback callback=getCallback();
    callback.setOnDismissAction(new OnDismissAction(){
      @Override public boolean onDismiss(){
        dismissKeyguardOnNextActivity();
        startActivityForCurrentUser(intent,animation,worker,onStarted);
        return true;
      }
    }
);
    callback.dismiss(false);
  }
}
