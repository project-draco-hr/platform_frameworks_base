{
  if (!mHasFeature) {
    return;
  }
  AtomicFile file=savedStateFile();
  FileOutputStream stream;
  try {
    stream=file.startWrite();
    if (writeStateToFileLocked(stream)) {
      file.finishWrite(stream);
    }
 else {
      file.failWrite(stream);
      Slog.w(TAG,"Failed to save state, restoring backup.");
    }
  }
 catch (  IOException e) {
    Slog.w(TAG,"Failed open state file for write: " + e);
  }
}
