{
  NetworkScorerAppData scorer=NetworkScorerAppManager.getActiveScorer(mContext);
synchronized (mReceiverLock) {
    if (mReceiver != null) {
      if (Log.isLoggable(TAG,Log.VERBOSE)) {
        Log.v(TAG,"Unregistering receiver for " + mReceiver.mRegisteredPackage);
      }
      mContext.unregisterReceiver(mReceiver);
      mReceiver=null;
    }
    if (scorer != null) {
      IntentFilter filter=new IntentFilter();
      filter.addAction(Intent.ACTION_PACKAGE_CHANGED);
      filter.addAction(Intent.ACTION_PACKAGE_REPLACED);
      filter.addAction(Intent.ACTION_PACKAGE_FULLY_REMOVED);
      filter.addDataScheme("package");
      filter.addDataSchemeSpecificPart(scorer.mPackageName,PatternMatcher.PATTERN_LITERAL);
      mReceiver=new ScorerChangedReceiver(scorer.mPackageName);
      mContext.registerReceiverAsUser(mReceiver,UserHandle.SYSTEM,filter,null,null);
      if (Log.isLoggable(TAG,Log.VERBOSE)) {
        Log.v(TAG,"Registered receiver for " + scorer.mPackageName);
      }
    }
  }
}
