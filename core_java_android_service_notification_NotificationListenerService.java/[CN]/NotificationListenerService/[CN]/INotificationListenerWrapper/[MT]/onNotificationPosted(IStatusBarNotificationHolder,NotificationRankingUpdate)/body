{
  StatusBarNotification sbn;
  try {
    sbn=sbnHolder.get();
  }
 catch (  RemoteException e) {
    Log.w(TAG,"onNotificationPosted: Error receiving StatusBarNotification",e);
    return;
  }
  try {
    Notification notification=sbn.getNotification();
    createLegacyIconExtras(sbn.getNotification());
    maybePopulateRemoteViews(sbn.getNotification());
  }
 catch (  IllegalArgumentException e) {
    sbn=null;
    Log.w(TAG,"onNotificationPosted: can't rebuild notification from " + sbn.getPackageName());
  }
synchronized (mWrapper) {
    applyUpdate(update);
    try {
      if (sbn != null) {
        NotificationListenerService.this.onNotificationPosted(sbn,mRankingMap);
      }
 else {
        NotificationListenerService.this.onNotificationRankingUpdate(mRankingMap);
      }
    }
 catch (    Throwable t) {
      Log.w(TAG,"Error running onNotificationPosted",t);
    }
  }
}
