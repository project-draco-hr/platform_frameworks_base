{
  long parentNodeId=root.getParentNodeId();
  int accessibilityViewId=AccessibilityNodeInfo.getAccessibilityViewId(parentNodeId);
  while (accessibilityViewId != AccessibilityNodeInfo.UNDEFINED) {
    if (outInfos.size() >= MAX_ACCESSIBILITY_NODE_INFO_BATCH_SIZE) {
      return;
    }
    final int virtualDescendantId=AccessibilityNodeInfo.getVirtualDescendantId(parentNodeId);
    if (virtualDescendantId != AccessibilityNodeInfo.UNDEFINED || accessibilityViewId == providerHost.getAccessibilityViewId()) {
      AccessibilityNodeInfo parent=provider.createAccessibilityNodeInfo(virtualDescendantId);
      if (parent != null) {
        outInfos.add(parent);
      }
      parentNodeId=parent.getParentNodeId();
      accessibilityViewId=AccessibilityNodeInfo.getAccessibilityViewId(parentNodeId);
    }
 else {
      prefetchPredecessorsOfRealNode(providerHost,outInfos);
      return;
    }
  }
}
