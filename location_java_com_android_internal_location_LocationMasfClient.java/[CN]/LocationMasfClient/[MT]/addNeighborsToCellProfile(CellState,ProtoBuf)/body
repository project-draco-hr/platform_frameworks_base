{
  List<CellState.NeighborCell> neighbors=cellState.getNeighbors();
  int mPrimaryMcc=cellState.getMcc();
  int mPrimaryMnc=cellState.getMnc();
  if (neighbors != null) {
    for (    CellState.NeighborCell neighbor : neighbors) {
      ProtoBuf nCell=new ProtoBuf(GcellularMessageTypes.GCELL);
      nCell.setInt(GCell.CELLID,neighbor.getCid());
      nCell.setInt(GCell.LAC,neighbor.getLac());
      nCell.setInt(GCell.RSSI,neighbor.getRssi());
      if (neighbor.getPsc() != -1) {
        nCell.setInt(GCell.PRIMARY_SCRAMBLING_CODE,neighbor.getPsc());
      }
      if (mPrimaryMcc != -1) {
        nCell.setInt(GCell.MCC,mPrimaryMcc);
      }
      if (mPrimaryMnc != -1) {
        nCell.setInt(GCell.MNC,mPrimaryMnc);
      }
      cellularProfile.addProtoBuf(GCellularProfile.NEIGHBORS,nCell);
    }
  }
}
