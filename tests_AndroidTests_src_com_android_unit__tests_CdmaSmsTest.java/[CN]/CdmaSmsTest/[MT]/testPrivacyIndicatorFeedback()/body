{
  BearerData bearerData=new BearerData();
  bearerData.messageType=BearerData.MESSAGE_TYPE_DELIVER;
  bearerData.messageId=0;
  bearerData.hasUserDataHeader=false;
  String payloadStr="test privacy indicator";
  bearerData.userData=makeUserData(payloadStr);
  bearerData.privacy=BearerData.PRIVACY_SECRET;
  bearerData.privacyIndicatorSet=true;
  byte[] encodedSms=BearerData.encode(bearerData);
  BearerData revBearerData=BearerData.decode(encodedSms);
  assertEquals(revBearerData.userData.payloadStr,payloadStr);
  assertEquals(revBearerData.privacyIndicatorSet,true);
  assertEquals(revBearerData.privacy,BearerData.PRIVACY_SECRET);
  bearerData.privacy=BearerData.PRIVACY_RESTRICTED;
  encodedSms=BearerData.encode(bearerData);
  revBearerData=BearerData.decode(encodedSms);
  assertEquals(revBearerData.privacy,BearerData.PRIVACY_RESTRICTED);
}
