{
  try {
    BearerData bearerData=new BearerData();
    bearerData.messageType=BearerData.MESSAGE_TYPE_DELIVER;
    bearerData.messageId=0;
    bearerData.hasUserDataHeader=false;
    UserData userData=new UserData();
    String str1="test ascii user data encoding";
    userData.payload=str1.getBytes("US-ASCII");
    userData.numFields=str1.length();
    userData.paddingBits=0;
    userData.msgEncoding=UserData.ENCODING_7BIT_ASCII;
    bearerData.userData=userData;
    byte[] encodedSms=BearerData.encode(bearerData);
    BearerData revBearerData=BearerData.decode(encodedSms);
    assertEquals(str1,revBearerData.userData.payloadStr);
    String str2="\u0160u\u1E5B\u0301r\u1ECFg\uD835\uDC1At\u00E9\u4E002\u3042";
    userData.payload=str2.getBytes("UTF-16");
    userData.numFields=str2.length() + 1;
    userData.msgEncoding=UserData.ENCODING_UNICODE_16;
    encodedSms=BearerData.encode(bearerData);
    revBearerData=BearerData.decode(encodedSms);
    assertEquals(str2,revBearerData.userData.payloadStr);
  }
 catch (  java.io.UnsupportedEncodingException ex) {
    throw new RuntimeException("user data encoding error");
  }
}
