{
  BearerData bearerData=new BearerData();
  bearerData.messageType=BearerData.MESSAGE_TYPE_DELIVER;
  bearerData.messageId=0;
  bearerData.hasUserDataHeader=false;
  String payloadStr="test message delivery alert";
  bearerData.userData=makeUserData(payloadStr);
  bearerData.alert=BearerData.ALERT_MEDIUM_PRIO;
  bearerData.alertIndicatorSet=true;
  byte[] encodedSms=BearerData.encode(bearerData);
  BearerData revBearerData=BearerData.decode(encodedSms);
  assertEquals(revBearerData.userData.payloadStr,payloadStr);
  assertEquals(revBearerData.alertIndicatorSet,true);
  assertEquals(revBearerData.alert,bearerData.alert);
  bearerData.alert=BearerData.ALERT_HIGH_PRIO;
  encodedSms=BearerData.encode(bearerData);
  revBearerData=BearerData.decode(encodedSms);
  assertEquals(revBearerData.userData.payloadStr,payloadStr);
  assertEquals(revBearerData.alertIndicatorSet,true);
  assertEquals(revBearerData.alert,bearerData.alert);
}
