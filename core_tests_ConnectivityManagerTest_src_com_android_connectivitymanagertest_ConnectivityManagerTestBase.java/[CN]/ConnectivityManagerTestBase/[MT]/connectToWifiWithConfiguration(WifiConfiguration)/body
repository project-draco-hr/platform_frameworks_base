{
  if (!mWifiManager.isWifiEnabled()) {
    logv("Wifi is not enabled, enable it");
    mWifiManager.setWifiEnabled(true);
    if (!waitForWifiState(WifiManager.WIFI_STATE_ENABLED,LONG_TIMEOUT)) {
      logv("wait for WIFI_STATE_ENABLED failed");
      return false;
    }
  }
  mWifiManager.connect(config,new WifiManager.ActionListener(){
    @Override public void onSuccess(){
    }
    @Override public void onFailure(    int reason){
      logv("connect failure " + reason);
    }
  }
);
  return true;
}
