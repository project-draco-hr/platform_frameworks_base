{
  log("ConnectivityReceiver: onReceive() is called with " + intent);
  String action=intent.getAction();
  if (!action.equals(ConnectivityManager.CONNECTIVITY_ACTION)) {
    Log.v("ConnectivityReceiver","onReceive() called with " + intent);
    return;
  }
  boolean noConnectivity=intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY,false);
  if (noConnectivity) {
    mState=State.DISCONNECTED;
  }
 else {
    mState=State.CONNECTED;
  }
  mNetworkInfo=(NetworkInfo)intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
  mOtherNetworkInfo=(NetworkInfo)intent.getParcelableExtra(ConnectivityManager.EXTRA_OTHER_NETWORK_INFO);
  mReason=intent.getStringExtra(ConnectivityManager.EXTRA_REASON);
  mIsFailOver=intent.getBooleanExtra(ConnectivityManager.EXTRA_IS_FAILOVER,false);
  log("mNetworkInfo: " + mNetworkInfo.toString());
  if (mOtherNetworkInfo != null) {
    log("mOtherNetworkInfo: " + mOtherNetworkInfo.toString());
  }
  recordNetworkState(mNetworkInfo.getType(),mNetworkInfo.getState());
  if (mOtherNetworkInfo != null) {
    recordNetworkState(mOtherNetworkInfo.getType(),mOtherNetworkInfo.getState());
  }
  notifyNetworkConnectivityChange();
}
