{
  char[] chs=text.toCharArray();
  int n=chs.length;
  byte[] chInfo=new byte[n];
  int resultDir=AndroidBidi.bidi(dir,chs,chInfo,n,false);
{
    StringBuilder sb=new StringBuilder("info:");
    for (int i=0; i < n; ++i) {
      sb.append(" ").append(String.valueOf(chInfo[i]));
    }
    Log.i("BIDI",sb.toString());
  }
  char[] resultLevelChars=new char[n];
  for (int i=0; i < n; ++i) {
    resultLevelChars[i]=(char)('0' + chInfo[i]);
  }
  String resultLevels=new String(resultLevelChars);
  assertEquals("direction",expectedDir,resultDir);
  assertEquals("levels",expectedLevels,resultLevels);
}
