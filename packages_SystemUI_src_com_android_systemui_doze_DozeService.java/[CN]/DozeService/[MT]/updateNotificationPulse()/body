{
  if (DEBUG)   Log.d(mTag,"updateNotificationPulse");
  if (!mDozeParameters.getPulseOnNotifications())   return;
  if (mScheduleResetsRemaining <= 0) {
    if (DEBUG)     Log.d(mTag,"No more schedule resets remaining");
    return;
  }
  final long now=System.currentTimeMillis();
  if ((now - mNotificationPulseTime) < mDozeParameters.getPulseDuration()) {
    if (DEBUG)     Log.d(mTag,"Recently updated, not resetting schedule");
    return;
  }
  mScheduleResetsRemaining--;
  if (DEBUG)   Log.d(mTag,"mScheduleResetsRemaining = " + mScheduleResetsRemaining);
  mNotificationPulseTime=now;
  rescheduleNotificationPulse(true);
}
