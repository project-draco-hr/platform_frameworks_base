{
  if (DEBUG)   Log.d(TAG,"evaluateSubscriptions");
  if (!mBootComplete) {
    if (DEBUG)     Log.d(TAG,"Skipping evaluate before boot complete");
    return;
  }
  final long now=System.currentTimeMillis();
  mTracker.setCallback(mSubscriptions.isEmpty() ? null : mTrackerCallback);
  setRegistered(!mSubscriptions.isEmpty());
  long reevaluateAt=0;
  for (  Uri conditionId : mSubscriptions) {
    final EventInfo event=ZenModeConfig.tryParseEventConditionId(conditionId);
    if (event == null) {
      notifyCondition(conditionId,Condition.STATE_FALSE,"badConditionId");
      continue;
    }
    final CheckEventResult result=mTracker.checkEvent(event,now);
    if (result.recheckAt != 0 && (reevaluateAt == 0 || result.recheckAt < reevaluateAt)) {
      reevaluateAt=result.recheckAt;
    }
    if (!result.inEvent) {
      notifyCondition(conditionId,Condition.STATE_FALSE,"!inEventNow");
      continue;
    }
    notifyCondition(conditionId,Condition.STATE_TRUE,"inEventNow");
  }
  updateAlarm(now,reevaluateAt);
  if (DEBUG)   Log.d(TAG,"evaluateSubscriptions took " + (System.currentTimeMillis() - now));
}
