{
  checkPermission(android.Manifest.permission.SET_WALLPAPER_HINTS);
  if (!isWallpaperSupported(callingPackage)) {
    return;
  }
synchronized (mLock) {
    int userId=UserHandle.getCallingUserId();
    WallpaperData wallpaper=mWallpaperMap.get(userId);
    if (wallpaper == null) {
      throw new IllegalStateException("Wallpaper not yet initialized for user " + userId);
    }
    if (padding.left < 0 || padding.top < 0 || padding.right < 0 || padding.bottom < 0) {
      throw new IllegalArgumentException("padding must be positive: " + padding);
    }
    if (!padding.equals(wallpaper.padding)) {
      wallpaper.padding.set(padding);
      saveSettingsLocked(wallpaper);
      if (mCurrentUserId != userId)       return;
      if (wallpaper.connection != null) {
        if (wallpaper.connection.mEngine != null) {
          try {
            wallpaper.connection.mEngine.setDisplayPadding(padding);
          }
 catch (          RemoteException e) {
          }
          notifyCallbacksLocked(wallpaper);
        }
 else         if (wallpaper.connection.mService != null) {
          wallpaper.connection.mPaddingChanged=true;
        }
      }
    }
  }
}
