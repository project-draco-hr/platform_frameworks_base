{
  final PackageManager pm=mContext.getPackageManager();
  String[] uidPackages=pm.getPackagesForUid(Binder.getCallingUid());
  boolean uidMatchPackage=Arrays.asList(uidPackages).contains(callingPackage);
  if (!uidMatchPackage) {
    return false;
  }
  final DevicePolicyManager dpm=mContext.getSystemService(DevicePolicyManager.class);
  if (dpm.isDeviceOwnerApp(callingPackage) || dpm.isProfileOwnerApp(callingPackage)) {
    return true;
  }
  final UserManager um=(UserManager)mContext.getSystemService(Context.USER_SERVICE);
  return !um.hasUserRestriction(UserManager.DISALLOW_SET_WALLPAPER);
}
