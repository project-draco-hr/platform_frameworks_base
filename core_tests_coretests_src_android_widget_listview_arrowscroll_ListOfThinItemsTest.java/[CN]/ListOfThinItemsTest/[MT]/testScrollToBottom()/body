{
  final int numItems=mListView.getAdapter().getCount();
  final int listBottom=mListView.getHeight() - mListView.getListPaddingBottom();
  for (int i=0; i < numItems; i++) {
    assertEquals("wrong selection at position " + i,i,mListView.getSelectedItemPosition());
    final int bottomFadingEdge=listBottom - mListView.getVerticalFadingEdgeLength();
    final View lastChild=mListView.getChildAt(mListView.getChildCount() - 1);
    final int lastVisiblePosition=lastChild.getId();
    int bottomThreshold=(lastVisiblePosition < mListView.getAdapter().getCount() - 1) ? bottomFadingEdge : listBottom;
    String prefix="after " + i + " down presses, ";
    assertTrue(prefix + "selected item is below bottom threshold (fading edge or bottom as " + "appropriate)",mListView.getSelectedView().getBottom() <= bottomThreshold);
    assertTrue(prefix + "first item in list must be at very top or just above",mListView.getChildAt(0).getTop() <= 0);
    assertTrue(prefix + "last item in list should be at very bottom or just below",lastChild.getBottom() >= listBottom);
    sendKeys(KeyEvent.KEYCODE_DPAD_DOWN);
  }
}
