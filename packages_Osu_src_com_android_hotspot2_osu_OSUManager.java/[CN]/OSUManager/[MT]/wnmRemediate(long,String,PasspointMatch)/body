{
  WifiConfiguration config=mWifiNetworkAdapter.getActiveWifiConfig();
  HomeSP homeSP=MOManager.buildSP(config.getMoTree());
  if (homeSP == null) {
    throw new IOException("Remediation request for unidentified Passpoint network " + config.networkId);
  }
  Network network=mWifiNetworkAdapter.getCurrentNetwork();
  if (network == null) {
    throw new IOException("Failed to determine current network");
  }
  WifiInfo wifiInfo=mWifiNetworkAdapter.getConnectionInfo();
  if (wifiInfo == null || Utils.parseMac(wifiInfo.getBSSID()) != bssid) {
    throw new IOException("Mismatching BSSID");
  }
  Log.d(TAG,"WNM Remediation on " + network.netId + " FQDN "+ homeSP.getFQDN());
  doRemediate(url,network,homeSP,false);
}
