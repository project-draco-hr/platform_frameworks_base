{
  if (i < 0) {
    i=(1 << size - 1) + (i & ((1 << size - 1) - 1));
  }
  return i;
}
