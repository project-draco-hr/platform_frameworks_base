{
  if (mEnableAccessibilityController != null) {
    final int action=event.getActionMasked();
    if (action == MotionEvent.ACTION_DOWN) {
      View decor=getWindow().getDecorView();
      final int eventX=(int)event.getX();
      final int eventY=(int)event.getY();
      if (eventX < -mWindowTouchSlop || eventY < -mWindowTouchSlop || eventX >= decor.getWidth() + mWindowTouchSlop || eventY >= decor.getHeight() + mWindowTouchSlop) {
        mCancelOnUp=true;
      }
    }
    try {
      if (!mIntercepted) {
        mIntercepted=mEnableAccessibilityController.onInterceptTouchEvent(event);
        if (mIntercepted) {
          final long now=SystemClock.uptimeMillis();
          event=MotionEvent.obtain(now,now,MotionEvent.ACTION_CANCEL,0.0f,0.0f,0);
          event.setSource(InputDevice.SOURCE_TOUCHSCREEN);
          mCancelOnUp=true;
        }
      }
 else {
        return mEnableAccessibilityController.onTouchEvent(event);
      }
    }
  finally {
      if (action == MotionEvent.ACTION_UP) {
        if (mCancelOnUp) {
          cancel();
        }
        mCancelOnUp=false;
        mIntercepted=false;
      }
    }
  }
  return super.dispatchTouchEvent(event);
}
