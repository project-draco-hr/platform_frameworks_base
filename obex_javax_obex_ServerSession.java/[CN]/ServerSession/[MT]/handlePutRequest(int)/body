{
  ServerOperation op=new ServerOperation(this,mInput,type,mMaxPacketLength,mListener);
  try {
    int response=-1;
    if ((op.finalBitSet) && !op.isValidBody()) {
      response=validateResponseCode(mListener.onDelete(op.requestHeader,op.replyHeader));
    }
 else {
      response=validateResponseCode(mListener.onPut(op));
    }
    if (response != ResponseCodes.OBEX_HTTP_OK && !op.isAborted) {
      op.sendReply(response);
    }
 else     if (!op.isAborted) {
      while (!op.finalBitSet) {
        op.sendReply(ResponseCodes.OBEX_HTTP_CONTINUE);
      }
      op.sendReply(response);
    }
  }
 catch (  Exception e) {
    if (V)     Log.d(TAG,"Exception occured - sending OBEX_HTTP_INTERNAL_ERROR reply",e);
    if (!op.isAborted) {
      sendResponse(ResponseCodes.OBEX_HTTP_INTERNAL_ERROR,null);
    }
  }
}
