{
  final boolean needWakeLockSuspendBlocker=((mWakeLockSummary & WAKE_LOCK_CPU) != 0);
  final boolean needDisplaySuspendBlocker=needDisplaySuspendBlockerLocked();
  final boolean autoSuspend=!needDisplaySuspendBlocker;
  if (!autoSuspend) {
    if (mDecoupleAutoSuspendModeFromDisplayConfig) {
      setAutoSuspendModeLocked(false);
    }
    if (mDecoupleInteractiveModeFromDisplayConfig) {
      setInteractiveModeLocked(true);
    }
  }
  if (needWakeLockSuspendBlocker && !mHoldingWakeLockSuspendBlocker) {
    mWakeLockSuspendBlocker.acquire();
    mHoldingWakeLockSuspendBlocker=true;
  }
  if (needDisplaySuspendBlocker && !mHoldingDisplaySuspendBlocker) {
    mDisplaySuspendBlocker.acquire();
    mHoldingDisplaySuspendBlocker=true;
  }
  if (!needWakeLockSuspendBlocker && mHoldingWakeLockSuspendBlocker) {
    mWakeLockSuspendBlocker.release();
    mHoldingWakeLockSuspendBlocker=false;
  }
  if (!needDisplaySuspendBlocker && mHoldingDisplaySuspendBlocker) {
    mDisplaySuspendBlocker.release();
    mHoldingDisplaySuspendBlocker=false;
  }
  if (autoSuspend) {
    if (mDecoupleInteractiveModeFromDisplayConfig) {
      setInteractiveModeLocked(false);
    }
    if (mDecoupleAutoSuspendModeFromDisplayConfig) {
      setAutoSuspendModeLocked(true);
    }
  }
}
