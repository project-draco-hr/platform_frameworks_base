{
  if (mWakefulnessChanging && mDisplayReady) {
    if (mWakefulness == WAKEFULNESS_DOZING && (mWakeLockSummary & WAKE_LOCK_DOZE) == 0) {
      return;
    }
    if (mWakefulness == WAKEFULNESS_DOZING || mWakefulness == WAKEFULNESS_ASLEEP) {
      logSleepTimeoutRecapturedLocked();
    }
    mWakefulnessChanging=false;
    mNotifier.onWakefulnessChangeFinished();
  }
}
