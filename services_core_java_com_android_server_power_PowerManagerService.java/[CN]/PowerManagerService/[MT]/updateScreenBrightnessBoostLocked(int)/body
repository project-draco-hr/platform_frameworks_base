{
  if ((dirty & DIRTY_SCREEN_BRIGHTNESS_BOOST) != 0) {
    if (mScreenBrightnessBoostInProgress) {
      final long now=SystemClock.uptimeMillis();
      mHandler.removeMessages(MSG_SCREEN_BRIGHTNESS_BOOST_TIMEOUT);
      if (mLastScreenBrightnessBoostTime > mLastSleepTime) {
        final long boostTimeout=mLastScreenBrightnessBoostTime + SCREEN_BRIGHTNESS_BOOST_TIMEOUT;
        if (boostTimeout > now) {
          Message msg=mHandler.obtainMessage(MSG_SCREEN_BRIGHTNESS_BOOST_TIMEOUT);
          msg.setAsynchronous(true);
          mHandler.sendMessageAtTime(msg,boostTimeout);
          return;
        }
      }
      mScreenBrightnessBoostInProgress=false;
      mNotifier.onScreenBrightnessBoostChanged();
      userActivityNoUpdateLocked(now,PowerManager.USER_ACTIVITY_EVENT_OTHER,0,Process.SYSTEM_UID);
    }
  }
}
