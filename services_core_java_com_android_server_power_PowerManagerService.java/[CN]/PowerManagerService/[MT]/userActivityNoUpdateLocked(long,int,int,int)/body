{
  if (DEBUG_SPEW) {
    Slog.d(TAG,"userActivityNoUpdateLocked: eventTime=" + eventTime + ", event="+ event+ ", flags=0x"+ Integer.toHexString(flags)+ ", uid="+ uid);
  }
  if (eventTime < mLastSleepTime || eventTime < mLastWakeTime || !mBootCompleted || !mSystemReady) {
    return false;
  }
  Trace.traceBegin(Trace.TRACE_TAG_POWER,"userActivity");
  try {
    if (eventTime > mLastInteractivePowerHintTime) {
      powerHintInternal(POWER_HINT_INTERACTION,0);
      mLastInteractivePowerHintTime=eventTime;
    }
    mNotifier.onUserActivity(event,uid);
    if (mWakefulness == WAKEFULNESS_ASLEEP || mWakefulness == WAKEFULNESS_DOZING || (flags & PowerManager.USER_ACTIVITY_FLAG_INDIRECT) != 0) {
      return false;
    }
    if ((flags & PowerManager.USER_ACTIVITY_FLAG_NO_CHANGE_LIGHTS) != 0) {
      if (eventTime > mLastUserActivityTimeNoChangeLights && eventTime > mLastUserActivityTime) {
        mLastUserActivityTimeNoChangeLights=eventTime;
        mDirty|=DIRTY_USER_ACTIVITY;
        return true;
      }
    }
 else {
      if (eventTime > mLastUserActivityTime) {
        mLastUserActivityTime=eventTime;
        mDirty|=DIRTY_USER_ACTIVITY;
        return true;
      }
    }
  }
  finally {
    Trace.traceEnd(Trace.TRACE_TAG_POWER);
  }
  return false;
}
