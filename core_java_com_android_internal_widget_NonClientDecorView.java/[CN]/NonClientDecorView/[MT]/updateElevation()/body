{
  float elevation=0;
  if (mWindowHasShadow && mFrameRendererThread == null) {
    boolean fill=isFillingScreen();
    elevation=fill ? 0 : (mWindowHasFocus ? DECOR_SHADOW_FOCUSED_HEIGHT_IN_DIP : DECOR_SHADOW_UNFOCUSED_HEIGHT_IN_DIP);
    if (!mAllowUpdateElevation && !fill) {
      elevation=DECOR_SHADOW_FOCUSED_HEIGHT_IN_DIP;
    }
    elevation=dipToPx(elevation);
  }
  if (mOwner.getDecorView().getElevation() != elevation) {
    mOwner.setElevation(elevation);
  }
}
