{
  long startTime=System.currentTimeMillis();
  View caption=getChildAt(0);
  View content=getChildAt(1);
  if (caption != null && content != null) {
    int captionHeight=caption.getHeight();
    int contentWidth=content.getWidth();
    int contentHeight=content.getHeight();
    int[] surfaceOrigin=new int[2];
    surfaceOrigin[0]=0;
    surfaceOrigin[1]=0;
    getLocationInSurface(surfaceOrigin);
    if (captionHeight != 0 && contentWidth != 0 && contentHeight != 0) {
      mLastCaptionHeight=captionHeight;
      mLastXOffset=surfaceOrigin[0];
      mLastYOffset=surfaceOrigin[1];
      mLastContentWidth=contentWidth;
      mLastContentHeight=contentHeight;
    }
  }
  final int left=mLastXOffset + newBounds.left;
  final int top=mLastYOffset + newBounds.top;
  final int width=newBounds.width();
  final int height=newBounds.height();
  mFrameNode.setLeftTopRightBottom(left,top,left + width,top + mLastCaptionHeight);
  DisplayListCanvas canvas=mFrameNode.start(width,height);
  canvas.drawColor(Color.BLACK);
  mFrameNode.end(canvas);
  mBackdropNode.setLeftTopRightBottom(left,top + mLastCaptionHeight,left + width,top + height);
  canvas=mBackdropNode.start(width,height - mLastCaptionHeight);
  canvas.drawColor(0xff808080);
  mBackdropNode.end(canvas);
  mRenderer.setContentDrawBounds(mLastXOffset,mLastYOffset + mLastCaptionHeight,mLastXOffset + mLastContentWidth,mLastYOffset + mLastCaptionHeight + mLastContentHeight);
  mRenderer.drawRenderNode(mFrameNode);
  mRenderer.drawRenderNode(mBackdropNode);
}
