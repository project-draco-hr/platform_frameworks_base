{
  if (mTransitioning || mDown)   return;
  mTransitioning=true;
  enableWindowExitAnimation(false);
  mPreview.getLocationInWindow(mTmpLoc);
  final float pvHeight=mPreview.getHeight() * mPreview.getScaleY();
  final float pvCenter=mTmpLoc[1] + pvHeight / 2f;
  final ViewGroup root=(ViewGroup)getRootView();
  if (mFullscreenPreview == null) {
    mFullscreenPreview=getPreviewWidget(mContext,mWidgetInfo);
    mFullscreenPreview.setClickable(false);
    root.addView(mFullscreenPreview);
  }
  root.getWindowVisibleDisplayFrame(mTmpRect);
  final float fsHeight=mTmpRect.height();
  final float fsCenter=mTmpRect.top + fsHeight / 2;
  final float fsScaleY=pvHeight / fsHeight;
  final float fsTransY=pvCenter - fsCenter;
  final float fsScaleX=mPreview.getScaleX();
  mPreview.setVisibility(View.GONE);
  mFullscreenPreview.setVisibility(View.VISIBLE);
  mFullscreenPreview.setTranslationY(fsTransY);
  mFullscreenPreview.setScaleX(fsScaleX);
  mFullscreenPreview.setScaleY(fsScaleY);
  mFullscreenPreview.animate().scaleX(1).scaleY(1).translationX(0).translationY(0).setDuration(WIDGET_ANIMATION_DURATION).withEndAction(mPostTransitionToCameraEndAction).start();
  mCallbacks.onLaunchingCamera();
}
