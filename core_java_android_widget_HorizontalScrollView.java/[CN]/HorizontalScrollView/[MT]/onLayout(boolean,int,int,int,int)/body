{
  final View child=getChildAt(0);
  final int childWidth=child.getMeasuredWidth();
  final LayoutParams childParams=(LayoutParams)child.getLayoutParams();
  final int available=r - l - getPaddingLeftWithForeground()- getPaddingRightWithForeground()- childParams.leftMargin- childParams.rightMargin;
  final boolean forceLeftGravity=(childWidth > available);
  layoutChildren(l,t,r,b,forceLeftGravity);
  mIsLayoutDirty=false;
  if (mChildToScrollTo != null && isViewDescendantOf(mChildToScrollTo,this)) {
    scrollToChild(mChildToScrollTo);
  }
  mChildToScrollTo=null;
  if (!hasLayout()) {
    final int scrollRange=Math.max(0,childWidth - (r - l - mPaddingLeft- mPaddingRight));
    if (mSavedState != null) {
      if (isLayoutRtl() == mSavedState.isLayoutRtl) {
        mScrollX=mSavedState.scrollPosition;
      }
 else {
        mScrollX=scrollRange - mSavedState.scrollPosition;
      }
    }
 else {
      if (isLayoutRtl()) {
        mScrollX=scrollRange - mScrollX;
      }
    }
    if (mScrollX > scrollRange) {
      mScrollX=scrollRange;
    }
 else     if (mScrollX < 0) {
      mScrollX=0;
    }
  }
  scrollTo(mScrollX,mScrollY);
}
