{
  lockAWT();
  try {
    if (width == 0 || height == 0) {
      return ImageObserver.ALLBITS;
    }
    if (!(image instanceof OffscreenImage)) {
      return ImageObserver.ALLBITS;
    }
    OffscreenImage oi=(OffscreenImage)image;
    return oi.checkImage(observer);
  }
  finally {
    unlockAWT();
  }
}
