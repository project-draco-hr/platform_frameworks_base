{
  int action=event.getActionMasked();
  if (mMotionCancelled && action != MotionEvent.ACTION_DOWN && action != MotionEvent.ACTION_UP && action != MotionEvent.ACTION_CANCEL) {
    return false;
  }
  final float y=event.getY();
  final float x=event.getX();
  boolean isUp=false;
switch (action) {
case MotionEvent.ACTION_DOWN:
    if (mSwipingInProgress) {
      cancelAnimation();
    }
  mInitialTouchY=y;
mInitialTouchX=x;
mTranslationOnDown=mTranslation;
initVelocityTracker();
trackMovement(event);
mMotionPerformedByUser=false;
mMotionCancelled=false;
break;
case MotionEvent.ACTION_POINTER_DOWN:
mMotionCancelled=true;
endMotion(event,true);
break;
case MotionEvent.ACTION_MOVE:
final float w=x - mInitialTouchX;
trackMovement(event);
if (((leftSwipePossible() && w > mTouchSlop) || (rightSwipePossible() && w < -mTouchSlop)) && Math.abs(w) > Math.abs(y - mInitialTouchY) && !mSwipingInProgress) {
cancelAnimation();
mInitialTouchY=y;
mInitialTouchX=x;
mTranslationOnDown=mTranslation;
mSwipingInProgress=true;
mCallback.onSwipingStarted(w < -mTouchSlop);
}
if (mSwipingInProgress) {
setTranslation(mTranslationOnDown + x - mInitialTouchX,false,false);
}
break;
case MotionEvent.ACTION_UP:
isUp=true;
case MotionEvent.ACTION_CANCEL:
trackMovement(event);
endMotion(event,!isUp);
break;
}
return true;
}
