{
  mContext.unregisterReceiver(mBroadcastReceiver);
  mHandler.removeMessages(MSG_RESTART_TIMEOUT);
  if (!mBound) {
    return;
  }
  if (DEBUG)   Log.v(TAG,"TrustAgent unbound : " + mName.flattenToShortString());
  mTrustManagerService.mArchive.logAgentStopped(mUserId,mName);
  mContext.unbindService(mConnection);
  mBound=false;
  mTrustAgentService=null;
  mSetTrustAgentFeaturesToken=null;
  mHandler.sendEmptyMessage(MSG_REVOKE_TRUST);
}
