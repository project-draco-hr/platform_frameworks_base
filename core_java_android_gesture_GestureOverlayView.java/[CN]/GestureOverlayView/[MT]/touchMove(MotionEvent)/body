{
  Rect areaToRefresh=null;
  final float x=event.getX();
  final float y=event.getY();
  final float previousX=mX;
  final float previousY=mY;
  final float dx=Math.abs(x - previousX);
  final float dy=Math.abs(y - previousY);
  if (dx >= GestureStroke.TOUCH_TOLERANCE || dy >= GestureStroke.TOUCH_TOLERANCE) {
    areaToRefresh=mInvalidRect;
    areaToRefresh.set((int)mCurveEndX - mInvalidateExtraBorder,(int)mCurveEndY - mInvalidateExtraBorder,(int)mCurveEndX + mInvalidateExtraBorder,(int)mCurveEndY + mInvalidateExtraBorder);
    mCurveEndX=(x + previousX) / 2;
    mCurveEndY=(y + previousY) / 2;
    mPath.quadTo(previousX,previousY,mCurveEndX,mCurveEndY);
    areaToRefresh.union((int)previousX - mInvalidateExtraBorder,(int)previousY - mInvalidateExtraBorder,(int)previousX + mInvalidateExtraBorder,(int)previousY + mInvalidateExtraBorder);
    areaToRefresh.union((int)mCurveEndX - mInvalidateExtraBorder,(int)mCurveEndY - mInvalidateExtraBorder,(int)mCurveEndX + mInvalidateExtraBorder,(int)mCurveEndY + mInvalidateExtraBorder);
    mX=x;
    mY=y;
  }
  mPointBuffer.add(new GesturePoint(x,y,event.getEventTime()));
  final ArrayList<OnGestureListener> listeners=mOnGestureListeners;
  final int count=listeners.size();
  for (int i=0; i < count; i++) {
    listeners.get(i).onGesture(this,event);
  }
  return areaToRefresh;
}
