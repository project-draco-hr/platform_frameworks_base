{
  mIsListeningForGestures=false;
  mCurrentGesture.addStroke(new GestureStroke(mStrokeBuffer));
  if (!cancel) {
    final ArrayList<OnGestureListener> listeners=mOnGestureListeners;
    int count=listeners.size();
    for (int i=0; i < count; i++) {
      listeners.get(i).onGestureEnded(this,event);
    }
    if (mHandleGestureActions) {
      clear(true,mIsGesturing);
    }
  }
 else {
    final ArrayList<OnGestureListener> listeners=mOnGestureListeners;
    final int count=listeners.size();
    for (int i=0; i < count; i++) {
      listeners.get(i).onGestureCancelled(this,event);
    }
    clear(false);
  }
  mIsGesturing=false;
  mStrokeBuffer.clear();
}
