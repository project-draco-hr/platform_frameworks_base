{
  if (DEBUG)   Log.d(TAG,"updateCarrierTextWithSimStatus(), simState = " + simState);
  CharSequence carrierText=null;
  int carrierHelpTextId=0;
  mEmergencyButtonEnabledBecauseSimLocked=false;
  mStatus=getStatusForIccState(simState);
  mSimState=simState;
switch (mStatus) {
case Normal:
    carrierText=makeCarierString(mPlmn,mSpn);
  break;
case NetworkLocked:
carrierText=makeCarierString(mPlmn,getContext().getText(R.string.lockscreen_network_locked_message));
carrierHelpTextId=R.string.lockscreen_instructions_when_pattern_disabled;
break;
case SimMissing:
carrierText=getContext().getText(R.string.lockscreen_missing_sim_message_short);
if (mLockPatternUtils.isEmergencyCallCapable()) {
carrierText=makeCarierString(carrierText,mPlmn);
}
carrierHelpTextId=R.string.lockscreen_missing_sim_instructions_long;
break;
case SimPermDisabled:
carrierText=getContext().getText(R.string.lockscreen_missing_sim_message_short);
carrierHelpTextId=R.string.lockscreen_permanent_disabled_sim_instructions;
mEmergencyButtonEnabledBecauseSimLocked=true;
break;
case SimMissingLocked:
carrierText=makeCarierString(mPlmn,getContext().getText(R.string.lockscreen_missing_sim_message_short));
carrierHelpTextId=R.string.lockscreen_missing_sim_instructions;
mEmergencyButtonEnabledBecauseSimLocked=true;
break;
case SimLocked:
carrierText=makeCarierString(mPlmn,getContext().getText(R.string.lockscreen_sim_locked_message));
mEmergencyButtonEnabledBecauseSimLocked=true;
break;
case SimPukLocked:
carrierText=makeCarierString(mPlmn,getContext().getText(R.string.lockscreen_sim_puk_locked_message));
if (!mLockPatternUtils.isPukUnlockScreenEnable()) {
mEmergencyButtonEnabledBecauseSimLocked=true;
}
break;
}
setCarrierText(carrierText);
setCarrierHelpText(carrierHelpTextId);
updateEmergencyCallButtonState(mPhoneState);
}
