{
  String path=null;
  String scheme=uri.getScheme();
  if (null == scheme || scheme.equals("") || scheme.equals(ContentResolver.SCHEME_FILE)) {
    path=uri.getPath();
  }
 else   if (scheme.equals(ContentResolver.SCHEME_CONTENT)) {
    String[] projection=new String[]{MediaStore.MediaColumns.DATA};
    Cursor cursor=null;
    try {
      cursor=mContext.getContentResolver().query(uri,projection,null,null,null);
    }
 catch (    SQLiteException e) {
      throw new IllegalArgumentException("Given Uri is not formatted in a way " + "so that it can be found in media store.");
    }
    if (null == cursor || 0 == cursor.getCount() || !cursor.moveToFirst()) {
      throw new IllegalArgumentException("Given Uri could not be found in media store");
    }
    int pathIndex=cursor.getColumnIndexOrThrow(MediaStore.MediaColumns.DATA);
    path=cursor.getString(pathIndex);
    cursor.close();
  }
 else {
    throw new IllegalArgumentException("Given Uri scheme is not supported");
  }
  return path;
}
