{
  Context context=getContext();
  while (context instanceof ContextWrapper) {
    if (context instanceof Activity) {
      return (Activity)context;
    }
    context=((ContextWrapper)context).getBaseContext();
  }
  throw new IllegalStateException("The MediaRouteButton's Context is not an Activity.");
}
