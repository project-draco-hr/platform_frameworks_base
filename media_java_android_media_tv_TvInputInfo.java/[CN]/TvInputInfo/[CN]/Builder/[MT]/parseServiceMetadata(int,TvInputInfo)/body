{
  ServiceInfo si=mResolveInfo.serviceInfo;
  PackageManager pm=mContext.getPackageManager();
  try (XmlResourceParser parser=si.loadXmlMetaData(pm,TvInputService.SERVICE_META_DATA)){
    if (parser == null) {
      throw new XmlPullParserException("No " + TvInputService.SERVICE_META_DATA + " meta-data for "+ si.name);
    }
    Resources res=pm.getResourcesForApplication(si.applicationInfo);
    AttributeSet attrs=Xml.asAttributeSet(parser);
    int type;
    while ((type=parser.next()) != XmlPullParser.END_DOCUMENT && type != XmlPullParser.START_TAG) {
    }
    String nodeName=parser.getName();
    if (!XML_START_TAG_NAME.equals(nodeName)) {
      throw new XmlPullParserException("Meta-data does not start with tv-input-service tag in " + si.name);
    }
    TypedArray sa=res.obtainAttributes(attrs,com.android.internal.R.styleable.TvInputService);
    info.mSetupActivity=sa.getString(com.android.internal.R.styleable.TvInputService_setupActivity);
    if (DEBUG) {
      Log.d(TAG,"Setup activity loaded. [" + info.mSetupActivity + "] for "+ si.name);
    }
    if (inputType == TYPE_TUNER && TextUtils.isEmpty(info.mSetupActivity)) {
      throw new XmlPullParserException("Setup activity not found in " + si.name);
    }
    info.mSettingsActivity=sa.getString(com.android.internal.R.styleable.TvInputService_settingsActivity);
    if (DEBUG) {
      Log.d(TAG,"Settings activity loaded. [" + info.mSettingsActivity + "] for "+ si.name);
    }
    info.mCanRecord=sa.getBoolean(com.android.internal.R.styleable.TvInputService_canRecord,false);
    info.mTunerCount=sa.getInt(com.android.internal.R.styleable.TvInputService_tunerCount,info.mTunerCount);
    sa.recycle();
  }
 catch (  NameNotFoundException e) {
    throw new XmlPullParserException("Unable to create context for: " + si.packageName);
  }
  return info;
}
