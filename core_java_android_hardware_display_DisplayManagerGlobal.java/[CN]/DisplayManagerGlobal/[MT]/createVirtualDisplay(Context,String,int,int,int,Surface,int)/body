{
  if (TextUtils.isEmpty(name)) {
    throw new IllegalArgumentException("name must be non-null and non-empty");
  }
  if (width <= 0 || height <= 0 || densityDpi <= 0) {
    throw new IllegalArgumentException("width, height, and densityDpi must be " + "greater than 0");
  }
  if (surface == null) {
    throw new IllegalArgumentException("surface must not be null");
  }
  Binder token=new Binder();
  int displayId;
  try {
    displayId=mDm.createVirtualDisplay(token,context.getPackageName(),name,width,height,densityDpi,surface,flags);
  }
 catch (  RemoteException ex) {
    Log.e(TAG,"Could not create virtual display: " + name,ex);
    return null;
  }
  if (displayId < 0) {
    Log.e(TAG,"Could not create virtual display: " + name);
    return null;
  }
  Display display=getRealDisplay(displayId);
  if (display == null) {
    Log.wtf(TAG,"Could not obtain display info for newly created " + "virtual display: " + name);
    try {
      mDm.releaseVirtualDisplay(token);
    }
 catch (    RemoteException ex) {
    }
    return null;
  }
  return new VirtualDisplay(this,display,token);
}
