{
synchronized (mLock) {
    if (CameraDevice.this.mDeviceListener == null)     return;
    final StateListener listener=CameraDevice.this.mDeviceListener;
    Runnable r=null;
switch (errorCode) {
case ERROR_CAMERA_DISCONNECTED:
      r=new Runnable(){
        public void run(){
          listener.onDisconnected(CameraDevice.this);
        }
      }
;
    break;
case ERROR_CAMERA_DEVICE:
case ERROR_CAMERA_SERVICE:
  r=new Runnable(){
    public void run(){
      listener.onError(CameraDevice.this,errorCode);
    }
  }
;
break;
default :
Log.e(TAG,"Unknown error from camera device: " + errorCode);
}
if (r != null) {
CameraDevice.this.mDeviceHandler.post(r);
}
}
}
