{
  if (ch <= '9' && ch >= '0') {
    return ch - '0';
  }
 else   if (ch >= 'a' && ch <= 'f') {
    return ch + 10 - 'a';
  }
 else   if (ch <= 'F' && ch >= 'A') {
    return ch + 10 - 'A';
  }
 else   if (lenient) {
    return -1;
  }
 else {
    throw new NumberFormatException("Bad hex-character: " + ch);
  }
}
