{
  if ((text.length() & 1) == 1) {
    throw new NumberFormatException("Odd length hex string: " + text.length());
  }
  byte[] data=new byte[text.length() >> 1];
  int position=0;
  for (int n=0; n < text.length(); n+=2) {
    data[position]=(byte)(((fromHex(text.charAt(n),false) & NIBBLE_MASK) << 4) | (fromHex(text.charAt(n + 1),false) & NIBBLE_MASK));
    position++;
  }
  return data;
}
