{
  Location coarse=new Location(fine);
  coarse.removeBearing();
  coarse.removeSpeed();
  coarse.removeAltitude();
  coarse.setExtras(null);
  double lat=coarse.getLatitude();
  double lon=coarse.getLongitude();
  lat=wrapLatitude(lat);
  lon=wrapLongitude(lon);
synchronized (mLock) {
    updateRandomOffsetLocked();
    lon+=metersToDegreesLongitude(mOffsetLongitudeMeters,lat);
    lat+=metersToDegreesLatitude(mOffsetLatitudeMeters);
    if (D)     Log.d(TAG,String.format("applied offset of %.0f, %.0f (meters)",mOffsetLongitudeMeters,mOffsetLatitudeMeters));
  }
  lat=wrapLatitude(lat);
  lon=wrapLongitude(lon);
  double latGranularity=metersToDegreesLatitude(GRID_SIZE_METERS);
  lat=Math.round(lat / latGranularity) * latGranularity;
  double lonGranularity=metersToDegreesLongitude(GRID_SIZE_METERS,lat);
  lon=Math.round(lon / lonGranularity) * lonGranularity;
  lat=wrapLatitude(lat);
  lon=wrapLongitude(lon);
  coarse.setLatitude(lat);
  coarse.setLongitude(lon);
  coarse.setAccuracy(Math.max(ACCURACY_METERS,coarse.getAccuracy()));
  if (D)   Log.d(TAG,"fudged " + fine + " to "+ coarse);
  return coarse;
}
