{
synchronized (mLock) {
    Bundle extras=location.getExtras();
    if (extras == null) {
      return addCoarseLocationExtraLocked(location);
    }
    Parcelable parcel=extras.getParcelable(EXTRA_COARSE_LOCATION);
    if (parcel == null) {
      return addCoarseLocationExtraLocked(location);
    }
    if (!(parcel instanceof Location)) {
      return addCoarseLocationExtraLocked(location);
    }
    Location coarse=(Location)parcel;
    if (coarse.getAccuracy() < mAccuracyInMeters) {
      return addCoarseLocationExtraLocked(location);
    }
    return coarse;
  }
}
