{
  int state=r.state;
  r.state=BroadcastRecord.IDLE;
  if (state == BroadcastRecord.IDLE) {
    if (explicit) {
      Slog.w(TAG,"finishReceiver [" + mQueueName + "] called but state is IDLE");
    }
  }
  r.receiver=null;
  r.intent.setComponent(null);
  if (r.curApp != null) {
    r.curApp.curReceiver=null;
  }
  if (r.curFilter != null) {
    r.curFilter.receiverList.curBroadcast=null;
  }
  r.curFilter=null;
  r.curApp=null;
  r.curComponent=null;
  r.curReceiver=null;
  mPendingBroadcast=null;
  r.resultCode=resultCode;
  r.resultData=resultData;
  r.resultExtras=resultExtras;
  r.resultAbort=resultAbort;
  return state == BroadcastRecord.APP_RECEIVE || state == BroadcastRecord.CALL_DONE_RECEIVE;
}
