{
  final PositionMetadata posMetadata=getUnflattenedPos(flatListPos);
  if (posMetadata.position.type == ExpandableListPosition.GROUP) {
    return mExpandableListAdapter.getGroupView(posMetadata.position.groupPos,posMetadata.isExpanded(),convertView,parent);
  }
 else   if (posMetadata.position.type == ExpandableListPosition.CHILD) {
    final boolean isLastChild=posMetadata.groupMetadata.lastChildFlPos == flatListPos;
    final View view=mExpandableListAdapter.getChildView(posMetadata.position.groupPos,posMetadata.position.childPos,isLastChild,convertView,parent);
    return view;
  }
 else {
    throw new RuntimeException("Flat list position is of unknown type");
  }
}
