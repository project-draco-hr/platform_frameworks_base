{
  final Context context=getContext();
  if (localLOGV)   Slog.i(TAG,"Sending low memory notification");
  EventLog.writeEvent(EventLogTags.LOW_STORAGE,mFreeMem);
  Intent lowMemIntent=new Intent(Environment.isExternalStorageEmulated() ? Settings.ACTION_INTERNAL_STORAGE_SETTINGS : Intent.ACTION_MANAGE_PACKAGE_STORAGE);
  lowMemIntent.putExtra("memory",mFreeMem);
  lowMemIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
  NotificationManager mNotificationMgr=(NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
  CharSequence title=context.getText(com.android.internal.R.string.low_internal_storage_view_title);
  CharSequence details=context.getText(com.android.internal.R.string.low_internal_storage_view_text);
  PendingIntent intent=PendingIntent.getActivityAsUser(context,0,lowMemIntent,0,null,UserHandle.CURRENT);
  Notification notification=new Notification();
  notification.icon=com.android.internal.R.drawable.stat_notify_disk_full;
  notification.tickerText=title;
  notification.flags|=Notification.FLAG_NO_CLEAR;
  notification.color=context.getResources().getColor(com.android.internal.R.color.system_notification_accent_color);
  notification.setLatestEventInfo(context,title,details,intent);
  notification.visibility=Notification.VISIBILITY_PUBLIC;
  notification.category=Notification.CATEGORY_SYSTEM;
  mNotificationMgr.notifyAsUser(null,LOW_MEMORY_NOTIFICATION_ID,notification,UserHandle.ALL);
  context.sendStickyBroadcastAsUser(mStorageLowIntent,UserHandle.ALL);
}
