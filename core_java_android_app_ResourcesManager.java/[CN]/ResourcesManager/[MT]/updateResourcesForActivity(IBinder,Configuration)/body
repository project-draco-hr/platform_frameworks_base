{
  final ClassLoader classLoader;
  final ResourcesKey oldKey;
synchronized (this) {
    WeakReference<Resources> weakResRef=mActivityResourceReferences.get(activityToken);
    final Resources resources=weakResRef != null ? weakResRef.get() : null;
    if (resources == null) {
      Slog.e(TAG,"can't update resources for uncached activity " + activityToken);
      return;
    }
    classLoader=resources.getClassLoader();
    oldKey=findKeyForResourceImpl(resources.getImpl());
    if (oldKey == null) {
      Slog.e(TAG,"can't find ResourcesKey for resources impl=" + resources.getImpl());
      return;
    }
  }
  getResources(activityToken,oldKey.mResDir,oldKey.mSplitResDirs,oldKey.mOverlayDirs,oldKey.mLibDirs,oldKey.mDisplayId,overrideConfig,oldKey.mCompatInfo,classLoader);
}
