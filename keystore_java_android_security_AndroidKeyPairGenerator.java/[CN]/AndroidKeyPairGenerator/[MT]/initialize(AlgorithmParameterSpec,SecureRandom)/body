{
  if (params == null) {
    throw new InvalidAlgorithmParameterException("must supply params of type android.security.KeyPairGeneratorSpec");
  }
 else   if (!(params instanceof KeyPairGeneratorSpec)) {
    throw new InvalidAlgorithmParameterException("params must be of type android.security.KeyPairGeneratorSpec");
  }
  KeyPairGeneratorSpec spec=(KeyPairGeneratorSpec)params;
  String keyAlgorithm=getKeyAlgorithm(spec);
  int keyType=KeyStore.getKeyTypeForAlgorithm(keyAlgorithm);
  if (keyType == -1) {
    throw new InvalidAlgorithmParameterException("Unsupported key algorithm: " + keyAlgorithm);
  }
  int keySize=spec.getKeySize();
  if (keySize == -1) {
    keySize=getDefaultKeySize(keyType);
    if (keySize == -1) {
      throw new InvalidAlgorithmParameterException("Unsupported key algorithm: " + keyAlgorithm);
    }
  }
  checkCorrectParametersSpec(keyType,keySize,spec.getAlgorithmParameterSpec());
  checkValidKeySize(keyAlgorithm,keyType,keySize);
  mKeyAlgorithm=keyAlgorithm;
  mKeyType=keyType;
  mKeySize=keySize;
  mSpec=spec;
  mKeyStore=android.security.KeyStore.getInstance();
}
