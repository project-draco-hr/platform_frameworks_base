{
  List<AccessibilityServiceInfo> expectedServices=new ArrayList<AccessibilityServiceInfo>();
  AccessibilityServiceInfo accessibilityServiceInfo=new AccessibilityServiceInfo();
  accessibilityServiceInfo.packageNames=new String[]{"foo.bar"};
  expectedServices.add(accessibilityServiceInfo);
  IAccessibilityManager mockServiceInterface=mMockServiceInterface;
  expect(mockServiceInterface.addClient(anyIAccessibilityManagerClient(),UserHandle.USER_OWNER)).andReturn(AccessibilityManager.STATE_FLAG_ACCESSIBILITY_ENABLED);
  expect(mockServiceInterface.getInstalledAccessibilityServiceList(UserHandle.USER_OWNER)).andReturn(expectedServices);
  replay(mockServiceInterface);
  AccessibilityManager manager=new AccessibilityManager(mContext,mockServiceInterface,UserHandle.USER_OWNER);
  List<AccessibilityServiceInfo> receivedServices=manager.getInstalledAccessibilityServiceList();
  assertEquals("All expected services must be returned",receivedServices,expectedServices);
  verify(mockServiceInterface);
}
