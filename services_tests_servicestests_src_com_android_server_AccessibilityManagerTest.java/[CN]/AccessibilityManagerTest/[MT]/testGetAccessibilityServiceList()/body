{
  List<AccessibilityServiceInfo> expectedServices=new ArrayList<>();
  AccessibilityServiceInfo accessibilityServiceInfo=new AccessibilityServiceInfo();
  accessibilityServiceInfo.packageNames=new String[]{"foo.bar"};
  expectedServices.add(accessibilityServiceInfo);
  when(mMockService.getInstalledAccessibilityServiceList(anyInt())).thenReturn(expectedServices);
  AccessibilityManager manager=createManager(true);
  List<AccessibilityServiceInfo> receivedServices=manager.getInstalledAccessibilityServiceList();
  verify(mMockService).getInstalledAccessibilityServiceList(UserHandle.USER_CURRENT);
  assertEquals("All expected services must be returned",expectedServices,receivedServices);
}
