{
  IAccessibilityManager mockServiceInterface=mMockServiceInterface;
  expect(mockServiceInterface.addClient(anyIAccessibilityManagerClient(),UserHandle.USER_OWNER)).andReturn(AccessibilityManager.STATE_FLAG_ACCESSIBILITY_ENABLED);
  replay(mockServiceInterface);
  AccessibilityManager manager=new AccessibilityManager(mContext,mockServiceInterface,UserHandle.USER_OWNER);
  boolean isEnabledServiceEnabled=manager.isEnabled();
  assertTrue("Must be enabled since the mock service is enabled",isEnabledServiceEnabled);
  manager.getClient().setState(0);
  Thread.sleep(TIMEOUT_BINDER_CALL);
  boolean isEnabledServcieDisabled=manager.isEnabled();
  assertFalse("Must be disabled since the mock service is disabled",isEnabledServcieDisabled);
  verify(mockServiceInterface);
}
