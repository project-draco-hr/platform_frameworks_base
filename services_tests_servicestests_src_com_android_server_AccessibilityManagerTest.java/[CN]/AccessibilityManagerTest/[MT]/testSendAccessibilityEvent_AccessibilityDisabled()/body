{
  AccessibilityEvent sentEvent=AccessibilityEvent.obtain();
  IAccessibilityManager mockServiceInterface=mMockServiceInterface;
  expect(mockServiceInterface.addClient(anyIAccessibilityManagerClient(),UserHandle.USER_OWNER)).andReturn(0);
  replay(mockServiceInterface);
  AccessibilityManager manager=new AccessibilityManager(mContext,mockServiceInterface,UserHandle.USER_OWNER);
  try {
    manager.sendAccessibilityEvent(sentEvent);
    fail("No accessibility events are sent if accessibility is disabled");
  }
 catch (  IllegalStateException ise) {
    assertEquals("Accessibility off. Did you forget to check that?",ise.getMessage());
  }
  verify(mockServiceInterface);
}
