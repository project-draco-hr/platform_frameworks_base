{
  mInFlightPreview=request;
  if (mPreviewRunning) {
    return;
  }
  if (mPreviewTexture == null) {
    throw new IllegalStateException("Preview capture called with no preview surfaces configured.");
  }
  mPreviewTexture.setDefaultBufferSize(mIntermediateBufferSize.getWidth(),mIntermediateBufferSize.getHeight());
  mCamera.setPreviewTexture(mPreviewTexture);
  Camera.Parameters params=mCamera.getParameters();
  List<int[]> supportedFpsRanges=params.getSupportedPreviewFpsRange();
  int[] bestRange=getPhotoPreviewFpsRange(supportedFpsRanges);
  if (DEBUG) {
    Log.d(TAG,"doPreviewCapture - Selected range [" + bestRange[Camera.Parameters.PREVIEW_FPS_MIN_INDEX] + ","+ bestRange[Camera.Parameters.PREVIEW_FPS_MAX_INDEX]+ "]");
  }
  params.setPreviewFpsRange(bestRange[Camera.Parameters.PREVIEW_FPS_MIN_INDEX],bestRange[Camera.Parameters.PREVIEW_FPS_MAX_INDEX]);
  params.setRecordingHint(true);
  mCamera.setParameters(params);
  startPreview();
}
