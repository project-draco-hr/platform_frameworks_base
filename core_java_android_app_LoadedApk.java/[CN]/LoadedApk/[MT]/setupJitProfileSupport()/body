{
  if (!SystemProperties.getBoolean("dalvik.vm.usejitprofiles",false)) {
    return;
  }
  final List<String> codePaths=new ArrayList<>();
  if ((mApplicationInfo.flags & ApplicationInfo.FLAG_HAS_CODE) != 0) {
    codePaths.add(mApplicationInfo.sourceDir);
  }
  if (mApplicationInfo.splitSourceDirs != null) {
    Collections.addAll(codePaths,mApplicationInfo.splitSourceDirs);
  }
  if (codePaths.isEmpty()) {
    return;
  }
  final File profileFile=getPrimaryProfileFile(mPackageName);
  if (profileFile.exists()) {
    if (!profileFile.canRead() || !profileFile.canWrite()) {
      return;
    }
  }
 else {
    FileDescriptor fd=null;
    try {
      final int permissions=0600;
      fd=Os.open(profileFile.getAbsolutePath(),OsConstants.O_CREAT,permissions);
      Os.fchmod(fd,permissions);
      Os.fchown(fd,mApplicationInfo.uid,mApplicationInfo.uid);
    }
 catch (    ErrnoException e) {
      if (e.errno == OsConstants.EACCES) {
        return;
      }
      Log.v(TAG,"Unable to create jit profile file " + profileFile + ": "+ e.getMessage());
      try {
        Os.unlink(profileFile.getAbsolutePath());
      }
 catch (      ErrnoException unlinkErr) {
        if (unlinkErr.errno != OsConstants.ENOENT) {
          Log.v(TAG,"Unable to unlink jit profile file " + profileFile + ": "+ unlinkErr.getMessage());
        }
      }
      return;
    }
 finally {
      IoUtils.closeQuietly(fd);
    }
  }
  final File foreignDexProfilesFile=Environment.getDataProfilesDeForeignDexDirectory(UserHandle.myUserId());
  String foreignDexProfilesPath=null;
  if (!foreignDexProfilesFile.exists()) {
    Log.v(TAG,"ForeignDexProfilesPath does not exists:" + foreignDexProfilesFile.getPath());
  }
 else {
    foreignDexProfilesPath=foreignDexProfilesFile.getAbsolutePath();
  }
  VMRuntime.registerAppInfo(profileFile.getAbsolutePath(),mApplicationInfo.dataDir,codePaths.toArray(new String[codePaths.size()]),foreignDexProfilesPath);
}
