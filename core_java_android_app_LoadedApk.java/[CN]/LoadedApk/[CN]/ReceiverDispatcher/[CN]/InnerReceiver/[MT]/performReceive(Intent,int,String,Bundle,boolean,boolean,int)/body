{
  final LoadedApk.ReceiverDispatcher rd;
  if (intent == null) {
    Log.wtf(TAG,"Null intent received");
    rd=null;
  }
 else {
    rd=mDispatcher.get();
  }
  if (ActivityThread.DEBUG_BROADCAST) {
    int seq=intent.getIntExtra("seq",-1);
    Slog.i(ActivityThread.TAG,"Receiving broadcast " + intent.getAction() + " seq="+ seq+ " to "+ (rd != null ? rd.mReceiver : null));
  }
  if (rd != null) {
    rd.performReceive(intent,resultCode,data,extras,ordered,sticky,sendingUser);
  }
 else {
    if (ActivityThread.DEBUG_BROADCAST)     Slog.i(ActivityThread.TAG,"Finishing broadcast to unregistered receiver");
    IActivityManager mgr=ActivityManagerNative.getDefault();
    try {
      if (extras != null) {
        extras.setAllowFds(false);
      }
      mgr.finishReceiver(this,resultCode,data,extras,false,intent.getFlags());
    }
 catch (    RemoteException e) {
      throw e.rethrowFromSystemServer();
    }
  }
}
