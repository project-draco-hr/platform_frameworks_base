{
  Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
synchronized (RootScanner.this) {
    while (true) {
      final int[] deviceIds=mManager.getOpenedDeviceIds();
      final MtpRoot[] newRoots=createRoots(deviceIds);
      if (!Arrays.equals(mLastRoots,newRoots)) {
        final Uri uri=DocumentsContract.buildRootsUri(MtpDocumentsProvider.AUTHORITY);
        mResolver.notifyChange(uri,null,false);
        mLastRoots=newRoots;
      }
      if (deviceIds.length == 0) {
        break;
      }
      mPollingCount++;
      try {
        RootScanner.this.wait(mPollingCount > SHORT_POLLING_TIMES ? LONG_POLLING_INTERVAL : SHORT_POLLING_INTERVAL);
      }
 catch (      InterruptedException exception) {
        break;
      }
    }
    mHasBackgroundTask=false;
  }
}
