{
  mDragState.broadcastDragEndedLw();
  mDragState.unregister();
  mInputMonitor.updateInputWindowsLw(true);
  mDragState.reset();
  mDragState=null;
  if (DEBUG_ORIENTATION)   Slog.d(TAG,"Performing post-drag rotation");
  boolean changed=setRotationUncheckedLocked(WindowManagerPolicy.USE_LAST_ROTATION,0,false);
  if (changed) {
    mH.sendEmptyMessage(H.SEND_NEW_CONFIGURATION);
  }
}
