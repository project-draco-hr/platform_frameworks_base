{
  final int myPid=Process.myPid();
  if (SHOW_TRANSACTIONS)   Slog.i(TAG,">>> OPEN TRANSACTION notifyMoveLw");
  Surface.openTransaction();
  try {
    mSurface.setPosition((int)(x - mThumbOffsetX),(int)(y - mThumbOffsetY));
    if (SHOW_TRANSACTIONS)     Slog.i(TAG,"  DRAG " + mSurface + ": pos=("+ (int)(x - mThumbOffsetX)+ ","+ (int)(y - mThumbOffsetY)+ ")");
  }
  finally {
    Surface.closeTransaction();
    if (SHOW_TRANSACTIONS)     Slog.i(TAG,"<<< CLOSE TRANSACTION notifyMoveLw");
  }
  WindowState touchedWin=getTouchedWinAtPointLw(x,y);
  if (touchedWin == null) {
    if (DEBUG_DRAG)     Slog.d(TAG,"No touched win at x=" + x + " y="+ y);
    return;
  }
  if ((mFlags & View.DRAG_FLAG_GLOBAL) == 0) {
    final IBinder touchedBinder=touchedWin.mClient.asBinder();
    if (touchedBinder != mLocalWin) {
      touchedWin=null;
    }
  }
  try {
    if ((touchedWin != mTargetWindow) && (mTargetWindow != null)) {
      if (DEBUG_DRAG) {
        Slog.d(TAG,"sending DRAG_EXITED to " + mTargetWindow);
      }
      DragEvent evt=DragEvent.obtain(DragEvent.ACTION_DRAG_EXITED,x - mTargetWindow.mFrame.left,y - mTargetWindow.mFrame.top,null,null,null,false);
      mTargetWindow.mClient.dispatchDragEvent(evt);
      if (myPid != mTargetWindow.mSession.mPid) {
        evt.recycle();
      }
    }
    if (touchedWin != null) {
      if (false && DEBUG_DRAG) {
        Slog.d(TAG,"sending DRAG_LOCATION to " + touchedWin);
      }
      DragEvent evt=DragEvent.obtain(DragEvent.ACTION_DRAG_LOCATION,x - touchedWin.mFrame.left,y - touchedWin.mFrame.top,null,null,null,false);
      touchedWin.mClient.dispatchDragEvent(evt);
      if (myPid != touchedWin.mSession.mPid) {
        evt.recycle();
      }
    }
  }
 catch (  RemoteException e) {
    Slog.w(TAG,"can't send drag notification to windows");
  }
  mTargetWindow=touchedWin;
}
