{
  if (mPolicyVisibility && mPolicyVisibilityAfterAnim) {
    return false;
  }
  if (DEBUG_VISIBILITY)   Slog.v(TAG,"Policy visibility true: " + this);
  if (doAnimation) {
    if (DEBUG_VISIBILITY)     Slog.v(TAG,"doAnimation: mPolicyVisibility=" + mPolicyVisibility + " mAnimation="+ mAnimation);
    if (mDisplayFrozen || !mPolicy.isScreenOn()) {
      doAnimation=false;
    }
 else     if (mPolicyVisibility && mAnimation == null) {
      doAnimation=false;
    }
  }
  mPolicyVisibility=true;
  mPolicyVisibilityAfterAnim=true;
  if (doAnimation) {
    applyAnimationLocked(this,WindowManagerPolicy.TRANSIT_ENTER,true);
  }
  if (requestAnim) {
    requestAnimationLocked(0);
  }
  return true;
}
