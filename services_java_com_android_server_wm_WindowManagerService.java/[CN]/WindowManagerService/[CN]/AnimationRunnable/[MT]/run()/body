{
synchronized (mWindowMap) {
    mAnimationScheduled=false;
synchronized (mAnimator) {
      Trace.traceBegin(Trace.TRACE_TAG_WINDOW_MANAGER,"wmAnimate");
      final ArrayList<WindowStateAnimator> winAnimators=mAnimator.mWinAnimators;
      winAnimators.clear();
      final int N=mWindows.size();
      for (int i=0; i < N; i++) {
        final WindowStateAnimator winAnimator=mWindows.get(i).mWinAnimator;
        if (winAnimator.mSurface != null) {
          winAnimators.add(winAnimator);
        }
      }
      mAnimator.animate();
      Trace.traceEnd(Trace.TRACE_TAG_WINDOW_MANAGER);
    }
  }
}
