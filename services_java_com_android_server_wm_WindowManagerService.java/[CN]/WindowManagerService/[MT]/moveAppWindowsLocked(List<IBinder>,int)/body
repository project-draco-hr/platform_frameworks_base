{
  final int N=tokens.size();
  int i;
  for (i=0; i < N; i++) {
    WindowToken token=mTokenMap.get(tokens.get(i));
    if (token != null) {
      tmpRemoveAppWindowsLocked(token);
    }
  }
  int pos=findWindowOffsetLocked(tokenPos);
  for (i=0; i < N; i++) {
    WindowToken token=mTokenMap.get(tokens.get(i));
    if (token != null) {
      pos=reAddAppWindowsLocked(pos,token);
    }
  }
  mInputMonitor.setUpdateInputWindowsNeededLw();
  if (!updateFocusedWindowLocked(UPDATE_FOCUS_WILL_PLACE_SURFACES,false)) {
    assignLayersLocked();
  }
  mLayoutNeeded=true;
  performLayoutAndPlaceSurfacesLocked();
  mInputMonitor.updateInputWindowsLw(false);
}
