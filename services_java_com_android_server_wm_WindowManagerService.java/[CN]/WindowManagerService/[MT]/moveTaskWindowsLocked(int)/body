{
  DisplayContent displayContent=mTaskIdToDisplayContents.get(taskId);
  if (displayContent == null) {
    Slog.w(TAG,"moveTaskWindowsLocked: can't find DisplayContent for taskId=" + taskId);
    return;
  }
  TaskList taskList=displayContent.mTaskIdToTaskList.get(taskId);
  if (taskList == null) {
    Slog.w(TAG,"moveTaskWindowsLocked: can't find TaskList for taskId=" + taskId);
    return;
  }
  for (  AppWindowToken wtoken : taskList.mAppTokens) {
    tmpRemoveAppWindowsLocked(wtoken);
  }
  int pos=findAppWindowInsertionPointLocked(taskList.mAppTokens.get(0));
  for (  AppWindowToken wtoken : taskList.mAppTokens) {
    if (wtoken != null) {
      final int newPos=reAddAppWindowsLocked(displayContent,pos,wtoken);
      if (newPos != pos) {
        displayContent.layoutNeeded=true;
      }
      pos=newPos;
    }
  }
  if (!updateFocusedWindowLocked(UPDATE_FOCUS_WILL_PLACE_SURFACES,false)) {
    assignLayersLocked(displayContent.getWindowList());
  }
  updateFocusedWindowLocked(UPDATE_FOCUS_WILL_PLACE_SURFACES,false);
  mInputMonitor.setUpdateInputWindowsNeededLw();
  performLayoutAndPlaceSurfacesLocked();
  mInputMonitor.updateInputWindowsLw(false);
}
