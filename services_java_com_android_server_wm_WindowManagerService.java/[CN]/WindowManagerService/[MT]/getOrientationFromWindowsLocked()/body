{
  if (mDisplayFrozen || mOpeningApps.size() > 0 || mClosingApps.size() > 0) {
    return mLastWindowForcedOrientation;
  }
  final WindowList windows=getDefaultWindowListLocked();
  int pos=windows.size() - 1;
  while (pos >= 0) {
    WindowState wtoken=windows.get(pos);
    pos--;
    if (wtoken.mAppToken != null) {
      return (mLastWindowForcedOrientation=ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED);
    }
    if (!wtoken.isVisibleLw() || !wtoken.mPolicyVisibilityAfterAnim) {
      continue;
    }
    int req=wtoken.mAttrs.screenOrientation;
    if ((req == ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED) || (req == ActivityInfo.SCREEN_ORIENTATION_BEHIND)) {
      continue;
    }
    return (mLastWindowForcedOrientation=req);
  }
  return (mLastWindowForcedOrientation=ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED);
}
