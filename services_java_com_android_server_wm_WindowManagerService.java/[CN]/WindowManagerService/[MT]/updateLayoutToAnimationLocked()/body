{
  final LayoutToAnimatorParams layoutToAnim=mLayoutToAnim;
synchronized (layoutToAnim) {
    ArrayList<WindowStateAnimator> winAnimators=layoutToAnim.mWinAnimators;
    winAnimators.clear();
    final int N=mWindows.size();
    for (int i=0; i < N; i++) {
      final WindowStateAnimator winAnimator=mWindows.get(i).mWinAnimator;
      if (winAnimator.mSurface != null) {
        winAnimators.add(winAnimator);
      }
    }
    layoutToAnim.mWallpaperTarget=mWallpaperTarget;
    layoutToAnim.mLowerWallpaperTarget=mLowerWallpaperTarget;
    layoutToAnim.mUpperWallpaperTarget=mUpperWallpaperTarget;
    scheduleAnimationLocked();
  }
}
