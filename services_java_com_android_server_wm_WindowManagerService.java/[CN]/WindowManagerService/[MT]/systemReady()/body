{
synchronized (mWindowMap) {
    if (mDisplay != null) {
      throw new IllegalStateException("Display already initialized");
    }
    WindowManager wm=(WindowManager)mContext.getSystemService(Context.WINDOW_SERVICE);
    mDisplay=wm.getDefaultDisplay();
    mInitialDisplayWidth=mDisplay.getRealWidth();
    mInitialDisplayHeight=mDisplay.getRealHeight();
    int rot=mDisplay.getRotation();
    if (rot == Surface.ROTATION_90 || rot == Surface.ROTATION_270) {
      int tmp=mInitialDisplayWidth;
      mInitialDisplayWidth=mInitialDisplayHeight;
      mInitialDisplayHeight=tmp;
    }
    mBaseDisplayWidth=mCurDisplayWidth=mInitialDisplayWidth;
    mBaseDisplayHeight=mCurDisplayHeight=mInitialDisplayHeight;
    mInputManager.setDisplaySize(0,mDisplay.getRawWidth(),mDisplay.getRawHeight());
    mPolicy.setInitialDisplaySize(mInitialDisplayWidth,mInitialDisplayHeight);
  }
  try {
    mActivityManager.updateConfiguration(null);
  }
 catch (  RemoteException e) {
  }
  mPolicy.systemReady();
}
