{
synchronized (mWindowMap) {
    final DisplayContent displayContent=getDisplayContent(displayId);
    int width, height;
    if (displayContent.mInitialDisplayWidth < displayContent.mInitialDisplayHeight) {
      width=shortDimen < displayContent.mInitialDisplayWidth ? shortDimen : displayContent.mInitialDisplayWidth;
      height=longDimen < displayContent.mInitialDisplayHeight ? longDimen : displayContent.mInitialDisplayHeight;
    }
 else {
      width=longDimen < displayContent.mInitialDisplayWidth ? longDimen : displayContent.mInitialDisplayWidth;
      height=shortDimen < displayContent.mInitialDisplayHeight ? shortDimen : displayContent.mInitialDisplayHeight;
    }
    setForcedDisplaySizeLocked(displayContent,width,height);
    Settings.Secure.putString(mContext.getContentResolver(),Settings.Secure.DISPLAY_SIZE_FORCED,width + "," + height);
  }
}
