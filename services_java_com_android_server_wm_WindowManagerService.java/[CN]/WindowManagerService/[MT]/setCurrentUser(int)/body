{
synchronized (mWindowMap) {
    mCurrentUserId=newUserId;
    mPolicy.setCurrentUserLw(newUserId);
    DisplayContentsIterator iterator=new DisplayContentsIterator();
    while (iterator.hasNext()) {
      final WindowList windows=iterator.next().getWindowList();
      for (int i=0; i < windows.size(); i++) {
        final WindowState win=windows.get(i);
        if (win.isHiddenFromUserLocked()) {
          Slog.w(TAG,"current user violation " + newUserId + " hiding "+ win+ ", attrs="+ win.mAttrs.type+ ", belonging to "+ win.mOwnerUid);
          win.hideLw(false);
        }
      }
    }
    performLayoutAndPlaceSurfacesLocked();
  }
}
