{
  if (isSystemSecure()) {
    return false;
  }
  boolean result=true;
  WindowState[] windows;
synchronized (mWindowMap) {
    windows=mWindows.toArray(new WindowState[mWindows.size()]);
  }
  BufferedWriter out=null;
  try {
    OutputStream clientStream=client.getOutputStream();
    out=new BufferedWriter(new OutputStreamWriter(clientStream),8 * 1024);
    final int count=windows.length;
    for (int i=0; i < count; i++) {
      final WindowState w=windows[i];
      out.write(Integer.toHexString(System.identityHashCode(w)));
      out.write(' ');
      out.append(w.mAttrs.getTitle());
      out.write('\n');
    }
    out.write("DONE.\n");
    out.flush();
  }
 catch (  Exception e) {
    result=false;
  }
 finally {
    if (out != null) {
      try {
        out.close();
      }
 catch (      IOException e) {
        result=false;
      }
    }
  }
  return result;
}
