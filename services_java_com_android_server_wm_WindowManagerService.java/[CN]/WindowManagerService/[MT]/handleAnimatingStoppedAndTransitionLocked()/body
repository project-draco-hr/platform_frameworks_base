{
  int changes=0;
  mAppTransition.setIdle();
  final DisplayContent displayContent=getDefaultDisplayContentLocked();
  AppTokenIterator iterator=displayContent.new AppTokenIterator();
  while (iterator.hasNext()) {
    iterator.next().sendingToBottom=false;
  }
  rebuildAppWindowListLocked();
  changes|=PhoneWindowManager.FINISH_LAYOUT_REDO_LAYOUT;
  if (DEBUG_WALLPAPER_LIGHT)   Slog.v(TAG,"Wallpaper layer changed: assigning layers + relayout");
  moveInputMethodWindowsIfNeededLocked(true);
  mInnerFields.mWallpaperMayChange=true;
  mFocusMayChange=true;
  return changes;
}
