{
  int changes=0;
  mAppTransition.setIdle();
  final DisplayContent displayContent=getDefaultDisplayContentLocked();
  final AppTokenList animatingAppTokens=displayContent.mAnimatingAppTokens;
  for (int i=animatingAppTokens.size() - 1; i >= 0; i--) {
    animatingAppTokens.get(i).sendingToBottom=false;
  }
  displayContent.refillAnimatingAppTokens();
  rebuildAppWindowListLocked();
  changes|=PhoneWindowManager.FINISH_LAYOUT_REDO_LAYOUT;
  if (DEBUG_WALLPAPER_LIGHT)   Slog.v(TAG,"Wallpaper layer changed: assigning layers + relayout");
  moveInputMethodWindowsIfNeededLocked(true);
  mInnerFields.mWallpaperMayChange=true;
  mFocusMayChange=true;
  return changes;
}
