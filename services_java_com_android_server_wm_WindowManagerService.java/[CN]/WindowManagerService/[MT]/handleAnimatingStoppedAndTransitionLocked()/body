{
  int changes=0;
  mAppTransition.setRunning(false);
  for (int i=mAnimatingAppTokens.size() - 1; i >= 0; i--) {
    mAnimatingAppTokens.get(i).sendingToBottom=false;
  }
  mAnimatingAppTokens.clear();
  mAnimatingAppTokens.addAll(mAppTokens);
  rebuildAppWindowListLocked();
  changes|=PhoneWindowManager.FINISH_LAYOUT_REDO_LAYOUT;
  mInnerFields.mAdjResult|=ADJUST_WALLPAPER_LAYERS_CHANGED;
  moveInputMethodWindowsIfNeededLocked(true);
  mInnerFields.mWallpaperMayChange=true;
  mFocusMayChange=true;
  return changes;
}
