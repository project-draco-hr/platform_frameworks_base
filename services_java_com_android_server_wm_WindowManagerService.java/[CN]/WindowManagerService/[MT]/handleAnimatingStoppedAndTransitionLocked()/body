{
  int changes=0;
  mAppTransition.setIdle();
  for (int i=mAnimatingAppTokens.size() - 1; i >= 0; i--) {
    mAnimatingAppTokens.get(i).sendingToBottom=false;
  }
  mAnimatingAppTokens.clear();
  mAnimatingAppTokens.addAll(mAppTokens);
  rebuildAppWindowListLocked();
  changes|=PhoneWindowManager.FINISH_LAYOUT_REDO_LAYOUT;
  if (DEBUG_WALLPAPER_LIGHT)   Slog.v(TAG,"Wallpaper layer changed: assigning layers + relayout");
  moveInputMethodWindowsIfNeededLocked(true);
  mInnerFields.mWallpaperMayChange=true;
  mFocusMayChange=true;
  return changes;
}
