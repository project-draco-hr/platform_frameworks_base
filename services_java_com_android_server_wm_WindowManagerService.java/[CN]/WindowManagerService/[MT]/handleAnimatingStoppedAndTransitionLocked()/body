{
  int changes=0;
  mAppTransition.setIdle();
  final DisplayContent displayContent=getDefaultDisplayContentLocked();
  final ArrayList<Task> tasks=displayContent.mTasks;
  final int numTasks=tasks.size();
  for (int taskNdx=0; taskNdx < numTasks; ++taskNdx) {
    final AppTokenList tokens=tasks.get(taskNdx).mAppTokens;
    final int numTokens=tokens.size();
    for (int tokenNdx=0; tokenNdx < numTokens; ++tokenNdx) {
      final AppWindowToken wtoken=tokens.get(tokenNdx);
      wtoken.sendingToBottom=false;
    }
  }
  rebuildAppWindowListLocked();
  changes|=PhoneWindowManager.FINISH_LAYOUT_REDO_LAYOUT;
  if (DEBUG_WALLPAPER_LIGHT)   Slog.v(TAG,"Wallpaper layer changed: assigning layers + relayout");
  moveInputMethodWindowsIfNeededLocked(true);
  mInnerFields.mWallpaperMayChange=true;
  mFocusMayChange=true;
  return changes;
}
