{
  final WindowManager.LayoutParams attrs=w.mAttrs;
  final int attrFlags=attrs.flags;
  final boolean canBeSeen=w.isDisplayedLw();
  if (w.mHasSurface) {
    if ((attrFlags & FLAG_KEEP_SCREEN_ON) != 0) {
      mInnerFields.mHoldScreen=w.mSession;
    }
    if (!mInnerFields.mSyswin && w.mAttrs.screenBrightness >= 0 && mInnerFields.mScreenBrightness < 0) {
      mInnerFields.mScreenBrightness=w.mAttrs.screenBrightness;
    }
    if (!mInnerFields.mSyswin && w.mAttrs.buttonBrightness >= 0 && mInnerFields.mButtonBrightness < 0) {
      mInnerFields.mButtonBrightness=w.mAttrs.buttonBrightness;
    }
    if (!mInnerFields.mSyswin && w.mAttrs.userActivityTimeout >= 0 && mInnerFields.mUserActivityTimeout < 0) {
      mInnerFields.mUserActivityTimeout=w.mAttrs.userActivityTimeout;
    }
    final int type=attrs.type;
    if (canBeSeen && (type == TYPE_SYSTEM_DIALOG || type == TYPE_RECENTS_OVERLAY || type == TYPE_KEYGUARD || type == TYPE_SYSTEM_ERROR)) {
      mInnerFields.mSyswin=true;
    }
    if (canBeSeen) {
      if (type == TYPE_DREAM || type == TYPE_KEYGUARD) {
        mInnerFields.mDisplayHasContent=LayoutFields.DISPLAY_CONTENT_MIRROR;
      }
 else       if (mInnerFields.mDisplayHasContent == LayoutFields.DISPLAY_CONTENT_UNKNOWN) {
        mInnerFields.mDisplayHasContent=LayoutFields.DISPLAY_CONTENT_UNIQUE;
      }
    }
  }
  boolean opaqueDrawn=canBeSeen && w.isOpaqueDrawn();
  if (opaqueDrawn && w.isFullscreen(innerDw,innerDh)) {
    mInnerFields.mObscured=true;
  }
}
