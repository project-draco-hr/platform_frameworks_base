{
  if (!checkCallingPermission(android.Manifest.permission.MANAGE_APP_TOKENS,"setAppGroupId()")) {
    throw new SecurityException("Requires MANAGE_APP_TOKENS permission");
  }
synchronized (mWindowMap) {
    final AppWindowToken atoken=findAppWindowToken(token);
    if (atoken == null) {
      Slog.w(TAG,"Attempted to set group id of non-existing app token: " + token);
      return;
    }
    DisplayContent displayContent=mTaskIdToDisplayContents.get(atoken.groupId);
    if (displayContent == null) {
      Slog.w(TAG,"setAppGroupId: No DisplayContent for taskId=" + atoken.groupId);
      displayContent=getDefaultDisplayContentLocked();
    }
    displayContent.setAppTaskId(atoken,groupId);
  }
}
