{
  final int N=tokens.size();
  int i;
  for (i=0; i < N; i++) {
    WindowToken token=mTokenMap.get(tokens.get(i));
    if (token != null) {
      tmpRemoveAppWindowsLocked(token);
    }
  }
  int pos=findWindowOffsetLocked(displayContent,tokenPos);
  for (i=0; i < N; i++) {
    WindowToken token=mTokenMap.get(tokens.get(i));
    if (token != null) {
      final int newPos=reAddAppWindowsLocked(displayContent,pos,token);
      if (newPos != pos) {
        displayContent.layoutNeeded=true;
      }
      pos=newPos;
    }
  }
  if (!updateFocusedWindowLocked(UPDATE_FOCUS_WILL_PLACE_SURFACES,false)) {
    assignLayersLocked(displayContent.getWindowList());
  }
  mInputMonitor.setUpdateInputWindowsNeededLw();
  performLayoutAndPlaceSurfacesLocked();
  mInputMonitor.updateInputWindowsLw(false);
}
