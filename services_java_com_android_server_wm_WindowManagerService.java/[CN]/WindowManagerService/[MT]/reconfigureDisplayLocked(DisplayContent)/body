{
  mPolicy.setInitialDisplaySize(mDefaultDisplay,displayContent.mBaseDisplayWidth,displayContent.mBaseDisplayHeight,displayContent.mBaseDisplayDensity);
  displayContent.layoutNeeded=true;
  boolean configChanged=updateOrientationFromAppTokensLocked(false);
  mTempConfiguration.setToDefaults();
  mTempConfiguration.fontScale=mCurConfiguration.fontScale;
  if (computeScreenConfigurationLocked(mTempConfiguration)) {
    if (mCurConfiguration.diff(mTempConfiguration) != 0) {
      configChanged=true;
    }
  }
  if (configChanged) {
    mWaitingForConfig=true;
    startFreezingDisplayLocked(false);
    mH.sendEmptyMessage(H.SEND_NEW_CONFIGURATION);
  }
  rebuildBlackFrameLocked();
  performLayoutAndPlaceSurfacesLocked();
}
