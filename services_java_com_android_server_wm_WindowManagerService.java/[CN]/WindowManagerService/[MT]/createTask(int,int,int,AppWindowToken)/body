{
  final TaskStack stack=mStackIdToStack.get(stackId);
  if (stack == null) {
    throw new IllegalArgumentException("addAppToken: invalid stackId=" + stackId);
  }
  EventLog.writeEvent(EventLogTags.WM_TASK_CREATED,taskId,stackId);
  Task task=new Task(atoken,stack,userId);
  mTaskIdToTask.put(taskId,task);
  stack.addTask(task,true);
  return task;
}
