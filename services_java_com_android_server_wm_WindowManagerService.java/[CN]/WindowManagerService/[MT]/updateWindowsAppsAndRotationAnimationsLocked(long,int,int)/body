{
  int i;
  final int NAT=mAppTokens.size();
  for (i=0; i < NAT; i++) {
    final AppWindowToken appToken=mAppTokens.get(i);
    if (appToken.startAndFinishAnimationLocked(currentTime,innerDw,innerDh)) {
      mStepAnimators.add(appToken);
      mInnerFields.mAnimating=true;
    }
  }
  final int NEAT=mExitingAppTokens.size();
  for (i=0; i < NEAT; i++) {
    final AppWindowToken appToken=mAppTokens.get(i);
    if (appToken.startAndFinishAnimationLocked(currentTime,innerDw,innerDh)) {
      mStepAnimators.add(appToken);
      mInnerFields.mAnimating=true;
    }
  }
  if (mScreenRotationAnimation != null) {
    if (mScreenRotationAnimation.isAnimating() || mScreenRotationAnimation.mFinishAnimReady) {
      if (mScreenRotationAnimation.startAndFinishAnimationLocked(currentTime)) {
        mInnerFields.mUpdateRotation=false;
        mInnerFields.mAnimating=true;
        mStepAnimators.add(mScreenRotationAnimation);
      }
 else {
        mInnerFields.mUpdateRotation=true;
        mScreenRotationAnimation.kill();
        mScreenRotationAnimation=null;
      }
    }
  }
}
