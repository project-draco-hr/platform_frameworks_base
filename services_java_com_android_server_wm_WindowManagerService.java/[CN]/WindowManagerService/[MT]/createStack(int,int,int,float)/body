{
synchronized (mWindowMap) {
    if (position <= StackBox.TASK_STACK_GOES_BELOW && (weight < STACK_WEIGHT_MIN || weight > STACK_WEIGHT_MAX)) {
      throw new IllegalArgumentException("createStack: weight must be between " + STACK_WEIGHT_MIN + " and "+ STACK_WEIGHT_MAX+ ", weight="+ weight);
    }
    final TaskStack relativeStack=mStackIdToStack.get(relativeStackId);
    DisplayContent displayContent=relativeStack != null ? relativeStack.getDisplayContent() : getDefaultDisplayContentLocked();
    TaskStack stack=displayContent.createStack(stackId,relativeStackId,position,weight);
    if (stack != null) {
      mStackIdToStack.put(stackId,stack);
      performLayoutAndPlaceSurfacesLocked();
    }
  }
}
