{
synchronized (mWindowMap) {
    if (position <= StackBox.TASK_STACK_GOES_BELOW && (weight < STACK_WEIGHT_MIN || weight > STACK_WEIGHT_MAX)) {
      throw new IllegalArgumentException("createStack: weight must be between " + STACK_WEIGHT_MIN + " and "+ STACK_WEIGHT_MAX+ ", weight="+ weight);
    }
    final DisplayContent displayContent;
    if (stackId != HOME_STACK_ID) {
      final TaskStack relativeStack=mStackIdToStack.get(relativeStackId);
      if (relativeStack == null) {
        throw new IllegalArgumentException("createStack: Invalid relativeStackId=" + relativeStackId);
      }
      displayContent=relativeStack.getDisplayContent();
    }
 else {
      displayContent=getDefaultDisplayContentLocked();
    }
    TaskStack stack=displayContent.createStack(stackId,relativeStackId,position,weight);
    mStackIdToStack.put(stackId,stack);
    displayContent.moveStack(stack,true);
  }
}
