{
synchronized (mWindowMap) {
    if (position <= StackBox.TASK_STACK_GOES_BELOW && (weight < STACK_WEIGHT_MIN || weight > STACK_WEIGHT_MAX)) {
      throw new IllegalArgumentException("createStack: weight must be between " + STACK_WEIGHT_MIN + " and "+ STACK_WEIGHT_MAX+ ", weight="+ weight);
    }
    final int numDisplays=mDisplayContents.size();
    for (int displayNdx=0; displayNdx < numDisplays; ++displayNdx) {
      final DisplayContent displayContent=mDisplayContents.valueAt(displayNdx);
      TaskStack stack=displayContent.createStack(stackId,relativeStackBoxId,position,weight);
      if (stack != null) {
        mStackIdToStack.put(stackId,stack);
        performLayoutAndPlaceSurfacesLocked();
        return;
      }
    }
    Slog.e(TAG,"createStack: Unable to find relativeStackBoxId=" + relativeStackBoxId);
  }
}
