{
synchronized (mWindowMap) {
    if (position <= StackBox.TASK_STACK_GOES_BELOW && (weight < STACK_WEIGHT_MIN || weight > STACK_WEIGHT_MAX)) {
      throw new IllegalArgumentException("createStack: weight must be between " + STACK_WEIGHT_MIN + " and "+ STACK_WEIGHT_MAX+ ", weight="+ weight);
    }
    DisplayContentsIterator iterator=new DisplayContentsIterator();
    while (iterator.hasNext()) {
      final DisplayContent displayContent=iterator.next();
      TaskStack stack=displayContent.createStack(this,stackId,relativeStackBoxId,position,weight);
      if (stack != null) {
        mStackIdToStack.put(stackId,stack);
        displayContent.moveStack(stack,true);
        performLayoutAndPlaceSurfacesLocked();
        return;
      }
    }
    Slog.e(TAG,"createStack: Unable to find relativeStackBoxId=" + relativeStackBoxId);
  }
}
