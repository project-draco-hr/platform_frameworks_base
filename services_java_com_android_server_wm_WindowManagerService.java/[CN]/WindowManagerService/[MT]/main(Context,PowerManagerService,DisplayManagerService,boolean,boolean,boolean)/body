{
  WMThread thr=new WMThread(context,pm,dm,haveInputMethods,allowBootMsgs,onlyCore);
  thr.start();
synchronized (thr) {
    while (thr.mService == null) {
      try {
        thr.wait();
      }
 catch (      InterruptedException e) {
      }
    }
    return thr.mService;
  }
}
