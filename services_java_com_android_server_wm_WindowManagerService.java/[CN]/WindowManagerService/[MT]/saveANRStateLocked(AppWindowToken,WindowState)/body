{
  StringWriter sw=new StringWriter();
  PrintWriter pw=new PrintWriter(sw);
  pw.println("  ANR time: " + DateFormat.getInstance().format(new Date()));
  pw.println("  Application at fault: " + appWindowToken.stringName);
  if (windowState != null) {
    pw.println("  Window at fault: " + windowState.mAttrs.getTitle());
  }
  pw.println();
  dumpWindowsNoHeaderLocked(pw,true,null);
  pw.close();
  mLastANRState=sw.toString();
}
