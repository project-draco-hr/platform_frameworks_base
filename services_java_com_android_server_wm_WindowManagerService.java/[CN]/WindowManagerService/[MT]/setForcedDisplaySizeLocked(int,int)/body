{
  Slog.i(TAG,"Using new display size: " + width + "x"+ height);
synchronized (mDisplaySizeLock) {
    mBaseDisplayWidth=width;
    mBaseDisplayHeight=height;
  }
  mPolicy.setInitialDisplaySize(mBaseDisplayWidth,mBaseDisplayHeight);
  mLayoutNeeded=true;
  boolean configChanged=updateOrientationFromAppTokensLocked(false);
  mTempConfiguration.setToDefaults();
  mTempConfiguration.fontScale=mCurConfiguration.fontScale;
  if (computeScreenConfigurationLocked(mTempConfiguration)) {
    if (mCurConfiguration.diff(mTempConfiguration) != 0) {
      configChanged=true;
    }
  }
  if (configChanged) {
    mWaitingForConfig=true;
    startFreezingDisplayLocked(false);
    mH.sendEmptyMessage(H.SEND_NEW_CONFIGURATION);
  }
  rebuildBlackFrame();
  performLayoutAndPlaceSurfacesLocked();
}
