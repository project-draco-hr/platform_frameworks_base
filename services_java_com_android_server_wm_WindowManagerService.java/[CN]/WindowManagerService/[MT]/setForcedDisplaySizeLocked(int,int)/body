{
  mBaseDisplayWidth=width;
  mBaseDisplayHeight=height;
  mPolicy.setInitialDisplaySize(mBaseDisplayWidth,mBaseDisplayHeight);
  mLayoutNeeded=true;
  boolean configChanged=updateOrientationFromAppTokensLocked(false);
  mTempConfiguration.setToDefaults();
  mTempConfiguration.fontScale=mCurConfiguration.fontScale;
  if (computeNewConfigurationLocked(mTempConfiguration)) {
    if (mCurConfiguration.diff(mTempConfiguration) != 0) {
      configChanged=true;
    }
  }
  if (configChanged) {
    mWaitingForConfig=true;
    startFreezingDisplayLocked(false);
    mH.sendEmptyMessage(H.SEND_NEW_CONFIGURATION);
  }
  rebuildBlackFrame(false);
  performLayoutAndPlaceSurfacesLocked();
}
