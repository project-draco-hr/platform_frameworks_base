{
synchronized (mWindowMap) {
    if (mDisplay != null) {
      throw new IllegalStateException("Display already initialized");
    }
    WindowManager wm=(WindowManager)mContext.getSystemService(Context.WINDOW_SERVICE);
    mDisplay=wm.getDefaultDisplay();
    mIsTouchDevice=mContext.getPackageManager().hasSystemFeature(PackageManager.FEATURE_TOUCHSCREEN);
synchronized (mDisplaySizeLock) {
      mInitialDisplayWidth=mDisplay.getRawWidth();
      mInitialDisplayHeight=mDisplay.getRawHeight();
      int rot=mDisplay.getRotation();
      if (rot == Surface.ROTATION_90 || rot == Surface.ROTATION_270) {
        int tmp=mInitialDisplayWidth;
        mInitialDisplayWidth=mInitialDisplayHeight;
        mInitialDisplayHeight=tmp;
      }
      mBaseDisplayWidth=mCurDisplayWidth=mAppDisplayWidth=mInitialDisplayWidth;
      mBaseDisplayHeight=mCurDisplayHeight=mAppDisplayHeight=mInitialDisplayHeight;
      mAnimator.setDisplayDimensions(mCurDisplayWidth,mCurDisplayHeight,mAppDisplayWidth,mAppDisplayHeight);
    }
    mInputManager.setDisplaySize(Display.DEFAULT_DISPLAY,mDisplay.getRawWidth(),mDisplay.getRawHeight(),mDisplay.getRawExternalWidth(),mDisplay.getRawExternalHeight());
    mInputManager.setDisplayOrientation(Display.DEFAULT_DISPLAY,mDisplay.getRotation(),mDisplay.getExternalRotation());
    mPolicy.setInitialDisplaySize(mDisplay,mInitialDisplayWidth,mInitialDisplayHeight);
  }
  try {
    mActivityManager.updateConfiguration(null);
  }
 catch (  RemoteException e) {
  }
synchronized (mWindowMap) {
    readForcedDisplaySizeLocked();
  }
}
