{
  WindowManager wm=(WindowManager)mContext.getSystemService(Context.WINDOW_SERVICE);
  final Display display=wm.getDefaultDisplay();
  displayReady(display.getDisplayId());
synchronized (mWindowMap) {
    readForcedDisplaySizeAndDensityLocked(getDefaultDisplayContent());
    mDefaultDisplay=display;
    mIsTouchDevice=mContext.getPackageManager().hasSystemFeature(PackageManager.FEATURE_TOUCHSCREEN);
    mAnimator.initializeLocked(display.getLayerStack());
    final DisplayInfo displayInfo=getDefaultDisplayInfo();
    mAnimator.setDisplayDimensions(displayInfo.logicalWidth,displayInfo.logicalHeight,displayInfo.appWidth,displayInfo.appHeight);
    DisplayDeviceInfo info=new DisplayDeviceInfo();
    mDisplayManagerService.getDefaultExternalDisplayDeviceInfo(info);
    final DisplayContent displayContent=getDefaultDisplayContent();
    mInputManager.setDisplaySize(displayContent.getDisplayId(),displayContent.mInitialDisplayWidth,displayContent.mInitialDisplayHeight,info.width,info.height);
    mInputManager.setDisplayOrientation(displayContent.getDisplayId(),mDefaultDisplay.getRotation(),Surface.ROTATION_0);
    mPolicy.setInitialDisplaySize(mDefaultDisplay,displayContent.mInitialDisplayWidth,displayContent.mInitialDisplayHeight,displayContent.mInitialDisplayDensity);
  }
  try {
    mActivityManager.updateConfiguration(null);
  }
 catch (  RemoteException e) {
  }
}
