{
  Animation a;
  int duration;
switch (transit) {
case WindowManagerPolicy.TRANSIT_ACTIVITY_OPEN:
case WindowManagerPolicy.TRANSIT_ACTIVITY_CLOSE:
    duration=mContext.getResources().getInteger(com.android.internal.R.integer.config_shortAnimTime);
  break;
default :
duration=300;
break;
}
if (enter) {
float scaleW=mNextAppTransitionStartWidth / (float)mDisplayInfo.appWidth;
float scaleH=mNextAppTransitionStartHeight / (float)mDisplayInfo.appHeight;
Animation scale=new ScaleAnimation(scaleW,1,scaleH,1,computePivot(mNextAppTransitionStartX,scaleW),computePivot(mNextAppTransitionStartY,scaleH));
scale.setDuration(duration);
AnimationSet set=new AnimationSet(true);
Animation alpha=new AlphaAnimation(0,1);
scale.setDuration(duration);
set.addAnimation(scale);
alpha.setDuration(duration);
set.addAnimation(alpha);
set.setDetachWallpaper(true);
a=set;
}
 else {
a=createExitAnimationLocked(transit,duration);
}
a.setFillAfter(true);
final Interpolator interpolator=AnimationUtils.loadInterpolator(mContext,com.android.internal.R.interpolator.decelerate_cubic);
a.setInterpolator(interpolator);
a.initialize(mDisplayInfo.appWidth,mDisplayInfo.appHeight,mDisplayInfo.appWidth,mDisplayInfo.appHeight);
return a;
}
