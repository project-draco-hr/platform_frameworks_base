{
  int changes=0;
  final int NT=mAppTokens.size();
  for (int i=0; i < NT; i++) {
    AppWindowToken wtoken=mAppTokens.get(i);
    if (wtoken.freezingScreen) {
      int numInteresting=wtoken.numInterestingWindows;
      if (numInteresting > 0 && wtoken.numDrawnWindows >= numInteresting) {
        if (DEBUG_VISIBILITY)         Slog.v(TAG,"allDrawn: " + wtoken + " interesting="+ numInteresting+ " drawn="+ wtoken.numDrawnWindows);
        wtoken.showAllWindowsLocked();
        unsetAppFreezingScreenLocked(wtoken,false,true);
        if (DEBUG_ORIENTATION)         Slog.i(TAG,"Setting mOrientationChangeComplete=true because wtoken " + wtoken + " numInteresting="+ numInteresting+ " numDrawn="+ wtoken.numDrawnWindows);
        mInnerFields.mOrientationChangeComplete=true;
      }
    }
 else     if (!wtoken.allDrawn) {
      int numInteresting=wtoken.numInterestingWindows;
      if (numInteresting > 0 && wtoken.numDrawnWindows >= numInteresting) {
        if (DEBUG_VISIBILITY)         Slog.v(TAG,"allDrawn: " + wtoken + " interesting="+ numInteresting+ " drawn="+ wtoken.numDrawnWindows);
        wtoken.allDrawn=true;
        changes|=PhoneWindowManager.FINISH_LAYOUT_REDO_ANIM;
        if (!mOpeningApps.contains(wtoken)) {
          mInnerFields.mAnimating|=wtoken.showAllWindowsLocked();
        }
      }
    }
  }
  return changes;
}
