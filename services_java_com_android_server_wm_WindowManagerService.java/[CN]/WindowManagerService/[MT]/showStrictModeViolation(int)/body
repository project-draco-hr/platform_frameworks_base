{
  final boolean on=arg != 0;
  int pid=Binder.getCallingPid();
synchronized (mWindowMap) {
    if (on) {
      boolean isVisible=false;
      for (int i=mWindows.size() - 1; i >= 0; i--) {
        final WindowState ws=mWindows.get(i);
        if (ws.mSession.mPid == pid && ws.isVisibleLw()) {
          isVisible=true;
          break;
        }
      }
      if (!isVisible) {
        return;
      }
    }
    if (SHOW_LIGHT_TRANSACTIONS)     Slog.i(TAG,">>> OPEN TRANSACTION showStrictModeViolation");
    Surface.openTransaction();
    try {
      if (mStrictModeFlash == null) {
        mStrictModeFlash=new StrictModeFlash(mDisplay,mFxSession);
      }
      mStrictModeFlash.setVisibility(on);
    }
  finally {
      Surface.closeTransaction();
      if (SHOW_LIGHT_TRANSACTIONS)       Slog.i(TAG,"<<< CLOSE TRANSACTION showStrictModeViolation");
    }
  }
}
