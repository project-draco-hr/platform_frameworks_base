{
  final WindowManager.LayoutParams attrs=w.mAttrs;
  if ((attrs.flags & FLAG_DIM_BEHIND) != 0 && w.isDisplayedLw() && !w.mExiting) {
    mInnerFields.mDimming=true;
    final WindowStateAnimator winAnimator=w.mWinAnimator;
    if (!mAnimator.isDimmingLocked(winAnimator)) {
      if (localLOGV)       Slog.v(TAG,"Win " + w + " start dimming.");
      startDimmingLocked(winAnimator,w.mExiting ? 0 : w.mAttrs.dimAmount);
    }
  }
}
