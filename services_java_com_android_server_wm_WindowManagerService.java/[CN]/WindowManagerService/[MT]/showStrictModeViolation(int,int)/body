{
  final boolean on=arg != 0;
synchronized (mWindowMap) {
    if (on) {
      boolean isVisible=false;
      mTmpWindowsIterator.reset(FORWARD_ITERATOR);
      while (mTmpWindowsIterator.hasNext()) {
        final WindowState ws=mTmpWindowsIterator.next();
        if (ws.mSession.mPid == pid && ws.isVisibleLw()) {
          isVisible=true;
          break;
        }
      }
      if (!isVisible) {
        return;
      }
    }
    if (SHOW_LIGHT_TRANSACTIONS)     Slog.i(TAG,">>> OPEN TRANSACTION showStrictModeViolation");
    Surface.openTransaction();
    try {
      if (mStrictModeFlash == null) {
        mStrictModeFlash=new StrictModeFlash(getDefaultDisplayContentLocked().getDisplay(),mFxSession);
      }
      mStrictModeFlash.setVisibility(on);
    }
  finally {
      Surface.closeTransaction();
      if (SHOW_LIGHT_TRANSACTIONS)       Slog.i(TAG,"<<< CLOSE TRANSACTION showStrictModeViolation");
    }
  }
}
