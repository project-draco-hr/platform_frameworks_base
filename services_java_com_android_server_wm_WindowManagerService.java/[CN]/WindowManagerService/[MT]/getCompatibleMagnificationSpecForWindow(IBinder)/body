{
  if (!checkCallingPermission(android.Manifest.permission.MAGNIFY_DISPLAY,"getCompatibleMagnificationSpecForWindow()")) {
    throw new SecurityException("Requires MAGNIFY_DISPLAY permission.");
  }
synchronized (mWindowMap) {
    WindowState windowState=mWindowMap.get(windowToken);
    if (windowState == null) {
      return null;
    }
    MagnificationSpec spec=null;
    if (mDisplayMagnifier != null) {
      spec=mDisplayMagnifier.getMagnificationSpecForWindowLocked(windowState);
    }
    if ((spec == null || spec.isNop()) && windowState.mGlobalScale == 1.0f) {
      return null;
    }
    spec=(spec == null) ? MagnificationSpec.obtain() : MagnificationSpec.obtain(spec);
    spec.scale*=windowState.mGlobalScale;
    return spec;
  }
}
