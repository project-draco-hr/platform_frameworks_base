{
  if (data == null || data.length == 0) {
    return new NetworkPolicy[0];
  }
  DataInputStream in=new DataInputStream(new ByteArrayInputStream(data));
  try {
    int version=in.readInt();
    int length=in.readInt();
    NetworkPolicy[] policies=new NetworkPolicy[length];
    for (int i=0; i < length; i++) {
      byte isNull=in.readByte();
      if (isNull == NULL)       continue;
      int byteLength=in.readInt();
      byte[] policyData=new byte[byteLength];
      in.read(policyData,0,byteLength);
      policies[i]=unmarshalNetworkPolicy(policyData);
    }
    return policies;
  }
 catch (  IOException ioe) {
    Log.e(TAG,"Failed to Convert byte array to NetworkPolicies",ioe);
    return new NetworkPolicy[0];
  }
}
