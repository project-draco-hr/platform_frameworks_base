{
  boolean shouldCancel;
  boolean shouldInstall;
  if (mActiveSyncContexts.isEmpty()) {
    mSyncNotificationInfo.startTime=null;
    shouldCancel=mSyncNotificationInfo.isActive;
    shouldInstall=false;
  }
 else {
    final long now=SystemClock.elapsedRealtime();
    if (mSyncNotificationInfo.startTime == null) {
      mSyncNotificationInfo.startTime=now;
    }
    if (mSyncNotificationInfo.isActive) {
      shouldInstall=shouldCancel=false;
    }
 else {
      shouldCancel=false;
      final boolean timeToShowNotification=now > mSyncNotificationInfo.startTime + SYNC_NOTIFICATION_DELAY;
      if (timeToShowNotification) {
        shouldInstall=true;
      }
 else {
        shouldInstall=false;
        for (        ActiveSyncContext activeSyncContext : mActiveSyncContexts) {
          final boolean manualSync=activeSyncContext.mSyncOperation.extras.getBoolean(ContentResolver.SYNC_EXTRAS_MANUAL,false);
          if (manualSync) {
            shouldInstall=true;
            break;
          }
        }
      }
    }
  }
  if (shouldCancel && !shouldInstall) {
    mNeedSyncActiveNotification=false;
    sendSyncStateIntent();
    mSyncNotificationInfo.isActive=false;
  }
  if (shouldInstall) {
    mNeedSyncActiveNotification=true;
    sendSyncStateIntent();
    mSyncNotificationInfo.isActive=true;
  }
}
