{
  mRunningAccounts=AccountManagerService.getSingleton().getRunningAccounts();
  if (mBootCompleted) {
    doDatabaseCleanup();
  }
  AccountAndUser[] accounts=mRunningAccounts;
  for (  ActiveSyncContext currentSyncContext : mActiveSyncContexts) {
    if (!containsAccountAndUser(accounts,currentSyncContext.mSyncOperation.target.account,currentSyncContext.mSyncOperation.target.userId)) {
      Log.d(TAG,"canceling sync since the account is no longer running");
      sendSyncFinishedOrCanceledMessage(currentSyncContext,null);
    }
  }
  if (resyncAll) {
    scheduleSync(null,UserHandle.USER_ALL,SyncOperation.REASON_ACCOUNTS_UPDATED,null,null,0,0,false);
  }
 else {
    sendCheckAlarmsMessage();
  }
}
