{
  mActionBar=actionBar;
  mMenuItem=actionBar.getSearchMenu();
  mSearchView=(SearchView)mMenuItem.getActionView();
  mSearchView.setOnQueryTextListener(this);
  mSearchView.setOnCloseListener(this);
  mSearchView.setOnSearchClickListener(this);
  mSearchView.setOnQueryTextFocusChangeListener(this);
  mFullBar=isFullBarSearch;
  if (mFullBar) {
    mMenuItem.setShowAsActionFlags(MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW | MenuItem.SHOW_AS_ACTION_ALWAYS);
    mMenuItem.setOnActionExpandListener(this);
  }
  restoreSearch();
}
