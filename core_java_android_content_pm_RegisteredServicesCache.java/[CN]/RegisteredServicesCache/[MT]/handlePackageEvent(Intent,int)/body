{
  final String action=intent.getAction();
  final boolean isRemoval=Intent.ACTION_PACKAGE_REMOVED.equals(action) || Intent.ACTION_EXTERNAL_APPLICATIONS_UNAVAILABLE.equals(action);
  final boolean replacing=intent.getBooleanExtra(Intent.EXTRA_REPLACING,false);
  if (isRemoval && replacing) {
  }
 else {
    int[] uids=null;
    if (Intent.ACTION_EXTERNAL_APPLICATIONS_AVAILABLE.equals(action) || Intent.ACTION_EXTERNAL_APPLICATIONS_UNAVAILABLE.equals(action)) {
      uids=intent.getIntArrayExtra(Intent.EXTRA_CHANGED_UID_LIST);
    }
 else {
      int uid=intent.getIntExtra(Intent.EXTRA_UID,-1);
      if (uid > 0) {
        uids=new int[]{uid};
      }
    }
    generateServicesMap(uids,userId);
  }
}
