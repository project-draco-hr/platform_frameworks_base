{
  final String transitionId=parser.getAttributeValue("",ATTR_ID);
  final String type=parser.getAttributeValue("",ATTR_TYPE);
  final long durationMs=Long.parseLong(parser.getAttributeValue("",ATTR_DURATION));
  final int behavior=Integer.parseInt(parser.getAttributeValue("",ATTR_BEHAVIOR));
  final boolean isTransitionGenerated;
  final String beforeMediaItemId=parser.getAttributeValue("",ATTR_BEFORE_MEDIA_ITEM_ID);
  final MediaItem beforeMediaItem;
  if (beforeMediaItemId != null) {
    beforeMediaItem=getMediaItem(beforeMediaItemId);
  }
 else {
    beforeMediaItem=null;
  }
  final String afterMediaItemId=parser.getAttributeValue("",ATTR_AFTER_MEDIA_ITEM_ID);
  final MediaItem afterMediaItem;
  if (afterMediaItemId != null) {
    afterMediaItem=getMediaItem(afterMediaItemId);
  }
 else {
    afterMediaItem=null;
  }
  final Transition transition;
  if (TransitionAlpha.class.getSimpleName().equals(type)) {
    final int blending=Integer.parseInt(parser.getAttributeValue("",ATTR_BLENDING));
    final String maskFilename=parser.getAttributeValue("",ATTR_MASK);
    final boolean invert=Boolean.getBoolean(parser.getAttributeValue("",ATTR_INVERT));
    transition=new TransitionAlpha(transitionId,afterMediaItem,beforeMediaItem,durationMs,behavior,maskFilename,blending,invert);
  }
 else   if (TransitionCrossfade.class.getSimpleName().equals(type)) {
    transition=new TransitionCrossfade(transitionId,afterMediaItem,beforeMediaItem,durationMs,behavior);
  }
 else   if (TransitionSliding.class.getSimpleName().equals(type)) {
    final int direction=Integer.parseInt(parser.getAttributeValue("",ATTR_DIRECTION));
    transition=new TransitionSliding(transitionId,afterMediaItem,beforeMediaItem,durationMs,behavior,direction);
  }
 else   if (TransitionFadeBlack.class.getSimpleName().equals(type)) {
    transition=new TransitionFadeBlack(transitionId,afterMediaItem,beforeMediaItem,durationMs,behavior);
  }
 else {
    transition=null;
  }
  if (beforeMediaItem != null) {
    beforeMediaItem.setBeginTransition(transition);
  }
  if (afterMediaItem != null) {
    afterMediaItem.setEndTransition(transition);
  }
  isTransitionGenerated=Boolean.parseBoolean(parser.getAttributeValue("",ATTR_IS_TRANSITION_GENERATED));
  if (isTransitionGenerated == true) {
    final String transitionFile=parser.getAttributeValue("",ATTR_GENERATED_TRANSITION_CLIP);
    if (new File(transitionFile).exists()) {
      transition.setFilename(transitionFile);
    }
 else {
      transition.setFilename(null);
    }
  }
  return transition;
}
