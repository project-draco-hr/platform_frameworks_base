{
  mDurationMs=0;
  final int mediaItemsCount=mMediaItems.size();
  for (int i=0; i < mediaItemsCount; i++) {
    final MediaItem mediaItem=mMediaItems.get(i);
    mDurationMs+=mediaItem.getTimelineDuration();
    if (mediaItem.getEndTransition() != null) {
      if (i < mediaItemsCount - 1) {
        mDurationMs-=mediaItem.getEndTransition().getDuration();
      }
    }
  }
}
