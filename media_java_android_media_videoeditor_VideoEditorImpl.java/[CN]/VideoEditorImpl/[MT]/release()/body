{
  stopPreview();
  boolean semAcquireDone=false;
  try {
    lock();
    semAcquireDone=true;
    if (mMANativeHelper != null) {
      mMediaItems.clear();
      mAudioTracks.clear();
      mTransitions.clear();
      mMANativeHelper.releaseNativeHelper();
      mMANativeHelper=null;
    }
  }
 catch (  Exception ex) {
    Log.e(TAG,"Sem acquire NOT successful in export",ex);
  }
 finally {
    if (semAcquireDone) {
      unlock();
    }
  }
  if (mMallocDebug) {
    try {
      dumpHeap("HeapAtEnd");
    }
 catch (    Exception ex) {
      Log.e(TAG,"dumpHeap returned error in release");
    }
  }
}
