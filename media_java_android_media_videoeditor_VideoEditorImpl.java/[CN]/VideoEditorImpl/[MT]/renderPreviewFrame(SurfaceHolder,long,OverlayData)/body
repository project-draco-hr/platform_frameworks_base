{
  if (surfaceHolder == null) {
    throw new IllegalArgumentException("Surface Holder is null");
  }
  final Surface surface=surfaceHolder.getSurface();
  if (surface == null) {
    throw new IllegalArgumentException("Surface could not be retrieved from Surface holder");
  }
  if (timeMs < 0) {
    throw new IllegalArgumentException("requested time not correct");
  }
 else   if (timeMs > mDurationMs) {
    throw new IllegalArgumentException("requested time more than duration");
  }
  long result=0;
  boolean semAcquireDone=false;
  try {
    mMANativeHelper.lock();
    semAcquireDone=true;
    if (mMediaItems.size() > 0) {
      final Rect frame=surfaceHolder.getSurfaceFrame();
      result=mMANativeHelper.renderPreviewFrame(surface,timeMs,frame.width(),frame.height(),overlayData);
    }
 else {
      result=0;
    }
  }
 catch (  InterruptedException ex) {
    Log.e(TAG,"Sem acquire NOT successful in renderPreviewFrame");
  }
 finally {
    if (semAcquireDone) {
      mMANativeHelper.unlock();
    }
  }
  return result;
}
