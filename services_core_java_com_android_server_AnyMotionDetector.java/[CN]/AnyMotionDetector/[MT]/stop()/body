{
  if (mState == STATE_ACTIVE) {
    mState=STATE_INACTIVE;
    if (DEBUG)     Slog.d(TAG,"Moved from STATE_ACTIVE to STATE_INACTIVE.");
    if (mMeasurementInProgress) {
      mMeasurementInProgress=false;
      mSensorManager.unregisterListener(mListener);
    }
    mHandler.removeCallbacks(mMeasurementTimeout);
    mHandler.removeCallbacks(mSensorRestart);
    mWakeLock.release();
    mCurrentGravityVector=null;
    mPreviousGravityVector=null;
  }
}
