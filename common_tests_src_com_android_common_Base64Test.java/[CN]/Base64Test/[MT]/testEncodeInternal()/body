{
  byte[] input={(byte)0x61,(byte)0x62,(byte)0x63};
  byte[] output=new byte[100];
  Base64.EncoderState state=new Base64.EncoderState(Base64.NO_PADDING | Base64.NO_WRAP,output);
  Base64.encodeInternal(input,0,3,state,false);
  assertEquals("YWJj".getBytes(),4,state.output,state.op);
  assertEquals(0,state.tailLen);
  Base64.encodeInternal(input,0,3,state,false);
  assertEquals("YWJj".getBytes(),4,state.output,state.op);
  assertEquals(0,state.tailLen);
  Base64.encodeInternal(input,0,1,state,false);
  assertEquals(0,state.op);
  assertEquals(1,state.tailLen);
  Base64.encodeInternal(input,0,1,state,false);
  assertEquals(0,state.op);
  assertEquals(2,state.tailLen);
  Base64.encodeInternal(input,0,1,state,false);
  assertEquals("YWFh".getBytes(),4,state.output,state.op);
  assertEquals(0,state.tailLen);
  Base64.encodeInternal(input,0,2,state,false);
  assertEquals(0,state.op);
  assertEquals(2,state.tailLen);
  Base64.encodeInternal(input,0,2,state,false);
  assertEquals("YWJh".getBytes(),4,state.output,state.op);
  assertEquals(1,state.tailLen);
  Base64.encodeInternal(input,0,2,state,false);
  assertEquals("YmFi".getBytes(),4,state.output,state.op);
  assertEquals(0,state.tailLen);
  Base64.encodeInternal(input,0,1,state,true);
  assertEquals("YQ".getBytes(),2,state.output,state.op);
}
