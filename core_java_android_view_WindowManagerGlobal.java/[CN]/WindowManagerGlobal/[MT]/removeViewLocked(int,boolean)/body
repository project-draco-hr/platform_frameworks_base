{
  ViewRootImpl root=mRoots.get(index);
  View view=root.getView();
  if (view != null) {
    InputMethodManager imm=InputMethodManager.getInstance();
    if (imm != null) {
      imm.windowDismissed(mViews.get(index).getWindowToken());
    }
  }
  boolean deferred=root.die(immediate);
  if (view != null) {
    view.assignParent(null);
    if (deferred) {
      Slog.d(TAG,"removeViewLocked: b9404689 mDyingViews adding view=" + view + " root="+ root+ " Callers="+ Debug.getCallers(4));
      mDyingViews.add(view);
    }
  }
}
