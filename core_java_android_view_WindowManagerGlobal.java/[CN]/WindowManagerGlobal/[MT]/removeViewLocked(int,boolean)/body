{
  ViewRootImpl root=mRoots.get(index);
  View view=root.getView();
  if (view != null) {
    InputMethodManager imm=InputMethodManager.getInstance();
    if (imm != null) {
      imm.windowDismissed(mViews.get(index).getWindowToken());
    }
  }
  boolean deferred=root.die(immediate);
  if (view != null) {
    view.assignParent(null);
    if (deferred) {
      mDyingViews.add(view);
    }
  }
}
