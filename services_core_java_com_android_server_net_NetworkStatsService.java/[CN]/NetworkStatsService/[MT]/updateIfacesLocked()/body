{
  if (!mSystemReady)   return;
  if (LOGV)   Slog.v(TAG,"updateIfacesLocked()");
  performPollLocked(FLAG_PERSIST_NETWORK);
  final NetworkState[] states;
  final LinkProperties activeLink;
  try {
    states=mConnManager.getAllNetworkState();
    activeLink=mConnManager.getActiveLinkProperties();
  }
 catch (  RemoteException e) {
    return;
  }
  mActiveIface=activeLink != null ? activeLink.getInterfaceName() : null;
  mActiveIfaces.clear();
  for (  NetworkState state : states) {
    if (state.networkInfo.isConnected()) {
      final String iface=state.linkProperties.getInterfaceName();
      NetworkIdentitySet ident=mActiveIfaces.get(iface);
      if (ident == null) {
        ident=new NetworkIdentitySet();
        mActiveIfaces.put(iface,ident);
      }
      ident.add(NetworkIdentity.buildNetworkIdentity(mContext,state));
      if (isNetworkTypeMobile(state.networkInfo.getType()) && iface != null) {
        if (!contains(mMobileIfaces,iface)) {
          mMobileIfaces=appendElement(String.class,mMobileIfaces,iface);
        }
      }
    }
  }
}
