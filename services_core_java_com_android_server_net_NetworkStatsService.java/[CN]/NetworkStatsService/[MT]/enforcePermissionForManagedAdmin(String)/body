{
  boolean hasPermission=hasAppOpsPermission(callingPackage);
  if (!hasPermission) {
    final int callingUid=Binder.getCallingUid();
    final DevicePolicyManagerInternal dpmi=LocalServices.getService(DevicePolicyManagerInternal.class);
    if (dpmi.isActiveAdminWithPolicy(callingUid,DeviceAdminInfo.USES_POLICY_PROFILE_OWNER) || dpmi.isActiveAdminWithPolicy(callingUid,DeviceAdminInfo.USES_POLICY_DEVICE_OWNER)) {
      return;
    }
  }
  if (!hasPermission) {
    mContext.enforceCallingOrSelfPermission(READ_NETWORK_USAGE_HISTORY,TAG);
  }
}
