{
  mContext.enforceCallingOrSelfPermission(MODIFY_NETWORK_ACCOUNTING,TAG);
  assertBandwidthControlEnabled();
  mPersistThreshold=MathUtils.constrain(thresholdBytes,128 * KB_IN_BYTES,2 * MB_IN_BYTES);
  if (LOGV) {
    Slog.v(TAG,"advisePersistThreshold() given " + thresholdBytes + ", clamped to "+ mPersistThreshold);
  }
  final long currentTime=mTime.hasCache() ? mTime.currentTimeMillis() : System.currentTimeMillis();
synchronized (mStatsLock) {
    if (!mSystemReady)     return;
    updatePersistThresholds();
    mDevRecorder.maybePersistLocked(currentTime);
    mXtRecorder.maybePersistLocked(currentTime);
    mUidRecorder.maybePersistLocked(currentTime);
    mUidTagRecorder.maybePersistLocked(currentTime);
  }
  registerGlobalAlert();
}
