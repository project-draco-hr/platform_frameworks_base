{
  CharSequence pin=mPinText.getText();
  CharSequence pin1=mNewPinText.getText();
  CharSequence pin2=mConfirmPinText.getText();
  boolean match=pin1 != null && pin2 != null && pin1.length() >= 4 && pin1.toString().equals(pin2.toString()) && (!mHasRestrictionsPin || (pin != null && pin.length() >= 4));
  boolean showError=!TextUtils.isEmpty(pin1) && !TextUtils.isEmpty(pin2);
  setPositiveButtonState(match);
  mPinErrorMessage.setVisibility((match || !showError) ? View.INVISIBLE : View.VISIBLE);
}
