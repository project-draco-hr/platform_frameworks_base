{
  AsyncResult ar;
switch (msg.what) {
case EVENT_NEW_SMS:
    if (Config.LOGD) {
      Log.d(TAG,"New SMS Message Received");
    }
  SmsMessage sms;
ar=(AsyncResult)msg.obj;
if (mCm != null) {
mCm.acknowledgeLastIncomingSMS(true,null);
}
if (ar.exception != null) {
Log.e(TAG,"Exception processing incoming SMS. Exception:" + ar.exception);
return;
}
sms=(SmsMessage)ar.result;
dispatchMessage(sms);
break;
case EVENT_SEND_SMS_COMPLETE:
handleSendComplete((AsyncResult)msg.obj);
break;
case EVENT_SEND_RETRY:
sendSms((SmsTracker)msg.obj);
break;
case EVENT_NEW_SMS_STATUS_REPORT:
handleStatusReport((AsyncResult)msg.obj);
break;
case EVENT_SIM_FULL:
handleSimFull();
break;
case EVENT_POST_ALERT:
handleReachSentLimit((SmsTracker)(msg.obj));
break;
case EVENT_ALERT_TIMEOUT:
((AlertDialog)(msg.obj)).dismiss();
msg.obj=null;
mSTracker=null;
break;
case EVENT_SEND_CONFIRMED_SMS:
if (mSTracker != null) {
Log.d(TAG,"Ready to send SMS again.");
sendSms(mSTracker);
mSTracker=null;
}
break;
}
}
