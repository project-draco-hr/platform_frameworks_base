{
  PendingIntent sentIntent=null;
  int ss=mPhone.getServiceState().getState();
  if (ss == ServiceState.STATE_IN_SERVICE) {
    if (sentIntents != null && sentIntents.size() > 0) {
      sentIntent=sentIntents.get(0);
    }
    String appName=getAppNameByIntent(sentIntent);
    if (!mCounter.check(appName,parts.size())) {
      HashMap<String,Object> map=new HashMap<String,Object>();
      map.put("destination",destinationAddress);
      map.put("scaddress",scAddress);
      map.put("parts",parts);
      map.put("sentIntents",sentIntents);
      map.put("deliveryIntents",deliveryIntents);
      SmsTracker multipartParameter=new SmsTracker(map,null,null);
      sendMessage(obtainMessage(EVENT_POST_ALERT,multipartParameter));
      return;
    }
  }
  sendMultipartTextWithPermit(destinationAddress,scAddress,parts,sentIntents,deliveryIntents);
}
