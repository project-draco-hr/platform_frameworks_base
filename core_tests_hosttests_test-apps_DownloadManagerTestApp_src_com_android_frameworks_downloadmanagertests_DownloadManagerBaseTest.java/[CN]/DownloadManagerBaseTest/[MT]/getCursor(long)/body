{
  Query query=new Query();
  if (id != -1) {
    query.setFilterById(id);
  }
  Cursor cursor=mDownloadManager.query(query);
  int currentWaitTime=0;
  try {
    while (!cursor.moveToFirst()) {
      Thread.sleep(DEFAULT_WAIT_POLL_TIME);
      currentWaitTime+=DEFAULT_WAIT_POLL_TIME;
      if (currentWaitTime > DEFAULT_MAX_WAIT_TIME) {
        fail("timed out waiting for a non-null query result");
      }
      cursor.requery();
    }
  }
 catch (  Exception e) {
    cursor.close();
    throw e;
  }
  return cursor;
}
