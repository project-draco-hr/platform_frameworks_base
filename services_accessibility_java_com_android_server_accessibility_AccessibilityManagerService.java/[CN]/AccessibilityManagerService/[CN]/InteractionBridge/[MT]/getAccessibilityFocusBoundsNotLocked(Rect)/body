{
  AccessibilityNodeInfo focus=getAccessibilityFocusNotLocked();
  if (focus == null) {
    return false;
  }
synchronized (mLock) {
    focus.getBoundsInScreen(outBounds);
    MagnificationSpec spec=getCompatibleMagnificationSpecLocked(focus.getWindowId());
    if (spec != null && !spec.isNop()) {
      outBounds.offset((int)-spec.offsetX,(int)-spec.offsetY);
      outBounds.scale(1 / spec.scale);
    }
    Rect windowBounds=mTempRect;
    getActiveWindowBounds(windowBounds);
    outBounds.intersect(windowBounds);
    mDefaultDisplay.getRealSize(mTempPoint);
    outBounds.intersect(0,0,mTempPoint.x,mTempPoint.y);
    return true;
  }
}
