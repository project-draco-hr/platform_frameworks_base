{
  final int windowId=findWindowIdLocked(window.token);
  if (windowId < 0) {
    return null;
  }
  AccessibilityWindowInfo reportedWindow=AccessibilityWindowInfo.obtain();
  reportedWindow.setId(windowId);
  reportedWindow.setType(getTypeForWindowManagerWindowType(window.type));
  reportedWindow.setLayer(window.layer);
  reportedWindow.setFocused(window.focused);
  reportedWindow.setBoundsInScreen(window.boundsInScreen);
  reportedWindow.setTitle(window.title);
  reportedWindow.setAnchorId(window.accessibilityIdOfAnchor);
  final int parentId=findWindowIdLocked(window.parentToken);
  if (parentId >= 0) {
    reportedWindow.setParentId(parentId);
  }
  if (window.childTokens != null) {
    final int childCount=window.childTokens.size();
    for (int i=0; i < childCount; i++) {
      IBinder childToken=window.childTokens.get(i);
      final int childId=findWindowIdLocked(childToken);
      if (childId >= 0) {
        reportedWindow.addChild(childId);
      }
    }
  }
  return reportedWindow;
}
