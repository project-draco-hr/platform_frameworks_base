{
  final int userId=userState.mUserId;
  if (userId == mCurrentUserId && mMagnificationController != null) {
    if (userState.mIsDisplayMagnificationEnabled || userHasMagnificationServicesLocked(userState)) {
      mMagnificationController.setUserId(userState.mUserId);
    }
 else {
      if (mMagnificationController.resetIfNeeded(true)) {
        mUnregisterMagnificationOnReset=true;
      }
 else {
        mUnregisterMagnificationOnReset=false;
        mMagnificationController.unregister();
        mMagnificationController=null;
      }
    }
  }
}
