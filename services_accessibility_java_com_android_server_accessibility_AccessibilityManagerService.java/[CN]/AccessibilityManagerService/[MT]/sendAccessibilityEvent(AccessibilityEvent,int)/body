{
synchronized (mLock) {
    final int resolvedUserId=mSecurityPolicy.resolveCallingUserIdEnforcingPermissionsLocked(userId);
    if (resolvedUserId != mCurrentUserId) {
      return true;
    }
    if (mSecurityPolicy.canDispatchAccessibilityEvent(event)) {
      mSecurityPolicy.updateEventSourceLocked(event);
      mMainHandler.obtainMessage(MainHandler.MSG_UPDATE_ACTIVE_WINDOW,event.getWindowId(),event.getEventType()).sendToTarget();
      notifyAccessibilityServicesDelayedLocked(event,false);
      notifyAccessibilityServicesDelayedLocked(event,true);
    }
    if (mHasInputFilter && mInputFilter != null) {
      mMainHandler.obtainMessage(MainHandler.MSG_SEND_ACCESSIBILITY_EVENT_TO_INPUT_FILTER,AccessibilityEvent.obtain(event)).sendToTarget();
    }
    event.recycle();
    getUserStateLocked(resolvedUserId).mHandledFeedbackTypes=0;
  }
  return (OWN_PROCESS_ID != Binder.getCallingPid());
}
