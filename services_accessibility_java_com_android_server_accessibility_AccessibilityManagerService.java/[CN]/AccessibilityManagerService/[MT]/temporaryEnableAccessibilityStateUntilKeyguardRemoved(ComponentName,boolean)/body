{
  mSecurityPolicy.enforceCallingPermission(Manifest.permission.TEMPORARY_ENABLE_ACCESSIBILITY,TEMPORARY_ENABLE_ACCESSIBILITY_UNTIL_KEYGUARD_REMOVED);
  if (!mWindowManagerService.isKeyguardLocked()) {
    return;
  }
synchronized (mLock) {
    UserState userState=getCurrentUserStateLocked();
    if (userState.mUiAutomationService != null) {
      return;
    }
    userState.mIsAccessibilityEnabled=true;
    userState.mIsTouchExplorationEnabled=touchExplorationEnabled;
    userState.mIsEnhancedWebAccessibilityEnabled=false;
    userState.mIsDisplayMagnificationEnabled=false;
    userState.mIsAutoclickEnabled=false;
    userState.mEnabledServices.clear();
    userState.mEnabledServices.add(service);
    userState.mBindingServices.clear();
    userState.mTouchExplorationGrantedServices.clear();
    userState.mTouchExplorationGrantedServices.add(service);
    onUserStateChangedLocked(userState);
  }
}
