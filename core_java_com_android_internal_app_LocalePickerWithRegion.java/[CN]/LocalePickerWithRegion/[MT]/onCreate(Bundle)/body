{
  super.onCreate(savedInstanceState);
  setHasOptionsMenu(true);
  Locale sortingLocale;
  if (mCountryMode) {
    if (mParentLocale == null) {
      sortingLocale=Locale.getDefault();
      this.getActivity().setTitle(R.string.country_selection_title);
    }
 else {
      sortingLocale=mParentLocale.getLocale();
      this.getActivity().setTitle(mParentLocale.getFullNameNative());
    }
  }
 else {
    sortingLocale=Locale.getDefault();
    this.getActivity().setTitle(R.string.language_selection_title);
  }
  mAdapter=new SuggestedLocaleAdapter(mLocaleList,mCountryMode);
  LocaleHelper.LocaleInfoComparator comp=new LocaleHelper.LocaleInfoComparator(sortingLocale);
  mAdapter.sort(comp);
  setListAdapter(mAdapter);
}
