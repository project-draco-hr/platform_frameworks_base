{
  super(context,R.layout.locale_picker_item,R.id.locale);
  mInflater=(LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
  for (  Locale locale : locales) {
    Locale baseLocale=getBaseLocale(locale);
    String language=baseLocale.toLanguageTag();
    if (!mLevelOne.containsKey(language)) {
      String label=toTitleCase(baseLocale.getDisplayName(baseLocale),baseLocale);
      mLevelOne.put(language,new LocalePicker.LocaleInfo(label,baseLocale));
    }
    final HashSet<LocalePicker.LocaleInfo> subLocales;
    if (mLevelTwo.containsKey(language)) {
      subLocales=mLevelTwo.get(language);
    }
 else {
      subLocales=new HashSet<>();
      mLevelTwo.put(language,subLocales);
    }
    String label=locale.getDisplayCountry(locale);
    subLocales.add(new LocalePicker.LocaleInfo(label,locale));
  }
  setAdapterLevel(null);
}
