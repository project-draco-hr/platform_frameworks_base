{
  boolean oldStatus=getMediaState();
  try {
    if (!getMediaState()) {
      mountMedia();
    }
    IMountService ms=getMs();
    ShutdownObserver observer=new ShutdownObserver();
synchronized (observer) {
      try {
        ms.shutdown(observer);
        for (int i=0; i < 4; i++) {
          ms.shutdown(null);
        }
      }
 catch (      RemoteException e) {
        failStr(e);
      }
    }
  }
  finally {
    boolean currStatus=getMediaState();
    if (oldStatus != currStatus) {
      if (oldStatus) {
        mountMedia();
      }
 else {
        unmountMedia();
      }
    }
  }
}
