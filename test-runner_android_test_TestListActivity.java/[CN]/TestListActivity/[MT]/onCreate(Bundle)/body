{
  super.onCreate(icicle);
  Intent intent=getIntent();
  mMode=intent.getIntExtra(TestListActivity.PERFORMANCE_TESTS,mMode);
  if (intent.getAction().equals(Intent.ACTION_MAIN)) {
    mSuite=getTestSuite();
  }
 else   if (intent.getAction().equals(Intent.ACTION_RUN)) {
    Intent ntent=new Intent(Intent.ACTION_RUN,intent.getData() != null ? intent.getData() : Uri.parse(getTestSuite()));
    ntent.setClassName("com.android.testharness","com.android.testharness.RunTest");
    ntent.putExtras(intent);
    ntent.putExtra("package",getPackageName());
    startActivity(ntent);
    finish();
    return;
  }
 else   if (intent.getAction().equals(Intent.ACTION_VIEW)) {
    mSuite=intent.getData() != null ? intent.getData().toString() : null;
  }
  String[] children=TestRunner.getChildren(this,mSuite);
  Arrays.sort(children,sComparator);
  int len=children.length;
  mTests=new String[len];
  System.arraycopy(children,0,mTests,0,len);
  setTitle(TestRunner.getTitle(mSuite));
  MatrixCursor cursor=new MatrixCursor(new String[]{"name","_id"});
  addTestRows(cursor);
  CursorAdapter adapter=new SimpleCursorAdapter(this,com.android.internal.R.layout.simple_list_item_1,cursor,new String[]{"name"},new int[]{com.android.internal.R.id.text1});
  setListAdapter(adapter);
}
