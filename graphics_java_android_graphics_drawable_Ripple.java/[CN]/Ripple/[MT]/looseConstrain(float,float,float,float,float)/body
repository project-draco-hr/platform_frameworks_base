{
  if (value < min) {
    return min - Math.min(margin,(float)Math.pow(min - value,factor));
  }
 else   if (value > max) {
    return max + Math.min(margin,(float)Math.pow(value - max,factor));
  }
 else {
    return value;
  }
}
