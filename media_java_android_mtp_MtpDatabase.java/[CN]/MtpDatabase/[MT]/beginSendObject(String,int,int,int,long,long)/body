{
  if (!inStorageRoot(path)) {
    Log.e(TAG,"attempt to put file outside of storage area: " + path);
    return -1;
  }
  if (!inStorageSubDirectory(path))   return -1;
  if (path != null) {
    Cursor c=null;
    try {
      c=mMediaProvider.query(mPackageName,mObjectsUri,ID_PROJECTION,PATH_WHERE,new String[]{path},null,null);
      if (c != null && c.getCount() > 0) {
        Log.w(TAG,"file already exists in beginSendObject: " + path);
        return -1;
      }
    }
 catch (    RemoteException e) {
      Log.e(TAG,"RemoteException in beginSendObject",e);
    }
 finally {
      if (c != null) {
        c.close();
      }
    }
  }
  mDatabaseModified=true;
  ContentValues values=new ContentValues();
  values.put(Files.FileColumns.DATA,path);
  values.put(Files.FileColumns.FORMAT,format);
  values.put(Files.FileColumns.PARENT,parent);
  values.put(Files.FileColumns.STORAGE_ID,storageId);
  values.put(Files.FileColumns.SIZE,size);
  values.put(Files.FileColumns.DATE_MODIFIED,modified);
  try {
    Uri uri=mMediaProvider.insert(mPackageName,mObjectsUri,values);
    if (uri != null) {
      return Integer.parseInt(uri.getPathSegments().get(2));
    }
 else {
      return -1;
    }
  }
 catch (  RemoteException e) {
    Log.e(TAG,"RemoteException in beginSendObject",e);
    return -1;
  }
}
