{
  if (DEBUG) {
    Log.d(TAG,"waitUntilIdle called.");
  }
  if (mLegacyDevice.isClosed()) {
    Log.e(TAG,"Cannot wait until idle, device has been closed.");
    return CameraBinderDecorator.ENODEV;
  }
synchronized (mConfigureLock) {
    if (mConfiguring) {
      Log.e(TAG,"Cannot wait until idle, configuration change in progress.");
      return CameraBinderDecorator.INVALID_OPERATION;
    }
  }
  mLegacyDevice.waitUntilIdle();
  return CameraBinderDecorator.NO_ERROR;
}
