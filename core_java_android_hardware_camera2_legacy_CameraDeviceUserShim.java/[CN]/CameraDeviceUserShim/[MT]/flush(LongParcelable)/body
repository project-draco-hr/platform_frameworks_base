{
  if (DEBUG) {
    Log.d(TAG,"flush called.");
  }
  if (mLegacyDevice.isClosed()) {
    Log.e(TAG,"Cannot flush, device has been closed.");
    return CameraBinderDecorator.ENODEV;
  }
synchronized (mConfigureLock) {
    if (mConfiguring) {
      Log.e(TAG,"Cannot flush, configuration change in progress.");
      return CameraBinderDecorator.INVALID_OPERATION;
    }
  }
  long lastFrame=mLegacyDevice.flush();
  if (lastFrameNumber != null) {
    lastFrameNumber.setNumber(lastFrame);
  }
  return CameraBinderDecorator.NO_ERROR;
}
