{
  if (DEBUG) {
    Log.d(TAG,"endConfigure called.");
  }
  if (mLegacyDevice.isClosed()) {
    Log.e(TAG,"Cannot end configure, device has been closed.");
    return CameraBinderDecorator.ENODEV;
  }
  ArrayList<Surface> surfaces=null;
synchronized (mConfigureLock) {
    if (!mConfiguring) {
      Log.e(TAG,"Cannot end configure, no configuration change in progress.");
      return CameraBinderDecorator.INVALID_OPERATION;
    }
    int numSurfaces=mSurfaces.size();
    if (numSurfaces > 0) {
      surfaces=new ArrayList<>();
      for (int i=0; i < numSurfaces; ++i) {
        surfaces.add(mSurfaces.valueAt(i));
      }
    }
    mConfiguring=false;
  }
  return mLegacyDevice.configureOutputs(surfaces);
}
