{
  if (DEBUG) {
    Log.d(TAG,"createStream called.");
  }
  if (mLegacyDevice.isClosed()) {
    Log.e(TAG,"Cannot create stream, device has been closed.");
    return CameraBinderDecorator.ENODEV;
  }
synchronized (mConfigureLock) {
    if (!mConfiguring) {
      Log.e(TAG,"Cannot create stream, beginConfigure hasn't been called yet.");
      return CameraBinderDecorator.INVALID_OPERATION;
    }
    int id=++mSurfaceIdCounter;
    mSurfaces.put(id,surface);
    return id;
  }
}
