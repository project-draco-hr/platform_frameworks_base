{
  if (listener == null) {
    throw new IllegalArgumentException("the listener is null");
  }
synchronized (mAccountsUpdatedListeners) {
    if (mAccountsUpdatedListeners.remove(listener) == null) {
      throw new IllegalStateException("this listener was not previously added");
    }
    if (mAccountsUpdatedListeners.isEmpty()) {
      mContext.unregisterReceiver(mAccountsChangedBroadcastReceiver);
    }
  }
}
