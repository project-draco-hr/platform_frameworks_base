{
  float newSize=transitioningPositionStart + mCollapsedSize - currentYPosition;
  newSize=Math.min(childHeight,newSize);
  algorithmState.partialInBottom=1.0f - ((stackHeight - mBottomStackPeekSize - nextYPosition) / mCollapsedSize);
  algorithmState.partialInBottom=Math.min(1.0f,algorithmState.partialInBottom);
  float offset=mBottomStackIndentationFunctor.getValue(algorithmState.partialInBottom);
  nextYPosition=transitioningPositionStart + offset;
  algorithmState.itemsInBottomStack+=algorithmState.partialInBottom;
  if (childHeight != (int)newSize) {
    childViewState.height=(int)newSize;
  }
  childViewState.location=StackScrollState.ViewState.LOCATION_MAIN_AREA;
  return nextYPosition;
}
