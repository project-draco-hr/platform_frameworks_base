{
  int resultScroll=resultState.getScrollY() + mCollapsedSize;
  if (algorithmState.visibleChildren.size() > 0) {
    View firstView=algorithmState.visibleChildren.get(0);
    if (firstView instanceof ExpandableNotificationRow) {
      ExpandableNotificationRow firstRow=(ExpandableNotificationRow)firstView;
      if (firstRow.isUserLocked()) {
        return resultScroll;
      }
      int scrolledInAmount=0;
      if (!mIsExpansionChanging) {
        scrolledInAmount=firstRow.getExpandPotential();
      }
 else       if (mExpandedOnStart && mFirstChildWhileExpanding == firstView) {
        scrolledInAmount=firstRow.getMaximumAllowedExpandHeight() - mFirstChildMaxHeight;
      }
      resultScroll-=scrolledInAmount;
    }
  }
  return resultScroll;
}
