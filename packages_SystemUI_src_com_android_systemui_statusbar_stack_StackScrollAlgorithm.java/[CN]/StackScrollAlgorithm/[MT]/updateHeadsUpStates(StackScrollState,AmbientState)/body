{
  TreeSet<HeadsUpManager.HeadsUpEntry> headsUpEntries=ambientState.getSortedHeadsUpEntries();
  for (  HeadsUpManager.HeadsUpEntry entry : headsUpEntries) {
    ExpandableNotificationRow row=entry.entry.row;
    StackViewState childState=resultState.getViewStateForView(row);
    if (!row.isInShade()) {
      childState.yTranslation=0;
    }
    if (ambientState.getTopHeadsUpEntry() == row) {
      childState.height+=row.getHeadsUpHeight() - mCollapsedSize;
    }
    childState.height=Math.max(childState.height,row.getHeadsUpHeight());
    childState.yTranslation=Math.min(childState.yTranslation,ambientState.getMaxHeadsUpTranslation() - childState.height);
  }
}
