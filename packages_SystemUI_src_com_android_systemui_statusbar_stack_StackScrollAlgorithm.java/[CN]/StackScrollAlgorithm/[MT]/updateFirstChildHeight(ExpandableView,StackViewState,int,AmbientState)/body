{
  int bottomPeekStart=ambientState.getInnerHeight() - mBottomStackPeekSize - mCollapseSecondCardPadding + ambientState.getScrollY();
  float maxHeight=mIsExpansionChanging && child == mFirstChildWhileExpanding ? mFirstChildMaxHeight : childHeight;
  childViewState.height=(int)Math.max(Math.min(bottomPeekStart,maxHeight),child.getMinHeight());
}
