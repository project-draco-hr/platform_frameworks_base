{
  float nextYPosition=0;
  int paddedIndex=i - Math.max(numberOfElementsCompletelyIn - MAX_ITEMS_IN_TOP_STACK,0);
  if (paddedIndex >= 0) {
    nextYPosition=mCollapsedSize + mPaddingBetweenElements - mTopStackIndentationFunctor.getValue(algorithmState.itemsInTopStack - i - 1);
    if (paddedIndex == 0) {
      childViewState.alpha=1.0f - algorithmState.partialInTop;
      childViewState.location=StackScrollState.ViewState.LOCATION_TOP_STACK_HIDDEN;
    }
 else {
      childViewState.location=StackScrollState.ViewState.LOCATION_TOP_STACK_PEEKING;
    }
  }
 else {
    childViewState.alpha=0.0f;
    childViewState.location=StackScrollState.ViewState.LOCATION_TOP_STACK_HIDDEN;
  }
  return nextYPosition;
}
