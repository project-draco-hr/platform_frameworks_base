{
  float nextYPosition;
  algorithmState.itemsInBottomStack+=1.0f;
  if (algorithmState.itemsInBottomStack < MAX_ITEMS_IN_BOTTOM_STACK) {
    nextYPosition=transitioningPositionStart + mBottomStackIndentationFunctor.getValue(algorithmState.itemsInBottomStack);
  }
 else {
    if (algorithmState.itemsInBottomStack > MAX_ITEMS_IN_BOTTOM_STACK + 2) {
      childViewState.alpha=0.0f;
    }
 else     if (algorithmState.itemsInBottomStack > MAX_ITEMS_IN_BOTTOM_STACK + 1) {
      childViewState.alpha=1.0f - algorithmState.partialInBottom;
    }
    nextYPosition=transitioningPositionStart + mBottomStackPeekSize;
  }
  if (childHeight != mCollapsedSize) {
    childViewState.height=mCollapsedSize;
  }
  return nextYPosition;
}
