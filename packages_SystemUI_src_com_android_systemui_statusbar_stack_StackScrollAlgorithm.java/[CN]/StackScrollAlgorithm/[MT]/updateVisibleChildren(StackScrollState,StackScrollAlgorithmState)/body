{
  ViewGroup hostView=resultState.getHostView();
  int childCount=hostView.getChildCount();
  state.visibleChildren.clear();
  state.visibleChildren.ensureCapacity(childCount);
  for (int i=0; i < childCount; i++) {
    ExpandableView v=(ExpandableView)hostView.getChildAt(i);
    if (v.getVisibility() != View.GONE) {
      StackScrollState.ViewState viewState=resultState.getViewStateForView(v);
      viewState.notGoneIndex=state.visibleChildren.size();
      state.visibleChildren.add(v);
    }
  }
}
