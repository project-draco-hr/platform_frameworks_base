{
  StackScrollAlgorithmState algorithmState=mTempAlgorithmState;
  resultState.resetViewStates();
  algorithmState.itemsInTopStack=0.0f;
  algorithmState.partialInTop=0.0f;
  algorithmState.lastTopStackIndex=0;
  algorithmState.scrolledPixelsTop=0;
  algorithmState.itemsInBottomStack=0.0f;
  algorithmState.partialInBottom=0.0f;
  float topOverScroll=ambientState.getOverScrollAmount(true);
  float bottomOverScroll=ambientState.getOverScrollAmount(false);
  algorithmState.scrollY=(int)(ambientState.getScrollY() + mCollapsedSize + bottomOverScroll - topOverScroll);
  updateVisibleChildren(resultState,algorithmState);
  findNumberOfItemsInTopStackAndUpdateState(resultState,algorithmState);
  updatePositionsForState(resultState,algorithmState);
  updateZValuesForState(resultState,algorithmState);
  handleDraggedViews(ambientState,resultState,algorithmState);
  updateDimmedActivated(ambientState,resultState,algorithmState);
  updateClipping(resultState,algorithmState);
}
