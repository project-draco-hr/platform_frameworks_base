{
  int height=buildDropDown();
  if (mPopup.isShowing()) {
    mPopup.update(this,mDropDownHorizontalOffset,mDropDownVerticalOffset,getMeasuredWidth() - mPaddingLeft - mPaddingRight,height);
  }
 else {
    mPopup.setWindowLayoutMode(0,ViewGroup.LayoutParams.WRAP_CONTENT);
    mPopup.setWidth(getMeasuredWidth() - mPaddingLeft - mPaddingRight);
    mPopup.setHeight(height);
    mPopup.setInputMethodMode(PopupWindow.INPUT_METHOD_NEEDED);
    mPopup.setOutsideTouchable(true);
    mPopup.setTouchInterceptor(new PopupTouchIntercepter());
    mPopup.showAsDropDown(this,mDropDownHorizontalOffset,mDropDownVerticalOffset);
    mDropDownList.setSelection(ListView.INVALID_POSITION);
    mDropDownList.hideSelector();
    mDropDownList.requestFocus();
    post(mHideSelector);
  }
}
