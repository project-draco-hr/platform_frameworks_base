{
  if (view != null) {
    view.setAlpha(appearing ? 0f : 1.0f);
    view.setTranslationY(appearing ? translationY : 0);
    Animator alphaAnim;
    float targetAlpha=appearing ? 1f : 0f;
    if (view.isHardwareAccelerated()) {
      RenderNodeAnimator alphaAnimRt=new RenderNodeAnimator(RenderNodeAnimator.ALPHA,targetAlpha);
      alphaAnimRt.setTarget(view);
      alphaAnim=alphaAnimRt;
    }
 else {
      alphaAnim=ObjectAnimator.ofFloat(view,View.ALPHA,view.getAlpha(),targetAlpha);
    }
    alphaAnim.setInterpolator(interpolator);
    alphaAnim.setDuration(duration);
    alphaAnim.setStartDelay(delay);
    if (view.hasOverlappingRendering()) {
      view.setLayerType(View.LAYER_TYPE_HARDWARE,null);
      alphaAnim.addListener(new AnimatorListenerAdapter(){
        @Override public void onAnimationEnd(        Animator animation){
          view.setLayerType(View.LAYER_TYPE_NONE,null);
        }
      }
);
    }
    if (endRunnable != null) {
      alphaAnim.addListener(new AnimatorListenerAdapter(){
        @Override public void onAnimationEnd(        Animator animation){
          endRunnable.run();
        }
      }
);
    }
    alphaAnim.start();
    startTranslationYAnimation(view,delay,duration,appearing ? 0 : translationY,interpolator);
  }
}
