{
  if (config == null) {
    throw new NullPointerException("config must not be null");
  }
  mNetworkSecurityConfig=config;
  try {
    KeyStore store=KeyStore.getInstance(KeyStore.getDefaultType());
    store.load(null);
    int certNum=0;
    for (    TrustAnchor anchor : mNetworkSecurityConfig.getTrustAnchors()) {
      store.setEntry(String.valueOf(certNum++),new KeyStore.TrustedCertificateEntry(anchor.certificate),null);
    }
    mDelegate=new TrustManagerImpl(store);
  }
 catch (  GeneralSecurityException|IOException e) {
    throw new RuntimeException(e);
  }
}
