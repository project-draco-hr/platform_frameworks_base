{
  if (config == null) {
    throw new NullPointerException("config must not be null");
  }
  mNetworkSecurityConfig=config;
  try {
    TrustedCertificateStoreAdapter certStore=new TrustedCertificateStoreAdapter(config);
    KeyStore store=KeyStore.getInstance(KeyStore.getDefaultType());
    store.load(null);
    mDelegate=new TrustManagerImpl(store,null,certStore);
  }
 catch (  GeneralSecurityException|IOException e) {
    throw new RuntimeException(e);
  }
}
