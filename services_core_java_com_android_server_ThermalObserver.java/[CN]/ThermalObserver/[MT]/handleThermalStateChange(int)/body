{
synchronized (mLock) {
    mLastState=state;
    Intent intent=new Intent(Intent.ACTION_THERMAL_EVENT);
    intent.addFlags(Intent.FLAG_RECEIVER_REPLACE_PENDING);
    final int thermalState;
switch (state) {
case SWITCH_STATE_WARNING:
      thermalState=Intent.EXTRA_THERMAL_STATE_WARNING;
    break;
case SWITCH_STATE_EXCEEDED:
  thermalState=Intent.EXTRA_THERMAL_STATE_EXCEEDED;
break;
case SWITCH_STATE_NORMAL:
default :
thermalState=Intent.EXTRA_THERMAL_STATE_NORMAL;
break;
}
intent.putExtra(Intent.EXTRA_THERMAL_STATE,thermalState);
getContext().sendBroadcastAsUser(intent,UserHandle.ALL);
}
}
