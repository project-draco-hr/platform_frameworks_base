{
  boolean success=false;
  PrintJobInfo queuedPrintJob=null;
synchronized (mLock) {
    PrintJobInfo printJob=getPrintJob(printJobId,PrintManager.APP_ID_ANY);
    if (printJob != null && printJob.getState() < state) {
      success=true;
      printJob.setState(state);
switch (state) {
case PrintJobInfo.STATE_COMPLETED:
case PrintJobInfo.STATE_CANCELED:
{
          removePrintJobLocked(printJob);
        }
      break;
case PrintJobInfo.STATE_QUEUED:
{
      queuedPrintJob=new PrintJobInfo(printJob);
    }
  break;
}
if (DEBUG_PRINT_JOB_LIFECYCLE) {
Slog.i(LOG_TAG,"[STATUS CHANGED] " + printJob);
}
mPersistanceManager.writeStateLocked();
}
}
if (queuedPrintJob != null) {
try {
mPrintManager.onPrintJobQueued(queuedPrintJob.getPrinterId(),queuedPrintJob);
}
 catch (RemoteException re) {
}
}
return success;
}
