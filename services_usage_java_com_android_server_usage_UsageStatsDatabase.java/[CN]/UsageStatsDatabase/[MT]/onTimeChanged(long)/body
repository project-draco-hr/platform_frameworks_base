{
synchronized (mLock) {
    for (    TimeSparseArray<AtomicFile> files : mSortedStatFiles) {
      final int fileCount=files.size();
      for (int i=0; i < fileCount; i++) {
        final AtomicFile file=files.valueAt(i);
        final long newTime=files.keyAt(i) + timeDiffMillis;
        if (newTime < 0) {
          Slog.i(TAG,"Deleting file " + file.getBaseFile().getAbsolutePath() + " for it is in the future now.");
          file.delete();
        }
 else {
          try {
            file.openRead().close();
          }
 catch (          IOException e) {
          }
          String newName=Long.toString(newTime);
          if (file.getBaseFile().getName().endsWith(CHECKED_IN_SUFFIX)) {
            newName=newName + CHECKED_IN_SUFFIX;
          }
          final File newFile=new File(file.getBaseFile().getParentFile(),newName);
          Slog.i(TAG,"Moving file " + file.getBaseFile().getAbsolutePath() + " to "+ newFile.getAbsolutePath());
          file.getBaseFile().renameTo(newFile);
        }
      }
      files.clear();
    }
    indexFilesLocked();
  }
}
