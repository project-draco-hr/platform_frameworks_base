{
synchronized (mLock) {
    for (    File f : mIntervalDirs) {
      f.mkdirs();
      if (!f.exists()) {
        throw new IllegalStateException("Failed to create directory " + f.getAbsolutePath());
      }
    }
    checkVersionLocked();
    final FilenameFilter backupFileFilter=new FilenameFilter(){
      @Override public boolean accept(      File dir,      String name){
        return !name.endsWith(".bak");
      }
    }
;
    for (int i=0; i < mSortedStatFiles.length; i++) {
      mSortedStatFiles[i]=new TimeSparseArray<>();
      File[] files=mIntervalDirs[i].listFiles(backupFileFilter);
      if (files != null) {
        if (DEBUG) {
          Slog.d(TAG,"Found " + files.length + " stat files for interval "+ i);
        }
        for (        File f : files) {
          final AtomicFile af=new AtomicFile(f);
          mSortedStatFiles[i].put(UsageStatsXml.parseBeginTime(af),af);
        }
      }
    }
  }
}
