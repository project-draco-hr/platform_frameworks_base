{
  int oldState=mPlaybackState == null ? 0 : mPlaybackState.getState();
  int newState=state == null ? 0 : state.getState();
  if (MediaSession.isActiveState(oldState) && newState == PlaybackState.STATE_PAUSED) {
    mLastActiveTime=SystemClock.elapsedRealtime();
  }
synchronized (mLock) {
    mPlaybackState=state;
  }
  mService.onSessionPlaystateChange(MediaSessionRecord.this,oldState,newState);
  mHandler.post(MessageHandler.MSG_UPDATE_PLAYBACK_STATE);
}
