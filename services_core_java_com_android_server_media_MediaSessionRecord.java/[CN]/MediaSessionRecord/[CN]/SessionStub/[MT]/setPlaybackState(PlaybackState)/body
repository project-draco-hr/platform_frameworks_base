{
  int oldState=mPlaybackState == null ? 0 : mPlaybackState.getState();
  int newState=state == null ? 0 : state.getState();
  if (isActiveState(oldState) && newState == PlaybackState.PLAYSTATE_PAUSED) {
    mLastActiveTime=SystemClock.elapsedRealtime();
  }
  mPlaybackState=state;
  mService.onSessionPlaystateChange(MediaSessionRecord.this,oldState,newState);
  mHandler.post(MessageHandler.MSG_UPDATE_PLAYBACK_STATE);
}
