{
  boolean typeChanged=type != mVolumeType;
switch (type) {
case MediaSession.PLAYBACK_TYPE_LOCAL:
    mVolumeType=type;
  int audioStream=arg1;
if (isValidStream(audioStream)) {
  mAudioStream=audioStream;
}
 else {
  Log.e(TAG,"Cannot set stream to " + audioStream + ". Using music stream");
  mAudioStream=AudioManager.STREAM_MUSIC;
}
break;
case MediaSession.PLAYBACK_TYPE_REMOTE:
mVolumeType=type;
mVolumeControlType=arg1;
mMaxVolume=arg2;
break;
default :
throw new IllegalArgumentException("Volume handling type " + type + " not recognized.");
}
if (typeChanged) {
mService.onSessionPlaybackTypeChanged(MediaSessionRecord.this);
}
}
