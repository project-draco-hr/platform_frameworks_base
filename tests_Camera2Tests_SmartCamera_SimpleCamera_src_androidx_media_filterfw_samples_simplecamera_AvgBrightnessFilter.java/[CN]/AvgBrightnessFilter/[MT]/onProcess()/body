{
  FrameImage2D inputImage=getConnectedInputPort("image").pullFrame().asFrameImage2D();
  float brightness;
  ByteBuffer inputBuffer=inputImage.lockBytes(Frame.MODE_READ);
  brightness=brightnessOperator(inputImage.getWidth(),inputImage.getHeight(),inputBuffer);
  inputImage.unlock();
  if (mLogVerbose)   Log.v(TAG,"contrastRatio: " + brightness);
  OutputPort brightnessPort=getConnectedOutputPort("brightnessRating");
  FrameValue brightnessOutFrame=brightnessPort.fetchAvailableFrame(null).asFrameValue();
  brightnessOutFrame.setValue(brightness);
  brightnessPort.pushFrame(brightnessOutFrame);
}
