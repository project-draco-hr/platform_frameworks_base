{
  mVCardType=vcardType;
  Log.w(LOG_TAG,"Should not use vCard 4.0 when building vCard. " + "It is not officially published yet.");
  mIsV30OrV40=VCardConfig.isVersion30(vcardType) || VCardConfig.isVersion40(vcardType);
  mShouldUseQuotedPrintable=VCardConfig.shouldUseQuotedPrintable(vcardType);
  mIsDoCoMo=VCardConfig.isDoCoMo(vcardType);
  mIsJapaneseMobilePhone=VCardConfig.needsToConvertPhoneticString(vcardType);
  mOnlyOneNoteFieldIsAvailable=VCardConfig.onlyOneNoteFieldIsAvailable(vcardType);
  mUsesAndroidProperty=VCardConfig.usesAndroidSpecificProperty(vcardType);
  mUsesDefactProperty=VCardConfig.usesDefactProperty(vcardType);
  mRefrainsQPToNameProperties=VCardConfig.shouldRefrainQPToNameProperties(vcardType);
  mAppendTypeParamName=VCardConfig.appendTypeParamName(vcardType);
  mNeedsToConvertPhoneticString=VCardConfig.needsToConvertPhoneticString(vcardType);
  mShouldAppendCharsetParam=!(VCardConfig.isVersion30(vcardType) && "UTF-8".equalsIgnoreCase(charset));
  if (VCardConfig.isDoCoMo(vcardType)) {
    if (!SHIFT_JIS.equalsIgnoreCase(charset)) {
      Log.w(LOG_TAG,"The charset \"" + charset + "\" is used while "+ SHIFT_JIS+ " is needed to be used.");
      if (TextUtils.isEmpty(charset)) {
        mCharset=SHIFT_JIS;
      }
 else {
        try {
          charset=CharsetUtils.charsetForVendor(charset).name();
        }
 catch (        UnsupportedCharsetException e) {
          Log.i(LOG_TAG,"Career-specific \"" + charset + "\" was not found (as usual). "+ "Use it as is.");
        }
        mCharset=charset;
      }
    }
 else {
      if (mIsDoCoMo) {
        try {
          charset=CharsetUtils.charsetForVendor(SHIFT_JIS,"docomo").name();
        }
 catch (        UnsupportedCharsetException e) {
          Log.e(LOG_TAG,"DoCoMo-specific SHIFT_JIS was not found. " + "Use SHIFT_JIS as is.");
          charset=SHIFT_JIS;
        }
      }
 else {
        try {
          charset=CharsetUtils.charsetForVendor(SHIFT_JIS).name();
        }
 catch (        UnsupportedCharsetException e) {
          Log.e(LOG_TAG,"Career-specific SHIFT_JIS was not found. " + "Use SHIFT_JIS as is.");
          charset=SHIFT_JIS;
        }
      }
      mCharset=charset;
    }
    mVCardCharsetParameter="CHARSET=" + SHIFT_JIS;
  }
 else {
    if (TextUtils.isEmpty(charset)) {
      Log.i(LOG_TAG,"Use the charset \"" + VCardConfig.DEFAULT_EXPORT_CHARSET + "\" for export.");
      mCharset=VCardConfig.DEFAULT_EXPORT_CHARSET;
      mVCardCharsetParameter="CHARSET=" + VCardConfig.DEFAULT_EXPORT_CHARSET;
    }
 else {
      try {
        charset=CharsetUtils.charsetForVendor(charset).name();
      }
 catch (      UnsupportedCharsetException e) {
        Log.i(LOG_TAG,"Career-specific \"" + charset + "\" was not found (as usual). "+ "Use it as is.");
      }
      mCharset=charset;
      mVCardCharsetParameter="CHARSET=" + charset;
    }
  }
  clear();
}
