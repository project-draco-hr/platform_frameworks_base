{
  int offset1=offset;
  int remainLength=count;
  if (buffer == null) {
    throw new IOException("buffer is null");
  }
  if ((offset | count) < 0 || count > buffer.length - offset) {
    throw new IndexOutOfBoundsException("index outof bound");
  }
  ensureOpen();
  mParent.ensureNotDone();
  if (count < mMaxPacketSize) {
    mArray.write(buffer,offset,count);
  }
 else {
    while (remainLength >= mMaxPacketSize) {
      mArray.write(buffer,offset1,mMaxPacketSize);
      offset1+=mMaxPacketSize;
      remainLength=count - offset1;
      mParent.continueOperation(true,false);
    }
    if (remainLength > 0) {
      mArray.write(buffer,offset1,remainLength);
    }
  }
}
