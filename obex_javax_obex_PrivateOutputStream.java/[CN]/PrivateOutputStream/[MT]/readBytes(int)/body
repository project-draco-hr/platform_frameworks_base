{
  if (output.size() > 0) {
    byte[] temp=output.toByteArray();
    output.reset();
    byte[] result=new byte[size];
    System.arraycopy(temp,0,result,0,size);
    if (temp.length != size) {
      output.write(temp,size,temp.length - size);
    }
    return result;
  }
 else {
    return null;
  }
}
