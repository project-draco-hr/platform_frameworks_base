{
  if (!hasPermission(permission.name)) {
    return PERMISSION_OPERATION_FAILURE;
  }
  int result=PERMISSION_OPERATION_SUCCESS;
  PermissionData permissionData=mPermissions.get(permission.name);
  if (permissionData.getGids() != NO_GIDS) {
    for (    int userId : permissionData.getUserIds()) {
      if (revokePermission(permission,userId) == PERMISSION_OPERATION_SUCCESS_GIDS_CHANGED) {
        result=PERMISSION_OPERATION_SUCCESS_GIDS_CHANGED;
        break;
      }
    }
  }
  mPermissions.remove(permission.name);
  return result;
}
