{
  if (!isCompatibleUserId(userId)) {
    return false;
  }
  if (!isGranted(userId)) {
    return false;
  }
  PermissionState userState=mUserStates.get(userId);
  userState.mGranted=false;
  if (userState.isDefault()) {
    mUserStates.remove(userId);
  }
  return true;
}
