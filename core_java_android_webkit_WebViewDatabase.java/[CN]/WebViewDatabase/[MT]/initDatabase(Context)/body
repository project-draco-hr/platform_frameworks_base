{
  try {
    mDatabase=context.openOrCreateDatabase(DATABASE_FILE,0,null);
  }
 catch (  SQLiteException e) {
    if (context.deleteDatabase(DATABASE_FILE)) {
      mDatabase=context.openOrCreateDatabase(DATABASE_FILE,0,null);
    }
  }
  mDatabase.enableWriteAheadLogging();
  if (mDatabase == null) {
    mInitialized=true;
    notify();
    return;
  }
  if (mDatabase.getVersion() != DATABASE_VERSION) {
    mDatabase.beginTransactionNonExclusive();
    try {
      upgradeDatabase();
      mDatabase.setTransactionSuccessful();
    }
  finally {
      mDatabase.endTransaction();
    }
  }
  mDatabase.setLockingEnabled(false);
}
