{
  if (mInitialized) {
    return;
  }
  try {
    mDatabase=context.openOrCreateDatabase(DATABASE_FILE,0,null);
  }
 catch (  SQLiteException e) {
    if (context.deleteDatabase(DATABASE_FILE)) {
      mDatabase=context.openOrCreateDatabase(DATABASE_FILE,0,null);
    }
  }
  if (mDatabase == null) {
    mInitialized=true;
    notify();
    return;
  }
  if (mDatabase.getVersion() != DATABASE_VERSION) {
    mDatabase.beginTransaction();
    try {
      upgradeDatabase();
      mDatabase.setTransactionSuccessful();
    }
  finally {
      mDatabase.endTransaction();
    }
  }
  mDatabase.setLockingEnabled(false);
  try {
    mCacheDatabase=context.openOrCreateDatabase(CACHE_DATABASE_FILE,0,null);
  }
 catch (  SQLiteException e) {
    if (context.deleteDatabase(CACHE_DATABASE_FILE)) {
      mCacheDatabase=context.openOrCreateDatabase(CACHE_DATABASE_FILE,0,null);
    }
  }
  if (mCacheDatabase == null) {
    mInitialized=true;
    notify();
    return;
  }
  if (mCacheDatabase.getVersion() != CACHE_DATABASE_VERSION) {
    mCacheDatabase.beginTransaction();
    try {
      upgradeCacheDatabase();
      bootstrapCacheDatabase();
      mCacheDatabase.setTransactionSuccessful();
    }
  finally {
      mCacheDatabase.endTransaction();
    }
    CacheManager.removeAllCacheFiles();
  }
  mCacheDatabase.execSQL("PRAGMA read_uncommitted = true;");
  mCacheDatabase.setLockingEnabled(false);
  mCacheInserter=new DatabaseUtils.InsertHelper(mCacheDatabase,"cache");
  mCacheUrlColIndex=mCacheInserter.getColumnIndex(CACHE_URL_COL);
  mCacheFilePathColIndex=mCacheInserter.getColumnIndex(CACHE_FILE_PATH_COL);
  mCacheLastModifyColIndex=mCacheInserter.getColumnIndex(CACHE_LAST_MODIFY_COL);
  mCacheETagColIndex=mCacheInserter.getColumnIndex(CACHE_ETAG_COL);
  mCacheExpiresColIndex=mCacheInserter.getColumnIndex(CACHE_EXPIRES_COL);
  mCacheExpiresStringColIndex=mCacheInserter.getColumnIndex(CACHE_EXPIRES_STRING_COL);
  mCacheMimeTypeColIndex=mCacheInserter.getColumnIndex(CACHE_MIMETYPE_COL);
  mCacheEncodingColIndex=mCacheInserter.getColumnIndex(CACHE_ENCODING_COL);
  mCacheHttpStatusColIndex=mCacheInserter.getColumnIndex(CACHE_HTTP_STATUS_COL);
  mCacheLocationColIndex=mCacheInserter.getColumnIndex(CACHE_LOCATION_COL);
  mCacheContentLengthColIndex=mCacheInserter.getColumnIndex(CACHE_CONTENTLENGTH_COL);
  mCacheContentDispositionColIndex=mCacheInserter.getColumnIndex(CACHE_CONTENTDISPOSITION_COL);
  mCacheCrossDomainColIndex=mCacheInserter.getColumnIndex(CACHE_CROSSDOMAIN_COL);
  mInitialized=true;
  notify();
}
