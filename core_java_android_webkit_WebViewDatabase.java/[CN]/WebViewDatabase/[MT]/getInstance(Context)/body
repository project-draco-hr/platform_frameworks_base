{
  if (mInstance == null) {
    mInstance=new WebViewDatabase();
    mDatabase=context.openOrCreateDatabase(DATABASE_FILE,0,null);
    if (mDatabase != null && mDatabase.getVersion() != DATABASE_VERSION) {
      mDatabase.beginTransaction();
      try {
        upgradeDatabase();
        bootstrapDatabase();
        mDatabase.setTransactionSuccessful();
      }
  finally {
        mDatabase.endTransaction();
      }
    }
    if (mDatabase != null) {
      mDatabase.setLockingEnabled(false);
    }
    mCacheDatabase=context.openOrCreateDatabase(CACHE_DATABASE_FILE,0,null);
    if (mCacheDatabase != null && mCacheDatabase.getVersion() != CACHE_DATABASE_VERSION) {
      mCacheDatabase.beginTransaction();
      try {
        upgradeCacheDatabase();
        bootstrapCacheDatabase();
        mCacheDatabase.setTransactionSuccessful();
      }
  finally {
        mCacheDatabase.endTransaction();
      }
    }
    if (mCacheDatabase != null) {
      mCacheInserter=new DatabaseUtils.InsertHelper(mCacheDatabase,"cache");
      mCacheUrlColIndex=mCacheInserter.getColumnIndex(CACHE_URL_COL);
      mCacheFilePathColIndex=mCacheInserter.getColumnIndex(CACHE_FILE_PATH_COL);
      mCacheLastModifyColIndex=mCacheInserter.getColumnIndex(CACHE_LAST_MODIFY_COL);
      mCacheETagColIndex=mCacheInserter.getColumnIndex(CACHE_ETAG_COL);
      mCacheExpiresColIndex=mCacheInserter.getColumnIndex(CACHE_EXPIRES_COL);
      mCacheMimeTypeColIndex=mCacheInserter.getColumnIndex(CACHE_MIMETYPE_COL);
      mCacheEncodingColIndex=mCacheInserter.getColumnIndex(CACHE_ENCODING_COL);
      mCacheHttpStatusColIndex=mCacheInserter.getColumnIndex(CACHE_HTTP_STATUS_COL);
      mCacheLocationColIndex=mCacheInserter.getColumnIndex(CACHE_LOCATION_COL);
      mCacheContentLengthColIndex=mCacheInserter.getColumnIndex(CACHE_CONTENTLENGTH_COL);
    }
  }
  return mInstance;
}
