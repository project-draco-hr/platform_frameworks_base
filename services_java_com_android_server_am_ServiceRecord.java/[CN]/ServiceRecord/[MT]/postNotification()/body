{
  final int appUid=appInfo.uid;
  final int appPid=app.pid;
  if (foregroundId != 0 && foregroundNoti != null) {
    final String localPackageName=packageName;
    final int localForegroundId=foregroundId;
    final Notification localForegroundNoti=foregroundNoti;
    ams.mHandler.post(new Runnable(){
      public void run(){
        NotificationManagerService nm=(NotificationManagerService)NotificationManager.getService();
        if (nm == null) {
          return;
        }
        try {
          int[] outId=new int[1];
          nm.enqueueNotificationInternal(localPackageName,appUid,appPid,null,localForegroundId,localForegroundNoti,outId);
        }
 catch (        RuntimeException e) {
          Slog.w(ActivityManagerService.TAG,"Error showing notification for service",e);
          ams.setServiceForeground(name,ServiceRecord.this,localForegroundId,null,true);
        }
      }
    }
);
  }
}
