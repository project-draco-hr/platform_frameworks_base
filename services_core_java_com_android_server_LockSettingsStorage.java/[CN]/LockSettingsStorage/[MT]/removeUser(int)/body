{
  SQLiteDatabase db=mOpenHelper.getWritableDatabase();
  final UserManager um=(UserManager)mContext.getSystemService(USER_SERVICE);
  final UserInfo parentInfo=um.getProfileParent(userId);
  if (parentInfo == null) {
synchronized (mFileWriteLock) {
      String name=getLockPasswordFilename(userId);
      File file=new File(name);
      if (file.exists()) {
        file.delete();
        mCache.putFile(name,null);
      }
      name=getLockPatternFilename(userId);
      file=new File(name);
      if (file.exists()) {
        file.delete();
        mCache.putFile(name,null);
      }
    }
  }
  try {
    db.beginTransaction();
    db.delete(TABLE,COLUMN_USERID + "='" + userId+ "'",null);
    db.setTransactionSuccessful();
    mCache.removeUser(userId);
  }
  finally {
    db.endTransaction();
  }
}
