{
  long ptr=mPtr;
  if (ptr == 0) {
    return ERROR_NO_INIT;
  }
  if (mStreamConfigGeneration != streamConfig.getGeneration()) {
    return ERROR_STALE_CONFIG;
  }
  if (nativeSetSurface(ptr,deviceId,streamConfig.getStreamId(),surface) == 0) {
    return SUCCESS;
  }
 else {
    return ERROR_UNKNOWN;
  }
}
