{
  if (isDispatchThread()) {
    throw new Error();
  }
  final Toolkit toolkit=Toolkit.getDefaultToolkit();
  final Object notifier=new Object();
  InvocationEvent event=new InvocationEvent(toolkit,runnable,notifier,true);
synchronized (notifier) {
    toolkit.getSystemEventQueueImpl().postEvent(event);
    notifier.wait();
  }
  Exception exception=event.getException();
  if (exception != null) {
    throw new InvocationTargetException(exception);
  }
}
