{
  mTouchExcludeRegion.set(mBaseDisplayRect);
  WindowList windows=getWindowList();
  for (int i=windows.size() - 1; i >= 0; --i) {
    final WindowState win=windows.get(i);
    final Task task=win.getTask();
    if (win.isVisibleLw() && task != null && task != focusedTask) {
      mTmpRect.set(win.mVisibleFrame);
      mTmpRect.intersect(win.mVisibleInsets);
      mTouchExcludeRegion.op(mTmpRect,Region.Op.DIFFERENCE);
    }
  }
  if (mTapDetector != null) {
    mTapDetector.setTouchExcludeRegion(mTouchExcludeRegion);
  }
}
