{
  int x=mContentRect.centerX() - mPopup.getWidth() / 2;
  int y;
  if (mContentRect.top > mPopup.getHeight()) {
    y=mContentRect.top - mPopup.getHeight();
    mOverflowDirection=FloatingToolbarPopup.OVERFLOW_DIRECTION_UP;
  }
 else   if (mContentRect.top > getEstimatedToolbarHeight(mContext)) {
    y=mContentRect.top - getEstimatedToolbarHeight(mContext);
    mOverflowDirection=FloatingToolbarPopup.OVERFLOW_DIRECTION_DOWN;
  }
 else {
    y=mContentRect.bottom;
    mOverflowDirection=FloatingToolbarPopup.OVERFLOW_DIRECTION_DOWN;
  }
  mCoordinates.set(x,y);
}
