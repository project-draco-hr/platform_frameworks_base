{
  mOverflowButton.setEnabled(true);
  mOverflowPanel.awakenScrollBars();
  if (mIsOverflowOpen) {
    final Size containerSize=mOverflowPanelSize;
    setSize(mContentContainer,containerSize);
    mMainPanel.setAlpha(0);
    mMainPanel.setVisibility(View.INVISIBLE);
    mOverflowPanel.setAlpha(1);
    mOverflowPanel.setVisibility(View.VISIBLE);
    mOverflowButton.setImageDrawable(mArrow);
    mOverflowButton.setContentDescription(mContext.getString(R.string.floating_toolbar_close_overflow_description));
    if (isRTL()) {
      mContentContainer.setX(mMarginHorizontal);
      mMainPanel.setX(0);
      mOverflowButton.setX(containerSize.getWidth() - mOverflowButtonSize.getWidth());
      mOverflowPanel.setX(0);
    }
 else {
      mContentContainer.setX(mPopupWindow.getWidth() - containerSize.getWidth() - mMarginHorizontal);
      mMainPanel.setX(-mContentContainer.getX());
      mOverflowButton.setX(0);
      mOverflowPanel.setX(0);
    }
    if (mOpenOverflowUpwards) {
      mContentContainer.setY(mMarginVertical);
      mMainPanel.setY(containerSize.getHeight() - mContentContainer.getHeight());
      mOverflowButton.setY(containerSize.getHeight() - mOverflowButtonSize.getHeight());
      mOverflowPanel.setY(0);
    }
 else {
      mContentContainer.setY(mMarginVertical);
      mMainPanel.setY(0);
      mOverflowButton.setY(0);
      mOverflowPanel.setY(mOverflowButtonSize.getHeight());
    }
  }
 else {
    final Size containerSize=mMainPanelSize;
    setSize(mContentContainer,containerSize);
    mMainPanel.setAlpha(1);
    mMainPanel.setVisibility(View.VISIBLE);
    mOverflowPanel.setAlpha(0);
    mOverflowPanel.setVisibility(View.INVISIBLE);
    mOverflowButton.setImageDrawable(mOverflow);
    mOverflowButton.setContentDescription(mContext.getString(R.string.floating_toolbar_open_overflow_description));
    if (hasOverflow()) {
      if (isRTL()) {
        mContentContainer.setX(mMarginHorizontal);
        mMainPanel.setX(0);
        mOverflowButton.setX(0);
        mOverflowPanel.setX(0);
      }
 else {
        mContentContainer.setX(mPopupWindow.getWidth() - containerSize.getWidth() - mMarginHorizontal);
        mMainPanel.setX(0);
        mOverflowButton.setX(containerSize.getWidth() - mOverflowButtonSize.getWidth());
        mOverflowPanel.setX(containerSize.getWidth() - mOverflowPanelSize.getWidth());
      }
      if (mOpenOverflowUpwards) {
        mContentContainer.setY(mMarginVertical + mOverflowPanelSize.getHeight() - containerSize.getHeight());
        mMainPanel.setY(0);
        mOverflowButton.setY(0);
        mOverflowPanel.setY(containerSize.getHeight() - mOverflowPanelSize.getHeight());
      }
 else {
        mContentContainer.setY(mMarginVertical);
        mMainPanel.setY(0);
        mOverflowButton.setY(0);
        mOverflowPanel.setY(mOverflowButtonSize.getHeight());
      }
    }
 else {
      mContentContainer.setX(mMarginHorizontal);
      mContentContainer.setY(mMarginVertical);
      mMainPanel.setX(0);
      mMainPanel.setY(0);
    }
  }
}
