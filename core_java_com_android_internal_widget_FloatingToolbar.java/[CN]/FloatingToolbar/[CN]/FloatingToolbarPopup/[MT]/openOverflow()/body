{
  Preconditions.checkState(mMainPanel != null);
  Preconditions.checkState(mOverflowPanel != null);
  mMainPanel.fadeOut(true);
  Size overflowPanelSize=mOverflowPanel.measure();
  final int targetWidth=overflowPanelSize.getWidth();
  final int targetHeight=overflowPanelSize.getHeight();
  final boolean morphUpwards=(mOverflowDirection == OVERFLOW_DIRECTION_UP);
  final int startWidth=mContentContainer.getWidth();
  final int startHeight=mContentContainer.getHeight();
  final float startY=mContentContainer.getY();
  final float left=mContentContainer.getX();
  final float right=left + mContentContainer.getWidth();
  final boolean rtl=mContentContainer.getLayoutDirection() == View.LAYOUT_DIRECTION_RTL;
  Animation widthAnimation=new Animation(){
    @Override protected void applyTransformation(    float interpolatedTime,    Transformation t){
      ViewGroup.LayoutParams params=mContentContainer.getLayoutParams();
      int deltaWidth=(int)(interpolatedTime * (targetWidth - startWidth));
      params.width=startWidth + deltaWidth;
      mContentContainer.setLayoutParams(params);
      if (rtl) {
        mContentContainer.setX(left);
      }
 else {
        mContentContainer.setX(right - mContentContainer.getWidth());
      }
    }
  }
;
  Animation heightAnimation=new Animation(){
    @Override protected void applyTransformation(    float interpolatedTime,    Transformation t){
      ViewGroup.LayoutParams params=mContentContainer.getLayoutParams();
      int deltaHeight=(int)(interpolatedTime * (targetHeight - startHeight));
      params.height=startHeight + deltaHeight;
      mContentContainer.setLayoutParams(params);
      if (morphUpwards) {
        float y=startY - (mContentContainer.getHeight() - startHeight);
        mContentContainer.setY(y);
      }
    }
  }
;
  widthAnimation.setDuration(240);
  heightAnimation.setDuration(180);
  heightAnimation.setStartOffset(60);
  mOpenOverflowAnimation.getAnimations().clear();
  mOpenOverflowAnimation.setAnimationListener(mOnOverflowOpened);
  mOpenOverflowAnimation.addAnimation(widthAnimation);
  mOpenOverflowAnimation.addAnimation(heightAnimation);
  mContentContainer.startAnimation(mOpenOverflowAnimation);
}
