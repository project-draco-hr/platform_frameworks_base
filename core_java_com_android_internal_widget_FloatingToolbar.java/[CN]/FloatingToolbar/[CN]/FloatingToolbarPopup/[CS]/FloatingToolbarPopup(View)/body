{
  mParent=Preconditions.checkNotNull(parent);
  mContentContainer=createContentContainer(parent.getContext());
  mPopupWindow=createPopupWindow(mContentContainer);
  mShowAnimation=createGrowFadeInFromBottom(mContentContainer);
  mDismissAnimation=createShrinkFadeOutFromBottomAnimation(mContentContainer,new AnimatorListenerAdapter(){
    @Override public void onAnimationEnd(    Animator animation){
      mPopupWindow.dismiss();
      setMainPanelAsContent();
    }
  }
);
  mHideAnimation=createShrinkFadeOutFromBottomAnimation(mContentContainer,new AnimatorListenerAdapter(){
    @Override public void onAnimationEnd(    Animator animation){
      mPopupWindow.dismiss();
    }
  }
);
  mPopupWindow.getContentView().getRootView().getViewTreeObserver().addOnComputeInternalInsetsListener(new ViewTreeObserver.OnComputeInternalInsetsListener(){
    public void onComputeInternalInsets(    ViewTreeObserver.InternalInsetsInfo info){
      info.contentInsets.setEmpty();
      info.visibleInsets.setEmpty();
      info.touchableRegion.set(mTouchableRegion);
      info.setTouchableInsets(ViewTreeObserver.InternalInsetsInfo.TOUCHABLE_INSETS_REGION);
    }
  }
);
  mMarginHorizontal=parent.getResources().getDimensionPixelSize(R.dimen.floating_toolbar_horizontal_margin);
  mMarginVertical=parent.getResources().getDimensionPixelSize(R.dimen.floating_toolbar_vertical_margin);
}
