{
  mParent=Preconditions.checkNotNull(parent);
  mContentContainer=createContentContainer(parent.getContext());
  mPopupWindow=createPopupWindow(mContentContainer);
  mGrowFadeInFromBottomAnimation=createGrowFadeInFromBottom(mContentContainer);
  mShrinkFadeOutFromBottomAnimation=createShrinkFadeOutFromBottomAnimation(mContentContainer,new AnimatorListenerAdapter(){
    @Override public void onAnimationEnd(    Animator animation){
      mPopupWindow.dismiss();
      mDismissAnimating=false;
      setMainPanelAsContent();
    }
  }
);
  mPopupWindow.getContentView().getRootView().getViewTreeObserver().addOnComputeInternalInsetsListener(new ViewTreeObserver.OnComputeInternalInsetsListener(){
    public void onComputeInternalInsets(    ViewTreeObserver.InternalInsetsInfo info){
      info.contentInsets.setEmpty();
      info.visibleInsets.setEmpty();
      info.touchableRegion.set(mTouchableRegion);
      info.setTouchableInsets(ViewTreeObserver.InternalInsetsInfo.TOUCHABLE_INSETS_REGION);
    }
  }
);
  mPadding=parent.getResources().getDimensionPixelSize(R.dimen.floating_toolbar_margin);
}
