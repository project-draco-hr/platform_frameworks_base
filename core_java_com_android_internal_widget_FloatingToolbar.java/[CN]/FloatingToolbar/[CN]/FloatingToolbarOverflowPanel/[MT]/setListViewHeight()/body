{
  int itemHeight=getEstimatedToolbarHeight(mContentView.getContext());
  int height=mListView.getAdapter().getCount() * itemHeight;
  int maxHeight=mContentView.getContext().getResources().getDimensionPixelSize(R.dimen.floating_toolbar_maximum_overflow_height);
  int minHeight=mContentView.getContext().getResources().getDimensionPixelSize(R.dimen.floating_toolbar_minimum_overflow_height);
  int availableHeight=mSuggestedHeight - (mSuggestedHeight % itemHeight) - itemHeight;
  ViewGroup.LayoutParams params=mListView.getLayoutParams();
  if (availableHeight >= minHeight) {
    params.height=Math.min(Math.min(availableHeight,maxHeight),height);
  }
 else {
    params.height=Math.min(maxHeight,height);
  }
  mListView.setLayoutParams(params);
}
