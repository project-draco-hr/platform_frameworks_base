{
  mCloseOverflow=Preconditions.checkNotNull(closeOverflow);
  mSuggestedHeight=getScreenHeight(context);
  mContentView=new LinearLayout(context);
  mContentView.setOrientation(LinearLayout.VERTICAL);
  mViewFader=new ViewFader(mContentView);
  mBackButton=LayoutInflater.from(context).inflate(R.layout.floating_popup_close_overflow_button,null);
  mBackButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      mCloseOverflow.run();
    }
  }
);
  mBackButtonContainer=new LinearLayout(context);
  mBackButtonContainer.addView(mBackButton);
  mListView=createOverflowListView();
  mListView.setOnItemClickListener(new AdapterView.OnItemClickListener(){
    @Override public void onItemClick(    AdapterView<?> parent,    View view,    int position,    long id){
      MenuItem menuItem=(MenuItem)mListView.getAdapter().getItem(position);
      if (mOnMenuItemClickListener != null) {
        mOnMenuItemClickListener.onMenuItemClick(menuItem);
      }
    }
  }
);
  mContentView.addView(mListView);
  mContentView.addView(mBackButtonContainer);
  mListViewItemWidthCalculator=createOverflowMenuItemButton(context);
  mListViewItemWidthCalculator.setLayoutParams(new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,ViewGroup.LayoutParams.MATCH_PARENT));
}
