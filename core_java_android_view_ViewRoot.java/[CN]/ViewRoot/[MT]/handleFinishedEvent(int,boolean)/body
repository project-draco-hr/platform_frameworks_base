{
  final KeyEvent event=(KeyEvent)retrievePendingEvent(seq);
  if (DEBUG_IMF)   Log.v(TAG,"IME finished event: seq=" + seq + " handled="+ handled+ " event="+ event);
  if (event != null) {
    final boolean sendDone=seq >= 0;
    if (!handled) {
      deliverKeyEventToViewHierarchy(event,sendDone);
      return;
    }
 else     if (sendDone) {
      if (LOCAL_LOGV)       Log.v("ViewRoot","Telling window manager key is finished");
      try {
        sWindowSession.finishKey(mWindow);
      }
 catch (      RemoteException e) {
      }
    }
  }
}
