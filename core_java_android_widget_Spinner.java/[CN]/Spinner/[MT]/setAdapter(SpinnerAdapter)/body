{
  super.setAdapter(adapter);
  mRecycler.clear();
  final int targetSdkVersion=mContext.getApplicationInfo().targetSdkVersion;
  if (targetSdkVersion >= Build.VERSION_CODES.LOLLIPOP && adapter != null && adapter.getViewTypeCount() != 1) {
    throw new IllegalArgumentException("Spinner adapter view type count must be 1");
  }
  if (mPopup != null) {
    mPopup.setAdapter(new DropDownAdapter(adapter,mPopupContext.getTheme()));
  }
 else {
    mTempAdapter=new DropDownAdapter(adapter,mPopupContext.getTheme());
  }
}
