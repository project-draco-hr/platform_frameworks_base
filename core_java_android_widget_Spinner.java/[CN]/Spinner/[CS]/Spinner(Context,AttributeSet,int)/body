{
  super(context,attrs,defStyle);
  TypedArray a=context.obtainStyledAttributes(attrs,com.android.internal.R.styleable.Spinner,defStyle,0);
  final int mode=a.getInt(com.android.internal.R.styleable.Spinner_spinnerMode,MODE_DIALOG);
switch (mode) {
case MODE_DIALOG:
{
      mPopup=new DialogPopup();
      break;
    }
case MODE_DROPDOWN:
{
    final int hintResource=a.getResourceId(com.android.internal.R.styleable.Spinner_popupPromptView,0);
    DropdownPopup popup=new DropdownPopup(context,attrs,defStyle,hintResource);
    popup.setBackgroundDrawable(a.getDrawable(com.android.internal.R.styleable.Spinner_popupBackground));
    popup.setVerticalOffset(a.getDimensionPixelOffset(com.android.internal.R.styleable.Spinner_dropDownVerticalOffset,0));
    popup.setHorizontalOffset(a.getDimensionPixelOffset(com.android.internal.R.styleable.Spinner_dropDownHorizontalOffset,0));
    mPopup=popup;
    break;
  }
}
mPopup.setPromptText(a.getString(com.android.internal.R.styleable.Spinner_prompt));
a.recycle();
if (mTempAdapter != null) {
mPopup.setAdapter(mTempAdapter);
mTempAdapter=null;
}
}
