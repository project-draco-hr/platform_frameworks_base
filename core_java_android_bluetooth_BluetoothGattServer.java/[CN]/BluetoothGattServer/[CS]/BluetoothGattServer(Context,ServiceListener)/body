{
  mContext=context;
  mServiceListener=l;
  mAdapter=BluetoothAdapter.getDefaultAdapter();
  mServices=new ArrayList<BluetoothGattService>();
  IBinder b=ServiceManager.getService(BluetoothAdapter.BLUETOOTH_MANAGER_SERVICE);
  if (b != null) {
    IBluetoothManager mgr=IBluetoothManager.Stub.asInterface(b);
    try {
      mgr.registerStateChangeCallback(mBluetoothStateChangeCallback);
    }
 catch (    RemoteException re) {
      Log.e(TAG,"Unable to register BluetoothStateChangeCallback",re);
    }
  }
 else {
    Log.e(TAG,"Unable to get BluetoothManager interface.");
    throw new RuntimeException("BluetoothManager inactive");
  }
  if (mAdapter.isEnabled()) {
    if (!context.bindService(new Intent(IBluetoothGatt.class.getName()),mConnection,0)) {
      Log.e(TAG,"Could not bind to Bluetooth Gatt Service");
    }
  }
}
