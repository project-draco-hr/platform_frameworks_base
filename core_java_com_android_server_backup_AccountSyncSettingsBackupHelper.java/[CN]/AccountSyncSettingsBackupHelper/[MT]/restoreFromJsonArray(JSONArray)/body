{
  HashSet<Account> currentAccounts=getAccounts();
  JSONArray unaddedAccountsJSONArray=new JSONArray();
  for (int i=0; i < accountJSONArray.length(); i++) {
    JSONObject accountJSON=(JSONObject)accountJSONArray.get(i);
    String accountName=accountJSON.getString(KEY_ACCOUNT_NAME);
    String accountType=accountJSON.getString(KEY_ACCOUNT_TYPE);
    Account account=null;
    try {
      account=new Account(accountName,accountType);
    }
 catch (    IllegalArgumentException iae) {
      continue;
    }
    if (currentAccounts.contains(account)) {
      if (DEBUG)       Log.i(TAG,"Restoring Sync Settings for" + accountName);
      restoreExistingAccountSyncSettingsFromJSON(accountJSON);
    }
 else {
      unaddedAccountsJSONArray.put(accountJSON);
    }
  }
  if (unaddedAccountsJSONArray.length() > 0) {
    try (FileOutputStream fOutput=new FileOutputStream(STASH_FILE)){
      String jsonString=unaddedAccountsJSONArray.toString();
      DataOutputStream out=new DataOutputStream(fOutput);
      out.writeUTF(jsonString);
    }
 catch (    IOException ioe) {
      Log.e(TAG,"unable to write the sync settings to the stash file",ioe);
    }
  }
 else {
    File stashFile=new File(STASH_FILE);
    if (stashFile.exists())     stashFile.delete();
  }
}
