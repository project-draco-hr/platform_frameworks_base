{
  for (int sy=y, lineOff=off; sy < y + h; sy++, lineOff+=scansize) {
    for (int sx=x, idx=0; sx < x + w; sx++, idx++) {
      pixels[lineOff + idx]=filterRGB(sx,sy,pixels[lineOff + idx]);
    }
  }
  consumer.setPixels(x,y,w,h,ColorModel.getRGBdefault(),pixels,off,scansize);
}
