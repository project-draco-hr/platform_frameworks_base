{
  ByteBuffer result=null;
  boolean convertWholeBuffer=(byteCount < 0);
  if (input instanceof ByteBuffer) {
    ByteBuffer input2=(ByteBuffer)input;
    if (convertWholeBuffer) {
      byteCount=input2.limit();
    }
    result=ByteBuffer.allocate(byteCount).order(input2.order());
    int position=input2.position();
    for (int i=0; i < byteCount; i++) {
      result.put(input2.get());
    }
    input2.position(position);
  }
 else   if (input instanceof CharBuffer) {
    CharBuffer input2=(CharBuffer)input;
    if (convertWholeBuffer) {
      byteCount=input2.limit() * 2;
    }
    result=ByteBuffer.allocate(byteCount).order(input2.order());
    CharBuffer result2=result.asCharBuffer();
    int position=input2.position();
    for (int i=0; i < byteCount / 2; i++) {
      result2.put(input2.get());
    }
    input2.position(position);
  }
 else   if (input instanceof ShortBuffer) {
    ShortBuffer input2=(ShortBuffer)input;
    if (convertWholeBuffer) {
      byteCount=input2.limit() * 2;
    }
    result=ByteBuffer.allocate(byteCount).order(input2.order());
    ShortBuffer result2=result.asShortBuffer();
    int position=input2.position();
    for (int i=0; i < byteCount / 2; i++) {
      result2.put(input2.get());
    }
    input2.position(position);
  }
 else   if (input instanceof IntBuffer) {
    IntBuffer input2=(IntBuffer)input;
    if (convertWholeBuffer) {
      byteCount=input2.limit() * 4;
    }
    result=ByteBuffer.allocate(byteCount).order(input2.order());
    IntBuffer result2=result.asIntBuffer();
    int position=input2.position();
    for (int i=0; i < byteCount / 4; i++) {
      result2.put(input2.get());
    }
    input2.position(position);
  }
 else   if (input instanceof FloatBuffer) {
    FloatBuffer input2=(FloatBuffer)input;
    if (convertWholeBuffer) {
      byteCount=input2.limit() * 4;
    }
    result=ByteBuffer.allocate(byteCount).order(input2.order());
    FloatBuffer result2=result.asFloatBuffer();
    int position=input2.position();
    for (int i=0; i < byteCount / 4; i++) {
      result2.put(input2.get());
    }
    input2.position(position);
  }
 else   if (input instanceof DoubleBuffer) {
    DoubleBuffer input2=(DoubleBuffer)input;
    if (convertWholeBuffer) {
      byteCount=input2.limit() * 8;
    }
    result=ByteBuffer.allocate(byteCount).order(input2.order());
    DoubleBuffer result2=result.asDoubleBuffer();
    int position=input2.position();
    for (int i=0; i < byteCount / 8; i++) {
      result2.put(input2.get());
    }
    input2.position(position);
  }
 else   if (input instanceof LongBuffer) {
    LongBuffer input2=(LongBuffer)input;
    if (convertWholeBuffer) {
      byteCount=input2.limit() * 8;
    }
    result=ByteBuffer.allocate(byteCount).order(input2.order());
    LongBuffer result2=result.asLongBuffer();
    int position=input2.position();
    for (int i=0; i < byteCount / 8; i++) {
      result2.put(input2.get());
    }
    input2.position(position);
  }
 else {
    throw new RuntimeException("Unimplemented Buffer subclass.");
  }
  result.rewind();
  result.order(ByteOrder.nativeOrder());
  return result;
}
