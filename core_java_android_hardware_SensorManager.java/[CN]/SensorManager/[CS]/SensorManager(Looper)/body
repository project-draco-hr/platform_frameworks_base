{
  mSensorService=ISensorService.Stub.asInterface(ServiceManager.getService(Context.SENSOR_SERVICE));
  mMainLooper=mainLooper;
synchronized (sListeners) {
    if (!sSensorModuleInitialized) {
      sSensorModuleInitialized=true;
      nativeClassInit();
      sWindowManager=IWindowManager.Stub.asInterface(ServiceManager.getService("window"));
      if (sWindowManager != null) {
        try {
          sRotation=sWindowManager.watchRotation(new IRotationWatcher.Stub(){
            public void onRotationChanged(            int rotation){
              SensorManager.this.onRotationChanged(rotation);
            }
          }
);
        }
 catch (        RemoteException e) {
        }
      }
      sensors_module_init();
      final ArrayList<Sensor> fullList=sFullSensorsList;
      int i=0;
      do {
        Sensor sensor=new Sensor();
        i=sensors_module_get_next_sensor(sensor,i);
        if (i >= 0) {
          Log.d(TAG,"found sensor: " + sensor.getName() + ", handle="+ sensor.getHandle());
          sensor.setLegacyType(getLegacySensorType(sensor.getType()));
          fullList.add(sensor);
          sHandleToSensor.append(sensor.getHandle(),sensor);
        }
      }
 while (i > 0);
      sSensorThread=new SensorThread();
    }
  }
}
