{
  if (listener == null) {
    return;
  }
  LegacyListener legacyListener=null;
synchronized (mLegacyListenersMap) {
    legacyListener=mLegacyListenersMap.get(listener);
  }
  if (legacyListener != null) {
    if ((sensors & legacyType) != 0) {
      Sensor sensor=getDefaultSensor(type);
      if (sensor != null) {
        if (legacyListener.unregisterSensor(legacyType)) {
          unregisterListener(legacyListener,sensor);
synchronized (sListeners) {
            boolean found=false;
            for (            ListenerDelegate i : sListeners) {
              if (i.getListener() == legacyListener) {
                found=true;
                break;
              }
            }
            if (!found) {
synchronized (mLegacyListenersMap) {
                mLegacyListenersMap.remove(listener);
              }
            }
          }
        }
      }
    }
  }
}
