{
  Rect magnifiedFrame=mTempRect;
  mMagnifiedBounds.getBounds(magnifiedFrame);
  MagnificationSpec spec=mCurrentMagnificationSpec;
  final float oldScale=spec.scale;
  final float oldCenterX=(-spec.offsetX + magnifiedFrame.width() / 2) / oldScale;
  final float oldCenterY=(-spec.offsetY + magnifiedFrame.height() / 2) / oldScale;
  final float normPivotX=(-spec.offsetX + pivotX) / oldScale;
  final float normPivotY=(-spec.offsetY + pivotY) / oldScale;
  final float offsetX=(oldCenterX - normPivotX) * (oldScale / scale);
  final float offsetY=(oldCenterY - normPivotY) * (oldScale / scale);
  final float centerX=normPivotX + offsetX;
  final float centerY=normPivotY + offsetY;
  setScaleAndMagnifiedRegionCenter(scale,centerX,centerY,animate);
}
