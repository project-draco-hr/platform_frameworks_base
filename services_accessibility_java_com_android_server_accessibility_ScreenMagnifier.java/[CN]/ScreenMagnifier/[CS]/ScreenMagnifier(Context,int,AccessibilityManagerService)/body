{
  mContext=context;
  mWindowManager=IWindowManager.Stub.asInterface(ServiceManager.getService("window"));
  mAms=service;
  mLongAnimationDuration=context.getResources().getInteger(com.android.internal.R.integer.config_longAnimTime);
  mTapDistanceSlop=ViewConfiguration.get(context).getScaledTouchSlop();
  mMultiTapDistanceSlop=ViewConfiguration.get(context).getScaledDoubleTapSlop();
  mDetectingStateHandler=new DetectingStateHandler();
  mStateViewportDraggingHandler=new StateViewportDraggingHandler();
  mMagnifiedContentInteractonStateHandler=new MagnifiedContentInteractonStateHandler(context);
  mMagnificationController=new MagnificationController(mLongAnimationDuration);
  mScreenStateObserver=new ScreenStateObserver(context,mMagnificationController);
  try {
    mWindowManager.setMagnificationCallbacks(this);
  }
 catch (  RemoteException re) {
  }
  transitionToState(STATE_DETECTING);
}
