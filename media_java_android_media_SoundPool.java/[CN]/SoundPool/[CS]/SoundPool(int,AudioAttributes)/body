{
  if (native_setup(new WeakReference<SoundPool>(this),maxStreams,attributes) != 0) {
    throw new RuntimeException("Native setup failed");
  }
  mLock=new Object();
  mAttributes=attributes;
  IBinder b=ServiceManager.getService(Context.APP_OPS_SERVICE);
  mAppOps=IAppOpsService.Stub.asInterface(b);
  updateAppOpsPlayAudio();
  mAppOpsCallback=new IAppOpsCallback.Stub(){
    public void opChanged(    int op,    int uid,    String packageName){
synchronized (mLock) {
        if (op == AppOpsManager.OP_PLAY_AUDIO) {
          updateAppOpsPlayAudio();
        }
      }
    }
  }
;
  try {
    mAppOps.startWatchingMode(AppOpsManager.OP_PLAY_AUDIO,ActivityThread.currentPackageName(),mAppOpsCallback);
  }
 catch (  RemoteException e) {
    mHasAppOpsPlayAudio=false;
  }
}
