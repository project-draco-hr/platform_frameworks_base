{
  if (native_setup(new WeakReference(this),maxStreams,streamType,srcQuality) != 0) {
    throw new RuntimeException("Native setup failed");
  }
  mLock=new Object();
  Looper looper;
  if ((looper=Looper.myLooper()) != null) {
    mEventHandler=new EventHandler(this,looper);
  }
 else   if ((looper=Looper.getMainLooper()) != null) {
    mEventHandler=new EventHandler(this,looper);
  }
 else {
    mEventHandler=null;
  }
}
