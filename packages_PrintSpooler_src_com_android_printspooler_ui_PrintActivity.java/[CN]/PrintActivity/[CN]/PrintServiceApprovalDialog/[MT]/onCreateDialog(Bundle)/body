{
  super.onCreateDialog(savedInstanceState);
  mApprovedServices=new ApprovedPrintServices(getActivity());
  PackageManager packageManager=getActivity().getPackageManager();
  CharSequence serviceLabel;
  try {
    ComponentName printService=getArguments().getParcelable(PRINTSERVICE_KEY);
    serviceLabel=packageManager.getApplicationInfo(printService.getPackageName(),0).loadLabel(packageManager);
  }
 catch (  NameNotFoundException e) {
    serviceLabel=null;
  }
  AlertDialog.Builder builder=new AlertDialog.Builder(getActivity());
  builder.setTitle(getString(R.string.print_service_security_warning_title,serviceLabel)).setMessage(getString(R.string.print_service_security_warning_summary,serviceLabel)).setPositiveButton(android.R.string.ok,new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int id){
      ComponentName printService=getArguments().getParcelable(PRINTSERVICE_KEY);
      mApprovedServices.unregisterChangeListener(PrintServiceApprovalDialog.this);
      mApprovedServices.addApprovedService(printService);
      ((PrintActivity)getActivity()).confirmPrint();
    }
  }
).setNegativeButton(android.R.string.cancel,null);
  return builder.create();
}
