{
  if (mShowDestinationPrompt) {
    if (convertView == null) {
      convertView=getLayoutInflater().inflate(R.layout.printer_dropdown_prompt,parent,false);
      hadPromptView=true;
    }
    return convertView;
  }
 else {
    if (hadPromptView || convertView == null) {
      convertView=getLayoutInflater().inflate(R.layout.printer_dropdown_item,parent,false);
    }
  }
  CharSequence title=null;
  CharSequence subtitle=null;
  Drawable icon=null;
  if (mPrinterHolders.isEmpty()) {
    if (position == 0 && getPdfPrinter() != null) {
      PrinterHolder printerHolder=(PrinterHolder)getItem(position);
      title=printerHolder.printer.getName();
      icon=getResources().getDrawable(R.drawable.ic_menu_savetopdf,null);
    }
 else     if (position == 1) {
      title=getMoreItemTitle();
    }
  }
 else {
    if (position == 1 && getPdfPrinter() != null) {
      PrinterHolder printerHolder=(PrinterHolder)getItem(position);
      title=printerHolder.printer.getName();
      icon=getResources().getDrawable(R.drawable.ic_menu_savetopdf,null);
    }
 else     if (position == getCount() - 1) {
      title=getMoreItemTitle();
    }
 else {
      PrinterHolder printerHolder=(PrinterHolder)getItem(position);
      PrinterInfo printInfo=printerHolder.printer;
      title=printInfo.getName();
      icon=printInfo.loadIcon(PrintActivity.this);
      subtitle=printInfo.getDescription();
    }
  }
  TextView titleView=(TextView)convertView.findViewById(R.id.title);
  titleView.setText(title);
  TextView subtitleView=(TextView)convertView.findViewById(R.id.subtitle);
  if (!TextUtils.isEmpty(subtitle)) {
    subtitleView.setText(subtitle);
    subtitleView.setVisibility(View.VISIBLE);
  }
 else {
    subtitleView.setText(null);
    subtitleView.setVisibility(View.GONE);
  }
  ImageView iconView=(ImageView)convertView.findViewById(R.id.icon);
  if (icon != null) {
    iconView.setVisibility(View.VISIBLE);
    if (!isEnabled(position)) {
      icon.mutate();
      TypedValue value=new TypedValue();
      getTheme().resolveAttribute(android.R.attr.disabledAlpha,value,true);
      icon.setAlpha((int)(value.getFloat() * 255));
    }
    iconView.setImageDrawable(icon);
  }
 else {
    iconView.setVisibility(View.INVISIBLE);
  }
  return convertView;
}
