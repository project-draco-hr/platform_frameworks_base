{
switch (mState) {
case STATE_UPDATE_FAILED:
{
      if (canUpdateDocument()) {
        updateDocument(true,true);
        ensurePreviewUiShown();
        mState=STATE_CONFIGURING;
        updateOptionsUi();
      }
    }
  break;
case STATE_CREATE_FILE_FAILED:
{
  mState=STATE_CONFIGURING;
  ensurePreviewUiShown();
  updateOptionsUi();
}
break;
}
}
