{
  if (!clearLastError && mPrintedDocument.hasUpdateError()) {
    return false;
  }
  if (clearLastError && mPrintedDocument.hasUpdateError()) {
    mPrintedDocument.clearUpdateError();
  }
  if (mRequestedPages != null && mRequestedPages.length > 0) {
    final PageRange[] pages;
    if (preview) {
      final int firstPage=mRequestedPages[0].getStart();
      pages=new PageRange[]{new PageRange(firstPage,firstPage)};
    }
 else {
      pages=mRequestedPages;
    }
    final boolean willUpdate=mPrintedDocument.update(mPrintJob.getAttributes(),pages,preview);
    if (willUpdate) {
      mProgressMessageController.post();
      return true;
    }
  }
  return false;
}
