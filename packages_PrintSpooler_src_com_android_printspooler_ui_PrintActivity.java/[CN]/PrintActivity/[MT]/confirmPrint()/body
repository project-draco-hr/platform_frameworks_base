{
  setState(STATE_PRINT_CONFIRMED);
  MetricsLogger.count(this,"print_confirmed",1);
  updateOptionsUi();
  addCurrentPrinterToHistory();
  setUserPrinted();
  updateSelectedPagesFromPreview();
  updateSelectedPagesFromTextField();
  mPrintPreviewController.closeOptions();
  if (canUpdateDocument()) {
    updateDocument(false);
  }
  if (!mPrintedDocument.isUpdating()) {
    requestCreatePdfFileOrFinish();
  }
}
