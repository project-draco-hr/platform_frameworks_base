{
  if (resultCode == RESULT_OK && data != null) {
    Uri uri=data.getData();
    mPrintedDocument.writeContent(getContentResolver(),uri);
    finish();
  }
 else   if (resultCode == RESULT_CANCELED) {
    mState=STATE_CONFIGURING;
    updateOptionsUi();
  }
 else {
    ensureErrorUiShown(getString(R.string.print_write_error_message),PrintErrorFragment.ACTION_CONFIRM);
    mState=STATE_CREATE_FILE_FAILED;
    updateOptionsUi();
  }
}
