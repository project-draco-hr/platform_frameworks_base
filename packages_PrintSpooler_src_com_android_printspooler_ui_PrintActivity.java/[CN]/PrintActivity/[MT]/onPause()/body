{
  if (isFinishing()) {
    PrintSpoolerService spooler=mSpoolerProvider.getSpooler();
    if (mState == STATE_PRINT_CONFIRMED) {
      spooler.updatePrintJobUserConfigurableOptionsNoPersistence(mPrintJob);
      spooler.setPrintJobState(mPrintJob.getId(),PrintJobInfo.STATE_QUEUED,null);
    }
 else {
      spooler.setPrintJobState(mPrintJob.getId(),PrintJobInfo.STATE_CANCELED,null);
    }
    mProgressMessageController.cancel();
    mPrinterRegistry.setTrackedPrinter(null);
    mSpoolerProvider.destroy();
    mPrintedDocument.finish();
    mPrintedDocument.destroy();
  }
  mPrinterAvailabilityDetector.cancel();
  super.onPause();
}
