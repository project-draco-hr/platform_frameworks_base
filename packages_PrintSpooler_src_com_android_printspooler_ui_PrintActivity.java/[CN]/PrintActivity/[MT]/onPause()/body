{
  if (mState == STATE_INITIALIZING) {
    super.onPause();
    return;
  }
  if (isFinishing()) {
    PrintSpoolerService spooler=mSpoolerProvider.getSpooler();
    spooler.updatePrintJobUserConfigurableOptionsNoPersistence(mPrintJob);
switch (mState) {
case STATE_PRINT_CONFIRMED:
{
        spooler.setPrintJobState(mPrintJob.getId(),PrintJobInfo.STATE_QUEUED,null);
      }
    break;
case STATE_PRINT_COMPLETED:
{
    spooler.setPrintJobState(mPrintJob.getId(),PrintJobInfo.STATE_COMPLETED,null);
  }
break;
case STATE_CREATE_FILE_FAILED:
{
spooler.setPrintJobState(mPrintJob.getId(),PrintJobInfo.STATE_FAILED,getString(R.string.print_write_error_message));
}
break;
default :
{
spooler.setPrintJobState(mPrintJob.getId(),PrintJobInfo.STATE_CANCELED,null);
}
break;
}
mProgressMessageController.cancel();
mPrinterRegistry.setTrackedPrinter(null);
mPrintPreviewController.destroy();
mSpoolerProvider.destroy();
mPrintedDocument.finish();
mPrintedDocument.destroy();
}
mPrinterAvailabilityDetector.cancel();
super.onPause();
}
