{
  Map<PrinterId,PrinterRecord> recordMap=new ArrayMap<PrinterId,PrinterRecord>();
  float currentWeight=1.0f;
  final int printerCount=mHistoricalPrinters.size();
  for (int i=printerCount - 1; i >= 0; i--) {
    PrinterRecord record=mHistoricalPrinters.get(i);
    record.weight=currentWeight;
    PrinterRecord oldRecord=recordMap.put(record.printer.getId(),record);
    if (oldRecord != null) {
      record.weight+=oldRecord.weight;
    }
    currentWeight*=WEIGHT_DECAY_COEFFICIENT;
  }
  mFavoritePrinters.addAll(recordMap.values());
  Collections.sort(mFavoritePrinters);
}
