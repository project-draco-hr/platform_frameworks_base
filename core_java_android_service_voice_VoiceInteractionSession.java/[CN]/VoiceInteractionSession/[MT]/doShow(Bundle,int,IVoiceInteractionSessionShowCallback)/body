{
  if (DEBUG)   Log.v(TAG,"Showing window: mWindowAdded=" + mWindowAdded + " mWindowVisible="+ mWindowVisible);
  if (mInShowWindow) {
    Log.w(TAG,"Re-entrance in to showWindow");
    return;
  }
  try {
    mInShowWindow=true;
    if (!mWindowVisible) {
      if (!mWindowAdded) {
        mWindowAdded=true;
        View v=onCreateContentView();
        if (v != null) {
          setContentView(v);
        }
      }
    }
    onShow(args,flags);
    if (!mWindowVisible) {
      mWindowVisible=true;
      mWindow.show();
    }
    if (showCallback != null) {
      mRootView.invalidate();
      mRootView.getViewTreeObserver().addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener(){
        @Override public boolean onPreDraw(){
          mRootView.getViewTreeObserver().removeOnPreDrawListener(this);
          try {
            showCallback.onShown();
          }
 catch (          RemoteException e) {
            Log.w(TAG,"Error calling onShown",e);
          }
          return true;
        }
      }
);
    }
  }
  finally {
    mWindowWasVisible=true;
    mInShowWindow=false;
  }
}
