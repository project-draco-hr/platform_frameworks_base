{
  Builder builder=sBuilderManager.getDelegate(nativeBuilder);
  if (builder == null) {
    return;
  }
  builder.mText=text;
  builder.mWidths=new float[length];
  BreakIterator it=BreakIterator.getLineInstance(new ULocale(builder.mLocale));
  it.setText(new Segment(builder.mText,0,length));
  List<Integer> breaks=new ArrayList<Integer>((int)Math.ceil(length / 5d));
  int loc;
  it.first();
  while ((loc=it.next()) != BreakIterator.DONE) {
    breaks.add(loc);
  }
  LineWidth lineWidth=new LineWidth(firstWidth,firstWidthLineCount,restWidth);
  TabStops tabStopCalculator=new TabStops(variableTabStops,defaultTabStop);
  List<Primitive> primitives=computePrimitives(builder.mText,builder.mWidths,length,breaks);
  BreakStrategy strategy=BreakStrategy.getStrategy(breakStrategy);
switch (strategy) {
case GREEDY:
    builder.mLineBreaker=new GreedyLineBreaker(primitives,lineWidth,tabStopCalculator);
  break;
case HIGH_QUALITY:
break;
case BALANCED:
builder.mLineBreaker=new OptimizingLineBreaker(primitives,lineWidth,tabStopCalculator);
break;
}
}
