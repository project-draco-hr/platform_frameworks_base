{
  if (DEBUG) {
    Log.i(LOG_TAG,intent.getAction());
  }
  String action=intent.getAction();
  if (Intent.ACTION_BATTERY_CHANGED.equals(action)) {
    final int maxBatteryLevel=intent.getExtras().getInt(BatteryManager.EXTRA_SCALE);
    final int currBatteryLevel=intent.getExtras().getInt(BatteryManager.EXTRA_LEVEL);
    mBatteryLevel=(int)(((float)maxBatteryLevel / 100) * currBatteryLevel);
    final int pluggedState=intent.getExtras().getInt(BatteryManager.EXTRA_PLUGGED);
    final int chargerState=intent.getExtras().getInt(BatteryManager.EXTRA_INVALID_CHARGER,0);
    mBatteryCharging=(pluggedState > 0 && chargerState == 0);
  }
 else   if (Intent.ACTION_SCREEN_ON.equals(action) || Intent.ACTION_DREAMING_STOPPED.equals(action)) {
    mLastUserActivityElapsedTimeMillis=LAST_USER_ACTIVITY_TIME_INVALID;
  }
 else   if (Intent.ACTION_SCREEN_OFF.equals(action) || Intent.ACTION_DREAMING_STARTED.equals(action)) {
    mLastUserActivityElapsedTimeMillis=SystemClock.elapsedRealtime();
  }
 else   if (Intent.ACTION_IDLE_MAINTENANCE_START.equals(action) || Intent.ACTION_IDLE_MAINTENANCE_END.equals(action)) {
    mWakeLock.release();
    return;
  }
  updateIdleMaintenanceState();
}
