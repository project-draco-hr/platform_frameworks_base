{
  if (mIdleMaintenanceStarted) {
    if (!deviceStatePermitsIdleMaintenance()) {
      mIdleMaintenanceStarted=false;
      sendIdleMaintenanceEndIntent();
    }
  }
 else   if (deviceStatePermitsIdleMaintenance() && lastUserActivityPermitsIdleMaintenanceStart() && lastRunPermitsIdleMaintenanceStart()) {
    mIdleMaintenanceStarted=true;
    mLastIdleMaintenanceStartTime.setTimeInMillis(System.currentTimeMillis());
    sendIdleMaintenanceStartIntent();
  }
}
