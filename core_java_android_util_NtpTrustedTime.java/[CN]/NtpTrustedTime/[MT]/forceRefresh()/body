{
  if (mNtpServer == null) {
    throw new IllegalStateException("Missing NTP server");
  }
  final SntpClient client=new SntpClient();
  if (client.requestTime(mNtpServer,(int)mNtpTimeout)) {
    mHasCache=true;
    mCachedNtpTime=client.getNtpTime();
    mCachedNtpElapsedRealtime=client.getNtpTimeReference();
    mCachedNtpCertainty=client.getRoundTripTime() / 2;
    return true;
  }
 else {
    return false;
  }
}
