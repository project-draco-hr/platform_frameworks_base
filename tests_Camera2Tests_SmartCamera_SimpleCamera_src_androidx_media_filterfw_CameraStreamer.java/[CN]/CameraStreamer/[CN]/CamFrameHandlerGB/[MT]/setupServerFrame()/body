{
  checkCameraDimensions();
  Camera camera=mRunner.mCamera;
  int bufferSize=mCameraWidth * (mCameraHeight + mCameraHeight / 2);
  mFrameBufferFront=new byte[bufferSize];
  mFrameBufferBack=new byte[bufferSize];
  camera.addCallbackBuffer(writeBuffer());
  camera.setPreviewCallbackWithBuffer(mPreviewCallback);
  SurfaceView previewDisplay=getPreviewDisplay();
  if (previewDisplay != null) {
    try {
      camera.setPreviewDisplay(previewDisplay.getHolder());
    }
 catch (    IOException e) {
      throw new RuntimeException("Could not start camera with given preview " + "display!");
    }
  }
}
