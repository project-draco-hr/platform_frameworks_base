{
  int vis=shown ? View.VISIBLE : getCandidatesHiddenVisibility();
  if (mCandidatesVisibility != vis) {
    mCandidatesFrame.setVisibility(vis);
    mCandidatesVisibility=vis;
  }
  if (!mShowInputRequested && mWindowVisible != shown) {
    if (shown) {
      showWindow(false);
    }
 else {
      hideWindow();
    }
  }
}
