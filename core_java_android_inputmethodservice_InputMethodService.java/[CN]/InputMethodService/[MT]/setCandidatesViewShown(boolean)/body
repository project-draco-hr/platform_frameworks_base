{
  updateCandidatesVisibility(shown);
  if (!mShowInputRequested && mWindowVisible != shown) {
    if (shown) {
      showWindow(false);
    }
 else {
      doHideWindow();
    }
  }
}
