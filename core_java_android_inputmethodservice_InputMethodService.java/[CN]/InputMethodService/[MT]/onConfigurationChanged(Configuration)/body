{
  super.onConfigurationChanged(newConfig);
  boolean visible=mWindowVisible;
  boolean showingInput=mShowInputRequested;
  boolean showingForced=mShowInputForced;
  boolean showingCandidates=mCandidatesVisibility == View.VISIBLE;
  initViews();
  mInputViewStarted=false;
  mCandidatesViewStarted=false;
  if (mInputStarted) {
    doStartInput(getCurrentInputConnection(),getCurrentInputEditorInfo(),true);
  }
  if (visible) {
    if (showingForced) {
      onShowRequested(InputMethod.SHOW_FORCED | InputMethod.SHOW_EXPLICIT);
    }
 else     if (showingInput) {
      onShowRequested(InputMethod.SHOW_EXPLICIT);
    }
 else {
      showWindow(false);
    }
    if (showingCandidates) {
      setCandidatesViewShown(true);
    }
  }
}
