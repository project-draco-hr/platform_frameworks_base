{
  final long now=SystemClock.uptimeMillis();
  Message p=mMessages;
  if (p != null) {
    if (p.when > now) {
      removeAllMessagesLocked();
    }
 else {
      Message n;
      for (; ; ) {
        n=p.next;
        if (n == null) {
          return;
        }
        if (n.when > now) {
          break;
        }
        p=n;
      }
      p.next=null;
      do {
        p=n;
        n=p.next;
        p.recycle();
      }
 while (n != null);
    }
  }
}
