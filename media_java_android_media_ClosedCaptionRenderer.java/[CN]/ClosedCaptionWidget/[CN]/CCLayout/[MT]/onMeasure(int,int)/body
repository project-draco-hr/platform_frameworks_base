{
  super.onMeasure(widthMeasureSpec,heightMeasureSpec);
  int safeWidth=getMeasuredWidth();
  int safeHeight=getMeasuredHeight();
  if (safeWidth * 3 >= safeHeight * 4) {
    safeWidth=safeHeight * 4 / 3;
  }
 else {
    safeHeight=safeWidth * 3 / 4;
  }
  safeWidth*=SAFE_AREA_RATIO;
  safeHeight*=SAFE_AREA_RATIO;
  int lineHeight=safeHeight / MAX_ROWS;
  int lineHeightMeasureSpec=MeasureSpec.makeMeasureSpec(lineHeight,MeasureSpec.EXACTLY);
  int lineWidthMeasureSpec=MeasureSpec.makeMeasureSpec(safeWidth,MeasureSpec.EXACTLY);
  for (int i=0; i < MAX_ROWS; i++) {
    mLineBoxes[i].measure(lineWidthMeasureSpec,lineHeightMeasureSpec);
  }
}
