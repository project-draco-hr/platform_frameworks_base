{
  long elapsedNowMs=SystemClock.elapsedRealtime();
  if (isExpanded && isVisible) {
    if (currentAirtimeExpandedStartElapsedMs < 0) {
      currentAirtimeExpandedStartElapsedMs=elapsedNowMs;
    }
    if (posttimeToFirstVisibleExpansionMs < 0) {
      posttimeToFirstVisibleExpansionMs=elapsedNowMs - posttimeElapsedMs;
    }
  }
 else {
    if (currentAirtimeExpandedStartElapsedMs >= 0) {
      airtimeExpandedMs+=(elapsedNowMs - currentAirtimeExpandedStartElapsedMs);
      currentAirtimeExpandedStartElapsedMs=-1;
    }
  }
}
