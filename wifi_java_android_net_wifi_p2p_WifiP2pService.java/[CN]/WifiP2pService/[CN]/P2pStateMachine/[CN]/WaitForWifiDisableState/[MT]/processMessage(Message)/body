{
  if (DBG)   logd(getName() + message.toString());
switch (message.what) {
case WifiStateMachine.P2P_ENABLE_PROCEED:
    try {
      mNwService.wifiFirmwareReload(mInterface,"P2P");
    }
 catch (    Exception e) {
      loge("Failed to reload p2p firmware " + e);
    }
  try {
    mNwService.setInterfaceDown(mInterface);
  }
 catch (  Exception e) {
    if (DBG)     Slog.w(TAG,"Unable to bring down wlan interface: " + e);
  }
if (WifiNative.startP2pSupplicant()) {
  mWifiMonitor.startMonitoring();
  transitionTo(mP2pEnablingState);
}
 else {
  notifyP2pEnableFailure();
  transitionTo(mP2pDisabledState);
}
break;
case WifiP2pManager.ENABLE_P2P:
case WifiP2pManager.DISABLE_P2P:
deferMessage(message);
break;
default :
return NOT_HANDLED;
}
return HANDLED;
}
