{
  if (mDiscoveryStarted == started)   return;
  mDiscoveryStarted=started;
  if (DBG)   logd("discovery change broadcast " + started);
  final Intent intent=new Intent(WifiP2pManager.WIFI_P2P_DISCOVERY_CHANGED_ACTION);
  intent.addFlags(Intent.FLAG_RECEIVER_REGISTERED_ONLY_BEFORE_BOOT);
  intent.putExtra(WifiP2pManager.EXTRA_DISCOVERY_STATE,started ? WifiP2pManager.WIFI_P2P_DISCOVERY_STARTED : WifiP2pManager.WIFI_P2P_DISCOVERY_STOPPED);
  mContext.sendStickyBroadcastAsUser(intent,UserHandle.ALL);
}
