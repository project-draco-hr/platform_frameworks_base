{
  mWifiNative.setPersistentReconnect(true);
  mThisDevice.deviceName=getPersistedDeviceName();
  mWifiNative.setDeviceName(mThisDevice.deviceName);
  mWifiNative.setP2pSsidPostfix("-" + mThisDevice.deviceName);
  mWifiNative.setDeviceType(mThisDevice.primaryDeviceType);
  mWifiNative.setConfigMethods("virtual_push_button physical_display keypad");
  mWifiNative.setConcurrencyPriority("sta");
  mThisDevice.deviceAddress=mWifiNative.p2pGetDeviceAddress();
  updateThisDevice(WifiP2pDevice.AVAILABLE);
  if (DBG)   logd("DeviceAddress: " + mThisDevice.deviceAddress);
  mClientInfoList.clear();
  mWifiNative.p2pFlush();
  mWifiNative.p2pServiceFlush();
  mServiceTransactionId=0;
  mServiceDiscReqId=null;
  String countryCode=Settings.Global.getString(mContext.getContentResolver(),Settings.Global.WIFI_COUNTRY_CODE);
  if (countryCode != null && !countryCode.isEmpty()) {
    mP2pStateMachine.sendMessage(SET_COUNTRY_CODE,countryCode);
  }
  updatePersistentNetworks(RELOAD);
}
