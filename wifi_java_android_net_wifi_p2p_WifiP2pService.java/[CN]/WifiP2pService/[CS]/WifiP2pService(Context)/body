{
  mContext=context;
  mInterface=SystemProperties.get("wifi.interface","wlan0");
  mNetworkInfo=new NetworkInfo(ConnectivityManager.TYPE_WIFI_P2P,0,NETWORKTYPE,"");
  mP2pSupported=mContext.getResources().getBoolean(com.android.internal.R.bool.config_wifi_p2p_support);
  mDeviceType=mContext.getResources().getString(com.android.internal.R.string.config_wifi_p2p_device_type);
  mDeviceName=getDefaultDeviceName();
  mP2pStateMachine=new P2pStateMachine(TAG,mP2pSupported);
  mP2pStateMachine.start();
  IntentFilter filter=new IntentFilter();
  filter.addAction(WifiManager.WIFI_STATE_CHANGED_ACTION);
  filter.addAction(WifiManager.WIFI_AP_STATE_CHANGED_ACTION);
  mContext.registerReceiver(new WifiStateReceiver(),filter);
}
