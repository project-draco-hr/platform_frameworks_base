{
  super.onResume();
  mDeviceID=getIntent().getIntExtra("device",0);
  mStorageID=getIntent().getIntExtra("storage",0);
  mObjectID=getIntent().getIntExtra("object",0);
  if (mDeviceID != 0 && mStorageID != 0) {
    Cursor c;
    if (mObjectID == 0) {
      c=getContentResolver().query(Mtp.Object.getContentUriForStorageChildren(mDeviceID,mStorageID),OBJECT_COLUMNS,null,null,null);
    }
 else {
      c=getContentResolver().query(Mtp.Object.getContentUriForObjectChildren(mDeviceID,mObjectID),OBJECT_COLUMNS,null,null,null);
    }
    Log.d(TAG,"query returned " + c);
    startManagingCursor(c);
    mAdapter=new SimpleCursorAdapter(this,android.R.layout.simple_list_item_1,c,new String[]{Mtp.Object.NAME},new int[]{android.R.id.text1,android.R.id.text2});
    setListAdapter(mAdapter);
  }
}
