{
  long rowID=mAdapter.getItemId(position);
  Cursor c=getContentResolver().query(Ptp.Object.getContentUri(mDeviceID,rowID),OBJECT_COLUMNS,null,null,null);
  Log.d(TAG,"query returned " + c + " count: "+ c.getCount());
  long format=0;
  if (c != null && c.getCount() == 1) {
    c.moveToFirst();
    long rowId=c.getLong(ID_COLUMN);
    String name=c.getString(NAME_COLUMN);
    format=c.getLong(FORMAT_COLUMN);
    Log.d(TAG,"rowId: " + rowId + " name: "+ name+ " format: "+ format);
  }
  if (format == MtpConstants.FORMAT_ASSOCIATION) {
    Intent intent=new Intent(this,ObjectBrowser.class);
    intent.putExtra("device",mDeviceID);
    intent.putExtra("storage",mStorageID);
    intent.putExtra("object",rowID);
    startActivity(intent);
  }
 else {
    Intent intent=new Intent(this,ObjectViewer.class);
    intent.putExtra("device",mDeviceID);
    intent.putExtra("storage",mStorageID);
    intent.putExtra("object",rowID);
    startActivity(intent);
  }
}
