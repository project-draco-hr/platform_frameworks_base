{
  try {
    if (mLowPowerMode && vib.mUsageHint != AudioAttributes.USAGE_NOTIFICATION_RINGTONE) {
      return;
    }
    if (vib.mUsageHint == AudioAttributes.USAGE_NOTIFICATION_RINGTONE && !shouldVibrateForRingtone()) {
      return;
    }
    int mode=mAppOpsService.checkAudioOperation(AppOpsManager.OP_VIBRATE,vib.mUsageHint,vib.mUid,vib.mOpPkg);
    if (mode == AppOpsManager.MODE_ALLOWED) {
      mode=mAppOpsService.startOperation(AppOpsManager.getToken(mAppOpsService),AppOpsManager.OP_VIBRATE,vib.mUid,vib.mOpPkg);
    }
    if (mode == AppOpsManager.MODE_ALLOWED) {
      mCurrentVibration=vib;
    }
 else {
      if (mode == AppOpsManager.MODE_ERRORED) {
        Slog.w(TAG,"Would be an error: vibrate from uid " + vib.mUid);
      }
      mH.post(mVibrationRunnable);
      return;
    }
  }
 catch (  RemoteException e) {
  }
  if (vib.mTimeout != 0) {
    doVibratorOn(vib.mTimeout,vib.mUid,vib.mUsageHint);
    mH.postDelayed(mVibrationRunnable,vib.mTimeout);
  }
 else {
    mThread=new VibrateThread(vib);
    mThread.start();
  }
}
