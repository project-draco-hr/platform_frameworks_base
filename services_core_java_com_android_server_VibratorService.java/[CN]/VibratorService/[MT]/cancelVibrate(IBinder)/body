{
  mContext.enforceCallingOrSelfPermission(android.Manifest.permission.VIBRATE,"cancelVibrate");
  long identity=Binder.clearCallingIdentity();
  try {
synchronized (mVibrations) {
      final Vibration vib=removeVibrationLocked(token);
      if (vib == mCurrentVibration) {
        if (DEBUG) {
          Slog.d(TAG,"Canceling vibration.");
        }
        doCancelVibrateLocked();
        startNextVibrationLocked();
      }
    }
  }
  finally {
    Binder.restoreCallingIdentity(identity);
  }
}
