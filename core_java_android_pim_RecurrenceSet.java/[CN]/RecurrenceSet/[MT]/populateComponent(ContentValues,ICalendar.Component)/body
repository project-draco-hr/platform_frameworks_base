{
  long dtstart=-1;
  if (values.containsKey(Calendar.Events.DTSTART)) {
    dtstart=values.getAsLong(Calendar.Events.DTSTART);
  }
  String duration=values.getAsString(Calendar.Events.DURATION);
  String tzid=values.getAsString(Calendar.Events.EVENT_TIMEZONE);
  String rruleStr=values.getAsString(Calendar.Events.RRULE);
  String rdateStr=values.getAsString(Calendar.Events.RDATE);
  String exruleStr=values.getAsString(Calendar.Events.EXRULE);
  String exdateStr=values.getAsString(Calendar.Events.EXDATE);
  boolean allDay=values.getAsInteger(Calendar.Events.ALL_DAY) == 1;
  if ((dtstart == -1) || (TextUtils.isEmpty(duration)) || ((TextUtils.isEmpty(rruleStr)) && (TextUtils.isEmpty(rdateStr)))) {
    return false;
  }
  ICalendar.Property dtstartProp=new ICalendar.Property("DTSTART");
  Time dtstartTime=null;
  if (!TextUtils.isEmpty(tzid)) {
    if (!allDay) {
      dtstartProp.addParameter(new ICalendar.Parameter("TZID",tzid));
    }
    dtstartTime=new Time(tzid);
  }
 else {
    dtstartTime=new Time(Time.TIMEZONE_UTC);
  }
  dtstartTime.set(dtstart);
  if (allDay) {
    dtstartProp.addParameter(new ICalendar.Parameter("VALUE","DATE"));
    dtstartTime.allDay=true;
    dtstartTime.hour=0;
    dtstartTime.minute=0;
    dtstartTime.second=0;
  }
  dtstartProp.setValue(dtstartTime.format2445());
  component.addProperty(dtstartProp);
  ICalendar.Property durationProp=new ICalendar.Property("DURATION");
  durationProp.setValue(duration);
  component.addProperty(durationProp);
  addPropertiesForRuleStr(component,"RRULE",rruleStr);
  addPropertyForDateStr(component,"RDATE",rdateStr);
  addPropertiesForRuleStr(component,"EXRULE",exruleStr);
  addPropertyForDateStr(component,"EXDATE",exdateStr);
  return true;
}
