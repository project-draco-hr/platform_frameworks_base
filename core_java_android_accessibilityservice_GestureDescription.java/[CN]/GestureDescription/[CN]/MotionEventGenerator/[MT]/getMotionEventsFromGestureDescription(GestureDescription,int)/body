{
  final List<MotionEvent> motionEvents=new ArrayList<>();
  final TouchPoint[] currentTouchPoints=getCurrentTouchPoints(description.getStrokeCount());
  int lastTouchPointSize=0;
  final TouchPoint[] lastTouchPoints=getLastTouchPoints(description.getStrokeCount());
  long timeSinceGestureStart=0;
  long nextKeyPointTime=description.getNextKeyPointAtLeast(timeSinceGestureStart);
  while (nextKeyPointTime >= 0) {
    timeSinceGestureStart=(lastTouchPointSize == 0) ? nextKeyPointTime : Math.min(nextKeyPointTime,timeSinceGestureStart + sampleTimeMs);
    int currentTouchPointSize=description.getPointsForTime(timeSinceGestureStart,currentTouchPoints);
    appendMoveEventIfNeeded(motionEvents,lastTouchPoints,lastTouchPointSize,currentTouchPoints,currentTouchPointSize,timeSinceGestureStart);
    lastTouchPointSize=appendUpEvents(motionEvents,lastTouchPoints,lastTouchPointSize,currentTouchPoints,currentTouchPointSize,timeSinceGestureStart);
    lastTouchPointSize=appendDownEvents(motionEvents,lastTouchPoints,lastTouchPointSize,currentTouchPoints,currentTouchPointSize,timeSinceGestureStart);
    nextKeyPointTime=description.getNextKeyPointAtLeast(timeSinceGestureStart + 1);
  }
  return motionEvents;
}
