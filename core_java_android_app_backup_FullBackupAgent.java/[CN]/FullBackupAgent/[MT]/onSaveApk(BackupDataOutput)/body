{
  ApplicationInfo app=getApplicationInfo();
  if (DEBUG)   Log.i(TAG,"APK flags: system=" + ((app.flags & ApplicationInfo.FLAG_SYSTEM) != 0) + " updated="+ ((app.flags & ApplicationInfo.FLAG_UPDATED_SYSTEM_APP) != 0)+ " locked="+ ((app.flags & ApplicationInfo.FLAG_FORWARD_LOCK) != 0));
  if (DEBUG)   Log.i(TAG,"codepath: " + getPackageCodePath());
  final String pkgName=getPackageName();
  final String apkDir=new File(getPackageCodePath()).getParent();
  FullBackup.backupToTar(pkgName,FullBackup.APK_TREE_TOKEN,null,apkDir,getPackageCodePath(),data);
  final File obbDir=Environment.getExternalStorageAppObbDirectory(pkgName);
  if (obbDir != null) {
    if (DEBUG)     Log.i(TAG,"obb dir: " + obbDir.getAbsolutePath());
    File[] obbFiles=obbDir.listFiles();
    if (obbFiles != null) {
      final String obbDirName=obbDir.getAbsolutePath();
      for (      File obb : obbFiles) {
        FullBackup.backupToTar(pkgName,FullBackup.OBB_TREE_TOKEN,null,obbDirName,obb.getAbsolutePath(),data);
      }
    }
  }
}
