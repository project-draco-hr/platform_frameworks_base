{
  assertFalse("Activity already created",mCreated);
  if (!mAttached) {
    assertNotNull(mActivityClass);
    setActivity(null);
    T newActivity=null;
    try {
      IBinder token=null;
      if (mApplication == null) {
        setApplication(new MockApplication());
      }
      ComponentName cn=new ComponentName(mActivityClass.getPackage().getName(),mActivityClass.getName());
      intent.setComponent(cn);
      ActivityInfo info=new ActivityInfo();
      CharSequence title=mActivityClass.getName();
      mMockParent=new MockParent();
      String id=null;
      newActivity=(T)getInstrumentation().newActivity(mActivityClass,mActivityContext,token,mApplication,intent,info,title,mMockParent,id,lastNonConfigurationInstance);
    }
 catch (    Exception e) {
      assertNotNull(newActivity);
    }
    assertNotNull(newActivity);
    setActivity(newActivity);
    mAttached=true;
  }
  T result=getActivity();
  if (result != null) {
    getInstrumentation().callActivityOnCreate(getActivity(),savedInstanceState);
    mCreated=true;
  }
  return result;
}
