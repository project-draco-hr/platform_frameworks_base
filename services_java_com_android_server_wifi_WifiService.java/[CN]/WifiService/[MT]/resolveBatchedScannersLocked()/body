{
  BatchedScanSettings setting=new BatchedScanSettings();
  int responsibleUid=0;
  if (mBatchedScanners.size() == 0) {
    mWifiStateMachine.setBatchedScanSettings(null,0);
    return;
  }
  for (  BatchedScanRequest r : mBatchedScanners) {
    BatchedScanSettings s=r.settings;
    if (s.maxScansPerBatch != BatchedScanSettings.UNSPECIFIED && s.maxScansPerBatch < setting.maxScansPerBatch) {
      setting.maxScansPerBatch=s.maxScansPerBatch;
      responsibleUid=r.uid;
    }
    if (s.maxApPerScan != BatchedScanSettings.UNSPECIFIED && (setting.maxApPerScan == BatchedScanSettings.UNSPECIFIED || s.maxApPerScan > setting.maxApPerScan)) {
      setting.maxApPerScan=s.maxApPerScan;
    }
    if (s.scanIntervalSec != BatchedScanSettings.UNSPECIFIED && s.scanIntervalSec < setting.scanIntervalSec) {
      setting.scanIntervalSec=s.scanIntervalSec;
      responsibleUid=r.uid;
    }
    if (s.maxApForDistance != BatchedScanSettings.UNSPECIFIED && (setting.maxApForDistance == BatchedScanSettings.UNSPECIFIED || s.maxApForDistance > setting.maxApForDistance)) {
      setting.maxApForDistance=s.maxApForDistance;
    }
    if (s.channelSet != null && s.channelSet.size() != 0) {
      if (setting.channelSet == null || setting.channelSet.size() != 0) {
        if (setting.channelSet == null)         setting.channelSet=new ArrayList<String>();
        for (        String i : s.channelSet) {
          if (setting.channelSet.contains(i) == false)           setting.channelSet.add(i);
        }
      }
    }
 else {
      if (setting.channelSet == null || setting.channelSet.size() != 0) {
        setting.channelSet=new ArrayList<String>();
      }
    }
  }
  setting.constrain();
  mWifiStateMachine.setBatchedScanSettings(setting,responsibleUid);
}
