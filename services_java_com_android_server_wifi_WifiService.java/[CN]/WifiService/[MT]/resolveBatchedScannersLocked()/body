{
  BatchedScanSettings setting=new BatchedScanSettings();
  setting.scanIntervalSec=BatchedScanSettings.DEFAULT_INTERVAL_SEC;
  int responsibleUid=0;
  setting.channelSet=new ArrayList<String>();
  if (mBatchedScanners.size() == 0) {
    mWifiStateMachine.setBatchedScanSettings(null,0);
    return;
  }
  for (  BatchedScanRequest r : mBatchedScanners) {
    BatchedScanSettings s=r.settings;
    if (s.maxScansPerBatch != BatchedScanSettings.UNSPECIFIED && s.maxScansPerBatch < setting.maxScansPerBatch) {
      setting.maxScansPerBatch=s.maxScansPerBatch;
      responsibleUid=r.uid;
    }
    if (s.maxApPerScan != BatchedScanSettings.UNSPECIFIED && s.maxApPerScan > setting.maxApPerScan) {
      setting.maxApPerScan=s.maxApPerScan;
    }
    if (s.scanIntervalSec != BatchedScanSettings.UNSPECIFIED && s.scanIntervalSec < setting.scanIntervalSec) {
      setting.scanIntervalSec=s.scanIntervalSec;
      responsibleUid=r.uid;
    }
    if (s.maxApForDistance != BatchedScanSettings.UNSPECIFIED && s.maxApForDistance > setting.maxApForDistance) {
      setting.maxApForDistance=s.maxApForDistance;
    }
    if (s.channelSet != null) {
      for (      String i : s.channelSet) {
        if (setting.channelSet.contains(i) == false)         setting.channelSet.add(i);
      }
    }
  }
  if (setting.channelSet.size() == 0)   setting.channelSet=null;
  if (setting.scanIntervalSec < BatchedScanSettings.MIN_INTERVAL_SEC) {
    setting.scanIntervalSec=BatchedScanSettings.MIN_INTERVAL_SEC;
  }
  if (setting.maxScansPerBatch == BatchedScanSettings.UNSPECIFIED) {
    setting.maxScansPerBatch=BatchedScanSettings.DEFAULT_SCANS_PER_BATCH;
  }
  if (setting.maxApPerScan == BatchedScanSettings.UNSPECIFIED) {
    setting.maxApPerScan=BatchedScanSettings.DEFAULT_AP_PER_SCAN;
  }
  if (setting.scanIntervalSec == BatchedScanSettings.UNSPECIFIED) {
    setting.scanIntervalSec=BatchedScanSettings.DEFAULT_INTERVAL_SEC;
  }
  if (setting.maxApForDistance == BatchedScanSettings.UNSPECIFIED) {
    setting.maxApForDistance=BatchedScanSettings.DEFAULT_AP_FOR_DISTANCE;
  }
  mWifiStateMachine.setBatchedScanSettings(setting,responsibleUid);
}
