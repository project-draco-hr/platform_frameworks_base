{
  enforceChangePermission();
  if (config != null) {
    LinkProperties lp=config.linkProperties;
    if (lp == null || lp.equals(WifiConfiguration.stripUndisplayableConfig(lp)) == false) {
      return -1;
    }
  }
  if (mWifiStateMachineChannel != null) {
    return mWifiStateMachine.syncAddOrUpdateNetwork(mWifiStateMachineChannel,config);
  }
 else {
    Slog.e(TAG,"mWifiStateMachineChannel is not initialized");
    return -1;
  }
}
