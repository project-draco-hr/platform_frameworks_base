{
  int rotation;
  int threshold=(mSensorRotation == Surface.ROTATION_90) ? _UPPER_THRESHOLD : _LOWER_THRESHOLD;
  if ((orientation >= 0 && orientation <= _UPPER_THRESHOLD) || (orientation >= 270 - _LOWER_THRESHOLD)) {
    rotation=(orientation >= 270 - _LOWER_THRESHOLD && orientation <= 270 + threshold) ? Surface.ROTATION_90 : Surface.ROTATION_0;
  }
 else {
    return;
  }
  if (rotation != mSensorRotation) {
    if (localLOGV)     Log.i(TAG,"onOrientationChanged, rotation changed from " + rotation + " to "+ mSensorRotation);
    mSensorRotation=rotation;
    try {
      mWindowManager.setRotation(rotation,false);
    }
 catch (    RemoteException e) {
    }
  }
}
