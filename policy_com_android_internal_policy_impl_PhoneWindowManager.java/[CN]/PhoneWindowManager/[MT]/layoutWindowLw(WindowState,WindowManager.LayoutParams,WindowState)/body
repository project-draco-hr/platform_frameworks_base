{
  if (win == mStatusBar) {
    return;
  }
  if (false) {
    if ("com.google.android.youtube".equals(attrs.packageName) && attrs.type == WindowManager.LayoutParams.TYPE_APPLICATION_PANEL) {
      Log.i(TAG,"GOTCHA!");
    }
  }
  final int fl=attrs.flags;
  final int sim=attrs.softInputMode;
  final Rect pf=mTmpParentFrame;
  final Rect df=mTmpDisplayFrame;
  final Rect cf=mTmpContentFrame;
  final Rect vf=mTmpVisibleFrame;
  if (attrs.type == TYPE_INPUT_METHOD) {
    pf.left=df.left=cf.left=vf.left=mDockLeft;
    pf.top=df.top=cf.top=vf.top=mDockTop;
    pf.right=df.right=cf.right=vf.right=mDockRight;
    pf.bottom=df.bottom=cf.bottom=vf.bottom=mDockBottom;
    attrs.gravity=Gravity.BOTTOM;
    mDockLayer=win.getSurfaceLayer();
  }
 else {
    if ((fl & (FLAG_LAYOUT_IN_SCREEN | FLAG_FULLSCREEN | FLAG_LAYOUT_INSET_DECOR)) == (FLAG_LAYOUT_IN_SCREEN | FLAG_LAYOUT_INSET_DECOR)) {
      if (attached != null) {
        setAttachedWindowFrames(win,fl,sim,attached,true,pf,df,cf,vf);
      }
 else {
        pf.left=df.left=0;
        pf.top=df.top=0;
        pf.right=df.right=mW;
        pf.bottom=df.bottom=mH;
        if ((sim & SOFT_INPUT_MASK_ADJUST) != SOFT_INPUT_ADJUST_RESIZE) {
          cf.left=mDockLeft;
          cf.top=mDockTop;
          cf.right=mDockRight;
          cf.bottom=mDockBottom;
        }
 else {
          cf.left=mContentLeft;
          cf.top=mContentTop;
          cf.right=mContentRight;
          cf.bottom=mContentBottom;
        }
        vf.left=mCurLeft;
        vf.top=mCurTop;
        vf.right=mCurRight;
        vf.bottom=mCurBottom;
      }
    }
 else     if ((fl & FLAG_LAYOUT_IN_SCREEN) != 0) {
      pf.left=df.left=cf.left=0;
      pf.top=df.top=cf.top=0;
      pf.right=df.right=cf.right=mW;
      pf.bottom=df.bottom=cf.bottom=mH;
      vf.left=mCurLeft;
      vf.top=mCurTop;
      vf.right=mCurRight;
      vf.bottom=mCurBottom;
    }
 else     if (attached != null) {
      setAttachedWindowFrames(win,fl,sim,attached,false,pf,df,cf,vf);
    }
 else {
      pf.left=mContentLeft;
      pf.top=mContentTop;
      pf.right=mContentRight;
      pf.bottom=mContentBottom;
      if ((sim & SOFT_INPUT_MASK_ADJUST) != SOFT_INPUT_ADJUST_RESIZE) {
        df.left=cf.left=mDockLeft;
        df.top=cf.top=mDockTop;
        df.right=cf.right=mDockRight;
        df.bottom=cf.bottom=mDockBottom;
      }
 else {
        df.left=cf.left=mContentLeft;
        df.top=cf.top=mContentTop;
        df.right=cf.right=mContentRight;
        df.bottom=cf.bottom=mContentBottom;
      }
      vf.left=mCurLeft;
      vf.top=mCurTop;
      vf.right=mCurRight;
      vf.bottom=mCurBottom;
    }
  }
  if ((fl & FLAG_LAYOUT_NO_LIMITS) != 0) {
    df.left=df.top=cf.left=cf.top=vf.left=vf.top=-10000;
    df.right=df.bottom=cf.right=cf.bottom=vf.right=vf.bottom=10000;
  }
  if (DEBUG_LAYOUT)   Log.v(TAG,"Compute frame " + attrs.getTitle() + ": sim=#"+ Integer.toHexString(sim)+ " pf="+ pf.toShortString()+ " df="+ df.toShortString()+ " cf="+ cf.toShortString()+ " vf="+ vf.toShortString());
  if (false) {
    if ("com.google.android.youtube".equals(attrs.packageName) && attrs.type == WindowManager.LayoutParams.TYPE_APPLICATION_PANEL) {
      if (true || localLOGV)       Log.v(TAG,"Computing frame of " + win + ": sim=#"+ Integer.toHexString(sim)+ " pf="+ pf.toShortString()+ " df="+ df.toShortString()+ " cf="+ cf.toShortString()+ " vf="+ vf.toShortString());
    }
  }
  win.computeFrameLw(pf,df,cf,vf);
  if (win.isVisibleLw()) {
    if ((attrs.flags & FLAG_FORCE_NOT_FULLSCREEN) != 0) {
      mForceStatusBar=true;
    }
    if (mTopFullscreenOpaqueWindowState == null && attrs.type >= FIRST_APPLICATION_WINDOW && attrs.type <= LAST_APPLICATION_WINDOW && win.fillsScreenLw(mW,mH,false,false)) {
      if (DEBUG_LAYOUT)       Log.v(TAG,"Fullscreen window: " + win);
      mTopFullscreenOpaqueWindowState=win;
      if ((attrs.flags & FLAG_SHOW_WHEN_LOCKED) != 0) {
        if (localLOGV)         Log.v(TAG,"Setting mHideLockScreen to true by win " + win);
        mHideLockScreen=true;
      }
    }
    if ((attrs.flags & FLAG_DISMISS_KEYGUARD) != 0) {
      if (localLOGV)       Log.v(TAG,"Setting mDismissKeyguard to true by win " + win);
      mDismissKeyguard=true;
    }
  }
  if (attrs.type == TYPE_INPUT_METHOD && !win.getGivenInsetsPendingLw()) {
    int top=win.getContentFrameLw().top;
    top+=win.getGivenContentInsetsLw().top;
    if (mContentBottom > top) {
      mContentBottom=top;
    }
    top=win.getVisibleFrameLw().top;
    top+=win.getGivenVisibleInsetsLw().top;
    if (mCurBottom > top) {
      mCurBottom=top;
    }
    if (DEBUG_LAYOUT)     Log.v(TAG,"Input method: mDockBottom=" + mDockBottom + " mContentBottom="+ mContentBottom+ " mCurBottom="+ mCurBottom);
  }
}
