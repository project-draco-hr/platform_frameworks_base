{
  if (mDockState == Intent.EXTRA_DOCK_STATE_UNDOCKED) {
    return null;
  }
  Intent intent;
  if (mDockState == Intent.EXTRA_DOCK_STATE_CAR) {
    intent=mCarDockIntent;
  }
 else   if (mDockState == Intent.EXTRA_DOCK_STATE_DESK) {
    intent=mDeskDockIntent;
  }
 else {
    Log.w(TAG,"Unknown dock state: " + mDockState);
    return null;
  }
  ActivityInfo ai=intent.resolveActivityInfo(mContext.getPackageManager(),PackageManager.GET_META_DATA);
  if (ai == null) {
    return null;
  }
  if (ai.metaData != null && ai.metaData.getBoolean(Intent.METADATA_DOCK_HOME)) {
    intent=new Intent(intent);
    intent.setClassName(ai.packageName,ai.name);
    return intent;
  }
  return null;
}
