{
  readLidState();
  final boolean lidOpen=!KEYBOARD_ALWAYS_HIDDEN && mLidOpen;
  mPowerManager.setKeyboardVisibility(lidOpen);
  config.keyboardHidden=(lidOpen || mHasSoftInput) ? Configuration.KEYBOARDHIDDEN_NO : Configuration.KEYBOARDHIDDEN_YES;
  config.hardKeyboardHidden=lidOpen ? Configuration.KEYBOARDHIDDEN_NO : Configuration.KEYBOARDHIDDEN_YES;
}
