{
  try {
    int menuState=mWindowManager.getKeycodeState(KeyEvent.KEYCODE_MENU);
    int sState=mWindowManager.getKeycodeState(KeyEvent.KEYCODE_S);
    int dpadState=mWindowManager.getKeycodeState(KeyEvent.KEYCODE_DPAD_CENTER);
    int trackballState=mWindowManager.getScancodeState(RawInputEvent.BTN_MOUSE);
    mSafeMode=menuState > 0 || sState > 0 || dpadState > 0 || trackballState > 0;
    performHapticFeedbackLw(null,mSafeMode ? HapticFeedbackConstants.SAFE_MODE_ENABLED : HapticFeedbackConstants.SAFE_MODE_DISABLED,true);
    Log.i(TAG,"SAFEMODE: " + mSafeMode + "menu="+ menuState+ " s="+ sState+ " dpad="+ dpadState+ " trackball="+ trackballState+ ")");
    return mSafeMode;
  }
 catch (  RemoteException e) {
    throw new RuntimeException("window manager dead");
  }
}
