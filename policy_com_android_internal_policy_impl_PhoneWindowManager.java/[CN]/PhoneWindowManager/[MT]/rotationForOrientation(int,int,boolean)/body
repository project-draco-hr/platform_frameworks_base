{
switch (orientation) {
case ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE:
    return Surface.ROTATION_90;
case ActivityInfo.SCREEN_ORIENTATION_PORTRAIT:
  return Surface.ROTATION_0;
}
if (mLidOpen) {
return Surface.ROTATION_90;
}
 else {
if (useSensorForOrientation()) {
  int rotation=mSensorRotation >= 0 ? mSensorRotation : Surface.ROTATION_0;
  if (displayEnabled && rotation != lastRotation) {
    mVibrator.vibrate(VIBE_PATTERN,-1);
  }
  return rotation;
}
return Surface.ROTATION_0;
}
}
