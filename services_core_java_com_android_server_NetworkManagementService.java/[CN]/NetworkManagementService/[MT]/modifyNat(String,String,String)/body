{
  final Command cmd=new Command("nat",action,internalInterface,externalInterface);
  final NetworkInterface internalNetworkInterface=NetworkInterface.getByName(internalInterface);
  if (internalNetworkInterface == null) {
    cmd.appendArg("0");
  }
 else {
    List<InterfaceAddress> interfaceAddresses=excludeLinkLocal(internalNetworkInterface.getInterfaceAddresses());
    cmd.appendArg(interfaceAddresses.size());
    for (    InterfaceAddress ia : interfaceAddresses) {
      InetAddress addr=NetworkUtils.getNetworkPart(ia.getAddress(),ia.getNetworkPrefixLength());
      cmd.appendArg(addr.getHostAddress() + "/" + ia.getNetworkPrefixLength());
    }
  }
  try {
    mConnector.execute(cmd);
  }
 catch (  NativeDaemonConnectorException e) {
    throw e.rethrowAsParcelableException();
  }
}
