{
  mContext.enforceCallingOrSelfPermission(CONNECTIVITY_INTERNAL,TAG);
  try {
    wifiFirmwareReload(wlanIface,"AP");
    if (wifiConfig == null) {
      mConnector.execute("softap","set",wlanIface);
    }
 else {
      int apChannel;
      if (wifiConfig.apChannel == 0) {
        apChannel=WifiConfiguration.chooseApChannel(wifiConfig.apBand);
      }
 else {
        apChannel=wifiConfig.apChannel;
      }
      mConnector.execute("softap","set",wlanIface,wifiConfig.SSID,"broadcast",Integer.toString(apChannel),getSecurityType(wifiConfig),new SensitiveArg(wifiConfig.preSharedKey));
    }
    mConnector.execute("softap","startap");
  }
 catch (  NativeDaemonConnectorException e) {
    throw e.rethrowAsParcelableException();
  }
}
