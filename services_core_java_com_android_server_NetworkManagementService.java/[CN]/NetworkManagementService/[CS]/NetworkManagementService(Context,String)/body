{
  mContext=context;
  mFgHandler=new Handler(FgThread.get().getLooper());
  if ("simulator".equals(SystemProperties.get("ro.product.device"))) {
    mConnector=null;
    mThread=null;
    mDaemonHandler=null;
    mPhoneStateListener=null;
    return;
  }
  PowerManager.WakeLock wl=null;
  mConnector=new NativeDaemonConnector(new NetdCallbackReceiver(),socket,10,NETD_TAG,160,wl,FgThread.get().getLooper());
  mThread=new Thread(mConnector,NETD_TAG);
  mDaemonHandler=new Handler(FgThread.get().getLooper());
  mPhoneStateListener=new PhoneStateListener(SubscriptionManager.DEFAULT_SUBSCRIPTION_ID,mDaemonHandler.getLooper()){
    @Override public void onDataConnectionRealTimeInfoChanged(    DataConnectionRealTimeInfo dcRtInfo){
      if (DBG)       Slog.d(TAG,"onDataConnectionRealTimeInfoChanged: " + dcRtInfo);
      notifyInterfaceClassActivity(ConnectivityManager.TYPE_MOBILE,dcRtInfo.getDcPowerState(),dcRtInfo.getTime(),true);
    }
  }
;
  TelephonyManager tm=(TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
  if (tm != null) {
    tm.listen(mPhoneStateListener,PhoneStateListener.LISTEN_DATA_CONNECTION_REAL_TIME_INFO);
  }
  Watchdog.getInstance().addMonitor(this);
}
