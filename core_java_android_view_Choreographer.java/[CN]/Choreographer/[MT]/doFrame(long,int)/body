{
synchronized (mLock) {
    if (!mFrameScheduled) {
      return;
    }
    mFrameScheduled=false;
    mLastFrameTimeNanos=timestampNanos;
  }
  final long startNanos;
  if (DEBUG) {
    startNanos=System.nanoTime();
  }
  doCallbacks(Choreographer.CALLBACK_INPUT);
  doCallbacks(Choreographer.CALLBACK_ANIMATION);
  doCallbacks(Choreographer.CALLBACK_TRAVERSAL);
  if (DEBUG) {
    final long endNanos=System.nanoTime();
    Log.d(TAG,"Frame " + frame + ": Finished, took "+ (endNanos - startNanos) * 0.000001f + " ms, latency " + (startNanos - timestampNanos) * 0.000001f + " ms.");
  }
}
