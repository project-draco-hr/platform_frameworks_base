{
  final long start;
  final OnDrawListener[] listeners;
  final Callback callbacks;
synchronized (mLock) {
    if (!mDrawScheduled) {
      return;
    }
    mDrawScheduled=false;
    start=SystemClock.uptimeMillis();
    if (DEBUG) {
      Log.d(TAG,"Performing draw: " + Math.max(0,start - mLastDrawTime) + " ms have elapsed since previous draw.");
    }
    mLastDrawTime=start;
    listeners=mOnDrawListeners;
    callbacks=mOnDrawCallbacks;
    mOnDrawCallbacks=null;
  }
  if (listeners != null) {
    for (int i=0; i < listeners.length; i++) {
      listeners[i].onDraw();
    }
  }
  if (callbacks != null) {
    runCallbacks(callbacks);
synchronized (mLock) {
      recycleCallbacksLocked(callbacks);
    }
  }
  if (DEBUG) {
    Log.d(TAG,"Draw took " + (SystemClock.uptimeMillis() - start) + " ms.");
  }
}
