{
  if (action == null) {
    throw new IllegalArgumentException("action must not be null");
  }
  if (DEBUG) {
    Log.d(TAG,"PostAnimationCallback: " + action + ", token="+ token+ ", delayMillis="+ delayMillis);
  }
synchronized (mLock) {
    final long now=SystemClock.uptimeMillis();
    final long dueTime=now + delayMillis;
    mAnimationCallbackQueue.addCallbackLocked(dueTime,action,token);
    if (dueTime <= now) {
      scheduleAnimationLocked(now);
    }
 else {
      Message msg=mHandler.obtainMessage(MSG_DO_SCHEDULE_ANIMATION,action);
      mHandler.sendMessageAtTime(msg,dueTime);
    }
  }
}
