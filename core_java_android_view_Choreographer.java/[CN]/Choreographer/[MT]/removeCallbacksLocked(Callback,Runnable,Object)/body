{
  Callback predecessor=null;
  for (Callback callback=head; callback != null; ) {
    final Callback next=callback.next;
    if ((action == null || callback.action == action) && (token == null || callback.token == token)) {
      if (predecessor != null) {
        predecessor.next=next;
      }
 else {
        head=next;
      }
      recycleCallbackLocked(callback);
    }
 else {
      predecessor=callback;
    }
    callback=next;
  }
  return head;
}
