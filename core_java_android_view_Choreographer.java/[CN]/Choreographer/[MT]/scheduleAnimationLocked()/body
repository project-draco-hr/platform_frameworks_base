{
  if (!mAnimationScheduled) {
    mAnimationScheduled=true;
    if (USE_VSYNC) {
      if (DEBUG) {
        Log.d(TAG,"Scheduling vsync for animation.");
      }
      if (mFrameDisplayEventReceiver == null) {
        mFrameDisplayEventReceiver=new FrameDisplayEventReceiver(mLooper);
      }
      mFrameDisplayEventReceiver.scheduleVsync();
    }
 else {
      final long now=SystemClock.uptimeMillis();
      final long nextAnimationTime=Math.max(mLastAnimationTime + sFrameDelay,now);
      if (DEBUG) {
        Log.d(TAG,"Scheduling animation in " + (nextAnimationTime - now) + " ms.");
      }
      sendEmptyMessageAtTime(MSG_DO_ANIMATION,nextAnimationTime);
    }
  }
}
