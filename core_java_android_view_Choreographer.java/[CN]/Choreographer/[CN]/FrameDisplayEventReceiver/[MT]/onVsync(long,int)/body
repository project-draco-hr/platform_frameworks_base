{
  long now=System.nanoTime();
  if (timestampNanos > now) {
    Log.w(TAG,"Frame time is " + ((timestampNanos - now) * 0.000001f) + " ms in the future!  Check that graphics HAL is generating vsync "+ "timestamps using the correct timebase.");
    timestampNanos=now;
  }
  if (mHavePendingVsync) {
    Log.w(TAG,"Already have a pending vsync event.  There should only be " + "one at a time.");
  }
 else {
    mHavePendingVsync=true;
  }
  mTimestampNanos=timestampNanos;
  mFrame=frame;
  Message msg=Message.obtain(mHandler,this);
  msg.setAsynchronous(true);
  mHandler.sendMessageAtTime(msg,timestampNanos / NANOS_PER_MS);
}
