{
  View v=mKeyguardHost.findViewById(R.id.keyguard_host_view);
  if (v != null) {
    mKeyguardHost.removeView(v);
  }
  final LayoutInflater inflater=LayoutInflater.from(mContext);
  View view=inflater.inflate(R.layout.keyguard_host_view,mKeyguardHost,true);
  mKeyguardView=(KeyguardHostView)view.findViewById(R.id.keyguard_host_view);
  mKeyguardView.setLockPatternUtils(mLockPatternUtils);
  mKeyguardView.setViewMediatorCallback(mViewMediatorCallback);
  mKeyguardView.initializeSwitchingUserState(options != null && options.getBoolean(IS_SWITCHING_USER));
  if (mViewMediatorCallback != null) {
    KeyguardPasswordView kpv=(KeyguardPasswordView)mKeyguardView.findViewById(R.id.keyguard_password_view);
    if (kpv != null) {
      mViewMediatorCallback.setNeedsInput(kpv.needsInput());
    }
  }
  if (options != null) {
    int widgetToShow=options.getInt(LockPatternUtils.KEYGUARD_SHOW_APPWIDGET,AppWidgetManager.INVALID_APPWIDGET_ID);
    if (widgetToShow != AppWidgetManager.INVALID_APPWIDGET_ID) {
      mKeyguardView.goToWidget(widgetToShow);
    }
  }
}
