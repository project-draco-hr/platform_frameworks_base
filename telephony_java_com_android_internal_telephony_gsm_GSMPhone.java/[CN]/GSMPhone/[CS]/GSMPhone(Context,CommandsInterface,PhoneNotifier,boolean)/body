{
  super(notifier,context,ci,unitTestMode);
  if (ci instanceof SimulatedRadioControl) {
    mSimulatedRadioControl=(SimulatedRadioControl)ci;
  }
  mCM.setPhoneType(Phone.PHONE_TYPE_GSM);
  mIccCard.set(UiccController.getInstance(this).getIccCard());
  mIccRecords=mIccCard.get().getIccRecords();
  mCT=new GsmCallTracker(this);
  mSST=new GsmServiceStateTracker(this);
  mSMS=new GsmSMSDispatcher(this,mSmsStorageMonitor,mSmsUsageMonitor);
  mDataConnectionTracker=new GsmDataConnectionTracker(this);
  if (!unitTestMode) {
    mSimPhoneBookIntManager=new SimPhoneBookInterfaceManager(this);
    mSimSmsIntManager=new SimSmsInterfaceManager(this,mSMS);
    mSubInfo=new PhoneSubInfo(this);
  }
  mCM.registerForAvailable(this,EVENT_RADIO_AVAILABLE,null);
  registerForSimRecordEvents();
  mCM.registerForOffOrNotAvailable(this,EVENT_RADIO_OFF_OR_NOT_AVAILABLE,null);
  mCM.registerForOn(this,EVENT_RADIO_ON,null);
  mCM.setOnUSSD(this,EVENT_USSD,null);
  mCM.setOnSuppServiceNotification(this,EVENT_SSN,null);
  mSST.registerForNetworkAttached(this,EVENT_REGISTERED_TO_NETWORK,null);
  if (false) {
    try {
      debugSocket=new ServerSocket();
      debugSocket.setReuseAddress(true);
      debugSocket.bind(new InetSocketAddress("127.0.0.1",6666));
      debugPortThread=new Thread(new Runnable(){
        public void run(){
          for (; ; ) {
            try {
              Socket sock;
              sock=debugSocket.accept();
              Log.i(LOG_TAG,"New connection; resetting radio");
              mCM.resetRadio(null);
              sock.close();
            }
 catch (            IOException ex) {
              Log.w(LOG_TAG,"Exception accepting socket",ex);
            }
          }
        }
      }
,"GSMPhone debug");
      debugPortThread.start();
    }
 catch (    IOException ex) {
      Log.w(LOG_TAG,"Failure to open com.android.internal.telephony.debug socket",ex);
    }
  }
  SystemProperties.set(TelephonyProperties.CURRENT_ACTIVE_PHONE,new Integer(Phone.PHONE_TYPE_GSM).toString());
}
