{
  final StaticLayout layout=mLayout;
  if (layout == null) {
    return;
  }
  final int saveCount=c.save();
  final int innerPaddingX=mInnerPaddingX;
  c.translate(mPaddingLeft + innerPaddingX,mPaddingTop);
  final int lineCount=layout.getLineCount();
  final Paint textPaint=mTextPaint;
  final Paint paint=mPaint;
  final RectF bounds=mLineBounds;
  if (Color.alpha(mBackgroundColor) > 0) {
    final float cornerRadius=mCornerRadius;
    float previousBottom=layout.getLineTop(0);
    paint.setColor(mBackgroundColor);
    paint.setStyle(Style.FILL);
    for (int i=0; i < lineCount; i++) {
      bounds.left=layout.getLineLeft(i) - innerPaddingX;
      bounds.right=layout.getLineRight(i) + innerPaddingX;
      bounds.top=previousBottom;
      bounds.bottom=layout.getLineBottom(i);
      previousBottom=bounds.bottom;
      c.drawRoundRect(bounds,cornerRadius,cornerRadius,paint);
    }
  }
  if (mEdgeType == CaptionStyle.EDGE_TYPE_OUTLINE) {
    textPaint.setStrokeJoin(Join.ROUND);
    textPaint.setStrokeWidth(mOutlineWidth);
    textPaint.setColor(mEdgeColor);
    textPaint.setStyle(Style.FILL_AND_STROKE);
    for (int i=0; i < lineCount; i++) {
      layout.drawText(c,i,i);
    }
  }
 else   if (mEdgeType == CaptionStyle.EDGE_TYPE_DROP_SHADOW) {
    textPaint.setShadowLayer(mShadowRadius,mShadowOffsetX,mShadowOffsetY,mEdgeColor);
  }
  textPaint.setColor(mForegroundColor);
  textPaint.setStyle(Style.FILL);
  for (int i=0; i < lineCount; i++) {
    layout.drawText(c,i,i);
  }
  textPaint.setShadowLayer(0,0,0,0);
  c.restoreToCount(saveCount);
}
