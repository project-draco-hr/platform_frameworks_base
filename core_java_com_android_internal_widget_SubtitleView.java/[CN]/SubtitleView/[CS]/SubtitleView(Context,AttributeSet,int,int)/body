{
  super(context,attrs);
  final TypedArray a=context.obtainStyledAttributes(attrs,android.R.styleable.TextView,defStyleAttr,defStyleRes);
  CharSequence text="";
  int textSize=15;
  final int n=a.getIndexCount();
  for (int i=0; i < n; i++) {
    int attr=a.getIndex(i);
switch (attr) {
case android.R.styleable.TextView_text:
      text=a.getText(attr);
    break;
case android.R.styleable.TextView_lineSpacingExtra:
  mSpacingAdd=a.getDimensionPixelSize(attr,(int)mSpacingAdd);
break;
case android.R.styleable.TextView_lineSpacingMultiplier:
mSpacingMult=a.getFloat(attr,mSpacingMult);
break;
case android.R.styleable.TextAppearance_textSize:
textSize=a.getDimensionPixelSize(attr,textSize);
break;
}
}
final Resources res=getContext().getResources();
final DisplayMetrics m=res.getDisplayMetrics();
mCornerRadius=res.getDimensionPixelSize(com.android.internal.R.dimen.subtitle_corner_radius);
mOutlineWidth=res.getDimensionPixelSize(com.android.internal.R.dimen.subtitle_outline_width);
mShadowRadius=res.getDimensionPixelSize(com.android.internal.R.dimen.subtitle_shadow_radius);
mShadowOffsetX=res.getDimensionPixelSize(com.android.internal.R.dimen.subtitle_shadow_offset);
mShadowOffsetY=mShadowOffsetX;
mTextPaint=new TextPaint();
mTextPaint.setAntiAlias(true);
mTextPaint.setSubpixelText(true);
mPaint=new Paint();
mPaint.setAntiAlias(true);
setText(text);
setTextSize(textSize);
}
