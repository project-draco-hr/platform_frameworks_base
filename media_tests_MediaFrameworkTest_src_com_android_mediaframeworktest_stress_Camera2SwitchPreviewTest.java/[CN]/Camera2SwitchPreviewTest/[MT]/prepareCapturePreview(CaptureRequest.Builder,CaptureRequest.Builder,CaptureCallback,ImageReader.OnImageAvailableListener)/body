{
  Size captureSz=mOrderedStillSizes.get(0);
  Size previewSz=mOrderedPreviewSizes.get(1);
  if (VERBOSE) {
    Log.v(TAG,String.format("Prepare single capture (%s) and preview (%s)",captureSz.toString(),previewSz.toString()));
  }
  updatePreviewSurface(previewSz);
  createImageReader(captureSz,ImageFormat.JPEG,MAX_READER_IMAGES,imageListener);
  List<Surface> outputSurfaces=new ArrayList<Surface>();
  outputSurfaces.add(mPreviewSurface);
  outputSurfaces.add(mReaderSurface);
  mSessionListener=new BlockingSessionCallback();
  mSession=configureCameraSession(mCamera,outputSurfaces,mSessionListener,mHandler);
  previewRequest.addTarget(mPreviewSurface);
  stillRequest.addTarget(mPreviewSurface);
  stillRequest.addTarget(mReaderSurface);
  mSession.setRepeatingRequest(previewRequest.build(),resultListener,mHandler);
}
