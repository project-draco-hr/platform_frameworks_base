{
  if (args.length != 2) {
    System.err.println("Usage: Compile [log file] [output file]");
    System.exit(0);
  }
  Root root=new Root();
  List<Record> records=new ArrayList<Record>();
  BufferedReader in=new BufferedReader(new InputStreamReader(new FileInputStream(args[0])));
  String line;
  while ((line=in.readLine()) != null) {
    if (line.startsWith("I/PRELOAD")) {
      line=line.substring(19);
      records.add(new Record(line));
    }
  }
  for (  Record record : records) {
    root.indexProcess(record);
  }
  for (  Record record : records) {
    root.indexClassOperation(record);
  }
  in.close();
  root.toFile(args[1]);
}
