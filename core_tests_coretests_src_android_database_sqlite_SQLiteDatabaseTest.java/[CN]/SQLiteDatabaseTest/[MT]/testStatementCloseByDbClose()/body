{
  mDatabase.execSQL("CREATE TABLE test (i int, j int);");
  Thread t1=new Thread(){
    @Override public void run(){
      int N=26;
      mDatabase.setMaxSqlCacheSize(N);
      SQLiteStatement stmt;
      for (int i=0; i < N; i++) {
        stmt=mDatabase.compileStatement("insert into test values(" + i + ", ?);");
        stmt.bindLong(1,1);
        if (i == 0) {
          setStmt0Id(stmt.getSqlStatementId());
        }
        stmt.executeInsert();
        stmt.close();
      }
    }
  }
;
  t1.start();
  t1.join();
  Thread t2=new Thread(){
    @Override public void run(){
      SQLiteStatement stmt1=mDatabase.compileStatement("select * from test where i = ?;");
      stmt1.bindLong(1,1);
      stmt1.close();
    }
  }
;
  t2.start();
  t2.join();
  ArrayList<Integer> statementIds=mDatabase.getQueuedUpStmtList();
  assertTrue(getStmt0Id() > 0);
  assertTrue(statementIds.contains(stmt0Id));
  assertEquals(1,statementIds.size());
  Thread t3=new Thread(){
    @Override public void run(){
      mDatabase.close();
    }
  }
;
  t3.start();
  t3.join();
  statementIds=mDatabase.getQueuedUpStmtList();
  assertEquals(0,statementIds.size());
}
