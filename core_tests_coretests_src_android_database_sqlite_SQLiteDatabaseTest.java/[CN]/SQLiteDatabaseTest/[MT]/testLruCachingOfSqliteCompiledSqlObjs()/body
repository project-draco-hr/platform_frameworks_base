{
  mDatabase.execSQL("CREATE TABLE test (i int, j int);");
  mDatabase.execSQL("insert into test values(1,1);");
  int N=SQLiteDatabase.MAX_SQL_CACHE_SIZE;
  mDatabase.setMaxSqlCacheSize(N);
  ArrayList<Integer> stmtObjs=new ArrayList<Integer>();
  ArrayList<String> sqlStrings=new ArrayList<String>();
  SQLiteStatement stmt0=null;
  for (int i=0; i < N + 1; i++) {
    String s="select * from test where i = " + i;
    sqlStrings.add(s);
    SQLiteStatement c=mDatabase.compileStatement(s);
    stmtObjs.add(i,c.getSqlStatementId());
    if (i == 0) {
      stmt0=c;
    }
    c.close();
  }
  assertEquals(0,stmt0.getSqlStatementId());
  for (int i=1; i < N + 1; i++) {
    SQLiteCompiledSql compSql=mDatabase.getCompiledStatementForSql(sqlStrings.get(i));
    assertTrue(stmtObjs.contains(compSql.nStatement));
  }
}
