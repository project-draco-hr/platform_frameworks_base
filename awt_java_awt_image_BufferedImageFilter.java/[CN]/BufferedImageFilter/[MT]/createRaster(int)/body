{
  boolean createdValidBuffer=false;
  try {
    raster=cm.createCompatibleWritableRaster(width,height);
    int rasterType=raster.getDataBuffer().getDataType();
    if (rasterType == dataType) {
switch (rasterType) {
case DataBuffer.TYPE_INT:
{
          iData=accessor.getDataInt(raster.getDataBuffer());
          if (iData != null) {
            createdValidBuffer=true;
          }
          break;
        }
case DataBuffer.TYPE_BYTE:
{
        bData=accessor.getDataByte(raster.getDataBuffer());
        if (bData != null) {
          createdValidBuffer=true;
        }
        break;
      }
default :
    createdValidBuffer=false;
}
if (cm == ColorModel.getRGBdefault()) {
  forcedRGB=true;
}
}
 else {
createdValidBuffer=false;
}
}
 catch (Exception e) {
createdValidBuffer=false;
}
if (createdValidBuffer == false) {
cm=ColorModel.getRGBdefault();
raster=cm.createCompatibleWritableRaster(width,height);
iData=accessor.getDataInt(raster.getDataBuffer());
bData=null;
forcedRGB=true;
}
}
