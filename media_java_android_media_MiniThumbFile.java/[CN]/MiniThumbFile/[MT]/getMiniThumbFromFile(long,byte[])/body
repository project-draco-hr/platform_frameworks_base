{
  RandomAccessFile r=miniThumbDataFile();
  if (r == null)   return null;
  long pos=id * BYTES_PER_MINTHUMB;
  FileLock lock=null;
  try {
    lock=mChannel.lock();
    r.seek(pos);
    if (r.readByte() == 1) {
      long magic=r.readLong();
      int length=r.readInt();
      int got=r.read(data,0,length);
      if (got != length)       return null;
      return data;
    }
 else {
      return null;
    }
  }
 catch (  IOException ex) {
    Log.w(TAG,"got exception when reading thumbnail: " + ex);
    return null;
  }
catch (  RuntimeException ex) {
    Log.e(TAG,"Got exception when reading thumbnail, id = " + id + ", disk full or mount read-only? "+ ex.getClass());
  }
 finally {
    try {
      if (lock != null)       lock.release();
    }
 catch (    IOException ex) {
    }
  }
  return null;
}
