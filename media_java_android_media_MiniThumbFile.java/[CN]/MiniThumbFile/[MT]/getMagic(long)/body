{
  RandomAccessFile r=miniThumbDataFile();
  if (r != null) {
    long pos=id * BYTES_PER_MINTHUMB;
    FileLock lock=null;
    try {
      lock=mChannel.lock();
      if (r.length() >= pos + 1 + 8) {
        r.seek(pos);
        if (r.readByte() == 1) {
          long fileMagic=r.readLong();
          return fileMagic;
        }
      }
    }
 catch (    IOException ex) {
      Log.v(TAG,"Got exception checking file magic: ",ex);
    }
catch (    RuntimeException ex) {
      Log.e(TAG,"Got exception when reading magic, id = " + id + ", disk full or mount read-only? "+ ex.getClass());
    }
 finally {
      try {
        if (lock != null)         lock.release();
      }
 catch (      IOException ex) {
      }
    }
  }
  return 0;
}
