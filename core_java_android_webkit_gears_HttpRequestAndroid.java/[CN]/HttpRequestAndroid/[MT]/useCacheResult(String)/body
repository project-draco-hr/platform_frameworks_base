{
  Map<String,String> cacheRequestHeaders=new HashMap<String,String>();
  Iterator<Map.Entry<String,String[]>> it=requestHeaders.entrySet().iterator();
  while (it.hasNext()) {
    Map.Entry<String,String[]> entry=it.next();
    cacheRequestHeaders.put(entry.getKey(),entry.getValue()[HEADERS_MAP_INDEX_VALUE]);
  }
  CacheResult cacheResult=CacheManager.getCacheFile(url,cacheRequestHeaders);
  if (cacheResult == null) {
    if (logEnabled)     log("No CacheResult for " + url);
    return false;
  }
  if (logEnabled)   log("Got CacheResult from browser cache");
  long expires=cacheResult.getExpires();
  if (expires >= 0 && System.currentTimeMillis() >= expires) {
    log("CacheResult expired " + (System.currentTimeMillis() - expires) + " milliseconds ago");
    return false;
  }
  inputStream=cacheResult.getInputStream();
  if (inputStream == null) {
    log("No inputStream for CacheResult " + url);
    return false;
  }
  synthesizeHeadersFromCacheResult(cacheResult);
  return true;
}
