{
  if (logEnabled)   log("open " + method + " "+ url);
  inputStream=null;
  responseLine=null;
  responseHeaders=null;
  if (!method.equals("GET") && !method.equals("POST")) {
    log("Method " + method + " not supported");
    return false;
  }
  try {
    URL url_object=new URL(url);
    String protocol=url_object.getProtocol();
    if (protocol == null) {
      log("null protocol for URL " + url);
      return false;
    }
    protocol=protocol.toLowerCase();
    if (!"http".equals(protocol) && !"https".equals(protocol)) {
      log("Url has wrong protocol: " + url);
      return false;
    }
    connection=(HttpURLConnection)url_object.openConnection();
    connection.setRequestMethod(method);
    connection.setInstanceFollowRedirects(false);
    connection.setUseCaches(false);
    connection.setDoOutput(method.equals("POST"));
    connection.setDoInput(!method.equals("HEAD"));
    if (connection instanceof javax.net.ssl.HttpsURLConnection) {
      ((HttpsURLConnection)connection).setHostnameVerifier(new StrictHostnameVerifier());
    }
    return true;
  }
 catch (  IOException e) {
    log("Got IOException in open: " + e.toString());
    return false;
  }
}
