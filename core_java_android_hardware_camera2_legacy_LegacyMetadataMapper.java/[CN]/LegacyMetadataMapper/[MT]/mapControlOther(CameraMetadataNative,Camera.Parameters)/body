{
{
    int stabModes[]=p.isVideoStabilizationSupported() ? new int[]{CONTROL_VIDEO_STABILIZATION_MODE_OFF,CONTROL_VIDEO_STABILIZATION_MODE_ON} : new int[]{CONTROL_VIDEO_STABILIZATION_MODE_OFF};
    m.set(CONTROL_AVAILABLE_VIDEO_STABILIZATION_MODES,stabModes);
  }
  final int AE=0, AWB=1, AF=2;
  int[] maxRegions=new int[3];
  maxRegions[AE]=p.getMaxNumMeteringAreas();
  maxRegions[AWB]=0;
  maxRegions[AF]=p.getMaxNumFocusAreas();
  if (LIE_ABOUT_AE_MAX_REGIONS) {
    maxRegions[AE]=0;
  }
  if (LIE_ABOUT_AF_MAX_REGIONS) {
    maxRegions[AF]=0;
  }
  m.set(CONTROL_MAX_REGIONS,maxRegions);
  List<String> effectModes=p.getSupportedColorEffects();
  int[] supportedEffectModes=(effectModes == null) ? new int[0] : ArrayUtils.convertStringListToIntArray(effectModes,sLegacyEffectMode,sEffectModes);
  m.set(CONTROL_AVAILABLE_EFFECTS,supportedEffectModes);
  List<String> sceneModes=p.getSupportedSceneModes();
  List<Integer> supportedSceneModes=ArrayUtils.convertStringListToIntList(sceneModes,sLegacySceneModes,sSceneModes);
  if (supportedSceneModes == null) {
    supportedSceneModes=new ArrayList<Integer>();
    supportedSceneModes.add(CONTROL_SCENE_MODE_DISABLED);
  }
  if (p.getMaxNumDetectedFaces() > 0) {
    supportedSceneModes.add(CONTROL_SCENE_MODE_FACE_PRIORITY);
  }
  m.set(CONTROL_AVAILABLE_SCENE_MODES,ArrayUtils.toIntArray(supportedSceneModes));
}
