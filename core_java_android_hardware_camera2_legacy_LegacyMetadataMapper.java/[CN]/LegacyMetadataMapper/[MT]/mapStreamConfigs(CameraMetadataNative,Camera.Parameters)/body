{
  m.set(SCALER_AVAILABLE_MIN_FRAME_DURATIONS,new StreamConfigurationDuration[]{});
  m.set(SCALER_AVAILABLE_STALL_DURATIONS,new StreamConfigurationDuration[]{});
  ArrayList<StreamConfiguration> availableStreamConfigs=new ArrayList<>();
  List<Size> previewSizes=p.getSupportedPreviewSizes();
  appendStreamConfig(availableStreamConfigs,HAL_PIXEL_FORMAT_IMPLEMENTATION_DEFINED,previewSizes);
  appendStreamConfig(availableStreamConfigs,ImageFormat.YUV_420_888,previewSizes);
  for (  int format : p.getSupportedPreviewFormats()) {
    if (ImageFormat.isPublicFormat(format)) {
      appendStreamConfig(availableStreamConfigs,format,previewSizes);
    }
 else {
      Log.w(TAG,String.format("mapStreamConfigs - Skipping non-public format %x",format));
    }
  }
  appendStreamConfig(availableStreamConfigs,HAL_PIXEL_FORMAT_BLOB,p.getSupportedPictureSizes());
  m.set(SCALER_AVAILABLE_STREAM_CONFIGURATIONS,availableStreamConfigs.toArray(new StreamConfiguration[0]));
}
