{
  boolean flashAvailable=false;
  List<String> supportedFlashModes=p.getSupportedFlashModes();
  if (supportedFlashModes != null) {
    if (!(supportedFlashModes.contains(Camera.Parameters.FLASH_MODE_OFF) && supportedFlashModes.size() == 1)) {
      flashAvailable=true;
    }
  }
  if (LIE_ABOUT_FLASH && flashAvailable) {
    Log.w(TAG,"mapFlash - lying; saying we never support flash");
    flashAvailable=false;
  }
  m.set(FLASH_INFO_AVAILABLE,flashAvailable);
}
