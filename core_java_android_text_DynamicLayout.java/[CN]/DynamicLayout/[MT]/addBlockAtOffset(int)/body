{
  final int line=getLineForOffset(offset);
  if (mBlockEndLines == null) {
    mBlockEndLines=new int[ArrayUtils.idealIntArraySize(1)];
    mBlockEndLines[mNumberOfBlocks]=line;
    mNumberOfBlocks++;
    return;
  }
  final int previousBlockEndLine=mBlockEndLines[mNumberOfBlocks - 1];
  if (line > previousBlockEndLine) {
    if (mNumberOfBlocks == mBlockEndLines.length) {
      int[] blockEndLines=new int[ArrayUtils.idealIntArraySize(mNumberOfBlocks + 1)];
      System.arraycopy(mBlockEndLines,0,blockEndLines,0,mNumberOfBlocks);
      mBlockEndLines=blockEndLines;
    }
    mBlockEndLines[mNumberOfBlocks]=line;
    mNumberOfBlocks++;
  }
}
