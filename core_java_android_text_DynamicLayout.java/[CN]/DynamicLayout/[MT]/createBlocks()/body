{
  int offset=BLOCK_MINIMUM_CHARACTER_LENGTH;
  mNumberOfBlocks=0;
  final CharSequence text=mDisplay;
  while (true) {
    offset=TextUtils.indexOf(text,'\n',offset);
    if (offset < 0) {
      addBlockAtOffset(text.length());
      break;
    }
 else {
      addBlockAtOffset(offset);
      offset+=BLOCK_MINIMUM_CHARACTER_LENGTH;
    }
  }
  mBlockIndices=new int[mBlockEndLines.length];
  for (int i=0; i < mBlockEndLines.length; i++) {
    mBlockIndices[i]=INVALID_BLOCK_INDEX;
  }
}
