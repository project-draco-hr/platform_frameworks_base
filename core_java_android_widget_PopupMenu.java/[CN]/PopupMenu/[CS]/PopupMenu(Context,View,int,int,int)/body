{
  mContext=context;
  mAnchor=anchor;
  mMenu=new MenuBuilder(context);
  mMenu.setCallback(new MenuBuilder.Callback(){
    @Override public boolean onMenuItemSelected(    MenuBuilder menu,    MenuItem item){
      if (mMenuItemClickListener != null) {
        return mMenuItemClickListener.onMenuItemClick(item);
      }
      return false;
    }
    @Override public void onMenuModeChange(    MenuBuilder menu){
    }
  }
);
  mPopup=new MenuPopupHelper(context,mMenu,anchor,false,popupStyleAttr,popupStyleRes);
  mPopup.setGravity(gravity);
  mPopup.setCallback(new MenuPresenter.Callback(){
    @Override public void onCloseMenu(    MenuBuilder menu,    boolean allMenusAreClosing){
      if (mDismissListener != null) {
        mDismissListener.onDismiss(PopupMenu.this);
      }
    }
    @Override public boolean onOpenSubMenu(    MenuBuilder subMenu){
      return false;
    }
  }
);
}
