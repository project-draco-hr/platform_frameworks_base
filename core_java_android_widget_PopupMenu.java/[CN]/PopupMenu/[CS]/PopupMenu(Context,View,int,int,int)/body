{
  mContext=context;
  mAnchor=anchor;
  mMenu=new MenuBuilder(context);
  mMenu.setCallback(new MenuBuilder.Callback(){
    @Override public boolean onMenuItemSelected(    MenuBuilder menu,    MenuItem item){
      if (mMenuItemClickListener != null) {
        return mMenuItemClickListener.onMenuItemClick(item);
      }
      return false;
    }
    @Override public void onMenuModeChange(    MenuBuilder menu){
    }
  }
);
  mPopup=new MenuPopupHelper(context,mMenu,anchor,false,popupStyleAttr,popupStyleRes);
  mPopup.setGravity(gravity);
  mPopup.setOnDismissListener(new PopupWindow.OnDismissListener(){
    @Override public void onDismiss(){
      if (mOnDismissListener != null) {
        mOnDismissListener.onDismiss(PopupMenu.this);
      }
    }
  }
);
}
