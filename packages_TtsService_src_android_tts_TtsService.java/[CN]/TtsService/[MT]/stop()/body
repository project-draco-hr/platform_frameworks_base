{
  int result=TextToSpeech.TTS_ERROR;
  boolean speechQueueAvailable=false;
  try {
    speechQueueAvailable=speechQueueLock.tryLock(1000,TimeUnit.MILLISECONDS);
    if (speechQueueAvailable) {
      Log.i("TTS","Stopping");
      mSpeechQueue.clear();
      result=nativeSynth.stop();
      mIsSpeaking=false;
      if (mPlayer != null) {
        try {
          mPlayer.stop();
        }
 catch (        IllegalStateException e) {
        }
      }
      Log.i("TTS","Stopped");
    }
  }
 catch (  InterruptedException e) {
    Log.e("TTS stop","tryLock interrupted");
    e.printStackTrace();
  }
 finally {
    if (speechQueueAvailable) {
      speechQueueLock.unlock();
    }
    return result;
  }
}
