{
  if (filename.length() > MAX_FILENAME_LENGTH) {
    return false;
  }
  if (text.length() >= MAX_SPEECH_ITEM_CHAR_LENGTH) {
    return false;
  }
  try {
    File tempFile=new File(filename);
    if (tempFile.exists()) {
      Log.v("TtsService","File " + filename + " exists, deleting.");
      tempFile.delete();
    }
    if (!tempFile.createNewFile()) {
      Log.e("TtsService","Unable to synthesize to file: can't create " + filename);
      return false;
    }
    tempFile.delete();
  }
 catch (  IOException e) {
    Log.e("TtsService","Can't create " + filename + " due to exception "+ e);
    return false;
  }
  mSpeechQueue.add(new SpeechItem(callingApp,text,params,SpeechItem.TEXT_TO_FILE,filename));
  if (!mIsSpeaking) {
    processSpeechQueue();
  }
  return true;
}
