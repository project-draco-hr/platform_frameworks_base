{
  if (getContext().checkCallingOrSelfPermission(Manifest.permission.DUMP) != PackageManager.PERMISSION_GRANTED) {
    pw.println("Permission Denial: can't dump MediaSessionService from from pid=" + Binder.getCallingPid() + ", uid="+ Binder.getCallingUid());
    return;
  }
  pw.println("MEDIA SESSION SERVICE (dumpsys media_session)");
  pw.println();
synchronized (mLock) {
    pw.println("Session for calls:" + mPrioritySession);
    if (mPrioritySession != null) {
      mPrioritySession.dump(pw,"");
    }
    int count=mRecords.size();
    pw.println(count + " Sessions:");
    for (int i=0; i < count; i++) {
      mRecords.get(i).dump(pw,"");
      pw.println();
    }
    mPriorityStack.dumpLocked(pw,"");
    pw.println("Providers:");
    count=mProviders.size();
    for (int i=0; i < count; i++) {
      MediaRouteProviderProxy provider=mProviders.get(i);
      provider.dump(pw,"");
    }
  }
}
