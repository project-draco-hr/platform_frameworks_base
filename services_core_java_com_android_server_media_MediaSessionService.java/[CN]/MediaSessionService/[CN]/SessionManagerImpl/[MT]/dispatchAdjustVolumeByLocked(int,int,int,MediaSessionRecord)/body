{
  int direction=0;
  int steps=delta;
  if (delta > 0) {
    direction=1;
  }
 else   if (delta < 0) {
    direction=-1;
    steps=-delta;
  }
  if (DEBUG) {
    String sessionInfo=session == null ? null : session.getSessionInfo().toString();
    Log.d(TAG,"Adjusting session " + sessionInfo + " by "+ delta+ ". flags="+ flags+ ", suggestedStream="+ suggestedStream);
  }
  if (session == null) {
    for (int i=0; i < steps; i++) {
      try {
        mAudioService.adjustSuggestedStreamVolume(direction,suggestedStream,flags,getContext().getOpPackageName());
      }
 catch (      RemoteException e) {
        Log.e(TAG,"Error adjusting default volume.",e);
      }
    }
  }
 else {
    if (session.getPlaybackType() == MediaSession.VOLUME_TYPE_LOCAL) {
      for (int i=0; i < steps; i++) {
        try {
          mAudioService.adjustSuggestedStreamVolume(direction,session.getAudioStream(),flags,getContext().getOpPackageName());
        }
 catch (        RemoteException e) {
          Log.e(TAG,"Error adjusting volume for stream " + session.getAudioStream(),e);
        }
      }
    }
 else     if (session.getPlaybackType() == MediaSession.VOLUME_TYPE_REMOTE) {
      session.adjustVolumeBy(delta);
    }
  }
}
