{
  final int pid=Binder.getCallingPid();
  final int uid=Binder.getCallingUid();
  final long token=Binder.clearCallingIdentity();
  try {
    if (componentName != null) {
      enforcePackageName(componentName.getPackageName(),uid);
    }
    enforceMediaPermissions(componentName,pid,uid);
    ArrayList<IBinder> binders=new ArrayList<IBinder>();
synchronized (mLock) {
      ArrayList<MediaSessionRecord> records=mPriorityStack.getActiveSessions();
      int size=records.size();
      for (int i=0; i < size; i++) {
        binders.add(records.get(i).getControllerBinder().asBinder());
      }
    }
    return binders;
  }
  finally {
    Binder.restoreCallingIdentity(token);
  }
}
