{
  final int pid=Binder.getCallingPid();
  final int uid=Binder.getCallingUid();
  final long token=Binder.clearCallingIdentity();
  try {
    if (componentName != null) {
      enforcePackageName(componentName.getPackageName(),uid);
    }
    enforceMediaPermissions(componentName,pid,uid);
    ArrayList<IBinder> binders=new ArrayList<IBinder>();
synchronized (mLock) {
      for (int i=mSessions.size() - 1; i >= 0; i--) {
        MediaSessionRecord record=mSessions.get(i);
        if (isSessionDiscoverable(record)) {
          binders.add(record.getControllerBinder().asBinder());
        }
      }
    }
    return binders;
  }
  finally {
    Binder.restoreCallingIdentity(token);
  }
}
