{
synchronized (mLock) {
    if (!mAllSessions.contains(record)) {
      Log.d(TAG,"Unknown session updated. Ignoring.");
      return;
    }
    mPriorityStack.onSessionStateChange(record);
    if (record.isSystemPriority()) {
      if (record.isActive()) {
        if (mPrioritySession != null) {
          Log.w(TAG,"Replacing existing priority session with a new session");
        }
        mPrioritySession=record;
      }
 else {
        if (mPrioritySession == record) {
          mPrioritySession=null;
        }
      }
    }
  }
  mHandler.post(MessageHandler.MSG_SESSIONS_CHANGED,record.getUserId(),0);
}
