{
  if (state.isKeyguardShowingAndNotOccluded() && state.keyguardNeedsInput) {
    mLp.flags&=~WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE;
    mLp.flags&=~WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM;
  }
 else   if (state.isKeyguardShowingAndNotOccluded() || state.statusBarFocusable) {
    mLp.flags&=~WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE;
    mLp.flags|=WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM;
  }
 else {
    mLp.flags|=WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE;
    mLp.flags&=~WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM;
  }
}
