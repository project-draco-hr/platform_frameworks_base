{
  if (cameraId == null) {
    throw new IllegalArgumentException("cameraId was null");
  }
 else   if (listener == null) {
    throw new IllegalArgumentException("listener was null");
  }
 else   if (handler == null) {
    if (Looper.myLooper() != null) {
      handler=new Handler();
    }
 else {
      throw new IllegalArgumentException("Looper doesn't exist in the calling thread");
    }
  }
  final CameraDevice camera=openCamera(cameraId);
  camera.setDeviceListener(listener,handler);
  handler.post(new Runnable(){
    @Override public void run(){
      listener.onOpened(camera);
    }
  }
);
}
