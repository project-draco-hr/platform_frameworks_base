{
  if (DEBUG) {
    Log.v(TAG,String.format("Camera id %s has status changed to 0x%x",id,status));
  }
  if (!validStatus(status)) {
    Log.e(TAG,String.format("Ignoring invalid device %s status 0x%x",id,status));
    return;
  }
  Integer oldStatus=mDeviceStatus.put(id,status);
  if (oldStatus != null && oldStatus == status) {
    if (DEBUG) {
      Log.v(TAG,String.format("Device status changed to 0x%x, which is what it already was",status));
    }
    return;
  }
  if (oldStatus != null && isAvailable(status) == isAvailable(oldStatus)) {
    if (DEBUG) {
      Log.v(TAG,String.format("Device status was previously available (%d), " + " and is now again available (%d)" + "so no new client visible update will be sent",isAvailable(status),isAvailable(status)));
    }
    return;
  }
  final int callbackCount=mCallbackMap.size();
  for (int i=0; i < callbackCount; i++) {
    Handler handler=mCallbackMap.valueAt(i);
    final AvailabilityCallback callback=mCallbackMap.keyAt(i);
    postSingleUpdate(callback,handler,id,status);
  }
}
