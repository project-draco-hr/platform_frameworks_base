{
  if (portNumber < 0 || portNumber >= mDeviceInfo.getInputPortCount()) {
    throw new IllegalArgumentException("portNumber " + portNumber + " out of range");
  }
  final int portNumberF=portNumber;
  return new MidiSender(){
    @Override public void connect(    MidiReceiver receiver){
synchronized (mInputPortSenders) {
        ArrayList<MidiReceiver> receivers=mInputPortReceivers[portNumberF];
synchronized (receivers) {
          receivers.add(receiver);
          MidiOutputPort outputPort=mInputPortSenders[portNumberF];
          if (outputPort != null) {
            outputPort.connect(receiver);
          }
        }
      }
    }
    @Override public void disconnect(    MidiReceiver receiver){
synchronized (mInputPortSenders) {
        ArrayList<MidiReceiver> receivers=mInputPortReceivers[portNumberF];
synchronized (receivers) {
          receivers.remove(receiver);
          MidiOutputPort outputPort=mInputPortSenders[portNumberF];
          if (outputPort != null) {
            outputPort.disconnect(receiver);
          }
        }
      }
    }
  }
;
}
