{
  if (files.length == 0) {
    return;
  }
  if (basePath == null) {
    throw new NullPointerException();
  }
  FileDescriptor oldStateFd=oldState != null ? oldState.getFileDescriptor() : null;
  if (data.fd == null) {
    throw new NullPointerException();
  }
  FileDescriptor newStateFd=newState.getFileDescriptor();
  if (newStateFd == null) {
    throw new NullPointerException();
  }
  int err=performBackup_native(basePath,oldStateFd,data.fd,newStateFd,files);
  if (err != 0) {
    throw new RuntimeException("Backup failed");
  }
}
