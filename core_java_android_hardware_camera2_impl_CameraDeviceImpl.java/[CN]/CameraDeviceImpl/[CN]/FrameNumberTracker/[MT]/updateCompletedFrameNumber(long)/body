{
  if (frameNumber <= mCompletedFrameNumber) {
    throw new IllegalArgumentException("frame number " + frameNumber + " is a repeat");
  }
 else   if (frameNumber <= mCompletedReprocessFrameNumber) {
    if (mSkippedRegularFrameNumbers.isEmpty() == true || frameNumber < mSkippedRegularFrameNumbers.element()) {
      throw new IllegalArgumentException("frame number " + frameNumber + " is a repeat");
    }
 else     if (frameNumber > mSkippedRegularFrameNumbers.element()) {
      throw new IllegalArgumentException("frame number " + frameNumber + " comes out of order. Expecting "+ mSkippedRegularFrameNumbers.element());
    }
    mSkippedRegularFrameNumbers.remove();
  }
 else {
    for (long i=Math.max(mCompletedFrameNumber,mCompletedReprocessFrameNumber) + 1; i < frameNumber; i++) {
      mSkippedReprocessFrameNumbers.add(i);
    }
  }
  mCompletedFrameNumber=frameNumber;
}
