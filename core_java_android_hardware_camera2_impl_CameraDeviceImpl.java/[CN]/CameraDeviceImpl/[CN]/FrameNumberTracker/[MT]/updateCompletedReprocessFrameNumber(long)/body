{
  if (frameNumber < mCompletedReprocessFrameNumber) {
    throw new IllegalArgumentException("frame number " + frameNumber + " is a repeat");
  }
 else   if (frameNumber < mCompletedFrameNumber) {
    if (mSkippedReprocessFrameNumbers.isEmpty() == true || frameNumber < mSkippedReprocessFrameNumbers.element()) {
      throw new IllegalArgumentException("frame number " + frameNumber + " is a repeat");
    }
 else     if (frameNumber > mSkippedReprocessFrameNumbers.element()) {
      throw new IllegalArgumentException("frame number " + frameNumber + " comes out of order. Expecting "+ mSkippedReprocessFrameNumbers.element());
    }
    mSkippedReprocessFrameNumbers.remove();
  }
 else {
    for (long i=Math.max(mCompletedFrameNumber,mCompletedReprocessFrameNumber) + 1; i < frameNumber; i++) {
      mSkippedRegularFrameNumbers.add(i);
    }
  }
  mCompletedReprocessFrameNumber=frameNumber;
}
