{
  mContext=context;
  mAudioManager=(AudioManager)context.getSystemService(Context.AUDIO_SERVICE);
  mStreamType=streamType;
  mMaxStreamVolume=mAudioManager.getStreamMaxVolume(mStreamType);
  HandlerThread thread=new HandlerThread(TAG + ".CallbackHandler");
  thread.start();
  mHandler=new Handler(thread.getLooper(),this);
  mCallback=callback;
  mOriginalStreamVolume=mAudioManager.getStreamVolume(mStreamType);
  mVolumeObserver=new Observer(mHandler);
  mContext.getContentResolver().registerContentObserver(System.getUriFor(System.VOLUME_SETTINGS[mStreamType]),false,mVolumeObserver);
  mReceiver.setListening(true);
  if (defaultUri == null) {
    if (mStreamType == AudioManager.STREAM_RING) {
      defaultUri=Settings.System.DEFAULT_RINGTONE_URI;
    }
 else     if (mStreamType == AudioManager.STREAM_NOTIFICATION) {
      defaultUri=Settings.System.DEFAULT_NOTIFICATION_URI;
    }
 else {
      defaultUri=Settings.System.DEFAULT_ALARM_ALERT_URI;
    }
  }
  mDefaultUri=defaultUri;
  mHandler.sendEmptyMessage(MSG_INIT_SAMPLE);
}
