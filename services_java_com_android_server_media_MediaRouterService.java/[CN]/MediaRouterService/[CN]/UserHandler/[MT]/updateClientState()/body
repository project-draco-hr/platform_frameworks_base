{
  mClientStateUpdateScheduled=false;
  MediaRouterClientState state=new MediaRouterClientState();
  state.globallySelectedRouteId=mGloballySelectedRouteRecord != null ? mGloballySelectedRouteRecord.getUniqueId() : null;
  final int providerCount=mProviderRecords.size();
  for (int i=0; i < providerCount; i++) {
    mProviderRecords.get(i).appendClientState(state);
  }
  try {
synchronized (mService.mLock) {
      mUserRecord.mState=state;
      final int count=mUserRecord.mClientRecords.size();
      for (int i=0; i < count; i++) {
        mTempClients.add(mUserRecord.mClientRecords.get(i).mClient);
      }
    }
    final int count=mTempClients.size();
    for (int i=0; i < count; i++) {
      try {
        mTempClients.get(i).onStateChanged();
      }
 catch (      RemoteException ex) {
      }
    }
  }
  finally {
    mTempClients.clear();
  }
}
