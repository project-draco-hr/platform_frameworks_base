{
  final IBinder binder=client.asBinder();
  ClientRecord clientRecord=mAllClientRecords.get(binder);
  if (clientRecord != null) {
    if (!clientRecord.mTrusted) {
      routeTypes&=~MediaRouter.ROUTE_TYPE_REMOTE_DISPLAY;
    }
    if (clientRecord.mRouteTypes != routeTypes || clientRecord.mActiveScan != activeScan) {
      if (DEBUG) {
        Slog.d(TAG,clientRecord + ": Set discovery request, routeTypes=0x" + Integer.toHexString(routeTypes)+ ", activeScan="+ activeScan);
      }
      clientRecord.mRouteTypes=routeTypes;
      clientRecord.mActiveScan=activeScan;
      clientRecord.mUserRecord.mHandler.sendEmptyMessage(UserHandler.MSG_UPDATE_DISCOVERY_REQUEST);
    }
  }
}
