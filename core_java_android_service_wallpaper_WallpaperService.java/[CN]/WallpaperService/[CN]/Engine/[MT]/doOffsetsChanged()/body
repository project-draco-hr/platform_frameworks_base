{
  if (mDestroyed) {
    return;
  }
  float xOffset;
  float yOffset;
synchronized (mLock) {
    xOffset=mPendingXOffset;
    yOffset=mPendingYOffset;
    mOffsetMessageEnqueued=false;
  }
  if (DEBUG)   Log.v(TAG,"Offsets change in " + this + ": "+ xOffset+ ","+ yOffset);
  final int availw=mIWallpaperEngine.mReqWidth - mCurWidth;
  final int xPixels=availw > 0 ? -(int)(availw * xOffset + .5f) : 0;
  final int availh=mIWallpaperEngine.mReqHeight - mCurHeight;
  final int yPixels=availh > 0 ? -(int)(availh * yOffset + .5f) : 0;
  onOffsetsChanged(xOffset,yOffset,xPixels,yPixels);
}
