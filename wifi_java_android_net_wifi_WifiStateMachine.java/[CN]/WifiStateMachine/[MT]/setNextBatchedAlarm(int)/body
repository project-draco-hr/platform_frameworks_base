{
  if (mBatchedScanSettings == null || scansExpected < 1)   return;
  mBatchedScanMinPollTime=System.currentTimeMillis() + mBatchedScanSettings.scanIntervalSec * 1000;
  if (mBatchedScanSettings.maxScansPerBatch < scansExpected) {
    scansExpected=mBatchedScanSettings.maxScansPerBatch;
  }
  int secToFull=mBatchedScanSettings.scanIntervalSec;
  secToFull*=scansExpected;
  int debugPeriod=SystemProperties.getInt("wifi.batchedScan.pollPeriod",0);
  if (debugPeriod > 0)   secToFull=debugPeriod;
  mAlarmManager.set(AlarmManager.RTC_WAKEUP,System.currentTimeMillis() + ((secToFull - (mBatchedScanSettings.scanIntervalSec / 2)) * 1000),mBatchedScanIntervalIntent);
}
