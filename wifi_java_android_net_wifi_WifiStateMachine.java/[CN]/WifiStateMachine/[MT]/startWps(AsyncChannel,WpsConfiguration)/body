{
  WpsResult result;
switch (config.setup) {
case PIN_FROM_DEVICE:
case PBC:
case PIN_FROM_ACCESS_POINT:
    Message resultMsg=channel.sendMessageSynchronously(CMD_START_WPS,config);
  result=(WpsResult)resultMsg.obj;
resultMsg.recycle();
break;
default :
result=new WpsResult(Status.FAILURE);
break;
}
return result;
}
