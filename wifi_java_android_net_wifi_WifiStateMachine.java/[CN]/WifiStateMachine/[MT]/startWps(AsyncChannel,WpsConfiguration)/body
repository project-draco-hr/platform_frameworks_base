{
  String result=null;
switch (config.setup) {
case PIN_FROM_DEVICE:
    Message resultMsg=channel.sendMessageSynchronously(CMD_START_WPS,config);
  result=(String)resultMsg.obj;
resultMsg.recycle();
break;
case PBC:
case PIN_FROM_ACCESS_POINT:
sendMessage(obtainMessage(CMD_START_WPS,config));
break;
}
return result;
}
