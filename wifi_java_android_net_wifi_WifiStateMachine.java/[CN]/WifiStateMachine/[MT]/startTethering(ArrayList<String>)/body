{
  boolean wifiAvailable=false;
  checkAndSetConnectivityInstance();
  String[] wifiRegexs=mCm.getTetherableWifiRegexs();
  for (  String intf : available) {
    for (    String regex : wifiRegexs) {
      if (intf.matches(regex)) {
        InterfaceConfiguration ifcg=null;
        try {
          ifcg=nwService.getInterfaceConfig(intf);
          if (ifcg != null) {
            ifcg.addr=new LinkAddress(NetworkUtils.numericToInetAddress("192.168.43.1"),24);
            ifcg.interfaceFlags="[up]";
            nwService.setInterfaceConfig(intf,ifcg);
          }
        }
 catch (        Exception e) {
          Log.e(TAG,"Error configuring interface " + intf + ", :"+ e);
          setWifiApEnabled(null,false);
          return;
        }
        if (mCm.tether(intf) != ConnectivityManager.TETHER_ERROR_NO_ERROR) {
          Log.e(TAG,"Error tethering on " + intf);
          setWifiApEnabled(null,false);
          return;
        }
        break;
      }
    }
  }
}
