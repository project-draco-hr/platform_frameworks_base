{
  boolean wifiAvailable=false;
  checkAndSetConnectivityInstance();
  String[] wifiRegexs=mCm.getTetherableWifiRegexs();
  for (  String intf : available) {
    for (    String regex : wifiRegexs) {
      if (intf.matches(regex)) {
        InterfaceConfiguration ifcg=null;
        try {
          ifcg=mNwService.getInterfaceConfig(intf);
          if (ifcg != null) {
            ifcg.setLinkAddress(new LinkAddress(NetworkUtils.numericToInetAddress("192.168.43.1"),24));
            ifcg.setInterfaceUp();
            mNwService.setInterfaceConfig(intf,ifcg);
          }
        }
 catch (        Exception e) {
          loge("Error configuring interface " + intf + ", :"+ e);
          return false;
        }
        if (mCm.tether(intf) != ConnectivityManager.TETHER_ERROR_NO_ERROR) {
          loge("Error tethering on " + intf);
          return false;
        }
        mTetherInterfaceName=intf;
        return true;
      }
    }
  }
  return false;
}
