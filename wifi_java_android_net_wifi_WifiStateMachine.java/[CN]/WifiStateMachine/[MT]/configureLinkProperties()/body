{
  if (mWifiConfigStore.isUsingStaticIp(mLastNetworkId)) {
    mLinkProperties=mWifiConfigStore.getLinkProperties(mLastNetworkId);
  }
 else {
synchronized (mDhcpResultsLock) {
      if ((mDhcpResults != null) && (mDhcpResults.linkProperties != null)) {
        mLinkProperties=mDhcpResults.linkProperties;
      }
    }
    mLinkProperties.setHttpProxy(mWifiConfigStore.getProxyProperties(mLastNetworkId));
  }
  mLinkProperties.setInterfaceName(mInterfaceName);
  if (DBG)   log("netId=" + mLastNetworkId + " Link configured: "+ mLinkProperties);
}
