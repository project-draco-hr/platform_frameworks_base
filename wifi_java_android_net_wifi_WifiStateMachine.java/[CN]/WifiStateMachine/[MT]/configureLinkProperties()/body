{
  if (mWifiConfigStore.isUsingStaticIp(mLastNetworkId)) {
    mLinkProperties=mWifiConfigStore.getLinkProperties(mLastNetworkId);
    mLinkProperties=WifiConfiguration.stripUndisplayableConfig(mLinkProperties);
  }
 else {
synchronized (mDhcpInfoInternal) {
      mLinkProperties=mDhcpInfoInternal.makeLinkProperties();
      mLinkProperties=WifiConfiguration.stripUndisplayableConfig(mLinkProperties);
    }
    mLinkProperties.setHttpProxy(mWifiConfigStore.getProxyProperties(mLastNetworkId));
  }
  mLinkProperties.setInterfaceName(mInterfaceName);
  if (DBG) {
    log("netId=" + mLastNetworkId + " Link configured: "+ mLinkProperties.toString());
  }
}
