{
  try {
    mLinkProperties.setInterface(NetworkInterface.getByName(mInterfaceName));
  }
 catch (  SocketException e) {
    Log.e(TAG,"SocketException creating NetworkInterface from " + mInterfaceName + ". e="+ e);
    return;
  }
catch (  NullPointerException e) {
    Log.e(TAG,"NPE creating NetworkInterface. e=" + e);
    return;
  }
synchronized (mDhcpInfo) {
    mLinkProperties.addAddress(NetworkUtils.intToInetAddress(mDhcpInfo.ipAddress));
    mLinkProperties.setGateway(NetworkUtils.intToInetAddress(mDhcpInfo.gateway));
    mLinkProperties.addDns(NetworkUtils.intToInetAddress(mDhcpInfo.dns1));
    mLinkProperties.addDns(NetworkUtils.intToInetAddress(mDhcpInfo.dns2));
  }
  ProxyProperties proxyProperties=WifiConfigStore.getProxyProperties(mLastNetworkId);
  if (proxyProperties != null) {
    mLinkProperties.setHttpProxy(proxyProperties);
    Log.d(TAG,"netId=" + mLastNetworkId + " proxy configured: "+ proxyProperties.toString());
  }
}
