{
  if (WifiConfigStore.isUsingStaticIp(mLastNetworkId)) {
    mLinkProperties=WifiConfigStore.getLinkProperties(mLastNetworkId);
  }
 else {
synchronized (mDhcpInfo) {
      mLinkProperties.addLinkAddress(new LinkAddress(NetworkUtils.intToInetAddress(mDhcpInfo.ipAddress),NetworkUtils.intToInetAddress(mDhcpInfo.netmask)));
      mLinkProperties.setGateway(NetworkUtils.intToInetAddress(mDhcpInfo.gateway));
      mLinkProperties.addDns(NetworkUtils.intToInetAddress(mDhcpInfo.dns1));
      mLinkProperties.addDns(NetworkUtils.intToInetAddress(mDhcpInfo.dns2));
    }
    mLinkProperties.setHttpProxy(WifiConfigStore.getProxyProperties(mLastNetworkId));
  }
  mLinkProperties.setInterfaceName(mInterfaceName);
  Log.d(TAG,"netId=" + mLastNetworkId + " Link configured: "+ mLinkProperties.toString());
}
