{
  if (mWifiConfigStore.isUsingStaticIp(mLastNetworkId)) {
    mLinkProperties=mWifiConfigStore.getLinkProperties(mLastNetworkId);
    mLinkProperties=WifiConfiguration.stripUndisplayableConfig(mLinkProperties);
  }
 else {
synchronized (mDhcpResultsLock) {
      if ((mDhcpResults != null) && (mDhcpResults.linkProperties != null)) {
        mLinkProperties=WifiConfiguration.stripUndisplayableConfig(mDhcpResults.linkProperties);
      }
    }
    mLinkProperties.setHttpProxy(mWifiConfigStore.getProxyProperties(mLastNetworkId));
  }
  mLinkProperties.setInterfaceName(mInterfaceName);
  if (DBG)   log("netId=" + mLastNetworkId + " Link configured: "+ mLinkProperties);
}
