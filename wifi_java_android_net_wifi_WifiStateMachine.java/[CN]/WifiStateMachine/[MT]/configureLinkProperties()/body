{
  mLinkProperties.setInterfaceName(mInterfaceName);
synchronized (mDhcpInfo) {
    mLinkProperties.addLinkAddress(new LinkAddress(NetworkUtils.intToInetAddress(mDhcpInfo.ipAddress),NetworkUtils.intToInetAddress(mDhcpInfo.netmask)));
    mLinkProperties.setGateway(NetworkUtils.intToInetAddress(mDhcpInfo.gateway));
    mLinkProperties.addDns(NetworkUtils.intToInetAddress(mDhcpInfo.dns1));
    mLinkProperties.addDns(NetworkUtils.intToInetAddress(mDhcpInfo.dns2));
  }
  ProxyProperties proxyProperties=WifiConfigStore.getProxyProperties(mLastNetworkId);
  if (proxyProperties != null) {
    mLinkProperties.setHttpProxy(proxyProperties);
    Log.d(TAG,"netId=" + mLastNetworkId + " proxy configured: "+ proxyProperties.toString());
  }
}
