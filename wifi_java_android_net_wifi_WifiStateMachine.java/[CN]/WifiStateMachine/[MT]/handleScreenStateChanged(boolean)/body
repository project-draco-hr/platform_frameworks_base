{
  if (DBG)   log("handleScreenStateChanged: " + screenOn);
  enableRssiPolling(screenOn);
  if (mBackgroundScanSupported) {
    enableBackgroundScanCommand(screenOn == false);
  }
  if (screenOn)   enableAllNetworks();
  if (mUserWantsSuspendOpt.get()) {
    if (screenOn) {
      sendMessage(obtainMessage(CMD_SET_SUSPEND_OPT_ENABLED,0,0));
    }
 else {
      mSuspendWakeLock.acquire(2000);
      sendMessage(obtainMessage(CMD_SET_SUSPEND_OPT_ENABLED,1,0));
    }
  }
  mScreenBroadcastReceived.set(true);
}
