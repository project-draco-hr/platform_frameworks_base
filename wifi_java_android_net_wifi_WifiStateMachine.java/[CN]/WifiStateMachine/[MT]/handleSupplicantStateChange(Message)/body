{
  StateChangeResult stateChangeResult=(StateChangeResult)message.obj;
  SupplicantState state=stateChangeResult.state;
  EventLog.writeEvent(EVENTLOG_SUPPLICANT_STATE_CHANGED,state.ordinal());
  mWifiInfo.setSupplicantState(state);
  if (SupplicantState.isConnecting(state)) {
    mWifiInfo.setNetworkId(stateChangeResult.networkId);
  }
 else {
    mWifiInfo.setNetworkId(WifiConfiguration.INVALID_NETWORK_ID);
  }
  mWifiInfo.setBSSID(stateChangeResult.BSSID);
  mWifiInfo.setSSID(stateChangeResult.SSID);
  mSupplicantStateTracker.sendMessage(Message.obtain(message));
  return state;
}
