{
  if (DBG)   log(getName() + "\n");
  EventLog.writeEvent(EVENTLOG_WIFI_STATE_CHANGED,getName());
  final Message message=Message.obtain(getCurrentMessage());
  final WifiConfiguration config=(WifiConfiguration)message.obj;
  new Thread(new Runnable(){
    public void run(){
      if (startSoftApWithConfig(config)) {
        if (DBG)         log("Soft AP start successful");
        sendMessage(CMD_START_AP_SUCCESS);
      }
 else {
        loge("Soft AP start failed");
        sendMessage(CMD_START_AP_FAILURE);
      }
    }
  }
).start();
}
