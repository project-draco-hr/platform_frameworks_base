{
  if (DBG)   log(getName() + "\n");
  final Message message=getCurrentMessage();
  if (message.what == CMD_START_AP) {
    final WifiConfiguration config=(WifiConfiguration)message.obj;
    if (config == null) {
      mWifiApConfigChannel.sendMessage(CMD_REQUEST_AP_CONFIG);
    }
 else {
      mWifiApConfigChannel.sendMessage(CMD_SET_AP_CONFIG,config);
      startSoftApWithConfig(config);
    }
  }
 else {
    throw new RuntimeException("Illegal transition to SoftApStartingState: " + message);
  }
}
