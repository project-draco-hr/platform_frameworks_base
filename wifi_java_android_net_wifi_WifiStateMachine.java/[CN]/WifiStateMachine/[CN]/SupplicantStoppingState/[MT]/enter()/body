{
  if (DBG)   log(getName() + "\n");
  handleNetworkDisconnect();
  if (mDhcpStateMachine != null) {
    mDhcpStateMachine.doQuit();
  }
  if (DBG)   log("stopping supplicant");
  if (!mWifiNative.stopSupplicant()) {
    loge("Failed to stop supplicant");
  }
  sendMessageDelayed(obtainMessage(CMD_STOP_SUPPLICANT_FAILED,++mSupplicantStopFailureToken,0),SUPPLICANT_RESTART_INTERVAL_MSECS);
  mNetworkInfo.setIsAvailable(false);
  setWifiState(WIFI_STATE_DISABLING);
  sendSupplicantConnectionChangedBroadcast(false);
  mSupplicantStateTracker.sendMessage(CMD_RESET_SUPPLICANT_STATE);
}
