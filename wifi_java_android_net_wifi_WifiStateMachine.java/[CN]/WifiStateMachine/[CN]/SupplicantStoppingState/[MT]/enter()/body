{
  if (DBG)   Log.d(TAG,getName() + "\n");
  EventLog.writeEvent(EVENTLOG_WIFI_STATE_CHANGED,getName());
  Log.d(TAG,"stopping supplicant");
  if (!WifiNative.stopSupplicant()) {
    Log.e(TAG,"Failed to stop supplicant, issue kill");
    WifiNative.killSupplicant();
  }
  mNetworkInfo.setIsAvailable(false);
  handleNetworkDisconnect();
  setWifiState(WIFI_STATE_DISABLING);
  sendSupplicantConnectionChangedBroadcast(false);
  mSupplicantStateTracker.sendMessage(CMD_RESET_SUPPLICANT_STATE);
  mWpsStateMachine.sendMessage(CMD_RESET_WPS_STATE);
}
