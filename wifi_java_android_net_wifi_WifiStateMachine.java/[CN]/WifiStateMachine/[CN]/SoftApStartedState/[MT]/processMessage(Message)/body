{
switch (message.what) {
case CMD_STOP_AP:
    if (DBG)     log("Stopping Soft AP");
  try {
    mNwService.stopAccessPoint(mInterfaceName);
  }
 catch (  Exception e) {
    loge("Exception in stopAccessPoint()");
  }
setWifiApState(WIFI_AP_STATE_DISABLED);
transitionTo(mInitialState);
break;
case CMD_START_AP:
break;
case CMD_START_SUPPLICANT:
loge("Cannot start supplicant with a running soft AP");
setWifiState(WIFI_STATE_UNKNOWN);
break;
case CMD_TETHER_STATE_CHANGE:
TetherStateChange stateChange=(TetherStateChange)message.obj;
if (startTethering(stateChange.available)) {
transitionTo(mTetheringState);
}
break;
default :
return NOT_HANDLED;
}
return HANDLED;
}
