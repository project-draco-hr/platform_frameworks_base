{
  ExpectedValue expectedValue=new ExpectedValue(getContext().getResources().obtainTypedArray(typedArrayResourceId));
  File imageFile=new File(Environment.getExternalStorageDirectory(),fileName);
  ExifInterface exifInterface=new ExifInterface(imageFile.getAbsolutePath());
  if (VERBOSE) {
    printExifTagsAndValues(fileName,exifInterface);
  }
  compareWithExpectedValue(exifInterface,expectedValue);
  FileInputStream in=null;
  try {
    in=new FileInputStream(imageFile);
    exifInterface=new ExifInterface(in.getFD());
    if (VERBOSE) {
      printExifTagsAndValues(fileName,exifInterface);
    }
    compareWithExpectedValue(exifInterface,expectedValue);
  }
  finally {
    IoUtils.closeQuietly(in);
  }
}
