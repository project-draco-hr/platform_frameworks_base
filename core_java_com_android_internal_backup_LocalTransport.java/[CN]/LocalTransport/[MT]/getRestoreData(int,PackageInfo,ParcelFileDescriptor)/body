{
  if (DEBUG)   Log.v(TAG,"getting restore data " + token + " : "+ packageInfo.packageName);
  if (token != 0)   return -1;
  File packageDir=new File(mDataDir,packageInfo.packageName);
  File[] blobs=packageDir.listFiles();
  int err=0;
  if (blobs != null && blobs.length > 0) {
    BackupDataOutput out=new BackupDataOutput(outFd.getFileDescriptor());
    try {
      for (      File f : blobs) {
        FileInputStream in=new FileInputStream(f);
        int size=(int)f.length();
        byte[] buf=new byte[size];
        in.read(buf);
        String key=new String(Base64.decode(f.getName()));
        out.writeEntityHeader(key,size);
        out.writeEntityData(buf,size);
      }
    }
 catch (    Exception e) {
      Log.e(TAG,"Unable to read backup records");
      err=-1;
    }
  }
  return err;
}
