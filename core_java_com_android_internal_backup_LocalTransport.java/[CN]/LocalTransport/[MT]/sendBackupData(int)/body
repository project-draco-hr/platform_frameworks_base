{
  if (mFullBackupBuffer == null) {
    Log.w(TAG,"Attempted sendBackupData before performFullBackup");
    return TRANSPORT_ERROR;
  }
  if (numBytes > mFullBackupBuffer.length) {
    mFullBackupBuffer=new byte[numBytes];
  }
  while (numBytes > 0) {
    try {
      int nRead=mSocketInputStream.read(mFullBackupBuffer,0,numBytes);
      if (nRead < 0) {
        Log.w(TAG,"Unexpected EOD; failing backup");
        return TRANSPORT_ERROR;
      }
      mFullBackupOutputStream.write(mFullBackupBuffer,0,nRead);
      numBytes-=nRead;
    }
 catch (    IOException e) {
      Log.e(TAG,"Error handling backup data for " + mFullTargetPackage);
      return TRANSPORT_ERROR;
    }
  }
  if (DEBUG) {
    Log.v(TAG,"   stored " + numBytes + " of data");
  }
  return TRANSPORT_OK;
}
