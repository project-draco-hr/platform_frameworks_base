{
  if (mFullBackupBuffer == null) {
    Log.w(TAG,"Attempted sendBackupData before performFullBackup");
    return BackupTransport.TRANSPORT_ERROR;
  }
  if (numBytes > mFullBackupBuffer.length) {
    mFullBackupBuffer=new byte[numBytes];
  }
  while (numBytes > 0) {
    try {
      int nRead=mSocketInputStream.read(mFullBackupBuffer,0,numBytes);
      if (nRead < 0) {
        Log.w(TAG,"Unexpected EOD; failing backup");
        return BackupTransport.TRANSPORT_ERROR;
      }
      mFullBackupOutputStream.write(mFullBackupBuffer,0,nRead);
      numBytes-=nRead;
    }
 catch (    IOException e) {
      Log.e(TAG,"Error handling backup data for " + mFullTargetPackage);
      return BackupTransport.TRANSPORT_ERROR;
    }
  }
  return BackupTransport.TRANSPORT_OK;
}
