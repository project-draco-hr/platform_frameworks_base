{
  if (mSocket != null) {
    Log.e(TAG,"Attempt to initiate full backup while one is in progress");
    return BackupTransport.TRANSPORT_ERROR;
  }
  if (DEBUG) {
    Log.i(TAG,"performFullBackup : " + targetPackage);
  }
  try {
    mSocket=ParcelFileDescriptor.dup(socket.getFileDescriptor());
    mSocketInputStream=new FileInputStream(mSocket.getFileDescriptor());
  }
 catch (  IOException e) {
    Log.e(TAG,"Unable to process socket for full backup");
    return BackupTransport.TRANSPORT_ERROR;
  }
  mFullTargetPackage=targetPackage.packageName;
  FileOutputStream tarstream;
  try {
    File tarball=new File(mCurrentSetFullDir,mFullTargetPackage);
    tarstream=new FileOutputStream(tarball);
  }
 catch (  FileNotFoundException e) {
    return BackupTransport.TRANSPORT_ERROR;
  }
  mFullBackupOutputStream=new BufferedOutputStream(tarstream);
  mFullBackupBuffer=new byte[4096];
  return BackupTransport.TRANSPORT_OK;
}
