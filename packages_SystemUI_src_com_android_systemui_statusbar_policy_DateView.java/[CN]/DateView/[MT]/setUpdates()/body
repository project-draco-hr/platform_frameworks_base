{
  boolean update=mAttachedToWindow && mWindowVisible && isVisible();
  if (update != mUpdating) {
    mUpdating=update;
    if (update) {
      IntentFilter filter=new IntentFilter();
      filter.addAction(Intent.ACTION_TIME_TICK);
      filter.addAction(Intent.ACTION_TIME_CHANGED);
      filter.addAction(Intent.ACTION_TIMEZONE_CHANGED);
      filter.addAction(Intent.ACTION_LOCALE_CHANGED);
      mContext.registerReceiver(mIntentReceiver,filter,null,null);
      updateClock();
    }
 else {
      mContext.unregisterReceiver(mIntentReceiver);
    }
  }
}
