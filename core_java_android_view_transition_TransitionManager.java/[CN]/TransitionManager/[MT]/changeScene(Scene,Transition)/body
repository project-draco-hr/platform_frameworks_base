{
  final ViewGroup sceneRoot=scene.getSceneRoot();
  Transition runningTransition=sRunningTransitions.get(sceneRoot);
  if (runningTransition != null) {
    runningTransition.cancelTransition();
  }
  if (transition != null) {
    transition.captureValues(sceneRoot,true);
  }
  Scene previousScene=sceneRoot.getCurrentScene();
  if (previousScene != null) {
    previousScene.exit();
  }
  scene.enter();
  if (transition != null) {
    final ViewTreeObserver observer=sceneRoot.getViewTreeObserver();
    observer.addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener(){
      public boolean onPreDraw(){
        sceneRoot.getViewTreeObserver().removeOnPreDrawListener(this);
        sRunningTransitions.put(sceneRoot,transition);
        transition.addListener(new Transition.TransitionListenerAdapter(){
          @Override public void onTransitionEnd(          Transition transition){
            sRunningTransitions.remove(sceneRoot);
          }
        }
);
        transition.captureValues(sceneRoot,false);
        transition.play(sceneRoot);
        return true;
      }
    }
);
  }
}
