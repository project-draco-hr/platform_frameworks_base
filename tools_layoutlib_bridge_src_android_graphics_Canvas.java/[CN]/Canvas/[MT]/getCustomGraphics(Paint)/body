{
  Graphics2D g=getGraphics2d();
  g=(Graphics2D)g.create();
  g.setColor(new Color(paint.getColor()));
  int alpha=paint.getAlpha();
  float falpha=alpha / 255.f;
  Style style=paint.getStyle();
  if (style == Style.STROKE || style == Style.FILL_AND_STROKE) {
    PathEffect e=paint.getPathEffect();
    if (e instanceof DashPathEffect) {
      DashPathEffect dpe=(DashPathEffect)e;
      g.setStroke(new BasicStroke(paint.getStrokeWidth(),paint.getStrokeCap().getJavaCap(),paint.getStrokeJoin().getJavaJoin(),paint.getStrokeMiter(),dpe.getIntervals(),dpe.getPhase()));
    }
 else {
      g.setStroke(new BasicStroke(paint.getStrokeWidth(),paint.getStrokeCap().getJavaCap(),paint.getStrokeJoin().getJavaJoin(),paint.getStrokeMiter()));
    }
  }
  Xfermode xfermode=paint.getXfermode();
  if (xfermode instanceof PorterDuffXfermode) {
    PorterDuff.Mode mode=((PorterDuffXfermode)xfermode).getMode();
    setModeInGraphics(mode,g,falpha);
  }
 else {
    if (mLogger != null && xfermode != null) {
      mLogger.warning(String.format("Xfermode '%1$s' is not supported in the Layout Editor.",xfermode.getClass().getCanonicalName()));
    }
    g.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER,falpha));
  }
  Shader shader=paint.getShader();
  if (shader != null) {
    java.awt.Paint shaderPaint=shader.getJavaPaint();
    if (shaderPaint != null) {
      g.setPaint(shaderPaint);
    }
 else {
      if (mLogger != null) {
        mLogger.warning(String.format("Shader '%1$s' is not supported in the Layout Editor.",shader.getClass().getCanonicalName()));
      }
    }
  }
  return g;
}
