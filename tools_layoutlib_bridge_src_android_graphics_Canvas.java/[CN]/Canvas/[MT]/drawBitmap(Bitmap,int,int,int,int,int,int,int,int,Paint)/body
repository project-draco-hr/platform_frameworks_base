{
  BufferedImage image=bitmap.getImage();
  Graphics2D g=getGraphics2d();
  Composite c=null;
  if (paint != null) {
    if (paint.isFilterBitmap()) {
      g=(Graphics2D)g.create();
      g.setRenderingHint(RenderingHints.KEY_INTERPOLATION,RenderingHints.VALUE_INTERPOLATION_BILINEAR);
    }
    if (paint.getAlpha() != 0xFF) {
      c=g.getComposite();
      g.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER,paint.getAlpha() / 255.f));
    }
  }
  g.drawImage(image,dleft,dtop,dright,dbottom,sleft,stop,sright,sbottom,null);
  if (paint != null) {
    if (paint.isFilterBitmap()) {
      g.dispose();
    }
    if (c != null) {
      g.setComposite(c);
    }
  }
}
