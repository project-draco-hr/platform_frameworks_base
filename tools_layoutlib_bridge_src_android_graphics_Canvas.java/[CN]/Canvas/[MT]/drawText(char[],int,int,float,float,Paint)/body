{
  Graphics2D g=getGraphics2d();
  g=(Graphics2D)g.create();
  g.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);
  g.setFont(paint.getFont());
  g.setColor(new Color(paint.getColor()));
  int alpha=paint.getAlpha();
  float falpha=alpha / 255.f;
  g.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER,falpha));
  if (paint.getTextAlign() != Align.LEFT) {
    float m=paint.measureText(text,index,count);
    if (paint.getTextAlign() == Align.CENTER) {
      x-=m / 2;
    }
 else     if (paint.getTextAlign() == Align.RIGHT) {
      x-=m;
    }
  }
  g.drawChars(text,index,count,(int)x,(int)y);
  g.dispose();
}
