{
  int fullDark=0;
  int topDark=0;
  int centerDark=0;
  int bottomDark=0;
  int fullBright=0;
  int topBright=0;
  int centerBright=0;
  int bottomBright=0;
  int bottomMedium=0;
  if (mContext.getApplicationInfo().targetSdkVersion <= Build.VERSION_CODES.KITKAT) {
    fullDark=R.drawable.popup_full_dark;
    topDark=R.drawable.popup_top_dark;
    centerDark=R.drawable.popup_center_dark;
    bottomDark=R.drawable.popup_bottom_dark;
    fullBright=R.drawable.popup_full_bright;
    topBright=R.drawable.popup_top_bright;
    centerBright=R.drawable.popup_center_bright;
    bottomBright=R.drawable.popup_bottom_bright;
    bottomMedium=R.drawable.popup_bottom_medium;
  }
  fullDark=a.getResourceId(R.styleable.AlertDialog_fullDark,fullDark);
  topDark=a.getResourceId(R.styleable.AlertDialog_topDark,topDark);
  centerDark=a.getResourceId(R.styleable.AlertDialog_centerDark,centerDark);
  bottomDark=a.getResourceId(R.styleable.AlertDialog_bottomDark,bottomDark);
  fullBright=a.getResourceId(R.styleable.AlertDialog_fullBright,fullBright);
  topBright=a.getResourceId(R.styleable.AlertDialog_topBright,topBright);
  centerBright=a.getResourceId(R.styleable.AlertDialog_centerBright,centerBright);
  bottomBright=a.getResourceId(R.styleable.AlertDialog_bottomBright,bottomBright);
  bottomMedium=a.getResourceId(R.styleable.AlertDialog_bottomMedium,bottomMedium);
  View[] views=new View[4];
  boolean[] light=new boolean[4];
  View lastView=null;
  boolean lastLight=false;
  int pos=0;
  if (hasTitle) {
    views[pos]=topPanel;
    light[pos]=false;
    pos++;
  }
  views[pos]=(contentPanel.getVisibility() == View.GONE) ? null : contentPanel;
  light[pos]=mListView != null;
  pos++;
  if (customPanel != null) {
    views[pos]=customPanel;
    light[pos]=mForceInverseBackground;
    pos++;
  }
  if (hasButtons) {
    views[pos]=buttonPanel;
    light[pos]=true;
  }
  boolean setView=false;
  for (pos=0; pos < views.length; pos++) {
    View v=views[pos];
    if (v == null) {
      continue;
    }
    if (lastView != null) {
      if (!setView) {
        lastView.setBackgroundResource(lastLight ? topBright : topDark);
      }
 else {
        lastView.setBackgroundResource(lastLight ? centerBright : centerDark);
      }
      setView=true;
    }
    lastView=v;
    lastLight=light[pos];
  }
  if (lastView != null) {
    if (setView) {
      lastView.setBackgroundResource(lastLight ? (hasButtons ? bottomMedium : bottomBright) : bottomDark);
    }
 else {
      lastView.setBackgroundResource(lastLight ? fullBright : fullDark);
    }
  }
  if ((mListView != null) && (mAdapter != null)) {
    mListView.setAdapter(mAdapter);
    if (mCheckedItem > -1) {
      mListView.setItemChecked(mCheckedItem,true);
      mListView.setSelection(mCheckedItem);
    }
  }
}
