{
  LinearLayout contentPanel=(LinearLayout)mWindow.findViewById(R.id.contentPanel);
  setupContent(contentPanel);
  boolean hasButtons=setupButtons();
  LinearLayout topPanel=(LinearLayout)mWindow.findViewById(R.id.topPanel);
  TypedArray a=mContext.obtainStyledAttributes(null,com.android.internal.R.styleable.AlertDialog,com.android.internal.R.attr.alertDialogStyle,0);
  boolean hasTitle=setupTitle(topPanel);
  View buttonPanel=mWindow.findViewById(R.id.buttonPanel);
  if (!hasButtons) {
    buttonPanel.setVisibility(View.GONE);
  }
  FrameLayout customPanel=null;
  if (mView != null) {
    customPanel=(FrameLayout)mWindow.findViewById(R.id.customPanel);
    FrameLayout custom=(FrameLayout)mWindow.findViewById(R.id.custom);
    custom.addView(mView,new LayoutParams(MATCH_PARENT,MATCH_PARENT));
    if (mViewSpacingSpecified) {
      custom.setPadding(mViewSpacingLeft,mViewSpacingTop,mViewSpacingRight,mViewSpacingBottom);
    }
    if (mListView != null) {
      ((LinearLayout.LayoutParams)customPanel.getLayoutParams()).weight=0;
    }
  }
 else {
    mWindow.findViewById(R.id.customPanel).setVisibility(View.GONE);
  }
  if (hasTitle) {
    View divider=null;
    if (mMessage != null || mView != null || mListView != null) {
      divider=mWindow.findViewById(R.id.titleDivider);
    }
 else {
      divider=mWindow.findViewById(R.id.titleDividerTop);
    }
    if (divider != null) {
      divider.setVisibility(View.VISIBLE);
    }
  }
  setBackground(topPanel,contentPanel,customPanel,hasButtons,a,hasTitle,buttonPanel);
  a.recycle();
}
