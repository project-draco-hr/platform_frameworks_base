{
  if (mServiceState == null) {
    return;
  }
  boolean simReadyOrUnknown=mSimState == IccCardConstants.State.READY || mSimState == IccCardConstants.State.UNKNOWN;
  boolean visible=(simReadyOrUnknown || isCdma()) && hasService() && mDataState == TelephonyManager.DATA_CONNECTED;
  int networkType=mServiceState.getDataNetworkType();
  if (DEBUG)   Log.d(TAG,String.format("Noting data connection for network type %s: %svisible",networkType,visible ? "" : "not "));
  try {
    mBatteryStats.notePhoneDataConnectionState(networkType,visible);
  }
 catch (  RemoteException e) {
    Log.w(TAG,"Error noting data connection state",e);
  }
}
