{
  mRunningTaskList=mActivityManager.getRunningTasks(MAX_TASKS,ActivityManager.TASKS_GET_THUMBNAILS,mThumbnailReceiver);
  if (DBG)   Log.v(TAG,"Portrait: " + mPortraitMode);
  for (  RunningTaskInfo r : mRunningTaskList) {
    if (r.thumbnail != null) {
      int thumbWidth=r.thumbnail.getWidth();
      int thumbHeight=r.thumbnail.getHeight();
      if (DBG)       Log.v(TAG,"Got thumbnail " + thumbWidth + "x"+ thumbHeight);
      ActivityDescription desc=findActivityDescription(r.id);
      if (desc != null) {
        desc.thumbnail=r.thumbnail;
        desc.description=r.description;
        if ((mPortraitMode && thumbWidth > thumbHeight) || (!mPortraitMode && thumbWidth < thumbHeight)) {
          Matrix matrix=new Matrix();
          matrix.setRotate(90.0f,(float)thumbWidth / 2,(float)thumbHeight / 2);
          desc.matrix=matrix;
        }
      }
 else {
        if (DBG)         Log.v(TAG,"Couldn't find ActivityDesc for id=" + r.id);
      }
    }
 else {
      if (DBG)       Log.v(TAG,"*** RUNNING THUMBNAIL WAS NULL ***");
    }
  }
}
