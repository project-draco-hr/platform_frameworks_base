{
  int childCount=mHostView.getChildCount();
  int middleIndex=(childCount - 1) / 2;
  long delayPerElement=VISIBILITY_ANIMATION_DELAY_PER_ELEMENT;
  boolean isAppearing=getActiveState() == SHOWN;
  boolean isDisappearing=getActiveState() == HIDDEN;
  for (int i=0; i < childCount; i++) {
    int delayIndex;
    if (i <= middleIndex) {
      delayIndex=i * 2;
    }
 else {
      int distToMiddle=i - middleIndex;
      delayIndex=(childCount - 1) - (distToMiddle - 1) * 2;
    }
    long startDelay=0;
    if (isAppearing || isDisappearing) {
      if (isDisappearing) {
        delayIndex=childCount - 1 - delayIndex;
      }
      startDelay=delayIndex * delayPerElement;
    }
    View child=mHostView.getChildAt(i);
    ViewState viewState=mStateMap.get(child);
    child.animate().setInterpolator(mFastOutSlowInInterpolator).setStartDelay(startDelay).alpha(viewState.alpha).withLayer().translationX(viewState.xTranslation).translationY(viewState.yTranslation).scaleX(viewState.scale).scaleY(viewState.scale);
  }
}
