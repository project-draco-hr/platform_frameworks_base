{
  Calendar end=GregorianCalendar.getInstance();
  end.setTimeInMillis(now);
  int day=end.get(Calendar.DAY_OF_MONTH);
  end.set(Calendar.DAY_OF_MONTH,mPolicyResetDay);
  end.set(Calendar.HOUR_OF_DAY,0);
  end.set(Calendar.MINUTE,0);
  end.set(Calendar.SECOND,0);
  end.set(Calendar.MILLISECOND,0);
  if (day >= mPolicyResetDay) {
    int month=end.get(Calendar.MONTH);
    if (month == Calendar.DECEMBER) {
      end.set(Calendar.YEAR,end.get(Calendar.YEAR) + 1);
      month=Calendar.JANUARY - 1;
    }
    end.set(Calendar.MONTH,month + 1);
  }
  if (SystemProperties.get(TESTING_ENABLED_PROPERTY).equals("true")) {
    end=GregorianCalendar.getInstance();
    end.setTimeInMillis(now);
    end.add(Calendar.SECOND,TESTING_RESET_PERIOD_SEC);
  }
  return end;
}
