{
  if (VDBG || (mPolicyThreshold.get() != 0)) {
    Slog.d(TAG,"onResetAlarm - last period had " + mRecorder.getPeriodRx(0) + " bytes read and "+ mRecorder.getPeriodTx(0)+ " written");
  }
  long now=getBestTime(false);
  if (mNtpActive || (mNtpServer == null)) {
    Calendar end=calculatePeriodEnd(now);
    Calendar start=calculatePeriodStart(end);
    if (mRecorder.setNextPeriod(start,end)) {
      onPollAlarm();
    }
    mAlarmManager.cancel(mPendingResetIntent);
    long offset=end.getTimeInMillis() - now;
    mAlarmManager.set(AlarmManager.ELAPSED_REALTIME,SystemClock.elapsedRealtime() + offset,mPendingResetIntent);
  }
 else {
    if (VDBG)     Slog.d(TAG,"no authoritative time - not resetting period");
  }
}
