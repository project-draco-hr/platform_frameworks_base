{
  checkForSubscriberId();
  boolean startNewPeriod=true;
  if (start.equals(mPeriodStart) && end.equals(mPeriodEnd)) {
    if (DBG) {
      Slog.d(TAG,"same period (" + start.getTimeInMillis() + ","+ end.getTimeInMillis()+ ") - ammending data");
    }
    startNewPeriod=false;
  }
 else {
    if (DBG) {
      if (start.equals(mPeriodEnd) || start.after(mPeriodEnd)) {
        Slog.d(TAG,"next period (" + start.getTimeInMillis() + ","+ end.getTimeInMillis()+ ") - old end was "+ mPeriodEnd.getTimeInMillis()+ ", following");
      }
 else {
        Slog.d(TAG,"new period (" + start.getTimeInMillis() + ","+ end.getTimeInMillis()+ ") replacing old ("+ mPeriodStart.getTimeInMillis()+ ","+ mPeriodEnd.getTimeInMillis()+ ")");
      }
    }
synchronized (mParent) {
      ++mCurrentPeriod;
      if (mCurrentPeriod >= mPeriodCount)       mCurrentPeriod=0;
      mPeriodRxData[mCurrentPeriod]=0;
      mPeriodTxData[mCurrentPeriod]=0;
    }
  }
  setPeriodStart(start);
  setPeriodEnd(end);
  record();
  return startNewPeriod;
}
