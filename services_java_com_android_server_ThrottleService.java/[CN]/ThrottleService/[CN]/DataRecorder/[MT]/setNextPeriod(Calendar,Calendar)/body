{
  checkForSubscriberId();
  boolean startNewPeriod=true;
  if (DBG) {
    Slog.d(TAG,"setting next period to " + start.getTimeInMillis() + " --until-- "+ end.getTimeInMillis());
  }
  if (end.before(mPeriodStart)) {
    if (DBG) {
      Slog.d(TAG," old start was " + mPeriodStart.getTimeInMillis() + ", wiping");
    }
synchronized (mParent) {
      mPeriodRxData[mCurrentPeriod]=0;
      mPeriodTxData[mCurrentPeriod]=0;
    }
  }
 else   if (start.after(mPeriodEnd)) {
    if (DBG) {
      Slog.d(TAG," old end was " + mPeriodEnd.getTimeInMillis() + ", following");
    }
synchronized (mParent) {
      ++mCurrentPeriod;
      if (mCurrentPeriod >= mPeriodCount)       mCurrentPeriod=0;
      mPeriodRxData[mCurrentPeriod]=0;
      mPeriodTxData[mCurrentPeriod]=0;
    }
  }
 else {
    startNewPeriod=false;
    if (DBG)     Slog.d(TAG," we fit - ammending to last period");
  }
  setPeriodStart(start);
  setPeriodEnd(end);
  record();
  return startNewPeriod;
}
