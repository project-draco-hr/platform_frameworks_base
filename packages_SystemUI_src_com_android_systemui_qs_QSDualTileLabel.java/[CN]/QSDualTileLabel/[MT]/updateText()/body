{
  if (getWidth() == 0)   return;
  if (TextUtils.isEmpty(mText)) {
    mFirstLine.setText(null);
    mSecondLine.setText(null);
    return;
  }
  final float maxWidth=getWidth() - mFirstLine.getBackground().getIntrinsicWidth() - getPaddingLeft()- getPaddingRight();
  float width=mFirstLine.getPaint().measureText(mText + SPACING_TEXT);
  if (width <= maxWidth) {
    mFirstLine.setText(mText + SPACING_TEXT);
    mSecondLine.setText(null);
    return;
  }
  final int n=mText.length();
  int lastWordBoundary=-1;
  boolean inWhitespace=false;
  int i=0;
  for (i=1; i < n; i++) {
    if (Character.isWhitespace(mText.charAt(i))) {
      if (!inWhitespace) {
        lastWordBoundary=i;
      }
      inWhitespace=true;
    }
 else {
      inWhitespace=false;
    }
    width=mFirstLine.getPaint().measureText(mText.substring(0,i) + SPACING_TEXT);
    if (width > maxWidth) {
      break;
    }
  }
  if (lastWordBoundary == -1) {
    lastWordBoundary=i - 1;
  }
  mFirstLine.setText(mText.substring(0,lastWordBoundary) + SPACING_TEXT);
  mSecondLine.setText(mText.substring(lastWordBoundary).trim());
}
