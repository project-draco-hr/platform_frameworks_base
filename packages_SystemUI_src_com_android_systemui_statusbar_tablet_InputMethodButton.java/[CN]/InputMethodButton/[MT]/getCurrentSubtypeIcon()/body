{
  final PackageManager pm=getContext().getPackageManager();
  InputMethodInfo imi=getCurrentInputMethodInfo();
  InputMethodSubtype subtype=mImm.getCurrentInputMethodSubtype();
  Drawable icon=null;
  if (imi != null) {
    if (subtype != null) {
      return pm.getDrawable(imi.getPackageName(),subtype.getIconResId(),imi.getServiceInfo().applicationInfo);
    }
 else     if (imi.getSubtypes().size() > 0) {
      return pm.getDrawable(imi.getPackageName(),imi.getSubtypes().get(0).getIconResId(),imi.getServiceInfo().applicationInfo);
    }
 else {
      try {
        return pm.getApplicationInfo(imi.getPackageName(),0).loadIcon(pm);
      }
 catch (      PackageManager.NameNotFoundException e) {
        Log.w(TAG,"Current IME cann't be found: " + imi.getPackageName());
      }
    }
  }
  return null;
}
