{
synchronized (mAnchorsLock) {
    if (mAnchors != null) {
      return mAnchors;
    }
    Map<X509Certificate,TrustAnchor> anchorMap=new ArrayMap<>();
    for (    CertificatesEntryRef ref : mCertificatesEntryRefs) {
      Set<TrustAnchor> anchors=ref.getTrustAnchors();
      for (      TrustAnchor anchor : anchors) {
        if (anchor.overridesPins) {
          anchorMap.put(anchor.certificate,anchor);
        }
 else         if (!anchorMap.containsKey(anchor.certificate)) {
          anchorMap.put(anchor.certificate,anchor);
        }
      }
    }
    ArraySet<TrustAnchor> anchors=new ArraySet<TrustAnchor>(anchorMap.size());
    anchors.addAll(anchorMap.values());
    mAnchors=anchors;
    return mAnchors;
  }
}
