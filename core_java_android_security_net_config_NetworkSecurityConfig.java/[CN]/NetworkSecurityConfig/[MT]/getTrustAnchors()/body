{
synchronized (mAnchorsLock) {
    if (mAnchors != null) {
      return mAnchors;
    }
    Map<X509Certificate,TrustAnchor> anchorMap=new ArrayMap<>();
    for (    CertificatesEntryRef ref : mCertificatesEntryRefs) {
      Set<TrustAnchor> anchors=ref.getTrustAnchors();
      for (      TrustAnchor anchor : anchors) {
        X509Certificate cert=anchor.certificate;
        if (!anchorMap.containsKey(cert)) {
          anchorMap.put(cert,anchor);
        }
      }
    }
    ArraySet<TrustAnchor> anchors=new ArraySet<TrustAnchor>(anchorMap.size());
    anchors.addAll(anchorMap.values());
    mAnchors=anchors;
    return mAnchors;
  }
}
