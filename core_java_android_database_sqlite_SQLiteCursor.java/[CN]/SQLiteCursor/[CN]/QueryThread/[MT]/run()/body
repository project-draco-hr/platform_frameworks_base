{
  CursorWindow cw=mWindow;
  Process.setThreadPriority(Process.myTid(),Process.THREAD_PRIORITY_BACKGROUND);
  while (true) {
    mLock.lock();
    try {
      if (mCursorState != mThreadState) {
        break;
      }
      int count=getQuery().fillWindow(cw,mMaxRead,mCount);
      if (count != 0) {
        if (count == NO_COUNT) {
          mCount+=mMaxRead;
          if (Log.isLoggable(TAG,Log.DEBUG)) {
            Log.d(TAG,"received -1 from native_fill_window. read " + mCount + " rows so far");
          }
          sendMessage();
        }
 else {
          mCount+=count;
          if (Log.isLoggable(TAG,Log.DEBUG)) {
            Log.d(TAG,"received all data from native_fill_window. read " + mCount + " rows.");
          }
          sendMessage();
          break;
        }
      }
 else {
        break;
      }
    }
 catch (    Exception e) {
      break;
    }
 finally {
      mLock.unlock();
    }
  }
}
