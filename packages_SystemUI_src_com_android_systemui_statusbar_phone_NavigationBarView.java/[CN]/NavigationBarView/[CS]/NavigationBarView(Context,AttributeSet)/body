{
  super(context,attrs);
  mDisplay=((WindowManager)context.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
  mBarService=IStatusBarService.Stub.asInterface(ServiceManager.getService(Context.STATUS_BAR_SERVICE));
  setOnSystemUiVisibilityChangeListener(new View.OnSystemUiVisibilityChangeListener(){
    @Override public void onSystemUiVisibilityChange(    int visibility){
      boolean on=(visibility == View.STATUS_BAR_VISIBLE);
      android.util.Log.d("NavigationBarView","LIGHTS " + (on ? "ON" : "OUT"));
      setLights(on);
    }
  }
);
}
