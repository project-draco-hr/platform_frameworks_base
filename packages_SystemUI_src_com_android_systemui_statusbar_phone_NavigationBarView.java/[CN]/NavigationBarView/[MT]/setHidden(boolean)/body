{
  if (hide == mHidden)   return;
  mHidden=hide;
  Slog.d(TAG,(hide ? "HIDING" : "SHOWING") + " navigation bar");
  float oldAlpha=mCurrentView.getAlpha();
  if (DEBUG) {
    Slog.d(TAG,"animating alpha: " + oldAlpha + " -> "+ (!hide ? 1f : 0f));
  }
  if (mLastAnimator != null && mLastAnimator.isRunning())   mLastAnimator.cancel();
  if (!hide) {
    setVisibility(View.VISIBLE);
  }
  mLastAnimator=new AnimatorSet();
  mLastAnimator.playTogether(ObjectAnimator.ofFloat(mCurrentView,"alpha",hide ? 0f : 1f),ObjectAnimator.ofFloat(mCurrentView,mVertical ? "translationX" : "translationY",hide ? mBarSize : 0));
  mLastAnimator.setDuration(!hide ? 250 : 1000);
  mLastAnimator.addListener(new AnimatorListenerAdapter(){
    @Override public void onAnimationEnd(    Animator _a){
      mLastAnimator=null;
      if (hide) {
        setVisibility(View.GONE);
      }
    }
  }
);
  mLastAnimator.start();
}
