{
  AppIdleHistory aih=new AppIdleHistory(mStorageDir,1000);
  aih.updateDisplayLocked(false,2000);
  assertEquals(aih.getScreenOnTimeLocked(2000),0);
  aih.updateDisplayLocked(true,3000);
  assertEquals(aih.getScreenOnTimeLocked(4000),1000);
  assertEquals(aih.getScreenOnTimeLocked(5000),2000);
  aih.updateDisplayLocked(false,6000);
  assertEquals(aih.getScreenOnTimeLocked(7000),3000);
  assertEquals(aih.getScreenOnTimeLocked(8000),3000);
  aih.writeElapsedTimeLocked();
  AppIdleHistory aih2=new AppIdleHistory(mStorageDir,0);
  assertEquals(aih2.getScreenOnTimeLocked(11000),3000);
  aih2.updateDisplayLocked(true,4000);
  aih2.updateDisplayLocked(false,5000);
  assertEquals(aih2.getScreenOnTimeLocked(13000),4000);
}
