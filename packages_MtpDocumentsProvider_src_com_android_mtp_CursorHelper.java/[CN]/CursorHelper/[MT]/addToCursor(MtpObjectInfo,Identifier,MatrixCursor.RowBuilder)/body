{
  final Identifier identifier=new Identifier(rootIdentifier.mDeviceId,rootIdentifier.mStorageId,objectInfo.getObjectHandle());
  final String mimeType=formatTypeToMimeType(objectInfo.getFormat());
  int flag=0;
  if (objectInfo.getProtectionStatus() == 0) {
    flag|=DocumentsContract.Document.FLAG_SUPPORTS_DELETE | DocumentsContract.Document.FLAG_SUPPORTS_WRITE;
    if (mimeType == DocumentsContract.Document.MIME_TYPE_DIR) {
      flag|=DocumentsContract.Document.FLAG_DIR_SUPPORTS_CREATE;
    }
  }
  if (objectInfo.getThumbCompressedSize() > 0) {
    flag|=DocumentsContract.Document.FLAG_SUPPORTS_THUMBNAIL;
  }
  builder.add(Document.COLUMN_DOCUMENT_ID,identifier.toDocumentId());
  builder.add(Document.COLUMN_DISPLAY_NAME,objectInfo.getName());
  builder.add(Document.COLUMN_MIME_TYPE,mimeType);
  builder.add(Document.COLUMN_LAST_MODIFIED,objectInfo.getDateModified() != 0 ? objectInfo.getDateModified() : null);
  builder.add(Document.COLUMN_FLAGS,flag);
  builder.add(Document.COLUMN_SIZE,objectInfo.getCompressedSize());
}
