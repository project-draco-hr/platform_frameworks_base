{
  ComponentName comp=intent.getComponent();
  if (comp != null) {
    if (packageName.equals(comp.getPackageName())) {
      return resolveIntent(intent,resolvedType,flags);
    }
    return null;
  }
 else {
    List<ResolveInfo> query=null;
synchronized (mPackages) {
      PackageParser.Package pkg=mPackages.get(packageName);
      if (pkg != null) {
        query=(List<ResolveInfo>)mActivities.queryIntentForPackage(intent,resolvedType,flags,pkg.activities);
      }
    }
    return chooseBestActivity(intent,resolvedType,flags,query);
  }
}
