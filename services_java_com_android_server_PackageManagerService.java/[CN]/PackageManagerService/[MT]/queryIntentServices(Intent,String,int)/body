{
  ComponentName comp=intent.getComponent();
  if (comp != null) {
    List<ResolveInfo> list=new ArrayList<ResolveInfo>(1);
    ServiceInfo si=getServiceInfo(comp,flags);
    if (si != null) {
      ResolveInfo ri=new ResolveInfo();
      ri.serviceInfo=si;
      list.add(ri);
    }
    return list;
  }
synchronized (mPackages) {
    String pkgName=intent.getPackage();
    if (pkgName == null) {
      return (List<ResolveInfo>)mServices.queryIntent(intent,resolvedType,flags);
    }
    PackageParser.Package pkg=mPackages.get(pkgName);
    if (pkg != null) {
      return (List<ResolveInfo>)mServices.queryIntentForPackage(intent,resolvedType,flags,pkg.services);
    }
    return null;
  }
}
