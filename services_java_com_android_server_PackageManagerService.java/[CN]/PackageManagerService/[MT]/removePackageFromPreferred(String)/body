{
  mContext.enforceCallingOrSelfPermission(android.Manifest.permission.SET_PREFERRED_APPLICATIONS,null);
synchronized (mPackages) {
    PackageParser.Package p=mPackages.get(packageName);
    if (p == null) {
      return;
    }
    if (p.mPreferredOrder > 0) {
      PackageSetting ps=(PackageSetting)p.mExtras;
      if (ps != null) {
        mSettings.mPreferredPackages.remove(ps);
        p.mPreferredOrder=0;
        updatePreferredIndicesLP();
        mSettings.writeLP();
      }
    }
  }
}
