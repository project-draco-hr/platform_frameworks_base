{
  ApplicationInfo applicationInfo=p.applicationInfo;
  if (applicationInfo == null) {
    Slog.w(TAG,"Package " + p.packageName + " has no applicationInfo.");
    return false;
  }
  if (outInfo != null) {
    outInfo.uid=applicationInfo.uid;
  }
  removePackageDataLI(p,outInfo,flags,writeSettings);
  if (deleteCodeAndResources) {
    int installFlags=isExternal(p) ? PackageManager.INSTALL_EXTERNAL : 0;
    installFlags|=isForwardLocked(p) ? PackageManager.INSTALL_FORWARD_LOCK : 0;
    outInfo.args=createInstallArgs(installFlags,applicationInfo.sourceDir,applicationInfo.publicSourceDir,applicationInfo.nativeLibraryDir);
  }
  return true;
}
