{
synchronized (mPackages) {
    PackageParser.Activity a=mActivities.mActivities.get(component);
    if (Config.LOGV)     Log.v(TAG,"getActivityInfo " + component + ": "+ a);
    if (a != null && mSettings.isEnabledLP(a.info,flags)) {
      ActivityInfo ainfo=PackageParser.generateActivityInfo(a,flags);
      if (ainfo != null) {
        ApplicationInfo appInfo=getApplicationInfo(component.getPackageName(),PackageManager.GET_SUPPORTS_DENSITIES);
        if (appInfo != null && (appInfo.flags & ApplicationInfo.FLAG_SUPPORTS_LARGE_SCREENS) == 0) {
          CompatibilityInfo info=new CompatibilityInfo(appInfo);
          DisplayMetrics metrics=new DisplayMetrics();
          metrics.setTo(mMetrics);
          int orientation=mMetrics.widthPixels > mMetrics.heightPixels ? Configuration.ORIENTATION_LANDSCAPE : Configuration.ORIENTATION_PORTRAIT;
          metrics.updateMetrics(info,orientation);
          if (!info.mExpandable) {
            ainfo.configChanges&=~ActivityInfo.CONFIG_ORIENTATION;
          }
 else {
            appInfo.flags|=ApplicationInfo.FLAG_SUPPORTS_LARGE_SCREENS;
          }
          if (DEBUG_SETTINGS) {
            Log.d(TAG,"component=" + component + ", expandable:"+ ((appInfo.flags & ApplicationInfo.FLAG_SUPPORTS_LARGE_SCREENS) != 0));
          }
        }
      }
      return ainfo;
    }
    if (mResolveComponentName.equals(component)) {
      return mResolveActivity;
    }
  }
  return null;
}
