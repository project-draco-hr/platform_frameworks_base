{
  if ((oldPkg.pkgFlags & ApplicationInfo.FLAG_SYSTEM) == 0) {
    Log.w(TAG,"Unable to update from " + oldPkg.name + " to "+ newPkg.packageName+ ": old package not in system partition");
    return false;
  }
 else   if (mPackages.get(oldPkg.name) != null) {
    Log.w(TAG,"Unable to update from " + oldPkg.name + " to "+ newPkg.packageName+ ": old package still exists");
    return false;
  }
  return true;
}
