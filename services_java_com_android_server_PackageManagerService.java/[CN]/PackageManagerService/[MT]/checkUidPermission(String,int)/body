{
synchronized (mPackages) {
    Object obj=mSettings.getUserIdLP(uid);
    if (obj != null) {
      if (obj instanceof SharedUserSetting) {
        SharedUserSetting sus=(SharedUserSetting)obj;
        if (sus.grantedPermissions.contains(permName)) {
          return PackageManager.PERMISSION_GRANTED;
        }
      }
 else       if (obj instanceof PackageSetting) {
        PackageSetting ps=(PackageSetting)obj;
        if (ps.grantedPermissions.contains(permName)) {
          return PackageManager.PERMISSION_GRANTED;
        }
      }
    }
 else {
      HashSet<String> perms=mSystemPermissions.get(uid);
      if (perms != null && perms.contains(permName)) {
        return PackageManager.PERMISSION_GRANTED;
      }
    }
  }
  return PackageManager.PERMISSION_DENIED;
}
