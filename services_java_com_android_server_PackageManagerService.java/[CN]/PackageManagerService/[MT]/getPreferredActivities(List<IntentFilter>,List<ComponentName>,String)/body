{
  int num=0;
synchronized (mPackages) {
    Iterator<PreferredActivity> it=mSettings.mPreferredActivities.filterIterator();
    while (it.hasNext()) {
      PreferredActivity pa=it.next();
      if (packageName == null || pa.mActivity.getPackageName().equals(packageName)) {
        if (outFilters != null) {
          outFilters.add(new IntentFilter(pa));
        }
        if (outActivities != null) {
          outActivities.add(pa.mActivity);
        }
      }
    }
  }
  return num;
}
