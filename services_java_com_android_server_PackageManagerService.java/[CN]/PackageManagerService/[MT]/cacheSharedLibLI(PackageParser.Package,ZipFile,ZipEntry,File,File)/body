{
  InputStream inputStream=zipFile.getInputStream(entry);
  try {
    File tempFile=File.createTempFile("tmp","tmp",sharedLibraryDir);
    String tempFilePath=tempFile.getPath();
    if (!FileUtils.copyToFile(inputStream,tempFile) || !tempFile.setLastModified(entry.getTime()) || FileUtils.setPermissions(tempFilePath,FileUtils.S_IRUSR | FileUtils.S_IWUSR | FileUtils.S_IRGRP| FileUtils.S_IROTH,-1,-1) != 0 || !tempFile.renameTo(sharedLibraryFile)) {
      tempFile.delete();
      throw new IOException("Couldn't create cached shared lib " + sharedLibraryFile + " in "+ sharedLibraryDir);
    }
  }
  finally {
    inputStream.close();
  }
}
