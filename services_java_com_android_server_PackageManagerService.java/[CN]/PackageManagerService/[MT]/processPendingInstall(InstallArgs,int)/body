{
  mHandler.post(new Runnable(){
    public void run(){
      mHandler.removeCallbacks(this);
      PackageInstalledInfo res=new PackageInstalledInfo();
      res.returnCode=currentStatus;
      res.uid=-1;
      res.pkg=null;
      res.removedInfo=new PackageRemovedInfo();
      args.doPreInstall(res.returnCode);
      if (res.returnCode == PackageManager.INSTALL_SUCCEEDED) {
synchronized (mInstallLock) {
          installPackageLI(args,true,res);
        }
        args.doPostInstall(res.returnCode);
      }
      if (res.returnCode == PackageManager.INSTALL_SUCCEEDED) {
        res.removedInfo.sendBroadcast(false,true);
        Bundle extras=new Bundle(1);
        extras.putInt(Intent.EXTRA_UID,res.uid);
        final boolean update=res.removedInfo.removedPackage != null;
        if (update) {
          extras.putBoolean(Intent.EXTRA_REPLACING,true);
        }
        sendPackageBroadcast(Intent.ACTION_PACKAGE_ADDED,res.pkg.applicationInfo.packageName,extras);
        if (update) {
          sendPackageBroadcast(Intent.ACTION_PACKAGE_REPLACED,res.pkg.applicationInfo.packageName,extras);
        }
        if (res.removedInfo.args != null) {
synchronized (mInstallLock) {
            res.removedInfo.args.doPostDeleteLI(true);
          }
        }
      }
      Runtime.getRuntime().gc();
      if (args.observer != null) {
        try {
          args.observer.packageInstalled(res.name,res.returnCode);
        }
 catch (        RemoteException e) {
          Log.i(TAG,"Observer no longer exists.");
        }
      }
    }
  }
);
}
