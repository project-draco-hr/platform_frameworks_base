{
  if (mInstaller != null) {
    boolean useSecureFS=useEncryptedFilesystemForPackage(pkgSettings.pkg);
    int retCode=mInstaller.remove(pkgSettings.name,useSecureFS);
    if (retCode < 0) {
      Log.w(TAG,"Couldn't remove app data directory for package: " + pkgSettings.name + ", retcode="+ retCode);
    }
  }
 else {
    File dataDir=new File(pkgSettings.pkg.applicationInfo.dataDir);
    dataDir.delete();
  }
  mSettings.removePackageLP(pkgSettings.name);
}
