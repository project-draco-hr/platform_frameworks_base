{
  if (status != PackageManager.INSTALL_SUCCEEDED) {
    cleanUp();
    return false;
  }
 else {
    File codeFile=new File(getCodePath());
    String apkName=getNextCodePath(oldCodePath,pkgName,".apk");
    File desFile=new File(installDir,apkName + ".apk");
    if (!codeFile.renameTo(desFile)) {
      return false;
    }
    codeFileName=desFile.getPath();
    resourceFileName=getResourcePathFromCodePath();
    if (!setPermissions()) {
      return false;
    }
    return true;
  }
}
