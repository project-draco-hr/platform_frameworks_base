{
  String newCacheId=getNextCodePath(oldCodePath,pkgName,"/" + RES_FILE_NAME);
  String newCachePath=null;
  String codePath=getCodePath();
  final int CREATE_FAILED=1;
  final int COPY_FAILED=3;
  final int FINALIZE_FAILED=5;
  final int PASS=7;
  int errCode=CREATE_FAILED;
  if ((newCachePath=createSdDir(new File(codePath),newCacheId)) != null) {
    errCode=COPY_FAILED;
    if (FileUtils.copyFile(new File(codePath),new File(newCachePath,RES_FILE_NAME))) {
      errCode=FINALIZE_FAILED;
      if (finalizeSdDir(newCacheId)) {
        errCode=PASS;
      }
    }
  }
  String errMsg="";
switch (errCode) {
case CREATE_FAILED:
    errMsg="CREATE_FAILED";
  break;
case COPY_FAILED:
errMsg="COPY_FAILED";
destroySdDir(newCacheId);
break;
case FINALIZE_FAILED:
errMsg="FINALIZE_FAILED";
destroySdDir(newCacheId);
break;
default :
errMsg="PASS";
break;
}
destroySdDir(cid);
Log.i(TAG,"Status: " + errMsg);
if (errCode != PASS) {
return false;
}
cid=newCacheId;
cachePath=newCachePath;
return true;
}
