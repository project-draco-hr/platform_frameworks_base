{
  serializer.startTag(null,"updated-package");
  serializer.attribute(null,"name",pkg.name);
  if (pkg.realName != null) {
    serializer.attribute(null,"realName",pkg.realName);
  }
  serializer.attribute(null,"codePath",pkg.codePathString);
  serializer.attribute(null,"ts",pkg.getTimeStampStr());
  serializer.attribute(null,"version",String.valueOf(pkg.versionCode));
  if (!pkg.resourcePathString.equals(pkg.codePathString)) {
    serializer.attribute(null,"resourcePath",pkg.resourcePathString);
  }
  if (pkg.sharedUser == null) {
    serializer.attribute(null,"userId",Integer.toString(pkg.userId));
  }
 else {
    serializer.attribute(null,"sharedUserId",Integer.toString(pkg.userId));
  }
  serializer.startTag(null,"perms");
  if (pkg.sharedUser == null) {
    for (    final String name : pkg.grantedPermissions) {
      BasePermission bp=mPermissions.get(name);
      if (bp != null) {
        serializer.startTag(null,"item");
        serializer.attribute(null,"name",name);
        serializer.endTag(null,"item");
      }
    }
  }
  serializer.endTag(null,"perms");
  serializer.endTag(null,"updated-package");
}
