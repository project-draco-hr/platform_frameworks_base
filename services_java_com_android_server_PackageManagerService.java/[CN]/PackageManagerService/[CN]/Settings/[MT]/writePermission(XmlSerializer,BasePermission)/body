{
  if (bp.type != BasePermission.TYPE_BUILTIN && bp.sourcePackage != null) {
    serializer.startTag(null,"item");
    serializer.attribute(null,"name",bp.name);
    serializer.attribute(null,"package",bp.sourcePackage);
    if (DEBUG_SETTINGS)     Log.v(TAG,"Writing perm: name=" + bp.name + " type="+ bp.type);
    if (bp.type == BasePermission.TYPE_DYNAMIC) {
      PermissionInfo pi=bp.perm != null ? bp.perm.info : bp.pendingInfo;
      if (pi != null) {
        serializer.attribute(null,"type","dynamic");
        if (pi.icon != 0) {
          serializer.attribute(null,"icon",Integer.toString(pi.icon));
        }
        if (pi.nonLocalizedLabel != null) {
          serializer.attribute(null,"label",pi.nonLocalizedLabel.toString());
        }
        if (pi.protectionLevel != PermissionInfo.PROTECTION_NORMAL) {
          serializer.attribute(null,"protection",Integer.toString(pi.protectionLevel));
        }
      }
    }
    serializer.endTag(null,"item");
  }
}
