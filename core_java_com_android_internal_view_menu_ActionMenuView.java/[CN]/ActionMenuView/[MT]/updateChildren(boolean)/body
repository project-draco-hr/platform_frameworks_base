{
  final boolean reserveOverflow=mReserveOverflow;
  removeAllViews();
  final ArrayList<MenuItemImpl> itemsToShow=mMenu.getActionItems(reserveOverflow);
  final int itemCount=itemsToShow.size();
  boolean needsDivider=false;
  for (int i=0; i < itemCount; i++) {
    if (needsDivider) {
      addView(makeDividerView(),makeDividerLayoutParams());
    }
    final MenuItemImpl itemData=itemsToShow.get(i);
    final View actionView=itemData.getActionView();
    if (actionView != null) {
      final ViewParent parent=actionView.getParent();
      if (parent instanceof ViewGroup) {
        ((ViewGroup)parent).removeView(actionView);
      }
      addView(actionView,makeActionViewLayoutParams());
    }
 else {
      needsDivider=addItemView(i == 0 || !needsDivider,(ActionMenuItemView)itemData.getItemView(MenuBuilder.TYPE_ACTION_BUTTON,this));
    }
  }
  if (reserveOverflow) {
    if (mMenu.getNonActionItems(true).size() > 0) {
      OverflowMenuButton button=new OverflowMenuButton(mContext);
      addView(button);
      mOverflowButton=button;
    }
 else {
      mOverflowButton=null;
    }
  }
}
