{
  final String event=(String)msg.obj;
  final int start=uptimeMillisInt();
  final int sent=msg.arg1;
  try {
    if (!mCallbacks.onEvent(msg.what,event,NativeDaemonEvent.unescapeArgs(event))) {
      log(String.format("Unhandled event '%s'",event));
    }
  }
 catch (  Exception e) {
    loge("Error handling '" + event + "': "+ e);
  }
 finally {
    if (mCallbacks.onCheckHoldWakeLock(msg.what) && mWakeLock != null) {
      mWakeLock.release();
    }
    final int end=uptimeMillisInt();
    if (start > sent && start - sent > WARN_EXECUTE_DELAY_MS) {
      loge(String.format("NDC event {%s} processed too late: %dms",event,start - sent));
    }
    if (end > start && end - start > WARN_EXECUTE_DELAY_MS) {
      loge(String.format("NDC event {%s} took too long: %dms",event,end - start));
    }
  }
  return true;
}
