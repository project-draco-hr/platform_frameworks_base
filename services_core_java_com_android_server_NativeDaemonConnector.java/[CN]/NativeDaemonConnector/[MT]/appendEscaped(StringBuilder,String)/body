{
  final boolean hasSpaces=arg.indexOf(' ') >= 0;
  if (hasSpaces) {
    builder.append('"');
  }
  final int length=arg.length();
  for (int i=0; i < length; i++) {
    final char c=arg.charAt(i);
    if (c == '"') {
      builder.append("\\\"");
    }
 else     if (c == '\\') {
      builder.append("\\\\");
    }
 else {
      builder.append(c);
    }
  }
  if (hasSpaces) {
    builder.append('"');
  }
}
