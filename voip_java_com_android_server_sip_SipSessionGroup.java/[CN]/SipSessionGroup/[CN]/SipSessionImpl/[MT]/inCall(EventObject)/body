{
  if (END_CALL == evt) {
    mSipHelper.sendBye(mDialog);
    endCallNormally();
    return true;
  }
 else   if (isRequestEvent(Request.INVITE,evt)) {
    mState=SipSession.State.INCOMING_CALL;
    RequestEvent event=mInviteReceived=(RequestEvent)evt;
    mPeerSessionDescription=extractContent(event.getRequest());
    mServerTransaction=null;
    mProxy.onRinging(this,mPeerProfile,mPeerSessionDescription);
    return true;
  }
 else   if (isRequestEvent(Request.BYE,evt)) {
    mSipHelper.sendResponse((RequestEvent)evt,Response.OK);
    endCallNormally();
    return true;
  }
 else   if (isRequestEvent(Request.REFER,evt)) {
    return processReferRequest((RequestEvent)evt);
  }
 else   if (evt instanceof MakeCallCommand) {
    mState=SipSession.State.OUTGOING_CALL;
    mClientTransaction=mSipHelper.sendReinvite(mDialog,((MakeCallCommand)evt).getSessionDescription());
    startSessionTimer(((MakeCallCommand)evt).getTimeout());
    return true;
  }
 else   if (evt instanceof ResponseEvent) {
    if (expectResponse(Request.NOTIFY,evt))     return true;
  }
  return false;
}
