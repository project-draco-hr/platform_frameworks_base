{
  assertRunOnServiceThread();
  if (candidates.isEmpty()) {
    if (callback != null) {
      HdmiLogger.debug("[P]:AllocatedAddress=%s",allocated.toString());
      callback.onPollingFinished(allocated);
    }
    return;
  }
  final Integer candidate=candidates.remove(0);
  runOnIoThread(new Runnable(){
    @Override public void run(){
      if (sendPollMessage(sourceAddress,candidate,retryCount)) {
        allocated.add(candidate);
      }
      runOnServiceThread(new Runnable(){
        @Override public void run(){
          runDevicePolling(sourceAddress,candidates,retryCount,callback,allocated);
        }
      }
);
    }
  }
);
}
