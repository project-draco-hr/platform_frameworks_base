{
  int startAddress=preferredAddress;
  if (preferredAddress == HdmiCec.ADDR_UNREGISTERED) {
    for (int i=0; i < NUM_LOGICAL_ADDRESS; ++i) {
      if (deviceType == HdmiCec.getTypeFromAddress(i)) {
        startAddress=i;
        break;
      }
    }
  }
  int logcialAddress=HdmiCec.ADDR_UNREGISTERED;
  for (int i=0; i < NUM_LOGICAL_ADDRESS; ++i) {
    int curAddress=(startAddress + i) % NUM_LOGICAL_ADDRESS;
    if (curAddress != HdmiCec.ADDR_UNREGISTERED && deviceType == HdmiCec.getTypeFromAddress(i)) {
      int error=nativeSendCecCommand(mNativePtr,curAddress,curAddress,EMPTY_BODY);
      if (error != ERROR_SUCCESS) {
        logcialAddress=curAddress;
        break;
      }
    }
  }
  Message msg=mControlHandler.obtainMessage(MSG_REPORT_LOGICAL_ADDRESS);
  msg.arg1=deviceType;
  msg.arg2=logcialAddress;
  msg.obj=callback;
  mControlHandler.sendMessage(msg);
}
