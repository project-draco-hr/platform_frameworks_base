{
  Context context=getContext();
  int res=DateFormat.is24HourFormat(context) ? com.android.internal.R.string.twenty_four_hour_time_format : com.android.internal.R.string.twelve_hour_time_format;
  SimpleDateFormat sdf;
  String format=context.getString(res);
  if (!format.equals(mClockFormatString)) {
    format=format.replaceAll("a","").trim();
    mClockFormat=sdf=new SimpleDateFormat(format);
    mClockFormatString=format;
  }
 else {
    sdf=mClockFormat;
  }
  String result=sdf.format(mCalendar.getTime());
  return result;
}
