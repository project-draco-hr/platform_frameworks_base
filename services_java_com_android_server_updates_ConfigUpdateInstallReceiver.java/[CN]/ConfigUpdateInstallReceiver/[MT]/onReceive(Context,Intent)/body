{
  new Thread(){
    @Override public void run(){
      try {
        X509Certificate cert=getCert(context.getContentResolver());
        byte[] altContent=getAltContent(intent);
        int altVersion=getVersionFromIntent(intent);
        String altRequiredHash=getRequiredHashFromIntent(intent);
        String altSig=getSignatureFromIntent(intent);
        int currentVersion=getCurrentVersion();
        String currentHash=getCurrentHash(getCurrentContent());
        if (!verifyVersion(currentVersion,altVersion)) {
          Slog.i(TAG,"Not installing, new version is <= current version");
        }
 else         if (!verifyPreviousHash(currentHash,altRequiredHash)) {
          EventLog.writeEvent(EventLogTags.CONFIG_INSTALL_FAILED,"Current hash did not match required value");
        }
 else         if (!verifySignature(altContent,altVersion,altRequiredHash,altSig,cert)) {
          EventLog.writeEvent(EventLogTags.CONFIG_INSTALL_FAILED,"Signature did not verify");
        }
 else {
          Slog.i(TAG,"Found new update, installing...");
          install(altContent,altVersion);
          Slog.i(TAG,"Installation successful");
          postInstall(context,intent);
        }
      }
 catch (      Exception e) {
        Slog.e(TAG,"Could not update content!",e);
        String errMsg=e.toString();
        if (errMsg.length() > 100) {
          errMsg=errMsg.substring(0,99);
        }
        EventLog.writeEvent(EventLogTags.CONFIG_INSTALL_FAILED,errMsg);
      }
    }
  }
.start();
}
