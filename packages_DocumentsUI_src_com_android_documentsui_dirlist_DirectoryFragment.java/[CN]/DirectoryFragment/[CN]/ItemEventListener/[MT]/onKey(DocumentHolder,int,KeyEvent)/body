{
  if (event.getAction() != KeyEvent.ACTION_DOWN) {
    return false;
  }
  boolean handled=false;
  if (Events.isNavigationKeyCode(keyCode)) {
    int endPos=findTargetPosition(doc.itemView,keyCode);
    if (endPos != RecyclerView.NO_POSITION) {
      focusItem(endPos);
      boolean extendSelection=event.isShiftPressed();
      if (extendSelection) {
        int startPos=doc.getAdapterPosition();
        mSelectionManager.selectRange(startPos,endPos);
      }
      handled=true;
    }
  }
 else {
    if (keyCode == KeyEvent.KEYCODE_ENTER) {
      handled=onActivate(doc);
    }
  }
  return handled;
}
