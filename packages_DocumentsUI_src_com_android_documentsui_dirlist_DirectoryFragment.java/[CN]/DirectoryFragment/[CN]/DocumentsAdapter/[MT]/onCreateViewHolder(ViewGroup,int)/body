{
  if (viewType == ITEM_TYPE_LAYOUT_DIVIDER) {
    return new EmptyDocumentHolder(getContext());
  }
  ;
  DocumentHolder holder=null;
  final State state=getDisplayState();
switch (state.derivedMode) {
case MODE_GRID:
switch (viewType) {
case ITEM_TYPE_DIRECTORY:
      holder=new GridDirectoryHolder(getContext(),parent);
    break;
case ITEM_TYPE_DOCUMENT:
  holder=new GridDocumentHolder(getContext(),parent,mIconHelper);
break;
default :
throw new IllegalStateException("Unsupported layout type.");
}
break;
case MODE_LIST:
holder=new ListDocumentHolder(getContext(),parent,mIconHelper);
break;
case MODE_UNKNOWN:
default :
throw new IllegalStateException("Unsupported layout mode.");
}
holder.addClickListener(mItemClickListener);
holder.addOnKeyListener(mSelectionManager);
return holder;
}
