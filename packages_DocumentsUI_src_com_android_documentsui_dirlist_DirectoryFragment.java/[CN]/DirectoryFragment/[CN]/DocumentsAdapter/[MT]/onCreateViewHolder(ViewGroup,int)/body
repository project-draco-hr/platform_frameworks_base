{
  if (viewType == ITEM_TYPE_LAYOUT_DIVIDER) {
    return new EmptyDocumentHolder(getContext());
  }
  ;
  DocumentHolder holder=null;
  final State state=getDisplayState();
switch (state.derivedMode) {
case MODE_GRID:
    holder=new GridDocumentHolder(getContext(),parent,mIconHelper,viewType);
  break;
case MODE_LIST:
holder=new ListDocumentHolder(getContext(),parent,mIconHelper);
break;
case MODE_UNKNOWN:
default :
throw new IllegalStateException("Unsupported layout mode.");
}
holder.addClickListener(mItemClickListener);
holder.addOnKeyListener(mSelectionManager);
return holder;
}
