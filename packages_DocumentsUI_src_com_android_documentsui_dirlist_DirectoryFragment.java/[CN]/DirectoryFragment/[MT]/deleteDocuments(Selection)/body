{
  Context context=getActivity();
  String message=Shared.getQuantityString(context,R.plurals.deleting,selected.size());
  final SparseArray<String> toDelete=mAdapter.hide(selected.getAll());
  final Activity activity=getActivity();
  Snackbars.makeSnackbar(activity,message,Snackbar.LENGTH_LONG).setAction(R.string.undo,new View.OnClickListener(){
    @Override public void onClick(    View view){
    }
  }
).setCallback(new Snackbar.Callback(){
    @Override public void onDismissed(    Snackbar snackbar,    int event){
      if (event == Snackbar.Callback.DISMISS_EVENT_ACTION) {
        mAdapter.unhide(toDelete);
      }
 else {
        mModel.delete(selected,new Model.DeletionListener(){
          @Override public void onError(){
            Snackbars.makeSnackbar(activity,R.string.toast_failed_delete,Snackbar.LENGTH_LONG).show();
          }
        }
);
      }
    }
  }
).show();
}
