{
  mRS=RenderScript.create();
  mRS.mMessageCallback=new FilterCallback();
  mInPixelsAllocation=Allocation.createBitmapRef(mRS,mBitmapIn);
  mOutPixelsAllocation=Allocation.createBitmapRef(mRS,mBitmapOut);
  mScratchPixelsAllocation=Allocation.createBitmapRef(mRS,mBitmapScratch);
  mScript=new ScriptC_Threshold(mRS,getResources(),false);
  mScript.set_width(mBitmapIn.getWidth());
  mScript.set_height(mBitmapIn.getHeight());
  mScript.set_radius(mRadius);
  mScript.set_inBlack(mInBlack);
  mScript.set_outBlack(mOutBlack);
  mScript.set_inWhite(mInWhite);
  mScript.set_outWhite(mOutWhite);
  mScript.set_gamma(mGamma);
  mScript.set_saturation(mSaturation);
  mScript.bind_InPixel(mInPixelsAllocation);
  mScript.bind_OutPixel(mOutPixelsAllocation);
  mScript.bind_ScratchPixel(mScratchPixelsAllocation);
}
