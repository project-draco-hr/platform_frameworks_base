{
  mRS=RenderScript.create();
  mRS.mMessageCallback=new FilterCallback();
  mInPixelsAllocation=Allocation.createBitmapRef(mRS,mBitmapIn);
  mOutPixelsAllocation=Allocation.createBitmapRef(mRS,mBitmapOut);
  mScratchPixelsAllocation=Allocation.createBitmapRef(mRS,mBitmapScratch);
  mScriptVBlur=new ScriptC_Vertical_blur(mRS,getResources(),R.raw.vertical_blur_bc,false);
  mScriptHBlur=new ScriptC_Horizontal_blur(mRS,getResources(),R.raw.horizontal_blur_bc,false);
  mScript=new ScriptC_Threshold(mRS,getResources(),R.raw.threshold_bc,false);
  mScript.set_width(mBitmapIn.getWidth());
  mScript.set_height(mBitmapIn.getHeight());
  mScript.set_radius(mRadius);
  mScript.set_inBlack(mInBlack);
  mScript.set_outBlack(mOutBlack);
  mScript.set_inWhite(mInWhite);
  mScript.set_outWhite(mOutWhite);
  mScript.set_gamma(mGamma);
  mScript.set_saturation(mSaturation);
  mScript.bind_InPixel(mInPixelsAllocation);
  mScript.bind_OutPixel(mOutPixelsAllocation);
  mScript.bind_ScratchPixel(mScratchPixelsAllocation);
  mScript.set_vBlurScript(mScriptVBlur);
  mScript.set_hBlurScript(mScriptHBlur);
}
