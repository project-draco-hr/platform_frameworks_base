{
  mListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
  assertChecked("Item checked when setting Multiple mode");
  int childCount=mListView.getChildCount();
  assertTrue("Tests requires at least 4 items",childCount >= 4);
  mListView.setItemChecked(1,true);
  assertChecked("First element non checked",1);
  mListView.setItemChecked(3,true);
  assertChecked("Second element not checked",1,3);
  mListView.setItemChecked(0,true);
  assertChecked("Third element not checked",0,1,3);
  mListView.setItemChecked(2,false);
  assertChecked("Unchecked element appears checked",0,1,3);
  mListView.setItemChecked(1,false);
  assertChecked("Unchecked element remains",0,3);
  mListView.setItemChecked(2,false);
  assertChecked("Already unchecked element appears",0,3);
  mListView.setItemChecked(3,false);
  assertChecked("Unchecked 3 remains",0);
  mListView.setItemChecked(3,false);
  assertChecked("Twice unchecked 3 remains",0);
  mListView.setItemChecked(0,false);
  assertChecked("Checked items after last element unchecked");
}
