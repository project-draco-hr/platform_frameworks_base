{
  super.onMeasure(widthMeasureSpec,heightMeasureSpec);
  if (mAllowStacked && getOrientation() == LinearLayout.HORIZONTAL) {
    final int measuredWidth=getMeasuredWidthAndState();
    final int measuredWidthState=measuredWidth & MEASURED_STATE_MASK;
    if (measuredWidthState == MEASURED_STATE_TOO_SMALL) {
      setStacked(true);
      super.onMeasure(widthMeasureSpec,heightMeasureSpec);
    }
  }
}
