{
  if (type != MidiDeviceInfo.TYPE_VIRTUAL && Binder.getCallingUid() != Process.SYSTEM_UID) {
    throw new SecurityException("only system can create non-virtual devices");
  }
synchronized (mDevicesByInfo) {
    return addDeviceLocked(type,numInputPorts,numOutputPorts,properties,server,null,false,-1);
  }
}
