{
  checkConnected();
  try {
    TransceiveResult result=mTagService.transceive(mTag.getServiceHandle(),data,raw);
    if (result == null) {
      throw new IOException("transceive failed");
    }
 else {
      if (result.isSuccessful()) {
        return result.getResponseData();
      }
 else {
        if (result.isTagLost()) {
          throw new TagLostException("Tag was lost.");
        }
 else {
          throw new IOException("transceive failed");
        }
      }
    }
  }
 catch (  RemoteException e) {
    Log.e(TAG,"NFC service dead",e);
    throw new IOException("NFC service died");
  }
}
