{
  final ArrayList<NativeDaemonEvent> events=Lists.newArrayList();
  while (mResponseQueue.size() > 0) {
    try {
      log("ignoring {" + mResponseQueue.take() + "}");
    }
 catch (    Exception e) {
    }
  }
  final String sentCommand=sendCommandLocked(cmd,args);
  NativeDaemonEvent event=null;
  do {
    try {
      event=mResponseQueue.take();
    }
 catch (    InterruptedException e) {
      Slog.w(TAG,"interrupted waiting for event line");
      continue;
    }
    events.add(event);
  }
 while (event.isClassContinue());
  if (event.isClassClientError()) {
    throw new NativeDaemonArgumentException(sentCommand,event);
  }
  if (event.isClassServerError()) {
    throw new NativeDaemonFailureException(sentCommand,event);
  }
  return events.toArray(new NativeDaemonEvent[events.size()]);
}
