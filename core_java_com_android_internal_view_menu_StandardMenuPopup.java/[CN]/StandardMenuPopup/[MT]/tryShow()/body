{
  if (isShowing()) {
    return true;
  }
  if (mWasDismissed || mAnchorView == null) {
    return false;
  }
  mShownAnchorView=mAnchorView;
  mPopup.setOnDismissListener(this);
  mPopup.setOnItemClickListener(this);
  mPopup.setAdapter(mAdapter);
  mPopup.setModal(true);
  final View anchor=mShownAnchorView;
  final boolean addGlobalListener=mTreeObserver == null;
  mTreeObserver=anchor.getViewTreeObserver();
  if (addGlobalListener) {
    mTreeObserver.addOnGlobalLayoutListener(mGlobalLayoutListener);
  }
  anchor.addOnAttachStateChangeListener(mAttachStateChangeListener);
  mPopup.setAnchorView(anchor);
  mPopup.setDropDownGravity(mDropDownGravity);
  if (!mHasContentWidth) {
    mContentWidth=measureIndividualMenuWidth(mAdapter,null,mContext,mPopupMaxWidth);
    mHasContentWidth=true;
  }
  mPopup.setContentWidth(mContentWidth);
  mPopup.setInputMethodMode(PopupWindow.INPUT_METHOD_NOT_NEEDED);
  mPopup.setHorizontalOffset(mXOffset);
  mPopup.setVerticalOffset(mYOffset);
  mPopup.show();
  ListView listView=mPopup.getListView();
  listView.setOnKeyListener(this);
  if (mShowTitle && mMenu.getHeaderTitle() != null) {
    FrameLayout titleItemView=(FrameLayout)LayoutInflater.from(mContext).inflate(com.android.internal.R.layout.popup_menu_header_item_layout,listView,false);
    TextView titleView=(TextView)titleItemView.findViewById(com.android.internal.R.id.title);
    if (titleView != null) {
      titleView.setText(mMenu.getHeaderTitle());
    }
    titleItemView.setEnabled(false);
    listView.addHeaderView(titleItemView,null,false);
    mPopup.show();
  }
  return true;
}
