{
  mWasDismissed=true;
  mMenu.close();
  if (mTreeObserver != null) {
    if (!mTreeObserver.isAlive())     mTreeObserver=mShownAnchorView.getViewTreeObserver();
    mTreeObserver.removeGlobalOnLayoutListener(mGlobalLayoutListener);
    mTreeObserver=null;
  }
  mShownAnchorView.removeOnAttachStateChangeListener(mAttachStateChangeListener);
  mOnDismissListener.onDismiss();
}
