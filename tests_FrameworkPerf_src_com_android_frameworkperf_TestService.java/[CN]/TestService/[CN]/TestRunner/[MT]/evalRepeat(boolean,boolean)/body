{
synchronized (this) {
    if (!bgRunning) {
      mBackgroundRunning=false;
    }
    if (!fgRunning) {
      mForegroundRunning=false;
    }
    if (!mBackgroundRunning && !mForegroundRunning) {
      return false;
    }
    long now=SystemClock.uptimeMillis();
    if (now > (mStartTime + mMaxRunTime)) {
      return false;
    }
    return true;
  }
}
