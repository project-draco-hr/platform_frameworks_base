{
  super(context);
  Resources res=context.getResources();
  mService=service;
  mProc=app;
  mResult=result;
  if ((app.pkgList.size() == 1) && (mName=context.getPackageManager().getApplicationLabel(app.info)) != null) {
    setMessage(res.getString(com.android.internal.R.string.aerr_application,mName.toString(),app.info.processName));
  }
 else {
    mName=app.processName;
    setMessage(res.getString(com.android.internal.R.string.aerr_process,mName.toString()));
  }
  setCancelable(false);
  setButton(DialogInterface.BUTTON_POSITIVE,res.getText(com.android.internal.R.string.force_close),mHandler.obtainMessage(FORCE_QUIT));
  if (app.errorReportReceiver != null) {
    setButton(DialogInterface.BUTTON_NEGATIVE,res.getText(com.android.internal.R.string.report),mHandler.obtainMessage(FORCE_QUIT_AND_REPORT));
  }
  setTitle(res.getText(com.android.internal.R.string.aerr_title));
  WindowManager.LayoutParams attrs=getWindow().getAttributes();
  attrs.setTitle("Application Error: " + app.info.processName);
  attrs.privateFlags|=WindowManager.LayoutParams.PRIVATE_FLAG_SYSTEM_ERROR | WindowManager.LayoutParams.PRIVATE_FLAG_SHOW_FOR_ALL_USERS;
  getWindow().setAttributes(attrs);
  if (app.persistent) {
    getWindow().setType(WindowManager.LayoutParams.TYPE_SYSTEM_ERROR);
  }
  mHandler.sendMessageDelayed(mHandler.obtainMessage(FORCE_QUIT),DISMISS_TIMEOUT);
}
