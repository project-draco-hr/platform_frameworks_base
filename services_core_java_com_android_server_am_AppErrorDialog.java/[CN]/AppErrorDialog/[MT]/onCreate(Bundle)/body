{
  super.onCreate(savedInstanceState);
  final FrameLayout frame=(FrameLayout)findViewById(android.R.id.custom);
  final Context context=getContext();
  LayoutInflater.from(context).inflate(com.android.internal.R.layout.app_error_dialog,frame,true);
  boolean hasRestart=!mRepeating && mForeground;
  final boolean hasReceiver=mProc.errorReportReceiver != null;
  final TextView restart=(TextView)findViewById(com.android.internal.R.id.aerr_restart);
  restart.setOnClickListener(this);
  restart.setVisibility(hasRestart ? View.VISIBLE : View.GONE);
  final TextView report=(TextView)findViewById(com.android.internal.R.id.aerr_report);
  report.setOnClickListener(this);
  report.setVisibility(hasReceiver ? View.VISIBLE : View.GONE);
  final TextView close=(TextView)findViewById(com.android.internal.R.id.aerr_close);
  close.setVisibility(!hasRestart ? View.VISIBLE : View.GONE);
  close.setOnClickListener(this);
  boolean showMute=!IS_USER_BUILD && Settings.Global.getInt(context.getContentResolver(),Settings.Global.DEVELOPMENT_SETTINGS_ENABLED,0) != 0;
  final TextView mute=(TextView)findViewById(com.android.internal.R.id.aerr_mute);
  mute.setOnClickListener(this);
  mute.setVisibility(showMute ? View.VISIBLE : View.GONE);
  findViewById(com.android.internal.R.id.customPanel).setVisibility(View.VISIBLE);
}
