{
  final StorageManager storage=mContext.getSystemService(StorageManager.class);
  if (app.isInternal()) {
    return Preconditions.checkNotNull(storage.findVolumeById(VolumeInfo.ID_PRIVATE_INTERNAL));
  }
 else   if (app.isExternalAsec()) {
    final List<VolumeInfo> vols=storage.getVolumes();
    for (    VolumeInfo vol : vols) {
      if ((vol.getType() == VolumeInfo.TYPE_PUBLIC) && vol.isPrimary()) {
        return vol;
      }
    }
    throw new IllegalStateException("Failed to find primary public volume");
  }
 else {
    return Preconditions.checkNotNull(storage.findVolumeByUuid(app.volumeUuid));
  }
}
