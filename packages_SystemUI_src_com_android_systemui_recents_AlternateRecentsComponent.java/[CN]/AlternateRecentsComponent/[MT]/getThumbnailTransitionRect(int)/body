{
  TaskStack stack=RecentsTaskLoader.getShallowTaskStack(mSystemServicesProxy);
  if (stack.getTaskCount() == 0) {
    return new Rect();
  }
  TaskStackView tsv=new TaskStackView(mContext,stack);
  TaskStackViewLayoutAlgorithm algo=tsv.getStackAlgorithm();
  Rect taskStackBounds=new Rect(mTaskStackBounds);
  taskStackBounds.bottom-=mSystemInsets.bottom;
  tsv.computeRects(mWindowRect.width(),mWindowRect.height(),taskStackBounds);
  tsv.getScroller().setStackScrollToInitialState();
  Task task=null;
  ArrayList<Task> tasks=stack.getTasks();
  if (runningTaskId != -1) {
    int taskCount=tasks.size();
    for (int i=taskCount - 1; i >= 0; i--) {
      Task t=tasks.get(i);
      if (t.key.id == runningTaskId) {
        task=t;
        break;
      }
    }
  }
  if (task == null) {
    task=tasks.get(tasks.size() - 1);
  }
  mTmpTransform=algo.getStackTransform(task,tsv.getScroller().getStackScroll(),mTmpTransform,null);
  return new Rect(mTmpTransform.rect);
}
