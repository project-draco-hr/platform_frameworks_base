{
  TaskStack stack=RecentsTaskLoader.getShallowTaskStack(mSystemServicesProxy);
  TaskStackView tsv=new TaskStackView(mContext,stack);
  TaskStackViewLayoutAlgorithm algo=tsv.getStackAlgorithm();
  tsv.computeRects(mTaskStackBounds.width(),mTaskStackBounds.height() - mStatusBarHeight,0,0);
  tsv.setStackScrollToInitialState();
  Task task=null;
  ArrayList<Task> tasks=stack.getTasks();
  if (runningTaskId != -1) {
    int taskCount=tasks.size();
    for (int i=taskCount - 1; i >= 0; i--) {
      Task t=tasks.get(i);
      if (t.key.id == runningTaskId) {
        task=t;
        break;
      }
    }
  }
  if (task == null) {
    task=tasks.get(tasks.size() - 1);
  }
  mTmpTransform=algo.getStackTransform(task,tsv.getStackScroll(),mTmpTransform);
  mTmpTransform.rect.offset(mTaskStackBounds.left,mTaskStackBounds.top);
  mTmpTransform.rect.offset(0,mStatusBarHeight);
  return new Rect(mTmpTransform.rect);
}
