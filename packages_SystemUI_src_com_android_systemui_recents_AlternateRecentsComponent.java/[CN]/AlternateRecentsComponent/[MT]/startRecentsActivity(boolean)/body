{
  SystemServicesProxy ssp=mSystemServicesProxy;
  List<ActivityManager.RecentTaskInfo> recentTasks=ssp.getRecentTasks(3,UserHandle.CURRENT.getIdentifier());
  Rect taskRect=getAnimationTaskRect(recentTasks);
  boolean useThumbnailTransition=!isTopTaskHome && hasValidTaskRects();
  if (useThumbnailTransition) {
    ActivityOptions opts=getThumbnailTransitionActivityOptions(taskRect);
    if (opts != null) {
      startAlternateRecentsActivity(opts,true);
    }
 else {
      useThumbnailTransition=false;
    }
  }
  if (!useThumbnailTransition) {
    ActivityOptions opts=ActivityOptions.makeCustomAnimation(mContext,R.anim.recents_from_launcher_enter,R.anim.recents_from_launcher_exit);
    startAlternateRecentsActivity(opts,false);
  }
  Console.logTraceTime(Constants.Log.App.TimeRecentsStartup,Constants.Log.App.TimeRecentsStartupKey,"startRecentsActivity");
  mLastToggleTime=System.currentTimeMillis();
}
