{
  toolkit.lockAWT();
  try {
    if (!isDisplayable()) {
      return null;
    }
    GraphicsConfiguration gc=getGraphicsConfiguration();
    if (gc == null) {
      return null;
    }
    VolatileImage image=gc.createCompatibleVolatileImage(width,height,caps);
    fillImageBackground(image,width,height);
    return image;
  }
  finally {
    toolkit.unlockAWT();
  }
}
