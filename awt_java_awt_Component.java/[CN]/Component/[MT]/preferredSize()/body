{
  toolkit.lockAWT();
  try {
    if (isPreferredSizeSet()) {
      return new Dimension(preferredSize);
    }
    Dimension defSize=getDefaultPreferredSize();
    if (defSize != null) {
      return new Dimension(defSize);
    }
    return new Dimension(getMinimumSize());
  }
  finally {
    toolkit.unlockAWT();
  }
}
