{
  toolkit.lockAWT();
  try {
    if (!isDisplayable()) {
      return null;
    }
    GraphicsConfiguration gc=getGraphicsConfiguration();
    if (gc == null) {
      return null;
    }
    ColorModel cm=gc.getColorModel(Transparency.OPAQUE);
    WritableRaster wr=cm.createCompatibleWritableRaster(width,height);
    Image image=new BufferedImage(cm,wr,cm.isAlphaPremultiplied(),null);
    fillImageBackground(image,width,height);
    return image;
  }
  finally {
    toolkit.unlockAWT();
  }
}
