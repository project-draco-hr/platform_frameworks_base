{
synchronized (mLock) {
    if (mRemoteViewFactories.containsKey(intent)) {
      Pair<RemoteViewsFactory,Integer> oldFactoryRef=mRemoteViewFactories.get(intent);
      int newRefCount=oldFactoryRef.second.intValue() - 1;
      if (newRefCount <= 0) {
        oldFactoryRef.first.onDestroy();
        mRemoteViewFactories.remove(intent);
      }
 else {
        Pair<RemoteViewsFactory,Integer> factoryRef=new Pair<RemoteViewsFactory,Integer>(oldFactoryRef.first,newRefCount);
        mRemoteViewFactories.put(intent,factoryRef);
      }
    }
  }
  return super.onUnbind(intent);
}
