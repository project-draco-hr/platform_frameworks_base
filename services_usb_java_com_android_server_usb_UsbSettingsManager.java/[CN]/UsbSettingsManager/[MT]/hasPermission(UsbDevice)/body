{
synchronized (mLock) {
    int uid=Binder.getCallingUid();
    int androidMediaUid;
    try {
      androidMediaUid=mPackageManager.getApplicationInfo("com.android.mtp",0).uid;
    }
 catch (    NameNotFoundException e) {
      androidMediaUid=-1;
    }
    if (uid == Process.SYSTEM_UID || UserHandle.getAppId(uid) == androidMediaUid || mDisablePermissionDialogs) {
      return true;
    }
    SparseBooleanArray uidList=mDevicePermissionMap.get(device.getDeviceName());
    if (uidList == null) {
      return false;
    }
    return uidList.get(uid);
  }
}
