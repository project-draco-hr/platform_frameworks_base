{
  if (mVendorId != -1 && device.getVendorId() != mVendorId)   return false;
  if (mProductId != -1 && device.getProductId() != mProductId)   return false;
  if (mManufacturerName != null && device.getManufacturerName() == null)   return false;
  if (mProductName != null && device.getProductName() == null)   return false;
  if (mSerialNumber != null && device.getSerialNumber() == null)   return false;
  if (mManufacturerName != null && device.getManufacturerName() != null && !mManufacturerName.equals(device.getManufacturerName()))   return false;
  if (mProductName != null && device.getProductName() != null && !mProductName.equals(device.getProductName()))   return false;
  if (mSerialNumber != null && device.getSerialNumber() != null && !mSerialNumber.equals(device.getSerialNumber()))   return false;
  if (matches(device.getDeviceClass(),device.getDeviceSubclass(),device.getDeviceProtocol()))   return true;
  int count=device.getInterfaceCount();
  for (int i=0; i < count; i++) {
    UsbInterface intf=device.getInterface(i);
    if (matches(intf.getInterfaceClass(),intf.getInterfaceSubclass(),intf.getInterfaceProtocol()))     return true;
  }
  return false;
}
