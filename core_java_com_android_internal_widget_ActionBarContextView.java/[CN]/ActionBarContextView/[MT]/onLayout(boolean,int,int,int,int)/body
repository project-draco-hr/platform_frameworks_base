{
  final boolean isLayoutRtl=isLayoutRtl();
  int x=isLayoutRtl ? r - l - getPaddingRight() : getPaddingLeft();
  final int y=getPaddingTop();
  final int contentHeight=b - t - getPaddingTop()- getPaddingBottom();
  if (mClose != null && mClose.getVisibility() != GONE) {
    MarginLayoutParams lp=(MarginLayoutParams)mClose.getLayoutParams();
    final int startMargin=(isLayoutRtl ? lp.rightMargin : lp.leftMargin);
    final int endMargin=(isLayoutRtl ? lp.leftMargin : lp.rightMargin);
    x=next(x,startMargin,isLayoutRtl);
    x+=positionChild(mClose,x,y,contentHeight,isLayoutRtl);
    x=next(x,endMargin,isLayoutRtl);
    if (mAnimateInOnLayout) {
      mAnimationMode=ANIMATE_IN;
      mCurrentAnimation=makeInAnimation();
      mCurrentAnimation.start();
      mAnimateInOnLayout=false;
    }
  }
  if (mTitleLayout != null && mCustomView == null && mTitleLayout.getVisibility() != GONE) {
    x+=positionChild(mTitleLayout,x,y,contentHeight,isLayoutRtl);
  }
  if (mCustomView != null) {
    x+=positionChild(mCustomView,x,y,contentHeight,isLayoutRtl);
  }
  x=isLayoutRtl ? getPaddingLeft() : r - l - getPaddingRight();
  if (mMenuView != null) {
    x+=positionChild(mMenuView,x,y,contentHeight,!isLayoutRtl);
  }
}
