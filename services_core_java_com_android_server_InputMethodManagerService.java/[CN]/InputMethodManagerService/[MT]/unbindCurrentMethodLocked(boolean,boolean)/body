{
  if (mVisibleBound) {
    mContext.unbindService(mVisibleConnection);
    mVisibleBound=false;
  }
  if (mHaveConnection) {
    mContext.unbindService(this);
    mHaveConnection=false;
  }
  if (mCurToken != null) {
    try {
      if (DEBUG)       Slog.v(TAG,"Removing window token: " + mCurToken);
      if ((mImeWindowVis & InputMethodService.IME_ACTIVE) != 0 && savePosition) {
        mWindowManagerInternal.saveLastInputMethodWindowForTransition();
      }
      mIWindowManager.removeWindowToken(mCurToken);
    }
 catch (    RemoteException e) {
    }
    mCurToken=null;
  }
  mCurId=null;
  clearCurMethodLocked();
  if (reportToClient && mCurClient != null) {
    executeOrSendMessage(mCurClient.client,mCaller.obtainMessageIO(MSG_UNBIND_METHOD,mCurSeq,mCurClient.client));
  }
}
