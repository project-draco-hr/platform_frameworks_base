{
  long ident=Binder.clearCallingIdentity();
  try {
synchronized (mMethodMap) {
      if (!calledWithValidToken(token)) {
        final int uid=Binder.getCallingUid();
        Slog.e(TAG,"Ignoring updateStatusIcon due to an invalid token. uid:" + uid + " token:"+ token);
        return;
      }
      if (iconId == 0) {
        if (DEBUG)         Slog.d(TAG,"hide the small icon for the input method");
        if (mStatusBar != null) {
          mStatusBar.setIconVisibility(mSlotIme,false);
        }
      }
 else       if (packageName != null) {
        if (DEBUG)         Slog.d(TAG,"show a small icon for the input method");
        CharSequence contentDescription=null;
        try {
          final PackageManager packageManager=mContext.getPackageManager();
          contentDescription=packageManager.getApplicationLabel(mIPackageManager.getApplicationInfo(packageName,0,mSettings.getCurrentUserId()));
        }
 catch (        RemoteException e) {
        }
        if (mStatusBar != null) {
          mStatusBar.setIcon(mSlotIme,packageName,iconId,0,contentDescription != null ? contentDescription.toString() : null);
          mStatusBar.setIconVisibility(mSlotIme,true);
        }
      }
    }
  }
  finally {
    Binder.restoreCallingIdentity(ident);
  }
}
