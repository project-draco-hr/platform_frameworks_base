{
  List<Pair<String,ArrayList<String>>> imeMap=new ArrayList<Pair<String,ArrayList<String>>>(4);
  for (  ArrayMap.Entry<String,ArraySet<String>> entry : map.entrySet()) {
    final String imeName=entry.getKey();
    final ArraySet<String> subtypeSet=entry.getValue();
    final ArrayList<String> subtypes=new ArrayList<String>(2);
    if (subtypeSet != null) {
      subtypes.addAll(subtypeSet);
    }
    imeMap.add(new Pair<String,ArrayList<String>>(imeName,subtypes));
  }
  return InputMethodSettings.buildInputMethodsSettingString(imeMap);
}
