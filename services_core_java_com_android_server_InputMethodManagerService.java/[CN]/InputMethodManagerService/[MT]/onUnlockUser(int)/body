{
synchronized (mMethodMap) {
    final int currentUserId=mSettings.getCurrentUserId();
    if (DEBUG) {
      Slog.d(TAG,"onUnlockUser: userId=" + userId + " curUserId="+ currentUserId);
    }
    if (userId != currentUserId) {
      return;
    }
    mSettings.switchCurrentUser(currentUserId,!mSystemReady);
    buildInputMethodListLocked(false);
    updateInputMethodsFromSettingsLocked(true);
  }
}
