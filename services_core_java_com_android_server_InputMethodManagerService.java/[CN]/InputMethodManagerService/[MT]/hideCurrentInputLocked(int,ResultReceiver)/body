{
  if ((flags & InputMethodManager.HIDE_IMPLICIT_ONLY) != 0 && (mShowExplicitlyRequested || mShowForced)) {
    if (DEBUG)     Slog.v(TAG,"Not hiding: explicit show not cancelled by non-explicit hide");
    return false;
  }
  if (mShowForced && (flags & InputMethodManager.HIDE_NOT_ALWAYS) != 0) {
    if (DEBUG)     Slog.v(TAG,"Not hiding: forced show not cancelled by not-always hide");
    return false;
  }
  final boolean shouldHideSoftInput=(mCurMethod != null) && (mInputShown || (mImeWindowVis & InputMethodService.IME_ACTIVE) != 0);
  boolean res;
  if (shouldHideSoftInput) {
    executeOrSendMessage(mCurMethod,mCaller.obtainMessageOO(MSG_HIDE_SOFT_INPUT,mCurMethod,resultReceiver));
    res=true;
  }
 else {
    res=false;
  }
  if (mHaveConnection && mVisibleBound) {
    mContext.unbindService(mVisibleConnection);
    mVisibleBound=false;
  }
  mInputShown=false;
  mShowRequested=false;
  mShowExplicitlyRequested=false;
  mShowForced=false;
  return res;
}
