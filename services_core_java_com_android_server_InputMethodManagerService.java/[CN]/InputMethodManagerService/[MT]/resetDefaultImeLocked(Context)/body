{
  if (mCurMethodId != null && !InputMethodUtils.isSystemIme(mMethodMap.get(mCurMethodId))) {
    return;
  }
  InputMethodInfo defIm=null;
  for (  InputMethodInfo imi : mMethodList) {
    if (defIm == null && mSystemReady) {
      final Locale systemLocale=context.getResources().getConfiguration().locale;
      if (InputMethodUtils.isSystemImeThatHasSubtypeOf(imi,context,true,systemLocale,false,InputMethodUtils.SUBTYPE_MODE_ANY)) {
        defIm=imi;
        Slog.i(TAG,"Selected default: " + imi.getId());
      }
    }
  }
  if (defIm == null && mMethodList.size() > 0) {
    defIm=InputMethodUtils.getMostApplicableDefaultIME(mSettings.getEnabledInputMethodListLocked());
    if (defIm != null) {
      Slog.i(TAG,"Default found, using " + defIm.getId());
    }
 else {
      Slog.i(TAG,"No default found");
    }
  }
  if (defIm != null) {
    setSelectedInputMethodAndSubtypeLocked(defIm,NOT_A_SUBTYPE_ID,false);
  }
}
