{
  final String key=record.getKey();
  final Bundle extras=record.getNotification().extras;
  final float[] affinityOut=new float[1];
  final PeopleRankingReconsideration rr=validatePeople(context,key,extras,affinityOut);
  final float affinity=affinityOut[0];
  record.setContactAffinity(affinity);
  if (rr == null) {
    mUsageStats.registerPeopleAffinity(record,affinity > NONE,affinity == STARRED_CONTACT,true);
  }
 else {
    rr.setRecord(record);
  }
  return rr;
}
