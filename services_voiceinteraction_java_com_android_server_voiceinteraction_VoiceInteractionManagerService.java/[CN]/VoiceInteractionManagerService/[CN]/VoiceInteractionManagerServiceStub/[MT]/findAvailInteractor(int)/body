{
  List<ResolveInfo> available=mContext.getPackageManager().queryIntentServicesAsUser(new Intent(VoiceInteractionService.SERVICE_INTERFACE),0,userHandle);
  int numAvailable=available.size();
  if (numAvailable == 0) {
    Slog.w(TAG,"no available voice interaction services found for user " + userHandle);
    return null;
  }
 else {
    ServiceInfo serviceInfo=null;
    for (int i=0; i < numAvailable; i++) {
      ServiceInfo cur=available.get(i).serviceInfo;
      if ((cur.applicationInfo.flags & ApplicationInfo.FLAG_SYSTEM) != 0) {
        if (serviceInfo == null) {
          serviceInfo=cur;
        }
 else {
          Slog.w(TAG,"more than one voice interaction service, picking first " + new ComponentName(serviceInfo.packageName,serviceInfo.name) + " over "+ new ComponentName(cur.packageName,cur.name));
        }
      }
    }
    return serviceInfo != null ? new ComponentName(serviceInfo.packageName,serviceInfo.name) : null;
  }
}
