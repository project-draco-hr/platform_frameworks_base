{
synchronized (this) {
    if (mContext.checkCallingPermission(Manifest.permission.MANAGE_VOICE_KEYPHRASES) != PackageManager.PERMISSION_GRANTED) {
      throw new SecurityException("Caller does not hold the permission " + Manifest.permission.MANAGE_VOICE_KEYPHRASES);
    }
    if (model == null) {
      throw new IllegalArgumentException("Model must not be null");
    }
    final long caller=Binder.clearCallingIdentity();
    try {
      boolean success=false;
      if (model.keyphrases == null) {
        success=mDbHelper.deleteKeyphraseSoundModel(model.uuid);
      }
 else {
        success=mDbHelper.addOrUpdateKeyphraseSoundModel(model);
      }
      if (success) {
        if (mImpl != null && mImpl.mService != null) {
          mImpl.notifySoundModelsChangedLocked();
        }
        return SoundTriggerHelper.STATUS_OK;
      }
 else {
        return SoundTriggerHelper.STATUS_ERROR;
      }
    }
  finally {
      Binder.restoreCallingIdentity(caller);
    }
  }
}
