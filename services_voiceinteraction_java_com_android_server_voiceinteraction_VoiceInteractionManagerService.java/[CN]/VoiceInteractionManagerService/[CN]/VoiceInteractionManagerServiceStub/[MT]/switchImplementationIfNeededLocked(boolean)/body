{
  if (!mSafeMode) {
    String curService=Settings.Secure.getStringForUser(mResolver,Settings.Secure.VOICE_INTERACTION_SERVICE,mCurUser);
    ComponentName serviceComponent=null;
    if (curService != null && !curService.isEmpty()) {
      try {
        serviceComponent=ComponentName.unflattenFromString(curService);
      }
 catch (      RuntimeException e) {
        Slog.wtf(TAG,"Bad voice interaction service name " + curService,e);
        serviceComponent=null;
      }
    }
    if (force || mImpl == null || mImpl.mUser != mCurUser || !mImpl.mComponent.equals(serviceComponent)) {
      if (mImpl != null) {
        mImpl.shutdownLocked();
      }
      if (serviceComponent != null) {
        mImpl=new VoiceInteractionManagerServiceImpl(mContext,UiThread.getHandler(),this,mCurUser,serviceComponent);
        mImpl.startLocked();
      }
 else {
        mImpl=null;
      }
    }
  }
}
