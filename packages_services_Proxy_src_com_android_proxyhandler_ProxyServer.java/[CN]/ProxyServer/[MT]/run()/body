{
  try {
    serverSocket=new ServerSocket(0);
    if (serverSocket != null) {
      setPort(serverSocket.getLocalPort());
      while (mIsRunning) {
        try {
          ProxyConnection parser=new ProxyConnection(serverSocket.accept());
          threadExecutor.execute(parser);
        }
 catch (        IOException e) {
          e.printStackTrace();
        }
      }
    }
  }
 catch (  SocketException e) {
    Log.e(TAG,"Failed to start proxy server",e);
  }
catch (  IOException e1) {
    Log.e(TAG,"Failed to start proxy server",e1);
  }
  mIsRunning=false;
}
