{
  NetworkPolicy[] policies=getDummyNetworkPolicies(5);
  byte[] data=NetworkPolicySerializer.marshalNetworkPolicies(policies);
  assertNotNull("Got Null data from marshal",data);
  assertFalse("Got back an empty byte[] from marshal",data.length == 0);
  NetworkPolicy[] unmarshaled=NetworkPolicySerializer.unmarshalNetworkPolicies(data);
  assertNotNull("Got Null data from unmarshaled",unmarshaled);
  try {
    for (int i=0; i < policies.length; i++) {
      assertTrue("NetworkPolicies Marshall and Unmarshal Failed!",policies[i].equals(unmarshaled[i]));
    }
  }
 catch (  NullPointerException npe) {
    assertTrue("Some policies were not marshaled/unmarshaled correctly",false);
  }
}
