{
  try {
    cacheRet.outStream.close();
  }
 catch (  IOException e) {
    return;
  }
  if (!cacheRet.outFile.exists()) {
    return;
  }
  cacheRet.contentLength=cacheRet.outFile.length();
  boolean redirect=checkCacheRedirect(cacheRet.httpStatusCode);
  if (redirect) {
    cacheRet.contentLength=0;
    cacheRet.localPath="";
  }
  if ((redirect || cacheRet.contentLength == 0) && !cacheRet.outFile.delete()) {
    Log.e(LOGTAG,cacheRet.outFile.getPath() + " delete failed.");
  }
  if (cacheRet.contentLength == 0) {
    return;
  }
  mDataBase.addCache(url,cacheRet);
  if (DebugFlags.CACHE_MANAGER) {
    Log.v(LOGTAG,"saveCacheFile for url " + url);
  }
}
