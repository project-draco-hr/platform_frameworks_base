{
  mNetwork=network;
  mLinkProperties=lp;
  mInterfaceIndex=getInterfaceIndex(mLinkProperties.getInterfaceName());
  mTimeoutMs=timeoutMs;
  mStartTime=now();
  mDeadlineTime=mStartTime + mTimeoutMs;
  for (  RouteInfo route : mLinkProperties.getRoutes()) {
    if (route.hasGateway()) {
      prepareIcmpMeasurement(route.getGateway());
    }
  }
  for (  InetAddress nameserver : mLinkProperties.getDnsServers()) {
    prepareIcmpMeasurement(nameserver);
    prepareDnsMeasurement(nameserver);
  }
  mCountDownLatch=new CountDownLatch(totalMeasurementCount());
  startMeasurements();
  mDescription="ifaces{" + TextUtils.join(",",mLinkProperties.getAllInterfaceNames()) + "}"+ " index{"+ mInterfaceIndex+ "}"+ " network{"+ mNetwork+ "}"+ " nethandle{"+ mNetwork.getNetworkHandle()+ "}";
}
