{
  if (mAnimating) {
    if (SPEW)     Slog.d(TAG,"doAnimation");
    if (SPEW)     Slog.d(TAG,"doAnimation before mAnimY=" + mAnimY);
    incrementAnim();
    if (SPEW)     Slog.d(TAG,"doAnimation after  mAnimY=" + mAnimY);
    if (mAnimY >= mDisplay.getHeight() - 1) {
      if (SPEW)       Slog.d(TAG,"Animation completed to expanded state.");
      mAnimating=false;
      updateExpandedViewPos(EXPANDED_FULL_OPEN);
      performExpand();
    }
 else     if (mAnimY < mStatusBarView.getHeight()) {
      if (SPEW)       Slog.d(TAG,"Animation completed to collapsed state.");
      mAnimating=false;
      updateExpandedViewPos(0);
      performCollapse();
    }
 else {
      updateExpandedViewPos((int)mAnimY);
      mCurAnimationTime+=ANIM_FRAME_DURATION;
      mHandler.sendMessageAtTime(mHandler.obtainMessage(MSG_ANIMATE),mCurAnimationTime);
    }
  }
}
