{
  boolean success=false;
  Uri uri=Mtp.Object.getContentUri(mDeviceID,mObjectID);
  File destFile=null;
  ParcelFileDescriptor pfd=null;
  FileInputStream fis=null;
  FileOutputStream fos=null;
  try {
    pfd=getContentResolver().openFileDescriptor(uri,"r");
    Log.d(TAG,"save got pfd " + pfd);
    if (pfd != null) {
      fis=new FileInputStream(pfd.getFileDescriptor());
      Log.d(TAG,"save got fis " + fis);
      File destDir=Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM);
      destDir.mkdirs();
      destFile=new File(destDir,"CameraBrowser-" + getTimestamp() + ".jpeg");
      Log.d(TAG,"save got destFile " + destFile);
      if (destFile.exists()) {
        destFile.delete();
      }
      fos=new FileOutputStream(destFile);
      byte[] buffer=new byte[65536];
      int bytesRead;
      while ((bytesRead=fis.read(buffer)) >= 0) {
        fos.write(buffer,0,bytesRead);
      }
      FileUtils.setPermissions(destDir.getPath(),0775,Process.myUid(),Process.SDCARD_RW_GID);
      FileUtils.setPermissions(destFile.getPath(),0664,Process.myUid(),Process.SDCARD_RW_GID);
      success=true;
    }
  }
 catch (  Exception e) {
    Log.e(TAG,"Exception in ObjectView.save",e);
  }
 finally {
    if (fis != null) {
      try {
        fis.close();
      }
 catch (      Exception e) {
      }
    }
    if (fos != null) {
      try {
        fos.close();
      }
 catch (      Exception e) {
      }
    }
    if (pfd != null) {
      try {
        pfd.close();
      }
 catch (      Exception e) {
      }
    }
  }
  if (success) {
    Intent intent=new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE);
    intent.setData(Uri.fromFile(destFile));
    sendBroadcast(intent);
    Toast.makeText(this,R.string.object_saved_message,Toast.LENGTH_SHORT).show();
  }
 else {
    Toast.makeText(this,R.string.save_failed_message,Toast.LENGTH_SHORT).show();
  }
}
