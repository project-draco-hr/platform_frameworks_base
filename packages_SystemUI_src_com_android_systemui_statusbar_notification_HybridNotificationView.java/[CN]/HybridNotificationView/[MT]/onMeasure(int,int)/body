{
  int totalWidth=MeasureSpec.getSize(widthMeasureSpec);
  int remainingWidth=totalWidth - mStartMargin - mEndMargin;
  int newHeightSpec=MeasureSpec.makeMeasureSpec(MeasureSpec.getSize(heightMeasureSpec),MeasureSpec.AT_MOST);
  int newWidthSpec=MeasureSpec.makeMeasureSpec(remainingWidth,MeasureSpec.AT_MOST);
  mTitleView.measure(newWidthSpec,newHeightSpec);
  int maxTitleLength=getResources().getDimensionPixelSize(R.dimen.notification_maximum_title_length);
  int titleWidth=mTitleView.getMeasuredWidth();
  int heightSpec=MeasureSpec.makeMeasureSpec(mSingleLineHeight,MeasureSpec.AT_MOST);
  boolean hasText=!TextUtils.isEmpty(mTextView.getText());
  if (titleWidth > maxTitleLength && hasText) {
    titleWidth=maxTitleLength;
    int widthSpec=MeasureSpec.makeMeasureSpec(titleWidth,MeasureSpec.EXACTLY);
    mTitleView.measure(widthSpec,heightSpec);
  }
  if (hasText) {
    remainingWidth-=titleWidth;
    int widthSpec=MeasureSpec.makeMeasureSpec(remainingWidth,MeasureSpec.AT_MOST);
    mTextView.measure(widthSpec,newHeightSpec);
  }
  setMeasuredDimension(totalWidth,mSingleLineHeight);
}
