{
  mContext=Preconditions.checkNotNull(context);
  mAnchorView=Preconditions.checkNotNull(anchor);
  mPopupStyleAttr=popupStyleAttr;
  mPopupStyleRes=popupStyleRes;
  mOverflowOnly=overflowOnly;
  mForceShowIcon=false;
  final Resources res=context.getResources();
  final Configuration config=res.getConfiguration();
  mLayoutDirection=config.getLayoutDirection();
  mPreferredPosition=mLayoutDirection == View.LAYOUT_DIRECTION_RTL ? HORIZ_POSITION_LEFT : HORIZ_POSITION_RIGHT;
  mMenuMaxWidth=Math.max(res.getDisplayMetrics().widthPixels / 2,res.getDimensionPixelSize(com.android.internal.R.dimen.config_prefDialogWidth));
  mPopupWindows=new ArrayList<MenuPopupWindow>();
  mListViews=new ArrayList<DropDownListView>();
  mOffsets=new ArrayList<int[]>();
  mSubMenuHoverHandler=new Handler();
}
