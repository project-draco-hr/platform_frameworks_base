{
  SmsMessage sms=new SmsMessage();
  SubmitPdu ret=new SubmitPdu();
  UserData uData=new UserData();
  SmsHeader smsHeader=new SmsHeader();
  if (data.length > (MAX_USER_DATA_BYTES - 7)) {
    Log.e(LOG_TAG,"SMS data message may only contain " + (MAX_USER_DATA_BYTES - 7) + " bytes");
    return null;
  }
  byte[] destPort=new byte[4];
  destPort[0]=(byte)((destinationPort >> 8) & 0xFF);
  destPort[1]=(byte)(destinationPort & 0xFF);
  destPort[2]=0x00;
  destPort[3]=0x00;
  smsHeader.add(new SmsHeader.Element(SmsHeader.APPLICATION_PORT_ADDRESSING_16_BIT,destPort));
  smsHeader.nbrOfHeaders=smsHeader.getElements().size();
  uData.userDataHeader=smsHeader;
  uData.msgEncoding=UserData.ENCODING_OCTET;
  uData.payload=data;
  byte[] msgData=sms.getEnvelope(destinationAddress,statusReportRequested,uData,true,true);
  ret.encodedMessage=msgData;
  ret.encodedScAddress=null;
  return ret;
}
