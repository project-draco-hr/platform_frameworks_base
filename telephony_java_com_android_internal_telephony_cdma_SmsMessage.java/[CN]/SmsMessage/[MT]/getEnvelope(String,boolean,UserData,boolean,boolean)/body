{
  BearerData mBearerData=new BearerData();
  SmsEnvelope env=new SmsEnvelope();
  CdmaSmsAddress mSmsAddress=new CdmaSmsAddress();
  mSmsAddress.digitMode=CdmaSmsAddress.DIGIT_MODE_8BIT_CHAR;
  try {
    mSmsAddress.origBytes=destinationAddress.getBytes("UTF-8");
  }
 catch (  Exception e) {
    Log.e(LOG_TAG,"doGetSubmitPdu: conversion of destinationAddress from string to byte[]" + " failed: " + e.getMessage());
    return null;
  }
  mSmsAddress.numberOfDigits=(byte)mSmsAddress.origBytes.length;
  mSmsAddress.numberMode=CdmaSmsAddress.NUMBER_MODE_NOT_DATA_NETWORK;
  mSmsAddress.numberPlan=CdmaSmsAddress.NUMBERING_PLAN_ISDN_TELEPHONY;
  mSmsAddress.ton=CdmaSmsAddress.TON_INTERNATIONAL_OR_IP;
  mBearerData.userData=userData;
  mBearerData.messageType=BearerData.MESSAGE_TYPE_SUBMIT;
  if (useNewId) {
    setNextMessageId();
  }
  mBearerData.messageId=nextMessageId;
  if (statusReportRequested) {
    mBearerData.deliveryAckReq=true;
  }
 else {
    mBearerData.deliveryAckReq=false;
  }
  mBearerData.userAckReq=false;
  mBearerData.readAckReq=false;
  mBearerData.reportReq=false;
  mBearerData.displayMode=BearerData.DISPLAY_DEFAULT;
  mBearerData.hasUserDataHeader=hasHeaders;
  byte[] encodedBearerData=null;
  try {
    encodedBearerData=BearerData.encode(mBearerData);
  }
 catch (  Exception e) {
    Log.e(LOG_TAG,"doGetSubmitPdu: EncodeCdmaSMS function in JNI interface failed: " + e.getMessage());
    return null;
  }
  env.messageType=SmsEnvelope.MESSAGE_TYPE_POINT_TO_POINT;
  env.teleService=SmsEnvelope.TELESERVICE_WEMT;
  env.destAddress=mSmsAddress;
  env.bearerReply=RETURN_ACK;
  env.bearerData=encodedBearerData;
  mEnvelope=env;
  return serialize(mSmsAddress);
}
