{
  final String action=intent.getAction();
  if (Intent.ACTION_BATTERY_LOW.equals(action)) {
    if (DEBUG) {
      Slog.d(TAG,"Battery life too low to do work. @ " + SystemClock.elapsedRealtime());
    }
    mBatteryHealthy=false;
  }
 else   if (Intent.ACTION_BATTERY_OKAY.equals(action)) {
    if (DEBUG) {
      Slog.d(TAG,"Battery life healthy enough to do work. @ " + SystemClock.elapsedRealtime());
    }
    mBatteryHealthy=true;
    maybeReportNewChargingState();
  }
 else   if (Intent.ACTION_POWER_CONNECTED.equals(action)) {
    mAlarm.set(AlarmManager.ELAPSED_REALTIME_WAKEUP,SystemClock.elapsedRealtime() + STABLE_CHARGING_THRESHOLD_MILLIS,mStableChargingTriggerIntent);
    mCharging=true;
  }
 else   if (Intent.ACTION_POWER_DISCONNECTED.equals(action)) {
    mAlarm.cancel(mStableChargingTriggerIntent);
    mCharging=false;
    maybeReportNewChargingState();
  }
 else   if (ACTION_CHARGING_STABLE.equals(action)) {
    if (DEBUG) {
      Slog.d(TAG,"Battery connected fired @ " + SystemClock.elapsedRealtime());
    }
    if (mCharging) {
      maybeReportNewChargingState();
    }
  }
}
