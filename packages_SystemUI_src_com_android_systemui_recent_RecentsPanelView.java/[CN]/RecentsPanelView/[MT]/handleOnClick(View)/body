{
  ViewHolder holder=(ViewHolder)view.getTag();
  TaskDescription ad=holder.taskDescription;
  final Context context=view.getContext();
  final ActivityManager am=(ActivityManager)context.getSystemService(Context.ACTIVITY_SERVICE);
  Bitmap bm=holder.thumbnailViewImageBitmap;
  boolean usingDrawingCache;
  if (bm.getWidth() == holder.thumbnailViewImage.getWidth() && bm.getHeight() == holder.thumbnailViewImage.getHeight()) {
    usingDrawingCache=false;
  }
 else {
    holder.thumbnailViewImage.setDrawingCacheEnabled(true);
    bm=holder.thumbnailViewImage.getDrawingCache();
    usingDrawingCache=true;
  }
  if (bm == null) {
    throw new RuntimeException("Recents thumbnail is null");
  }
  ActivityOptions opts=ActivityOptions.makeThumbnailScaleUpAnimation(holder.thumbnailViewImage,bm,0,0,null);
  show(false);
  if (ad.taskId >= 0) {
    am.moveTaskToFront(ad.taskId,ActivityManager.MOVE_TASK_WITH_HOME,opts.toBundle());
  }
 else {
    Intent intent=ad.intent;
    intent.addFlags(Intent.FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY | Intent.FLAG_ACTIVITY_TASK_ON_HOME | Intent.FLAG_ACTIVITY_NEW_TASK);
    if (DEBUG)     Log.v(TAG,"Starting activity " + intent);
    context.startActivityAsUser(intent,opts.toBundle(),new UserHandle(UserHandle.USER_CURRENT));
  }
  if (usingDrawingCache) {
    holder.thumbnailViewImage.setDrawingCacheEnabled(false);
  }
}
