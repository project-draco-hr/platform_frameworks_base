{
  final ActivityManager am=(ActivityManager)mContext.getSystemService(Context.ACTIVITY_SERVICE);
  final PackageManager pm=mContext.getPackageManager();
  ActivityManager.TaskThumbnails thumbs=am.getTaskThumbnails(ad.recentTaskInfo.persistentId);
  CharSequence label=ad.resolveInfo.activityInfo.loadLabel(pm);
  Drawable icon=getFullResIcon(ad.resolveInfo,pm);
  if (DEBUG)   Log.v(TAG,"Loaded bitmap for #" + index + " in "+ ad+ ": "+ thumbs.mainThumbnail);
synchronized (ad) {
    ad.mLabel=label;
    ad.mIcon=icon;
    if (thumbs != null && thumbs.mainThumbnail != null) {
      ad.setThumbnail(thumbs.mainThumbnail);
    }
  }
}
