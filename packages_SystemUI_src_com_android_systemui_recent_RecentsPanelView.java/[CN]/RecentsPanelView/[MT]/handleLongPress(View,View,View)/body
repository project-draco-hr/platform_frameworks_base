{
  thumbnailView.setSelected(true);
  final PopupMenu popup=new PopupMenu(mContext,anchorView == null ? selectedView : anchorView);
  mPopup=popup;
  popup.getMenuInflater().inflate(R.menu.recent_popup_menu,popup.getMenu());
  popup.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener(){
    public boolean onMenuItemClick(    MenuItem item){
      if (item.getItemId() == R.id.recent_remove_item) {
        mRecentsContainer.removeViewInLayout(selectedView);
      }
 else       if (item.getItemId() == R.id.recent_inspect_item) {
        ViewHolder viewHolder=(ViewHolder)selectedView.getTag();
        if (viewHolder != null) {
          final TaskDescription ad=viewHolder.taskDescription;
          startApplicationDetailsActivity(ad.packageName);
          mBar.animateCollapse();
        }
 else {
          throw new IllegalStateException("Oops, no tag on view " + selectedView);
        }
      }
 else {
        return false;
      }
      return true;
    }
  }
);
  popup.setOnDismissListener(new PopupMenu.OnDismissListener(){
    public void onDismiss(    PopupMenu menu){
      thumbnailView.setSelected(false);
      mPopup=null;
    }
  }
);
  popup.show();
}
