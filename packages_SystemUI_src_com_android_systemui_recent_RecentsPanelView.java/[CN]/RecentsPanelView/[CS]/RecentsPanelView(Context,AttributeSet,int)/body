{
  super(context,attrs,defStyle);
  Resources res=context.getResources();
  boolean xlarge=(res.getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_XLARGE;
  mIconDpi=xlarge ? DisplayMetrics.DENSITY_HIGH : res.getDisplayMetrics().densityDpi;
  int width=(int)res.getDimension(R.dimen.status_bar_recents_thumbnail_width);
  int height=(int)res.getDimension(R.dimen.status_bar_recents_thumbnail_height);
  int color=res.getColor(R.drawable.status_bar_recents_app_thumbnail_background);
  mDefaultThumbnailBackground=Bitmap.createBitmap(width,height,Bitmap.Config.ARGB_8888);
  Canvas c=new Canvas(mDefaultThumbnailBackground);
  c.drawColor(color);
  int bgPadding=(int)res.getDimension(R.dimen.recents_thumbnail_bg_press_padding);
  Bitmap pressedOverlay=Bitmap.createBitmap(width + 2 * bgPadding,height + 2 * bgPadding,Bitmap.Config.ARGB_8888);
  c.setBitmap(pressedOverlay);
  Drawable pressedDrawable9Patch=res.getDrawable(R.drawable.recents_thumbnail_bg_press);
  pressedDrawable9Patch.getCurrent().setBounds(0,0,pressedOverlay.getWidth(),pressedOverlay.getHeight());
  pressedDrawable9Patch.draw(c);
  mPressedDrawable=new BitmapDrawable(res,pressedOverlay);
}
