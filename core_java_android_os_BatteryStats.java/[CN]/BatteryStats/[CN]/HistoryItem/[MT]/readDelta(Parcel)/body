{
  int firstToken=src.readInt();
  int deltaTimeToken=firstToken & DELTA_TIME_MASK;
  cmd=(byte)((firstToken >> DELTA_CMD_SHIFT) & DELTA_CMD_MASK);
  if (DEBUG)   Slog.i(TAG,"READ DELTA: firstToken=0x" + Integer.toHexString(firstToken) + " deltaTimeToken="+ deltaTimeToken);
  if (deltaTimeToken < DELTA_TIME_ABS) {
    time+=deltaTimeToken;
  }
 else   if (deltaTimeToken == DELTA_TIME_ABS) {
    time=src.readLong();
    readFromParcel(src);
    return;
  }
 else   if (deltaTimeToken == DELTA_TIME_INT) {
    int delta=src.readInt();
    time+=delta;
    if (DEBUG)     Slog.i(TAG,"READ DELTA: time delta=" + delta + " new time="+ time);
  }
 else {
    long delta=src.readLong();
    if (DEBUG)     Slog.i(TAG,"READ DELTA: time delta=" + delta + " new time="+ time);
    time+=delta;
  }
  if ((firstToken & DELTA_BATTERY_LEVEL_FLAG) != 0) {
    int batteryLevelInt=src.readInt();
    batteryLevel=(byte)((batteryLevelInt >> 25) & 0x7f);
    batteryTemperature=(short)((batteryLevelInt << 7) >> 21);
    batteryVoltage=(char)(batteryLevelInt & 0x3fff);
    if (DEBUG)     Slog.i(TAG,"READ DELTA: batteryToken=0x" + Integer.toHexString(batteryLevelInt) + " batteryLevel="+ batteryLevel+ " batteryTemp="+ batteryTemperature+ " batteryVolt="+ (int)batteryVoltage);
  }
  if ((firstToken & DELTA_STATE_FLAG) != 0) {
    int stateInt=src.readInt();
    states=(firstToken & DELTA_STATE_MASK) | (stateInt & (~DELTA_STATE_MASK));
    batteryStatus=(byte)((stateInt >> 28) & 0xf);
    batteryHealth=(byte)((stateInt >> 24) & 0xf);
    batteryPlugType=(byte)((stateInt >> 22) & 0x3);
    if (DEBUG)     Slog.i(TAG,"READ DELTA: stateToken=0x" + Integer.toHexString(stateInt) + " batteryStatus="+ batteryStatus+ " batteryHealth="+ batteryHealth+ " batteryPlugType="+ batteryPlugType+ " states=0x"+ Integer.toHexString(states));
  }
 else {
    states=(firstToken & DELTA_STATE_MASK) | (states & (~DELTA_STATE_MASK));
  }
}
