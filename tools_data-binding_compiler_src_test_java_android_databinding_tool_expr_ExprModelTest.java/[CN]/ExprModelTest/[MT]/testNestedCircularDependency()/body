{
  LayoutBinder lb=new MockLayoutBinder();
  mExprModel=lb.getModel();
  IdentifierExpr a=lb.addVariable("a",int.class.getCanonicalName());
  IdentifierExpr b=lb.addVariable("b",int.class.getCanonicalName());
  IdentifierExpr c=lb.addVariable("c",int.class.getCanonicalName());
  final TernaryExpr a3Ternary=parse(lb,"a > 3 ? c > 4 ? a : b : c",TernaryExpr.class);
  final TernaryExpr c4Ternary=(TernaryExpr)a3Ternary.getIfTrue();
  mExprModel.seal();
  Iterable<Expr> shouldRead=getShouldRead();
  assertExactMatch(shouldRead,a,a3Ternary.getPred());
  assertTrue(mExprModel.markBitsRead());
  shouldRead=getShouldRead();
  assertExactMatch(shouldRead,c,c4Ternary.getPred());
  assertFlags(c,a3Ternary.getRequirementFlagIndex(true),a3Ternary.getRequirementFlagIndex(false));
  assertFlags(c4Ternary.getPred(),a3Ternary.getRequirementFlagIndex(true));
}
