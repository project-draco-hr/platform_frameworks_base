{
  byte[] blobData=generateData(25000,DataType.TEXT);
  MockResponse response=enqueueResponse(HTTP_OK,blobData);
  response.setCloseConnectionAfterXBytes(15382);
  long dlRequest=doCommonStandardEnqueue();
  waitForDownloadOrTimeout(dlRequest);
  Cursor cursor=getCursor(dlRequest);
  try {
    verifyInt(cursor,DownloadManager.COLUMN_STATUS,DownloadManager.STATUS_FAILED);
    verifyInt(cursor,DownloadManager.COLUMN_REASON,DownloadManager.ERROR_CANNOT_RESUME);
  }
  finally {
    cursor.close();
  }
  assertEquals(1,mReceiver.numDownloadsCompleted());
}
