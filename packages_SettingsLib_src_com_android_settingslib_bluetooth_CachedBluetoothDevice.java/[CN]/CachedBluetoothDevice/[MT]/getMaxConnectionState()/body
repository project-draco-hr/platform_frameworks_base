{
  int maxState=BluetoothProfile.STATE_DISCONNECTED;
  for (  LocalBluetoothProfile profile : getProfiles()) {
    int connectionStatus=getProfileConnectionState(profile);
    if (connectionStatus > maxState) {
      maxState=connectionStatus;
    }
  }
  return maxState;
}
