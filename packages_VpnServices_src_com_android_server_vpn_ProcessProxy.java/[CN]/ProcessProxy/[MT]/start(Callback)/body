{
  if (!isStopped()) {
    throw new IOException("Process is already running: " + this);
  }
  mLock.close();
  setState(ProcessState.STARTING);
  Thread thread=new Thread(new Runnable(){
    public void run(){
      try {
        performTask();
        setState(ProcessState.STOPPED);
        mLock.open();
        if (callback != null)         callback.done(ProcessProxy.this);
      }
 catch (      Throwable e) {
        setState(ProcessState.ERROR);
        if (callback != null)         callback.error(ProcessProxy.this,e);
      }
 finally {
        mThread=null;
      }
    }
  }
);
  thread.setPriority(Thread.MIN_PRIORITY);
  thread.start();
  mThread=thread;
  if (!waitUntilRunning()) {
    throw new IOException("Failed to start the process: " + this);
  }
}
