{
  mDistance=mLocation.distanceTo(location);
  int prevState=mState;
  boolean inside=mDistance <= Math.max(mFence.getRadius(),location.getAccuracy());
  if (inside) {
    mState=STATE_INSIDE;
  }
 else {
    mState=STATE_OUTSIDE;
  }
  if (prevState != 0 && mState != prevState) {
    if (mState == STATE_INSIDE)     return FLAG_ENTER;
    if (mState == STATE_OUTSIDE)     return FLAG_EXIT;
  }
  return 0;
}
