{
  if (state == State.CONNECTED) {
    startNetStatPoll();
    notifyDataConnection(Phone.REASON_CDMA_DATA_DETACHED);
  }
 else {
    if (state == State.FAILED) {
      cleanUpConnection(false,Phone.REASON_CDMA_DATA_DETACHED);
      mRetryMgr.resetRetryCount();
      CdmaCellLocation loc=(CdmaCellLocation)(phone.getCellLocation());
      EventLog.writeEvent(EventLogTags.CDMA_DATA_SETUP_FAILED,loc != null ? loc.getBaseStationId() : -1,TelephonyManager.getDefault().getNetworkType());
    }
    trySetupData(Phone.REASON_CDMA_DATA_DETACHED);
  }
}
