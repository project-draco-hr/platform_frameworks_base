{
  ArrayList<DataCallState> dataCallStates=(ArrayList<DataCallState>)(ar.result);
  if (ar.exception != null) {
    return;
  }
  if (state == State.CONNECTED) {
    boolean isActiveOrDormantConnectionPresent=false;
    int connectionState=DATA_CONNECTION_ACTIVE_PH_LINK_INACTIVE;
    for (int index=0; index < dataCallStates.size(); index++) {
      connectionState=dataCallStates.get(index).active;
      if (connectionState != DATA_CONNECTION_ACTIVE_PH_LINK_INACTIVE) {
        isActiveOrDormantConnectionPresent=true;
        break;
      }
    }
    if (!isActiveOrDormantConnectionPresent) {
      Log.i(LOG_TAG,"onDataStateChanged: No active connection" + "state is CONNECTED, disconnecting/cleanup");
      writeEventLogCdmaDataDrop();
      cleanUpConnection(true,null);
      return;
    }
switch (connectionState) {
case DATA_CONNECTION_ACTIVE_PH_LINK_UP:
      Log.v(LOG_TAG,"onDataStateChanged: active=LINK_ACTIVE && CONNECTED, ignore");
    activity=Activity.NONE;
  phone.notifyDataActivity();
startNetStatPoll();
break;
case DATA_CONNECTION_ACTIVE_PH_LINK_DOWN:
Log.v(LOG_TAG,"onDataStateChanged active=LINK_DOWN && CONNECTED, dormant");
activity=Activity.DORMANT;
phone.notifyDataActivity();
stopNetStatPoll();
break;
default :
Log.v(LOG_TAG,"onDataStateChanged: IGNORE unexpected DataCallState.active=" + connectionState);
}
}
 else {
Log.i(LOG_TAG,"onDataStateChanged: not connected, state=" + state + " ignoring");
}
}
