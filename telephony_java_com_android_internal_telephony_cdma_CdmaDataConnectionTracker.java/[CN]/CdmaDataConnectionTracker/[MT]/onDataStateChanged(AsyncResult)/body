{
  ArrayList<DataCallState> dataCallStates=(ArrayList<DataCallState>)(ar.result);
  if (ar.exception != null) {
    return;
  }
  if (state == State.CONNECTED) {
    if (dataCallStates.get(0).active == DATA_CONNECTION_ACTIVE_PH_LINK_UP) {
      activity=Activity.NONE;
      phone.notifyDataActivity();
    }
 else     if (dataCallStates.get(0).active == DATA_CONNECTION_ACTIVE_PH_LINK_DOWN) {
      activity=Activity.DORMANT;
      phone.notifyDataActivity();
    }
  }
 else {
    CdmaCellLocation loc=(CdmaCellLocation)(phone.getCellLocation());
    int bsid=(loc != null) ? loc.getBaseStationId() : -1;
    EventLog.List val=new EventLog.List(bsid,TelephonyManager.getDefault().getNetworkType());
    EventLog.writeEvent(TelephonyEventLog.EVENT_LOG_CDMA_DATA_DROP,val);
    cleanUpConnection(true,null);
  }
  Log.i(LOG_TAG,"Data connection has changed.");
}
