{
  ArrayList<DataCallState> dataCallStates=(ArrayList<DataCallState>)(ar.result);
  if (ar.exception != null) {
    return;
  }
  if (state == State.CONNECTED) {
    if (dataCallStates.size() >= 1) {
switch (dataCallStates.get(0).active) {
case DATA_CONNECTION_ACTIVE_PH_LINK_UP:
        Log.v(LOG_TAG,"onDataStateChanged: active=LINK_ACTIVE && CONNECTED, ignore");
      activity=Activity.NONE;
    phone.notifyDataActivity();
  break;
case DATA_CONNECTION_ACTIVE_PH_LINK_INACTIVE:
Log.v(LOG_TAG,"onDataStateChanged active=LINK_INACTIVE && CONNECTED, disconnecting/cleanup");
writeEventLogCdmaDataDrop();
cleanUpConnection(true,null);
break;
case DATA_CONNECTION_ACTIVE_PH_LINK_DOWN:
Log.v(LOG_TAG,"onDataStateChanged active=LINK_DOWN && CONNECTED, dormant");
activity=Activity.DORMANT;
phone.notifyDataActivity();
break;
default :
Log.v(LOG_TAG,"onDataStateChanged: IGNORE unexpected DataCallState.active=" + dataCallStates.get(0).active);
}
}
 else {
Log.v(LOG_TAG,"onDataStateChanged: network disconnected, clean up");
writeEventLogCdmaDataDrop();
cleanUpConnection(true,null);
}
}
 else {
Log.i(LOG_TAG,"onDataStateChanged: not connected, state=" + state + " ignoring");
}
}
