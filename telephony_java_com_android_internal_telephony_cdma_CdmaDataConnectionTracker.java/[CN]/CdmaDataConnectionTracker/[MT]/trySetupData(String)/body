{
  if (DBG)   log("***trySetupData due to " + (reason == null ? "(unspecified)" : reason));
  if (phone.getSimulatedRadioControl() != null) {
    setState(State.CONNECTED);
    notifyDataConnection(reason);
    notifyOffApnsOfAvailability(reason,true);
    Log.i(LOG_TAG,"(fix?) We're on the simulator; assuming data is connected");
    return true;
  }
  int psState=mCdmaPhone.mSST.getCurrentCdmaDataConnectionState();
  boolean roaming=phone.getServiceState().getRoaming();
  boolean desiredPowerState=mCdmaPhone.mSST.getDesiredPowerState();
  if ((state == State.IDLE || state == State.SCANNING) && isDataAllowed() && getAnyDataEnabled()) {
    boolean retValue=setupData(reason);
    notifyOffApnsOfAvailability(reason,retValue);
    return retValue;
  }
 else {
    notifyOffApnsOfAvailability(reason,false);
    return false;
  }
}
