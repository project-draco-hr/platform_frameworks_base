{
  super(p);
  mCdmaPhone=p;
  p.mCM.registerForAvailable(this,EVENT_RADIO_AVAILABLE,null);
  p.mCM.registerForOffOrNotAvailable(this,EVENT_RADIO_OFF_OR_NOT_AVAILABLE,null);
  p.mRuimRecords.registerForRecordsLoaded(this,EVENT_RECORDS_LOADED,null);
  p.mCM.registerForNVReady(this,EVENT_NV_READY,null);
  p.mCM.registerForDataStateChanged(this,EVENT_DATA_STATE_CHANGED,null);
  p.mCT.registerForVoiceCallEnded(this,EVENT_VOICE_CALL_ENDED,null);
  p.mCT.registerForVoiceCallStarted(this,EVENT_VOICE_CALL_STARTED,null);
  p.mSST.registerForCdmaDataConnectionAttached(this,EVENT_TRY_SETUP_DATA,null);
  p.mSST.registerForCdmaDataConnectionDetached(this,EVENT_CDMA_DATA_DETACHED,null);
  p.mSST.registerForRoamingOn(this,EVENT_ROAMING_ON,null);
  p.mSST.registerForRoamingOff(this,EVENT_ROAMING_OFF,null);
  p.mCM.registerForCdmaOtaProvision(this,EVENT_CDMA_OTA_PROVISION,null);
  this.netstat=INetStatService.Stub.asInterface(ServiceManager.getService("netstat"));
  IntentFilter filter=new IntentFilter();
  filter.addAction(INTENT_RECONNECT_ALARM);
  filter.addAction(Intent.ACTION_SCREEN_ON);
  filter.addAction(Intent.ACTION_SCREEN_OFF);
  filter.addAction(WifiManager.NETWORK_STATE_CHANGED_ACTION);
  filter.addAction(WifiManager.WIFI_STATE_CHANGED_ACTION);
  p.getContext().registerReceiver(mIntentReceiver,filter,null,p.h);
  mDataConnectionTracker=this;
  createAllDataConnectionList();
  SharedPreferences sp=PreferenceManager.getDefaultSharedPreferences(phone.getContext());
  dataEnabled[EXTERNAL_NETWORK_DEFAULT_ID]=!sp.getBoolean(CDMAPhone.DATA_DISABLED_ON_BOOT_KEY,false);
  noAutoAttach=!dataEnabled[EXTERNAL_NETWORK_DEFAULT_ID];
  if (!mRetryMgr.configure(SystemProperties.get("ro.cdma.data_retry_config"))) {
    if (!mRetryMgr.configure(DEFAULT_DATA_RETRY_CONFIG)) {
      Log.e(LOG_TAG,"Could not configure using DEFAULT_DATA_RETRY_CONFIG=" + DEFAULT_DATA_RETRY_CONFIG);
      mRetryMgr.configure(20,2000,1000);
    }
  }
}
