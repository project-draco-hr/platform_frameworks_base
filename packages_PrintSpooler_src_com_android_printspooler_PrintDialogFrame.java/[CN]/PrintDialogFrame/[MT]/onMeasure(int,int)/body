{
  super.onMeasure(widthMeasureSpec,heightMeasureSpec);
  int measuredWidth=getMeasuredWidth();
  final int widthMode=MeasureSpec.getMode(widthMeasureSpec);
switch (widthMode) {
case MeasureSpec.UNSPECIFIED:
{
      measuredWidth=mMaxWidth;
    }
  break;
case MeasureSpec.AT_MOST:
{
  final int receivedWidth=MeasureSpec.getSize(widthMeasureSpec);
  measuredWidth=Math.min(mMaxWidth,receivedWidth);
}
break;
}
mHeight=Math.max(mHeight,getMeasuredHeight());
int measuredHeight=getMeasuredHeight();
final int heightMode=MeasureSpec.getMode(heightMeasureSpec);
switch (heightMode) {
case MeasureSpec.UNSPECIFIED:
{
measuredHeight=mHeight;
}
break;
case MeasureSpec.AT_MOST:
{
final int receivedHeight=MeasureSpec.getSize(heightMeasureSpec);
measuredHeight=Math.min(mHeight,receivedHeight);
}
break;
}
setMeasuredDimension(measuredWidth,measuredHeight);
}
