{
  final int widthMode=MeasureSpec.getMode(widthMeasureSpec);
  if (widthMode == MeasureSpec.AT_MOST) {
    final int receivedWidth=MeasureSpec.getSize(widthMeasureSpec);
    final int computedWidth=Math.min(mMaxWidth,receivedWidth);
    widthMeasureSpec=MeasureSpec.makeMeasureSpec(computedWidth,MeasureSpec.EXACTLY);
  }
  super.onMeasure(widthMeasureSpec,heightMeasureSpec);
}
