{
  ProcessState proc=pkgList.valueAt(index);
  if (proc.mMultiPackage) {
    PackageState pkg=mStats.mPackages.get(pkgList.keyAt(index),proc.mUid);
    if (pkg == null) {
      throw new IllegalStateException("No existing package " + pkgList.keyAt(index) + " for multi-proc"+ proc.mName);
    }
    proc=pkg.mProcesses.get(proc.mName);
    if (proc == null) {
      throw new IllegalStateException("Didn't create per-package process");
    }
    pkgList.setValueAt(index,proc);
  }
  return proc;
}
