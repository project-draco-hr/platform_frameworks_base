{
  if (mActive <= 0) {
    throw new IllegalStateException("Service " + this + " has mActive="+ mActive);
  }
  int state=started ? memFactor : STATE_NOTHING;
  if (mStartedState != state) {
    if (mStartedState != STATE_NOTHING) {
      addStateTime(SERVICE_STARTED + (mStartedState * SERVICE_COUNT),now - mStartedStartTime);
    }
 else     if (started) {
      mStartedCount++;
    }
    mStartedState=state;
    mStartedStartTime=now;
    if (mProc != null) {
      mProc=mProc.pullFixedProc(mPackage);
      if (started) {
        mProc.incStartedServices(memFactor,now);
      }
 else {
        mProc.decStartedServices(memFactor,now);
      }
    }
  }
}
