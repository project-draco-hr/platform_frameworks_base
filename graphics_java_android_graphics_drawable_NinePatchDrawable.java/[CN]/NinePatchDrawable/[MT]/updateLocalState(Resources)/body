{
  final NinePatchState state=mNinePatchState;
  if (res != null) {
    final int densityDpi=res.getDisplayMetrics().densityDpi;
    mTargetDensity=densityDpi == 0 ? DisplayMetrics.DENSITY_DEFAULT : densityDpi;
  }
 else {
    mTargetDensity=state.mTargetDensity;
  }
  if (state.mDither != DEFAULT_DITHER) {
    setDither(state.mDither);
  }
  if (state.mPadding != null) {
    mPadding=new Rect(state.mPadding);
  }
  mTintFilter=updateTintFilter(mTintFilter,state.mTint,state.mTintMode);
  setNinePatch(state.mNinePatch);
}
