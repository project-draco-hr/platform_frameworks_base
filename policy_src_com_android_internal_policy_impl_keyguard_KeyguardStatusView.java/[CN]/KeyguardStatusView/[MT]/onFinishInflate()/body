{
  super.onFinishInflate();
  Resources res=getContext().getResources();
  final Locale locale=Locale.getDefault();
  final String datePattern=res.getString(com.android.internal.R.string.system_ui_date_pattern);
  final String bestFormat=ICU.getBestDateTimePattern(datePattern,locale.toString());
  mDateFormat=new SimpleDateFormat(bestFormat,locale);
  mDateView=(TextView)findViewById(R.id.date);
  mAlarmStatusView=(TextView)findViewById(R.id.alarm_status);
  mClockView=(ClockView)findViewById(R.id.clock_view);
  mLockPatternUtils=new LockPatternUtils(getContext());
  mDateView.setTypeface(Typeface.SANS_SERIF,Typeface.BOLD);
  final View marqueeViews[]={mDateView,mAlarmStatusView};
  for (int i=0; i < marqueeViews.length; i++) {
    View v=marqueeViews[i];
    if (v == null) {
      throw new RuntimeException("Can't find widget at index " + i);
    }
    v.setSelected(true);
  }
  refresh();
}
