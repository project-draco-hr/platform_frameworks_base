{
synchronized (sLock) {
    if (sMap.containsKey(locale)) {
      Hyphenator result=sMap.get(locale);
      return (result == null) ? 0 : result.mNativePtr;
    }
    Locale languageOnlyLocale=new Locale(locale.getLanguage());
    if (sMap.containsKey(languageOnlyLocale)) {
      Hyphenator result=sMap.get(languageOnlyLocale);
      sMap.put(locale,result);
      return (result == null) ? 0 : result.mNativePtr;
    }
    String script=locale.getScript();
    if (!script.equals("")) {
      Locale scriptOnlyLocale=new Locale.Builder().setLanguage("und").setScript(script).build();
      if (sMap.containsKey(scriptOnlyLocale)) {
        Hyphenator result=sMap.get(scriptOnlyLocale);
        sMap.put(locale,result);
        return (result == null) ? 0 : result.mNativePtr;
      }
    }
    sMap.put(locale,null);
  }
  return 0;
}
