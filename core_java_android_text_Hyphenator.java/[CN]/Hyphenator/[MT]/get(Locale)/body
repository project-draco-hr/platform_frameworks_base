{
synchronized (sLock) {
    Hyphenator result=sMap.get(locale);
    if (result != null) {
      return result.mNativePtr;
    }
    Locale languageOnlyLocale=new Locale(locale.getLanguage());
    result=sMap.get(languageOnlyLocale);
    if (result != null) {
      sMap.put(locale,result);
      return result.mNativePtr;
    }
    String script=locale.getScript();
    if (!script.equals("")) {
      Locale scriptOnlyLocale=new Locale.Builder().setLanguage("und").setScript(script).build();
      result=sMap.get(scriptOnlyLocale);
      if (result != null) {
        sMap.put(locale,result);
        return result.mNativePtr;
      }
    }
    sMap.put(locale,sEmptyHyphenator);
  }
  return sEmptyHyphenator.mNativePtr;
}
