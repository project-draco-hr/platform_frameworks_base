{
  Throwable excep=null;
  int index=className.lastIndexOf('$');
  String testName="";
  String originalClassName=className;
  if (index >= 0) {
    className=className.substring(0,index);
    testName=originalClassName.substring(index + 1);
  }
  try {
    Class clazz=mContext.getClassLoader().loadClass(className);
    if (mJUnitClass.isAssignableFrom(clazz)) {
      junit.framework.TestCase test=(junit.framework.TestCase)clazz.newInstance();
      JunitTestSuite newSuite=new JunitTestSuite();
      test.setName(testName);
      if (test instanceof AndroidTestCase) {
        AndroidTestCase testcase=(AndroidTestCase)test;
        try {
          testcase.setContext(mContext);
        }
 catch (        Exception ex) {
          Log.w(TAG,"Exception encountered while trying to set the context.",ex);
        }
      }
      newSuite.addTest(test);
      if (mMode == PERFORMANCE) {
        try {
          started(test.toString());
          runInPerformanceMode(test,className,true,test.toString());
          finished(test.toString());
          if (excep == null) {
            passed(test.toString());
          }
 else {
            failed(test.toString(),excep);
          }
        }
 catch (        Throwable ex) {
          excep=ex;
        }
      }
 else       if (mMode == PROFILING) {
        startProfiling();
        junit.textui.TestRunner.run(newSuite);
        finishProfiling();
      }
 else {
        junit.textui.TestRunner.run(newSuite);
      }
    }
  }
 catch (  ClassNotFoundException e) {
    Log.e("TestHarness","No test case to run",e);
  }
catch (  IllegalAccessException e) {
    Log.e("TestHarness","Illegal Access Exception",e);
  }
catch (  InstantiationException e) {
    Log.e("TestHarness","Instantiation Exception",e);
  }
}
