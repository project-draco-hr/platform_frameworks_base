{
  int error;
  boolean surfaceAbandoned=false;
  boolean glError=false;
  while ((error=GLES20.glGetError()) != GLES20.GL_NO_ERROR) {
    if (error == GLES20.GL_OUT_OF_MEMORY) {
      surfaceAbandoned=true;
    }
 else {
      glError=true;
    }
  }
  if (glError) {
    throw new IllegalStateException(msg + ": GLES20 error: 0x" + Integer.toHexString(error));
  }
  if (surfaceAbandoned) {
    throw new LegacyExceptionUtils.BufferQueueAbandonedException();
  }
}
