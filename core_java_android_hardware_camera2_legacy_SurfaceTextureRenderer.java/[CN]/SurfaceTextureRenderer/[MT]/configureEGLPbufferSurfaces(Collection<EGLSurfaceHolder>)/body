{
  if (surfaces == null || surfaces.size() == 0) {
    throw new IllegalStateException("No Surfaces were provided to draw to");
  }
  int maxLength=0;
  for (  EGLSurfaceHolder holder : surfaces) {
    int length=holder.width * holder.height;
    maxLength=(length > maxLength) ? length : maxLength;
    int[] surfaceAttribs={EGL14.EGL_WIDTH,holder.width,EGL14.EGL_HEIGHT,holder.height,EGL14.EGL_NONE};
    holder.eglSurface=EGL14.eglCreatePbufferSurface(mEGLDisplay,mConfigs,surfaceAttribs,0);
    checkEglError("eglCreatePbufferSurface");
  }
  mPBufferPixels=ByteBuffer.allocateDirect(maxLength * PBUFFER_PIXEL_BYTES).order(ByteOrder.nativeOrder());
}
