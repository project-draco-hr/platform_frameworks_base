{
  Log.i(TAG,"onIdleStart");
  if (mPackageManager.isStorageLow()) {
    return false;
  }
  final HashSet<String> pkgs=mPackageManager.getPackagesThatNeedDexOpt();
  if (pkgs == null) {
    return false;
  }
  mIdleTime.set(true);
  new Thread("BackgroundDexOptService_DexOpter"){
    @Override public void run(){
      for (      String pkg : pkgs) {
        if (!mIdleTime.get()) {
          break;
        }
        mPackageManager.performDexOpt(pkg,false);
      }
    }
  }
.start();
  return true;
}
