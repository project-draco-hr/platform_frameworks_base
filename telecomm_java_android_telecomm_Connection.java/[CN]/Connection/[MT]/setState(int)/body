{
  if (mState == State.FAILED || mState == State.CANCELED) {
    Log.d(this,"Connection already %s; cannot transition out of this state.",stateToString(mState));
    return;
  }
  if (mState != state) {
    Log.d(this,"setState: %s",stateToString(state));
    mState=state;
    for (    Listener l : mListeners) {
      l.onStateChanged(this,state);
    }
    onSetState(state);
  }
}
