{
  if (!mStreams.containsKey(stream)) {
    try {
      AudioCodec codec=stream.getCodec();
      String codecSpec=String.format(Locale.US,"%d %s %s",codec.type,codec.rtpmap,codec.fmtp);
      int id=nativeAdd(stream.getMode(),stream.getSocket(),stream.getRemoteAddress().getHostAddress(),stream.getRemotePort(),codecSpec,stream.getDtmfType());
      mStreams.put(stream,id);
    }
 catch (    NullPointerException e) {
      throw new IllegalStateException(e);
    }
  }
}
