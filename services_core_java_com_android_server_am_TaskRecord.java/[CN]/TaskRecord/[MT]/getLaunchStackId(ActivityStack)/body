{
  if (stack != null) {
    return stack.mStackId;
  }
  if (isHomeTask()) {
    return HOME_STACK_ID;
  }
  if (focusStack != null && focusStack.mStackId != HOME_STACK_ID) {
    return focusStack.mStackId;
  }
  if (mBounds != null || mLastNonFullscreenBounds != null) {
    return FREEFORM_WORKSPACE_STACK_ID;
  }
  return FULLSCREEN_WORKSPACE_STACK_ID;
}
