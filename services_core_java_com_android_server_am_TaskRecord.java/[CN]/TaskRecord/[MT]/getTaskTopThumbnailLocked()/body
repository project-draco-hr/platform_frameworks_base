{
  final ActivityRecord resumedActivity=stack.mResumedActivity;
  if (resumedActivity != null && resumedActivity.task == this) {
    return stack.screenshotActivities(resumedActivity);
  }
  TaskAccessInfo info=getTaskAccessInfoLocked();
  if (info.numSubThumbbails <= 0) {
    return info.mainThumbnail != null ? info.mainThumbnail : lastThumbnail;
  }
  return info.subtasks.get(info.numSubThumbbails - 1).holder.lastThumbnail;
}
