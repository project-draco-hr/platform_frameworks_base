{
  if (mActivities.remove(r) && r.fullscreen) {
    numFullscreen--;
  }
  if (r.isPersistable()) {
    mService.notifyTaskPersisterLocked(this,false);
  }
  if (stack != null && stack.mStackId == PINNED_STACK_ID) {
    mService.notifyTaskStackChangedLocked();
  }
  if (mActivities.isEmpty()) {
    return !mReuseTask;
  }
  updateEffectiveIntent();
  return false;
}
