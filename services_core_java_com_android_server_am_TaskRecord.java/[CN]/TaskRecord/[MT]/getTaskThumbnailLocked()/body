{
  if (stack != null) {
    final ActivityRecord resumedActivity=stack.mResumedActivity;
    if (resumedActivity != null && resumedActivity.task == this) {
      final Bitmap thumbnail=stack.screenshotActivitiesLocked(resumedActivity);
      setLastThumbnailLocked(thumbnail);
    }
  }
  final TaskThumbnail taskThumbnail=new TaskThumbnail();
  getLastThumbnail(taskThumbnail);
  return taskThumbnail;
}
