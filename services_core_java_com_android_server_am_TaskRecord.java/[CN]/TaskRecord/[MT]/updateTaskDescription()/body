{
  int activityNdx;
  final int numActivities=mActivities.size();
  for (activityNdx=Math.min(numActivities,1); activityNdx < numActivities; ++activityNdx) {
    final ActivityRecord r=mActivities.get(activityNdx);
    if (r.intent != null && (r.intent.getFlags() & Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET) != 0) {
      break;
    }
  }
  if (activityNdx > 0) {
    String label=null;
    Bitmap icon=null;
    int colorPrimary=0;
    for (--activityNdx; activityNdx >= 0; --activityNdx) {
      final ActivityRecord r=mActivities.get(activityNdx);
      if (r.taskDescription != null) {
        if (label == null) {
          label=r.taskDescription.getLabel();
        }
        if (icon == null) {
          icon=r.taskDescription.getIcon();
        }
        if (colorPrimary == 0) {
          colorPrimary=r.taskDescription.getPrimaryColor();
        }
      }
    }
    lastTaskDescription=new ActivityManager.TaskDescription(label,icon,colorPrimary);
  }
}
