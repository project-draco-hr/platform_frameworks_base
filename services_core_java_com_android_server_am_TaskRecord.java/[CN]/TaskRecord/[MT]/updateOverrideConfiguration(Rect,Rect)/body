{
  if (Objects.equals(mBounds,bounds)) {
    return null;
  }
  final Configuration oldConfig=mOverrideConfig;
  final boolean oldFullscreen=mFullscreen;
  mFullscreen=bounds == null;
  if (mFullscreen) {
    if (mBounds != null && StackId.persistTaskBounds(stack.mStackId)) {
      mLastNonFullscreenBounds=mBounds;
    }
    mBounds=null;
    mOverrideConfig=Configuration.EMPTY;
  }
 else {
    mTmpRect.set(bounds);
    adjustForMinimalTaskDimensions(mTmpRect);
    if (mBounds == null) {
      mBounds=new Rect(mTmpRect);
    }
 else {
      mBounds.set(mTmpRect);
    }
    if (stack == null || StackId.persistTaskBounds(stack.mStackId)) {
      mLastNonFullscreenBounds=mBounds;
    }
    mOverrideConfig=calculateOverrideConfig(mTmpRect,insetBounds,mTmpRect.right != bounds.right,mTmpRect.bottom != bounds.bottom);
  }
  if (mFullscreen != oldFullscreen) {
    mService.mStackSupervisor.scheduleReportMultiWindowModeChanged(this);
  }
  return !mOverrideConfig.equals(oldConfig) ? mOverrideConfig : null;
}
