{
  boolean foundFront=newTop != null ? true : false;
  final int numActivities=mActivities.size();
  for (int activityNdx=0; activityNdx < numActivities; ++activityNdx) {
    final ActivityRecord r=mActivities.get(activityNdx);
    if (foundFront || r.finishing) {
      r.frontOfTask=false;
    }
 else {
      r.frontOfTask=true;
      foundFront=true;
    }
  }
  if (!foundFront && numActivities > 0) {
    mActivities.get(0).frontOfTask=true;
  }
  if (newTop != null) {
    newTop.frontOfTask=true;
  }
}
