{
  final int userId=UserHandle.getCallingUserId();
  if (DEBUG) {
    Slog.i(TAG,"getAppWidgetIds() " + userId);
  }
  mSecurityPolicy.enforceCallFromPackage(componentName.getPackageName());
synchronized (mLock) {
    ensureGroupStateLoadedLocked(userId);
    ProviderId providerId=new ProviderId(Binder.getCallingUid(),componentName);
    Provider provider=lookupProviderLocked(providerId);
    if (provider != null) {
      return getWidgetIds(provider.widgets);
    }
    return new int[0];
  }
}
