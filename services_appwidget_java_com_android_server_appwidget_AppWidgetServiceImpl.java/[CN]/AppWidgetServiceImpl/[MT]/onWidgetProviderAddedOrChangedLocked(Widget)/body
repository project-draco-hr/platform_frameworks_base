{
  if (widget.provider == null)   return;
  int userId=widget.provider.getUserId();
  ArraySet<String> packages=mWidgetPackages.get(userId);
  if (packages == null) {
    mWidgetPackages.put(userId,packages=new ArraySet<String>());
  }
  packages.add(widget.provider.info.provider.getPackageName());
  if (widget.provider.isMaskedLocked()) {
    Bitmap bitmap=createMaskedWidgetBitmap(widget.provider);
    if (bitmap != null) {
      widget.replaceWithMaskedViewsLocked(mContext,bitmap);
    }
  }
 else {
    widget.clearMaskedViewsLocked();
  }
}
