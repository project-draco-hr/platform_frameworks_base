{
  final int userId=UserHandle.getCallingUserId();
  if (DEBUG) {
    Slog.i(TAG,"startListening() " + userId);
  }
  mSecurityPolicy.enforceCallFromPackage(callingPackage);
synchronized (mLock) {
    ensureGroupStateLoadedLocked(userId);
    HostId id=new HostId(Binder.getCallingUid(),hostId,callingPackage);
    Host host=lookupOrAddHostLocked(id);
    host.callbacks=callbacks;
    updatedViews.clear();
    ArrayList<Widget> instances=host.widgets;
    int N=instances.size();
    int[] updatedIds=new int[N];
    for (int i=0; i < N; i++) {
      Widget widget=instances.get(i);
      updatedIds[i]=widget.appWidgetId;
      updatedViews.add(cloneIfLocalBinder(widget.views));
    }
    return updatedIds;
  }
}
