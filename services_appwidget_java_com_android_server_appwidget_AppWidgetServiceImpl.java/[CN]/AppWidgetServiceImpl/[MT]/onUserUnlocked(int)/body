{
  if (isProfileWithLockedParent(userId)) {
    return;
  }
  if (!mUserManager.isUserUnlockingOrUnlocked(userId)) {
    Slog.w(TAG,"User " + userId + " is no longer unlocked - exiting");
    return;
  }
synchronized (mLock) {
    ensureGroupStateLoadedLocked(userId);
    reloadWidgetsMaskedStateForGroup(mSecurityPolicy.getGroupParent(userId));
    final int N=mProviders.size();
    for (int i=0; i < N; i++) {
      Provider provider=mProviders.get(i);
      if (provider.getUserId() != userId) {
        continue;
      }
      if (provider.widgets.size() > 0) {
        sendEnableIntentLocked(provider);
        int[] appWidgetIds=getWidgetIds(provider.widgets);
        sendUpdateIntentLocked(provider,appWidgetIds);
        registerForBroadcastsLocked(provider,appWidgetIds);
      }
    }
  }
}
