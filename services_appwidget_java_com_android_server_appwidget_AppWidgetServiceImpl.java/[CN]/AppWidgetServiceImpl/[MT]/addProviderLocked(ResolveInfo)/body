{
  if ((ri.activityInfo.applicationInfo.flags & ApplicationInfo.FLAG_EXTERNAL_STORAGE) != 0) {
    return false;
  }
  if (!ri.activityInfo.isEnabled()) {
    return false;
  }
  Provider p=parseProviderInfoXml(new ComponentName(ri.activityInfo.packageName,ri.activityInfo.name),ri);
  if (p != null) {
    Provider existing=lookupProviderLocked(p.info.provider);
    if (existing != null) {
      if (existing.zombie && !mSafeMode) {
        existing.zombie=false;
        existing.info=p.info;
        existing.uid=p.uid;
        if (DEBUG_BACKUP) {
          Slog.i(TAG,"Provider placeholder now reified: " + existing);
        }
      }
    }
 else {
      mInstalledProviders.add(p);
    }
    return true;
  }
 else {
    return false;
  }
}
