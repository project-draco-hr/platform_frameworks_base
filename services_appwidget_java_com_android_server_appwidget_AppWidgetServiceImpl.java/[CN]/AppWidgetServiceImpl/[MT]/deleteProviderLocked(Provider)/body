{
  int N=provider.widgets.size();
  for (int i=N - 1; i >= 0; i--) {
    Widget widget=provider.widgets.remove(i);
    updateAppWidgetInstanceLocked(widget,null,false);
    widget.host.widgets.remove(widget);
    mWidgets.remove(widget);
    widget.provider=null;
    pruneHostLocked(widget.host);
    widget.host=null;
  }
  mProviders.remove(provider);
  cancelBroadcasts(provider);
}
