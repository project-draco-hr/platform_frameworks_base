{
  final long identity=Binder.clearCallingIdentity();
  try {
    if (!isProfileWithUnlockedParent(profileId)) {
      return;
    }
    UserInfo user=mUserManager.getUserInfo(profileId);
    boolean shouldMask=user.isQuietModeEnabled() || !mUserManager.isUserUnlocked(user.getUserHandle());
    final int N=mProviders.size();
    for (int i=0; i < N; i++) {
      Provider provider=mProviders.get(i);
      int providerUserId=provider.getUserId();
      if (providerUserId != profileId) {
        continue;
      }
      if (provider.setMaskedByProfileUnavailabledLocked(shouldMask)) {
        if (provider.isMaskedLocked()) {
          maskWidgetsViewsLocked(provider);
        }
 else {
          unmaskWidgetsViewsLocked(provider);
        }
      }
    }
  }
  finally {
    Binder.restoreCallingIdentity(identity);
  }
}
