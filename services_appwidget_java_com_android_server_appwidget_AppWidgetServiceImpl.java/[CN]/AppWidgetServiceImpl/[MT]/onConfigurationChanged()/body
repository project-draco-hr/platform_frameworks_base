{
  if (DEBUG) {
    Slog.i(TAG,"onConfigurationChanged()");
  }
  Locale revised=Locale.getDefault();
  if (revised == null || mLocale == null || !revised.equals(mLocale)) {
    mLocale=revised;
synchronized (mLock) {
      SparseIntArray changedGroups=null;
      ArrayList<Provider> installedProviders=new ArrayList<>(mProviders);
      HashSet<ProviderId> removedProviders=new HashSet<>();
      int N=installedProviders.size();
      for (int i=N - 1; i >= 0; i--) {
        Provider provider=installedProviders.get(i);
        ensureGroupStateLoadedLocked(provider.getUserId());
        if (!removedProviders.contains(provider.id)) {
          final boolean changed=updateProvidersForPackageLocked(provider.id.componentName.getPackageName(),provider.getUserId(),removedProviders);
          if (changed) {
            if (changedGroups == null) {
              changedGroups=new SparseIntArray();
            }
            final int groupId=mSecurityPolicy.getGroupParent(provider.getUserId());
            changedGroups.put(groupId,groupId);
          }
        }
      }
      if (changedGroups != null) {
        final int groupCount=changedGroups.size();
        for (int i=0; i < groupCount; i++) {
          final int groupId=changedGroups.get(i);
          saveGroupStateAsync(groupId);
        }
      }
    }
  }
}
