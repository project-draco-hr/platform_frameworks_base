{
  if (DBG)   log("Got onConfigurationChanged()");
  Locale revised=Locale.getDefault();
  if (revised == null || mLocale == null || !(revised.equals(mLocale))) {
    mLocale=revised;
synchronized (mAppWidgetIds) {
      ensureStateLoadedLocked();
      ArrayList<Provider> installedProviders=new ArrayList<Provider>(mInstalledProviders);
      HashSet<ComponentName> removedProviders=new HashSet<ComponentName>();
      int N=installedProviders.size();
      for (int i=N - 1; i >= 0; i--) {
        Provider p=installedProviders.get(i);
        ComponentName cn=p.info.provider;
        if (!removedProviders.contains(cn)) {
          updateProvidersForPackageLocked(cn.getPackageName(),removedProviders);
        }
      }
      saveStateAsync();
    }
  }
}
