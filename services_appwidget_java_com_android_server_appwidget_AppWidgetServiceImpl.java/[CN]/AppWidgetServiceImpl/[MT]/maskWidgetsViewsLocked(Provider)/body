{
  Bitmap iconBitmap=null;
  try {
    final String providerPackage=provider.info.provider.getPackageName();
    Context userContext=mContext.createPackageContextAsUser(providerPackage,0,UserHandle.of(provider.getUserId()));
    PackageManager pm=userContext.getPackageManager();
    Drawable icon=pm.getApplicationInfo(providerPackage,0).loadUnbadgedIcon(pm);
    iconBitmap=mIconUtilities.createIconBitmap(icon);
  }
 catch (  NameNotFoundException e) {
    Slog.e(TAG,"Fail to get application icon",e);
    return;
  }
  final int widgetCount=provider.widgets.size();
  for (int j=0; j < widgetCount; j++) {
    Widget widget=provider.widgets.get(j);
    if (widget.replaceWithMaskedViewsLocked(mContext,iconBitmap)) {
      scheduleNotifyUpdateAppWidgetLocked(widget,widget.getEffectiveViewsLocked());
    }
  }
}
