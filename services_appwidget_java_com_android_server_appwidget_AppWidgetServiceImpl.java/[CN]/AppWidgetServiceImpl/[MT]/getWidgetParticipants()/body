{
  HashSet<String> packages=new HashSet<String>();
synchronized (mAppWidgetIds) {
    final int N=mAppWidgetIds.size();
    for (int i=0; i < N; i++) {
      final AppWidgetId id=mAppWidgetIds.get(i);
      packages.add(id.host.packageName);
      packages.add(id.provider.info.provider.getPackageName());
    }
  }
  return new ArrayList<String>(packages);
}
