{
  if (!mPrunedApps.contains(pkg)) {
    if (DEBUG_BACKUP) {
      Slog.i(TAG,"pruning widget state for restoring package " + pkg);
    }
    for (int i=mAppWidgetIds.size() - 1; i >= 0; i--) {
      AppWidgetId id=mAppWidgetIds.get(i);
      Provider p=id.provider;
      if (id.host.packageName.equals(pkg) || p.info.provider.getPackageName().equals(pkg)) {
        p.instances.remove(id);
        unbindAppWidgetRemoteViewsServicesLocked(id);
        mAppWidgetIds.remove(i);
      }
    }
    mPrunedApps.add(pkg);
  }
 else {
    if (DEBUG_BACKUP) {
      Slog.i(TAG,"already pruned " + pkg + ", continuing normally");
    }
  }
}
