{
  final int userId=UserHandle.getCallingUserId();
  if (DEBUG) {
    Slog.i(TAG,"unbindRemoteViewsService() " + userId);
  }
  mSecurityPolicy.enforceCallFromPackage(callingPackage);
synchronized (mLock) {
    ensureGroupStateLoadedLocked(userId);
    Pair<Integer,FilterComparison> key=Pair.create(appWidgetId,new FilterComparison(intent));
    if (mBoundRemoteViewsServices.containsKey(key)) {
      Widget widget=lookupWidgetLocked(appWidgetId,Binder.getCallingUid(),callingPackage);
      if (widget == null) {
        throw new IllegalArgumentException("Bad widget id " + appWidgetId);
      }
      ServiceConnectionProxy connection=(ServiceConnectionProxy)mBoundRemoteViewsServices.get(key);
      connection.disconnect();
      mContext.unbindService(connection);
      mBoundRemoteViewsServices.remove(key);
    }
  }
}
