{
  IntentFilter configFilter=new IntentFilter();
  configFilter.addAction(Intent.ACTION_CONFIGURATION_CHANGED);
  mContext.registerReceiverAsUser(mBroadcastReceiver,UserHandle.ALL,configFilter,null,null);
  IntentFilter packageFilter=new IntentFilter();
  packageFilter.addAction(Intent.ACTION_PACKAGE_ADDED);
  packageFilter.addAction(Intent.ACTION_PACKAGE_CHANGED);
  packageFilter.addAction(Intent.ACTION_PACKAGE_REMOVED);
  packageFilter.addDataScheme("package");
  mContext.registerReceiverAsUser(mBroadcastReceiver,UserHandle.ALL,packageFilter,null,null);
  IntentFilter sdFilter=new IntentFilter();
  sdFilter.addAction(Intent.ACTION_EXTERNAL_APPLICATIONS_AVAILABLE);
  sdFilter.addAction(Intent.ACTION_EXTERNAL_APPLICATIONS_UNAVAILABLE);
  mContext.registerReceiverAsUser(mBroadcastReceiver,UserHandle.ALL,sdFilter,null,null);
  IntentFilter userFilter=new IntentFilter();
  userFilter.addAction(Intent.ACTION_USER_UNLOCKED);
  userFilter.addAction(Intent.ACTION_USER_STOPPED);
  userFilter.addAction(Intent.ACTION_USER_SWITCHED);
  mContext.registerReceiverAsUser(mBroadcastReceiver,UserHandle.ALL,userFilter,null,null);
  IntentFilter offModeFilter=new IntentFilter();
  offModeFilter.addAction(Intent.ACTION_MANAGED_PROFILE_AVAILABILITY_CHANGED);
  mContext.registerReceiverAsUser(mBroadcastReceiver,UserHandle.ALL,offModeFilter,null,null);
}
