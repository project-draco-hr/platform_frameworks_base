{
  int index=keyToIndexMap.get(key,-1);
  if (index < 0) {
    index=findNextEmptyIndex(backingStore);
    if (index >= 0) {
      backingStore.set(index,1);
      keyToIndexMap.append(key,index);
      if (DEBUG) {
        Slog.i(LOG_TAG,"Allocated index:" + index + " for key:"+ SettingsProvider.keyToString(key));
      }
    }
 else {
      Slog.e(LOG_TAG,"Could not allocate generation index");
    }
  }
  return index;
}
