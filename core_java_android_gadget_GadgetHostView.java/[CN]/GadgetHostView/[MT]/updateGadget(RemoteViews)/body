{
  if (LOGD)   Log.d(TAG,"updateGadget called");
  boolean recycled=false;
  View newContent=null;
  Exception exception=null;
  if (remoteViews == null) {
    newContent=getDefaultView();
  }
  if (newContent == null && mStalePrepared && remoteViews.getLayoutId() == mStaleLayoutId) {
    try {
      remoteViews.reapply(mLocalContext,mStaleView);
      newContent=mStaleView;
      recycled=true;
      if (LOGD)       Log.d(TAG,"was able to recycled existing layout");
    }
 catch (    RuntimeException e) {
      exception=e;
    }
  }
  if (newContent == null) {
    try {
      newContent=remoteViews.apply(mLocalContext,this);
      if (LOGD)       Log.d(TAG,"had to inflate new layout");
    }
 catch (    RuntimeException e) {
      exception=e;
    }
  }
  if (exception != null && LOGD) {
    Log.w(TAG,"Error inflating gadget " + getGadgetInfo(),exception);
  }
  if (newContent == null) {
    if (LOGD)     Log.d(TAG,"updateGadget couldn't find any view, so inflating error");
    newContent=getErrorView();
  }
  if (!recycled) {
    prepareView(newContent);
    addView(newContent);
  }
  showNext();
  if (!recycled) {
    removeView(mStaleView);
  }
  mStalePrepared=false;
  mActiveActions=remoteViews;
  mStaleView=mActiveView;
  mActiveView=newContent;
  mStaleLayoutId=mActiveLayoutId;
  mActiveLayoutId=(remoteViews == null) ? -1 : remoteViews.getLayoutId();
}
