{
  super(context,attrs);
  if (DEBUG)   log("new %s()",getClass().getSimpleName());
  mContext=context;
  mPathPaint=new Paint(Paint.ANTI_ALIAS_FLAG);
  mPathPaint.setStyle(Paint.Style.STROKE);
  mPathPaint.setColor(GRAY);
  mPathPaint.setStrokeWidth(5);
  final int iconSize=mContext.getResources().getDimensionPixelSize(com.android.internal.R.dimen.notification_large_icon_width);
  final int topRowSize=iconSize * 2 / 3;
  mCloseButton=new ImageView(mContext);
  mCloseButton.setAlpha(0f);
  mCloseButton.setImageDrawable(sd(closePath(topRowSize),topRowSize,mPathPaint));
  addView(mCloseButton,new LayoutParams(topRowSize,topRowSize));
  mCloseButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      bounce(v,null);
      close();
    }
  }
);
  mSettingsButton=new ImageView(mContext);
  mSettingsButton.setAlpha(0f);
  final int p=topRowSize / 7;
  mSettingsButton.setPadding(p,p,p,p);
  mSettingsButton.setImageResource(R.drawable.ic_notify_settings_normal);
  LayoutParams lp=new LayoutParams(topRowSize,topRowSize);
  lp.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
  addView(mSettingsButton,lp);
  mSettingsButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      if (mAdapter != null && mAdapter.getMode() == Adapter.MODE_LIMITED) {
        mAdapter.configure();
      }
      bounce(mSettingsButton,null);
    }
  }
);
  mModeSpinner=new ModeSpinner(mContext);
  mModeSpinner.setAlpha(0);
  mModeSpinner.setEnabled(false);
  mModeSpinner.setId(android.R.id.title);
  lp=new LayoutParams(LayoutParams.WRAP_CONTENT,topRowSize);
  lp.addRule(RelativeLayout.CENTER_HORIZONTAL);
  addView(mModeSpinner,lp);
  mUntilPager=new UntilPager(mContext,mPathPaint,iconSize);
  mUntilPager.setId(android.R.id.tabhost);
  mUntilPager.setAlpha(0);
  lp=new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT);
  lp.addRule(BELOW,mModeSpinner.getId());
  addView(mUntilPager,lp);
  mAlarmWarning=new AlarmWarning(mContext);
  mAlarmWarning.setAlpha(0);
  lp=new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
  lp.addRule(CENTER_HORIZONTAL);
  lp.addRule(BELOW,mUntilPager.getId());
  addView(mAlarmWarning,lp);
  mHintText=new TextView(mContext);
  mHintText.setTypeface(CONDENSED);
  mHintText.setText("Swipe down for Limited Interruptions");
  mHintText.setGravity(Gravity.CENTER);
  mHintText.setTextColor(GRAY);
  addView(mHintText,new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));
  mPopDuration=mContext.getResources().getInteger(R.integer.blinds_pop_duration_ms);
}
