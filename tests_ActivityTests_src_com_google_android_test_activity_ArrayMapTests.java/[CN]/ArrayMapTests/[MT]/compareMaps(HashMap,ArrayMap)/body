{
  if (map.size() != array.size()) {
    Log.e("test","Bad size: expected " + map.size() + ", got "+ array.size());
    return false;
  }
  Set<Map.Entry> mapSet=map.entrySet();
  for (  Map.Entry entry : mapSet) {
    Object expValue=entry.getValue();
    Object gotValue=array.get(entry.getKey());
    if (!compare(expValue,gotValue)) {
      Log.e("test","Bad value: expected " + expValue + ", got "+ gotValue+ " at key "+ entry.getKey());
      return false;
    }
  }
  for (int i=0; i < array.size(); i++) {
    Object gotValue=array.valueAt(i);
    Object key=array.keyAt(i);
    Object expValue=map.get(key);
    if (!compare(expValue,gotValue)) {
      Log.e("test","Bad value: expected " + expValue + ", got "+ gotValue+ " at key "+ key);
      return false;
    }
  }
  return true;
}
