{
  if (set.size() != array.size()) {
    Log.e("test","Bad size: expected " + set.size() + ", got "+ array.size());
    return false;
  }
  for (  Object entry : set) {
    if (!array.contains(entry)) {
      Log.e("test","Bad value: expected " + entry + " not found in ArraySet");
      return false;
    }
  }
  for (int i=0; i < array.size(); i++) {
    Object entry=array.valueAt(i);
    if (!set.contains(entry)) {
      Log.e("test","Bad value: unexpected " + entry + " in ArraySet");
      return false;
    }
  }
  int index=0;
  for (  Object entry : array) {
    Object realEntry=array.valueAt(index);
    if (!compare(entry,realEntry)) {
      Log.e("test","Bad iterator: expected value " + realEntry + ", got "+ entry+ " at index "+ index);
      return false;
    }
    index++;
  }
  return true;
}
