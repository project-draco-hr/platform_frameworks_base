{
synchronized (this) {
    if (mReaderThread == null) {
      if (!open()) {
        return null;
      }
      mReaderThread=new ReaderThread();
      mReaderThread.start();
    }
  }
  try {
    ParcelFileDescriptor[] pair=ParcelFileDescriptor.createSocketPair(OsConstants.SOCK_SEQPACKET);
    mParcelFileDescriptor=pair[0];
    FileOutputStream fos=new FileOutputStream(mParcelFileDescriptor.getFileDescriptor());
    mReaderThread.addListener(fos);
    if (mWriterThread == null) {
      FileInputStream fis=new FileInputStream(mParcelFileDescriptor.getFileDescriptor());
      mWriterThread=new WriterThread(fis);
      mWriterThread.start();
    }
    return pair[1];
  }
 catch (  IOException e) {
    Log.e(TAG,"could not create ParcelFileDescriptor pair",e);
    return null;
  }
}
