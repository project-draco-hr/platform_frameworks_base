{
  if (DEBUG)   Log.d(TAG,"dispatchInputEvent(" + event + ")");
  if (event instanceof KeyEvent) {
    if (((KeyEvent)event).dispatch(this,mDispatcherState,this)) {
      return Session.DISPATCH_HANDLED;
    }
  }
 else   if (event instanceof MotionEvent) {
    MotionEvent motionEvent=(MotionEvent)event;
    final int source=motionEvent.getSource();
    if (motionEvent.isTouchEvent()) {
      if (onTouchEvent(motionEvent)) {
        return Session.DISPATCH_HANDLED;
      }
    }
 else     if ((source & InputDevice.SOURCE_CLASS_TRACKBALL) != 0) {
      if (onTrackballEvent(motionEvent)) {
        return Session.DISPATCH_HANDLED;
      }
    }
 else {
      if (onGenericMotionEvent(motionEvent)) {
        return Session.DISPATCH_HANDLED;
      }
    }
  }
  if (mOverlayView == null || !mOverlayView.isAttachedToWindow()) {
    return Session.DISPATCH_NOT_HANDLED;
  }
  if (!mOverlayView.hasWindowFocus()) {
    mOverlayView.getViewRootImpl().windowFocusChanged(true,true);
  }
  mOverlayView.getViewRootImpl().dispatchInputEvent(event,receiver);
  return Session.DISPATCH_IN_PROGRESS;
}
