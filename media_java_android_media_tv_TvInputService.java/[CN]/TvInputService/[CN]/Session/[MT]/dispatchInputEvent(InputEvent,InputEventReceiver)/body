{
  if (DEBUG)   Log.d(TAG,"dispatchInputEvent(" + event + ")");
  boolean isNavigationKey=false;
  if (event instanceof KeyEvent) {
    KeyEvent keyEvent=(KeyEvent)event;
    isNavigationKey=isNavigationKey(keyEvent.getKeyCode());
    if (keyEvent.dispatch(this,mDispatcherState,this)) {
      return TvInputManager.Session.DISPATCH_HANDLED;
    }
  }
 else   if (event instanceof MotionEvent) {
    MotionEvent motionEvent=(MotionEvent)event;
    final int source=motionEvent.getSource();
    if (motionEvent.isTouchEvent()) {
      if (onTouchEvent(motionEvent)) {
        return TvInputManager.Session.DISPATCH_HANDLED;
      }
    }
 else     if ((source & InputDevice.SOURCE_CLASS_TRACKBALL) != 0) {
      if (onTrackballEvent(motionEvent)) {
        return TvInputManager.Session.DISPATCH_HANDLED;
      }
    }
 else {
      if (onGenericMotionEvent(motionEvent)) {
        return TvInputManager.Session.DISPATCH_HANDLED;
      }
    }
  }
  if (mOverlayView == null || !mOverlayView.isAttachedToWindow()) {
    return TvInputManager.Session.DISPATCH_NOT_HANDLED;
  }
  if (!mOverlayView.hasWindowFocus()) {
    mOverlayView.getViewRootImpl().windowFocusChanged(true,true);
  }
  if (isNavigationKey && mOverlayView.hasFocusable()) {
    mOverlayView.getViewRootImpl().dispatchInputEvent(event);
    return TvInputManager.Session.DISPATCH_HANDLED;
  }
 else {
    mOverlayView.getViewRootImpl().dispatchInputEvent(event,receiver);
    return TvInputManager.Session.DISPATCH_IN_PROGRESS;
  }
}
