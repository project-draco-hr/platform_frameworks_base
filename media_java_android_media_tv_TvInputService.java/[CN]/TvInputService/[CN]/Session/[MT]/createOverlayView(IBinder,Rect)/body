{
  if (mOverlayViewContainer != null) {
    removeOverlayView(false);
  }
  if (DEBUG)   Log.d(TAG,"create overlay view(" + frame + ")");
  mWindowToken=windowToken;
  mOverlayFrame=frame;
  onOverlayViewSizeChanged(frame.right - frame.left,frame.bottom - frame.top);
  if (!mOverlayViewEnabled) {
    return;
  }
  mOverlayView=onCreateOverlayView();
  if (mOverlayView == null) {
    return;
  }
  if (mOverlayViewCleanUpTask != null) {
    mOverlayViewCleanUpTask.cancel(true);
    mOverlayViewCleanUpTask=null;
  }
  mOverlayViewContainer=new FrameLayout(mContext);
  mOverlayViewContainer.addView(mOverlayView);
  int type=WindowManager.LayoutParams.TYPE_APPLICATION_MEDIA_OVERLAY;
  int flags=WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE | WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE | WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS;
  if (ActivityManager.isHighEndGfx()) {
    flags|=WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED;
  }
  mWindowParams=new WindowManager.LayoutParams(frame.right - frame.left,frame.bottom - frame.top,frame.left,frame.top,type,flags,PixelFormat.TRANSPARENT);
  mWindowParams.privateFlags|=WindowManager.LayoutParams.PRIVATE_FLAG_NO_MOVE_ANIMATION;
  mWindowParams.gravity=Gravity.START | Gravity.TOP;
  mWindowParams.token=windowToken;
  mWindowManager.addView(mOverlayViewContainer,mWindowParams);
}
