{
  if ((modeFlags & persistableModeFlags) != modeFlags) {
    throw new SecurityException("Requested flags 0x" + Integer.toHexString(modeFlags) + ", but only 0x"+ Integer.toHexString(persistableModeFlags)+ " are allowed");
  }
  final int before=persistedModeFlags;
  persistedModeFlags|=(persistableModeFlags & modeFlags);
  if (persistedModeFlags != 0) {
    persistedCreateTime=System.currentTimeMillis();
  }
  updateModeFlags();
  return persistedModeFlags != before;
}
