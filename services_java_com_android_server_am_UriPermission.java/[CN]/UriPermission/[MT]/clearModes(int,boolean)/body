{
  final int before=persistedModeFlags;
  if ((modeFlagsToClear & Intent.FLAG_GRANT_READ_URI_PERMISSION) != 0) {
    if (persist) {
      persistedModeFlags&=~Intent.FLAG_GRANT_READ_URI_PERMISSION;
    }
    globalModeFlags&=~Intent.FLAG_GRANT_READ_URI_PERMISSION;
    modeFlags&=~Intent.FLAG_GRANT_READ_URI_PERMISSION;
    if (mReadOwners != null) {
      for (      UriPermissionOwner r : mReadOwners) {
        r.removeReadPermission(this);
      }
      mReadOwners=null;
    }
  }
  if ((modeFlagsToClear & Intent.FLAG_GRANT_WRITE_URI_PERMISSION) != 0) {
    if (persist) {
      persistedModeFlags&=~Intent.FLAG_GRANT_WRITE_URI_PERMISSION;
    }
    globalModeFlags&=~Intent.FLAG_GRANT_WRITE_URI_PERMISSION;
    modeFlags&=~Intent.FLAG_GRANT_WRITE_URI_PERMISSION;
    if (mWriteOwners != null) {
      for (      UriPermissionOwner r : mWriteOwners) {
        r.removeWritePermission(this);
      }
      mWriteOwners=null;
    }
  }
  globalModeFlags|=persistedModeFlags;
  modeFlags|=globalModeFlags;
  return persistedModeFlags != before;
}
