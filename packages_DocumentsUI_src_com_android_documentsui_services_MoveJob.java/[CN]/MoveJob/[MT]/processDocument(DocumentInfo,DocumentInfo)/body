{
  if (src.authority.equals(dest.authority)) {
    if ((src.flags & Document.FLAG_SUPPORTS_MOVE) != 0) {
      if (DocumentsContract.moveDocument(getClient(src),src.derivedUri,dest.derivedUri) == null) {
        onFileFailed(src);
        return false;
      }
      return true;
    }
  }
  if (src.isVirtualDocument()) {
    Log.w(TAG,"Cannot move virtual files byte by byte.");
    onFileFailed(src);
    return false;
  }
  boolean copied=byteCopyDocument(src,dest);
  return copied && !isCanceled() && deleteDocument(src);
}
