{
  RadioState oldState;
synchronized (mStateMonitor) {
    if (Config.LOGV) {
      Log.v(LOG_TAG,"setRadioState old: " + mState + " new "+ newState);
    }
    oldState=mState;
    mState=newState;
    if (oldState == mState) {
      return;
    }
    if (mContext != null && newState == RadioState.RADIO_UNAVAILABLE && oldState != RadioState.RADIO_OFF) {
      Checkin.updateStats(mContext.getContentResolver(),Checkin.Stats.Tag.PHONE_RADIO_RESETS,1,0.0);
    }
    mRadioStateChangedRegistrants.notifyRegistrants();
    if (mState.isAvailable() && !oldState.isAvailable()) {
      Log.d(LOG_TAG,"Notifying: radio available");
      mAvailRegistrants.notifyRegistrants();
      onRadioAvailable();
    }
    if (!mState.isAvailable() && oldState.isAvailable()) {
      Log.d(LOG_TAG,"Notifying: radio not available");
      mNotAvailRegistrants.notifyRegistrants();
    }
    if (mState.isSIMReady() && !oldState.isSIMReady()) {
      Log.d(LOG_TAG,"Notifying: SIM ready");
      mSIMReadyRegistrants.notifyRegistrants();
    }
    if (mState == RadioState.SIM_LOCKED_OR_ABSENT) {
      Log.d(LOG_TAG,"Notifying: SIM locked or absent");
      mSIMLockedRegistrants.notifyRegistrants();
    }
    if (mState.isOn() && !oldState.isOn()) {
      Log.d(LOG_TAG,"Notifying: Radio On");
      mOnRegistrants.notifyRegistrants();
    }
    if ((!mState.isOn() || !mState.isAvailable()) && !((!oldState.isOn() || !oldState.isAvailable()))) {
      Log.d(LOG_TAG,"Notifying: radio off or not available");
      mOffOrNotAvailRegistrants.notifyRegistrants();
    }
  }
}
