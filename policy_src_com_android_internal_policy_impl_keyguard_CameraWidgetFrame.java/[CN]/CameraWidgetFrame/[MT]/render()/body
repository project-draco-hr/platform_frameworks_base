{
  if (mRendered)   return;
  try {
    int width=getRootView().getWidth();
    int height=getRootView().getHeight();
    if (DEBUG)     Log.d(TAG,String.format("render [%sx%s] %s",width,height,Integer.toHexString(hashCode())));
    if (width == 0 || height == 0) {
      return;
    }
    Bitmap offscreen=Bitmap.createBitmap(width,height,Bitmap.Config.ARGB_8888);
    Canvas c=new Canvas(offscreen);
    mWidgetView.measure(MeasureSpec.makeMeasureSpec(width,MeasureSpec.EXACTLY),MeasureSpec.makeMeasureSpec(height,MeasureSpec.EXACTLY));
    mWidgetView.layout(0,0,width,height);
    mWidgetView.draw(c);
    ((ImageView)getChildAt(0)).setImageBitmap(offscreen);
    mRendered=true;
  }
 catch (  Throwable t) {
    Log.w(TAG,"Error rendering camera widget",t);
    removeAllViews();
    View genericView=inflateGenericWidgetView(mContext);
    addView(genericView);
  }
}
