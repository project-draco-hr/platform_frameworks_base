{
  try {
    int width=getRootView().getWidth();
    int height=getRootView().getHeight();
    if (mRenderedSize.x == width && mRenderedSize.y == height) {
      if (DEBUG)       Log.d(TAG,String.format("already rendered at size=%sx%s",width,height));
      return;
    }
    if (width == 0 || height == 0) {
      return;
    }
    if (DEBUG)     Log.d(TAG,String.format("render size=%sx%s instance=%s at %s",width,height,Integer.toHexString(hashCode()),SystemClock.uptimeMillis()));
    Bitmap offscreen=Bitmap.createBitmap(width,height,Bitmap.Config.ARGB_8888);
    Canvas c=new Canvas(offscreen);
    mWidgetView.measure(MeasureSpec.makeMeasureSpec(width,MeasureSpec.EXACTLY),MeasureSpec.makeMeasureSpec(height,MeasureSpec.EXACTLY));
    mWidgetView.layout(0,0,width,height);
    mWidgetView.draw(c);
    ((ImageView)getChildAt(0)).setImageBitmap(offscreen);
    mRenderedSize.set(width,height);
  }
 catch (  Throwable t) {
    Log.w(TAG,"Error rendering camera widget",t);
    removeAllViews();
    View genericView=inflateGenericWidgetView(mContext);
    addView(genericView);
  }
}
