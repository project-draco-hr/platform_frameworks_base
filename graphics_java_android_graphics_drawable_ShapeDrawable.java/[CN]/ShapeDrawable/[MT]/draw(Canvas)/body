{
  Rect r=getBounds();
  Paint paint=mShapeState.mPaint;
  int prevAlpha=paint.getAlpha();
  paint.setAlpha(modulateAlpha(prevAlpha,mShapeState.mAlpha));
  if (paint.getAlpha() != 0 || paint.getXfermode() != null || paint.hasShadow) {
    if (mShapeState.mShape != null) {
      int count=canvas.save();
      canvas.translate(r.left,r.top);
      onDraw(mShapeState.mShape,canvas,paint);
      canvas.restoreToCount(count);
    }
 else {
      canvas.drawRect(r,paint);
    }
  }
  paint.setAlpha(prevAlpha);
}
