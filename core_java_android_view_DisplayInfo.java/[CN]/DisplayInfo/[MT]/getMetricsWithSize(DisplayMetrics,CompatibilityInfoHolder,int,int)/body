{
  outMetrics.densityDpi=(int)((logicalDensity * DisplayMetrics.DENSITY_DEFAULT) + .5f);
  outMetrics.noncompatWidthPixels=outMetrics.widthPixels=width;
  outMetrics.noncompatHeightPixels=outMetrics.heightPixels=height;
  outMetrics.density=outMetrics.noncompatDensity=logicalDensity;
  outMetrics.scaledDensity=outMetrics.noncompatScaledDensity=outMetrics.density;
  outMetrics.xdpi=outMetrics.noncompatXdpi=physicalXDpi;
  outMetrics.ydpi=outMetrics.noncompatYdpi=physicalYDpi;
  if (cih != null) {
    CompatibilityInfo ci=cih.getIfNeeded();
    if (ci != null) {
      ci.applyToDisplayMetrics(outMetrics);
    }
  }
}
