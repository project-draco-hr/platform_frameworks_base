{
  StringBuilder sb=new StringBuilder(getScString());
  sb.append("\n");
  if (ar.exception != null) {
    state=State.FAILED;
    sb.append(context.getText(com.android.internal.R.string.mmiError));
  }
 else {
    int[] ints=(int[])ar.result;
    if (ints.length != 0) {
      if (ints[0] == 0) {
        sb.append(context.getText(com.android.internal.R.string.serviceDisabled));
      }
 else       if (sc.equals(SC_WAIT)) {
        sb.append(createQueryCallWaitingResultMessage(ints[1]));
      }
 else       if (isServiceCodeCallBarring(sc) || (ints[0] == 1)) {
        sb.append(context.getText(com.android.internal.R.string.serviceEnabled));
      }
 else {
        sb.append(context.getText(com.android.internal.R.string.mmiError));
      }
    }
 else {
      sb.append(context.getText(com.android.internal.R.string.mmiError));
    }
    state=State.COMPLETE;
  }
  message=sb;
  phone.onMMIDone(this);
}
