{
  int entryLength=entry.length();
  while (entryLength > 0 && Character.isWhitespace(entry.charAt(entryLength - 1)))   entryLength--;
  if (entryLength < 3)   return false;
  if (entryLength < entry.length())   entry=entry.substring(0,entryLength);
  char ch1=entry.charAt(0);
  boolean fullPath=(ch1 == '/' || (Character.isLetter(ch1) && entry.charAt(1) == ':' && entry.charAt(2) == '\\'));
  if (!fullPath)   entry=playListDirectory + entry;
  FileEntry bestMatch=null;
  int bestMatchLength=0;
  if (fileList != null) {
    int count=fileList.getCount();
    fileList.move(-1000);
    while (--count >= 0) {
      if (!fileList.moveToNext()) {
        fileList.moveToFirst();
      }
      long rowId=fileList.getLong(FILES_PRESCAN_ID_COLUMN_INDEX);
      String path=fileList.getString(FILES_PRESCAN_PATH_COLUMN_INDEX);
      int format=fileList.getInt(FILES_PRESCAN_FORMAT_COLUMN_INDEX);
      long lastModified=fileList.getLong(FILES_PRESCAN_DATE_MODIFIED_COLUMN_INDEX);
      if (path.equalsIgnoreCase(entry)) {
        bestMatch=new FileEntry(rowId,path,lastModified,format);
        break;
      }
      int matchLength=matchPaths(path,entry);
      if (matchLength > bestMatchLength) {
        bestMatch=new FileEntry(rowId,path,lastModified,format);
        bestMatchLength=matchLength;
      }
    }
  }
  if (bestMatch == null) {
    return false;
  }
  try {
    if (bestMatch.mRowId == 0) {
      Cursor c=mMediaProvider.query(mAudioUri,ID_PROJECTION,MediaStore.Files.FileColumns.DATA + "=?",new String[]{bestMatch.mPath},null,null);
      if (c != null) {
        if (c.moveToNext()) {
          bestMatch.mRowId=c.getLong(0);
        }
        c.close();
      }
      if (bestMatch.mRowId == 0) {
        return false;
      }
    }
    values.clear();
    values.put(MediaStore.Audio.Playlists.Members.PLAY_ORDER,Integer.valueOf(index));
    values.put(MediaStore.Audio.Playlists.Members.AUDIO_ID,Long.valueOf(bestMatch.mRowId));
    mMediaProvider.insert(uri,values);
  }
 catch (  RemoteException e) {
    Log.e(TAG,"RemoteException in MediaScanner.addPlayListEntry()",e);
    return false;
  }
  return true;
}
