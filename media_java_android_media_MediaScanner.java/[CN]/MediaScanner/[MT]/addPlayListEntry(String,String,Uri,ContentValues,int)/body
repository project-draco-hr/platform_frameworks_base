{
  int entryLength=entry.length();
  while (entryLength > 0 && Character.isWhitespace(entry.charAt(entryLength - 1)))   entryLength--;
  if (entryLength < 3)   return false;
  if (entryLength < entry.length())   entry=entry.substring(0,entryLength);
  char ch1=entry.charAt(0);
  boolean fullPath=(ch1 == '/' || (Character.isLetter(ch1) && entry.charAt(1) == ':' && entry.charAt(2) == '\\'));
  if (!fullPath)   entry=playListDirectory + entry;
  FileEntry bestMatch=null;
  int bestMatchLength=0;
  Cursor c=null;
  try {
    c=mMediaProvider.query(mFilesUri,FILES_PRESCAN_PROJECTION,null,null,null,null);
  }
 catch (  RemoteException e1) {
  }
  if (c != null) {
    while (c.moveToNext()) {
      long rowId=c.getLong(FILES_PRESCAN_ID_COLUMN_INDEX);
      String path=c.getString(FILES_PRESCAN_PATH_COLUMN_INDEX);
      int format=c.getInt(FILES_PRESCAN_FORMAT_COLUMN_INDEX);
      long lastModified=c.getLong(FILES_PRESCAN_DATE_MODIFIED_COLUMN_INDEX);
      if (path.equalsIgnoreCase(entry)) {
        bestMatch=new FileEntry(rowId,path,lastModified,format);
        break;
      }
      int matchLength=matchPaths(path,entry);
      if (matchLength > bestMatchLength) {
        bestMatch=new FileEntry(rowId,path,lastModified,format);
        bestMatchLength=matchLength;
      }
    }
    c.close();
  }
  if (bestMatch == null) {
    return false;
  }
  try {
    if (bestMatch.mRowId == 0) {
      c=mMediaProvider.query(mAudioUri,ID_PROJECTION,MediaStore.Files.FileColumns.DATA + "=?",new String[]{bestMatch.mPath},null,null);
      if (c != null) {
        if (c.moveToNext()) {
          bestMatch.mRowId=c.getLong(0);
        }
        c.close();
      }
      if (bestMatch.mRowId == 0) {
        return false;
      }
    }
    values.clear();
    values.put(MediaStore.Audio.Playlists.Members.PLAY_ORDER,Integer.valueOf(index));
    values.put(MediaStore.Audio.Playlists.Members.AUDIO_ID,Long.valueOf(bestMatch.mRowId));
    mMediaProvider.insert(uri,values);
  }
 catch (  RemoteException e) {
    Log.e(TAG,"RemoteException in MediaScanner.addPlayListEntry()",e);
    return false;
  }
  return true;
}
