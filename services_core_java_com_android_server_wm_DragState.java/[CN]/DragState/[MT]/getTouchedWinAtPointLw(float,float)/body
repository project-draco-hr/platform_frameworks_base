{
  WindowState touchedWin=null;
  final int x=(int)xf;
  final int y=(int)yf;
  final WindowList windows=mService.getWindowListLocked(mDisplay);
  if (windows == null) {
    return null;
  }
  final int N=windows.size();
  for (int i=N - 1; i >= 0; i--) {
    WindowState child=windows.get(i);
    final int flags=child.mAttrs.flags;
    if (!child.isVisibleLw()) {
      continue;
    }
    if ((flags & WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE) != 0) {
      continue;
    }
    child.getVisibleBounds(mTmpRect,!BOUNDS_FOR_TOUCH);
    if (!mTmpRect.contains(x,y)) {
      continue;
    }
    child.getTouchableRegion(mTmpRegion);
    final int touchFlags=flags & (WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE | WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL);
    if (mTmpRegion.contains(x,y) || touchFlags == 0) {
      touchedWin=child;
      break;
    }
  }
  return touchedWin;
}
