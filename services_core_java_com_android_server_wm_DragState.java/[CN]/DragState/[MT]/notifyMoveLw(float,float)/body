{
  if (mAnimation != null) {
    return;
  }
  mCurrentX=x;
  mCurrentY=y;
  final int myPid=Process.myPid();
  if (SHOW_LIGHT_TRANSACTIONS)   Slog.i(TAG_WM,">>> OPEN TRANSACTION notifyMoveLw");
  SurfaceControl.openTransaction();
  try {
    mSurfaceControl.setPosition(x - mThumbOffsetX,y - mThumbOffsetY);
    if (SHOW_TRANSACTIONS)     Slog.i(TAG_WM,"  DRAG " + mSurfaceControl + ": pos=("+ (int)(x - mThumbOffsetX)+ ","+ (int)(y - mThumbOffsetY)+ ")");
  }
  finally {
    SurfaceControl.closeTransaction();
    if (SHOW_LIGHT_TRANSACTIONS)     Slog.i(TAG_WM,"<<< CLOSE TRANSACTION notifyMoveLw");
  }
  WindowState touchedWin=getTouchedWinAtPointLw(x,y);
  if (touchedWin == null) {
    if (DEBUG_DRAG)     Slog.d(TAG_WM,"No touched win at x=" + x + " y="+ y);
    return;
  }
  if ((mFlags & View.DRAG_FLAG_GLOBAL) == 0) {
    final IBinder touchedBinder=touchedWin.mClient.asBinder();
    if (touchedBinder != mLocalWin) {
      touchedWin=null;
    }
  }
  try {
    if ((touchedWin != mTargetWindow) && (mTargetWindow != null)) {
      if (DEBUG_DRAG) {
        Slog.d(TAG_WM,"sending DRAG_EXITED to " + mTargetWindow);
      }
      DragEvent evt=obtainDragEvent(mTargetWindow,DragEvent.ACTION_DRAG_EXITED,x,y,null,null,null,null,false);
      mTargetWindow.mClient.dispatchDragEvent(evt);
      if (myPid != mTargetWindow.mSession.mPid) {
        evt.recycle();
      }
    }
    if (touchedWin != null) {
      if (false && DEBUG_DRAG) {
        Slog.d(TAG_WM,"sending DRAG_LOCATION to " + touchedWin);
      }
      DragEvent evt=obtainDragEvent(touchedWin,DragEvent.ACTION_DRAG_LOCATION,x,y,null,null,null,null,false);
      touchedWin.mClient.dispatchDragEvent(evt);
      if (myPid != touchedWin.mSession.mPid) {
        evt.recycle();
      }
    }
  }
 catch (  RemoteException e) {
    Slog.w(TAG_WM,"can't send drag notification to windows");
  }
  mTargetWindow=touchedWin;
}
