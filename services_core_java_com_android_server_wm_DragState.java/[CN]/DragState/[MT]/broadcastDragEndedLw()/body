{
  final int myPid=Process.myPid();
  if (DEBUG_DRAG) {
    Slog.d(TAG_WM,"broadcasting DRAG_ENDED");
  }
  for (  WindowState ws : mNotifiedWindows) {
    float x=0;
    float y=0;
    if (!mDragResult && (ws.mSession.mPid == mPid)) {
      x=mCurrentX;
      y=mCurrentY;
    }
    DragEvent evt=DragEvent.obtain(DragEvent.ACTION_DRAG_ENDED,x,y,null,null,null,null,mDragResult);
    try {
      ws.mClient.dispatchDragEvent(evt);
    }
 catch (    RemoteException e) {
      Slog.w(TAG_WM,"Unable to drag-end window " + ws);
    }
    if (myPid != ws.mSession.mPid) {
      evt.recycle();
    }
  }
  mNotifiedWindows.clear();
  mDragInProgress=false;
}
