{
synchronized (mLock) {
    if (mAvailability == STATE_INVALID) {
      return STATE_INVALID;
    }
  }
  ModuleProperties dspModuleProperties=null;
  try {
    dspModuleProperties=mModelManagementService.getDspModuleProperties(mVoiceInteractionService);
  }
 catch (  RemoteException e) {
    Slog.w(TAG,"RemoteException in getDspProperties!",e);
  }
  if (dspModuleProperties == null) {
    return STATE_HARDWARE_UNAVAILABLE;
  }
  if (mKeyphraseMetadata == null) {
    return STATE_KEYPHRASE_UNSUPPORTED;
  }
  return STATE_NOT_READY;
}
