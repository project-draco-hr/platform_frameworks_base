{
  int availability=internalGetInitialAvailability();
  KeyphraseSoundModel soundModel=null;
  if (availability == STATE_NOT_READY || availability == STATE_KEYPHRASE_UNENROLLED || availability == STATE_KEYPHRASE_ENROLLED) {
    soundModel=internalGetKeyphraseSoundModel(mKeyphraseMetadata.id);
    if (soundModel == null) {
      availability=STATE_KEYPHRASE_UNENROLLED;
    }
 else {
      availability=STATE_KEYPHRASE_ENROLLED;
    }
  }
synchronized (mLock) {
    if (DBG) {
      Slog.d(TAG,"Hotword availability changed from " + mAvailability + " -> "+ availability);
    }
    mAvailability=availability;
    mEnrolledSoundModel=soundModel;
    notifyStateChangedLocked();
  }
  return null;
}
