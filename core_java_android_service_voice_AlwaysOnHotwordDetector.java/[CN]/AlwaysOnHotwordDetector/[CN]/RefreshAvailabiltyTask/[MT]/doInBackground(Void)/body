{
  int availability=internalGetInitialAvailability();
  boolean enrolled=false;
  if (availability == STATE_NOT_READY || availability == STATE_KEYPHRASE_UNENROLLED || availability == STATE_KEYPHRASE_ENROLLED) {
    enrolled=internalGetIsEnrolled(mKeyphraseMetadata.id);
    if (!enrolled) {
      availability=STATE_KEYPHRASE_UNENROLLED;
    }
 else {
      availability=STATE_KEYPHRASE_ENROLLED;
    }
  }
synchronized (mLock) {
    if (DBG) {
      Slog.d(TAG,"Hotword availability changed from " + mAvailability + " -> "+ availability);
    }
    mIsEnrolledForDetection=enrolled;
    mAvailability=availability;
    notifyStateChangedLocked();
  }
  return null;
}
