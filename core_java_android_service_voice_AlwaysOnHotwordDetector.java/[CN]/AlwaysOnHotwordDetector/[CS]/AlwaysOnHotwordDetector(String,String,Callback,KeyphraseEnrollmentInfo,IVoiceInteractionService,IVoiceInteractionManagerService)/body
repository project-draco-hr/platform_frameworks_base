{
  mText=text;
  mLocale=locale;
  mKeyphraseEnrollmentInfo=keyphraseEnrollmentInfo;
  mKeyphraseMetadata=mKeyphraseEnrollmentInfo.getKeyphraseMetadata(text,locale);
  mExternalCallback=callback;
  mInternalCallback=new SoundTriggerListener(new MyHandler());
  mVoiceInteractionService=voiceInteractionService;
  mModelManagementService=modelManagementService;
  if (mKeyphraseMetadata != null) {
    mEnrolledSoundModel=internalGetKeyphraseSoundModel(mKeyphraseMetadata.id);
  }
 else {
    mEnrolledSoundModel=null;
  }
  int initialAvailability=internalGetAvailabilityLocked();
  mDisabled=(initialAvailability == KEYPHRASE_HARDWARE_UNAVAILABLE) || (initialAvailability == KEYPHRASE_UNSUPPORTED);
}
