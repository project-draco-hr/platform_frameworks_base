{
  mInvalidated=false;
  mText=text;
  mLocale=locale;
  mKeyphraseEnrollmentInfo=keyphraseEnrollmentInfo;
  mKeyphraseMetadata=mKeyphraseEnrollmentInfo.getKeyphraseMetadata(text,locale);
  mExternalCallback=callback;
  mInternalCallback=new SoundTriggerListener(new MyHandler());
  mVoiceInteractionService=voiceInteractionService;
  mModelManagementService=modelManagementService;
  if (mKeyphraseMetadata != null) {
    mEnrolledSoundModel=internalGetKeyphraseSoundModelLocked(mKeyphraseMetadata.id);
  }
  int initialAvailability=internalGetAvailabilityLocked();
  mDisabled=(initialAvailability == STATE_HARDWARE_UNAVAILABLE) || (initialAvailability == STATE_KEYPHRASE_UNSUPPORTED);
}
