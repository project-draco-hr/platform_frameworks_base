{
  if (mInvalidated) {
    return STATE_INVALID;
  }
  ModuleProperties dspModuleProperties=null;
  try {
    dspModuleProperties=mModelManagementService.getDspModuleProperties(mVoiceInteractionService);
  }
 catch (  RemoteException e) {
    Slog.w(TAG,"RemoteException in getDspProperties!");
  }
  if (dspModuleProperties == null) {
    return STATE_HARDWARE_UNAVAILABLE;
  }
  if (mKeyphraseMetadata == null) {
    return STATE_KEYPHRASE_UNSUPPORTED;
  }
  if (mEnrolledSoundModel == null) {
    return STATE_KEYPHRASE_UNENROLLED;
  }
  return STATE_KEYPHRASE_ENROLLED;
}
