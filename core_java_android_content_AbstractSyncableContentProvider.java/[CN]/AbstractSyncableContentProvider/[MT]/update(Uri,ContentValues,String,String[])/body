{
  mDb=mOpenHelper.getWritableDatabase();
  mDb.beginTransaction();
  try {
    if (isTemporary() && mSyncState.matches(url)) {
      int numRows=mSyncState.asContentProvider().update(url,values,selection,selectionArgs);
      mDb.setTransactionSuccessful();
      return numRows;
    }
    int result=updateInternal(url,values,selection,selectionArgs);
    mDb.setTransactionSuccessful();
    if (!isTemporary() && result > 0) {
      getContext().getContentResolver().notifyChange(url,null,changeRequiresLocalSync(url));
    }
    return result;
  }
  finally {
    mDb.endTransaction();
  }
}
