{
synchronized (sInstanceSync) {
    if (sInstance == null) {
      final int userId;
      if (Binder.getCallingUid() == Process.SYSTEM_UID || context.checkCallingOrSelfPermission(Manifest.permission.INTERACT_ACROSS_USERS) == PackageManager.PERMISSION_GRANTED || context.checkCallingOrSelfPermission(Manifest.permission.INTERACT_ACROSS_USERS_FULL) == PackageManager.PERMISSION_GRANTED) {
        userId=UserHandle.USER_CURRENT;
      }
 else {
        userId=UserHandle.myUserId();
      }
      IBinder iBinder=ServiceManager.getService(Context.ACCESSIBILITY_SERVICE);
      IAccessibilityManager service=IAccessibilityManager.Stub.asInterface(iBinder);
      sInstance=new AccessibilityManager(context,service,userId);
    }
  }
  return sInstance;
}
