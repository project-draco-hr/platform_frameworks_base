{
  int userId=getNextAvailableId();
  UserInfo userInfo=new UserInfo(userId,name,null,flags);
  File userPath=new File(mBaseUserPath,Integer.toString(userId));
  if (!createPackageFolders(userId,userPath)) {
    return null;
  }
synchronized (mUsers) {
    mUsers.put(userId,userInfo);
    writeUserListLocked();
    writeUserLocked(userInfo);
    updateUserIdsLocked();
  }
  return userInfo;
}
