{
  Set<PrintServiceInfo> tempPrintServices=new HashSet<PrintServiceInfo>();
  List<ResolveInfo> installedServices=mContext.getPackageManager().queryIntentServicesAsUser(new Intent(android.printservice.PrintService.SERVICE_INTERFACE),PackageManager.GET_SERVICES | PackageManager.GET_META_DATA,mCurrentUserId);
  final int installedCount=installedServices.size();
  for (int i=0, count=installedCount; i < count; i++) {
    ResolveInfo installedService=installedServices.get(i);
    if (!android.Manifest.permission.BIND_PRINT_SERVICE.equals(installedService.serviceInfo.permission)) {
      ComponentName serviceName=new ComponentName(installedService.serviceInfo.packageName,installedService.serviceInfo.name);
      Slog.w(LOG_TAG,"Skipping print service " + serviceName.flattenToShortString() + " since it does not require permission "+ android.Manifest.permission.BIND_PRINT_SERVICE);
      continue;
    }
    tempPrintServices.add(PrintServiceInfo.create(installedService,mContext));
  }
  if (!tempPrintServices.equals(mInstalledServices)) {
    mInstalledServices.clear();
    mInstalledServices.addAll(tempPrintServices);
    return true;
  }
  return false;
}
