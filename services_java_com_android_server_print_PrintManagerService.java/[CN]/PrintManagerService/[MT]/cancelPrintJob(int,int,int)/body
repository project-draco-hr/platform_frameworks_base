{
  final int resolvedAppId=resolveCallingAppEnforcingPermissionsLocked(appId);
  final int resolvedUserId=resolveCallingUserEnforcingPermissionsIdLocked(userId);
  final long identity=Binder.clearCallingIdentity();
  try {
    if (mSpooler.cancelPrintJob(printJobId,resolvedAppId,resolvedUserId)) {
      return;
    }
    PrintJobInfo printJob=getPrintJob(printJobId,resolvedAppId,resolvedUserId);
    if (printJob == null) {
      return;
    }
    ComponentName printServiceName=printJob.getPrinterId().getServiceComponentName();
    PrintServiceClient printService=null;
synchronized (mLock) {
      printService=mServices.get(printServiceName);
    }
    if (printService == null) {
      return;
    }
    printService.requestCancelPrintJob(printJob);
  }
  finally {
    Binder.restoreCallingIdentity(identity);
  }
}
