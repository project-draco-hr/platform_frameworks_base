{
  int scrollRange=0;
  View firstChild=getFirstChildNotGone();
  if (firstChild != null) {
    int contentHeight=getContentHeight();
    int firstChildMaxExpandHeight=getMaxExpandHeight(firstChild);
    int firstChildExpandPotential=firstChildMaxExpandHeight - firstChild.getHeight();
    contentHeight+=firstChildExpandPotential;
    scrollRange=Math.max(0,contentHeight - mMaxLayoutHeight + mBottomStackPeekSize);
    if (scrollRange > 0 && getChildCount() > 0) {
      scrollRange=Math.max(scrollRange,firstChildMaxExpandHeight - mCollapsedSize);
    }
  }
  return scrollRange;
}
