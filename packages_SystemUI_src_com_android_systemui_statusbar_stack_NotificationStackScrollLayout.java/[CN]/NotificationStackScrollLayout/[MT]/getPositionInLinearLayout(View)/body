{
  int position=0;
  boolean previousNeedsIncreasedPaddings=false;
  for (int i=0; i < getChildCount(); i++) {
    ExpandableView child=(ExpandableView)getChildAt(i);
    boolean notGone=child.getVisibility() != View.GONE;
    if (notGone) {
      boolean needsIncreasedPaddings=child.needsIncreasedPadding();
      if (position != 0) {
        int padding=needsIncreasedPaddings || previousNeedsIncreasedPaddings ? mIncreasedPaddingBetweenElements : mPaddingBetweenElements;
        position+=padding;
      }
      previousNeedsIncreasedPaddings=needsIncreasedPaddings;
    }
    if (child == requestedChild) {
      return position;
    }
    if (notGone) {
      position+=getIntrinsicHeight(child);
    }
  }
  return 0;
}
