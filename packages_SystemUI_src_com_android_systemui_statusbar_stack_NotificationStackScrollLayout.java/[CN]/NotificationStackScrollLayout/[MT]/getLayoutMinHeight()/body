{
  final ExpandableView firstChild=getFirstChildNotGone();
  int firstChildMinHeight=firstChild != null ? firstChild.getIntrinsicHeight() : mEmptyShadeView != null ? mEmptyShadeView.getMinHeight() : mCollapsedSize;
  if (mOwnScrollY > 0) {
    firstChildMinHeight=Math.max(firstChildMinHeight - mOwnScrollY,mCollapsedSize);
  }
  return Math.min(firstChildMinHeight + mBottomStackPeekSize + mBottomStackSlowDownHeight,mMaxLayoutHeight - mTopPadding);
}
