{
  int height=0;
  boolean previousNeedsIncreasedPaddings=false;
  for (int i=0; i < getChildCount(); i++) {
    ExpandableView expandableView=(ExpandableView)getChildAt(i);
    if (expandableView.getVisibility() != View.GONE) {
      boolean needsIncreasedPaddings=expandableView.needsIncreasedPadding();
      if (height != 0) {
        int padding=needsIncreasedPaddings || previousNeedsIncreasedPaddings ? mIncreasedPaddingBetweenElements : mPaddingBetweenElements;
        height+=padding;
      }
      previousNeedsIncreasedPaddings=needsIncreasedPaddings;
      height+=expandableView.getIntrinsicHeight();
    }
  }
  mContentHeight=height + mTopPadding;
}
