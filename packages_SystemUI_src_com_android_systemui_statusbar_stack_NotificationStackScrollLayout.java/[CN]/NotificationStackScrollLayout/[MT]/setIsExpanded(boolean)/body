{
  boolean changed=isExpanded != mIsExpanded;
  mIsExpanded=isExpanded;
  mStackScrollAlgorithm.setIsExpanded(isExpanded);
  if (changed) {
    if (!mIsExpanded) {
      mGroupManager.collapseAllGroups();
    }
 else {
      if (mPhoneStatusBar.getBarState() != StatusBarState.KEYGUARD) {
        if (DEBUG) {
          Log.v(TAG,"clearing notification effects from scroller");
        }
        mPhoneStatusBar.clearNotificationEffects();
      }
    }
    updateNotificationAnimationStates();
    updateChronometers();
  }
}
