{
  int oldVisibility=mDismissWillBeGone ? GONE : mDismissView.getVisibility();
  int newVisibility=visible ? VISIBLE : GONE;
  if (oldVisibility != newVisibility) {
    if (oldVisibility == GONE) {
      if (mDismissWillBeGone) {
        mDismissView.cancelAnimation();
      }
 else {
        mDismissView.setInvisible();
        mDismissView.setVisibility(newVisibility);
      }
      mDismissWillBeGone=false;
    }
 else {
      mDismissWillBeGone=true;
      mDismissView.performVisibilityAnimation(false,new Runnable(){
        @Override public void run(){
          mDismissView.setVisibility(GONE);
          mDismissWillBeGone=false;
        }
      }
);
    }
  }
}
