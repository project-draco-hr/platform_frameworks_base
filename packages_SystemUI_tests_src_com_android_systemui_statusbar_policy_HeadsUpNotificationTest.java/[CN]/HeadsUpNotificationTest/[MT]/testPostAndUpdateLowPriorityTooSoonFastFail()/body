{
  when(mClock.currentTimeMillis()).thenReturn(0L);
  NotificationData.Entry a=makeNotification("a");
  mHeadsUp.showNotification(a);
  reset(mMockStatusBar);
  when(mClock.currentTimeMillis()).thenReturn(TOO_SOON);
  NotificationData.Entry a_prime=makeNotification("a");
  mHeadsUp.updateNotification(a_prime,false);
  mHeadsUp.release();
  Mockito.verify(mMockStatusBar,never()).scheduleHeadsUpClose();
  ArgumentCaptor<Long> decayArg=ArgumentCaptor.forClass(Long.class);
  Mockito.verify(mMockStatusBar,times(1)).scheduleHeadsUpDecay(decayArg.capture());
  assertEquals(REMAINING_VISIBILITY,(long)decayArg.getValue());
}
