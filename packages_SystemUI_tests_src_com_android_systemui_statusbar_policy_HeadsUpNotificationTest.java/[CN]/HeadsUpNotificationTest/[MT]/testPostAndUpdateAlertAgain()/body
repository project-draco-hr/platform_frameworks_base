{
  when(mClock.currentTimeMillis()).thenReturn(0L);
  NotificationData.Entry a=makeNotification("a");
  mHeadsUp.showNotification(a);
  reset(mMockStatusBar);
  when(mClock.currentTimeMillis()).thenReturn(TOO_SOON);
  mHeadsUp.updateNotification(a,true);
  Mockito.verify(mMockStatusBar,never()).scheduleHeadsUpClose();
  ArgumentCaptor<Long> decayArg=ArgumentCaptor.forClass(Long.class);
  Mockito.verify(mMockStatusBar,times(1)).scheduleHeadsUpDecay(decayArg.capture());
  assertEquals(NOTIFICATION_DECAY,(long)decayArg.getValue());
}
