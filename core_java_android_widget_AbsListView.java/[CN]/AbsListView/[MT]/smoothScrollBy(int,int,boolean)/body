{
  if (mFlingRunnable == null) {
    mFlingRunnable=new FlingRunnable();
  }
  final int firstPos=mFirstPosition;
  final int childCount=getChildCount();
  final int lastPos=firstPos + childCount;
  final int topLimit=getPaddingTop();
  final int bottomLimit=getHeight() - getPaddingBottom();
  if (distance == 0 || mItemCount == 0 || childCount == 0 || (firstPos == 0 && getChildAt(0).getTop() == topLimit && distance < 0) || (lastPos == mItemCount && getChildAt(childCount - 1).getBottom() == bottomLimit && distance > 0)) {
    mFlingRunnable.endFling();
    if (mPositionScroller != null) {
      mPositionScroller.stop();
    }
  }
 else {
    reportScrollStateChange(OnScrollListener.SCROLL_STATE_FLING);
    mFlingRunnable.startScroll(distance,duration,linear);
  }
}
