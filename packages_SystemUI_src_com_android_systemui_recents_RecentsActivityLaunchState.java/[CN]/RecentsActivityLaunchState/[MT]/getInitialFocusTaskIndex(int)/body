{
  RecentsDebugFlags flags=Recents.getDebugFlags();
  if (launchedWithAltTab) {
    if (launchedFromAppWithThumbnail) {
      return numTasks - 2;
    }
 else {
      return numTasks - 1;
    }
  }
 else {
    if (launchedFromHome) {
      return numTasks - 1;
    }
 else {
      if (flags.isFastToggleRecentsEnabled() || !flags.isInitialStatePaging()) {
        return numTasks - 1;
      }
 else {
        return numTasks - 2;
      }
    }
  }
}
