{
  boolean includeSubdomains=parser.getAttributeBooleanValue(null,"includeSubdomains",false);
  if (parser.next() != XmlPullParser.TEXT) {
    throw new ParserException(parser,"Domain name missing");
  }
  String domain=parser.getText().trim().toLowerCase(Locale.US);
  if (parser.next() != XmlPullParser.END_TAG) {
    throw new ParserException(parser,"domain contains additional elements");
  }
  if (!seenDomains.add(domain)) {
    throw new ParserException(parser,domain + " has already been specified");
  }
  return new Domain(domain,includeSubdomains);
}
