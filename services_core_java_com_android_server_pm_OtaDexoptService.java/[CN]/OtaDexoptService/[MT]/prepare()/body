{
  if (mDexoptPackages != null) {
    throw new IllegalStateException("already called prepare()");
  }
synchronized (mPackageManagerService.mPackages) {
    mDexoptPackages=PackageManagerServiceUtils.getPackagesForDexopt(mPackageManagerService.mPackages.values(),mPackageManagerService);
  }
  completeSize=mDexoptPackages.size();
  mCommandsForCurrentPackage=null;
}
