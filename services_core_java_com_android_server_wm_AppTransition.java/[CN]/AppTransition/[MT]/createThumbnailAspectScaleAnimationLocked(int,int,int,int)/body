{
  Animation a;
  final int thumbWidthI=mNextAppTransitionThumbnail.getWidth();
  final float thumbWidth=thumbWidthI > 0 ? thumbWidthI : 1;
  final int thumbHeightI=mNextAppTransitionThumbnail.getHeight();
  final float thumbHeight=thumbHeightI > 0 ? thumbHeightI : 1;
  float scaleW=deviceWidth / thumbWidth;
  float unscaledWidth=deviceWidth;
  float unscaledHeight=thumbHeight * scaleW;
  float unscaledStartY=mNextAppTransitionStartY - (unscaledHeight - thumbHeight) / 2f;
  if (mNextAppTransitionScaleUp) {
    Animation scale=new ScaleAnimation(1f,scaleW,1f,scaleW,mNextAppTransitionStartX + (thumbWidth / 2f),mNextAppTransitionStartY + (thumbHeight / 2f));
    scale.setInterpolator(mThumbnailFastOutSlowInInterpolator);
    scale.setDuration(THUMBNAIL_APP_TRANSITION_DURATION);
    Animation alpha=new AlphaAnimation(1,0);
    alpha.setInterpolator(mThumbnailFadeOutInterpolator);
    alpha.setDuration(THUMBNAIL_APP_TRANSITION_ALPHA_DURATION);
    Animation translate=new TranslateAnimation(0,0,0,-unscaledStartY + mNextAppTransitionInsets.top);
    translate.setInterpolator(mThumbnailFastOutSlowInInterpolator);
    translate.setDuration(THUMBNAIL_APP_TRANSITION_DURATION);
    AnimationSet set=new AnimationSet(false);
    set.addAnimation(scale);
    set.addAnimation(alpha);
    set.addAnimation(translate);
    a=set;
  }
 else {
    Animation scale=new ScaleAnimation(scaleW,1f,scaleW,1f,mNextAppTransitionStartX + (thumbWidth / 2f),mNextAppTransitionStartY + (thumbHeight / 2f));
    scale.setInterpolator(mThumbnailFastOutSlowInInterpolator);
    scale.setDuration(THUMBNAIL_APP_TRANSITION_DURATION);
    Animation alpha=new AlphaAnimation(0f,1f);
    alpha.setInterpolator(mThumbnailFadeInInterpolator);
    alpha.setDuration(THUMBNAIL_APP_TRANSITION_ALPHA_DURATION);
    Animation translate=new TranslateAnimation(0,0,-unscaledStartY + mNextAppTransitionInsets.top,0);
    translate.setInterpolator(mThumbnailFastOutSlowInInterpolator);
    translate.setDuration(THUMBNAIL_APP_TRANSITION_DURATION);
    AnimationSet set=new AnimationSet(false);
    set.addAnimation(scale);
    set.addAnimation(alpha);
    set.addAnimation(translate);
    a=set;
  }
  return prepareThumbnailAnimationWithDuration(a,appWidth,appHeight,0,mThumbnailFastOutSlowInInterpolator);
}
