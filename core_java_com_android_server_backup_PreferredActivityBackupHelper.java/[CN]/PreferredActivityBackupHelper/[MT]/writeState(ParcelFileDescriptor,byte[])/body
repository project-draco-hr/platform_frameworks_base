{
  try {
    FileOutputStream fos=new FileOutputStream(stateFile.getFileDescriptor());
    @SuppressWarnings("resource") DataOutputStream out=new DataOutputStream(fos);
    out.writeInt(STATE_VERSION);
    if (payload == null) {
      out.writeInt(0);
    }
 else {
      out.writeInt(payload.length);
      out.write(payload);
    }
  }
 catch (  IOException e) {
    Slog.e(TAG,"Unable to write updated state",e);
  }
}
