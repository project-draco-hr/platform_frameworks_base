{
  int iterations=BluetoothTestRunner.sConnectA2dpIterations;
  if (iterations == 0) {
    return;
  }
  BluetoothAdapter adapter=BluetoothAdapter.getDefaultAdapter();
  BluetoothDevice device=adapter.getRemoteDevice(BluetoothTestRunner.sDeviceAddress);
  mTestUtils.disable(adapter);
  mTestUtils.enable(adapter);
  mTestUtils.unpair(adapter,device);
  mTestUtils.pair(adapter,device,BluetoothTestRunner.sDevicePairPasskey,BluetoothTestRunner.sDevicePairPin);
  mTestUtils.disconnectProfile(adapter,device,BluetoothProfile.A2DP,null);
  for (int i=0; i < iterations; i++) {
    mTestUtils.writeOutput("connectA2dp iteration " + (i + 1) + " of "+ iterations);
    mTestUtils.connectProfile(adapter,device,BluetoothProfile.A2DP,String.format("connectA2dp(device=%s)",device));
    mTestUtils.disconnectProfile(adapter,device,BluetoothProfile.A2DP,String.format("disconnectA2dp(device=%s)",device));
  }
  mTestUtils.unpair(adapter,device);
  mTestUtils.disable(adapter);
}
