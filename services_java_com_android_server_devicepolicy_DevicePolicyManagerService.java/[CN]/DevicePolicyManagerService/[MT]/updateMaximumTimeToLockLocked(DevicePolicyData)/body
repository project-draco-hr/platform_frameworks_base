{
  long timeMs=getMaximumTimeToLock(null,policy.mUserHandle);
  if (policy.mLastMaximumTimeToLock == timeMs) {
    return;
  }
  long ident=Binder.clearCallingIdentity();
  try {
    if (timeMs <= 0) {
      timeMs=Integer.MAX_VALUE;
    }
 else {
      Settings.Global.putInt(mContext.getContentResolver(),Settings.Global.STAY_ON_WHILE_PLUGGED_IN,0);
    }
    policy.mLastMaximumTimeToLock=timeMs;
    try {
      getIPowerManager().setMaximumScreenOffTimeoutFromDeviceAdmin((int)timeMs);
    }
 catch (    RemoteException e) {
      Slog.w(TAG,"Failure talking with power manager",e);
    }
  }
  finally {
    Binder.restoreCallingIdentity(ident);
  }
}
