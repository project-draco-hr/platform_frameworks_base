{
  boolean removed=false;
  if (DBG)   Slog.d(TAG,"Handling package changes for user " + userHandle);
  DevicePolicyData policy=getUserData(userHandle);
  IPackageManager pm=AppGlobals.getPackageManager();
  for (int i=policy.mAdminList.size() - 1; i >= 0; i--) {
    ActiveAdmin aa=policy.mAdminList.get(i);
    try {
      if (pm.getPackageInfo(aa.info.getPackageName(),0,userHandle) == null || pm.getReceiverInfo(aa.info.getComponent(),0,userHandle) == null) {
        removed=true;
        policy.mAdminList.remove(i);
      }
    }
 catch (    RemoteException re) {
    }
  }
  if (removed) {
    validatePasswordOwnerLocked(policy);
    syncDeviceCapabilitiesLocked(policy);
    saveSettingsLocked(policy.mUserHandle);
  }
}
