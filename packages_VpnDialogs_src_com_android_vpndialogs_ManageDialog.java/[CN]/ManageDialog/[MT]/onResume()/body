{
  super.onResume();
  if (getCallingPackage() != null) {
    Log.e(TAG,getCallingPackage() + " cannot start this activity");
    finish();
    return;
  }
  try {
    mConfig=getIntent().getParcelableExtra("config");
    mService=IConnectivityManager.Stub.asInterface(ServiceManager.getService(Context.CONNECTIVITY_SERVICE));
    View view=View.inflate(this,R.layout.manage,null);
    if (mConfig.session != null) {
      ((TextView)view.findViewById(R.id.session)).setText(mConfig.session);
    }
    mDuration=(TextView)view.findViewById(R.id.duration);
    mDataTransmitted=(TextView)view.findViewById(R.id.data_transmitted);
    mDataReceived=(TextView)view.findViewById(R.id.data_received);
    if (mConfig.user.equals(VpnConfig.LEGACY_VPN)) {
      mAlertParams.mIconId=android.R.drawable.ic_dialog_info;
      mAlertParams.mTitle=getText(R.string.legacy_title);
    }
 else {
      PackageManager pm=getPackageManager();
      ApplicationInfo app=pm.getApplicationInfo(mConfig.user,0);
      mAlertParams.mIcon=app.loadIcon(pm);
      mAlertParams.mTitle=app.loadLabel(pm);
    }
    if (mConfig.configureIntent != null) {
      mAlertParams.mPositiveButtonText=getText(R.string.configure);
      mAlertParams.mPositiveButtonListener=this;
    }
    mAlertParams.mNeutralButtonText=getText(R.string.disconnect);
    mAlertParams.mNeutralButtonListener=this;
    mAlertParams.mNegativeButtonText=getText(android.R.string.cancel);
    mAlertParams.mNegativeButtonListener=this;
    mAlertParams.mView=view;
    setupAlert();
    if (mHandler == null) {
      mHandler=new Handler(this);
    }
    mHandler.sendEmptyMessage(0);
  }
 catch (  Exception e) {
    Log.e(TAG,"onResume",e);
    finish();
  }
}
