{
  if (Log.isLoggable(TAG,Log.VERBOSE)) {
    Slog.v(TAG,"USB UEVENT: " + event.toString());
  }
synchronized (this) {
    String switchState=event.get("SWITCH_STATE");
    if (switchState != null) {
      try {
        int newConfig=Integer.parseInt(switchState);
        if (newConfig != mUsbConfig) {
          mPreviousUsbConfig=mUsbConfig;
          mUsbConfig=newConfig;
          if (mSystemReady) {
            update();
          }
        }
      }
 catch (      NumberFormatException e) {
        Slog.e(TAG,"Could not parse switch state from event " + event);
      }
    }
 else {
      String function=event.get("FUNCTION");
      String enabledStr=event.get("ENABLED");
      if (function != null && enabledStr != null) {
        boolean enabled="1".equals(enabledStr);
        if (enabled) {
          if (!mEnabledFunctions.contains(function)) {
            mEnabledFunctions.add(function);
          }
          mDisabledFunctions.remove(function);
        }
 else {
          if (!mDisabledFunctions.contains(function)) {
            mDisabledFunctions.add(function);
          }
          mEnabledFunctions.remove(function);
        }
      }
    }
  }
}
