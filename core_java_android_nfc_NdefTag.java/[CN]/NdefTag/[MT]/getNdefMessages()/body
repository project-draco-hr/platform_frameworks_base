{
  if (mMessages.length == 1) {
    return mMessages[0];
  }
synchronized (this) {
    if (mFlatMessages != null) {
      return mFlatMessages;
    }
    int sz=0;
    for (    NdefMessage[] ms : mMessages) {
      sz+=ms.length;
    }
    mFlatMessages=new NdefMessage[sz];
    int i=0;
    for (    NdefMessage[] ms : mMessages) {
      System.arraycopy(ms,0,mFlatMessages,i,ms.length);
      i+=ms.length;
    }
    return mFlatMessages;
  }
}
