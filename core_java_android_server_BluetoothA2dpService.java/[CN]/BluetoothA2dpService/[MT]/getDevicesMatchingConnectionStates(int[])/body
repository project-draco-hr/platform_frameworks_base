{
  mContext.enforceCallingOrSelfPermission(BLUETOOTH_PERM,"Need BLUETOOTH permission");
  ArrayList<BluetoothDevice> sinks=new ArrayList();
  if (mAudioDevices.isEmpty()) {
    return sinks.toArray(new BluetoothDevice[sinks.size()]);
  }
  for (  BluetoothDevice device : mAudioDevices.keySet()) {
    int sinkState=getConnectionState(device);
    for (    int state : states) {
      if (state == sinkState) {
        sinks.add(device);
        break;
      }
    }
  }
  return sinks.toArray(new BluetoothDevice[sinks.size()]);
}
