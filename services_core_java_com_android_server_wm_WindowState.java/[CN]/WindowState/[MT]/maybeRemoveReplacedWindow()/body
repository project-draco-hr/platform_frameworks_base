{
  AppWindowToken token=mAppToken;
  if (token != null && token.mWillReplaceWindow && token.mReplacingWindow == this && token.mHasReplacedWindow) {
    if (DEBUG_ADD_REMOVE)     Slog.d(TAG,"Removing replacing window: " + this);
    token.mWillReplaceWindow=false;
    token.mAnimateReplacingWindow=false;
    token.mReplacingRemoveRequested=false;
    token.mReplacingWindow=null;
    token.mHasReplacedWindow=false;
    for (int i=token.allAppWindows.size() - 1; i >= 0; i--) {
      final WindowState win=token.allAppWindows.get(i);
      if (win.mExiting) {
        mService.removeWindowInnerLocked(win);
      }
    }
  }
}
