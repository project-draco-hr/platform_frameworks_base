{
  WindowState win=this;
  while (win.mAttachedWindow != null) {
    win=win.mAttachedWindow;
  }
  if (win.mAttrs.type < WindowManager.LayoutParams.FIRST_SYSTEM_WINDOW && win.mAppToken != null && win.mAppToken.showWhenLocked) {
    final DisplayContent displayContent=win.getDisplayContent();
    if (displayContent == null) {
      return true;
    }
    final DisplayInfo displayInfo=displayContent.getDisplayInfo();
    if (win.mFrame.left <= 0 && win.mFrame.top <= 0 && win.mFrame.right >= displayInfo.appWidth && win.mFrame.bottom >= displayInfo.appHeight) {
      return false;
    }
  }
  return win.mShowToOwnerOnly && !mService.isCurrentProfileLocked(UserHandle.getUserId(win.mOwnerUid));
}
