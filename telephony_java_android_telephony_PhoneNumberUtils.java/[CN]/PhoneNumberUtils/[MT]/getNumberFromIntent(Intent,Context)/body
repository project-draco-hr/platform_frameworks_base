{
  String number=null;
  Uri uri=intent.getData();
  String scheme=uri.getScheme();
  if (scheme.equals("tel")) {
    return uri.getSchemeSpecificPart();
  }
  if (scheme.equals("voicemail")) {
    return TelephonyManager.getDefault().getVoiceMailNumber();
  }
  if (context == null) {
    return null;
  }
  String type=intent.resolveType(context);
  Cursor c=context.getContentResolver().query(uri,new String[]{Contacts.People.Phones.NUMBER},null,null,null);
  if (c != null) {
    try {
      if (c.moveToFirst()) {
        number=c.getString(c.getColumnIndex(Contacts.People.Phones.NUMBER));
      }
    }
  finally {
      c.close();
    }
  }
  return number;
}
