{
  if ((c == null) || (c.getCount() == 0)) {
    changeCursorAndColumns(null,null,null);
    if (c != null) {
      c.close();
    }
    return;
  }
  int colId=c.getColumnIndex("_id");
  int col1=c.getColumnIndex(SearchManager.SUGGEST_COLUMN_TEXT_1);
  int col2=c.getColumnIndex(SearchManager.SUGGEST_COLUMN_TEXT_2);
  int colIc1=c.getColumnIndex(SearchManager.SUGGEST_COLUMN_ICON_1);
  int colIc2=c.getColumnIndex(SearchManager.SUGGEST_COLUMN_ICON_2);
  boolean minimal=(colId >= 0) && (col1 >= 0);
  boolean hasIcons=(colIc1 >= 0) && (colIc2 >= 0);
  boolean has2Lines=col2 >= 0;
  if (minimal) {
    int layout;
    String[] from;
    int[] to;
    if (hasIcons) {
      if (has2Lines) {
        layout=com.android.internal.R.layout.search_dropdown_item_icons_2line;
        from=TWO_LINE_ICONS_FROM;
        to=TWO_LINE_ICONS_TO;
      }
 else {
        layout=com.android.internal.R.layout.search_dropdown_item_icons_1line;
        from=ONE_LINE_ICONS_FROM;
        to=ONE_LINE_ICONS_TO;
      }
    }
 else {
      if (has2Lines) {
        layout=com.android.internal.R.layout.search_dropdown_item_2line;
        from=TWO_LINE_FROM;
        to=TWO_LINE_TO;
      }
 else {
        layout=com.android.internal.R.layout.search_dropdown_item_1line;
        from=ONE_LINE_FROM;
        to=ONE_LINE_TO;
      }
    }
    mParentView.resetListAndClearViews();
    changeCursorAndColumns(c,from,to);
    setViewResource(layout);
  }
 else {
    Log.w(LOG_TAG,"Suggestions cursor discarded due to missing required columns.");
    changeCursorAndColumns(null,null,null);
    c.close();
  }
  if ((colIc1 >= 0) != (colIc2 >= 0)) {
    Log.w(LOG_TAG,"Suggestion icon column(s) discarded, must be 0 or 2 columns.");
  }
}
