{
  super.onCreate(savedInstanceState);
  Window theWindow=getWindow();
  theWindow.setGravity(Gravity.TOP | Gravity.FILL_HORIZONTAL);
  setContentView(com.android.internal.R.layout.search_bar);
  theWindow.setLayout(ViewGroup.LayoutParams.FILL_PARENT,ViewGroup.LayoutParams.FILL_PARENT);
  WindowManager.LayoutParams lp=theWindow.getAttributes();
  lp.softInputMode=WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE;
  theWindow.setAttributes(lp);
  mBadgeLabel=(TextView)findViewById(com.android.internal.R.id.search_badge);
  mSearchAutoComplete=(SearchAutoComplete)findViewById(com.android.internal.R.id.search_src_text);
  mAppIcon=(ImageView)findViewById(com.android.internal.R.id.search_app_icon);
  mGoButton=(Button)findViewById(com.android.internal.R.id.search_go_btn);
  mVoiceButton=(ImageButton)findViewById(com.android.internal.R.id.search_voice_btn);
  mSearchPlate=findViewById(com.android.internal.R.id.search_plate);
  mWorkingSpinner=(AnimationDrawable)getContext().getResources().getDrawable(com.android.internal.R.drawable.search_spinner);
  mSearchAutoComplete.addTextChangedListener(mTextWatcher);
  mSearchAutoComplete.setOnKeyListener(mTextKeyListener);
  mSearchAutoComplete.setOnItemClickListener(this);
  mSearchAutoComplete.setOnItemSelectedListener(this);
  mGoButton.setOnClickListener(mGoButtonClickListener);
  mGoButton.setOnKeyListener(mButtonsKeyListener);
  mVoiceButton.setOnClickListener(mVoiceButtonClickListener);
  mVoiceButton.setOnKeyListener(mButtonsKeyListener);
  mSearchAutoComplete.setSearchDialog(this);
  mBadgeLabel.setVisibility(View.GONE);
  setCanceledOnTouchOutside(true);
  mCloseDialogsFilter=new IntentFilter(Intent.ACTION_CLOSE_SYSTEM_DIALOGS);
  mPackageFilter=new IntentFilter();
  mPackageFilter.addAction(Intent.ACTION_PACKAGE_ADDED);
  mPackageFilter.addAction(Intent.ACTION_PACKAGE_REMOVED);
  mPackageFilter.addAction(Intent.ACTION_PACKAGE_CHANGED);
  mPackageFilter.addDataScheme("package");
  mVoiceWebSearchIntent=new Intent(RecognizerIntent.ACTION_WEB_SEARCH);
  mVoiceWebSearchIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,RecognizerIntent.LANGUAGE_MODEL_WEB_SEARCH);
  mVoiceAppSearchIntent=new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
  mLocationManager=(LocationManager)getContext().getSystemService(Context.LOCATION_SERVICE);
  if (mLocationManager != null) {
    Criteria criteria=new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_COARSE);
    String providerName=mLocationManager.getBestProvider(criteria,true);
    if (providerName != null) {
      mLocationProvider=mLocationManager.getProvider(providerName);
    }
    mDummyLocationListener=new LocationListener(){
      public void onLocationChanged(      Location location){
      }
      public void onProviderDisabled(      String provider){
      }
      public void onProviderEnabled(      String provider){
      }
      public void onStatusChanged(      String provider,      int status,      Bundle extras){
      }
    }
;
  }
}
