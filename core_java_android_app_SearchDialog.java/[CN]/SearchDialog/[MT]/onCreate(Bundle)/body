{
  super.onCreate(savedInstanceState);
  Window theWindow=getWindow();
  theWindow.requestFeature(Window.FEATURE_NO_TITLE);
  theWindow.setFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND,WindowManager.LayoutParams.FLAG_DIM_BEHIND);
  theWindow.setGravity(Gravity.TOP | Gravity.FILL_HORIZONTAL);
  setContentView(com.android.internal.R.layout.search_bar);
  theWindow.setBackgroundDrawableResource(android.R.color.transparent);
  theWindow.setLayout(ViewGroup.LayoutParams.FILL_PARENT,ViewGroup.LayoutParams.WRAP_CONTENT);
  WindowManager.LayoutParams lp=theWindow.getAttributes();
  lp.dimAmount=0.5f;
  lp.setTitle("Search Dialog");
  theWindow.setAttributes(lp);
  mSearchBarLayout=findViewById(com.android.internal.R.id.search_bar);
  mBadgeLabel=(TextView)findViewById(com.android.internal.R.id.search_badge);
  mSearchEditLayout=(LinearLayout)findViewById(com.android.internal.R.id.search_edit_frame);
  mSearchTextField=(EditText)findViewById(com.android.internal.R.id.search_src_text);
  mGoButton=(Button)findViewById(com.android.internal.R.id.search_go_btn);
  mSuggestionsList=(ListView)findViewById(com.android.internal.R.id.search_suggest_list);
  mSearchTextField.addTextChangedListener(mTextWatcher);
  mSearchTextField.setOnKeyListener(mTextKeyListener);
  mGoButton.setOnClickListener(mGoButtonClickListener);
  mGoButton.setOnKeyListener(mGoButtonKeyListener);
  mSuggestionsList.setOnItemClickListener(mSuggestionsListItemClickListener);
  mSuggestionsList.setOnKeyListener(mSuggestionsKeyListener);
  mSuggestionsList.setOnFocusChangeListener(mSuggestFocusListener);
  mSuggestionsList.setOnItemSelectedListener(mSuggestSelectedListener);
  mBadgeLabel.setVisibility(View.GONE);
  mSuggestionsList.setVisibility(View.GONE);
  setCanceledOnTouchOutside(true);
  mSuggestionsEntry=AnimationUtils.loadAnimation(getContext(),com.android.internal.R.anim.grow_fade_in);
  mSuggestionsExit=AnimationUtils.loadAnimation(getContext(),com.android.internal.R.anim.fade_out);
  mCloseDialogsFilter=new IntentFilter(Intent.ACTION_CLOSE_SYSTEM_DIALOGS);
  mPackageFilter=new IntentFilter();
  mPackageFilter.addAction(Intent.ACTION_PACKAGE_ADDED);
  mPackageFilter.addAction(Intent.ACTION_PACKAGE_REMOVED);
  mPackageFilter.addAction(Intent.ACTION_PACKAGE_CHANGED);
  mPackageFilter.addDataScheme("package");
}
