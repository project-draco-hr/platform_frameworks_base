{
  if (ci == null || sr == null || context == null || fh == null || sc == null) {
    throw new NullPointerException("Service: Input parameters must not be null");
  }
  mCmdIf=ci;
  mContext=context;
  mRilMessagesQ=new LinkedBlockingQueue<RilMessage>();
  mMsgDecoder=RilMessageDecoder.getInstance(mRilMessagesQ,this,fh);
  mCmdIf.setOnStkSessionEnd(this,MSG_ID_SESSION_END,null);
  mCmdIf.setOnStkProactiveCmd(this,MSG_ID_PROACTIVE_COMMAND,null);
  mCmdIf.setOnStkEvent(this,MSG_ID_EVENT_NOTIFY,null);
  mCmdIf.setOnStkCallSetUp(this,MSG_ID_CALL_SETUP,null);
  mSimRecords=sr;
  mSimRecords.registerForRecordsLoaded(this,MSG_ID_SIM_LOADED,null);
  mMsgDecoder.obtainMessage(RilMessageDecoder.START).sendToTarget();
}
