{
  if (ci == null || sr == null || context == null || fh == null || sc == null) {
    throw new NullPointerException("Service: Input parameters must not be null");
  }
  mCmdIf=ci;
  mContext=context;
  mCmdIf.setOnStkSessionEnd(this,EVENT_SESSION_END,null);
  mCmdIf.setOnStkProactiveCmd(this,EVENT_PROACTIVE_COMMAND,null);
  mCmdIf.setOnStkEvent(this,EVENT_EVENT_NOTIFY,null);
  mCmdIf.setOnStkCallSetUp(this,EVENT_CALL_SETUP,null);
  mSimRecords=sr;
  mSimCard=sc;
  mNm=(NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
  mIconLoader=IconLoader.getInstance(this,fh);
  StkAppStateReceiver receiver=new StkAppStateReceiver();
  IntentFilter filter=new IntentFilter();
  filter.addAction(StkAppInstaller.STK_APP_INSTALL_ACTION);
  filter.addAction(StkAppInstaller.STK_APP_UNINSTALL_ACTION);
  mContext.registerReceiver(receiver,filter);
  mSimRecords.registerForRecordsLoaded(this,EVENT_SIM_LOADED,null);
  mSimCard.registerForAbsent(this,EVENT_SIM_ABSENT,null);
}
