{
  AsyncResult ar;
switch (msg.what) {
case EVENT_SESSION_END:
    ar=(AsyncResult)msg.obj;
  handleSessionEnd(ar.result);
break;
case EVENT_PROACTIVE_COMMAND:
ar=(AsyncResult)msg.obj;
handleProactiveCommand((String)ar.result);
break;
case EVENT_EVENT_NOTIFY:
ar=(AsyncResult)msg.obj;
handleEventNotify((String)ar.result);
break;
case EVENT_CALL_SETUP:
mState=State.CALL_SETUP;
break;
case EVENT_SIM_LOADED:
case EVENT_SIM_ABSENT:
if (!isStkSupported()) {
setAppState(false);
}
break;
case EVENT_LOAD_ICON_DONE:
handleProactiveCommandIcons(msg.obj);
break;
default :
throw new AssertionError("Unrecognized STK command: " + msg.what);
}
}
