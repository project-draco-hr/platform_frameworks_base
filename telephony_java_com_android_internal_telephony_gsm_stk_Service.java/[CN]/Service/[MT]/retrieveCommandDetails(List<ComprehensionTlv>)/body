{
  ComprehensionTlv ctlv=searchForTag(ComprehensionTlvTag.COMMAND_DETAILS,ctlvs);
  if (ctlv != null) {
    CtlvCommandDetails cmdDet=new CtlvCommandDetails();
    byte[] rawValue=ctlv.getRawValue();
    int valueIndex=ctlv.getValueIndex();
    try {
      cmdDet.compRequired=ctlv.isComprehensionRequired();
      cmdDet.commandNumber=rawValue[valueIndex] & 0xff;
      cmdDet.typeOfCommand=rawValue[valueIndex + 1] & 0xff;
      cmdDet.commandQualifier=rawValue[valueIndex + 2] & 0xff;
      return cmdDet;
    }
 catch (    IndexOutOfBoundsException e) {
      throw new ResultException(ResultCode.CMD_DATA_NOT_UNDERSTOOD);
    }
  }
 else {
    throw new ResultException(ResultCode.REQUIRED_VALUES_MISSING);
  }
}
