{
  if (Config.LOGD) {
    Log.d(TAG,"processPlayTone begins");
  }
  Tone tone=null;
  String text=null;
  List<TextAttribute> textAttrs=null;
  Duration duration=null;
  ComprehensionTlv ctlv=searchForTag(ComprehensionTlvTag.TONE,ctlvs);
  if (ctlv != null) {
    if (ctlv.getLength() > 0) {
      try {
        byte[] rawValue=ctlv.getRawValue();
        int valueIndex=ctlv.getValueIndex();
        int toneVal=rawValue[valueIndex];
        tone=Tone.fromInt(toneVal);
      }
 catch (      IndexOutOfBoundsException e) {
        throw new ResultException(ResultCode.CMD_DATA_NOT_UNDERSTOOD);
      }
    }
  }
  ctlv=searchForTag(ComprehensionTlvTag.ALPHA_ID,ctlvs);
  if (ctlv != null) {
    text=retrieveAlphaId(ctlv);
  }
  ctlv=searchForTag(ComprehensionTlvTag.TEXT_ATTRIBUTE,ctlvs);
  if (ctlv != null) {
    textAttrs=retrieveTextAttribute(ctlv);
  }
  ctlv=searchForTag(ComprehensionTlvTag.DURATION,ctlvs);
  if (ctlv != null) {
    duration=retrieveDuration(ctlv);
  }
synchronized (mCmdListenerLock) {
    if (mCmdListener != null) {
      mState=State.PLAY_TONE;
      mCmdParams=new CommandParams(cmdDet);
      mCmdListener.onPlayTone(tone,text,textAttrs,duration);
      return true;
    }
 else {
      throw new ResultException(ResultCode.TERMINAL_CRNTLY_UNABLE_TO_PROCESS,0);
    }
  }
}
