{
  if (!isCollectionEnabled()) {
    return;
  }
  if (currentScanResults == null || currentScanResults.size() == 0) {
    return;
  }
  long now=SystemClock.elapsedRealtime();
  if ((mLastWifiScanElapsedTime != 0) && ((now - mLastWifiScanElapsedTime) <= MIN_TIME_BETWEEN_WIFI_REPORTS)) {
    return;
  }
  if (mWifiCurrentScanResults == null) {
    mWifiCurrentScanResults=new ArrayList<ScanResult>();
  }
 else {
    mWifiCurrentScanResults.clear();
  }
  mWifiCurrentScanResults.addAll(currentScanResults);
  boolean wifiHasChanged=false;
  if (mWifiLastScanResults == null) {
    wifiHasChanged=true;
  }
 else {
    HashSet<String> previous=new HashSet<String>();
    HashSet<String> current=new HashSet<String>();
    for (    ScanResult s : mWifiLastScanResults) {
      previous.add(s.BSSID);
    }
    for (    ScanResult s : mWifiCurrentScanResults) {
      current.add(s.BSSID);
    }
    current.removeAll(previous);
    if (current.size() > Math.min(MIN_CHANGED_WIFI_POINTS,((mWifiCurrentScanResults.size() + 1) / 2))) {
      wifiHasChanged=true;
    }
  }
  if (!wifiHasChanged) {
    log("updateWifiScanResults(): Wifi results haven't changed much");
    return;
  }
  if (mWifiLastScanResults == null) {
    mWifiLastScanResults=new ArrayList<ScanResult>();
  }
 else {
    mWifiLastScanResults.clear();
  }
  mWifiLastScanResults.addAll(mWifiCurrentScanResults);
  mLastWifiScanElapsedTime=now;
  mLastWifiScanRealTime=System.currentTimeMillis();
  log("updateWifiScanResults(): Updated " + mWifiLastScanResults.size() + " APs");
  addToQueue(GDebugProfile.TRIGGER_WIFI_CHANGE);
}
