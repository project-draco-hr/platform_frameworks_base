{
  String language=SystemProperties.get("persist.sys.language");
  String country=SystemProperties.get("persist.sys.country");
  Log.d(LOG_TAG,"setLocaleFromMcc");
  if ((language == null || language.length() == 0) && (country == null || country.length() == 0)) {
    try {
      language=MccTable.defaultLanguageForMcc(mcc);
      country=MccTable.countryCodeForMcc(mcc).toUpperCase();
      String[] locales=phone.getContext().getAssets().getLocales();
      final int N=locales.length;
      String bestMatch=null;
      for (int i=0; i < N; i++) {
        Log.d(LOG_TAG," trying " + locales[i]);
        if (locales[i] != null && locales[i].length() >= 2 && locales[i].substring(0,2).equals(language)) {
          if (locales[i].length() >= 5 && locales[i].substring(3,5).equals(country)) {
            bestMatch=locales[i];
            break;
          }
 else           if (bestMatch == null) {
            bestMatch=locales[i];
          }
        }
      }
      Log.d(LOG_TAG," got bestmatch = " + bestMatch);
      if (bestMatch != null) {
        IActivityManager am=ActivityManagerNative.getDefault();
        Configuration config=am.getConfiguration();
        if (bestMatch.length() >= 5) {
          config.locale=new Locale(bestMatch.substring(0,2),bestMatch.substring(3,5));
        }
 else {
          config.locale=new Locale(bestMatch.substring(0,2));
        }
        config.userSetLocale=true;
        am.updateConfiguration(config);
      }
    }
 catch (    Exception e) {
    }
  }
}
