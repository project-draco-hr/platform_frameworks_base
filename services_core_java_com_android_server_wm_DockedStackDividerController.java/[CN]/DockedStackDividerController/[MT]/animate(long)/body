{
  if (!mAnimating) {
    return false;
  }
  if (!mAnimationStarted) {
    mAnimationStarted=true;
    mAnimationStartTime=now;
    final long transitionDuration=isAnimationMaximizing() ? mService.mAppTransition.getLastClipRevealTransitionDuration() : DEFAULT_APP_TRANSITION_DURATION;
    mAnimationDuration=(long)(transitionDuration * mService.getTransitionAnimationScaleLocked());
    notifyDockedStackMinimizedChanged(mMinimizedDock,mAnimationDuration);
  }
  float t=Math.min(1f,(float)(now - mAnimationStartTime) / mAnimationDuration);
  t=(isAnimationMaximizing() ? TOUCH_RESPONSE_INTERPOLATOR : mMinimizedDockInterpolator).getInterpolation(t);
  final TaskStack stack=mDisplayContent.getDockedStackVisibleForUserLocked();
  if (stack != null) {
    final float amount=t * mAnimationTarget + (1 - t) * mAnimationStart;
    if (stack.setAdjustedForMinimizedDock(amount)) {
      mService.mWindowPlacerLocked.performSurfacePlacement();
    }
  }
  if (t >= 1.0f) {
    mAnimating=false;
    return false;
  }
 else {
    return true;
  }
}
