{
  SurfaceControl.openTransaction();
  final TaskStack stack=mDisplayContent.mService.mStackIdToStack.get(targetStackId);
  final TaskStack dockedStack=mDisplayContent.getDockedStackLocked();
  boolean visibleAndValid=visible && stack != null && dockedStack != null;
  if (visibleAndValid) {
    stack.getDimBounds(mTmpRect);
    if (mTmpRect.height() > 0 && mTmpRect.width() > 0) {
      mDimLayer.setBounds(mTmpRect);
      mDimLayer.show(mService.mLayersController.getResizeDimLayer(),alpha,0);
    }
 else {
      visibleAndValid=false;
    }
  }
  if (!visibleAndValid) {
    mDimLayer.hide();
  }
  SurfaceControl.closeTransaction();
}
