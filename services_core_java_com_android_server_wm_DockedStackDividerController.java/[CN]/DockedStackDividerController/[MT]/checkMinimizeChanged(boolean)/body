{
  final TaskStack homeStack=mDisplayContent.getHomeStack();
  if (homeStack == null) {
    return;
  }
  final Task homeTask=homeStack.findHomeTask();
  if (homeTask == null || !isWithinDisplay(homeTask)) {
    return;
  }
  final TaskStack fullscreenStack=mService.mStackIdToStack.get(FULLSCREEN_WORKSPACE_STACK_ID);
  final ArrayList<Task> homeStackTasks=homeStack.getTasks();
  final Task topHomeStackTask=homeStackTasks.get(homeStackTasks.size() - 1);
  final boolean homeVisible=homeTask.getTopVisibleAppToken() != null;
  final boolean homeBehind=(fullscreenStack != null && fullscreenStack.isVisibleLocked()) || (homeStackTasks.size() > 1 && topHomeStackTask != homeTask);
  setMinimizedDockedStack(homeVisible && !homeBehind,animate);
}
