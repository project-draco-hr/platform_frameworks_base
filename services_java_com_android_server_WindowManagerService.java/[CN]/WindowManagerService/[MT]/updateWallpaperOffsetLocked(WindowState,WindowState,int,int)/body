{
  boolean changed=false;
  boolean rawChanged=false;
  if (target.mWallpaperX >= 0) {
    int availw=wallpaperWin.mFrame.right - wallpaperWin.mFrame.left - dw;
    int offset=availw > 0 ? -(int)(availw * target.mWallpaperX + .5f) : 0;
    changed=wallpaperWin.mXOffset != offset;
    if (changed) {
      if (DEBUG_WALLPAPER)       Log.v(TAG,"Update wallpaper " + wallpaperWin + " x: "+ offset);
      wallpaperWin.mXOffset=offset;
    }
    if (wallpaperWin.mWallpaperX != target.mWallpaperX) {
      wallpaperWin.mWallpaperX=target.mWallpaperX;
      rawChanged=true;
    }
  }
  if (target.mWallpaperY >= 0) {
    int availh=wallpaperWin.mFrame.bottom - wallpaperWin.mFrame.top - dh;
    int offset=availh > 0 ? -(int)(availh * target.mWallpaperY + .5f) : 0;
    if (wallpaperWin.mYOffset != offset) {
      if (DEBUG_WALLPAPER)       Log.v(TAG,"Update wallpaper " + wallpaperWin + " y: "+ offset);
      changed=true;
      wallpaperWin.mYOffset=offset;
    }
    if (wallpaperWin.mWallpaperY != target.mWallpaperY) {
      wallpaperWin.mWallpaperY=target.mWallpaperY;
      rawChanged=true;
    }
  }
  if (rawChanged) {
    try {
      wallpaperWin.mClient.dispatchWallpaperOffsets(wallpaperWin.mWallpaperX,wallpaperWin.mWallpaperY);
    }
 catch (    RemoteException e) {
    }
  }
  return changed;
}
