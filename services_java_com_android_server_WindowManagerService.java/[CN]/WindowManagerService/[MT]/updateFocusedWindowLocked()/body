{
  WindowState newFocus=computeFocusedWindowLocked();
  if (mCurrentFocus != newFocus) {
    if (mLastFocus == mCurrentFocus) {
      mH.sendEmptyMessage(H.REPORT_FOCUS_CHANGE);
    }
    if (localLOGV)     Log.v(TAG,"Changing focus from " + mCurrentFocus + " to "+ newFocus);
    mCurrentFocus=newFocus;
    mLosingFocus.remove(newFocus);
    if (newFocus != null) {
      mKeyWaiter.handleNewWindowLocked(newFocus);
    }
    return true;
  }
  return false;
}
