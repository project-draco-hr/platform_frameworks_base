{
  WindowManager.LayoutParams animParams=null;
  int animSrc=0;
  animParams=findCompatibleWindowParams(openingTokenList1);
  if (animParams == null) {
    animParams=findCompatibleWindowParams(closingTokenList2);
  }
  if (animParams != null) {
    return animParams;
  }
  for (int i=order.size() - 1; i >= 0; i--) {
    AppWindowToken wtoken=order.get(i);
    if (openingTokenList1.contains(wtoken) || closingTokenList2.contains(wtoken)) {
      int j=wtoken.windows.size();
      while (j > 0) {
        j--;
        WindowState win=wtoken.windows.get(j);
        if (win.mAttrs.type == WindowManager.LayoutParams.TYPE_BASE_APPLICATION || win.mAttrs.type == WindowManager.LayoutParams.TYPE_APPLICATION_STARTING) {
          if (wtoken.appFullscreen) {
            return win.mAttrs;
          }
          if (animSrc < 2) {
            animParams=win.mAttrs;
            animSrc=2;
          }
        }
 else         if (animSrc < 1 && win.mAttrs.type == WindowManager.LayoutParams.TYPE_APPLICATION) {
          animParams=win.mAttrs;
          animSrc=1;
        }
      }
    }
  }
  return animParams;
}
