{
  int curTokenIndex=mWallpaperTokens.size();
  while (curTokenIndex > 0) {
    curTokenIndex--;
    WindowToken token=mWallpaperTokens.get(curTokenIndex);
    int curWallpaperIndex=token.windows.size();
    while (curWallpaperIndex > 0) {
      curWallpaperIndex--;
      WindowState wallpaper=token.windows.get(curWallpaperIndex);
      if ((wallpaper.mAttrs.flags & WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE) != 0) {
        continue;
      }
      try {
        MotionEvent ev=MotionEvent.obtainNoHistory(pointer);
        if (srcWin != null) {
          ev.offsetLocation(srcWin.mFrame.left - wallpaper.mFrame.left,srcWin.mFrame.top - wallpaper.mFrame.top);
        }
 else {
          ev.offsetLocation(-wallpaper.mFrame.left,-wallpaper.mFrame.top);
        }
switch (pointer.getAction()) {
case MotionEvent.ACTION_DOWN:
          mSendingPointersToWallpaper=true;
        break;
case MotionEvent.ACTION_UP:
      mSendingPointersToWallpaper=false;
    break;
}
wallpaper.mClient.dispatchPointer(ev,eventTime,false);
}
 catch (RemoteException e) {
Log.w(TAG,"Failure sending pointer to wallpaper",e);
}
}
}
}
