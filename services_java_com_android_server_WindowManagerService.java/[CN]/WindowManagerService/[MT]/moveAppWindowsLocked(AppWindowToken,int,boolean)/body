{
  tmpRemoveAppWindowsLocked(wtoken);
  int pos=findWindowOffsetLocked(tokenPos);
  pos=reAddAppWindowsLocked(pos,wtoken);
  if (updateFocusAndLayout) {
    mInputMonitor.setUpdateInputWindowsNeededLw();
    if (!updateFocusedWindowLocked(UPDATE_FOCUS_WILL_PLACE_SURFACES,false)) {
      assignLayersLocked();
    }
    mLayoutNeeded=true;
    performLayoutAndPlaceSurfacesLocked();
    mInputMonitor.updateInputWindowsLw(false);
  }
}
