{
  if (!mDisplayFrozen) {
    return;
  }
  if (mWaitingForConfig || mAppsFreezingScreen > 0 || mWindowsFreezingScreen) {
    return;
  }
  if (DEBUG_FREEZE)   Slog.v(TAG,"*** UNFREEZING DISPLAY",new RuntimeException());
  mDisplayFrozen=false;
  mH.removeMessages(H.APP_FREEZE_TIMEOUT);
  if (PROFILE_ORIENTATION) {
    Debug.stopMethodTracing();
  }
  Surface.unfreezeDisplay(0);
  if (ENABLE_NATIVE_INPUT_DISPATCH) {
    mInputMonitor.thawInputDispatchingLw();
  }
 else {
synchronized (mKeyWaiter) {
      mKeyWaiter.mWasFrozen=true;
      mKeyWaiter.notifyAll();
    }
  }
  if (updateOrientationFromAppTokensLocked()) {
    mH.sendEmptyMessage(H.SEND_NEW_CONFIGURATION);
  }
  mH.removeMessages(H.FORCE_GC);
  mH.sendMessageDelayed(mH.obtainMessage(H.FORCE_GC),2000);
  mScreenFrozenLock.release();
}
