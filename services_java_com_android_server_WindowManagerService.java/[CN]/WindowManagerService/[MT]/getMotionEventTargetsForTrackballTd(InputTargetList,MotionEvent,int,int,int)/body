{
  WindowState focus=getFocusedWindow();
  if (!checkInjectionPermissionTd(focus,injectorPid,injectorUid)) {
    return InputManager.INPUT_EVENT_INJECTION_PERMISSION_DENIED;
  }
  if (focus == null) {
    return InputManager.INPUT_EVENT_INJECTION_FAILED;
  }
  wakeupIfNeeded(focus,LocalPowerManager.BUTTON_EVENT);
  addInputTargetTd(inputTargets,focus,InputTarget.FLAG_SYNC);
  return InputManager.INPUT_EVENT_INJECTION_SUCCEEDED;
}
