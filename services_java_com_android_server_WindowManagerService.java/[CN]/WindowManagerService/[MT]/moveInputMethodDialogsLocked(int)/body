{
  ArrayList<WindowState> dialogs=mInputMethodDialogs;
  final int N=dialogs.size();
  for (int i=0; i < N; i++) {
    int wpos=mWindows.indexOf(dialogs.get(i));
    if (wpos >= 0) {
      if (wpos < pos)       pos--;
      mWindows.remove(wpos);
    }
  }
  if (pos >= 0) {
    final AppWindowToken targetAppToken=mInputMethodTarget.mAppToken;
    WindowState wp=(WindowState)mWindows.get(pos);
    if (wp == mInputMethodWindow) {
      pos++;
    }
    for (int i=0; i < N; i++) {
      WindowState win=dialogs.get(i);
      win.mTargetAppToken=targetAppToken;
      mWindows.add(pos,win);
      pos++;
    }
    return;
  }
  for (int i=0; i < N; i++) {
    WindowState win=dialogs.get(i);
    win.mTargetAppToken=null;
    addWindowToListInOrderLocked(win);
  }
}
