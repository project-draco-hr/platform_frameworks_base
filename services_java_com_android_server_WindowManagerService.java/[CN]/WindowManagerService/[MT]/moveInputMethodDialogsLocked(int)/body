{
  ArrayList<WindowState> dialogs=mInputMethodDialogs;
  final int N=dialogs.size();
  for (int i=0; i < N; i++) {
    pos=tmpRemoveWindowLocked(pos,dialogs.get(i));
  }
  if (pos >= 0) {
    final AppWindowToken targetAppToken=mInputMethodTarget.mAppToken;
    if (pos < mWindows.size()) {
      WindowState wp=(WindowState)mWindows.get(pos);
      if (wp == mInputMethodWindow) {
        pos++;
      }
    }
    for (int i=0; i < N; i++) {
      WindowState win=dialogs.get(i);
      win.mTargetAppToken=targetAppToken;
      pos=reAddWindowLocked(pos,win);
    }
    return;
  }
  for (int i=0; i < N; i++) {
    WindowState win=dialogs.get(i);
    win.mTargetAppToken=null;
    reAddWindowToListInOrderLocked(win);
  }
}
