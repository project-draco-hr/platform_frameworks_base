{
  if (DEBUG_ANIM)   Slog.v(TAG,"finishExit in " + this + ": exiting="+ mExiting+ " remove="+ mRemoveOnExit+ " windowAnimating="+ isWindowAnimating());
  final int N=mChildWindows.size();
  for (int i=0; i < N; i++) {
    ((WindowState)mChildWindows.get(i)).finishExit();
  }
  if (!mExiting) {
    return;
  }
  if (isWindowAnimating()) {
    return;
  }
  if (localLOGV)   Slog.v(TAG,"Exit animation finished in " + this + ": remove="+ mRemoveOnExit);
  if (mSurface != null) {
    mDestroySurface.add(this);
    mDestroying=true;
    if (SHOW_TRANSACTIONS)     logSurface(this,"HIDE (finishExit)",null);
    mSurfaceShown=false;
    try {
      mSurface.hide();
    }
 catch (    RuntimeException e) {
      Slog.w(TAG,"Error hiding surface in " + this,e);
    }
    mLastHidden=true;
    if (ENABLE_NATIVE_INPUT_DISPATCH) {
      for (int i=0; i < N; i++) {
        mInputMonitor.windowIsBecomingInvisibleLw((WindowState)mChildWindows.get(i));
      }
    }
 else {
      mKeyWaiter.releasePendingPointerLocked(mSession);
    }
  }
  mExiting=false;
  if (mRemoveOnExit) {
    mPendingRemove.add(this);
    mRemoveOnExit=false;
  }
}
