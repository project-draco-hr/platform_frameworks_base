{
  WindowState touchedWin=null;
  final int x=(int)xf;
  final int y=(int)yf;
  final ArrayList<WindowState> windows=mWindows;
  final int N=windows.size();
  for (int i=N - 1; i >= 0; i--) {
    WindowState child=windows.get(i);
    final int flags=child.mAttrs.flags;
    if (!child.isVisibleLw()) {
      continue;
    }
    if ((flags & WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE) != 0) {
      continue;
    }
    tmpRect.set(child.mFrame);
    if (child.mTouchableInsets == ViewTreeObserver.InternalInsetsInfo.TOUCHABLE_INSETS_CONTENT) {
      tmpRect.left+=child.mGivenContentInsets.left;
      tmpRect.top+=child.mGivenContentInsets.top;
      tmpRect.right-=child.mGivenContentInsets.right;
      tmpRect.bottom-=child.mGivenContentInsets.bottom;
    }
 else     if (child.mTouchableInsets == ViewTreeObserver.InternalInsetsInfo.TOUCHABLE_INSETS_VISIBLE) {
      tmpRect.left+=child.mGivenVisibleInsets.left;
      tmpRect.top+=child.mGivenVisibleInsets.top;
      tmpRect.right-=child.mGivenVisibleInsets.right;
      tmpRect.bottom-=child.mGivenVisibleInsets.bottom;
    }
    final int touchFlags=flags & (WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE | WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL);
    if (tmpRect.contains(x,y) || touchFlags == 0) {
      touchedWin=child;
      break;
    }
  }
  return touchedWin;
}
