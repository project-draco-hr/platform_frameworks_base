{
  if (localLOGV)   Log.v(TAG,"Setting animation in " + this + ": "+ anim);
  animation=anim;
  animating=false;
  anim.restrictDuration(MAX_ANIMATION_DURATION);
  anim.scaleCurrentDuration(mTransitionAnimationScale);
  int zorder=anim.getZAdjustment();
  int adj=0;
  if (zorder == Animation.ZORDER_TOP) {
    adj=TYPE_LAYER_OFFSET;
  }
 else   if (zorder == Animation.ZORDER_BOTTOM) {
    adj=-TYPE_LAYER_OFFSET;
  }
  if (animLayerAdjustment != adj) {
    animLayerAdjustment=adj;
    updateLayers();
  }
}
