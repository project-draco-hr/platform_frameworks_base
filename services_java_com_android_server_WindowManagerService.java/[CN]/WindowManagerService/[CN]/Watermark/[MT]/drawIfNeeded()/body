{
  if (mDrawNeeded) {
    final int dw=mLastDW;
    final int dh=mLastDH;
    mDrawNeeded=false;
    Rect dirty=new Rect(0,0,dw,dh);
    Canvas c=null;
    try {
      c=mSurface.lockCanvas(dirty);
    }
 catch (    IllegalArgumentException e) {
    }
catch (    OutOfResourcesException e) {
    }
    if (c != null) {
      c.drawColor(0,PorterDuff.Mode.CLEAR);
      int deltaX=mDeltaX;
      int deltaY=mDeltaY;
      int div=(dw + mTextWidth) / deltaX;
      int rem=(dw + mTextWidth) - (div * deltaX);
      int qdelta=deltaX / 4;
      if (rem < qdelta || rem > (deltaX - qdelta)) {
        deltaX+=deltaX / 3;
      }
      int y=-mTextHeight;
      int x=-mTextWidth;
      while (y < (dh + mTextHeight)) {
        c.drawText(mText,x,y,mTextPaint);
        x+=deltaX;
        if (x >= dw) {
          x-=(dw + mTextWidth);
          y+=deltaY;
        }
      }
      mSurface.unlockCanvasAndPost(c);
    }
  }
}
