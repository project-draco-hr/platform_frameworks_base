{
  if (!newWindow.canReceiveKeys()) {
    return;
  }
synchronized (this) {
    if (DEBUG_INPUT)     Log.v(TAG,"New key dispatch window: win=" + newWindow.mClient.asBinder() + ", last="+ mLastBinder+ " (token="+ (mLastWin != null ? mLastWin.mToken : null)+ "), finished="+ mFinished+ ", paused="+ newWindow.mToken.paused);
    newWindow.mToken.paused=false;
    mGotFirstWindow=true;
    boolean doNotify=true;
    if ((newWindow.mAttrs.flags & FLAG_SYSTEM_ERROR) != 0) {
      if (DEBUG_INPUT)       Log.v(TAG,"New SYSTEM_ERROR window; resetting state");
      mLastWin=null;
      mLastBinder=null;
      mMotionTarget=null;
      mFinished=true;
    }
 else     if (mLastWin != null) {
      if (DEBUG_INPUT)       Log.v(TAG,"Last win layer=" + mLastWin.mLayer + ", new win layer="+ newWindow.mLayer);
      if (newWindow.mLayer >= mLastWin.mLayer) {
        if (!mLastWin.canReceiveKeys()) {
          mLastWin.mToken.paused=false;
          doFinishedKeyLocked(true);
          doNotify=false;
        }
      }
 else {
        doNotify=false;
      }
    }
    if (doNotify) {
      notifyAll();
    }
  }
}
