{
  if (mPolicy.preprocessInputEventTq(event)) {
    return true;
  }
switch (event.type) {
case RawInputEvent.EV_KEY:
{
      if (DEBUG) {
        if (event.keycode == KeyEvent.KEYCODE_G) {
          if (event.value != 0) {
            mPolicy.screenTurnedOff(WindowManagerPolicy.OFF_BECAUSE_OF_USER);
          }
          return false;
        }
        if (event.keycode == KeyEvent.KEYCODE_D) {
          if (event.value != 0) {
          }
          return false;
        }
      }
      boolean screenIsOff=!mPowerManager.screenIsOn();
      boolean screenIsDim=!mPowerManager.screenIsBright();
      int actions=mPolicy.interceptKeyTq(event,!screenIsOff);
      if ((actions & WindowManagerPolicy.ACTION_GO_TO_SLEEP) != 0) {
        mPowerManager.goToSleep(event.when);
      }
      if (screenIsOff) {
        event.flags|=WindowManagerPolicy.FLAG_WOKE_HERE;
      }
      if (screenIsDim) {
        event.flags|=WindowManagerPolicy.FLAG_BRIGHT_HERE;
      }
      if ((actions & WindowManagerPolicy.ACTION_POKE_USER_ACTIVITY) != 0) {
        mPowerManager.userActivity(event.when,false,LocalPowerManager.BUTTON_EVENT);
      }
      if ((actions & WindowManagerPolicy.ACTION_PASS_TO_USER) != 0) {
        if (event.value != 0 && mPolicy.isAppSwitchKeyTqTiLwLi(event.keycode)) {
          filterQueue(this);
          mKeyWaiter.appSwitchComing();
        }
        return true;
      }
 else {
        return false;
      }
    }
case RawInputEvent.EV_REL:
{
    boolean screenIsOff=!mPowerManager.screenIsOn();
    boolean screenIsDim=!mPowerManager.screenIsBright();
    if (screenIsOff) {
      if (!mPolicy.isWakeRelMovementTq(event.deviceId,device.classes,event)) {
        return false;
      }
      event.flags|=WindowManagerPolicy.FLAG_WOKE_HERE;
    }
    if (screenIsDim) {
      event.flags|=WindowManagerPolicy.FLAG_BRIGHT_HERE;
    }
    return true;
  }
case RawInputEvent.EV_ABS:
{
  boolean screenIsOff=!mPowerManager.screenIsOn();
  boolean screenIsDim=!mPowerManager.screenIsBright();
  if (screenIsOff) {
    if (!mPolicy.isWakeAbsMovementTq(event.deviceId,device.classes,event)) {
      return false;
    }
    event.flags|=WindowManagerPolicy.FLAG_WOKE_HERE;
  }
  if (screenIsDim) {
    event.flags|=WindowManagerPolicy.FLAG_BRIGHT_HERE;
  }
  return true;
}
default :
return true;
}
}
