{
  if (sJidResource != null) {
    return sJidResource;
  }
  MessageDigest digest;
  try {
    digest=MessageDigest.getInstance("SHA-1");
  }
 catch (  NoSuchAlgorithmException e) {
    throw new RuntimeException("this should never happen");
  }
  String imei=TelephonyManager.getDefault().getDeviceId();
  if (TextUtils.isEmpty(imei)) {
    return "";
  }
  byte[] hashedImei=digest.digest(imei.getBytes());
  String id=new String(Base64.encodeBase64(hashedImei),0,12);
  id=id.replaceAll("/","_");
  sJidResource=JID_RESOURCE_PREFIX + id;
  return sJidResource;
}
