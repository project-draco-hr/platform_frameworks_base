{
  Key<T> key=new Key<T>(keyName,typeReference);
  mMetadata.set(key,null);
  assertNull(mMetadata.get(key));
  mMetadata.set(key,expected);
  byte[] actualValues=mMetadata.readValues(key.getTag());
  assertArrayEquals(expectedNative,actualValues);
  T actual=mMetadata.get(key);
  if (typeReference.getRawType().isArray()) {
    assertArrayEquals(expected,actual);
  }
 else {
    assertEquals(expected,actual);
  }
  mMetadata.writeValues(key.getTag(),expectedNative);
  actual=mMetadata.get(key);
  if (typeReference.getRawType().isArray()) {
    assertArrayEquals(expected,actual);
  }
 else {
    assertEquals(expected,actual);
  }
  return key;
}
