{
  final Class<?> IMPLEMENTATION_DEFINED_OUTPUT_CLASS=SurfaceTexture.class;
  android.util.Size[] sizes;
  int[] formats;
  if (output) {
    if (format == HAL_PIXEL_FORMAT_IMPLEMENTATION_DEFINED) {
      sizes=configMap.getOutputSizes(IMPLEMENTATION_DEFINED_OUTPUT_CLASS);
      formats=new int[]{HAL_PIXEL_FORMAT_IMPLEMENTATION_DEFINED};
    }
 else {
      sizes=configMap.getOutputSizes(format);
      formats=configMap.getOutputFormats();
      assertTrue("Format must be supported by stream configuration map",configMap.isOutputSupportedFor(format));
    }
  }
 else {
    sizes=configMap.getInputSizes(format);
    formats=configMap.getInputFormats();
  }
  android.util.Size expectedSize=new android.util.Size(width,height);
  assertArrayContains(format,formats);
  assertArrayContains(expectedSize,sizes);
}
