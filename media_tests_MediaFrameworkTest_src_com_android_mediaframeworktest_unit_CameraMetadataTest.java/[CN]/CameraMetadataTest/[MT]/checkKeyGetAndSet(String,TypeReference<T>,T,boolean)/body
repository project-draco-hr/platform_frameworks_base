{
  Key<T> key=new Key<T>(keyStr,typeToken);
  assertNull(mMetadata.get(key));
  mMetadata.set(key,null);
  assertNull(mMetadata.get(key));
  mMetadata.set(key,expected);
  T actual=mMetadata.get(key);
  if (typeToken.getRawType().isArray()) {
    assertArrayEquals(expected,actual);
  }
 else {
    assertEquals(expected,actual);
  }
  if (reuse) {
    mMetadata.set(key,null);
  }
}
