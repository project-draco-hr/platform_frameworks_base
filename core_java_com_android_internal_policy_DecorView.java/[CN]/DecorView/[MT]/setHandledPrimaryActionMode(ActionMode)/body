{
  endOnGoingFadeAnimation();
  mPrimaryActionMode=mode;
  mPrimaryActionMode.invalidate();
  mPrimaryActionModeView.initForMode(mPrimaryActionMode);
  if (mPrimaryActionModePopup != null) {
    post(mShowPrimaryActionModePopup);
  }
 else {
    mFadeAnim=ObjectAnimator.ofFloat(mPrimaryActionModeView,View.ALPHA,0f,1f);
    mFadeAnim.addListener(new Animator.AnimatorListener(){
      @Override public void onAnimationStart(      Animator animation){
        mPrimaryActionModeView.setVisibility(View.VISIBLE);
      }
      @Override public void onAnimationEnd(      Animator animation){
        mPrimaryActionModeView.setAlpha(1f);
        mFadeAnim=null;
      }
      @Override public void onAnimationCancel(      Animator animation){
      }
      @Override public void onAnimationRepeat(      Animator animation){
      }
    }
);
    mFadeAnim.start();
  }
  mPrimaryActionModeView.sendAccessibilityEvent(AccessibilityEvent.TYPE_WINDOW_STATE_CHANGED);
}
