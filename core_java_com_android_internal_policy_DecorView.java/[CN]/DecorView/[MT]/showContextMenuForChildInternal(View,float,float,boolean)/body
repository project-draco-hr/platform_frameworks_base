{
  if (mWindow.mContextMenuHelper != null) {
    mWindow.mContextMenuHelper.dismiss();
    mWindow.mContextMenuHelper=null;
  }
  if (mWindow.mContextMenu == null) {
    mWindow.mContextMenu=new ContextMenuBuilder(getContext());
    mWindow.mContextMenu.setCallback(mWindow.mContextMenuCallback);
  }
 else {
    mWindow.mContextMenu.clearAll();
  }
  final MenuHelper helper;
  if (isPopup) {
    helper=mWindow.mContextMenu.showPopup(getContext(),originalView,x,y);
  }
 else {
    helper=mWindow.mContextMenu.showDialog(originalView,originalView.getWindowToken());
  }
  if (helper != null) {
    helper.setPresenterCallback(mWindow.mContextMenuCallback);
  }
  mWindow.mContextMenuHelper=helper;
  return helper != null;
}
