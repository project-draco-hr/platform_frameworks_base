{
  Log.d(TAG,"Reset GPS properties, previous size = " + properties.size());
  loadPropertiesFromResource(context,properties);
  boolean isPropertiesLoadedFromFile=false;
  final String gpsHardware=SystemProperties.get("ro.hardware.gps");
  if (!TextUtils.isEmpty(gpsHardware)) {
    final String propFilename=PROPERTIES_FILE_PREFIX + "." + gpsHardware+ PROPERTIES_FILE_SUFFIX;
    isPropertiesLoadedFromFile=loadPropertiesFromFile(propFilename,properties);
  }
  if (!isPropertiesLoadedFromFile) {
    loadPropertiesFromFile(DEFAULT_PROPERTIES_FILE,properties);
  }
  Log.d(TAG,"GPS properties reloaded, size = " + properties.size());
  setSuplHostPort(properties.getProperty("SUPL_HOST"),properties.getProperty("SUPL_PORT"));
  mC2KServerHost=properties.getProperty("C2K_HOST");
  String portString=properties.getProperty("C2K_PORT");
  if (mC2KServerHost != null && portString != null) {
    try {
      mC2KServerPort=Integer.parseInt(portString);
    }
 catch (    NumberFormatException e) {
      Log.e(TAG,"unable to parse C2K_PORT: " + portString);
    }
  }
  try {
    ByteArrayOutputStream baos=new ByteArrayOutputStream(4096);
    properties.store(baos,null);
    native_configuration_update(baos.toString());
    Log.d(TAG,"final config = " + baos.toString());
  }
 catch (  IOException ex) {
    Log.w(TAG,"failed to dump properties contents");
  }
}
