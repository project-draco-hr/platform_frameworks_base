{
  if (DEBUG_BACKUP)   Slog.v(TAG,"unbindBackupAgent: " + appInfo);
  if (appInfo == null) {
    Slog.w(TAG,"unbind backup agent for null app");
    return;
  }
synchronized (this) {
    if (mBackupAppName == null) {
      Slog.w(TAG,"Unbinding backup agent with no active backup");
      return;
    }
    if (!mBackupAppName.equals(appInfo.packageName)) {
      Slog.e(TAG,"Unbind of " + appInfo + " but is not the current backup target");
      return;
    }
    ProcessRecord proc=mBackupTarget.app;
    mBackupTarget=null;
    mBackupAppName=null;
    updateOomAdjLocked(proc);
    if (proc.thread != null) {
      try {
        proc.thread.scheduleDestroyBackupAgent(appInfo,compatibilityInfoForPackageLocked(appInfo));
      }
 catch (      Exception e) {
        Slog.e(TAG,"Exception when unbinding backup agent:");
        e.printStackTrace();
      }
    }
  }
}
