{
  boolean sent=false;
  if (r.state == ActivityState.RESUMED && r.app != null && r.app.thread != null) {
    try {
      ArrayList<Intent> ar=new ArrayList<Intent>();
      ar.add(new Intent(intent));
      r.app.thread.scheduleNewIntent(ar,r);
      sent=true;
    }
 catch (    Exception e) {
      Slog.w(TAG,"Exception thrown sending new intent to " + r,e);
    }
  }
  if (!sent) {
    r.addNewIntentLocked(new Intent(intent));
  }
}
