{
  final boolean nextState=r != null && r.immersive;
  if (mUpdateLock.isHeld() != nextState) {
    if (DEBUG_IMMERSIVE) {
      Slog.d(TAG,"Applying new update lock state '" + nextState + "' for "+ r);
    }
    if (nextState) {
      mUpdateLock.acquire();
    }
 else {
      mUpdateLock.release();
    }
  }
}
