{
synchronized (this) {
    int index=(token != null) ? mMainStack.indexOfTokenLocked(token) : -1;
    if (index < 0) {
      throw new IllegalArgumentException();
    }
    ActivityRecord r=(ActivityRecord)mMainStack.mHistory.get(index);
    return r.immersive;
  }
}
