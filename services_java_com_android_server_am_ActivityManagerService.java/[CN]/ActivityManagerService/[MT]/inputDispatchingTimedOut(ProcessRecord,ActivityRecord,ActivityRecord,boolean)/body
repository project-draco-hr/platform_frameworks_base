{
  if (checkCallingPermission(android.Manifest.permission.FILTER_EVENTS) != PackageManager.PERMISSION_GRANTED) {
    throw new SecurityException("Requires permission " + android.Manifest.permission.FILTER_EVENTS);
  }
  if (proc != null) {
synchronized (this) {
      if (proc.debugging) {
        return false;
      }
      if (mDidDexOpt) {
        mDidDexOpt=false;
        return false;
      }
      if (proc.instrumentationClass != null) {
        Bundle info=new Bundle();
        info.putString("shortMsg","keyDispatchingTimedOut");
        info.putString("longMsg","Timed out while dispatching key event");
        finishInstrumentationLocked(proc,Activity.RESULT_CANCELED,info);
        return true;
      }
    }
    mHandler.post(new Runnable(){
      @Override public void run(){
        appNotResponding(proc,activity,parent,aboveSystem,"keyDispatchingTimedOut");
      }
    }
);
  }
  return true;
}
