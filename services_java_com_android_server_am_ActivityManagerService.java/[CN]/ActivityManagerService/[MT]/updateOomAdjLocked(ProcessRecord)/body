{
  final ActivityRecord TOP_ACT=resumedAppLocked();
  final ProcessRecord TOP_APP=TOP_ACT != null ? TOP_ACT.app : null;
  int curAdj=app.curAdj;
  final boolean wasCached=curAdj >= ProcessList.CACHED_APP_MIN_ADJ && curAdj <= ProcessList.CACHED_APP_MAX_ADJ;
  mAdjSeq++;
  boolean success=updateOomAdjLocked(app,app.cachedAdj,app.clientCachedAdj,app.emptyAdj,TOP_APP,false);
  final boolean nowCached=app.curAdj >= ProcessList.CACHED_APP_MIN_ADJ && app.curAdj <= ProcessList.CACHED_APP_MAX_ADJ;
  if (nowCached != wasCached) {
    updateOomAdjLocked();
  }
  return success;
}
