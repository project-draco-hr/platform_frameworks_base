{
  final ActivityRecord TOP_ACT=resumedAppLocked();
  final ProcessRecord TOP_APP=TOP_ACT != null ? TOP_ACT.app : null;
  int curAdj=app.curAdj;
  final boolean wasHidden=curAdj >= ProcessList.HIDDEN_APP_MIN_ADJ && curAdj <= ProcessList.HIDDEN_APP_MAX_ADJ;
  mAdjSeq++;
  boolean success=updateOomAdjLocked(app,app.hiddenAdj,app.clientHiddenAdj,app.emptyAdj,TOP_APP,false);
  final boolean nowHidden=app.curAdj >= ProcessList.HIDDEN_APP_MIN_ADJ && app.curAdj <= ProcessList.HIDDEN_APP_MAX_ADJ;
  if (nowHidden != wasHidden) {
    updateOomAdjLocked();
  }
  return success;
}
