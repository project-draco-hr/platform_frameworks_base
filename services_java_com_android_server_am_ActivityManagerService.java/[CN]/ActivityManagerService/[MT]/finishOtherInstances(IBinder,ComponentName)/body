{
synchronized (this) {
    final long origId=Binder.clearCallingIdentity();
    int N=mHistory.size();
    TaskRecord lastTask=null;
    for (int i=0; i < N; i++) {
      HistoryRecord r=(HistoryRecord)mHistory.get(i);
      if (r.realActivity.equals(className) && r != token && lastTask != r.task) {
        if (finishActivityLocked(r,i,Activity.RESULT_CANCELED,null,"others")) {
          i--;
          N--;
        }
      }
      lastTask=r.task;
    }
    Binder.restoreCallingIdentity(origId);
  }
}
