{
  final long origId=Binder.clearCallingIdentity();
  ActivityRecord r=mMainStack.activityIdleInternal(token,false,config);
  if (stopProfiling) {
synchronized (this) {
      if (mProfileProc == r.app) {
        if (mProfileFd != null) {
          try {
            mProfileFd.close();
          }
 catch (          IOException e) {
          }
          clearProfilerLocked();
        }
      }
    }
  }
  Binder.restoreCallingIdentity(origId);
}
