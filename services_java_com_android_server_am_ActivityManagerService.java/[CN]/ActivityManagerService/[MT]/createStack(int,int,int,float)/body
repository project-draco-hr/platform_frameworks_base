{
  enforceCallingPermission(android.Manifest.permission.MANAGE_ACTIVITY_STACKS,"createStack()");
  if (DEBUG_STACK)   Slog.d(TAG,"createStack: taskId=" + taskId + " relStackBoxId="+ relativeStackBoxId+ " position="+ position+ " weight="+ weight);
synchronized (this) {
    long ident=Binder.clearCallingIdentity();
    try {
      int stackId=mStackSupervisor.createStack();
      mWindowManager.createStack(stackId,relativeStackBoxId,position,weight);
      if (taskId > 0) {
        moveTaskToStack(taskId,stackId,true);
      }
      return stackId;
    }
  finally {
      Binder.restoreCallingIdentity(ident);
    }
  }
}
