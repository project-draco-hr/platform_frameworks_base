{
  if (!mWentToSleep && !mLockScreenShown) {
    if (mSleeping) {
      mSleeping=false;
      final int numStacks=mStacks.size();
      for (int stackNdx=0; stackNdx < numStacks; ++stackNdx) {
        final ActivityStack stack=mStacks.get(stackNdx);
        stack.awakeFromSleepingLocked();
        stack.resumeTopActivityLocked(null);
      }
    }
  }
}
