{
  if (activity.readUriPermissions != null) {
    for (    UriPermission perm : activity.readUriPermissions) {
      perm.readActivities.remove(activity);
      if (perm.readActivities.size() == 0 && (perm.globalModeFlags & Intent.FLAG_GRANT_READ_URI_PERMISSION) == 0) {
        perm.modeFlags&=~Intent.FLAG_GRANT_READ_URI_PERMISSION;
        removeUriPermissionIfNeededLocked(perm);
      }
    }
  }
  if (activity.writeUriPermissions != null) {
    for (    UriPermission perm : activity.writeUriPermissions) {
      perm.writeActivities.remove(activity);
      if (perm.writeActivities.size() == 0 && (perm.globalModeFlags & Intent.FLAG_GRANT_WRITE_URI_PERMISSION) == 0) {
        perm.modeFlags&=~Intent.FLAG_GRANT_WRITE_URI_PERMISSION;
        removeUriPermissionIfNeededLocked(perm);
      }
    }
  }
}
