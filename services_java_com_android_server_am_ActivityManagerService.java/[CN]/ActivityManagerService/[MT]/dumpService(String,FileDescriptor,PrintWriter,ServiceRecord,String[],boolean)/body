{
  String innerPrefix=prefix + "  ";
synchronized (this) {
    pw.print(prefix);
    pw.print("SERVICE ");
    pw.print(r.shortName);
    pw.print(" ");
    pw.print(Integer.toHexString(System.identityHashCode(r)));
    pw.print(" pid=");
    if (r.app != null)     pw.println(r.app.pid);
 else     pw.println("(not running)");
    if (dumpAll) {
      r.dump(pw,innerPrefix);
    }
  }
  if (r.app != null && r.app.thread != null) {
    pw.print(prefix);
    pw.println("  Client:");
    pw.flush();
    try {
      TransferPipe tp=new TransferPipe();
      try {
        r.app.thread.dumpService(tp.getWriteFd().getFileDescriptor(),r,args);
        tp.setBufferPrefix(prefix + "    ");
        tp.go(fd);
      }
  finally {
        tp.kill();
      }
    }
 catch (    IOException e) {
      pw.println(prefix + "    Failure while dumping the service: " + e);
    }
catch (    RemoteException e) {
      pw.println(prefix + "    Got a RemoteException while dumping the service");
    }
  }
}
