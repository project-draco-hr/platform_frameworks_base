{
  int extraUserId=intent.getIntExtra(Intent.EXTRA_USER_HANDLE,-1);
  if (extraUserId < 1)   return;
  ArrayList<Pair<String,Integer>> pkgAndUids=new ArrayList<Pair<String,Integer>>();
synchronized (this) {
    HashMap<String,SparseArray<ProcessRecord>> map=mProcessNames.getMap();
    for (    Entry<String,SparseArray<ProcessRecord>> uidMap : map.entrySet()) {
      SparseArray<ProcessRecord> uids=uidMap.getValue();
      for (int i=0; i < uids.size(); i++) {
        if (UserHandle.getUserId(uids.keyAt(i)) == extraUserId) {
          pkgAndUids.add(new Pair<String,Integer>(uidMap.getKey(),uids.keyAt(i)));
        }
      }
    }
    for (    Pair<String,Integer> pkgAndUid : pkgAndUids) {
      forceStopPackageLocked(pkgAndUid.first,pkgAndUid.second,false,false,true,true,extraUserId);
    }
  }
}
