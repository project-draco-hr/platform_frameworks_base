{
  ActivityRecord resumedActivity=mFocusedStack.mResumedActivity;
  if (resumedActivity == null || resumedActivity.app == null) {
    resumedActivity=mFocusedStack.mPausingActivity;
    if (resumedActivity == null || resumedActivity.app == null) {
      resumedActivity=mFocusedStack.topRunningActivityLocked(null);
    }
  }
  return resumedActivity;
}
