{
  String dropboxTag, processName;
  if (r == null) {
    dropboxTag="system_server_" + eventType;
  }
 else   if ((r.info.flags & ApplicationInfo.FLAG_SYSTEM) != 0) {
    dropboxTag="system_app_" + eventType;
  }
 else {
    dropboxTag="data_app_" + eventType;
  }
  DropBoxManager dbox=(DropBoxManager)mContext.getSystemService(Context.DROPBOX_SERVICE);
  if (dbox != null && dbox.isTagEnabled(dropboxTag)) {
    StringBuilder sb=new StringBuilder(1024);
    sb.append("Build: ").append(Build.FINGERPRINT).append("\n");
    if (r == null) {
      sb.append("Process: system_server\n");
    }
 else {
      sb.append("Package: ").append(r.info.packageName).append("\n");
      if (!r.processName.equals(r.info.packageName)) {
        sb.append("Process: ").append(r.processName).append("\n");
      }
    }
    if (tag != null) {
      sb.append("Tag: ").append(tag).append("\n");
    }
    if (crashInfo != null && crashInfo.stackTrace != null) {
      sb.append("\n").append(crashInfo.stackTrace);
    }
    dbox.addText(dropboxTag,sb.toString());
  }
}
