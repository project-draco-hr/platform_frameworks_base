{
  enforceNotIsolatedCaller("checkUriPermission");
  Identity tlsIdentity=sCallerIdentity.get();
  if (tlsIdentity != null) {
    uid=tlsIdentity.uid;
    pid=tlsIdentity.pid;
  }
  uid=UserHandle.getAppId(uid);
  if (pid == MY_PID) {
    return PackageManager.PERMISSION_GRANTED;
  }
synchronized (this) {
    return checkUriPermissionLocked(uri,uid,modeFlags) ? PackageManager.PERMISSION_GRANTED : PackageManager.PERMISSION_DENIED;
  }
}
