{
  enforceCallingPermission(android.Manifest.permission.MANAGE_ACTIVITY_STACKS,"getStackBoxes()");
  long ident=Binder.clearCallingIdentity();
  try {
    List<StackBoxInfo> stackBoxInfos=mWindowManager.getStackBoxInfos();
synchronized (this) {
      List<StackInfo> stackInfos=getStacks();
      for (      StackBoxInfo stackBoxInfo : stackBoxInfos) {
        addStackInfoToStackBoxInfo(stackBoxInfo,stackInfos);
      }
    }
    return stackBoxInfos;
  }
  finally {
    Binder.restoreCallingIdentity(ident);
  }
}
