{
  String innerPrefix=prefix + "  ";
synchronized (this) {
    pw.print(prefix);
    pw.print("ACTIVITY ");
    pw.print(r.shortComponentName);
    pw.print(" ");
    pw.print(Integer.toHexString(System.identityHashCode(r)));
    pw.print(" pid=");
    if (r.app != null)     pw.println(r.app.pid);
 else     pw.println("(not running)");
    if (dumpAll) {
      r.dump(pw,innerPrefix);
    }
  }
  if (r.app != null && r.app.thread != null) {
    pw.flush();
    try {
      TransferPipe tp=new TransferPipe();
      try {
        r.app.thread.dumpActivity(tp.getWriteFd().getFileDescriptor(),r.appToken,innerPrefix,args);
        tp.go(fd);
      }
  finally {
        tp.kill();
      }
    }
 catch (    IOException e) {
      pw.println(innerPrefix + "Failure while dumping the activity: " + e);
    }
catch (    RemoteException e) {
      pw.println(innerPrefix + "Got a RemoteException while dumping the activity");
    }
  }
}
