{
  if (r != null) {
    Integer cnt=r.conProviders.get(cpr);
    if (DEBUG_PROVIDER)     Slog.v(TAG,"Adding provider requested by " + r.processName + " from process "+ cpr.info.processName+ ": "+ cpr.name.flattenToShortString()+ " cnt="+ (cnt == null ? 1 : cnt));
    if (cnt == null) {
      cpr.clients.add(r);
      r.conProviders.put(cpr,new Integer(1));
      return true;
    }
 else {
      r.conProviders.put(cpr,new Integer(cnt.intValue() + 1));
    }
  }
 else {
    cpr.addExternalProcessHandleLocked(externalProcessToken);
  }
  return false;
}
