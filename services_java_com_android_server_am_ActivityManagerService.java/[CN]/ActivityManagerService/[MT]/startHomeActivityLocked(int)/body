{
  if (mHeadless) {
    ensureBootCompleted();
    return false;
  }
  if (mFactoryTest == SystemServer.FACTORY_TEST_LOW_LEVEL && mTopAction == null) {
    return false;
  }
  Intent intent=new Intent(mTopAction,mTopData != null ? Uri.parse(mTopData) : null);
  intent.setComponent(mTopComponent);
  if (mFactoryTest != SystemServer.FACTORY_TEST_LOW_LEVEL) {
    intent.addCategory(Intent.CATEGORY_HOME);
  }
  ActivityInfo aInfo=resolveActivityInfo(intent,STOCK_PM_FLAGS,userId);
  if (aInfo != null) {
    intent.setComponent(new ComponentName(aInfo.applicationInfo.packageName,aInfo.name));
    aInfo=new ActivityInfo(aInfo);
    aInfo.applicationInfo=getAppInfoForUser(aInfo.applicationInfo,userId);
    ProcessRecord app=getProcessRecordLocked(aInfo.processName,aInfo.applicationInfo.uid);
    if (app == null || app.instrumentationClass == null) {
      intent.setFlags(intent.getFlags() | Intent.FLAG_ACTIVITY_NEW_TASK);
      mMainStack.startActivityLocked(null,intent,null,aInfo,null,null,0,0,0,null,0,null,false,null);
    }
  }
  return true;
}
