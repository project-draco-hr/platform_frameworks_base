{
  enforceNotIsolatedCaller("startActivity");
  int userId=0;
  if (intent.getCategories() != null && intent.getCategories().contains(Intent.CATEGORY_HOME)) {
    userId=mCurrentUserId;
  }
 else {
    if (Binder.getCallingUid() < Process.FIRST_APPLICATION_UID) {
      userId=0;
    }
 else {
      userId=Binder.getOrigCallingUser();
    }
  }
  return mMainStack.startActivityMayWait(caller,-1,intent,resolvedType,resultTo,resultWho,requestCode,startFlags,profileFile,profileFd,null,null,options,userId);
}
