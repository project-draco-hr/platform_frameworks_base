{
  final int N=mMainStack.mHistory.size();
  TaskRecord lastTask=null;
  for (int i=0; i < N; i++) {
    ActivityRecord r=(ActivityRecord)mMainStack.mHistory.get(i);
    if (r.appToken == token) {
      if (!onlyRoot || lastTask != r.task) {
        return r.task.taskId;
      }
      return -1;
    }
    lastTask=r.task;
  }
  return -1;
}
