{
  if (mFocusedActivity != r) {
    if (DEBUG_FOCUS)     Slog.d(TAG,"setFocusedActivityLocked: r=" + r);
    mFocusedActivity=r;
    mStackSupervisor.setFocusedStack(r);
    if (r != null) {
      mWindowManager.setFocusedApp(r.appToken,true);
    }
    applyUpdateLockStateLocked(r);
  }
}
