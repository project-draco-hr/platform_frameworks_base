{
  enforceCallingPermission(android.Manifest.permission.REORDER_TASKS,"moveTaskToFront()");
  if (DEBUG_STACK)   Slog.d(TAG,"moveTaskToFront: moving task=" + task);
synchronized (this) {
    if (!checkAppSwitchAllowedLocked(Binder.getCallingPid(),Binder.getCallingUid(),"Task to front")) {
      ActivityOptions.abort(options);
      return;
    }
    final long origId=Binder.clearCallingIdentity();
    try {
      mStackSupervisor.findTaskToMoveToFrontLocked(task,flags,options);
    }
  finally {
      Binder.restoreCallingIdentity(origId);
    }
    ActivityOptions.abort(options);
  }
}
