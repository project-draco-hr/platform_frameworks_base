{
  ArrayList<ProcessRecord> procs=collectProcesses(pw,0,args);
  if (procs == null) {
    return;
  }
  pw.println("Applications Database Info:");
  for (int i=procs.size() - 1; i >= 0; i--) {
    ProcessRecord r=procs.get(i);
    if (r.thread != null) {
      pw.println("\n** Database info for pid " + r.pid + " ["+ r.processName+ "] **");
      pw.flush();
      try {
        TransferPipe tp=new TransferPipe();
        try {
          r.thread.dumpDbInfo(tp.getWriteFd().getFileDescriptor(),args);
          tp.go(fd);
        }
  finally {
          tp.kill();
        }
      }
 catch (      IOException e) {
        pw.println("Failure while dumping the app: " + r);
        pw.flush();
      }
catch (      RemoteException e) {
        pw.println("Got a RemoteException while dumping the app " + r);
        pw.flush();
      }
    }
  }
}
