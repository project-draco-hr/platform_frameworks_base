{
  final int N=mUserSwitchObservers.beginBroadcast();
  if (N > 0) {
    final IRemoteCallback callback=new IRemoteCallback.Stub(){
      int mCount=0;
      @Override public void sendResult(      Bundle data) throws RemoteException {
synchronized (ActivityManagerService.this) {
          if (mCurUserSwitchCallback == this) {
            mCount++;
            if (mCount == N) {
              sendContinueUserSwitchLocked(uss,oldUserId,newUserId);
            }
          }
        }
      }
    }
;
synchronized (this) {
      uss.switching=true;
      mCurUserSwitchCallback=callback;
    }
    for (int i=0; i < N; i++) {
      try {
        mUserSwitchObservers.getBroadcastItem(i).onUserSwitching(newUserId,callback);
      }
 catch (      RemoteException e) {
      }
    }
  }
 else {
synchronized (this) {
      sendContinueUserSwitchLocked(uss,oldUserId,newUserId);
    }
  }
  mUserSwitchObservers.finishBroadcast();
}
