{
  enforceCallingPermission(android.Manifest.permission.REORDER_TASKS,"moveTaskToBack()");
synchronized (this) {
    if (mMainStack.mResumedActivity != null && mMainStack.mResumedActivity.task.taskId == task) {
      if (!checkAppSwitchAllowedLocked(Binder.getCallingPid(),Binder.getCallingUid(),"Task to back")) {
        return;
      }
    }
    final long origId=Binder.clearCallingIdentity();
    mMainStack.moveTaskToBackLocked(task,null);
    Binder.restoreCallingIdentity(origId);
  }
}
