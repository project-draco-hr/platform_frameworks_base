{
  enforceCallingPermission(android.Manifest.permission.REORDER_TASKS,"moveTaskToBack()");
synchronized (this) {
    TaskRecord tr=recentTaskForIdLocked(taskId);
    if (tr != null) {
      if (DEBUG_STACK)       Slog.d(TAG,"moveTaskToBack: moving task=" + tr);
      ActivityStack stack=tr.stack;
      if (stack.mResumedActivity != null && stack.mResumedActivity.task == tr) {
        if (!checkAppSwitchAllowedLocked(Binder.getCallingPid(),Binder.getCallingUid(),"Task to back")) {
          return;
        }
      }
      final long origId=Binder.clearCallingIdentity();
      stack.moveTaskToBackLocked(taskId,null);
      Binder.restoreCallingIdentity(origId);
    }
  }
}
