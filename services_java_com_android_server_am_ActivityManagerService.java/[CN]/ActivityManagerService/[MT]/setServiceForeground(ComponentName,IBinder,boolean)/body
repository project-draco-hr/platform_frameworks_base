{
synchronized (this) {
    ServiceRecord r=findServiceLocked(className,token);
    if (r != null) {
      if (r.isForeground != isForeground) {
        final long origId=Binder.clearCallingIdentity();
        r.isForeground=isForeground;
        if (r.app != null) {
          updateServiceForegroundLocked(r.app,true);
        }
        Binder.restoreCallingIdentity(origId);
      }
    }
  }
}
