{
  boolean anyForeground=false;
  for (  ServiceRecord sr : (HashSet<ServiceRecord>)proc.services) {
    if (sr.isForeground) {
      anyForeground=true;
      break;
    }
  }
  if (anyForeground != proc.foregroundServices) {
    proc.foregroundServices=anyForeground;
    if (oomAdj) {
      updateOomAdjLocked();
    }
  }
}
