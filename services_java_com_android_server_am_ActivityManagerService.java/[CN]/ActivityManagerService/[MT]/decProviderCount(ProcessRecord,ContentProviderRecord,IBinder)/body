{
  if (r != null) {
    Integer cnt=r.conProviders.get(cpr);
    if (DEBUG_PROVIDER)     Slog.v(TAG,"Removing provider requested by " + r.processName + " from process "+ cpr.info.processName+ ": "+ cpr.name.flattenToShortString()+ " cnt="+ cnt);
    if (cnt == null || cnt.intValue() <= 1) {
      cpr.clients.remove(r);
      r.conProviders.remove(cpr);
      return true;
    }
 else {
      r.conProviders.put(cpr,new Integer(cnt.intValue() - 1));
    }
  }
 else {
    cpr.removeExternalProcessHandleLocked(externalProcessToken);
  }
  return false;
}
