{
  try {
    ActivityManagerService m=mSelf;
    ServiceManager.addService("activity",m);
    ServiceManager.addService("meminfo",new MemBinder(m));
    if (MONITOR_CPU_USAGE) {
      ServiceManager.addService("cpuinfo",new CpuBinder(m));
    }
    ServiceManager.addService("permission",new PermissionController(m));
    ApplicationInfo info=mSelf.mContext.getPackageManager().getApplicationInfo("android",STOCK_PM_FLAGS);
    mSystemThread.installSystemApplicationInfo(info);
synchronized (mSelf) {
      ProcessRecord app=mSelf.newProcessRecordLocked(mSystemThread.getApplicationThread(),info,info.processName);
      app.persistent=true;
      app.pid=Process.myPid();
      app.maxAdj=SYSTEM_ADJ;
      mSelf.mProcessNames.put(app.processName,app.info.uid,app);
synchronized (mSelf.mPidsSelfLocked) {
        mSelf.mPidsSelfLocked.put(app.pid,app);
      }
      mSelf.updateLruProcessLocked(app,true,true);
    }
  }
 catch (  PackageManager.NameNotFoundException e) {
    throw new RuntimeException("Unable to find android system package",e);
  }
}
