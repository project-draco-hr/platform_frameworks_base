{
  if (providers == null) {
    return;
  }
synchronized (this) {
    final ProcessRecord r=getRecordForAppLocked(caller);
    if (r == null) {
      throw new SecurityException("Unable to find app for caller " + caller + " (pid="+ Binder.getCallingPid()+ ") when publishing content providers");
    }
    final long origId=Binder.clearCallingIdentity();
    final int N=providers.size();
    for (int i=0; i < N; i++) {
      ContentProviderHolder src=providers.get(i);
      if (src == null || src.info == null || src.provider == null) {
        continue;
      }
      ContentProviderRecord dst=(ContentProviderRecord)r.pubProviders.get(src.info.name);
      if (dst != null) {
        dst.provider=src.provider;
        dst.app=r;
        mProvidersByClass.put(dst.info.name,dst);
        String names[]=dst.info.authority.split(";");
        for (int j=0; j < names.length; j++) {
          mProvidersByName.put(names[j],dst);
        }
        int NL=mLaunchingProviders.size();
        int j;
        for (j=0; j < NL; j++) {
          if (mLaunchingProviders.get(j) == dst) {
            mLaunchingProviders.remove(j);
            j--;
            NL--;
          }
        }
synchronized (dst) {
          dst.notifyAll();
        }
        updateOomAdjLocked(r);
      }
    }
    Binder.restoreCallingIdentity(origId);
  }
}
