{
  if (localLOGV)   Slog.v(TAG,"Activity stopped: token=" + token);
  if (icicle != null && icicle.hasFileDescriptors()) {
    throw new IllegalArgumentException("File descriptors passed in Bundle");
  }
  ActivityRecord r=null;
  final long origId=Binder.clearCallingIdentity();
synchronized (this) {
    r=mMainStack.isInStackLocked(token);
    if (r != null) {
      r.stack.activityStoppedLocked(r,icicle,thumbnail,description);
    }
  }
  if (r != null) {
    sendPendingThumbnail(r,null,null,null,false);
  }
  trimApplications();
  Binder.restoreCallingIdentity(origId);
}
