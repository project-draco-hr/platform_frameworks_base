{
synchronized (this) {
    enforceCallingPermission(android.Manifest.permission.READ_FRAME_BUFFER,"getTaskThumbnail()");
    ActivityRecord resumed=mMainStack.mResumedActivity;
    final int N=mRecentTasks.size();
    for (int i=0; i < N; i++) {
      TaskRecord tr=mRecentTasks.get(i);
      if (tr.taskId == id) {
        if (resumed != null && resumed.task == tr) {
          return resumed.stack.screenshotActivities(resumed);
        }
 else {
          return tr.lastThumbnail;
        }
      }
    }
  }
  return null;
}
