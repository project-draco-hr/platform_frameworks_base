{
synchronized (this) {
    if (!mExternallyEnabled) {
      if (DEBUG)       Log.d(TAG,"doKeyguard: not showing because externally disabled");
      return;
    }
    if (mKeyguardViewManager.isShowing()) {
      if (DEBUG)       Log.d(TAG,"doKeyguard: not showing because it is already showing");
      return;
    }
    final boolean requireSim=!SystemProperties.getBoolean("keyguard.no_require_sim",false);
    final boolean provisioned=mUpdateMonitor.isDeviceProvisioned();
    final IccCard.State state=mUpdateMonitor.getSimState();
    final boolean lockedOrMissing=state.isPinLocked() || ((state == IccCard.State.ABSENT || state == IccCard.State.PERM_DISABLED) && requireSim);
    if (!lockedOrMissing && !provisioned) {
      if (DEBUG)       Log.d(TAG,"doKeyguard: not showing because device isn't provisioned" + " and the sim is not locked or missing");
      return;
    }
    if (mLockPatternUtils.isLockScreenDisabled()) {
      if (DEBUG)       Log.d(TAG,"doKeyguard: not showing because lockscreen is off");
      return;
    }
    if (DEBUG)     Log.d(TAG,"doKeyguard: showing the lock screen");
    showLocked();
  }
}
