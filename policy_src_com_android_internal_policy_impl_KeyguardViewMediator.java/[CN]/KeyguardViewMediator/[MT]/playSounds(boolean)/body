{
  if (mSuppressNextLockSound) {
    mSuppressNextLockSound=false;
    return;
  }
  final ContentResolver cr=mContext.getContentResolver();
  if (Settings.System.getInt(cr,Settings.System.LOCKSCREEN_SOUNDS_ENABLED,1) == 1) {
    final int whichSound=locked ? mLockSoundId : mUnlockSoundId;
    mLockSounds.stop(mLockSoundStreamId);
    if (mAudioManager == null) {
      mAudioManager=(AudioManager)mContext.getSystemService(Context.AUDIO_SERVICE);
      if (mAudioManager == null)       return;
      mMasterStreamMaxVolume=mAudioManager.getStreamMaxVolume(MASTER_STREAM_TYPE);
    }
    if (mAudioManager.isStreamMute(MASTER_STREAM_TYPE))     return;
    float lockSoundVolume;
    int masterStreamVolume=mAudioManager.getStreamVolume(MASTER_STREAM_TYPE);
    if (masterStreamVolume == 0) {
      return;
    }
 else {
      lockSoundVolume=MIN_LOCK_VOLUME + (MAX_LOCK_VOLUME - MIN_LOCK_VOLUME) * ((float)masterStreamVolume / mMasterStreamMaxVolume);
    }
    mLockSoundStreamId=mLockSounds.play(whichSound,lockSoundVolume,lockSoundVolume,1,0,1.0f);
  }
}
