{
  int childVisibility=child.getVisibility();
  boolean wasVisible=childVisibility == View.VISIBLE;
  final float alpha=viewState.alpha;
  if (!wasVisible && alpha != 0 && !viewState.gone) {
    child.setVisibility(View.VISIBLE);
  }
  boolean yTranslationChanging=child.getTranslationY() != viewState.yTranslation;
  boolean zTranslationChanging=child.getTranslationZ() != viewState.zTranslation;
  boolean scaleChanging=child.getScaleX() != viewState.scale;
  boolean alphaChanging=alpha != child.getAlpha();
  boolean heightChanging=viewState.height != child.getActualHeight();
  boolean topInsetChanging=viewState.clipTopAmount != child.getClipTopAmount();
  boolean wasAdded=mNewAddChildren.contains(child);
  boolean hasDelays=mAnimationFilter.hasDelays;
  boolean isDelayRelevant=yTranslationChanging || zTranslationChanging || scaleChanging|| alphaChanging|| heightChanging|| topInsetChanging;
  long delay=0;
  long duration=mCurrentLength;
  if (hasDelays && isDelayRelevant || wasAdded) {
    delay=calculateChildAnimationDelay(viewState,finalState);
  }
  if (wasAdded && mAnimationFilter.hasGoToFullShadeEvent) {
    child.setTranslationY(child.getTranslationY() + mGoToFullShadeAppearingTranslation);
    yTranslationChanging=true;
    float longerDurationFactor=viewState.notGoneIndex - mCurrentLastNotAddedIndex;
    longerDurationFactor=(float)Math.pow(longerDurationFactor,0.7f);
    duration=ANIMATION_DURATION_APPEAR_DISAPPEAR + 50 + (long)(100 * longerDurationFactor);
  }
  if (yTranslationChanging) {
    startYTranslationAnimation(child,viewState,duration,delay);
  }
  if (zTranslationChanging) {
    startZTranslationAnimation(child,viewState,duration,delay);
  }
  if (scaleChanging) {
    startScaleAnimation(child,viewState,duration);
  }
  if (alphaChanging && child.getTranslationX() == 0) {
    startAlphaAnimation(child,viewState,duration,delay);
  }
  if (heightChanging) {
    startHeightAnimation(child,viewState,duration,delay);
  }
  if (topInsetChanging) {
    startInsetAnimation(child,viewState,duration,delay);
  }
  child.setDimmed(viewState.dimmed,mAnimationFilter.animateDimmed && !wasAdded);
  child.setDark(viewState.dark,mAnimationFilter.animateDark);
  child.setBelowSpeedBump(viewState.belowSpeedBump);
  child.setScrimAmount(viewState.scrimAmount);
  if (wasAdded) {
    child.performAddAnimation(delay,mCurrentLength);
  }
}
