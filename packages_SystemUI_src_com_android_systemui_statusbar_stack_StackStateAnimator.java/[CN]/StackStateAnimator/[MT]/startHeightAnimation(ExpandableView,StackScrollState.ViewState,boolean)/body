{
  Integer previousEndValue=getChildTag(child,TAG_END_HEIGHT);
  if (previousEndValue != null && previousEndValue == viewState.height) {
    return;
  }
  ValueAnimator previousAnimator=getChildTag(child,TAG_ANIMATOR_HEIGHT);
  long newDuration=cancelAnimatorAndGetNewDuration(previousAnimator,hasNewEvents);
  if (newDuration <= 0) {
    if (previousAnimator == null) {
      child.setActualHeight(viewState.height);
    }
    return;
  }
  ValueAnimator animator=ValueAnimator.ofInt(child.getActualHeight(),viewState.height);
  animator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener(){
    @Override public void onAnimationUpdate(    ValueAnimator animation){
      child.setActualHeight((int)animation.getAnimatedValue());
    }
  }
);
  animator.setInterpolator(mFastOutSlowInInterpolator);
  animator.setDuration(newDuration);
  animator.addListener(getGlobalAnimationFinishedListener());
  animator.addListener(new AnimatorListenerAdapter(){
    @Override public void onAnimationEnd(    Animator animation){
      child.setTag(TAG_ANIMATOR_HEIGHT,null);
      child.setTag(TAG_END_HEIGHT,null);
    }
  }
);
  animator.start();
  child.setTag(TAG_ANIMATOR_HEIGHT,animator);
  child.setTag(TAG_END_HEIGHT,viewState.height);
}
