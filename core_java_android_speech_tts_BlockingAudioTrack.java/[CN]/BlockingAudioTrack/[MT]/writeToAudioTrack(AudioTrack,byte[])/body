{
  if (audioTrack.getPlayState() != AudioTrack.PLAYSTATE_PLAYING) {
    if (DBG)     Log.d(TAG,"AudioTrack not playing, restarting : " + audioTrack.hashCode());
    audioTrack.play();
  }
  int count=0;
  while (count < bytes.length) {
    int written=audioTrack.write(bytes,count,bytes.length);
    if (written <= 0) {
      break;
    }
    count+=written;
  }
  return count;
}
