{
  AudioTrack track=null;
synchronized (mAudioTrackLock) {
    track=mAudioTrack;
  }
  if (track == null) {
    if (DBG)     Log.d(TAG,"Audio track null [duplicate call to waitAndRelease ?]");
    return;
  }
  if (mBytesWritten < mAudioBufferSize && !mStopped) {
    if (DBG) {
      Log.d(TAG,"Stopping audio track to flush audio, state was : " + track.getPlayState() + ",stopped= "+ mStopped);
    }
    mIsShortUtterance=true;
    track.stop();
  }
  if (!mStopped) {
    if (DBG)     Log.d(TAG,"Waiting for audio track to complete : " + mAudioTrack.hashCode());
    blockUntilDone(mAudioTrack);
  }
  if (DBG)   Log.d(TAG,"Releasing audio track [" + track.hashCode() + "]");
synchronized (mAudioTrackLock) {
    mAudioTrack=null;
  }
  track.release();
}
