{
  if (DBG)   Log.d(TAG,"done()");
synchronized (mStateLock) {
    if (mWriteErrorOccured) {
      if (DBG)       Log.d(TAG,"Error writing to audio track, count < 0");
      return TextToSpeech.ERROR;
    }
    if (mStopped) {
      if (DBG)       Log.d(TAG,"Request has been aborted.");
      return TextToSpeech.ERROR;
    }
    if (mAudioTrack == null) {
      Log.e(TAG,"done(): Not started");
      return TextToSpeech.ERROR;
    }
    mDone=true;
    cleanUp();
  }
  return TextToSpeech.SUCCESS;
}
