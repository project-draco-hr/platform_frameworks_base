{
  final Resources res=mContext.getResources();
  Slog.d(TAG,"plugged=" + plugged);
  int height=-1;
  if (plugged) {
    final DisplayMetrics metrics=new DisplayMetrics();
    mWindowManager.getDefaultDisplay().getMetrics(metrics);
    Slog.d(TAG,"metrics=" + metrics);
    height=metrics.heightPixels - 720;
  }
  final int minHeight=res.getDimensionPixelSize(com.android.internal.R.dimen.status_bar_height);
  if (height < minHeight) {
    height=minHeight;
  }
  Slog.d(TAG,"using height=" + height + " old="+ mHeight);
  mHeight=height;
  final int N=mListeners.size();
  for (int i=0; i < N; i++) {
    mListeners.get(i).onBarHeightChanged(height);
  }
}
