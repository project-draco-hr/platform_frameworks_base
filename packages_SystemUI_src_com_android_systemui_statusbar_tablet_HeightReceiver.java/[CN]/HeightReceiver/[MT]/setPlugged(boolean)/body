{
  final Resources res=mContext.getResources();
  int height=-1;
  if (plugged) {
    final DisplayMetrics metrics=new DisplayMetrics();
    mWindowManager.getDefaultDisplay().getRealMetrics(metrics);
    final int shortSide=Math.min(metrics.widthPixels,metrics.heightPixels);
    height=shortSide - 720;
  }
  final int minHeight=res.getDimensionPixelSize(com.android.internal.R.dimen.status_bar_height);
  if (height < minHeight) {
    height=minHeight;
  }
  Slog.i(TAG,"Resizing status bar plugged=" + plugged + " height="+ height+ " old="+ mHeight);
  mHeight=height;
  final int N=mListeners.size();
  for (int i=0; i < N; i++) {
    mListeners.get(i).onBarHeightChanged(height);
  }
}
