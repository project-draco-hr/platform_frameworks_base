{
  int subDeviceCount=nativeGetSubdeviceCount(card,device);
  if (subDeviceCount <= 0) {
    Log.e(TAG,"nativeGetSubdeviceCount failed");
    return null;
  }
  UsbMidiDevice midiDevice=new UsbMidiDevice(card,device,subDeviceCount);
  if (!midiDevice.register(context,properties)) {
    IoUtils.closeQuietly(midiDevice);
    Log.e(TAG,"createDeviceServer failed");
    return null;
  }
  return midiDevice;
}
