{
  FileInputStream inputStream=mInputStreams[index];
  if (inputStream.read(buffer,0,1) != 1) {
    Log.e(TAG,"could not read command byte");
    return -1;
  }
  int dataSize=MidiUtils.getMessageDataSize(buffer[0]);
  if (dataSize < 0) {
    return -1;
  }
  if (dataSize > 0) {
    if (inputStream.read(buffer,1,dataSize) != dataSize) {
      Log.e(TAG,"could not read command data");
      return -1;
    }
  }
  return dataSize + 1;
}
