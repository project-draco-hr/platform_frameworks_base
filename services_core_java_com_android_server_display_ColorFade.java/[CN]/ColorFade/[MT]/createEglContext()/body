{
  if (mEglDisplay == null) {
    mEglDisplay=EGL14.eglGetDisplay(EGL14.EGL_DEFAULT_DISPLAY);
    if (mEglDisplay == EGL14.EGL_NO_DISPLAY) {
      logEglError("eglGetDisplay");
      return false;
    }
    int[] version=new int[2];
    if (!EGL14.eglInitialize(mEglDisplay,version,0,version,1)) {
      mEglDisplay=null;
      logEglError("eglInitialize");
      return false;
    }
  }
  if (mEglConfig == null) {
    int[] eglConfigAttribList=new int[]{EGL14.EGL_RENDERABLE_TYPE,EGL14.EGL_OPENGL_ES2_BIT,EGL14.EGL_RED_SIZE,8,EGL14.EGL_GREEN_SIZE,8,EGL14.EGL_BLUE_SIZE,8,EGL14.EGL_ALPHA_SIZE,8,EGL14.EGL_NONE};
    int[] numEglConfigs=new int[1];
    EGLConfig[] eglConfigs=new EGLConfig[1];
    if (!EGL14.eglChooseConfig(mEglDisplay,eglConfigAttribList,0,eglConfigs,0,eglConfigs.length,numEglConfigs,0)) {
      logEglError("eglChooseConfig");
      return false;
    }
    if (numEglConfigs[0] <= 0) {
      Slog.e(TAG,"no valid config found");
      return false;
    }
    mEglConfig=eglConfigs[0];
  }
  if (mEglContext == null) {
    int[] eglContextAttribList=new int[]{EGL14.EGL_CONTEXT_CLIENT_VERSION,2,EGL14.EGL_NONE};
    mEglContext=EGL14.eglCreateContext(mEglDisplay,mEglConfig,EGL14.EGL_NO_CONTEXT,eglContextAttribList,0);
    if (mEglContext == null) {
      logEglError("eglCreateContext");
      return false;
    }
  }
  return true;
}
