{
  mState=new State();
  final Intent intent=getIntent();
  mState.action=State.ACTION_BROWSE_ALL;
  mState.acceptMimes=new String[]{"*/*"};
  mState.allowMultiple=true;
  mState.acceptMimes=new String[]{intent.getType()};
  mState.localOnly=intent.getBooleanExtra(Intent.EXTRA_LOCAL_ONLY,false);
  mState.forceAdvanced=intent.getBooleanExtra(DocumentsContract.EXTRA_SHOW_ADVANCED,false);
  mState.showAdvanced=mState.forceAdvanced | LocalPreferences.getDisplayAdvancedDevices(this);
  mState.showSize=true;
  final DocumentStack stack=intent.getParcelableExtra(CopyService.EXTRA_STACK);
  if (stack != null)   mState.stack=stack;
}
