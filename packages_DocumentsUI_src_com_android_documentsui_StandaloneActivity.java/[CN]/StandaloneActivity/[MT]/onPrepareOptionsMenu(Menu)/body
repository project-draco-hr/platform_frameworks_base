{
  boolean shown=super.onPrepareOptionsMenu(menu);
  final MenuItem createDir=menu.findItem(R.id.menu_create_dir);
  final MenuItem advanced=menu.findItem(R.id.menu_advanced);
  final MenuItem fileSize=menu.findItem(R.id.menu_file_size);
  final MenuItem settings=menu.findItem(R.id.menu_settings);
  boolean canCreateDir=canCreateDirectory();
  createDir.setShowAsAction(MenuItem.SHOW_AS_ACTION_NEVER);
  createDir.setVisible(canCreateDir);
  fileSize.setVisible(true);
  advanced.setVisible(true);
  settings.setVisible((getCurrentRoot().flags & Root.FLAG_HAS_SETTINGS) != 0);
  return shown;
}
