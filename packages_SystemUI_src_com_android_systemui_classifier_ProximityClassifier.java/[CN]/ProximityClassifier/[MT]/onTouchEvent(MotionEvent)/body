{
  int action=event.getActionMasked();
  if (action == MotionEvent.ACTION_DOWN) {
    mGestureStartTimeNano=event.getEventTimeNano();
    mNearStartTimeNano=event.getEventTimeNano();
    mNearDuration=0;
  }
  if (action == MotionEvent.ACTION_UP || action == MotionEvent.ACTION_CANCEL) {
    update(mNear,event.getEventTimeNano());
    long duration=event.getEventTimeNano() - mGestureStartTimeNano;
    if (duration == 0) {
      mAverageNear=mNear ? 1.0f : 0.0f;
    }
 else {
      mAverageNear=(float)mNearDuration / (float)duration;
    }
  }
}
