{
  final boolean persistable=(modeFlags & Intent.FLAG_GRANT_PERSISTABLE_URI_PERMISSION) != 0;
  modeFlags&=(Intent.FLAG_GRANT_READ_URI_PERMISSION | Intent.FLAG_GRANT_WRITE_URI_PERMISSION);
  final int before=persistedModeFlags;
  if ((modeFlags & Intent.FLAG_GRANT_READ_URI_PERMISSION) != 0) {
    if (persistable) {
      persistableModeFlags&=~Intent.FLAG_GRANT_READ_URI_PERMISSION;
      persistedModeFlags&=~Intent.FLAG_GRANT_READ_URI_PERMISSION;
    }
    globalModeFlags&=~Intent.FLAG_GRANT_READ_URI_PERMISSION;
    if (mReadOwners != null) {
      ownedModeFlags&=~Intent.FLAG_GRANT_READ_URI_PERMISSION;
      for (      UriPermissionOwner r : mReadOwners) {
        r.removeReadPermission(this);
      }
      mReadOwners=null;
    }
  }
  if ((modeFlags & Intent.FLAG_GRANT_WRITE_URI_PERMISSION) != 0) {
    if (persistable) {
      persistableModeFlags&=~Intent.FLAG_GRANT_WRITE_URI_PERMISSION;
      persistedModeFlags&=~Intent.FLAG_GRANT_WRITE_URI_PERMISSION;
    }
    globalModeFlags&=~Intent.FLAG_GRANT_WRITE_URI_PERMISSION;
    if (mWriteOwners != null) {
      ownedModeFlags&=~Intent.FLAG_GRANT_WRITE_URI_PERMISSION;
      for (      UriPermissionOwner r : mWriteOwners) {
        r.removeWritePermission(this);
      }
      mWriteOwners=null;
    }
  }
  if (persistedModeFlags == 0) {
    persistedCreateTime=INVALID_TIME;
  }
  updateModeFlags();
  return persistedModeFlags != before;
}
