{
  expectRulesChanged(UID_A,RULE_ALLOW_ALL);
  replay();
  mService.setUidPolicy(UID_A,POLICY_NONE);
  mProcessObserver.onForegroundActivitiesChanged(PID_1,UID_A,false);
  verifyAndReset();
  expectRulesChanged(UID_A,RULE_REJECT_METERED);
  replay();
  mService.setUidPolicy(UID_A,POLICY_REJECT_METERED_BACKGROUND);
  verifyAndReset();
  expectRulesChanged(UID_A,RULE_ALLOW_ALL);
  replay();
  mService.setUidPolicy(UID_A,POLICY_NONE);
  verifyAndReset();
}
