{
  final int action=message.what;
switch (action) {
case MSG_ON_CREATE_PRINTER_DISCOVERY_SESSION:
{
      IPrinterDiscoverySessionObserver observer=(IPrinterDiscoverySessionObserver)message.obj;
      PrinterDiscoverySession session=onCreatePrinterDiscoverySession();
      if (session == null) {
        throw new NullPointerException("session cannot be null");
      }
synchronized (mLock) {
        if (session.getId() == mLastSessionId) {
          throw new IllegalStateException("cannot reuse sessions");
        }
        mLastSessionId=session.getId();
      }
      session.setObserver(observer);
    }
  break;
case MSG_ON_REQUEST_CANCEL_PRINTJOB:
{
  PrintJobInfo printJobInfo=(PrintJobInfo)message.obj;
  onRequestCancelPrintJob(new PrintJob(printJobInfo,mClient));
}
break;
case MSG_ON_PRINTJOB_QUEUED:
{
PrintJobInfo printJobInfo=(PrintJobInfo)message.obj;
onPrintJobQueued(new PrintJob(printJobInfo,mClient));
}
break;
case MSG_SET_CLEINT:
{
IPrintServiceClient client=(IPrintServiceClient)message.obj;
synchronized (mLock) {
mClient=client;
}
if (client != null) {
onConnected();
}
 else {
onDisconnected();
}
}
break;
default :
{
throw new IllegalArgumentException("Unknown message: " + action);
}
}
}
