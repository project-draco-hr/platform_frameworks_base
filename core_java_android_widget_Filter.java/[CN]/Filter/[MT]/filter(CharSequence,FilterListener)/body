{
synchronized (this) {
    String constraintAsString=constraint != null ? constraint.toString() : null;
    if (mConstraintIsValid && ((constraintAsString == null && mConstraint == null) || (constraintAsString != null && constraintAsString.equals(mConstraint)))) {
      return;
    }
    if (mThreadHandler == null) {
      HandlerThread thread=new HandlerThread(THREAD_NAME);
      thread.start();
      mThreadHandler=new RequestHandler(thread.getLooper());
    }
    Message message=mThreadHandler.obtainMessage(FILTER_TOKEN);
    RequestArguments args=new RequestArguments();
    args.constraint=constraintAsString;
    args.listener=listener;
    message.obj=args;
    mThreadHandler.removeMessages(FILTER_TOKEN);
    mThreadHandler.removeMessages(FINISH_TOKEN);
    mThreadHandler.sendMessage(message);
    mConstraint=constraintAsString;
    mConstraintIsValid=true;
  }
}
