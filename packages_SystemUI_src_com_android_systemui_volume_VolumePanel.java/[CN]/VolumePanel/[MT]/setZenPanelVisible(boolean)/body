{
  if (LOGD)   Log.d(mTag,"setZenPanelVisible " + visible + " mZenPanel="+ mZenPanel);
  if (visible) {
    if (mZenPanel == null) {
      mZenPanel=(ZenModePanel)mZenPanelStub.inflate();
      mZenPanel.init(mZenController,mDialog != null ? 'D' : 'E');
      mZenPanel.setCallback(new ZenModePanel.Callback(){
        @Override public void onMoreSettings(){
          if (mCallback != null) {
            mCallback.onZenSettings();
          }
        }
        @Override public void onInteraction(){
          resetTimeout();
        }
        @Override public void onExpanded(        boolean expanded){
          mTimeoutDelay=expanded ? TIMEOUT_DELAY_EXPANDED : TIMEOUT_DELAY;
          resetTimeout();
        }
      }
);
    }
    mZenPanel.setVisibility(View.VISIBLE);
    resetTimeout();
  }
 else {
    if (mZenPanel != null) {
      mZenPanel.setVisibility(View.GONE);
    }
    mTimeoutDelay=TIMEOUT_DELAY;
    resetTimeout();
  }
}
