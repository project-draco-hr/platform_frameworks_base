{
  RecentsConfiguration config=Recents.getConfiguration();
  RecentsActivityLaunchState launchState=config.getLaunchState();
  if (!multiWindowChange && (mTaskStackView == null || !launchState.launchedReuseTaskStackViews)) {
    isResumingFromVisible=false;
    removeView(mTaskStackView);
    mTaskStackView=new TaskStackView(getContext());
    mTaskStackView.setSystemInsets(mSystemInsets);
    mStack=mTaskStackView.getStack();
    addView(mTaskStackView);
  }
  mAwaitingFirstLayout=!isResumingFromVisible;
  mLastTaskLaunchedWasFreeform=false;
  mTaskStackView.onResume(isResumingFromVisible);
  mTaskStackView.setTasks(stack,isResumingFromVisible,true,multiWindowChange);
  if (isResumingFromVisible) {
    animateBackgroundScrim(DEFAULT_SCRIM_ALPHA,DEFAULT_UPDATE_SCRIM_DURATION);
  }
 else {
    if (launchState.launchedWhileDocking || launchState.launchedFromApp || mStack.getTaskCount() == 0) {
      mBackgroundScrim.setAlpha((int)(DEFAULT_SCRIM_ALPHA * 255));
    }
 else {
      mBackgroundScrim.setAlpha(0);
    }
  }
  if (stack.getTaskCount() > 0) {
    hideEmptyView();
  }
 else {
    showEmptyView(R.string.recents_empty_message);
  }
}
