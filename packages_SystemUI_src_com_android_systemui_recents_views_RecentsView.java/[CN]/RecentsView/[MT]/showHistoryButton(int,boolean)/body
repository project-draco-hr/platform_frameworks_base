{
  final ReferenceCountedTrigger postAnimationTrigger=new ReferenceCountedTrigger();
  if (mHistoryButton.getVisibility() == View.INVISIBLE) {
    mHistoryButton.setVisibility(View.VISIBLE);
    mHistoryButton.setAlpha(0f);
    if (translate) {
      mHistoryButton.setTranslationY(-mHistoryButton.getMeasuredHeight() * 0.25f);
    }
 else {
      mHistoryButton.setTranslationY(0f);
    }
    postAnimationTrigger.addLastDecrementRunnable(new Runnable(){
      @Override public void run(){
        if (translate) {
          mHistoryButton.animate().translationY(0f);
        }
        mHistoryButton.animate().alpha(1f).setDuration(duration).setInterpolator(mFastOutSlowInInterpolator).withLayer().start();
      }
    }
);
  }
  postAnimationTrigger.flushLastDecrementRunnables();
}
