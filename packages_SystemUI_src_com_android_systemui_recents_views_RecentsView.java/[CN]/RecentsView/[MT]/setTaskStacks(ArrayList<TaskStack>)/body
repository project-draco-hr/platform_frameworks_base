{
  int numStacks=stacks.size();
  ArrayList<TaskStackView> stackViews=new ArrayList<TaskStackView>();
  int childCount=getChildCount();
  for (int i=0; i < childCount; i++) {
    View child=getChildAt(i);
    if (child != mSearchBar) {
      stackViews.add((TaskStackView)child);
    }
  }
  int numTaskStacksToKeep=0;
  if (mConfig.launchedReuseTaskStackViews) {
    numTaskStacksToKeep=Math.min(childCount,numStacks);
  }
  for (int i=stackViews.size() - 1; i >= numTaskStacksToKeep; i--) {
    removeView(stackViews.get(i));
    stackViews.remove(i);
  }
  for (int i=0; i < numTaskStacksToKeep; i++) {
    TaskStackView tsv=stackViews.get(i);
    tsv.reset();
    tsv.setStack(stacks.get(i));
  }
  mStacks=stacks;
  for (int i=stackViews.size(); i < numStacks; i++) {
    TaskStack stack=stacks.get(i);
    TaskStackView stackView=new TaskStackView(getContext(),stack);
    stackView.setCallbacks(this);
    addView(stackView);
  }
  if (mConfig.debugModeEnabled) {
    for (int i=childCount - 1; i >= 0; i--) {
      View v=getChildAt(i);
      if (v != mSearchBar) {
        TaskStackView stackView=(TaskStackView)v;
        stackView.setDebugOverlay(mDebugOverlay);
      }
    }
  }
  requestLayout();
}
