{
  int numStacks=stacks.size();
  ArrayList<TaskStackView> stackViewsList=new ArrayList<TaskStackView>();
  List<TaskStackView> stackViews=getTaskStackViews();
  int numTaskStacksToKeep=0;
  if (mConfig.launchedReuseTaskStackViews) {
    numTaskStacksToKeep=Math.min(stackViews.size(),numStacks);
  }
  for (int i=stackViews.size() - 1; i >= numTaskStacksToKeep; i--) {
    removeView(stackViews.get(i));
    stackViews.remove(i);
  }
  stackViewsList.addAll(stackViews);
  for (int i=0; i < numTaskStacksToKeep; i++) {
    TaskStackView tsv=stackViews.get(i);
    tsv.reset();
    tsv.setStack(stacks.get(i));
  }
  mStacks=stacks;
  for (int i=stackViews.size(); i < numStacks; i++) {
    TaskStack stack=stacks.get(i);
    TaskStackView stackView=new TaskStackView(getContext(),stack);
    stackView.setCallbacks(this);
    addView(stackView);
    stackViewsList.add(stackView);
  }
  mImmutableTaskStackViews=Collections.unmodifiableList(stackViewsList);
  if (mConfig.debugModeEnabled) {
    for (int i=mImmutableTaskStackViews.size() - 1; i >= 0; i--) {
      TaskStackView stackView=mImmutableTaskStackViews.get(i);
      stackView.setDebugOverlay(mDebugOverlay);
    }
  }
  if (mMultiStackDebugView != null) {
    mMultiStackDebugView.bringToFront();
  }
  requestLayout();
}
