{
  super(context,attrs,defStyleAttr,defStyleRes);
  setWillNotDraw(false);
  SystemServicesProxy ssp=Recents.getSystemServices();
  mHandler=new Handler();
  mTransitionHelper=new RecentsTransitionHelper(getContext(),mHandler);
  mDividerSize=ssp.getDockedDividerSize(context);
  mTouchHandler=new RecentsViewTouchHandler(this);
  mFlingAnimationUtils=new FlingAnimationUtils(context,0.3f);
  final float cornerRadius=context.getResources().getDimensionPixelSize(R.dimen.recents_task_view_rounded_corners_radius);
  LayoutInflater inflater=LayoutInflater.from(context);
  if (RecentsDebugFlags.Static.EnableHistory) {
    mHistoryButton=(TextView)inflater.inflate(R.layout.recents_history_button,this,false);
    mHistoryButton.setOnClickListener(new View.OnClickListener(){
      @Override public void onClick(      View v){
        EventBus.getDefault().send(new ToggleHistoryEvent());
      }
    }
);
    addView(mHistoryButton);
    mHistoryButton.setClipToOutline(true);
    mHistoryButton.setOutlineProvider(new ViewOutlineProvider(){
      @Override public void getOutline(      View view,      Outline outline){
        outline.setRoundRect(0,0,view.getWidth(),view.getHeight(),cornerRadius);
      }
    }
);
  }
  mEmptyView=(TextView)inflater.inflate(R.layout.recents_empty,this,false);
  addView(mEmptyView);
  setBackground(mBackgroundScrim);
}
