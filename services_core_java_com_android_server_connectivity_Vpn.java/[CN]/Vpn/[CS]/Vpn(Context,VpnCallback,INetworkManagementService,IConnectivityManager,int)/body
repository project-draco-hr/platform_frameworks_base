{
  super(ConnectivityManager.TYPE_VPN);
  mContext=context;
  mCallback=callback;
  mConnService=connService;
  mUserId=userId;
  try {
    netService.registerObserver(mObserver);
  }
 catch (  RemoteException e) {
    Log.wtf(TAG,"Problem registering observer",e);
  }
  if (userId == UserHandle.USER_OWNER) {
    mUserIntentReceiver=new BroadcastReceiver(){
      @Override public void onReceive(      Context context,      Intent intent){
        final String action=intent.getAction();
        final int userId=intent.getIntExtra(Intent.EXTRA_USER_HANDLE,UserHandle.USER_NULL);
        if (userId == UserHandle.USER_NULL)         return;
        if (Intent.ACTION_USER_ADDED.equals(action)) {
          onUserAdded(userId);
        }
 else         if (Intent.ACTION_USER_REMOVED.equals(action)) {
          onUserRemoved(userId);
        }
      }
    }
;
    IntentFilter intentFilter=new IntentFilter();
    intentFilter.addAction(Intent.ACTION_USER_ADDED);
    intentFilter.addAction(Intent.ACTION_USER_REMOVED);
    mContext.registerReceiverAsUser(mUserIntentReceiver,UserHandle.ALL,intentFilter,null,null);
  }
}
