{
  if (Binder.getCallingUid() != mOwnerUID || mInterface == null || mNetworkAgent == null) {
    return false;
  }
  boolean success=jniAddAddress(mInterface,address,prefixLength);
  if (success && (!mAllowIPv4 || !mAllowIPv6)) {
    try {
      InetAddress inetAddress=InetAddress.parseNumericAddress(address);
      if ((inetAddress instanceof Inet4Address) && !mAllowIPv4) {
        mAllowIPv4=true;
        mNetworkAgent.unblockAddressFamily(AF_INET);
      }
 else       if ((inetAddress instanceof Inet6Address) && !mAllowIPv6) {
        mAllowIPv6=true;
        mNetworkAgent.unblockAddressFamily(AF_INET6);
      }
    }
 catch (    IllegalArgumentException e) {
    }
  }
  return success;
}
