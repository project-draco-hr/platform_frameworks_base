{
  unregisterPackageChangeReceiverLocked();
  if (packageName != null) {
    mIsPackageIntentReceiverRegistered=true;
    IntentFilter intentFilter=new IntentFilter();
    intentFilter.addAction(Intent.ACTION_PACKAGE_REPLACED);
    intentFilter.addAction(Intent.ACTION_PACKAGE_REMOVED);
    intentFilter.addDataScheme("package");
    intentFilter.addDataSchemeSpecificPart(packageName,PatternMatcher.PATTERN_LITERAL);
    mContext.registerReceiverAsUser(mPackageIntentReceiver,UserHandle.of(mUserHandle),intentFilter,null,null);
  }
}
