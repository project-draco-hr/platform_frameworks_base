{
synchronized (Vpn.this) {
    UserManager mgr=UserManager.get(mContext);
    UserInfo user=mgr.getUserInfo(userHandle);
    if (user.isRestricted()) {
      try {
        addVpnUserLocked(userHandle);
        if (mNetworkAgent != null) {
          final List<UidRange> ranges=uidRangesForUser(userHandle);
          mNetworkAgent.addUidRanges(ranges.toArray(new UidRange[ranges.size()]));
        }
      }
 catch (      Exception e) {
        Log.wtf(TAG,"Failed to add restricted user to owner",e);
      }
    }
  }
}
