{
synchronized (Vpn.this) {
    UserManager mgr=UserManager.get(mContext);
    UserInfo user=mgr.getUserInfo(userId);
    if (user.isRestricted()) {
      try {
        addVpnUserLocked(userId);
        if (mNetworkAgent != null) {
          UidRange uidRange=UidRange.createForUser(userId);
          mNetworkAgent.addUidRanges(new UidRange[]{uidRange});
        }
      }
 catch (      Exception e) {
        Log.wtf(TAG,"Failed to add restricted user to owner",e);
      }
    }
  }
}
