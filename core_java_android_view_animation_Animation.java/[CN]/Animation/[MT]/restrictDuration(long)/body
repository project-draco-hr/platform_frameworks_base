{
  if (mStartOffset > durationMillis) {
    mStartOffset=durationMillis;
    mDuration=0;
    mRepeatCount=0;
    return;
  }
  long dur=mDuration + mStartOffset;
  if (dur > durationMillis) {
    mDuration=dur=durationMillis - mStartOffset;
  }
  if (mRepeatCount < 0 || mRepeatCount > durationMillis || (dur * mRepeatCount) > durationMillis) {
    mRepeatCount=(int)(durationMillis / dur);
  }
}
