{
  KeyState last=null;
  KeyState state=mKeyStateList;
  while (state != null) {
    if (state.deviceId == deviceId && state.source == source && state.keyCode == keyCode) {
      if (remove) {
        if (last != null) {
          last.next=state.next;
        }
 else {
          mKeyStateList=state.next;
        }
        state.next=null;
      }
      return state;
    }
    last=state;
    state=state.next;
  }
  return null;
}
