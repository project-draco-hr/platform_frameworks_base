{
  List<int[]> supportedFpsRanges=params.getSupportedPreviewFpsRange();
  int[] closestRange=supportedFpsRanges.get(0);
  for (  int[] range : supportedFpsRanges) {
    if (range[Camera.Parameters.PREVIEW_FPS_MIN_INDEX] < fps * 1000 && range[Camera.Parameters.PREVIEW_FPS_MAX_INDEX] > fps * 1000 && range[Camera.Parameters.PREVIEW_FPS_MIN_INDEX] > closestRange[Camera.Parameters.PREVIEW_FPS_MIN_INDEX] && range[Camera.Parameters.PREVIEW_FPS_MAX_INDEX] < closestRange[Camera.Parameters.PREVIEW_FPS_MAX_INDEX]) {
      closestRange=range;
    }
  }
  if (mLogVerbose)   Log.v(TAG,"Requested fps: " + fps + ".Closest frame rate range: ["+ closestRange[Camera.Parameters.PREVIEW_FPS_MIN_INDEX] / 1000. + "," + closestRange[Camera.Parameters.PREVIEW_FPS_MAX_INDEX] / 1000. + "]");
  return closestRange;
}
