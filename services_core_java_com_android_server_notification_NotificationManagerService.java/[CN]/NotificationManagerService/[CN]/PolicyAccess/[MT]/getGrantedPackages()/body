{
  final ArraySet<String> pkgs=new ArraySet<>();
  long identity=Binder.clearCallingIdentity();
  try {
    final String setting=Settings.Secure.getStringForUser(getContext().getContentResolver(),Settings.Secure.ENABLED_NOTIFICATION_POLICY_ACCESS_PACKAGES,ActivityManager.getCurrentUser());
    if (setting != null) {
      final String[] tokens=setting.split(SEPARATOR);
      for (int i=0; i < tokens.length; i++) {
        String token=tokens[i];
        if (token != null) {
          token=token.trim();
        }
        if (TextUtils.isEmpty(token)) {
          continue;
        }
        pkgs.add(token);
      }
    }
  }
  finally {
    Binder.restoreCallingIdentity(identity);
  }
  return pkgs;
}
