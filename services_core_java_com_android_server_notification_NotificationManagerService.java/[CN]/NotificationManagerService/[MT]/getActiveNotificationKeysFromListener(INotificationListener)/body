{
synchronized (mNotificationList) {
    final NotificationListenerInfo info=checkListenerTokenLocked(token);
    final ArrayList<String> keys=new ArrayList<String>();
    final int N=mNotificationList.size();
    for (int i=0; i < N; i++) {
      final StatusBarNotification sbn=mNotificationList.get(i).sbn;
      if (info.enabledAndUserMatches(sbn)) {
        keys.add(sbn.getKey());
      }
    }
    return keys.toArray(new String[keys.size()]);
  }
}
