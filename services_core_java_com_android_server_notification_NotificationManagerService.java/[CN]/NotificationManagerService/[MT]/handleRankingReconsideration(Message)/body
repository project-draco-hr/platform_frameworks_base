{
  if (!(message.obj instanceof RankingReconsideration))   return;
  RankingReconsideration recon=(RankingReconsideration)message.obj;
  recon.run();
  boolean changed;
synchronized (mNotificationList) {
    final NotificationRecord record=mNotificationsByKey.get(recon.getKey());
    if (record == null) {
      return;
    }
    int indexBefore=findNotificationRecordIndexLocked(record);
    boolean interceptBefore=record.isIntercepted();
    recon.applyChangesLocked(record);
    applyZenModeLocked(record);
    mRankingHelper.sort(mNotificationList);
    int indexAfter=findNotificationRecordIndexLocked(record);
    boolean interceptAfter=record.isIntercepted();
    changed=indexBefore != indexAfter || interceptBefore != interceptAfter;
    if (interceptBefore && !interceptAfter) {
      buzzBeepBlinkLocked(record);
    }
  }
  if (changed) {
    scheduleSendRankingUpdate();
  }
}
