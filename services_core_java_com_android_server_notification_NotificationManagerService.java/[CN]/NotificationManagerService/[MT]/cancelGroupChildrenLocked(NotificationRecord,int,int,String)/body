{
  Notification n=r.getNotification();
  if (n.getGroup() == null || (n.flags & Notification.FLAG_GROUP_SUMMARY) == 0) {
    return;
  }
  String pkg=r.sbn.getPackageName();
  int userId=r.getUserId();
  if (pkg == null) {
    if (DBG)     Log.e(TAG,"No package for group summary: " + r.getKey());
    return;
  }
  final int N=mNotificationList.size();
  for (int i=N - 1; i >= 0; i--) {
    NotificationRecord childR=mNotificationList.get(i);
    Notification childN=childR.getNotification();
    StatusBarNotification childSbn=childR.sbn;
    if (childR.getUserId() == userId && pkg.equals(childSbn.getPackageName()) && n.getGroup().equals(childN.getGroup())) {
      EventLogTags.writeNotificationCancel(callingUid,callingPid,pkg,childSbn.getId(),childSbn.getTag(),userId,0,0,REASON_GROUP_SUMMARY_CANCELED,listenerName);
      mNotificationList.remove(i);
      mNotificationsByKey.remove(childR.getKey());
      cancelNotificationLocked(childR,false,REASON_GROUP_SUMMARY_CANCELED);
    }
  }
}
