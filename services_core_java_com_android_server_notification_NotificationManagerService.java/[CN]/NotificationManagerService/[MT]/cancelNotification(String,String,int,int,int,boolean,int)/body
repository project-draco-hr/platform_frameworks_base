{
  mHandler.post(new Runnable(){
    @Override public void run(){
      EventLog.writeEvent(EventLogTags.NOTIFICATION_CANCEL,pkg,id,tag,userId,mustHaveFlags,mustNotHaveFlags);
synchronized (mNotificationList) {
        int index=indexOfNotificationLocked(pkg,tag,id,userId);
        if (index >= 0) {
          NotificationRecord r=mNotificationList.get(index);
          if ((r.getNotification().flags & mustHaveFlags) != mustHaveFlags) {
            return;
          }
          if ((r.getNotification().flags & mustNotHaveFlags) != 0) {
            return;
          }
          mNotificationList.remove(index);
          cancelNotificationLocked(r,sendDelete);
          updateLightsLocked();
        }
      }
    }
  }
);
}
