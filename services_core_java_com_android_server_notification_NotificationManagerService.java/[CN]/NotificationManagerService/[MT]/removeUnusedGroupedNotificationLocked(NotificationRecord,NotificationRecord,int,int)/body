{
  if (!ENABLE_CHILD_NOTIFICATIONS) {
    if (mListeners.notificationGroupsDesired()) {
      return false;
    }
    StatusBarNotification sbn=r.sbn;
    String group=sbn.getGroupKey();
    boolean isSummary=sbn.getNotification().isGroupSummary();
    boolean isChild=sbn.getNotification().isGroupChild();
    NotificationRecord summary=mSummaryByGroupKey.get(group);
    if (isChild && summary != null) {
      if (DBG) {
        Slog.d(TAG,"Ignoring group child " + sbn.getKey() + " due to existing summary "+ summary.getKey());
      }
      if (old != null) {
        if (DBG) {
          Slog.d(TAG,"Canceling old version of ignored group child " + sbn.getKey());
        }
        cancelNotificationLocked(old,false,REASON_GROUP_OPTIMIZATION);
      }
      return true;
    }
 else     if (isSummary) {
      cancelGroupChildrenLocked(r,callingUid,callingPid,null,REASON_GROUP_OPTIMIZATION);
    }
  }
  return false;
}
