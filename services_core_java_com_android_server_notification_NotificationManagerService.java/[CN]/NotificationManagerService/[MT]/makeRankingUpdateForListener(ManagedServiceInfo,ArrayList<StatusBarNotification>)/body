{
  int speedBumpIndex=-1;
  ArrayList<String> keys=new ArrayList<String>(sbns.size());
  ArrayList<String> dndKeys=new ArrayList<String>(sbns.size());
  for (  StatusBarNotification sbn : sbns) {
    if (!info.enabledAndUserMatches(sbn.getUserId())) {
      continue;
    }
    keys.add(sbn.getKey());
    if (sbn.getNotification().extras.getBoolean(EXTRA_INTERCEPT)) {
      dndKeys.add(sbn.getKey());
    }
    if (speedBumpIndex == -1 && sbn.getNotification().priority == Notification.PRIORITY_MIN) {
      speedBumpIndex=keys.size() - 1;
    }
  }
  String[] keysAr=keys.toArray(new String[keys.size()]);
  String[] dndKeysAr=dndKeys.toArray(new String[dndKeys.size()]);
  return new NotificationRankingUpdate(keysAr,dndKeysAr,speedBumpIndex);
}
