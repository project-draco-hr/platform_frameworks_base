{
  final int N=mNotificationList.size();
  for (int i=N - 1; i >= 0; i--) {
    NotificationRecord r=mNotificationList.get(i);
    if (!notificationMatchesUserId(r,userId)) {
      continue;
    }
    if ((r.getFlags() & (Notification.FLAG_ONGOING_EVENT | Notification.FLAG_NO_CLEAR)) == 0) {
      mNotificationList.remove(i);
      mNotificationsByKey.remove(r.sbn.getKey());
      cancelNotificationLocked(r,true);
    }
  }
  updateLightsLocked();
}
