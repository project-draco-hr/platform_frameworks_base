{
  if (mSubtitleController == null) {
    Log.e(TAG,"Should have subtitle controller already set");
    return;
  }
  TrackInfo[] tracks=getInbandTrackInfo();
synchronized (mInbandSubtitleLock) {
    SubtitleTrack[] inbandTracks=new SubtitleTrack[tracks.length];
    for (int i=0; i < tracks.length; i++) {
      if (tracks[i].getTrackType() == TrackInfo.MEDIA_TRACK_TYPE_SUBTITLE) {
        if (i < mInbandSubtitleTracks.length) {
          inbandTracks[i]=mInbandSubtitleTracks[i];
        }
 else {
          SubtitleTrack track=mSubtitleController.addTrack(tracks[i].getFormat());
          inbandTracks[i]=track;
        }
      }
    }
    mInbandSubtitleTracks=inbandTracks;
  }
  mSubtitleController.selectDefaultTrack();
}
