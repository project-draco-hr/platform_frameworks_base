{
  final String scheme=uri.getScheme();
  if (ContentResolver.SCHEME_FILE.equals(scheme)) {
    setDataSource(uri.getPath());
    return;
  }
 else   if (ContentResolver.SCHEME_CONTENT.equals(scheme) && Settings.AUTHORITY.equals(uri.getAuthority())) {
    uri=RingtoneManager.getActualDefaultRingtoneUri(context,RingtoneManager.getDefaultType(uri));
    if (uri == null) {
      throw new FileNotFoundException("Failed to resolve default ringtone");
    }
  }
  AssetFileDescriptor fd=null;
  try {
    ContentResolver resolver=context.getContentResolver();
    fd=resolver.openAssetFileDescriptor(uri,"r");
    if (fd == null) {
      return;
    }
    if (fd.getDeclaredLength() < 0) {
      setDataSource(fd.getFileDescriptor());
    }
 else {
      setDataSource(fd.getFileDescriptor(),fd.getStartOffset(),fd.getDeclaredLength());
    }
    return;
  }
 catch (  SecurityException ex) {
  }
catch (  IOException ex) {
  }
 finally {
    if (fd != null) {
      fd.close();
    }
  }
  Log.d(TAG,"Couldn't open file on client side, trying server side");
  setDataSource(uri.toString(),headers);
}
