{
  Preconditions.checkState(mState.action != ACTION_BROWSE_ALL);
  final MenuItem open=menu.findItem(R.id.menu_open);
  final MenuItem share=menu.findItem(R.id.menu_share);
  final MenuItem delete=menu.findItem(R.id.menu_delete);
  final MenuItem copyTo=menu.findItem(R.id.menu_copy_to);
  final MenuItem moveTo=menu.findItem(R.id.menu_move_to);
  final MenuItem copyToClipboard=menu.findItem(R.id.menu_copy_to_clipboard);
  final boolean manageOrBrowse=(mState.action == ACTION_MANAGE || mState.action == ACTION_BROWSE);
  open.setVisible(!manageOrBrowse);
  share.setVisible(manageOrBrowse);
  delete.setVisible(manageOrBrowse && canDelete);
  copyTo.setVisible(manageOrBrowse && dirType != TYPE_RECENT_OPEN);
  moveTo.setVisible(SystemProperties.getBoolean("debug.documentsui.enable_move",false));
  copyToClipboard.setVisible(false);
}
