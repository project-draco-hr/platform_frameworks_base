{
  final LayoutInflater inflater=LayoutInflater.from(context);
  final DisplayState state=getDisplayState(DirectoryFragment.this);
  if (state.mode == DisplayState.MODE_LIST) {
    return inflater.inflate(R.layout.item_doc_list,parent,false);
  }
 else   if (state.mode == DisplayState.MODE_GRID) {
    return inflater.inflate(R.layout.item_doc_grid,parent,false);
  }
 else {
    throw new IllegalStateException();
  }
}
