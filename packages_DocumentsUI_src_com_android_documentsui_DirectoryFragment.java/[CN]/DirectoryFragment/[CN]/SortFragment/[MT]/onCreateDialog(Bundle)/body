{
  final Context context=getActivity();
  final DisplayState state=getDisplayState(this);
  final AlertDialog.Builder builder=new AlertDialog.Builder(context);
  builder.setTitle(R.string.menu_sort);
  builder.setSingleChoiceItems(new CharSequence[]{getText(R.string.sort_name),getText(R.string.sort_date)},state.sortBy,new OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      state.sortBy=which;
      ((DirectoryFragment)getTargetFragment()).updateSortBy();
      dismiss();
    }
  }
);
  return builder.create();
}
