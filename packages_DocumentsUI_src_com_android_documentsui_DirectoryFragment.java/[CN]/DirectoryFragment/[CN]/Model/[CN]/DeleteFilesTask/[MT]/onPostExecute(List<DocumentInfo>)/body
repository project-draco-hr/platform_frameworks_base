{
  boolean hadTrouble=false;
  for (  DocumentInfo doc : docs) {
    if (!doc.isDeleteSupported()) {
      Log.w(TAG,doc + " could not be deleted.  Skipping...");
      hadTrouble=true;
      continue;
    }
    ContentProviderClient client=null;
    try {
      if (DEBUG)       Log.d(TAG,"Deleting: " + doc.displayName);
      client=DocumentsApplication.acquireUnstableProviderOrThrow(mResolver,doc.derivedUri.getAuthority());
      DocumentsContract.deleteDocument(client,doc.derivedUri);
    }
 catch (    Exception e) {
      Log.w(TAG,"Failed to delete " + doc);
      hadTrouble=true;
    }
 finally {
      ContentProviderClient.releaseQuietly(client);
    }
  }
  if (hadTrouble) {
    mListener.onError();
    if (DEBUG)     Log.d(TAG,"Deletion task completed.  Some deletions failed.");
  }
 else {
    if (DEBUG)     Log.d(TAG,"Deletion task completed successfully.");
  }
  resetDeleteData();
  mListener.onCompletion();
}
