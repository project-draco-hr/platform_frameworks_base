{
  final Context context=getActivity();
  final ContentResolver resolver=context.getContentResolver();
  new GetDocumentsTask(){
    @Override void onDocumentsReady(    List<DocumentInfo> docs){
      boolean hadTrouble=false;
      for (      DocumentInfo doc : docs) {
        if (!doc.isDeleteSupported()) {
          Log.w(TAG,"Skipping " + doc);
          hadTrouble=true;
          continue;
        }
        ContentProviderClient client=null;
        try {
          client=DocumentsApplication.acquireUnstableProviderOrThrow(resolver,doc.derivedUri.getAuthority());
          DocumentsContract.deleteDocument(client,doc.derivedUri);
        }
 catch (        Exception e) {
          Log.w(TAG,"Failed to delete " + doc);
          hadTrouble=true;
        }
 finally {
          ContentProviderClient.releaseQuietly(client);
        }
      }
      if (hadTrouble) {
        Toast.makeText(context,R.string.toast_failed_delete,Toast.LENGTH_SHORT).show();
      }
    }
  }
.execute(selected);
}
