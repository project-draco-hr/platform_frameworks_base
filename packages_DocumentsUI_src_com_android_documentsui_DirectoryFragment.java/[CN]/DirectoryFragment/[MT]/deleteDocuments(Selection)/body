{
  Context context=getActivity();
  ContentResolver resolver=context.getContentResolver();
  String message=Shared.getQuantityString(context,R.plurals.deleting,selected.size());
  mModel.markForDeletion(selected);
  Activity activity=getActivity();
  Snackbar.make(this.getView(),message,Snackbar.LENGTH_LONG).setAction(R.string.undo,new android.view.View.OnClickListener(){
    @Override public void onClick(    View view){
    }
  }
).setCallback(new Snackbar.Callback(){
    @Override public void onDismissed(    Snackbar snackbar,    int event){
      if (event == Snackbar.Callback.DISMISS_EVENT_ACTION) {
        mModel.undoDeletion();
      }
 else {
        mModel.finalizeDeletion(new Runnable(){
          @Override public void run(){
            Snackbar.make(DirectoryFragment.this.getView(),R.string.toast_failed_delete,Snackbar.LENGTH_LONG).show();
          }
        }
);
      }
    }
  }
).show();
}
