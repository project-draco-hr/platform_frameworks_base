{
  final State state=getDisplayState(this);
  if (mLastMode == state.derivedMode && mLastShowSize == state.showSize)   return;
  mLastMode=state.derivedMode;
  mLastShowSize=state.showSize;
  updateLayout(state.derivedMode);
  final int choiceMode;
  if (state.allowMultiple) {
    choiceMode=ListView.CHOICE_MODE_MULTIPLE_MODAL;
  }
 else {
    choiceMode=ListView.CHOICE_MODE_NONE;
  }
  final int thumbSize=getResources().getDimensionPixelSize(R.dimen.icon_size);
  mThumbSize=new Point(thumbSize,thumbSize);
  mRecView.setAdapter(mAdapter);
}
