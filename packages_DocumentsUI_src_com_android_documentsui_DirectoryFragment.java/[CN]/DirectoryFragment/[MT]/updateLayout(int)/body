{
  final int thumbSize;
  final LayoutManager layout;
switch (mode) {
case MODE_GRID:
    thumbSize=getResources().getDimensionPixelSize(R.dimen.grid_width);
  if (mGridLayout == null) {
    int itemPadding=getResources().getDimensionPixelSize(R.dimen.grid_item_margin);
    int viewPadding=mRecView.getPaddingLeft() + mRecView.getPaddingRight();
    int columnCount=(mRecView.getWidth() - viewPadding) / (thumbSize + itemPadding);
    mGridLayout=new GridLayoutManager(getContext(),Math.max(1,columnCount));
  }
layout=mGridLayout;
break;
case MODE_LIST:
thumbSize=getResources().getDimensionPixelSize(R.dimen.icon_size);
if (mListLayout == null) {
mListLayout=new LinearLayoutManager(getContext());
}
layout=mListLayout;
break;
case MODE_UNKNOWN:
default :
throw new IllegalArgumentException("Unsupported layout mode: " + mode);
}
mRecView.setLayoutManager(layout);
mThumbSize=new Point(thumbSize,thumbSize);
}
