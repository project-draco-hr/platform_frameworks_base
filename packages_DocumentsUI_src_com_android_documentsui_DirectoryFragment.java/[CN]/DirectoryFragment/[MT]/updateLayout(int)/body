{
  final int thumbSize;
  final LayoutManager layout;
switch (mode) {
case MODE_GRID:
    thumbSize=getResources().getDimensionPixelSize(R.dimen.grid_width);
  if (mGridLayout == null) {
    int columnCount=Math.max(1,mRecView.getWidth() / thumbSize);
    mGridLayout=new GridLayoutManager(getContext(),columnCount);
  }
layout=mGridLayout;
break;
case MODE_LIST:
thumbSize=getResources().getDimensionPixelSize(R.dimen.icon_size);
if (mListLayout == null) {
mListLayout=new LinearLayoutManager(getContext());
}
layout=mListLayout;
break;
case MODE_UNKNOWN:
default :
throw new IllegalArgumentException("Unsupported layout mode: " + mode);
}
mRecView.setLayoutManager(layout);
mThumbSize=new Point(thumbSize,thumbSize);
}
