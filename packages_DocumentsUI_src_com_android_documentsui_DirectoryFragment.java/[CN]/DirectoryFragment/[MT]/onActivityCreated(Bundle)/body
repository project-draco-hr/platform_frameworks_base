{
  super.onActivityCreated(savedInstanceState);
  final Context context=getActivity();
  final Uri uri=getArguments().getParcelable(EXTRA_URI);
  mAdapter=new DocumentsAdapter(uri.getAuthority());
  mType=getArguments().getInt(EXTRA_TYPE);
  mCallbacks=new LoaderCallbacks<DirectoryResult>(){
    @Override public Loader<DirectoryResult> onCreateLoader(    int id,    Bundle args){
      final DisplayState state=getDisplayState(DirectoryFragment.this);
      Uri contentsUri;
      if (mType == TYPE_NORMAL) {
        contentsUri=DocumentsContract.buildChildDocumentsUri(uri.getAuthority(),DocumentsContract.getDocumentId(uri));
      }
 else {
        contentsUri=uri;
      }
      return new DirectoryLoader(context,contentsUri,state.sortOrder);
    }
    @Override public void onLoadFinished(    Loader<DirectoryResult> loader,    DirectoryResult result){
      mAdapter.swapCursor(result.cursor);
    }
    @Override public void onLoaderReset(    Loader<DirectoryResult> loader){
      mAdapter.swapCursor(null);
    }
  }
;
  updateDisplayState();
}
