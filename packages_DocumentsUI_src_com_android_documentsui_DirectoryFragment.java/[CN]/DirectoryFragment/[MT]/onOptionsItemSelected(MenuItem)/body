{
  final DisplayState state=getDisplayState(this);
  final int id=item.getItemId();
  if (id == R.id.menu_grid) {
    state.mode=DisplayState.MODE_GRID;
    updateMode();
    getFragmentManager().invalidateOptionsMenu();
    return true;
  }
 else   if (id == R.id.menu_list) {
    state.mode=DisplayState.MODE_LIST;
    updateMode();
    getFragmentManager().invalidateOptionsMenu();
    return true;
  }
 else {
    return super.onOptionsItemSelected(item);
  }
}
