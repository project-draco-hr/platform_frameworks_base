{
  final int minimumWidth=getSuggestedMinimumWidth();
  final int minimumHeight=getSuggestedMinimumHeight();
  int viewWidth=resolveMeasured(widthMeasureSpec,minimumWidth);
  int viewHeight=resolveMeasured(heightMeasureSpec,minimumHeight);
  final int chosenSize=Math.min(viewWidth,viewHeight);
  final int newWidthMeasureSpec=MeasureSpec.makeMeasureSpec(chosenSize,MeasureSpec.AT_MOST);
  final int newHeightMeasureSpec=MeasureSpec.makeMeasureSpec(chosenSize,MeasureSpec.AT_MOST);
  super.onMeasure(newWidthMeasureSpec,newHeightMeasureSpec);
}
