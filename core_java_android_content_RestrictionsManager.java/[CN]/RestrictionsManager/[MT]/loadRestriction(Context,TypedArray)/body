{
  String key=a.getString(R.styleable.RestrictionEntry_key);
  int restrictionType=a.getInt(R.styleable.RestrictionEntry_restrictionType,-1);
  String title=a.getString(R.styleable.RestrictionEntry_title);
  String description=a.getString(R.styleable.RestrictionEntry_description);
  int entries=a.getResourceId(R.styleable.RestrictionEntry_entries,0);
  int entryValues=a.getResourceId(R.styleable.RestrictionEntry_entryValues,0);
  if (restrictionType == -1) {
    Log.w(TAG,"restrictionType cannot be omitted");
    return null;
  }
  if (key == null) {
    Log.w(TAG,"key cannot be omitted");
    return null;
  }
  RestrictionEntry restriction=new RestrictionEntry(restrictionType,key);
  restriction.setTitle(title);
  restriction.setDescription(description);
  if (entries != 0) {
    restriction.setChoiceEntries(appContext,entries);
  }
  if (entryValues != 0) {
    restriction.setChoiceValues(appContext,entryValues);
  }
switch (restrictionType) {
case RestrictionEntry.TYPE_NULL:
case RestrictionEntry.TYPE_STRING:
case RestrictionEntry.TYPE_CHOICE:
    restriction.setSelectedString(a.getString(R.styleable.RestrictionEntry_defaultValue));
  break;
case RestrictionEntry.TYPE_INTEGER:
restriction.setIntValue(a.getInt(R.styleable.RestrictionEntry_defaultValue,0));
break;
case RestrictionEntry.TYPE_MULTI_SELECT:
int resId=a.getResourceId(R.styleable.RestrictionEntry_defaultValue,0);
if (resId != 0) {
restriction.setAllSelectedStrings(appContext.getResources().getStringArray(resId));
}
break;
case RestrictionEntry.TYPE_BOOLEAN:
restriction.setSelectedState(a.getBoolean(R.styleable.RestrictionEntry_defaultValue,false));
break;
default :
Log.w(TAG,"Unknown restriction type " + restrictionType);
}
return restriction;
}
