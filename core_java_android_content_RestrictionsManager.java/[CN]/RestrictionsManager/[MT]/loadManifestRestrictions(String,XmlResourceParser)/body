{
  Context appContext;
  try {
    appContext=mContext.createPackageContext(packageName,0);
  }
 catch (  NameNotFoundException nnfe) {
    return null;
  }
  ArrayList<RestrictionEntry> restrictions=new ArrayList<RestrictionEntry>();
  RestrictionEntry restriction;
  try {
    int tagType=xml.next();
    while (tagType != XmlPullParser.END_DOCUMENT) {
      if (tagType == XmlPullParser.START_TAG) {
        if (xml.getName().equals(TAG_RESTRICTION)) {
          AttributeSet attrSet=Xml.asAttributeSet(xml);
          if (attrSet != null) {
            TypedArray a=appContext.obtainStyledAttributes(attrSet,com.android.internal.R.styleable.RestrictionEntry);
            restriction=loadRestriction(appContext,a);
            if (restriction != null) {
              restrictions.add(restriction);
            }
          }
        }
      }
      tagType=xml.next();
    }
  }
 catch (  XmlPullParserException e) {
    Log.w(TAG,"Reading restriction metadata for " + packageName,e);
    return null;
  }
catch (  IOException e) {
    Log.w(TAG,"Reading restriction metadata for " + packageName,e);
    return null;
  }
  return restrictions;
}
