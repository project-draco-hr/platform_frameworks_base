{
  Context appContext;
  try {
    appContext=mContext.createPackageContext(packageName,0);
  }
 catch (  NameNotFoundException nnfe) {
    return null;
  }
  ArrayList<RestrictionEntry> restrictions=new ArrayList<>();
  RestrictionEntry restriction;
  try {
    int tagType=xml.next();
    while (tagType != XmlPullParser.END_DOCUMENT) {
      if (tagType == XmlPullParser.START_TAG) {
        restriction=loadRestrictionElement(appContext,xml);
        if (restriction != null) {
          restrictions.add(restriction);
        }
      }
      tagType=xml.next();
    }
  }
 catch (  XmlPullParserException e) {
    Log.w(TAG,"Reading restriction metadata for " + packageName,e);
    return null;
  }
catch (  IOException e) {
    Log.w(TAG,"Reading restriction metadata for " + packageName,e);
    return null;
  }
  return restrictions;
}
