{
  String prefValue=mPrefs.getString(prefNameForApp(index),null);
  if (prefValue == null) {
    Slog.w(TAG,"Couldn't find pref " + prefNameForApp(index));
    return null;
  }
  ComponentName componentName=ComponentName.unflattenFromString(prefValue);
  if (componentName == null) {
    Slog.w(TAG,"Invalid component name " + prefValue);
    return null;
  }
  long userSerialNumber=mPrefs.getLong(prefUserForApp(index),-1);
  if (userSerialNumber == -1) {
    Slog.w(TAG,"Couldn't find pref " + prefUserForApp(index));
    return null;
  }
  UserHandle appUser=mUserManager.getUserForSerialNumber(userSerialNumber);
  if (appUser == null) {
    Slog.w(TAG,"No user for serial " + userSerialNumber);
    return null;
  }
  AppInfo appInfo=new AppInfo(componentName,appUser);
  if (resolveApp(appInfo) == null) {
    return null;
  }
  return appInfo;
}
