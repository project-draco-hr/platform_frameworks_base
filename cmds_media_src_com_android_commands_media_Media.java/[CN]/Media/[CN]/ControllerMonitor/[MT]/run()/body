{
  printUsageMessage();
  HandlerThread cbThread=new HandlerThread("MediaCb"){
    @Override protected void onLooperPrepared(){
      try {
        mController.registerCallbackListener(ControllerMonitor.this);
      }
 catch (      RemoteException e) {
        System.out.println("Error registering monitor callback");
      }
    }
  }
;
  cbThread.start();
  try {
    InputStreamReader converter=new InputStreamReader(System.in);
    BufferedReader in=new BufferedReader(converter);
    String line;
    while ((line=in.readLine()) != null) {
      boolean addNewline=true;
      if (line.length() <= 0) {
        addNewline=false;
      }
 else       if ("q".equals(line) || "quit".equals(line)) {
        break;
      }
 else       if ("play".equals(line)) {
        mController.play();
      }
 else       if ("pause".equals(line)) {
        mController.pause();
      }
 else       if ("next".equals(line)) {
        mController.next();
      }
 else       if ("previous".equals(line)) {
        mController.previous();
      }
 else {
        System.out.println("Invalid command: " + line);
      }
synchronized (this) {
        if (addNewline) {
          System.out.println("");
        }
        printUsageMessage();
      }
    }
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
 finally {
    cbThread.getLooper().quit();
    try {
      mController.unregisterCallbackListener(this);
    }
 catch (    Exception e) {
    }
  }
}
