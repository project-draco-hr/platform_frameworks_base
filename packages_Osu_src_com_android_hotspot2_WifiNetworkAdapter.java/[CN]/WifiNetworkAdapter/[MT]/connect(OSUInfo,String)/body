{
  WifiManager wifiManager=(WifiManager)mContext.getSystemService(Context.WIFI_SERVICE);
  WifiConfiguration config=new WifiConfiguration();
  config.SSID='"' + osuInfo.getSSID() + '"';
  if (osuInfo.getOSUBssid() != 0) {
    config.BSSID=Utils.macToString(osuInfo.getOSUBssid());
    Log.d(OSUManager.TAG,String.format("Setting BSSID of '%s' to %012x",osuInfo.getSSID(),osuInfo.getOSUBssid()));
  }
  if (osuInfo.getOSUProvider().getOsuNai() == null) {
    config.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);
  }
 else {
    config.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.OSEN);
    config.allowedProtocols.set(WifiConfiguration.Protocol.OSEN);
    config.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP);
    config.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.GTK_NOT_USED);
    config.enterpriseConfig=new WifiEnterpriseConfig();
    config.enterpriseConfig.setEapMethod(WifiEnterpriseConfig.Eap.UNAUTH_TLS);
    config.enterpriseConfig.setIdentity(osuInfo.getOSUProvider().getOsuNai());
  }
  int networkId=wifiManager.addNetwork(config);
  if (wifiManager.enableNetwork(networkId,true)) {
    return networkId;
  }
 else {
    return null;
  }
}
