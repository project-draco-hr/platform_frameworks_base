{
  BluetoothAdapter adapter=BluetoothAdapter.getDefaultAdapter();
  int iconId=R.drawable.stat_sys_data_bluetooth;
  String contentDescription=mContext.getString(R.string.accessibility_quick_settings_bluetooth_on);
  if (adapter != null) {
    mBluetoothEnabled=(adapter.getState() == BluetoothAdapter.STATE_ON);
    if (adapter.getConnectionState() == BluetoothAdapter.STATE_CONNECTED) {
      iconId=R.drawable.stat_sys_data_bluetooth_connected;
      contentDescription=mContext.getString(R.string.accessibility_bluetooth_connected);
    }
  }
 else {
    mBluetoothEnabled=false;
  }
  mService.setIcon(SLOT_BLUETOOTH,iconId,0,contentDescription);
  mService.setIconVisibility(SLOT_BLUETOOTH,mBluetoothEnabled);
}
