{
  mContext=context;
  mIconController=iconController;
  mCast=cast;
  mHotspot=hotspot;
  mBluetooth=bluetooth;
  mBluetooth.addStateChangedCallback(this);
  mAlarmManager=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
  mUserInfoController=userInfoController;
  mUserManager=(UserManager)mContext.getSystemService(Context.USER_SERVICE);
  IntentFilter filter=new IntentFilter();
  filter.addAction(AlarmManager.ACTION_NEXT_ALARM_CLOCK_CHANGED);
  filter.addAction(AudioManager.RINGER_MODE_CHANGED_ACTION);
  filter.addAction(AudioManager.INTERNAL_RINGER_MODE_CHANGED_ACTION);
  filter.addAction(TelephonyIntents.ACTION_SIM_STATE_CHANGED);
  filter.addAction(TelecomManager.ACTION_CURRENT_TTY_MODE_CHANGED);
  filter.addAction(Intent.ACTION_MANAGED_PROFILE_AVAILABILITY_CHANGED);
  mContext.registerReceiver(mIntentReceiver,filter,null,mHandler);
  try {
    ActivityManagerNative.getDefault().registerUserSwitchObserver(mUserSwitchListener);
  }
 catch (  RemoteException e) {
  }
  mIconController.setIcon(SLOT_TTY,R.drawable.stat_sys_tty_mode,null);
  mIconController.setIconVisibility(SLOT_TTY,false);
  updateBluetooth();
  mIconController.setIcon(SLOT_ALARM_CLOCK,R.drawable.stat_sys_alarm,null);
  mIconController.setIconVisibility(SLOT_ALARM_CLOCK,false);
  mIconController.setIcon(SLOT_ZEN,R.drawable.stat_sys_zen_important,null);
  mIconController.setIconVisibility(SLOT_ZEN,false);
  mIconController.setIcon(SLOT_VOLUME,R.drawable.stat_sys_ringer_vibrate,null);
  mIconController.setIconVisibility(SLOT_VOLUME,false);
  updateVolumeZen();
  mIconController.setIcon(SLOT_CAST,R.drawable.stat_sys_cast,null);
  mIconController.setIconVisibility(SLOT_CAST,false);
  mCast.addCallback(mCastCallback);
  mIconController.setIcon(SLOT_HOTSPOT,R.drawable.stat_sys_hotspot,mContext.getString(R.string.accessibility_status_bar_hotspot));
  mIconController.setIconVisibility(SLOT_HOTSPOT,mHotspot.isHotspotEnabled());
  mHotspot.addCallback(mHotspotCallback);
  mIconController.setIcon(SLOT_MANAGED_PROFILE,R.drawable.stat_sys_managed_profile_status,mContext.getString(R.string.accessibility_managed_profile));
  mIconController.setIconVisibility(SLOT_MANAGED_PROFILE,mManagedProfileIconVisible);
}
