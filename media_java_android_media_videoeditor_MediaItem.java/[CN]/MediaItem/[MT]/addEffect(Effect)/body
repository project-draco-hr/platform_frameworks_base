{
  if (effect.getMediaItem() != this) {
    throw new IllegalArgumentException("Media item mismatch");
  }
  if (mEffects.contains(effect)) {
    throw new IllegalArgumentException("Effect already exists: " + effect.getId());
  }
  if (effect.getStartTime() + effect.getDuration() > getTimelineDuration()) {
    throw new IllegalArgumentException("Effect start time + effect duration > media clip duration");
  }
  mEffects.add(effect);
  invalidateTransitions(effect);
}
