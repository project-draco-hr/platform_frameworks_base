{
  MemoryIntArray firstArray=null;
  MemoryIntArray secondArray=null;
  try {
    firstArray=new MemoryIntArray(3,false);
    firstArray.set(0,1);
    firstArray.set(1,2);
    firstArray.set(2,3);
    Parcel parcel=Parcel.obtain();
    parcel.writeParcelable(firstArray,0);
    parcel.setDataPosition(0);
    secondArray=parcel.readParcelable(null);
    parcel.recycle();
    assertNotNull("Should marshall file descriptor",secondArray);
    assertEquals("First element should be 1",1,secondArray.get(0));
    assertEquals("First element should be 2",2,secondArray.get(1));
    assertEquals("First element should be 3",3,secondArray.get(2));
  }
  finally {
    IoUtils.closeQuietly(firstArray);
    IoUtils.closeQuietly(secondArray);
  }
}
