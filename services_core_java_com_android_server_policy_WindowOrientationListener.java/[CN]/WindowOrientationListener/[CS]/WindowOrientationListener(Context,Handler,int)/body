{
  mHandler=handler;
  mSensorManager=(SensorManager)context.getSystemService(Context.SENSOR_SERVICE);
  mRate=rate;
  mSensorType=context.getResources().getString(com.android.internal.R.string.config_orientationSensorType);
  if (!TextUtils.isEmpty(mSensorType)) {
    List<Sensor> sensors=mSensorManager.getSensorList(Sensor.TYPE_ALL);
    final int N=sensors.size();
    for (int i=0; i < N; i++) {
      Sensor sensor=sensors.get(i);
      if (mSensorType.equals(sensor.getStringType())) {
        mSensor=sensor;
        break;
      }
    }
    if (mSensor != null) {
      mOrientationJudge=new OrientationSensorJudge();
    }
  }
  if (mOrientationJudge == null) {
    mSensor=mSensorManager.getDefaultSensor(USE_GRAVITY_SENSOR ? Sensor.TYPE_GRAVITY : Sensor.TYPE_ACCELEROMETER);
    if (mSensor != null) {
      mOrientationJudge=new AccelSensorJudge(context);
    }
  }
}
