{
  unscheduleRotationEvaluationLocked();
  if (mDesiredRotation == mProposedRotation) {
    return -1;
  }
  final long now=SystemClock.elapsedRealtimeNanos();
  if (isDesiredRotationAcceptableLocked(now)) {
    mProposedRotation=mDesiredRotation;
    return mProposedRotation;
  }
 else {
    scheduleRotationEvaluationIfNecessaryLocked(now);
  }
  return -1;
}
