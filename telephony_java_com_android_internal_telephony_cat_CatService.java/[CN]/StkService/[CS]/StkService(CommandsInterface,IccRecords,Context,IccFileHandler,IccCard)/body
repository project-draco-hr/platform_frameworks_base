{
  if (ci == null || ir == null || context == null || fh == null || ic == null) {
    throw new NullPointerException("Service: Input parameters must not be null");
  }
  mCmdIf=ci;
  mContext=context;
  mMsgDecoder=RilMessageDecoder.getInstance(this,fh);
  mCmdIf.setOnStkSessionEnd(this,MSG_ID_SESSION_END,null);
  mCmdIf.setOnStkProactiveCmd(this,MSG_ID_PROACTIVE_COMMAND,null);
  mCmdIf.setOnStkEvent(this,MSG_ID_EVENT_NOTIFY,null);
  mCmdIf.setOnStkCallSetUp(this,MSG_ID_CALL_SETUP,null);
  mIccRecords=ir;
  mIccRecords.registerForRecordsLoaded(this,MSG_ID_ICC_RECORDS_LOADED,null);
  mCmdIf.reportStkServiceIsRunning(null);
  StkLog.d(this,"StkService: is running");
}
