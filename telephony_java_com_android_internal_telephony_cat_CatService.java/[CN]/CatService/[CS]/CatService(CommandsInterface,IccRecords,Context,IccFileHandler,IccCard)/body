{
  if (ci == null || ir == null || context == null || fh == null || ic == null) {
    throw new NullPointerException("Service: Input parameters must not be null");
  }
  mCmdIf=ci;
  mContext=context;
  mMsgDecoder=RilMessageDecoder.getInstance(this,fh);
  mCmdIf.setOnCatSessionEnd(this,MSG_ID_SESSION_END,null);
  mCmdIf.setOnCatProactiveCmd(this,MSG_ID_PROACTIVE_COMMAND,null);
  mCmdIf.setOnCatEvent(this,MSG_ID_EVENT_NOTIFY,null);
  mCmdIf.setOnCatCallSetUp(this,MSG_ID_CALL_SETUP,null);
  mIccRecords=ir;
  ic.registerForReady(this,MSG_ID_SIM_READY,null);
  mIccRecords.registerForRecordsLoaded(this,MSG_ID_ICC_RECORDS_LOADED,null);
  mStkAppInstalled=isStkAppInstalled();
  CatLog.d(this,"Running CAT service. STK app installed:" + mStkAppInstalled);
}
