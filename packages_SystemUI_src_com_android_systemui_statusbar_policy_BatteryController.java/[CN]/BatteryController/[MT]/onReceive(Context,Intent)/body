{
  final String action=intent.getAction();
  if (action.equals(Intent.ACTION_BATTERY_CHANGED)) {
    mLevel=(int)(100f * intent.getIntExtra(BatteryManager.EXTRA_LEVEL,0) / intent.getIntExtra(BatteryManager.EXTRA_SCALE,100));
    mPluggedIn=intent.getIntExtra(BatteryManager.EXTRA_PLUGGED,0) != 0;
    final int status=intent.getIntExtra(BatteryManager.EXTRA_STATUS,BatteryManager.BATTERY_STATUS_UNKNOWN);
    mCharged=status == BatteryManager.BATTERY_STATUS_FULL;
    mCharging=mCharged || status == BatteryManager.BATTERY_STATUS_CHARGING;
    fireBatteryLevelChanged();
  }
 else   if (action.equals(PowerManager.ACTION_POWER_SAVE_MODE_CHANGED)) {
    updatePowerSave();
  }
 else   if (action.equals(PowerManager.ACTION_POWER_SAVE_MODE_CHANGING)) {
    setPowerSave(intent.getBooleanExtra(PowerManager.EXTRA_POWER_SAVE_MODE,false));
  }
}
