{
  final String action=intent.getAction();
  if (action.equals(Intent.ACTION_BATTERY_CHANGED)) {
    final int level=intent.getIntExtra(BatteryManager.EXTRA_LEVEL,0);
    int N=mIconViews.size();
    for (int i=0; i < N; i++) {
      final int icon=intent.getIntExtra(BatteryManager.EXTRA_ICON_SMALL,0);
      ImageView v=mIconViews.get(i);
      v.setImageResource(icon);
      v.setImageLevel(level);
    }
    N=mLabelViews.size();
    for (int i=0; i < N; i++) {
      TextView v=mLabelViews.get(i);
      v.setText(mContext.getString(R.string.status_bar_settings_battery_meter_format,level));
    }
  }
}
