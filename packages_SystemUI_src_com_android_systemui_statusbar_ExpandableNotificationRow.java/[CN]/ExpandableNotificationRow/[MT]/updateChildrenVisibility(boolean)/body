{
  if (mChildrenContainer == null) {
    return;
  }
  if (mChildExpandAnimator != null) {
    mChildExpandAnimator.cancel();
  }
  float targetProgress=mChildrenExpanded ? 1.0f : 0.0f;
  if (animated) {
    if (mChildrenExpanded) {
      mChildrenContainer.setVisibility(VISIBLE);
    }
    mExpandButtonStart=mExpandButtonContainer.getTranslationY();
    mChildExpandAnimator=ValueAnimator.ofFloat(mChildrenExpandProgress,targetProgress);
    mChildExpandAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener(){
      @Override public void onAnimationUpdate(      ValueAnimator animation){
        setChildrenExpandProgress((float)animation.getAnimatedValue());
      }
    }
);
    mChildExpandAnimator.addListener(new AnimatorListenerAdapter(){
      @Override public void onAnimationEnd(      Animator animation){
        mChildExpandAnimator=null;
        if (!mChildrenExpanded) {
          mChildrenContainer.setVisibility(INVISIBLE);
        }
      }
    }
);
    mChildExpandAnimator.setInterpolator(mLinearInterpolator);
    mChildExpandAnimator.setDuration(StackStateAnimator.ANIMATION_DURATION_EXPAND_CLICKED);
    mChildExpandAnimator.start();
  }
 else {
    setChildrenExpandProgress(targetProgress);
    mChildrenContainer.setVisibility(mChildrenExpanded ? VISIBLE : INVISIBLE);
  }
}
