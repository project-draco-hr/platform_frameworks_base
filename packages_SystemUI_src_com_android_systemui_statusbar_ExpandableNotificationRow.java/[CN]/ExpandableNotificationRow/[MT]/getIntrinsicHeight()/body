{
  if (isUserLocked()) {
    return getActualHeight();
  }
  boolean inExpansionState=isExpanded();
  int maxContentHeight;
  if (mIsHeadsUp) {
    if (inExpansionState) {
      maxContentHeight=Math.max(mMaxExpandHeight,mHeadsUpHeight);
    }
 else {
      maxContentHeight=Math.max(mRowMinHeight,mHeadsUpHeight);
    }
  }
 else   if ((!inExpansionState && !mChildrenExpanded) || mShowingPublicForIntrinsicHeight) {
    maxContentHeight=mRowMinHeight;
  }
 else   if (mChildrenExpanded) {
    maxContentHeight=mChildrenContainer.getIntrinsicHeight();
  }
 else {
    maxContentHeight=getMaxExpandHeight();
  }
  return maxContentHeight + getBottomDecorHeight();
}
