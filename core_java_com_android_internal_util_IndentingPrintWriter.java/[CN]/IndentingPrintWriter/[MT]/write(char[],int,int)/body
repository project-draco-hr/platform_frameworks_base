{
  final int bufferEnd=offset + count;
  int lineStart=offset;
  int lineEnd=offset;
  while (lineEnd < bufferEnd) {
    char ch=buf[lineEnd++];
    if (ch == '\n') {
      writeIndent();
      super.write(buf,lineStart,lineEnd - lineStart);
      lineStart=lineEnd;
      mEmptyLine=true;
    }
  }
  if (lineStart != lineEnd) {
    writeIndent();
    super.write(buf,lineStart,lineEnd - lineStart);
  }
}
