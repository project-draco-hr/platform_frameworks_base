{
  List<PendingIntent> enterIntents=new LinkedList<PendingIntent>();
  List<PendingIntent> exitIntents=new LinkedList<PendingIntent>();
synchronized (this) {
    mLastLocation=location;
    removeExpiredFences();
    for (    GeofenceWrapper fenceWrapper : mFences) {
      int event=fenceWrapper.fence.processLocation(location);
      if ((event & Geofence.FLAG_ENTER) != 0) {
        enterIntents.add(fenceWrapper.intent);
      }
      if ((event & Geofence.FLAG_EXIT) != 0) {
        exitIntents.add(fenceWrapper.intent);
      }
    }
    updateProviderRequirements();
  }
  for (  PendingIntent intent : exitIntents) {
    sendIntentExit(intent);
  }
  for (  PendingIntent intent : enterIntents) {
    sendIntentEnter(intent);
  }
}
