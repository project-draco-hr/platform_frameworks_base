{
  GeofenceState state=new GeofenceState(geofence,mLastLocation,request.getExpireAt(),packageName,intent);
synchronized (mLock) {
    for (int i=mFences.size() - 1; i >= 0; i--) {
      GeofenceState w=mFences.get(i);
      if (geofence.equals(w.mFence) && intent.equals(w.mIntent)) {
        mFences.remove(i);
        break;
      }
    }
    mFences.add(state);
    updateProviderRequirementsLocked();
  }
}
