{
  char[] buffer=new char[1024];
  String newName=mHeadsetName;
  int newState=mHeadsetState;
  mPrevHeadsetState=mHeadsetState;
  try {
    FileReader file=new FileReader(HEADSET_STATE_PATH);
    int len=file.read(buffer,0,1024);
    newState=Integer.valueOf((new String(buffer,0,len)).trim());
    file=new FileReader(HEADSET_NAME_PATH);
    len=file.read(buffer,0,1024);
    newName=new String(buffer,0,len).trim();
  }
 catch (  FileNotFoundException e) {
    Log.w(TAG,"This kernel does not have wired headset support");
  }
catch (  Exception e) {
    Log.e(TAG,"",e);
  }
  update(newName,newState);
}
