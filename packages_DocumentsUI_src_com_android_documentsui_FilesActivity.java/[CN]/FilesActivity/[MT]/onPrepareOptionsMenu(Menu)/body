{
  boolean shown=super.onPrepareOptionsMenu(menu);
  menu.findItem(R.id.menu_file_size).setVisible(true);
  menu.findItem(R.id.menu_advanced).setVisible(true);
  final MenuItem pasteFromCb=menu.findItem(R.id.menu_paste_from_clipboard);
  final MenuItem createDir=menu.findItem(R.id.menu_create_dir);
  final MenuItem settings=menu.findItem(R.id.menu_settings);
  boolean canCreateDir=canCreateDirectory();
  createDir.setShowAsAction(MenuItem.SHOW_AS_ACTION_NEVER);
  createDir.setVisible(canCreateDir);
  settings.setVisible((getCurrentRoot().flags & Root.FLAG_HAS_SETTINGS) != 0);
  pasteFromCb.setVisible(true);
  pasteFromCb.setShowAsAction(MenuItem.SHOW_AS_ACTION_NEVER);
  pasteFromCb.setEnabled(mClipper.hasItemsToPaste());
  return shown;
}
