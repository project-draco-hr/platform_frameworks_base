{
  final FragmentManager fm=getFragmentManager();
  final RootInfo root=getCurrentRoot();
  final DocumentInfo cwd=getCurrentDirectory();
  if (cwd == null) {
    DirectoryFragment.showRecentsOpen(fm,anim);
    final boolean visualMimes=MimePredicate.mimeMatches(MimePredicate.VISUAL_MIMES,mState.acceptMimes);
    mState.userMode=visualMimes ? State.MODE_GRID : State.MODE_LIST;
    mState.derivedMode=mState.userMode;
  }
 else {
    if (mState.currentSearch != null) {
      DirectoryFragment.showSearch(fm,root,mState.currentSearch,anim);
    }
 else {
      DirectoryFragment.showNormal(fm,root,cwd,anim);
    }
  }
}
