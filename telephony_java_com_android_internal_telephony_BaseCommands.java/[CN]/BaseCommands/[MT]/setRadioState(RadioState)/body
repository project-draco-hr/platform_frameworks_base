{
  RadioState oldState;
synchronized (mStateMonitor) {
    if (false) {
      Log.v(LOG_TAG,"setRadioState old: " + mState + " new "+ newState);
    }
    oldState=mState;
    mState=newState;
    if (oldState == mState) {
      return;
    }
    mRadioStateChangedRegistrants.notifyRegistrants();
    if (mState.isAvailable() && !oldState.isAvailable()) {
      Log.d(LOG_TAG,"Notifying: radio available");
      mAvailRegistrants.notifyRegistrants();
      onRadioAvailable();
    }
    if (!mState.isAvailable() && oldState.isAvailable()) {
      Log.d(LOG_TAG,"Notifying: radio not available");
      mNotAvailRegistrants.notifyRegistrants();
    }
    if (mState.isOn() && !oldState.isOn()) {
      Log.d(LOG_TAG,"Notifying: Radio On");
      mOnRegistrants.notifyRegistrants();
    }
    if ((!mState.isOn() || !mState.isAvailable()) && !((!oldState.isOn() || !oldState.isAvailable()))) {
      Log.d(LOG_TAG,"Notifying: radio off or not available");
      mOffOrNotAvailRegistrants.notifyRegistrants();
    }
  }
}
