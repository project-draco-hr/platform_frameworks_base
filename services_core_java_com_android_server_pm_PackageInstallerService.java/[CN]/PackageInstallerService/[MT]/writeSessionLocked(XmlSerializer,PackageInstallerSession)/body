{
  final SessionParams params=session.params;
  out.startTag(null,TAG_SESSION);
  writeIntAttribute(out,ATTR_SESSION_ID,session.sessionId);
  writeIntAttribute(out,ATTR_USER_ID,session.userId);
  writeStringAttribute(out,ATTR_INSTALLER_PACKAGE_NAME,session.installerPackageName);
  writeIntAttribute(out,ATTR_INSTALLER_UID,session.installerUid);
  writeLongAttribute(out,ATTR_CREATED_MILLIS,session.createdMillis);
  if (session.stageDir != null) {
    writeStringAttribute(out,ATTR_SESSION_STAGE_DIR,session.stageDir.getAbsolutePath());
  }
  if (session.stageCid != null) {
    writeStringAttribute(out,ATTR_SESSION_STAGE_CID,session.stageCid);
  }
  writeBooleanAttribute(out,ATTR_PREPARED,session.isPrepared());
  writeBooleanAttribute(out,ATTR_SEALED,session.isSealed());
  writeIntAttribute(out,ATTR_MODE,params.mode);
  writeIntAttribute(out,ATTR_INSTALL_FLAGS,params.installFlags);
  writeIntAttribute(out,ATTR_INSTALL_LOCATION,params.installLocation);
  writeLongAttribute(out,ATTR_SIZE_BYTES,params.sizeBytes);
  writeStringAttribute(out,ATTR_APP_PACKAGE_NAME,params.appPackageName);
  writeBitmapAttribute(out,ATTR_APP_ICON,params.appIcon);
  writeStringAttribute(out,ATTR_APP_LABEL,params.appLabel);
  writeUriAttribute(out,ATTR_ORIGINATING_URI,params.originatingUri);
  writeUriAttribute(out,ATTR_REFERRER_URI,params.referrerUri);
  writeStringAttribute(out,ATTR_ABI_OVERRIDE,params.abiOverride);
  out.endTag(null,TAG_SESSION);
}
