{
  mPm.enforceCrossUserPermission(Binder.getCallingUid(),userId,true,"uninstall");
  if (mContext.checkCallingOrSelfPermission(android.Manifest.permission.DELETE_PACKAGES) == PackageManager.PERMISSION_GRANTED) {
    mPm.deletePackage(packageName,observer,userId,flags);
  }
 else {
    final Intent intent=new Intent(Intent.ACTION_UNINSTALL_PACKAGE);
    intent.setData(Uri.fromParts("package",packageName,null));
    intent.putExtra(PackageInstaller.EXTRA_CALLBACK,observer.asBinder());
    try {
      observer.onUserActionRequired(intent);
    }
 catch (    RemoteException ignored) {
    }
  }
}
