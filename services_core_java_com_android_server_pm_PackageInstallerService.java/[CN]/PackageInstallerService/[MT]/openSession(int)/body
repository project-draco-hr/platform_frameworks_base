{
synchronized (mSessions) {
    final PackageInstallerSession session=mSessions.get(sessionId);
    if (session == null) {
      throw new IllegalStateException("Missing session " + sessionId);
    }
    if (!isCallingUidOwner(session)) {
      throw new SecurityException("Caller has no access to session " + sessionId);
    }
    if (session.openCount.getAndIncrement() == 0) {
      mCallbacks.notifySessionOpened(sessionId,session.userId);
    }
    return session;
  }
}
