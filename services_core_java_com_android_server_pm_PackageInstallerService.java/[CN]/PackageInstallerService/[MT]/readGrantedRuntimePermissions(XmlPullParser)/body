{
  List<String> permissions=null;
  final int outerDepth=in.getDepth();
  int type;
  while ((type=in.next()) != XmlPullParser.END_DOCUMENT && (type != XmlPullParser.END_TAG || in.getDepth() > outerDepth)) {
    if (type == XmlPullParser.END_TAG || type == XmlPullParser.TEXT) {
      continue;
    }
    if (TAG_GRANTED_RUNTIME_PERMISSION.equals(in.getName())) {
      String permission=readStringAttribute(in,ATTR_NAME);
      if (permissions == null) {
        permissions=new ArrayList<>();
      }
      permissions.add(permission);
    }
  }
  if (permissions == null) {
    return null;
  }
  String[] permissionsArray=new String[permissions.size()];
  permissions.toArray(permissionsArray);
  return permissionsArray;
}
