{
synchronized (mSessions) {
    try {
      final int sessionId=allocateSessionIdLocked();
      mLegacySessions.put(sessionId,true);
      return prepareInternalStageDir(sessionId);
    }
 catch (    IllegalStateException e) {
      throw new IOException(e);
    }
  }
}
