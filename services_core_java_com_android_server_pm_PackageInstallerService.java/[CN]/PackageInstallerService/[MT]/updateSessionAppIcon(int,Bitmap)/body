{
synchronized (mSessions) {
    final PackageInstallerSession session=mSessions.get(sessionId);
    if (session == null || !isCallingUidOwner(session)) {
      throw new SecurityException("Caller has no access to session " + sessionId);
    }
    if (appIcon != null) {
      final ActivityManager am=(ActivityManager)mContext.getSystemService(Context.ACTIVITY_SERVICE);
      final int iconSize=am.getLauncherLargeIconSize();
      if ((appIcon.getWidth() > iconSize * 2) || (appIcon.getHeight() > iconSize * 2)) {
        appIcon=Bitmap.createScaledBitmap(appIcon,iconSize,iconSize,true);
      }
    }
    session.params.appIcon=appIcon;
    session.params.appIconLastModified=-1;
    mInternalCallback.onSessionBadgingChanged(session);
  }
}
