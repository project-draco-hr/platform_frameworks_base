{
  final int callingUid=Binder.getCallingUid();
  mPm.enforceCrossUserPermission(callingUid,userId,false,TAG);
  mAppOps.checkPackage(callingUid,installerPackageName);
  int[] matching=new int[0];
synchronized (mSessions) {
    for (int i=0; i < mSessions.size(); i++) {
      final int key=mSessions.keyAt(i);
      final PackageInstallerSession session=mSessions.valueAt(i);
      if (session.userId == userId && session.installerPackageName.equals(installerPackageName)) {
        matching=ArrayUtils.appendInt(matching,key);
      }
    }
  }
  return matching;
}
