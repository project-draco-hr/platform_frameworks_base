{
synchronized (mLock) {
switch (mode) {
case UiModeManager.MODE_NIGHT_NO:
case UiModeManager.MODE_NIGHT_YES:
case UiModeManager.MODE_NIGHT_AUTO:
      break;
default :
    throw new IllegalArgumentException("Unknown mode: " + mode);
}
if (!isDoingNightMode()) {
  return;
}
if (mNightMode != mode) {
  long ident=Binder.clearCallingIdentity();
  Settings.Secure.putInt(mContext.getContentResolver(),Settings.Secure.UI_NIGHT_MODE,mode);
  Binder.restoreCallingIdentity(ident);
  mNightMode=mode;
  updateLocked();
}
}
}
