{
synchronized (Phone.class) {
    if (!sMadeDefaults) {
      sLooper=Looper.myLooper();
      if (sLooper == null) {
        throw new RuntimeException("PhoneFactory.makeDefaultPhones must be called from Looper thread");
      }
      int retryCount=0;
      for (; ; ) {
        boolean hasException=false;
        retryCount++;
        try {
          new LocalServerSocket("com.android.internal.telephony");
        }
 catch (        java.io.IOException ex) {
          hasException=true;
        }
        if (!hasException) {
          break;
        }
 else         if (retryCount > SOCKET_OPEN_MAX_RETRY) {
          throw new RuntimeException("PhoneFactory probably already running");
        }
 else {
          try {
            Thread.sleep(SOCKET_OPEN_RETRY_MILLIS);
          }
 catch (          InterruptedException er) {
          }
        }
      }
      sPhoneNotifier=new DefaultPhoneNotifier();
      if ((SystemProperties.get("ro.radio.noril","")).equals("")) {
        useNewRIL(context);
      }
 else {
        GSMPhone phone;
        phone=new GSMPhone(context,new SimulatedCommands(),sPhoneNotifier);
        registerPhone(phone);
      }
      sMadeDefaults=true;
    }
  }
}
