{
  mAdapter=checkNotNull(adapter,"'adapter' cannot be null.");
  mEnvironment=checkNotNull(environment,"'environment' cannot be null.");
  mSingleSelect=mode == MODE_SINGLE;
  mAdapter.registerAdapterDataObserver(new AdapterDataObserver(){
    @Override public void onChanged(){
      mSelection.clear();
    }
    @Override public void onItemRangeChanged(    int positionStart,    int itemCount,    Object payload){
    }
    @Override public void onItemRangeInserted(    int positionStart,    int itemCount){
      mSelection.expand(positionStart,itemCount);
    }
    @Override public void onItemRangeRemoved(    int positionStart,    int itemCount){
      mSelection.collapse(positionStart,itemCount);
    }
    @Override public void onItemRangeMoved(    int fromPosition,    int toPosition,    int itemCount){
      throw new UnsupportedOperationException();
    }
  }
);
}
