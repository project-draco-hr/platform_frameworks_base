{
  checkNotNull(modelId);
  boolean changed=false;
  if (mSelection.contains(modelId)) {
    changed=attemptDeselect(modelId);
  }
 else {
    boolean canSelect=notifyBeforeItemStateChange(modelId,true);
    if (!canSelect) {
      return;
    }
    if (mSingleSelect && hasSelection()) {
      clearSelectionQuietly();
    }
    selectAndNotify(modelId);
    changed=true;
  }
  if (changed) {
    notifySelectionChanged();
  }
}
