{
  HashMap<Integer,Font> fonts=breaker.fonts;
  Object val=fonts.get(new Integer(0));
  if (val instanceof Font) {
    Font firstFont=(Font)val;
    LineMetrics lm=firstFont.getLineMetrics(breaker.text,0,1,breaker.frc);
    baselineOffsets=lm.getBaselineOffsets();
    baselineIndex=lm.getBaselineIndex();
  }
 else   if (val instanceof GraphicAttribute) {
    GraphicAttribute ga=(GraphicAttribute)val;
    int align=ga.getAlignment();
    if (align == GraphicAttribute.TOP_ALIGNMENT || align == GraphicAttribute.BOTTOM_ALIGNMENT) {
      baselineIndex=GraphicAttribute.ROMAN_BASELINE;
    }
 else {
      baselineIndex=align;
    }
    baselineOffsets=new float[3];
    baselineOffsets[0]=0;
    baselineOffsets[1]=(ga.getDescent() - ga.getAscent()) / 2.f;
    baselineOffsets[2]=-ga.getAscent();
  }
 else {
    baselineIndex=GraphicAttribute.ROMAN_BASELINE;
    baselineOffsets=new float[3];
  }
  if (baselineOffsets[baselineIndex] != 0) {
    float baseOffset=baselineOffsets[baselineIndex];
    for (int i=0; i < baselineOffsets.length; i++) {
      baselineOffsets[i]-=baseOffset;
    }
  }
}
