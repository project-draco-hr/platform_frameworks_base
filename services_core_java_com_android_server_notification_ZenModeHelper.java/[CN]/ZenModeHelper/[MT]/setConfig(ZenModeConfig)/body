{
  if (config == null || !config.isValid())   return false;
  if (config.equals(mConfig))   return true;
  ZenLog.traceConfig(mConfig,config);
  mConfig=config;
  dispatchOnConfigChanged();
  final String val=Integer.toString(mConfig.hashCode());
  Global.putString(mContext.getContentResolver(),Global.ZEN_MODE_CONFIG_ETAG,val);
  applyRestrictions();
  return true;
}
