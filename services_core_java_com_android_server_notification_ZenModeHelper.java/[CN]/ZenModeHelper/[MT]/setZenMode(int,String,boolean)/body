{
  ZenLog.traceSetZenMode(zenMode,reason);
  if (mZenMode == zenMode)   return;
  ZenLog.traceUpdateZenMode(mZenMode,zenMode);
  mZenMode=zenMode;
  Global.putInt(mContext.getContentResolver(),Global.ZEN_MODE,mZenMode);
  if (setRingerMode) {
    applyZenToRingerMode();
  }
  applyRestrictions();
  mHandler.postDispatchOnZenModeChanged();
}
