{
  ZenModeConfig newConfig;
synchronized (mConfig) {
    if (mConfig == null)     return false;
    if (DEBUG) {
      Log.d(TAG,"updateAutomaticZenRule zenRule=" + automaticZenRule + " reason="+ reason);
    }
    newConfig=mConfig.copy();
    ZenModeConfig.ZenRule rule;
    if (ruleId == null) {
      throw new IllegalArgumentException("Rule doesn't exist");
    }
 else {
      rule=newConfig.automaticRules.get(ruleId);
      if (rule == null || !canManageAutomaticZenRule(rule)) {
        throw new SecurityException("Cannot update rules not owned by your condition provider");
      }
    }
    populateZenRule(automaticZenRule,rule,false);
    newConfig.automaticRules.put(ruleId,rule);
    return setConfigLocked(newConfig,reason,true);
  }
}
