{
  if (DEBUG)   Log.d(TAG,"evaluateZenMode");
  final int zenBefore=mZenMode;
  final int zen=computeZenMode();
  ZenLog.traceSetZenMode(zen,reason);
  mZenMode=zen;
  updateRingerModeAffectedStreams();
  setZenModeSetting(mZenMode);
  if (setRingerMode) {
    applyZenToRingerMode();
  }
  applyRestrictions();
  if (zen != zenBefore) {
    mHandler.postDispatchOnZenModeChanged();
  }
  return true;
}
