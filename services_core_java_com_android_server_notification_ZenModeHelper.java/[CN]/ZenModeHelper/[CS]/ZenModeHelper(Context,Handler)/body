{
  mContext=context;
  mHandler=handler;
  mAppOps=(AppOpsManager)context.getSystemService(Context.APP_OPS_SERVICE);
  mDefaultConfig=readDefaultConfig(context.getResources());
  mConfig=mDefaultConfig;
  mSettingsObserver=new SettingsObserver(mHandler);
  mSettingsObserver.observe();
  final IntentFilter filter=new IntentFilter();
  filter.addAction(ACTION_ENTER_ZEN);
  filter.addAction(ACTION_EXIT_ZEN);
  filter.addAction(AudioManager.RINGER_MODE_CHANGED_ACTION);
  mContext.registerReceiver(new ZenBroadcastReceiver(),filter);
}
