{
  if (!visible && !mNotificationShown) {
    return;
  }
  Resources r=Resources.getSystem();
  NotificationManager notificationManager=(NotificationManager)mContext.getSystemService(Context.NOTIFICATION_SERVICE);
  if (visible) {
    CharSequence title=r.getString(R.string.wifi_available_sign_in,0);
    CharSequence details=r.getString(R.string.network_available_sign_in_detailed,mNetworkInfo.getExtraInfo());
    Notification notification=new Notification();
    notification.when=0;
    notification.icon=com.android.internal.R.drawable.stat_notify_wifi_in_range;
    notification.flags=Notification.FLAG_AUTO_CANCEL;
    notification.contentIntent=PendingIntent.getBroadcast(mContext,0,new Intent(CaptivePortalTracker.ACTION_SWITCH_TO_CAPTIVE_PORTAL),0);
    notification.tickerText=title;
    notification.setLatestEventInfo(mContext,title,details,notification.contentIntent);
    notificationManager.notify(NOTIFICATION_ID,1,notification);
  }
 else {
    notificationManager.cancel(NOTIFICATION_ID,1);
  }
  mNotificationShown=visible;
}
