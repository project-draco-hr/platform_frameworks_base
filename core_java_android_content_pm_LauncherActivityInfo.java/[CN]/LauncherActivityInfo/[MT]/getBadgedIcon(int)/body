{
  int iconRes=mActivityInfo.getIconResource();
  Resources resources=null;
  Drawable originalIcon=null;
  try {
    resources=mPm.getResourcesForApplication(mActivityInfo.applicationInfo);
    try {
      if (density != 0) {
        originalIcon=resources.getDrawableForDensity(iconRes,density);
      }
    }
 catch (    Resources.NotFoundException e) {
    }
  }
 catch (  NameNotFoundException nnfe) {
  }
  if (originalIcon == null) {
    originalIcon=mActivityInfo.loadIcon(mPm);
  }
  if (originalIcon instanceof BitmapDrawable) {
    return mPm.getUserBadgedIcon(originalIcon,mUser);
  }
 else {
    Log.e(TAG,"Unable to create badged icon for " + mActivityInfo);
  }
  return originalIcon;
}
