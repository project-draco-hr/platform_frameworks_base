{
  super(editor,mediaItemId,filename,renderingMode);
  if (editor instanceof VideoEditorImpl) {
    mMANativeHelper=((VideoEditorImpl)editor).getNativeContext();
    mVideoEditor=((VideoEditorImpl)editor);
  }
  final Properties properties;
  try {
    properties=mMANativeHelper.getMediaProperties(filename);
  }
 catch (  Exception e) {
    throw new IllegalArgumentException("Unsupported file or file not found: " + filename);
  }
switch (mMANativeHelper.getFileType(properties.fileType)) {
case MediaProperties.FILE_3GP:
case MediaProperties.FILE_MP4:
case MediaProperties.FILE_M4V:
    break;
default :
  throw new IllegalArgumentException("Unsupported Input File Type");
}
switch (mMANativeHelper.getVideoCodecType(properties.videoFormat)) {
case MediaProperties.VCODEC_H263:
case MediaProperties.VCODEC_H264BP:
case MediaProperties.VCODEC_H264MP:
case MediaProperties.VCODEC_MPEG4:
break;
default :
throw new IllegalArgumentException("Unsupported Video Codec Format in Input File");
}
mWidth=properties.width;
mHeight=properties.height;
mAspectRatio=mMANativeHelper.getAspectRatio(properties.width,properties.height);
mFileType=mMANativeHelper.getFileType(properties.fileType);
mVideoType=mMANativeHelper.getVideoCodecType(properties.videoFormat);
mVideoProfile=0;
mDurationMs=properties.videoDuration;
mVideoBitrate=properties.videoBitrate;
mAudioBitrate=properties.audioBitrate;
mFps=(int)properties.averageFrameRate;
mAudioType=mMANativeHelper.getAudioCodecType(properties.audioFormat);
mAudioChannels=properties.audioChannels;
mAudioSamplingFrequency=properties.audioSamplingFrequency;
mBeginBoundaryTimeMs=beginMs;
mEndBoundaryTimeMs=endMs == END_OF_FILE ? mDurationMs : endMs;
mVolumePercentage=volumePercent;
mMuted=muted;
mAudioWaveformFilename=audioWaveformFilename;
if (audioWaveformFilename != null) {
mWaveformData=new SoftReference<WaveformData>(new WaveformData(audioWaveformFilename));
}
 else {
mWaveformData=null;
}
}
