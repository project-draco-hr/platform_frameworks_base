{
  super(editor,mediaItemId,filename,renderingMode);
  if (editor instanceof VideoEditorImpl) {
    mMANativeHelper=((VideoEditorImpl)editor).getNativeContext();
    mVideoEditor=((VideoEditorImpl)editor);
  }
  final Properties properties;
  try {
    properties=mMANativeHelper.getMediaProperties(filename);
  }
 catch (  Exception e) {
    throw new IllegalArgumentException(e.getMessage() + " : " + filename);
  }
  VideoEditorProfile veProfile=VideoEditorProfile.get();
  if (veProfile == null) {
    throw new RuntimeException("Can't get the video editor profile");
  }
  final int maxInputWidth=veProfile.maxInputVideoFrameWidth;
  final int maxInputHeight=veProfile.maxInputVideoFrameHeight;
  if ((properties.width > maxInputWidth) || (properties.height > maxInputHeight)) {
    throw new IllegalArgumentException("Unsupported import resolution. Supported maximum width:" + maxInputWidth + " height:"+ maxInputHeight+ ", current width:"+ properties.width+ " height:"+ properties.height);
  }
switch (mMANativeHelper.getFileType(properties.fileType)) {
case MediaProperties.FILE_3GP:
case MediaProperties.FILE_MP4:
case MediaProperties.FILE_M4V:
    break;
default :
  throw new IllegalArgumentException("Unsupported Input File Type");
}
switch (mMANativeHelper.getVideoCodecType(properties.videoFormat)) {
case MediaProperties.VCODEC_H263:
case MediaProperties.VCODEC_H264BP:
case MediaProperties.VCODEC_H264MP:
case MediaProperties.VCODEC_MPEG4:
break;
default :
throw new IllegalArgumentException("Unsupported Video Codec Format in Input File");
}
if (properties.profileAndLevel == MediaProperties.UNDEFINED_VIDEO_PROFILE) {
throw new IllegalArgumentException("Unsupported Video Codec Profile in Input File");
}
mWidth=properties.width;
mHeight=properties.height;
mAspectRatio=mMANativeHelper.getAspectRatio(properties.width,properties.height);
mFileType=mMANativeHelper.getFileType(properties.fileType);
mVideoType=mMANativeHelper.getVideoCodecType(properties.videoFormat);
mVideoProfile=properties.profileAndLevel;
mDurationMs=properties.videoDuration;
mVideoBitrate=properties.videoBitrate;
mAudioBitrate=properties.audioBitrate;
mFps=(int)properties.averageFrameRate;
mAudioType=mMANativeHelper.getAudioCodecType(properties.audioFormat);
mAudioChannels=properties.audioChannels;
mAudioSamplingFrequency=properties.audioSamplingFrequency;
mBeginBoundaryTimeMs=beginMs;
mEndBoundaryTimeMs=endMs == END_OF_FILE ? mDurationMs : endMs;
mVolumePercentage=volumePercent;
mMuted=muted;
mAudioWaveformFilename=audioWaveformFilename;
if (audioWaveformFilename != null) {
mWaveformData=new SoftReference<WaveformData>(new WaveformData(audioWaveformFilename));
}
 else {
mWaveformData=null;
}
}
