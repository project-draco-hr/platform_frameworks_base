{
  if (beginMs > mDurationMs) {
    throw new IllegalArgumentException("Invalid start time");
  }
  if (endMs > mDurationMs) {
    throw new IllegalArgumentException("Invalid end time");
  }
  if (beginMs != mBeginBoundaryTimeMs) {
    if (mBeginTransition != null) {
      mBeginTransition.invalidate();
    }
  }
  if (endMs != mEndBoundaryTimeMs) {
    if (mEndTransition != null) {
      mEndTransition.invalidate();
    }
  }
  mBeginBoundaryTimeMs=beginMs;
  mEndBoundaryTimeMs=endMs;
  if (mBeginTransition != null) {
    final long maxDurationMs=mBeginTransition.getMaximumDuration();
    if (mBeginTransition.getDuration() > maxDurationMs) {
      mBeginTransition.setDuration(maxDurationMs);
    }
  }
  if (mEndTransition != null) {
    final long maxDurationMs=mEndTransition.getMaximumDuration();
    if (mEndTransition.getDuration() > maxDurationMs) {
      mEndTransition.setDuration(maxDurationMs);
    }
  }
  final List<Overlay> overlays=getAllOverlays();
  for (  Overlay overlay : overlays) {
    if (overlay.getStartTime() < mBeginBoundaryTimeMs) {
      overlay.setStartTime(mBeginBoundaryTimeMs);
    }
    if (overlay.getStartTime() + overlay.getDuration() > getTimelineDuration()) {
      overlay.setDuration(getTimelineDuration() - overlay.getStartTime());
    }
  }
  final List<Effect> effects=getAllEffects();
  for (  Effect effect : effects) {
    if (effect.getStartTime() < mBeginBoundaryTimeMs) {
      effect.setStartTime(mBeginBoundaryTimeMs);
    }
    if (effect.getStartTime() + effect.getDuration() > getTimelineDuration()) {
      effect.setDuration(getTimelineDuration() - effect.getStartTime());
    }
  }
}
