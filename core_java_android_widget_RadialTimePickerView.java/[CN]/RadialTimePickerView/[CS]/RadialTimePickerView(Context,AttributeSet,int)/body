{
  super(context,attrs);
  final TypedValue outValue=new TypedValue();
  context.getTheme().resolveAttribute(android.R.attr.disabledAlpha,outValue,true);
  mDisabledAlpha=(int)(outValue.getFloat() * 255 + 0.5f);
  final Resources res=getResources();
  final TypedArray a=mContext.obtainStyledAttributes(attrs,R.styleable.TimePicker,defStyle,0);
  ColorStateList amPmBackgroundColor=a.getColorStateList(R.styleable.TimePicker_amPmBackgroundColor);
  if (amPmBackgroundColor == null) {
    amPmBackgroundColor=res.getColorStateList(R.color.timepicker_default_ampm_unselected_background_color_material);
  }
  final int amPmSelectedColor=a.getColor(R.styleable.TimePicker_amPmSelectedBackgroundColor,res.getColor(R.color.timepicker_default_ampm_selected_background_color_material));
  amPmBackgroundColor=ColorStateList.addFirstIfMissing(amPmBackgroundColor,R.attr.state_selected,amPmSelectedColor);
  mAmPmSelectedColor=amPmBackgroundColor.getColorForState(STATE_SET_SELECTED,amPmSelectedColor);
  mAmPmUnselectedColor=amPmBackgroundColor.getDefaultColor();
  mAmPmTextColor=a.getColor(R.styleable.TimePicker_amPmTextColor,res.getColor(R.color.timepicker_default_text_color_material));
  mTypeface=Typeface.create("sans-serif",Typeface.NORMAL);
  for (int i=0; i < mAlpha.length; i++) {
    mAlpha[i]=new IntHolder(ALPHA_OPAQUE);
  }
  for (int i=0; i < mAlphaSelector.length; i++) {
    for (int j=0; j < mAlphaSelector[i].length; j++) {
      mAlphaSelector[i][j]=new IntHolder(ALPHA_OPAQUE);
    }
  }
  final int numbersTextColor=a.getColor(R.styleable.TimePicker_numbersTextColor,res.getColor(R.color.timepicker_default_text_color_material));
  mPaint[HOURS]=new Paint();
  mPaint[HOURS].setAntiAlias(true);
  mPaint[HOURS].setTextAlign(Paint.Align.CENTER);
  mColor[HOURS]=numbersTextColor;
  mPaint[MINUTES]=new Paint();
  mPaint[MINUTES].setAntiAlias(true);
  mPaint[MINUTES].setTextAlign(Paint.Align.CENTER);
  mColor[MINUTES]=numbersTextColor;
  mPaintCenter.setColor(numbersTextColor);
  mPaintCenter.setAntiAlias(true);
  mPaintCenter.setTextAlign(Paint.Align.CENTER);
  mPaintSelector[HOURS][SELECTOR_CIRCLE]=new Paint();
  mPaintSelector[HOURS][SELECTOR_CIRCLE].setAntiAlias(true);
  mColorSelector[HOURS][SELECTOR_CIRCLE]=a.getColor(R.styleable.TimePicker_numbersSelectorColor,R.color.timepicker_default_selector_color_material);
  mPaintSelector[HOURS][SELECTOR_DOT]=new Paint();
  mPaintSelector[HOURS][SELECTOR_DOT].setAntiAlias(true);
  mColorSelector[HOURS][SELECTOR_DOT]=a.getColor(R.styleable.TimePicker_numbersSelectorColor,R.color.timepicker_default_selector_color_material);
  mPaintSelector[HOURS][SELECTOR_LINE]=new Paint();
  mPaintSelector[HOURS][SELECTOR_LINE].setAntiAlias(true);
  mPaintSelector[HOURS][SELECTOR_LINE].setStrokeWidth(2);
  mColorSelector[HOURS][SELECTOR_LINE]=a.getColor(R.styleable.TimePicker_numbersSelectorColor,R.color.timepicker_default_selector_color_material);
  mPaintSelector[MINUTES][SELECTOR_CIRCLE]=new Paint();
  mPaintSelector[MINUTES][SELECTOR_CIRCLE].setAntiAlias(true);
  mColorSelector[MINUTES][SELECTOR_CIRCLE]=a.getColor(R.styleable.TimePicker_numbersSelectorColor,R.color.timepicker_default_selector_color_material);
  mPaintSelector[MINUTES][SELECTOR_DOT]=new Paint();
  mPaintSelector[MINUTES][SELECTOR_DOT].setAntiAlias(true);
  mColorSelector[MINUTES][SELECTOR_DOT]=a.getColor(R.styleable.TimePicker_numbersSelectorColor,R.color.timepicker_default_selector_color_material);
  mPaintSelector[MINUTES][SELECTOR_LINE]=new Paint();
  mPaintSelector[MINUTES][SELECTOR_LINE].setAntiAlias(true);
  mPaintSelector[MINUTES][SELECTOR_LINE].setStrokeWidth(2);
  mColorSelector[MINUTES][SELECTOR_LINE]=a.getColor(R.styleable.TimePicker_numbersSelectorColor,R.color.timepicker_default_selector_color_material);
  mPaintAmPmText.setColor(mAmPmTextColor);
  mPaintAmPmText.setTypeface(mTypeface);
  mPaintAmPmText.setAntiAlias(true);
  mPaintAmPmText.setTextAlign(Paint.Align.CENTER);
  mPaintAmPmCircle[AM]=new Paint();
  mPaintAmPmCircle[AM].setAntiAlias(true);
  mPaintAmPmCircle[PM]=new Paint();
  mPaintAmPmCircle[PM].setAntiAlias(true);
  mPaintBackground.setColor(a.getColor(R.styleable.TimePicker_numbersBackgroundColor,res.getColor(R.color.timepicker_default_numbers_background_color_material)));
  mPaintBackground.setAntiAlias(true);
  if (DEBUG) {
    mPaintDebug.setColor(DEBUG_COLOR);
    mPaintDebug.setAntiAlias(true);
    mPaintDebug.setStrokeWidth(DEBUG_STROKE_WIDTH);
    mPaintDebug.setStyle(Paint.Style.STROKE);
    mPaintDebug.setTextAlign(Paint.Align.CENTER);
  }
  mShowHours=true;
  mIs24HourMode=false;
  mAmOrPm=AM;
  mAmOrPmPressed=-1;
  initHoursAndMinutesText();
  initData();
  mTransitionMidRadiusMultiplier=Float.parseFloat(res.getString(R.string.timepicker_transition_mid_radius_multiplier));
  mTransitionEndRadiusMultiplier=Float.parseFloat(res.getString(R.string.timepicker_transition_end_radius_multiplier));
  mTextGridHeights[HOURS]=new float[7];
  mTextGridHeights[MINUTES]=new float[7];
  mSelectionRadiusMultiplier=Float.parseFloat(res.getString(R.string.timepicker_selection_radius_multiplier));
  a.recycle();
  setOnTouchListener(this);
  setClickable(true);
  final Calendar calendar=Calendar.getInstance(Locale.getDefault());
  final int currentHour=calendar.get(Calendar.HOUR_OF_DAY);
  final int currentMinute=calendar.get(Calendar.MINUTE);
  setCurrentHour(currentHour);
  setCurrentMinute(currentMinute);
  setHapticFeedbackEnabled(true);
}
