{
  final int id;
  final boolean wasOnInnerCircle=mIsOnInnerCircle;
  final int degrees=getDegreesFromXY(x,y);
  final boolean isOnInnerCircle=mIsOnInnerCircle;
  mIsOnInnerCircle=wasOnInnerCircle;
  if (degrees != -1) {
    final int snapDegrees=snapOnly30s(degrees,0) % 360;
    if (mShowHours) {
      final int hour24=getHourForDegrees(snapDegrees,isOnInnerCircle);
      final int hour=mIs24HourMode ? hour24 : hour24To12(hour24);
      id=makeId(TYPE_HOUR,hour);
    }
 else {
      final int current=getCurrentMinute();
      final int touched=getMinuteForDegrees(degrees);
      final int snapped=getMinuteForDegrees(snapDegrees);
      final int minute;
      if (Math.abs(current - touched) < Math.abs(snapped - touched)) {
        minute=current;
      }
 else {
        minute=snapped;
      }
      id=makeId(TYPE_MINUTE,minute);
    }
  }
 else {
    id=INVALID_ID;
  }
  return id;
}
