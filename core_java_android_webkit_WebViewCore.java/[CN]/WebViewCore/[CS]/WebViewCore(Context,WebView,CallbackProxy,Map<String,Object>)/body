{
  mCallbackProxy=proxy;
  mWebView=w;
  mJavascriptInterfaces=javascriptInterfaces;
  mContext=context;
synchronized (WebViewCore.class) {
    if (sWebCoreHandler == null) {
      Thread t=new Thread(new WebCoreThread());
      t.setName(THREAD_NAME);
      t.start();
      try {
        WebViewCore.class.wait();
      }
 catch (      InterruptedException e) {
        Log.e(LOGTAG,"Caught exception while waiting for thread " + "creation.");
        Log.e(LOGTAG,Log.getStackTraceString(e));
      }
    }
  }
  mEventHub=new EventHub();
  mSettings=new WebSettings(mContext,mWebView);
  WebIconDatabase.getInstance();
  WebStorage.getInstance().createUIHandler();
  GeolocationPermissions.getInstance().createUIHandler();
  ActivityManager manager=(ActivityManager)mContext.getSystemService(Context.ACTIVITY_SERVICE);
  ActivityManager.MemoryInfo memInfo=new ActivityManager.MemoryInfo();
  manager.getMemoryInfo(memInfo);
  mLowMemoryUsageThresholdMb=manager.getMemoryClass();
  mHighMemoryUsageThresholdMb=Math.min(mLowMemoryUsageThresholdMb * 3,(int)(memInfo.availMem / 3) >> 20);
  Message init=sWebCoreHandler.obtainMessage(WebCoreThread.INITIALIZE,this);
  sWebCoreHandler.sendMessage(init);
}
