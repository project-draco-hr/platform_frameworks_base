{
  int width=viewWidth;
  if (mSettings.getUseWideViewPort()) {
    if (mViewportWidth == -1) {
      if (mSettings.getLayoutAlgorithm() == WebSettings.LayoutAlgorithm.NORMAL || mSettings.getUseFixedViewport()) {
        width=WebView.DEFAULT_VIEWPORT_WIDTH;
      }
 else {
        width=Math.min(WebView.sMaxViewportWidth,Math.max(viewWidth,Math.max(WebView.DEFAULT_VIEWPORT_WIDTH,nativeGetContentMinPrefWidth())));
      }
    }
 else     if (mViewportWidth > 0) {
      if (mSettings.getUseFixedViewport()) {
        width=mViewportWidth;
      }
 else {
        width=Math.max(viewWidth,mViewportWidth);
      }
    }
 else     if (mSettings.getUseFixedViewport()) {
      width=mWebView.getViewWidth();
    }
 else {
      width=textwrapWidth;
    }
  }
  return width;
}
