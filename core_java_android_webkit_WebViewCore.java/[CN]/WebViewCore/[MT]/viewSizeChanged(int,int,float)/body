{
  if (DebugFlags.WEB_VIEW_CORE)   Log.v(LOGTAG,"CORE onSizeChanged");
  if (w == 0) {
    Log.w(LOGTAG,"skip viewSizeChanged as w is 0");
    return;
  }
  if (mSettings.getUseWideViewPort()) {
    int width;
    if (mViewportWidth == -1) {
      if (mSettings.getLayoutAlgorithm() == WebSettings.LayoutAlgorithm.NORMAL) {
        width=WebView.ZOOM_OUT_WIDTH;
      }
 else {
        width=Math.max(w,nativeGetContentMinPrefWidth());
      }
    }
 else {
      width=Math.max(w,mViewportWidth);
    }
    nativeSetSize(width,Math.round((float)width * h / w),Math.round(mWebView.mInZoomOverview ? w * scale / mWebView.mLastScale : w),scale,w,h);
  }
 else {
    nativeSetSize(w,h,w,scale,w,h);
  }
  boolean needInvalidate=(mCurrentViewWidth == 0);
  mCurrentViewWidth=w;
  mCurrentViewHeight=h;
  if (needInvalidate) {
    if (DebugFlags.WEB_VIEW_CORE)     Log.v(LOGTAG,"viewSizeChanged");
    contentDraw();
  }
  mEventHub.sendMessage(Message.obtain(null,EventHub.UPDATE_CACHE_AND_TEXT_ENTRY));
}
