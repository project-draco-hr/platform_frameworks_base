{
  DrawData draw=new DrawData();
  if (DebugFlags.WEB_VIEW_CORE)   Log.v(LOGTAG,"saveViewState start");
  draw.mBaseLayer=nativeRecordContent(mNativeClass,draw.mContentSize);
  boolean result=false;
  try {
    result=ViewStateSerializer.serializeViewState(stream,draw);
  }
 catch (  Throwable t) {
    Log.w(LOGTAG,"Failed to save view state",t);
  }
  callback.onReceiveValue(result);
  if (draw.mBaseLayer != 0) {
    if (mDrawIsScheduled) {
      mDrawIsScheduled=false;
      mEventHub.removeMessages(EventHub.WEBKIT_DRAW);
    }
    mLastDrawData=draw;
    webkitDraw(draw);
  }
}
