{
  mBroadcastReceiver=new BroadcastReceiver(){
    @Override public void onReceive(    Context context,    Intent intent){
      String action=intent.getAction();
      if (action.equals(WifiManager.NETWORK_STATE_CHANGED_ACTION)) {
        mHandler.sendMessage(mHandler.obtainMessage(WifiWatchdogHandler.MESSAGE_NETWORK_EVENT,intent.getParcelableExtra(WifiManager.EXTRA_NETWORK_INFO)));
      }
 else       if (action.equals(WifiManager.RSSI_CHANGED_ACTION)) {
        mHandler.sendEmptyMessage(WifiWatchdogHandler.RSSI_CHANGE_EVENT);
      }
 else       if (action.equals(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION)) {
        mHandler.sendEmptyMessage(WifiWatchdogHandler.SCAN_RESULTS_AVAILABLE);
      }
 else       if (action.equals(WifiManager.WIFI_STATE_CHANGED_ACTION)) {
        mHandler.sendMessage(mHandler.obtainMessage(WifiWatchdogHandler.WIFI_STATE_CHANGE,intent.getIntExtra(WifiManager.EXTRA_WIFI_STATE,4)));
      }
    }
  }
;
  mIntentFilter=new IntentFilter();
  mIntentFilter.addAction(WifiManager.NETWORK_STATE_CHANGED_ACTION);
  mIntentFilter.addAction(WifiManager.WIFI_STATE_CHANGED_ACTION);
  mIntentFilter.addAction(WifiManager.RSSI_CHANGED_ACTION);
  mIntentFilter.addAction(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION);
}
