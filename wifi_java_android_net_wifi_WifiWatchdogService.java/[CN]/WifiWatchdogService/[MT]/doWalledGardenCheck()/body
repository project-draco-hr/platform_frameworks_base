{
  if (!isWalledGardenTestEnabled()) {
    if (VDBG)     Slog.v(WWS_TAG,"Skipping walled garden check - disabled");
    mStatus.state=WatchdogState.CHECKS_COMPLETE;
    return;
  }
  long waitTime=waitTime(MIN_WALLED_GARDEN_INTERVAL,mStatus.lastWalledGardenCheckTime);
  if (waitTime > 0) {
    if (VDBG) {
      Slog.v(WWS_TAG,"Skipping walled garden check - wait " + waitTime + " ms.");
    }
    mStatus.state=WatchdogState.CHECKS_COMPLETE;
    return;
  }
  mStatus.lastWalledGardenCheckTime=SystemClock.elapsedRealtime();
  if (isWalledGardenConnection()) {
    if (DBG)     Slog.d(WWS_TAG,"Walled garden test complete - walled garden detected");
    mStatus.state=WatchdogState.WALLED_GARDEN_DETECTED;
  }
 else {
    if (DBG)     Slog.d(WWS_TAG,"Walled garden test complete - online");
    mStatus.state=WatchdogState.CHECKS_COMPLETE;
  }
}
