{
synchronized (mQueueAudioFocusLock) {
    if (mAudioManagerWithAudioFocus != null) {
      if (mDebug)       Log.d(mTag,"onCompletion() abandonning AudioFocus");
      mAudioManagerWithAudioFocus.abandonAudioFocus(null);
      mAudioManagerWithAudioFocus=null;
    }
 else {
      if (mDebug)       Log.d(mTag,"onCompletion() no need to abandon AudioFocus");
    }
  }
synchronized (mCmdQueue) {
    if (mCmdQueue.size() == 0) {
synchronized (mCompletionHandlingLock) {
        if (mLooper != null) {
          mLooper.quit();
        }
        mCompletionThread=null;
      }
    }
  }
}
