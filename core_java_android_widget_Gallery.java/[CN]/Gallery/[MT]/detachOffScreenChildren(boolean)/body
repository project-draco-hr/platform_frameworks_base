{
  int numChildren=getChildCount();
  int firstPosition=mFirstPosition;
  int start=0;
  int count=0;
  if (toLeft) {
    final int galleryLeft=mPaddingLeft;
    for (int i=0; i < numChildren; i++) {
      int n=mIsRtl ? (numChildren - 1 - i) : i;
      final View child=getChildAt(n);
      if (child.getRight() >= galleryLeft) {
        break;
      }
 else {
        start=n;
        count++;
        mRecycler.put(firstPosition + n,child);
      }
    }
    if (!mIsRtl) {
      start=0;
    }
  }
 else {
    final int galleryRight=getWidth() - mPaddingRight;
    for (int i=numChildren - 1; i >= 0; i--) {
      int n=mIsRtl ? numChildren - 1 - i : i;
      final View child=getChildAt(n);
      if (child.getLeft() <= galleryRight) {
        break;
      }
 else {
        start=n;
        count++;
        mRecycler.put(firstPosition + n,child);
      }
    }
    if (mIsRtl) {
      start=0;
    }
  }
  detachViewsFromParent(start,count);
  if (toLeft != mIsRtl) {
    mFirstPosition+=count;
  }
}
