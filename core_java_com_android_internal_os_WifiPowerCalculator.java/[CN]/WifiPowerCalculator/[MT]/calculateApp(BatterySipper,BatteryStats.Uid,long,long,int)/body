{
  final BatteryStats.ControllerActivityCounter counter=u.getWifiControllerActivity();
  if (counter == null) {
    return;
  }
  final long idleTime=counter.getIdleTimeCounter().getCountLocked(statsType);
  final long txTime=counter.getTxTimeCounters()[0].getCountLocked(statsType);
  final long rxTime=counter.getRxTimeCounter().getCountLocked(statsType);
  app.wifiRunningTimeMs=idleTime + rxTime + txTime;
  mTotalAppRunningTime+=app.wifiRunningTimeMs;
  app.wifiPowerMah=((idleTime * mIdleCurrentMa) + (txTime * mTxCurrentMa) + (rxTime * mRxCurrentMa)) / (1000 * 60 * 60);
  mTotalAppPowerDrain+=app.wifiPowerMah;
  app.wifiRxPackets=u.getNetworkActivityPackets(BatteryStats.NETWORK_WIFI_RX_DATA,statsType);
  app.wifiTxPackets=u.getNetworkActivityPackets(BatteryStats.NETWORK_WIFI_TX_DATA,statsType);
  app.wifiRxBytes=u.getNetworkActivityBytes(BatteryStats.NETWORK_WIFI_RX_DATA,statsType);
  app.wifiTxBytes=u.getNetworkActivityBytes(BatteryStats.NETWORK_WIFI_TX_DATA,statsType);
  if (DEBUG && app.wifiPowerMah != 0) {
    Log.d(TAG,"UID " + u.getUid() + ": idle="+ idleTime+ "ms rx="+ rxTime+ "ms tx="+ txTime+ "ms power="+ BatteryStatsHelper.makemAh(app.wifiPowerMah));
  }
}
