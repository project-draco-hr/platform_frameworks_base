{
  final long idleTime=u.getWifiControllerActivity(BatteryStats.CONTROLLER_IDLE_TIME,statsType);
  final long txTime=u.getWifiControllerActivity(BatteryStats.CONTROLLER_TX_TIME,statsType);
  final long rxTime=u.getWifiControllerActivity(BatteryStats.CONTROLLER_RX_TIME,statsType);
  app.wifiRunningTimeMs=idleTime + rxTime + txTime;
  app.wifiPowerMah=((idleTime * mIdleCurrentMa) + (txTime * mTxCurrentMa) + (rxTime * mRxCurrentMa)) / (1000 * 60 * 60);
  mTotalAppPowerDrain+=app.wifiPowerMah;
  app.wifiRxPackets=u.getNetworkActivityPackets(BatteryStats.NETWORK_WIFI_RX_DATA,statsType);
  app.wifiTxPackets=u.getNetworkActivityPackets(BatteryStats.NETWORK_WIFI_TX_DATA,statsType);
  app.wifiRxBytes=u.getNetworkActivityBytes(BatteryStats.NETWORK_WIFI_RX_DATA,statsType);
  app.wifiTxBytes=u.getNetworkActivityBytes(BatteryStats.NETWORK_WIFI_TX_DATA,statsType);
  if (DEBUG && app.wifiPowerMah != 0) {
    Log.d(TAG,"UID " + u.getUid() + ": idle="+ idleTime+ "ms rx="+ rxTime+ "ms tx="+ txTime+ "ms power="+ BatteryStatsHelper.makemAh(app.wifiPowerMah));
  }
}
