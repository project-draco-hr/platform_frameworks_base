{
  if (intent != null) {
    final MtpDocumentsProvider provider=MtpDocumentsProvider.getInstance();
    final UsbDevice device=intent.<UsbDevice>getParcelableExtra(EXTRA_DEVICE);
    try {
      Preconditions.checkNotNull(device);
switch (intent.getAction()) {
case ACTION_OPEN_DEVICE:
        provider.openDevice(device.getDeviceId());
      break;
case ACTION_CLOSE_DEVICE:
    provider.closeDevice(device.getDeviceId());
  break;
default :
throw new IllegalArgumentException("Received unknown intent action.");
}
}
 catch (IOException|InterruptedException|IllegalArgumentException error) {
logErrorMessage(error);
}
}
 else {
}
return updateForegroundState() ? START_STICKY : START_NOT_STICKY;
}
