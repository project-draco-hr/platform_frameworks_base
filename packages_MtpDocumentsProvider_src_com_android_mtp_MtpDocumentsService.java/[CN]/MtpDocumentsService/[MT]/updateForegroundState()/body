{
  final MtpDocumentsProvider provider=MtpDocumentsProvider.getInstance();
  final int[] deviceIds=provider.getOpenedDeviceIds();
  int notificationId=0;
  Notification notification=null;
  for (  final int deviceId : deviceIds) {
    try {
      final String title=getResources().getString(R.string.accessing_notification_title,provider.getDeviceName(deviceIds[0]));
      final String description=getResources().getString(R.string.accessing_notification_description);
      notificationId=deviceId;
      notification=new Notification.Builder(this).setLocalOnly(true).setContentTitle(title).setContentText(description).setSmallIcon(com.android.internal.R.drawable.stat_sys_data_usb).setCategory(Notification.CATEGORY_SYSTEM).setPriority(Notification.PRIORITY_LOW).build();
      mNotificationManager.notify(deviceId,notification);
    }
 catch (    IOException exp) {
      logErrorMessage(exp);
      try {
        provider.closeDevice(deviceIds[0]);
      }
 catch (      IOException|InterruptedException closeError) {
        logErrorMessage(closeError);
      }
    }
  }
  if (notification != null) {
    startForeground(notificationId,notification);
    return true;
  }
 else {
    stopForeground(true);
    stopSelf();
    return false;
  }
}
