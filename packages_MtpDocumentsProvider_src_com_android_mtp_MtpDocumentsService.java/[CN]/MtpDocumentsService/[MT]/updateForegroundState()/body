{
  final MtpDocumentsProvider provider=MtpDocumentsProvider.getInstance();
  final int[] deviceIds=provider.getOpenedDeviceIds();
  String message=null;
  if (deviceIds.length != 0) {
    if (deviceIds.length > 1) {
      message=deviceIds.length + " devices are being connected.";
    }
 else {
      try {
        message=provider.getDeviceName(deviceIds[0]) + " is being connected.";
      }
 catch (      IOException exp) {
        logErrorMessage(exp);
        try {
          provider.closeDevice(deviceIds[0]);
        }
 catch (        IOException|InterruptedException closeError) {
          logErrorMessage(closeError);
        }
      }
    }
  }
  if (message != null) {
    final Notification notification=new Notification.Builder(this).setContentTitle(message).setSmallIcon(android.R.drawable.ic_menu_camera).setCategory(Notification.CATEGORY_SYSTEM).setPriority(Notification.PRIORITY_LOW).build();
    startForeground(FOREGROUND_NOTIFICATION_ID,notification);
    return true;
  }
 else {
    stopForeground(true);
    stopSelf();
    return false;
  }
}
