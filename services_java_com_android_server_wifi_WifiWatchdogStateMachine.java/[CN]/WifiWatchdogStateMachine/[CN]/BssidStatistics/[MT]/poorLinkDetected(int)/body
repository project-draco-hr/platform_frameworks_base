{
  if (DBG)   logd("Poor link detected, rssi=" + rssi);
  long now=SystemClock.elapsedRealtime();
  long lastGood=now - mLastTimeGood;
  long lastPoor=now - mLastTimePoor;
  while (mGoodLinkTargetIndex > 0 && lastPoor >= GOOD_LINK_TARGET[mGoodLinkTargetIndex - 1].REDUCE_TIME_MS)   mGoodLinkTargetIndex--;
  mGoodLinkTargetCount=GOOD_LINK_TARGET[mGoodLinkTargetIndex].SAMPLE_COUNT;
  int from=rssi + GOOD_LINK_RSSI_RANGE_MIN;
  int to=rssi + GOOD_LINK_RSSI_RANGE_MAX;
  mGoodLinkTargetRssi=findRssiTarget(from,to,GOOD_LINK_LOSS_THRESHOLD);
  mGoodLinkTargetRssi+=GOOD_LINK_TARGET[mGoodLinkTargetIndex].RSSI_ADJ_DBM;
  if (mGoodLinkTargetIndex < GOOD_LINK_TARGET.length - 1)   mGoodLinkTargetIndex++;
  int p=0, pmax=MAX_AVOID_TIME.length - 1;
  while (p < pmax && rssi >= MAX_AVOID_TIME[p + 1].MIN_RSSI_DBM)   p++;
  long avoidMax=MAX_AVOID_TIME[p].TIME_MS;
  if (avoidMax <= 0)   return false;
  mBssidAvoidTimeMax=now + avoidMax;
  if (DBG)   logd("goodRssi=" + mGoodLinkTargetRssi + " goodCount="+ mGoodLinkTargetCount+ " lastGood="+ lastGood+ " lastPoor="+ lastPoor+ " avoidMax="+ avoidMax);
  return true;
}
