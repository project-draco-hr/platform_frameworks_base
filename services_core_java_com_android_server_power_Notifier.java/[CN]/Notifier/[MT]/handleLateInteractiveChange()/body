{
synchronized (mLock) {
    if (mInteractive) {
      mHandler.post(new Runnable(){
        @Override public void run(){
          mPolicy.finishedWakingUp();
        }
      }
);
    }
 else {
      if (mUserActivityPending) {
        mUserActivityPending=false;
        mHandler.removeMessages(MSG_USER_ACTIVITY);
      }
      final int why=translateOffReason(mInteractiveChangeReason);
      mHandler.post(new Runnable(){
        @Override public void run(){
          EventLog.writeEvent(EventLogTags.POWER_SCREEN_STATE,0,why,0,0);
          mPolicy.finishedGoingToSleep(why);
        }
      }
);
      mPendingInteractiveState=INTERACTIVE_STATE_ASLEEP;
      mPendingGoToSleepBroadcast=true;
      updatePendingBroadcastLocked();
    }
  }
}
