{
  String rootPath=root.path.getAbsolutePath();
  final String path=file.getAbsolutePath();
  if (path.equals(rootPath)) {
    return DocumentsContract.ROOT_DOC_ID;
  }
  if (!rootPath.endsWith("/")) {
    rootPath+="/";
  }
  if (!path.startsWith(rootPath)) {
    throw new IllegalArgumentException("File " + path + " outside root "+ root.path);
  }
 else {
    return path.substring(rootPath.length());
  }
}
