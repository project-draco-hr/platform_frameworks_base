{
  final File before=getFileForDocId(docId);
  final File after=new File(before.getParentFile(),displayName);
  if (after.exists()) {
    throw new IllegalStateException("Already exists " + after);
  }
  if (!before.renameTo(after)) {
    throw new IllegalStateException("Failed to rename to " + after);
  }
  final String afterDocId=getDocIdForFile(after);
  if (!TextUtils.equals(docId,afterDocId)) {
    return afterDocId;
  }
 else {
    return null;
  }
}
