{
  int flags=0;
  if (file.isDirectory()) {
    flags|=DocumentsContract.FLAG_SUPPORTS_SEARCH;
  }
  if (file.isDirectory() && file.canWrite()) {
    flags|=DocumentsContract.FLAG_SUPPORTS_CREATE;
  }
  if (file.canWrite()) {
    flags|=DocumentsContract.FLAG_SUPPORTS_RENAME;
    flags|=DocumentsContract.FLAG_SUPPORTS_DELETE;
  }
  final String mimeType=getTypeForFile(file);
  if (mimeType.startsWith("image/")) {
    flags|=DocumentsContract.FLAG_SUPPORTS_THUMBNAIL;
  }
  final String docId=fileToDocId(root,file);
  final long id=docId.hashCode();
  cursor.addRow(new Object[]{id,file.getName(),file.length(),docId,mimeType,file.lastModified(),flags});
}
