{
  cancelAnimator(mAlphaAnimator);
  int endAlpha=(int)(alpha * 255);
  if (!animate) {
    setImageAlpha(endAlpha);
  }
 else {
    int currentAlpha=getImageAlpha();
    ValueAnimator animator=ValueAnimator.ofInt(currentAlpha,endAlpha);
    mAlphaAnimator=animator;
    animator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener(){
      @Override public void onAnimationUpdate(      ValueAnimator animation){
        setImageAlpha((int)animation.getAnimatedValue());
      }
    }
);
    animator.addListener(mAlphaEndListener);
    if (interpolator == null) {
      interpolator=alpha == 0.0f ? mDisappearInterpolator : mAppearInterpolator;
    }
    animator.setInterpolator(interpolator);
    if (duration == -1) {
      float durationFactor=Math.abs(currentAlpha - endAlpha) / 255f;
      durationFactor=Math.min(1.0f,durationFactor);
      duration=(long)(NORMAL_ANIMATION_DURATION * durationFactor);
    }
    animator.setDuration(duration);
    if (runnable != null) {
      animator.addListener(getEndListener(runnable));
    }
    animator.start();
  }
}
