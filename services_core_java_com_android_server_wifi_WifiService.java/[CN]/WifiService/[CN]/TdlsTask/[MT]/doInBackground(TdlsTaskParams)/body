{
  TdlsTaskParams param=params[0];
  String remoteIpAddress=param.remoteIpAddress.trim();
  boolean enable=param.enable;
  String macAddress=null;
  BufferedReader reader=null;
  try {
    reader=new BufferedReader(new FileReader("/proc/net/arp"));
    String line=reader.readLine();
    while ((line=reader.readLine()) != null) {
      String[] tokens=line.split("[ ]+");
      if (tokens.length < 6) {
        continue;
      }
      String ip=tokens[0];
      String mac=tokens[3];
      if (remoteIpAddress.equals(ip)) {
        macAddress=mac;
        break;
      }
    }
    if (macAddress == null) {
      Slog.w(TAG,"Did not find remoteAddress {" + remoteIpAddress + "} in "+ "/proc/net/arp");
    }
 else {
      enableTdlsWithMacAddress(macAddress,enable);
    }
  }
 catch (  FileNotFoundException e) {
    Slog.e(TAG,"Could not open /proc/net/arp to lookup mac address");
  }
catch (  IOException e) {
    Slog.e(TAG,"Could not read /proc/net/arp to lookup mac address");
  }
 finally {
    try {
      if (reader != null) {
        reader.close();
      }
    }
 catch (    IOException e) {
    }
  }
  return 0;
}
