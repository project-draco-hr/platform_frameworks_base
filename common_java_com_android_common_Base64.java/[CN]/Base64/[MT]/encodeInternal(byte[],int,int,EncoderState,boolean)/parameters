byte[] input
int offset
int len
EncoderState estate
boolean finish
