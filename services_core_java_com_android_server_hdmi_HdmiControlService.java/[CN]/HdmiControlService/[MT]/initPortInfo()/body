{
  assertRunOnServiceThread();
  HdmiPortInfo[] cecPortInfo=null;
  if (mCecController != null) {
    cecPortInfo=mCecController.getPortInfos();
  }
  if (cecPortInfo == null) {
    return;
  }
  SparseArray<HdmiPortInfo> portInfoMap=new SparseArray<>();
  SparseIntArray portIdMap=new SparseIntArray();
  for (  HdmiPortInfo info : cecPortInfo) {
    portIdMap.put(info.getAddress(),info.getId());
    portInfoMap.put(info.getId(),info);
  }
  mPortIdMap=new UnmodifiableSparseIntArray(portIdMap);
  mPortInfoMap=new UnmodifiableSparseArray<>(portInfoMap);
  if (mMhlController == null) {
    mPortInfo=Collections.unmodifiableList(Arrays.asList(cecPortInfo));
    return;
  }
 else {
    HdmiPortInfo[] mhlPortInfo=mMhlController.getPortInfos();
    ArraySet<Integer> mhlSupportedPorts=new ArraySet<Integer>(mhlPortInfo.length);
    for (    HdmiPortInfo info : mhlPortInfo) {
      if (info.isMhlSupported()) {
        mhlSupportedPorts.add(info.getId());
      }
    }
    ArrayList<HdmiPortInfo> result=new ArrayList<>(cecPortInfo.length);
    for (    HdmiPortInfo info : cecPortInfo) {
      if (mhlSupportedPorts.contains(info.getId())) {
        result.add(new HdmiPortInfo(info.getId(),info.getType(),info.getAddress(),info.isCecSupported(),true,info.isArcSupported()));
      }
 else {
        result.add(info);
      }
    }
    mPortInfo=Collections.unmodifiableList(result);
  }
}
