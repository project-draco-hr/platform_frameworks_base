{
  assertRunOnServiceThread();
  if (tv() == null)   return;
  final int lastInput=contentOn ? tv().getActivePortId() : Constants.INVALID_PORT_ID;
  if (portId != Constants.INVALID_PORT_ID) {
    tv().doManualPortSwitching(portId,new IHdmiControlCallback.Stub(){
      @Override public void onComplete(      int result) throws RemoteException {
        setLastInputForMhl(lastInput);
      }
    }
);
  }
  tv().setActivePortId(portId);
  HdmiMhlLocalDeviceStub device=mMhlController.getLocalDevice(portId);
  HdmiDeviceInfo info=(device != null) ? device.getInfo() : mPortDeviceMap.get(portId,HdmiDeviceInfo.INACTIVE_DEVICE);
  invokeInputChangeListener(info);
}
