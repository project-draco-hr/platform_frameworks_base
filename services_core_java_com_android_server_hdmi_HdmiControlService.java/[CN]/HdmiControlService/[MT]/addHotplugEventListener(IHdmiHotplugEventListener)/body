{
  final HotplugEventListenerRecord record=new HotplugEventListenerRecord(listener);
  try {
    listener.asBinder().linkToDeath(record,0);
  }
 catch (  RemoteException e) {
    Slog.w(TAG,"Listener already died");
    return;
  }
synchronized (mLock) {
    mHotplugEventListenerRecords.add(record);
  }
  runOnServiceThread(new Runnable(){
    @Override public void run(){
synchronized (mLock) {
        if (!mHotplugEventListenerRecords.contains(record))         return;
      }
      for (      HdmiPortInfo port : mPortInfo) {
        HdmiHotplugEvent event=new HdmiHotplugEvent(port.getId(),mCecController.isConnected(port.getId()));
synchronized (mLock) {
          invokeHotplugEventListenerLocked(listener,event);
        }
      }
    }
  }
);
}
