{
  mIoThread.start();
  mCecController=HdmiCecController.create(this);
  if (mCecController != null) {
    mCecController.initializeLocalDevices(mLocalDevices,new AddressAllocationCallback(){
      private final SparseIntArray mAllocated=new SparseIntArray();
      @Override public void onAddressAllocated(      int deviceType,      int logicalAddress){
        mAllocated.append(deviceType,logicalAddress);
        int tvAddress=mAllocated.get(HdmiCec.DEVICE_TV,-1);
        if (mLocalDevices.length == mAllocated.size() && tvAddress != -1) {
          launchDeviceDiscovery(tvAddress);
        }
      }
    }
);
  }
 else {
    Slog.i(TAG,"Device does not support HDMI-CEC.");
  }
  mMhlController=HdmiMhlController.create(this);
  if (mMhlController == null) {
    Slog.i(TAG,"Device does not support MHL-control.");
  }
  publishBinderService(Context.HDMI_CONTROL_SERVICE,new BinderService());
}
