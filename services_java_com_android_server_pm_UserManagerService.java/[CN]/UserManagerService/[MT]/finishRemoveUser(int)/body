{
  if (DBG)   Slog.i(LOG_TAG,"finishRemoveUser " + userHandle);
synchronized (mInstallLock) {
synchronized (mPackagesLock) {
      removeUserStateLocked(userHandle);
    }
  }
  if (DBG)   Slog.i(LOG_TAG,"Removed user " + userHandle + ", sending broadcast");
  long ident=Binder.clearCallingIdentity();
  try {
    Intent addedIntent=new Intent(Intent.ACTION_USER_REMOVED);
    addedIntent.putExtra(Intent.EXTRA_USER_HANDLE,userHandle);
    mContext.sendBroadcastAsUser(addedIntent,UserHandle.ALL,android.Manifest.permission.MANAGE_USERS);
  }
  finally {
    Binder.restoreCallingIdentity(ident);
  }
}
