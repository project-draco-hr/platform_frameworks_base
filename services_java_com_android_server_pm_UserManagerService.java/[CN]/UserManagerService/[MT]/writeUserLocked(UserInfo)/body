{
  FileOutputStream fos=null;
  try {
    final File mUserFile=new File(mUsersDir,userInfo.id + ".xml");
    fos=new FileOutputStream(mUserFile);
    final BufferedOutputStream bos=new BufferedOutputStream(fos);
    final XmlSerializer serializer=new FastXmlSerializer();
    serializer.setOutput(bos,"utf-8");
    serializer.startDocument(null,true);
    serializer.setFeature("http://xmlpull.org/v1/doc/features.html#indent-output",true);
    serializer.startTag(null,TAG_USER);
    serializer.attribute(null,ATTR_ID,Integer.toString(userInfo.id));
    serializer.attribute(null,ATTR_FLAGS,Integer.toString(userInfo.flags));
    if (userInfo.iconPath != null) {
      serializer.attribute(null,ATTR_ICON_PATH,userInfo.iconPath);
    }
    serializer.startTag(null,TAG_NAME);
    serializer.text(userInfo.name);
    serializer.endTag(null,TAG_NAME);
    serializer.endTag(null,TAG_USER);
    serializer.endDocument();
  }
 catch (  IOException ioe) {
    Slog.e(LOG_TAG,"Error writing user info " + userInfo.id + "\n"+ ioe);
  }
 finally {
    if (fos != null) {
      try {
        fos.close();
      }
 catch (      IOException ioe) {
      }
    }
  }
}
