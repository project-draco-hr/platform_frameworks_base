{
  int backoffIndex=Math.min(pinState.failedAttempts / BACKOFF_INC_INTERVAL,BACKOFF_TIMES.length - 1);
  int backoffTime=(pinState.failedAttempts % BACKOFF_INC_INTERVAL) == 0 ? BACKOFF_TIMES[backoffIndex] : 0;
  return (int)Math.max(backoffTime + pinState.lastAttemptTime - System.currentTimeMillis(),0);
}
