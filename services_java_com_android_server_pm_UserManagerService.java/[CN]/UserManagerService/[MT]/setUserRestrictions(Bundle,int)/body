{
  checkManageUsersPermission("setUserRestrictions");
  if (restrictions == null)   return;
synchronized (mPackagesLock) {
    if (hasRestrictionsPinLocked(userId) && restrictions.getBoolean(UserManager.DISALLOW_APP_RESTRICTIONS,false)) {
      restrictions.putBoolean(UserManager.DISALLOW_APP_RESTRICTIONS,false);
    }
    mUserRestrictions.get(userId).clear();
    mUserRestrictions.get(userId).putAll(restrictions);
    writeUserLocked(mUsers.get(userId));
  }
}
