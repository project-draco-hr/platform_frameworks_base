{
  final boolean reallyUseQuotedPrintable;
  final boolean appendCharset;
  final String addressData;
{
    PostalStruct postalStruct=tryConstructPostalStruct(contentValues);
    if (postalStruct == null) {
      if (emitLineEveryTime) {
        reallyUseQuotedPrintable=false;
        appendCharset=false;
        addressData="";
      }
 else {
        return;
      }
    }
 else {
      reallyUseQuotedPrintable=postalStruct.reallyUseQuotedPrintable;
      appendCharset=postalStruct.appendCharset;
      addressData=postalStruct.addressData;
    }
  }
  List<String> attributeList=new ArrayList<String>();
  if (isPrimary) {
    attributeList.add(Constants.ATTR_TYPE_PREF);
  }
switch (type) {
case StructuredPostal.TYPE_HOME:
{
      attributeList.add(Constants.ATTR_TYPE_HOME);
      break;
    }
case StructuredPostal.TYPE_WORK:
{
    attributeList.add(Constants.ATTR_TYPE_WORK);
    break;
  }
case StructuredPostal.TYPE_CUSTOM:
{
  if (mUsesAndroidProperty && !TextUtils.isEmpty(label) && VCardUtils.containsOnlyAlphaDigitHyphen(label)) {
    attributeList.add("X-" + label);
  }
  break;
}
case StructuredPostal.TYPE_OTHER:
{
break;
}
default :
{
Log.e(LOG_TAG,"Unknown StructuredPostal type: " + type);
break;
}
}
builder.append(Constants.PROPERTY_ADR);
builder.append(VCARD_ATTR_SEPARATOR);
{
boolean shouldAppendAttrSeparator=false;
if (!attributeList.isEmpty()) {
appendTypeAttributes(builder,attributeList);
shouldAppendAttrSeparator=true;
}
if (appendCharset) {
if (shouldAppendAttrSeparator) {
builder.append(VCARD_ATTR_SEPARATOR);
}
builder.append(mVCardAttributeCharset);
shouldAppendAttrSeparator=true;
}
if (reallyUseQuotedPrintable) {
if (shouldAppendAttrSeparator) {
builder.append(VCARD_ATTR_SEPARATOR);
}
builder.append(VCARD_ATTR_ENCODING_QP);
shouldAppendAttrSeparator=true;
}
}
builder.append(VCARD_DATA_SEPARATOR);
builder.append(addressData);
builder.append(VCARD_COL_SEPARATOR);
}
