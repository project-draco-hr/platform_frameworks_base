{
  if (ANDROID_USERAGENT == null) {
    StringBuffer arg=new StringBuffer();
    final String version=Build.VERSION.RELEASE;
    if (version.length() > 0) {
      arg.append(version);
    }
 else {
      arg.append("1.0");
    }
    arg.append("; ");
    final Locale l=Locale.getDefault();
    final String language=l.getLanguage();
    if (language != null) {
      arg.append(language.toLowerCase());
      final String country=l.getCountry();
      if (country != null) {
        arg.append("-");
        arg.append(country.toLowerCase());
      }
    }
 else {
      arg.append("en");
    }
    final String device=Build.DEVICE;
    if (device.length() > 0) {
      arg.append("; ");
      arg.append(device);
    }
    final String base=context.getResources().getText(com.android.internal.R.string.web_user_agent).toString();
    ANDROID_USERAGENT=String.format(base,arg);
    mUserAgent=ANDROID_USERAGENT;
  }
  mEventHandler=new EventHandler();
}
