{
  InputStream inputStream=zipFile.getInputStream(entry);
  try {
    File tempFile=File.createTempFile("tmp","tmp",binaryDir);
    String tempFilePath=tempFile.getPath();
    if (!FileUtils.copyToFile(inputStream,tempFile) || !tempFile.setLastModified(entry.getTime()) || FileUtils.setPermissions(tempFilePath,FileUtils.S_IRUSR | FileUtils.S_IWUSR | FileUtils.S_IRGRP| FileUtils.S_IXUSR| FileUtils.S_IXGRP| FileUtils.S_IXOTH| FileUtils.S_IROTH,-1,-1) != 0 || !tempFile.renameTo(binaryFile)) {
      tempFile.delete();
      throw new IOException("Couldn't create cached binary " + binaryFile + " in "+ binaryDir);
    }
  }
  finally {
    inputStream.close();
  }
}
