{
  mStack=stack;
  mDisplayContent=stack.getDisplayContent();
  final int displayId=mDisplayContent.getDisplayId();
  if (DEBUG)   Slog.v(TAG,"Ctor: displayId=" + displayId);
  SurfaceControl.openTransaction();
  try {
    if (WindowManagerService.DEBUG_SURFACE_TRACE) {
      mDimSurface=new WindowStateAnimator.SurfaceTrace(service.mFxSession,"DimSurface",16,16,PixelFormat.OPAQUE,SurfaceControl.FX_SURFACE_DIM | SurfaceControl.HIDDEN);
    }
 else {
      mDimSurface=new SurfaceControl(service.mFxSession,TAG,16,16,PixelFormat.OPAQUE,SurfaceControl.FX_SURFACE_DIM | SurfaceControl.HIDDEN);
    }
    if (WindowManagerService.SHOW_TRANSACTIONS || WindowManagerService.SHOW_SURFACE_ALLOC)     Slog.i(TAG,"  DIM " + mDimSurface + ": CREATE");
    mDimSurface.setLayerStack(displayId);
  }
 catch (  Exception e) {
    Slog.e(WindowManagerService.TAG,"Exception creating Dim surface",e);
  }
 finally {
    SurfaceControl.closeTransaction();
  }
}
