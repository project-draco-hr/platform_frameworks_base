{
  final int dw, dh;
  final float xPos, yPos;
  if (!mStack.isFullscreen()) {
    dw=mBounds.width();
    dh=mBounds.height();
    xPos=mBounds.left;
    yPos=mBounds.top;
  }
 else {
    final DisplayInfo info=mDisplayContent.getDisplayInfo();
    dw=(int)(info.logicalWidth * 1.5);
    dh=(int)(info.logicalHeight * 1.5);
    xPos=-1 * dw / 6;
    yPos=-1 * dh / 6;
  }
  try {
    if (!inTransaction) {
      SurfaceControl.openTransaction();
    }
    mDimSurface.setPosition(xPos,yPos);
    mDimSurface.setSize(dw,dh);
    mDimSurface.setLayer(layer);
  }
 catch (  RuntimeException e) {
    Slog.w(TAG,"Failure setting size or layer",e);
  }
 finally {
    if (!inTransaction) {
      SurfaceControl.closeTransaction();
    }
  }
  mLastBounds.set(mBounds);
  mLayer=layer;
}
