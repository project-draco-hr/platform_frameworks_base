{
  if (DEBUG)   Slog.v(TAG,"show: layer=" + layer + " alpha="+ alpha+ " duration="+ duration);
  if (mDimSurface == null) {
    Slog.e(TAG,"show: no Surface");
    mTargetAlpha=mAlpha=0;
    return;
  }
  final int dw, dh;
  final float xPos, yPos;
  if (!mStack.isFullscreen()) {
    dw=mBounds.width();
    dh=mBounds.height();
    xPos=mBounds.left;
    yPos=mBounds.top;
  }
 else {
    final DisplayInfo info=mDisplayContent.getDisplayInfo();
    dw=(int)(info.logicalWidth * 1.5);
    dh=(int)(info.logicalHeight * 1.5);
    xPos=-1 * dw / 6;
    yPos=-1 * dh / 6;
  }
  if (!mLastBounds.equals(mBounds) || mLayer != layer) {
    try {
      mDimSurface.setPosition(xPos,yPos);
      mDimSurface.setSize(dw,dh);
      mDimSurface.setLayer(layer);
    }
 catch (    RuntimeException e) {
      Slog.w(TAG,"Failure setting size or layer",e);
    }
    mLastBounds.set(mBounds);
    mLayer=layer;
  }
  long curTime=SystemClock.uptimeMillis();
  final boolean animating=isAnimating();
  if ((animating && (mTargetAlpha != alpha || durationEndsEarlier(duration))) || (!animating && mAlpha != alpha)) {
    if (duration <= 0) {
      setAlpha(alpha);
    }
 else {
      mStartAlpha=mAlpha;
      mStartTime=curTime;
      mDuration=duration;
    }
  }
  if (DEBUG)   Slog.v(TAG,"show: mStartAlpha=" + mStartAlpha + " mStartTime="+ mStartTime);
  mTargetAlpha=alpha;
}
