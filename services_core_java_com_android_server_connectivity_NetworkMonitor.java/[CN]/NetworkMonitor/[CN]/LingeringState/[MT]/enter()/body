{
  mBroadcastReceiver=new LingerExpiredBroadcastReceiver();
  mContext.registerReceiver(mBroadcastReceiver,new IntentFilter(ACTION_LINGER_EXPIRED));
  Intent intent=new Intent(ACTION_LINGER_EXPIRED,null);
  intent.putExtra(EXTRA_NETID,String.valueOf(mNetworkAgentInfo.network.netId));
  intent.putExtra(EXTRA_TOKEN,String.valueOf(++mLingerToken));
  mIntent=PendingIntent.getBroadcast(mContext,0,intent,0);
  long wakeupTime=SystemClock.elapsedRealtime() + mLingerDelayMs;
  mAlarmManager.setWindow(AlarmManager.ELAPSED_REALTIME_WAKEUP,wakeupTime,mLingerDelayMs / 6,mIntent);
}
