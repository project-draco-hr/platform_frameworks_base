{
  mConnectivityServiceHandler.sendMessage(obtainMessage(EVENT_NETWORK_TESTED,NETWORK_TEST_RESULT_INVALID,0,mNetworkAgentInfo));
  final Intent intent=new Intent(Intent.ACTION_SEND);
  intent.setData(Uri.fromParts("netid",Integer.toString(mNetworkAgentInfo.network.netId),mCaptivePortalLoggedInResponseToken));
  intent.setComponent(new ComponentName("com.android.captiveportallogin","com.android.captiveportallogin.CaptivePortalLoginActivity"));
  intent.setFlags(Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT | Intent.FLAG_ACTIVITY_NEW_TASK);
  if (mCaptivePortalLoggedInBroadcastReceiver == null) {
    mCaptivePortalLoggedInBroadcastReceiver=new CaptivePortalLoggedInBroadcastReceiver();
    final IntentFilter filter=new IntentFilter(ACTION_CAPTIVE_PORTAL_LOGGED_IN);
    mContext.registerReceiver(mCaptivePortalLoggedInBroadcastReceiver,filter);
  }
  Message message=obtainMessage(EVENT_PROVISIONING_NOTIFICATION,1,mNetworkAgentInfo.network.netId,PendingIntent.getActivity(mContext,0,intent,0));
  mConnectivityServiceHandler.sendMessage(message);
}
