{
  SmsMessage message=SmsMessage.createFromPdu(SMS_PP_MESSAGE_3_1_1);
  assertTrue("message is SMS-PP data download",message.isUsimDataDownload());
  mCm.expectSendEnvelope(SMS_PP_ENVELOPE_3_1_1,0x90,0x00,"");
  mCm.expectAcknowledgeGsmSms(true,0);
  mHandler.startDataDownload(message);
  mCm.assertExpectedMethodsCalled();
  mCm.expectSendEnvelope(SMS_PP_ENVELOPE_3_1_1,0x90,0x00,"0123456789");
  mCm.expectAcknowledgeGsmSmsWithPdu(true,"00077f16050123456789");
  mHandler.startDataDownload(message);
  mCm.assertExpectedMethodsCalled();
  mCm.expectSendEnvelope(SMS_PP_ENVELOPE_3_1_1,0x62,0xff,"0123456789abcdef");
  mCm.expectAcknowledgeGsmSmsWithPdu(false,"00d5077f16080123456789abcdef");
  mHandler.startDataDownload(message);
  mCm.assertExpectedMethodsCalled();
}
