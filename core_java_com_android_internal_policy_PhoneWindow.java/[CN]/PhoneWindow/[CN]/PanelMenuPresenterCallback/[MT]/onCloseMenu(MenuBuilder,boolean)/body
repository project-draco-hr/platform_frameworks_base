{
  final Menu parentMenu=menu.getRootMenu();
  final boolean isSubMenu=parentMenu != menu;
  final PanelFeatureState panel=findMenuPanel(isSubMenu ? parentMenu : menu);
  if (panel != null) {
    if (isSubMenu) {
      callOnPanelClosed(panel.featureId,panel,parentMenu);
      closePanel(panel,true);
    }
 else {
      closePanel(panel,allMenusAreClosing);
    }
  }
}
