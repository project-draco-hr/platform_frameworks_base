{
  DrmConvertedStatus convertedStatus=null;
  int result=Downloads.Impl.STATUS_UNKNOWN_ERROR;
  if (mDrmClient != null && mConvertSessionId >= 0) {
    try {
      convertedStatus=mDrmClient.closeConvertSession(mConvertSessionId);
      if (convertedStatus == null || convertedStatus.statusCode != DrmConvertedStatus.STATUS_OK || convertedStatus.convertedData == null) {
        result=Downloads.Impl.STATUS_NOT_ACCEPTABLE;
      }
 else {
        RandomAccessFile rndAccessFile=null;
        try {
          rndAccessFile=new RandomAccessFile(filename,"rw");
          rndAccessFile.seek(convertedStatus.offset);
          rndAccessFile.write(convertedStatus.convertedData);
          result=Downloads.Impl.STATUS_SUCCESS;
        }
 catch (        FileNotFoundException e) {
          result=Downloads.Impl.STATUS_FILE_ERROR;
          Log.w(TAG,"File: " + filename + " could not be found.",e);
        }
catch (        IOException e) {
          result=Downloads.Impl.STATUS_FILE_ERROR;
          Log.w(TAG,"Could not access File: " + filename + " .",e);
        }
catch (        IllegalArgumentException e) {
          result=Downloads.Impl.STATUS_FILE_ERROR;
          Log.w(TAG,"Could not open file in mode: rw",e);
        }
catch (        SecurityException e) {
          Log.w(TAG,"Access to File: " + filename + " was denied denied by SecurityManager.",e);
        }
 finally {
          if (rndAccessFile != null) {
            try {
              rndAccessFile.close();
            }
 catch (            IOException e) {
              result=Downloads.Impl.STATUS_FILE_ERROR;
              Log.w(TAG,"Failed to close File:" + filename + ".",e);
            }
          }
        }
      }
    }
 catch (    IllegalStateException e) {
      Log.w(TAG,"Could not close convertsession. Convertsession: " + mConvertSessionId,e);
    }
  }
  return result;
}
