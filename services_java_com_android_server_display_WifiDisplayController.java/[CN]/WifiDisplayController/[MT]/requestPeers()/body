{
  mWifiP2pManager.requestPeers(mWifiP2pChannel,new PeerListListener(){
    @Override public void onPeersAvailable(    WifiP2pDeviceList peers){
      if (DEBUG) {
        Slog.d(TAG,"Received list of peers.");
      }
      mKnownWifiDisplayPeers.clear();
      for (      WifiP2pDevice device : peers.getDeviceList()) {
        if (DEBUG) {
          Slog.d(TAG,"  " + describeWifiP2pDevice(device));
        }
        if (isWifiDisplay(device)) {
          mKnownWifiDisplayPeers.add(device);
        }
      }
      if (!mKnownWifiDisplayPeers.isEmpty()) {
        final WifiP2pDevice device=mKnownWifiDisplayPeers.get(0);
        if (device.status == WifiP2pDevice.AVAILABLE) {
          connect(device);
        }
      }
    }
  }
);
}
