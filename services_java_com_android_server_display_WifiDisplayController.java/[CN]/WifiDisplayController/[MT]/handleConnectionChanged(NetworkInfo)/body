{
  mNetworkInfo=networkInfo;
  if (mWfdEnabled && networkInfo.isConnected()) {
    if (mDesiredDevice != null) {
      mWifiP2pManager.requestGroupInfo(mWifiP2pChannel,new GroupInfoListener(){
        @Override public void onGroupInfoAvailable(        WifiP2pGroup info){
          if (DEBUG) {
            Slog.d(TAG,"Received group info: " + describeWifiP2pGroup(info));
          }
          if (mConnectingDevice != null && !info.contains(mConnectingDevice)) {
            Slog.i(TAG,"Aborting connection to Wifi display because " + "the current P2P group does not contain the device " + "we expected to find: "+ mConnectingDevice.deviceName);
            handleConnectionFailure(false);
            return;
          }
          if (mDesiredDevice != null && !info.contains(mDesiredDevice)) {
            disconnect();
            return;
          }
          if (mConnectingDevice != null && mConnectingDevice == mDesiredDevice) {
            Slog.i(TAG,"Connected to Wifi display: " + mConnectingDevice.deviceName);
            mHandler.removeCallbacks(mConnectionTimeout);
            mConnectedDeviceGroupInfo=info;
            mConnectedDevice=mConnectingDevice;
            mConnectingDevice=null;
            updateConnection();
          }
        }
      }
);
    }
  }
 else {
    disconnect();
    if (mWfdEnabled) {
      requestPeers();
    }
  }
}
