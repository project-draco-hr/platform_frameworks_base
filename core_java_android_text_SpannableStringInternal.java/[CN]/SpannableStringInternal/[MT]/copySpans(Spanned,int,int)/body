{
  Object[] spans=src.getSpans(start,end,Object.class);
  for (int i=0; i < spans.length; i++) {
    int st=src.getSpanStart(spans[i]);
    int en=src.getSpanEnd(spans[i]);
    int fl=src.getSpanFlags(spans[i]);
    if (st < start)     st=start;
    if (en > end)     en=end;
    setSpan(spans[i],st - start,en - start,fl);
  }
}
