{
  final boolean isV30=(version == V30);
  int vcardType=(isV30 ? VCardConfig.VCARD_TYPE_V30_GENERIC_UTF8 : VCardConfig.VCARD_TYPE_V21_GENERIC_UTF8);
  VCardComposer composer=new VCardComposer(new CustomMockContext(resolver),vcardType);
  composer.addHandler(handler);
  if (!composer.init(VCardComposer.CONTACTS_TEST_CONTENT_URI,null,null,null)) {
    fail("init() failed. Reason: " + composer.getErrorReason());
  }
  assertFalse(composer.isAfterLast());
  assertTrue(composer.createOneEntry());
  assertTrue(composer.isAfterLast());
  composer.terminate();
}
