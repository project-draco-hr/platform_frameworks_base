{
  LayoutInflater inflater=LayoutInflater.from(mContext);
  mWindowContent=inflater.inflate(com.android.internal.R.layout.overlay_display_window,null);
  mWindowContent.setOnTouchListener(mOnTouchListener);
  mTextureView=(TextureView)mWindowContent.findViewById(com.android.internal.R.id.overlay_display_window_texture);
  mTextureView.setPivotX(0);
  mTextureView.setPivotY(0);
  mTextureView.getLayoutParams().width=mWidth;
  mTextureView.getLayoutParams().height=mHeight;
  mTextureView.setOpaque(false);
  mTextureView.setSurfaceTextureListener(mSurfaceTextureListener);
  mTitleTextView=(TextView)mWindowContent.findViewById(com.android.internal.R.id.overlay_display_window_title);
  mTitleTextView.setText(mTitle);
  mWindowParams=new WindowManager.LayoutParams(WindowManager.LayoutParams.TYPE_DISPLAY_OVERLAY);
  mWindowParams.flags|=WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN | WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS | WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE| WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL| WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED;
  if (DISABLE_MOVE_AND_RESIZE) {
    mWindowParams.flags|=WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE;
  }
  mWindowParams.privateFlags|=WindowManager.LayoutParams.PRIVATE_FLAG_FORCE_HARDWARE_ACCELERATED;
  mWindowParams.alpha=WINDOW_ALPHA;
  mWindowParams.gravity=Gravity.TOP | Gravity.LEFT;
  mWindowParams.setTitle(mTitle);
  mGestureDetector=new GestureDetector(mContext,mOnGestureListener);
  mScaleGestureDetector=new ScaleGestureDetector(mContext,mOnScaleGestureListener);
  mWindowX=(mGravity & Gravity.LEFT) == Gravity.LEFT ? 0 : mDefaultDisplayInfo.logicalWidth;
  mWindowY=(mGravity & Gravity.TOP) == Gravity.TOP ? 0 : mDefaultDisplayInfo.logicalHeight;
  mWindowScale=INITIAL_SCALE;
}
