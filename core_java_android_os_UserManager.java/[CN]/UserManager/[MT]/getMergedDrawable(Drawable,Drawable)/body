{
  final int width=icon.getIntrinsicWidth();
  final int height=icon.getIntrinsicHeight();
  Bitmap bitmap=Bitmap.createBitmap(width,height,Config.ARGB_8888);
  Canvas canvas=new Canvas(bitmap);
  icon.setBounds(0,0,width,height);
  icon.draw(canvas);
  badge.setBounds(0,0,width,height);
  badge.draw(canvas);
  BitmapDrawable merged=new BitmapDrawable(bitmap);
  if (icon instanceof BitmapDrawable) {
    merged.setTargetDensity(((BitmapDrawable)icon).getBitmap().getDensity());
  }
  return merged;
}
