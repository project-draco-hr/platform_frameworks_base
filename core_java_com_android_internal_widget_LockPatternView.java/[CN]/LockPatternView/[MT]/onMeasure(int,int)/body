{
  final WindowManager wm=(WindowManager)getContext().getSystemService(Context.WINDOW_SERVICE);
  final int width=wm.getDefaultDisplay().getWidth();
  final int height=wm.getDefaultDisplay().getHeight();
  int squareSide=Math.min(width,height);
  if (width > height) {
    squareSide-=STATUS_BAR_HEIGHT;
  }
  setMeasuredDimension(squareSide,squareSide);
}
