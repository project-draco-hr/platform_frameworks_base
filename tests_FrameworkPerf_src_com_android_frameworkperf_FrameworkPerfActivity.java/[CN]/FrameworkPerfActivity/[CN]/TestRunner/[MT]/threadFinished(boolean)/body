{
synchronized (this) {
    if (foreground) {
      mForegroundRunning=false;
    }
 else {
      mBackgroundRunning=false;
    }
    if (!mBackgroundRunning && !mForegroundRunning) {
      mHandler.post(new Runnable(){
        @Override public void run(){
          mForegroundOp.onTerm(FrameworkPerfActivity.this);
          mBackgroundOp.onTerm(FrameworkPerfActivity.this);
          if (mDoneCallback != null) {
            mDoneCallback.run();
          }
        }
      }
);
    }
  }
}
